"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_arcade_functions_featuresetbase_js"],{

/***/ "./node_modules/@arcgis/core/arcade/functions/featuresetbase.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/functions/featuresetbase.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   registerFunctions: () => (/* binding */ oe)
/* harmony export */ });
/* harmony import */ var _ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../ArcadeDate.js */ "./node_modules/@arcgis/core/arcade/ArcadeDate.js");
/* harmony import */ var _ArcadePortal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../ArcadePortal.js */ "./node_modules/@arcgis/core/arcade/ArcadePortal.js");
/* harmony import */ var _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../Dictionary.js */ "./node_modules/@arcgis/core/arcade/Dictionary.js");
/* harmony import */ var _executionError_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../executionError.js */ "./node_modules/@arcgis/core/arcade/executionError.js");
/* harmony import */ var _Feature_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../Feature.js */ "./node_modules/@arcgis/core/arcade/Feature.js");
/* harmony import */ var _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureSetCollection.js */ "./node_modules/@arcgis/core/arcade/featureSetCollection.js");
/* harmony import */ var _featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../featureSetUtils.js */ "./node_modules/@arcgis/core/arcade/featureSetUtils.js");
/* harmony import */ var _ImmutableArray_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../ImmutableArray.js */ "./node_modules/@arcgis/core/arcade/ImmutableArray.js");
/* harmony import */ var _chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../chunks/languageUtils.js */ "./node_modules/@arcgis/core/chunks/languageUtils.js");
/* harmony import */ var _portalUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../portalUtils.js */ "./node_modules/@arcgis/core/arcade/portalUtils.js");
/* harmony import */ var _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../featureset/actions/Adapted.js */ "./node_modules/@arcgis/core/arcade/featureset/actions/Adapted.js");
/* harmony import */ var _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../featureset/actions/AttributeFilter.js */ "./node_modules/@arcgis/core/arcade/featureset/actions/AttributeFilter.js");
/* harmony import */ var _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../featureset/actions/OrderBy.js */ "./node_modules/@arcgis/core/arcade/featureset/actions/OrderBy.js");
/* harmony import */ var _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../featureset/actions/Top.js */ "./node_modules/@arcgis/core/arcade/featureset/actions/Top.js");
/* harmony import */ var _featureset_sources_Empty_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../featureset/sources/Empty.js */ "./node_modules/@arcgis/core/arcade/featureset/sources/Empty.js");
/* harmony import */ var _featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../featureset/sources/FeatureLayerMemory.js */ "./node_modules/@arcgis/core/arcade/featureset/sources/FeatureLayerMemory.js");
/* harmony import */ var _featureset_support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../featureset/support/OrderbyClause.js */ "./node_modules/@arcgis/core/arcade/featureset/support/OrderbyClause.js");
/* harmony import */ var _featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../featureset/support/shared.js */ "./node_modules/@arcgis/core/arcade/featureset/support/shared.js");
/* harmony import */ var _featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../featureset/support/sqlUtils.js */ "./node_modules/@arcgis/core/arcade/featureset/support/sqlUtils.js");
/* harmony import */ var _fieldStats_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./fieldStats.js */ "./node_modules/@arcgis/core/arcade/functions/fieldStats.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../core/sql/WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/* harmony import */ var _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js");
/* harmony import */ var _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../layers/support/Field.js */ "./node_modules/@arcgis/core/layers/support/Field.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function Y(e,t,n,a){if(1===a.length){if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(a[0]))return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,a[0],-1);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(a[0]))return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,a[0].toArray(),-1)}return (0,_fieldStats_js__WEBPACK_IMPORTED_MODULE_19__.calculateStat)(e,a,-1)}async function X(e,t,n){const a=e.getVariables();if(a.length>0){const i=[];for(let e=0;e<a.length;e++){const r={name:a[e]};i.push(await t.evaluateIdentifier(n,r))}const r={};for(let e=0;e<a.length;e++)r[a[e]]=i[e];return e.parameters=r,e}return e}function ee(e,t,n=null){for(const a in e)if(a.toLowerCase()===t.toLowerCase())return e[a];return n}function te(e){if(null===e)return null;const t={type:ee(e,"type",""),name:ee(e,"name","")};if("range"===t.type)t.range=ee(e,"range",[]);else{t.codedValues=[];for(const n of ee(e,"codedValues",[]))t.codedValues.push({name:ee(n,"name",""),code:ee(n,"code",null)})}return t}function ne(e){if(null===e)return null;const t={},n=ee(e,"wkt",null);null!==n&&(t.wkt=n);const a=ee(e,"wkid",null);return null!==a&&(t.wkid=a),t}function ae(e){if(null===e)return null;const t={hasZ:ee(e,"hasz",!1),hasM:ee(e,"hasm",!1)},n=ee(e,"spatialreference",null);n&&(t.spatialReference=ne(n));const a=ee(e,"x",null);if(null!==a)return t.x=a,t.y=ee(e,"y",null),t;const i=ee(e,"rings",null);if(null!==i)return t.rings=i,t;const r=ee(e,"paths",null);if(null!==r)return t.paths=r,t;const s=ee(e,"points",null);if(null!==s)return t.points=s,t;for(const o of["xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]){const n=ee(e,o,null);null!==n&&(t[o]=n)}return t}function ie(e,t){for(const n of t)if(n===e)return!0;return!1}function re(e){return!!e.layerDefinition&&(!!e.featureSet&&(!1!==ie(e.layerDefinition.geometryType,["",null,"esriGeometryNull","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","esriGeometryMultipoint","esriGeometryEnvelope"])&&(!1!==(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(e.layerDefinition.fields)&&!1!==(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(e.featureSet.features))))}function se(e){return"utc"===e?.toLowerCase()?"UTC":"unknown"===e?.toLowerCase()?"Unknown":e}function oe(q){"async"===q.mode&&(q.functions.timezone=function(t,r){return q.standardFunctionAsync(t,r,(async(s,o,l)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(l,1,2,t,r),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.n)(l[0]))return"Unknown";if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(l[0]))return"Unknown";if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(l[0])){if(await l[0].load(),1===l.length||null===l[1])return l[0].datesInUnknownTimezone?se("unknown"):se(l[0].dateFieldsTimeZone);if(!(l[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"])||!1===l[1].hasField("type"))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r);const e=l[1].field("type");if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(e))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r);switch((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(e).toLowerCase()){case"preferredtimezone":return se(l[0].preferredTimeZone);case"editfieldsinfo":return se(l[0].editFieldsInfo?.timeZone??null);case"timeinfo":return se(l[0].timeInfo?.timeZone??null);case"field":if(l[1].hasField("fieldname")&&(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(l[1].field("fieldname")))return se(l[0].fieldTimeZone((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(l[1].field("fieldname"))))}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(t,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,r)}const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.l)(l[0],(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(t));if(null===f)return null;const u=f.timeZone;return"system"===u?_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_0__.ArcadeDate.systemTimeZoneCanonicalName:"utc"===u.toLowerCase()?"UTC":"unknown"===u.toLowerCase()?"Unknown":u}))},q.functions.sqltimestamp=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,1,3,e,t);const o=s[0];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.k)(o)){if(1===s.length)return o.toSQLWithKeyword();if(2===s.length)return o.changeTimeZone((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1])).toSQLWithKeyword();throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(o))return o.toSQLWithKeyword();if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(o)){if(3!==s.length)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);await o.load();const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1]);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.m)(s[2]))return s[2].toSQLWithKeyword();if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.k)(s[2]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);const r=o.fieldTimeZone(n);return null===r?s[2].toSQLWithKeyword():s[2].changeTimeZone(r).toSQLWithKeyword()}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"sqltimestamp",min:2,max:4}),q.functions.featuresetbyid=function(e,t){return q.standardFunctionAsync(e,t,((n,r,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,2,4,e,t),o[0]instanceof _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__["default"]){const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[2],null);const s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[3],!0));if(null===r&&(r=["*"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(r))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return o[0].featureSetById(n,s,r)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"featuresetbyid",min:2,max:4}),q.functions.getfeatureset=function(e,t){return q.standardFunctionAsync(e,t,((n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,1,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.r)(s[0])){let t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(s[1],"datasource");return null===t&&(t="datasource"),t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(t).toLowerCase(),(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.convertToFeatureSet)(s[0].fullSchema(),t,e.lrucache,e.interceptor,e.spatialReference)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"getfeatureset",min:1,max:2}),q.functions.featuresetbyportalitem=function(e,n){return q.standardFunctionAsync(e,n,((r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,2,5,e,n),null===o[0])throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.PortalRequired,n);if(o[0]instanceof _ArcadePortal_js__WEBPACK_IMPORTED_MODULE_1__["default"]){const t=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]),r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[2]);let s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[3],null);const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[4],!0));if(null===s&&(s=["*"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(s))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,n);let u=null;return u=e.services?.portal?e.services.portal:_portal_Portal_js__WEBPACK_IMPORTED_MODULE_24__["default"].getDefault(),u=(0,_portalUtils_js__WEBPACK_IMPORTED_MODULE_9__.getPortal)(o[0],u),(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromPortalItem)(t,r,e.spatialReference,s,f,u,e.lrucache,e.interceptor)}if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.PortalRequired,n);const f=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[0]),u=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let c=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[2],null);const d=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[3],!0));if(null===c&&(c=["*"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(c))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,n);return (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromPortalItem)(f,u,e.spatialReference,c,d,e.services?.portal??_portal_Portal_js__WEBPACK_IMPORTED_MODULE_24__["default"].getDefault(),e.lrucache,e.interceptor)}))},q.signatures.push({name:"featuresetbyportalitem",min:2,max:5}),q.functions.featuresetbyname=function(e,t){return q.standardFunctionAsync(e,t,((n,r,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,2,4,e,t),o[0]instanceof _featureSetCollection_js__WEBPACK_IMPORTED_MODULE_5__["default"]){const n=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o[1]);let r=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[2],null);const s=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(o[3],!0));if(null===r&&(r=["*"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(r))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return o[0].featureSetByName(n,s,r)}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"featuresetbyname",min:2,max:4}),q.functions.featureset=function(e,t){return q.standardFunction(e,t,((r,s,o)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,1,1,e,t);let l=o[0];const f={layerDefinition:{geometryType:"",objectIdField:"",hasM:!1,hasZ:!1,globalIdField:"",typeIdField:"",fields:[]},featureSet:{geometryType:"",features:[]}};if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(l))l=JSON.parse(l),void 0!==l.layerDefinition?(f.layerDefinition=l.layerDefinition,f.featureSet=l.featureSet,l.layerDefinition.spatialReference&&(f.layerDefinition.spatialReference=l.layerDefinition.spatialReference)):(f.featureSet.features=l.features,f.featureSet.geometryType=l.geometryType,f.layerDefinition.geometryType=f.featureSet.geometryType,f.layerDefinition.objectIdField=l.objectIdFieldName??"",f.layerDefinition.typeIdField=l.typeIdFieldName,f.layerDefinition.globalIdField=l.globalIdFieldName,f.layerDefinition.fields=l.fields,l.spatialReference&&(f.layerDefinition.spatialReference=l.spatialReference));else{if(!(o[0]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{l=JSON.parse(o[0].castToText(!0));const e=ee(l,"layerdefinition");if(null!==e){f.layerDefinition.geometryType=ee(e,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.globalIdField=ee(e,"globalidfield",""),f.layerDefinition.objectIdField=ee(e,"objectidfield",""),f.layerDefinition.typeIdField=ee(e,"typeidfield",""),f.layerDefinition.hasZ=!0===ee(e,"hasz",!1),f.layerDefinition.hasM=!0===ee(e,"hasm",!1);const t=ee(e,"spatialreference",null);t&&(f.layerDefinition.spatialReference=ne(t));for(const a of ee(e,"fields",[])){const e={name:ee(a,"name",""),alias:ee(a,"alias",""),type:ee(a,"type",""),nullable:ee(a,"nullable",!0),editable:ee(a,"editable",!0),length:ee(a,"length",null),domain:te(ee(a,"domain"))};f.layerDefinition.fields.push(e)}const n=ee(l,"featureset",null);if(n){const e={};for(const t of f.layerDefinition.fields)e[t.name.toLowerCase()]=t.name;for(const t of ee(n,"features",[])){const n={},a=ee(t,"attributes",{});for(const t in a)n[e[t.toLowerCase()]]=a[t];f.featureSet.features.push({attributes:n,geometry:ae(ee(t,"geometry",null))})}}}else{f.layerDefinition.hasZ=!0===ee(l,"hasz",!1),f.layerDefinition.hasM=!0===ee(l,"hasm",!1),f.layerDefinition.geometryType=ee(l,"geometrytype",""),f.featureSet.geometryType=f.layerDefinition.geometryType,f.layerDefinition.objectIdField=ee(l,"objectidfieldname",""),f.layerDefinition.typeIdField=ee(l,"typeidfieldname","");const e=ee(l,"spatialreference",null);e&&(f.layerDefinition.spatialReference=ne(e));let t=ee(l,"fields",null);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(t))for(const i of t){const e={name:ee(i,"name",""),alias:ee(i,"alias",""),type:ee(i,"type",""),nullable:ee(i,"nullable",!0),editable:ee(i,"editable",!0),length:ee(i,"length",null),domain:te(ee(i,"domain"))};f.layerDefinition.fields.push(e)}else t=null,f.layerDefinition.fields=t;const n={};for(const i of f.layerDefinition.fields)n[i.name.toLowerCase()]=i.name;let a=ee(l,"features",null);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(a))for(const i of a){const e={},t=ee(i,"attributes",{});for(const a in t)e[n[a.toLowerCase()]]=t[a];f.featureSet.features.push({attributes:e,geometry:ae(ee(i,"geometry",null))})}else a=null,f.featureSet.features=a}}}if(!1===re(f))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);return f.layerDefinition.geometryType||(f.layerDefinition.geometryType="esriGeometryNull"),_featureset_sources_FeatureLayerMemory_js__WEBPACK_IMPORTED_MODULE_15__["default"].create(f,e.spatialReference)}))},q.signatures.push({name:"featureset",min:1,max:1}),q.functions.filter=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(s[0])||(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(s[0])){const n=[];let r=s[0];r instanceof _ImmutableArray_js__WEBPACK_IMPORTED_MODULE_7__["default"]&&(r=r.toArray());let o=null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.i)(s[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);o=s[1].createFunction(e);for(const e of r){const t=o(e);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_20__.isPromiseLike)(t)?!0===await t&&n.push(e):!0===t&&n.push(e)}return n}if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(s[0])){const t=await s[0].load(),n=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(s[1],t.getFieldsIndex(),t.dateFieldsTimeZoneDefaultUTC),a=n.getVariables();if(a.length>0){const t=[];for(let n=0;n<a.length;n++){const i={name:a[n]};t.push(await q.evaluateIdentifier(e,i))}const i={};for(let e=0;e<a.length;e++)i[a[e]]=t[e];return n.parameters=i,new _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__["default"]({parentfeatureset:s[0],whereclause:n})}return new _featureset_actions_AttributeFilter_js__WEBPACK_IMPORTED_MODULE_11__["default"]({parentfeatureset:s[0],whereclause:n})}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"filter",min:2,max:2}),q.functions.orderby=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(s[0])){const e=new _featureset_support_OrderbyClause_js__WEBPACK_IMPORTED_MODULE_16__["default"](s[1]);return new _featureset_actions_OrderBy_js__WEBPACK_IMPORTED_MODULE_12__["default"]({parentfeatureset:s[0],orderbyclause:e})}throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"orderby",min:2,max:2}),q.functions.top=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,2,2,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(s[0]))return new _featureset_actions_Top_js__WEBPACK_IMPORTED_MODULE_13__["default"]({parentfeatureset:s[0],topnum:s[1]});if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(s[0]))return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1])>=s[0].length?s[0].slice(0):s[0].slice(0,(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1]));if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(s[0]))return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1])>=s[0].length()?s[0].slice(0):s[0].slice(0,(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(s[1]));throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"top",min:2,max:2}),q.functions.first=function(e,t){return q.standardFunctionAsync(e,t,(async(n,a,i)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(i,1,1,e,t),(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(i[0])){const t=await i[0].first(n.abortSignal);if(null!==t){const n=_Feature_js__WEBPACK_IMPORTED_MODULE_4__["default"].createFromGraphicLikeObject(t.geometry,t.attributes,i[0],e.timeZone);return n._underlyingGraphic=t,n}return t}return (0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(i[0])?0===i[0].length?null:i[0][0]:(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(i[0])?0===i[0].length()?null:i[0].get(0):null}))},q.signatures.push({name:"first",min:1,max:1}),q.functions.attachments=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,1,2,e,t);const l={minsize:-1,maxsize:-1,types:null,returnMetadata:!1};if(o.length>1)if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]){if(o[1].hasField("minsize")&&(l.minsize=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(o[1].field("minsize"))),o[1].hasField("metadata")&&(l.returnMetadata=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)(o[1].field("metadata"))),o[1].hasField("maxsize")&&(l.maxsize=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.g)(o[1].field("maxsize"))),o[1].hasField("types")){const e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.a2)(o[1].field("types"),!1);e.length>0&&(l.types=e)}}else if(null!==o[1])throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.r)(o[0])){let t=o[0]._layer;return t instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]&&(t=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(t,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===t?[]:!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(t)?[]:(await t.load(),t.queryAttachments(o[0].field(t.objectIdField),l.minsize,l.maxsize,l.types,l.returnMetadata))}if(null===o[0])return[];throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}))},q.signatures.push({name:"attachments",min:1,max:2}),q.functions.featuresetbyrelationshipname=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,2,4,e,t);const o=s[0],l=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[1]);let d=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(s[2],null);const m=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.h)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(s[3],!0));if(null===d&&(d=["*"]),!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(d))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);if(null===s[0])return null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.r)(s[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);let y=o._layer;if(y instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]&&(y=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(y,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===y)return null;if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(y))return null;y=await y.load();const w=y.relationshipMetaData().filter((e=>e.name===l));if(0===w.length)return null;if(void 0!==w[0].relationshipTableId&&null!==w[0].relationshipTableId&&w[0].relationshipTableId>-1)return (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromRelationship)(y,w[0],o.field(y.objectIdField),y.spatialReference,d,m,e.lrucache,e.interceptor);let g=y.serviceUrl();if(!g)return null;g="/"===g.charAt(g.length-1)?g+w[0].relatedTableId.toString():g+"/"+w[0].relatedTableId.toString();const I=await (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSetFromUrl)(g,y.spatialReference,d,m,e.lrucache,e.interceptor);await I.load();let D=I.relationshipMetaData();if(D=D.filter((e=>e.id===w[0].id)),!1===o.hasField(w[0].keyField)||null===o.field(w[0].keyField)){const e=await y.getFeatureByObjectId(o.field(y.objectIdField),[w[0].keyField]);if(e){const t=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(D[0].keyField+"= @id",I.getFieldsIndex(),I.dateFieldsTimeZoneDefaultUTC);return t.parameters={id:e.attributes[w[0].keyField]},I.filter(t)}return new _featureset_sources_Empty_js__WEBPACK_IMPORTED_MODULE_14__["default"]({parentfeatureset:I})}const T=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(D[0].keyField+"= @id",I.getFieldsIndex(),I.dateFieldsTimeZoneDefaultUTC);return T.parameters={id:o.field(w[0].keyField)},I.filter(T)}))},q.signatures.push({name:"featuresetbyrelationshipname",min:2,max:4}),q.functions.featuresetbyassociation=function(e,t){return q.standardFunctionAsync(e,t,(async(n,r,s)=>{(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(s,2,3,e,t);const o=s[0],l=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.H)(s[1],"")).toLowerCase(),u=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(s[2])?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(s[2]):null;if(null===s[0])return null;if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.r)(s[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);let c=o._layer;if(c instanceof _layers_FeatureLayer_js__WEBPACK_IMPORTED_MODULE_22__["default"]&&(c=(0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructFeatureSet)(c,e.spatialReference,["*"],!0,e.lrucache,e.interceptor)),null===c)return null;if(!1===(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(c))return null;await c.load();const m=c.serviceUrl(),y=await (0,_featureSetUtils_js__WEBPACK_IMPORTED_MODULE_6__.constructAssociationMetaDataFeatureSetFromUrl)(m,e.spatialReference);let w=null,I=null,D=!1;if(null!==u&&""!==u&&void 0!==u){for(const e of y.terminals)e.terminalName===u&&(I=e.terminalId);null===I&&(D=!0)}const T=y.associations.getFieldsIndex(),b=T.get("TOGLOBALID").name,A=T.get("FROMGLOBALID").name,x=T.get("TOTERMINALID").name,L=T.get("FROMTERMINALID").name,S=T.get("FROMNETWORKSOURCEID").name,C=T.get("TONETWORKSOURCEID").name,v=T.get("ASSOCIATIONTYPE").name,M=T.get("ISCONTENTVISIBLE").name,k=T.get("OBJECTID").name;for(const e of c.fields)if("global-id"===e.type){w=o.field(e.name);break}let O=null,z=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__["default"]({name:"percentalong",alias:"percentalong",type:"double"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create("0",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),W=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__["default"]({name:"side",alias:"side",type:"string"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create("''",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));const H="globalid",_="globalId",q={};for(const e in y.lkp)q[e]=y.lkp[e].sourceId;const B=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.StringToCodeAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__["default"]({name:"classname",alias:"classname",type:"string"}),null,q);let J="";switch(l){case"midspan":{J=`((${b}='${w}') OR ( ${A}='${w}')) AND (${v} IN (5))`,B.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${b}='${w}') THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const e=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,A));e.name=H,e.alias=H,O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(e,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${A}='${w}') THEN ${b} ELSE ${A} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),z=y.unVersion>=4?new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,T.get("PERCENTALONG").name)):new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__["default"]({name:"percentalong",alias:"percentalong",type:"double"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create("0",y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case"junctionedge":{J=`((${b}='${w}') OR ( ${A}='${w}')) AND (${v} IN (4,6))`,B.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${b}='${w}') THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const e=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,A));e.name=H,e.alias=H,O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(e,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${A}='${w}') THEN ${b} ELSE ${A} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC)),W=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(new _layers_support_Field_js__WEBPACK_IMPORTED_MODULE_23__["default"]({name:"side",alias:"side",type:"string"}),_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(`CASE WHEN (${v}=4) THEN 'from' ELSE 'to' END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case"connected":{let e=`${b}='@T'`,t=`${A}='@T'`;null!==I&&(e+=` AND ${x}=@A`,t+=` AND ${L}=@A`),J="(("+e+") OR ("+t+"))",J=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.S)(J,"@T",w??""),e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.S)(e,"@T",w??""),null!==I&&(e=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.S)(e,"@A",I.toString()),J=(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.S)(J,"@A",I.toString())),B.codefield=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create("CASE WHEN "+e+` THEN ${S} ELSE ${C} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC);const n=(0,_featureset_support_shared_js__WEBPACK_IMPORTED_MODULE_17__.cloneField)(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,A));n.name=H,n.alias=H,O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.SqlExpressionAdapted(n,_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create("CASE WHEN "+e+` THEN ${A} ELSE ${b} END`,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC));break}case"container":J=`${b}='${w}' AND ${v} = 2`,null!==I&&(J+=` AND ${x} = `+I.toString()),B.codefield=S,J="( "+J+" )",O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,A),H,H);break;case"content":J=`(${A}='${w}' AND ${v} = 2)`,null!==I&&(J+=` AND ${L} = `+I.toString()),B.codefield=C,J="( "+J+" )",O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,b),H,H);break;case"structure":J=`(${b}='${w}' AND ${v} = 3)`,null!==I&&(J+=` AND ${x} = `+I.toString()),B.codefield=S,J="( "+J+" )",O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,A),H,_);break;case"attached":J=`(${A}='${w}' AND ${v} = 3)`,null!==I&&(J+=` AND ${L} = `+I.toString()),B.codefield=C,J="( "+J+" )",O=new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.FieldRename(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,b),H,_);break;default:throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t)}D&&(J="1 <> 1");return new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet({parentfeatureset:y.associations,adaptedFields:[new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,k)),new _featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.OriginalField(_featureset_actions_Adapted_js__WEBPACK_IMPORTED_MODULE_10__.AdaptedFeatureSet.findField(y.associations.fields,M)),O,W,B,z],extraFilter:J?_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(J,y.associations.getFieldsIndex(),y.associations.dateFieldsTimeZoneDefaultUTC):null})}))},q.signatures.push({name:"featuresetbyassociation",min:2,max:6}),q.functions.groupby=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,3,3,e,t),!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(o[0]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);const l=await o[0].load(),f=[],u=[];let c=!1,d=[];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[1]))d.push(o[1]);else if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"])d.push(o[1]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(o[1]))d=o[1];else{if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(o[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);d=o[1].toArray()}for(const m of d)if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(m)){const e=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(m),l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC),t=!0===(0,_featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__.isSingleField)(e)?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(m):"%%%%FIELDNAME";f.push({name:t,expression:e}),"%%%%FIELDNAME"===t&&(c=!0)}else{if(!(m instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=m.hasField("name")?m.field("name"):"%%%%FIELDNAME",r=m.hasField("expression")?m.field("expression"):"";if("%%%%FIELDNAME"===n&&(c=!0),!n)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);f.push({name:n,expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(r||n,l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC)})}}if(d=[],(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[2]))d.push(o[2]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(o[2]))d=o[2];else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(o[2]))d=o[2].toArray();else{if(!(o[2]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);d.push(o[2])}for(const m of d){if(!(m instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=m.hasField("name")?m.field("name"):"",r=m.hasField("statistic")?m.field("statistic"):"",s=m.hasField("expression")?m.field("expression"):"";if(!n||!r||!s)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);u.push({name:n,statistic:r.toLowerCase(),expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(s,l.getFieldsIndex(),l.dateFieldsTimeZoneDefaultUTC)})}}if(c){const e={};for(const n of l.fields)e[n.name.toLowerCase()]=1;for(const n of f)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);for(const n of u)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of f)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}for(const t of f)await X(t.expression,q,e);for(const t of u)await X(t.expression,q,e);return o[0].groupby(f,u)}))},q.signatures.push({name:"groupby",min:3,max:3}),q.functions.distinct=function(e,t){return q.standardFunctionAsync(e,t,(async(r,s,o)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(o[0])){(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(o,2,2,e,t);const r=await o[0].load(),s=[];let l=[];if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o[1]))l.push(o[1]);else if(o[1]instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"])l.push(o[1]);else if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.o)(o[1]))l=o[1];else{if(!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.q)(o[1]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);l=o[1].toArray()}let f=!1;for(const o of l)if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.c)(o)){const e=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o),r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC),t=!0===(0,_featureset_support_sqlUtils_js__WEBPACK_IMPORTED_MODULE_18__.isSingleField)(e)?(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.j)(o):"%%%%FIELDNAME";s.push({name:t,expression:e}),"%%%%FIELDNAME"===t&&(f=!0)}else{if(!(o instanceof _Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"]))throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);{const n=o.hasField("name")?o.field("name"):"%%%%FIELDNAME",l=o.hasField("expression")?o.field("expression"):"";if("%%%%FIELDNAME"===n&&(f=!0),!n)throw new _executionError_js__WEBPACK_IMPORTED_MODULE_3__.ArcadeExecutionError(e,_executionError_js__WEBPACK_IMPORTED_MODULE_3__.ExecutionErrorCodes.InvalidParameter,t);s.push({name:n,expression:_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_21__.WhereClause.create(l||n,r.getFieldsIndex(),r.dateFieldsTimeZoneDefaultUTC)})}}if(f){const e={};for(const n of r.fields)e[n.name.toLowerCase()]=1;for(const n of s)"%%%%FIELDNAME"!==n.name&&(e[n.name.toLowerCase()]=1);let t=0;for(const n of s)if("%%%%FIELDNAME"===n.name){for(;1===e["field_"+t.toString()];)t++;e["field_"+t.toString()]=1,n.name="FIELD_"+t.toString()}}for(const t of s)await X(t.expression,q,e);return o[0].groupby(s,[])}return Y("distinct",r,s,o)}))}),q.functions.getfeaturesetinfo=function(e,t){return q.standardFunctionAsync(e,t,(async(a,i,r)=>{if((0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.E)(r,1,1,e,t),!(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.u)(r[0]))return null;const s=await r[0].getFeatureSetInfo();return s?_Dictionary_js__WEBPACK_IMPORTED_MODULE_2__["default"].convertObjectToArcadeDictionary({layerId:s.layerId,layerName:s.layerName,itemId:s.itemId,serviceLayerUrl:s.serviceLayerUrl,webMapLayerId:s.webMapLayerId??null,webMapLayerTitle:s.webMapLayerTitle??null,className:null,objectClassId:null},(0,_chunks_languageUtils_js__WEBPACK_IMPORTED_MODULE_8__.L)(e),!1,!1):null}))},q.signatures.push({name:"getfeaturesetinfo",min:1,max:1})}


/***/ }),

/***/ "./node_modules/@arcgis/core/arcade/portalUtils.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/arcade/portalUtils.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPortal: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function l(l,t){if(null===l)return t;return new _portal_Portal_js__WEBPACK_IMPORTED_MODULE_0__["default"]({url:l.field("url")})}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2FyY2FkZV9mdW5jdGlvbnNfZmVhdHVyZXNldGJhc2VfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDb25ELG9CQUFvQixpQkFBaUIsR0FBRywyREFBQyxjQUFjLDhEQUFDLFlBQVksR0FBRywyREFBQyxjQUFjLDhEQUFDLHNCQUFzQixPQUFPLDhEQUFDLFNBQVMsd0JBQXdCLHlCQUF5QixlQUFlLFdBQVcsWUFBWSxXQUFXLEtBQUssU0FBUyxXQUFXLHdDQUF3QyxXQUFXLFlBQVksV0FBVyxpQkFBaUIsd0JBQXdCLFNBQVMsd0JBQXdCLGtFQUFrRSxTQUFTLGVBQWUsd0JBQXdCLFNBQVMsMkNBQTJDLDZDQUE2QyxLQUFLLGlCQUFpQiwwREFBMEQsNENBQTRDLEVBQUUsU0FBUyxlQUFlLHdCQUF3QixVQUFVLG9CQUFvQixvQkFBb0IsMEJBQTBCLDhCQUE4QixlQUFlLHdCQUF3QixTQUFTLDBDQUEwQyxpQ0FBaUMsOEJBQThCLHVCQUF1Qiw4Q0FBOEMsMkJBQTJCLCtCQUErQiwyQkFBMkIsK0JBQStCLDRCQUE0QixnQ0FBZ0MseUVBQXlFLHFCQUFxQixtQkFBbUIsU0FBUyxpQkFBaUIsbUNBQW1DLFNBQVMsZUFBZSwwT0FBME8sMkRBQUMsaUNBQWlDLDJEQUFDLDJCQUEyQixlQUFlLDhFQUE4RSxlQUFlLHNEQUFzRCxtREFBbUQsR0FBRywyREFBQyxZQUFZLDJEQUFDLHVCQUF1QixHQUFHLDJEQUFDLHVCQUF1QixHQUFHLDJEQUFDLFFBQVEsNEhBQTRILG9CQUFvQixzREFBQyx3Q0FBd0Msb0VBQUMsR0FBRyxtRUFBQyxxQkFBcUIsMkJBQTJCLFFBQVEsMkRBQUMsY0FBYyxvRUFBQyxHQUFHLG1FQUFDLHFCQUFxQixPQUFPLDJEQUFDLG1CQUFtQiwwREFBMEQsb0VBQW9FLHdEQUF3RCwy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RSxRQUFRLDhDQUE4QyxLQUFLLDZCQUE2QixLQUFLLHlEQUF5RCwyQ0FBMkMsMEJBQTBCLDJCQUEyQixHQUFHLDhDQUE4QyxtREFBbUQsR0FBRywyREFBQyxhQUFhLDJEQUFDLG1CQUFtQix1Q0FBdUMsU0FBUyxzREFBQyxrQ0FBa0MsME1BQTBNLENBQUMsMkRBQUMsZ0JBQWdCLEdBQUcsb0JBQW9CLHFDQUFxQyxFQUFrQzs7Ozs7Ozs7Ozs7Ozs7OztBQ0o1bHRCO0FBQ0E7QUFDQTtBQUNBO0FBQ21DLGdCQUFnQixxQkFBcUIsV0FBVyx5REFBQyxFQUFFLG1CQUFtQixFQUF5QiIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9hcmNhZGUvZnVuY3Rpb25zL2ZlYXR1cmVzZXRiYXNlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9hcmNhZGUvcG9ydGFsVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtBcmNhZGVEYXRlIGFzIGV9ZnJvbVwiLi4vQXJjYWRlRGF0ZS5qc1wiO2ltcG9ydCB0IGZyb21cIi4uL0FyY2FkZVBvcnRhbC5qc1wiO2ltcG9ydCBuIGZyb21cIi4uL0RpY3Rpb25hcnkuanNcIjtpbXBvcnR7QXJjYWRlRXhlY3V0aW9uRXJyb3IgYXMgYSxFeGVjdXRpb25FcnJvckNvZGVzIGFzIGl9ZnJvbVwiLi4vZXhlY3V0aW9uRXJyb3IuanNcIjtpbXBvcnQgciBmcm9tXCIuLi9GZWF0dXJlLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vZmVhdHVyZVNldENvbGxlY3Rpb24uanNcIjtpbXBvcnR7Y29udmVydFRvRmVhdHVyZVNldCBhcyBvLGNvbnN0cnVjdEZlYXR1cmVTZXRGcm9tUG9ydGFsSXRlbSBhcyBsLGNvbnN0cnVjdEZlYXR1cmVTZXQgYXMgZixjb25zdHJ1Y3RGZWF0dXJlU2V0RnJvbVJlbGF0aW9uc2hpcCBhcyB1LGNvbnN0cnVjdEZlYXR1cmVTZXRGcm9tVXJsIGFzIGMsY29uc3RydWN0QXNzb2NpYXRpb25NZXRhRGF0YUZlYXR1cmVTZXRGcm9tVXJsIGFzIGR9ZnJvbVwiLi4vZmVhdHVyZVNldFV0aWxzLmpzXCI7aW1wb3J0IG0gZnJvbVwiLi4vSW1tdXRhYmxlQXJyYXkuanNcIjtpbXBvcnR7RSBhcyBwLG4gYXMgeSxtIGFzIHcsdSBhcyBoLGMgYXMgZyxqIGFzIEYsbCBhcyBJLEwgYXMgRCxrIGFzIFQsSCBhcyBFLGggYXMgYixvIGFzIEEsciBhcyBOLHEgYXMgeCxpIGFzIEwsZyBhcyBTLGEyIGFzIEMsUyBhcyAkfWZyb21cIi4uLy4uL2NodW5rcy9sYW5ndWFnZVV0aWxzLmpzXCI7aW1wb3J0e2dldFBvcnRhbCBhcyB2fWZyb21cIi4uL3BvcnRhbFV0aWxzLmpzXCI7aW1wb3J0e1NxbEV4cHJlc3Npb25BZGFwdGVkIGFzIFAsU3RyaW5nVG9Db2RlQWRhcHRlZCBhcyBqLEZpZWxkUmVuYW1lIGFzIFUsQWRhcHRlZEZlYXR1cmVTZXQgYXMgUixPcmlnaW5hbEZpZWxkIGFzIFp9ZnJvbVwiLi4vZmVhdHVyZXNldC9hY3Rpb25zL0FkYXB0ZWQuanNcIjtpbXBvcnQgTSBmcm9tXCIuLi9mZWF0dXJlc2V0L2FjdGlvbnMvQXR0cmlidXRlRmlsdGVyLmpzXCI7aW1wb3J0IGsgZnJvbVwiLi4vZmVhdHVyZXNldC9hY3Rpb25zL09yZGVyQnkuanNcIjtpbXBvcnQgTyBmcm9tXCIuLi9mZWF0dXJlc2V0L2FjdGlvbnMvVG9wLmpzXCI7aW1wb3J0IHogZnJvbVwiLi4vZmVhdHVyZXNldC9zb3VyY2VzL0VtcHR5LmpzXCI7aW1wb3J0IFcgZnJvbVwiLi4vZmVhdHVyZXNldC9zb3VyY2VzL0ZlYXR1cmVMYXllck1lbW9yeS5qc1wiO2ltcG9ydCBIIGZyb21cIi4uL2ZlYXR1cmVzZXQvc3VwcG9ydC9PcmRlcmJ5Q2xhdXNlLmpzXCI7aW1wb3J0e2Nsb25lRmllbGQgYXMgR31mcm9tXCIuLi9mZWF0dXJlc2V0L3N1cHBvcnQvc2hhcmVkLmpzXCI7aW1wb3J0e2lzU2luZ2xlRmllbGQgYXMgX31mcm9tXCIuLi9mZWF0dXJlc2V0L3N1cHBvcnQvc3FsVXRpbHMuanNcIjtpbXBvcnR7Y2FsY3VsYXRlU3RhdCBhcyBxfWZyb21cIi4vZmllbGRTdGF0cy5qc1wiO2ltcG9ydHtpc1Byb21pc2VMaWtlIGFzIEJ9ZnJvbVwiLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2UgYXMgS31mcm9tXCIuLi8uLi9jb3JlL3NxbC9XaGVyZUNsYXVzZS5qc1wiO2ltcG9ydCBWIGZyb21cIi4uLy4uL2xheWVycy9GZWF0dXJlTGF5ZXIuanNcIjtpbXBvcnQgUSBmcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9GaWVsZC5qc1wiO2ltcG9ydCBKIGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWwuanNcIjtmdW5jdGlvbiBZKGUsdCxuLGEpe2lmKDE9PT1hLmxlbmd0aCl7aWYoQShhWzBdKSlyZXR1cm4gcShlLGFbMF0sLTEpO2lmKHgoYVswXSkpcmV0dXJuIHEoZSxhWzBdLnRvQXJyYXkoKSwtMSl9cmV0dXJuIHEoZSxhLC0xKX1hc3luYyBmdW5jdGlvbiBYKGUsdCxuKXtjb25zdCBhPWUuZ2V0VmFyaWFibGVzKCk7aWYoYS5sZW5ndGg+MCl7Y29uc3QgaT1bXTtmb3IobGV0IGU9MDtlPGEubGVuZ3RoO2UrKyl7Y29uc3Qgcj17bmFtZTphW2VdfTtpLnB1c2goYXdhaXQgdC5ldmFsdWF0ZUlkZW50aWZpZXIobixyKSl9Y29uc3Qgcj17fTtmb3IobGV0IGU9MDtlPGEubGVuZ3RoO2UrKylyW2FbZV1dPWlbZV07cmV0dXJuIGUucGFyYW1ldGVycz1yLGV9cmV0dXJuIGV9ZnVuY3Rpb24gZWUoZSx0LG49bnVsbCl7Zm9yKGNvbnN0IGEgaW4gZSlpZihhLnRvTG93ZXJDYXNlKCk9PT10LnRvTG93ZXJDYXNlKCkpcmV0dXJuIGVbYV07cmV0dXJuIG59ZnVuY3Rpb24gdGUoZSl7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7Y29uc3QgdD17dHlwZTplZShlLFwidHlwZVwiLFwiXCIpLG5hbWU6ZWUoZSxcIm5hbWVcIixcIlwiKX07aWYoXCJyYW5nZVwiPT09dC50eXBlKXQucmFuZ2U9ZWUoZSxcInJhbmdlXCIsW10pO2Vsc2V7dC5jb2RlZFZhbHVlcz1bXTtmb3IoY29uc3QgbiBvZiBlZShlLFwiY29kZWRWYWx1ZXNcIixbXSkpdC5jb2RlZFZhbHVlcy5wdXNoKHtuYW1lOmVlKG4sXCJuYW1lXCIsXCJcIiksY29kZTplZShuLFwiY29kZVwiLG51bGwpfSl9cmV0dXJuIHR9ZnVuY3Rpb24gbmUoZSl7aWYobnVsbD09PWUpcmV0dXJuIG51bGw7Y29uc3QgdD17fSxuPWVlKGUsXCJ3a3RcIixudWxsKTtudWxsIT09biYmKHQud2t0PW4pO2NvbnN0IGE9ZWUoZSxcIndraWRcIixudWxsKTtyZXR1cm4gbnVsbCE9PWEmJih0LndraWQ9YSksdH1mdW5jdGlvbiBhZShlKXtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDtjb25zdCB0PXtoYXNaOmVlKGUsXCJoYXN6XCIsITEpLGhhc006ZWUoZSxcImhhc21cIiwhMSl9LG49ZWUoZSxcInNwYXRpYWxyZWZlcmVuY2VcIixudWxsKTtuJiYodC5zcGF0aWFsUmVmZXJlbmNlPW5lKG4pKTtjb25zdCBhPWVlKGUsXCJ4XCIsbnVsbCk7aWYobnVsbCE9PWEpcmV0dXJuIHQueD1hLHQueT1lZShlLFwieVwiLG51bGwpLHQ7Y29uc3QgaT1lZShlLFwicmluZ3NcIixudWxsKTtpZihudWxsIT09aSlyZXR1cm4gdC5yaW5ncz1pLHQ7Y29uc3Qgcj1lZShlLFwicGF0aHNcIixudWxsKTtpZihudWxsIT09cilyZXR1cm4gdC5wYXRocz1yLHQ7Y29uc3Qgcz1lZShlLFwicG9pbnRzXCIsbnVsbCk7aWYobnVsbCE9PXMpcmV0dXJuIHQucG9pbnRzPXMsdDtmb3IoY29uc3QgbyBvZltcInhtaW5cIixcInhtYXhcIixcInltaW5cIixcInltYXhcIixcInptaW5cIixcInptYXhcIixcIm1taW5cIixcIm1tYXhcIl0pe2NvbnN0IG49ZWUoZSxvLG51bGwpO251bGwhPT1uJiYodFtvXT1uKX1yZXR1cm4gdH1mdW5jdGlvbiBpZShlLHQpe2Zvcihjb25zdCBuIG9mIHQpaWYobj09PWUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gcmUoZSl7cmV0dXJuISFlLmxheWVyRGVmaW5pdGlvbiYmKCEhZS5mZWF0dXJlU2V0JiYoITEhPT1pZShlLmxheWVyRGVmaW5pdGlvbi5nZW9tZXRyeVR5cGUsW1wiXCIsbnVsbCxcImVzcmlHZW9tZXRyeU51bGxcIixcImVzcmlHZW9tZXRyeVBvaW50XCIsXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiLFwiZXNyaUdlb21ldHJ5UG9seWdvblwiLFwiZXNyaUdlb21ldHJ5TXVsdGlwb2ludFwiLFwiZXNyaUdlb21ldHJ5RW52ZWxvcGVcIl0pJiYoITEhPT1BKGUubGF5ZXJEZWZpbml0aW9uLmZpZWxkcykmJiExIT09QShlLmZlYXR1cmVTZXQuZmVhdHVyZXMpKSkpfWZ1bmN0aW9uIHNlKGUpe3JldHVyblwidXRjXCI9PT1lPy50b0xvd2VyQ2FzZSgpP1wiVVRDXCI6XCJ1bmtub3duXCI9PT1lPy50b0xvd2VyQ2FzZSgpP1wiVW5rbm93blwiOmV9ZnVuY3Rpb24gb2UocSl7XCJhc3luY1wiPT09cS5tb2RlJiYocS5mdW5jdGlvbnMudGltZXpvbmU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmModCxyLChhc3luYyhzLG8sbCk9PntpZihwKGwsMSwyLHQscikseShsWzBdKSlyZXR1cm5cIlVua25vd25cIjtpZih3KGxbMF0pKXJldHVyblwiVW5rbm93blwiO2lmKGgobFswXSkpe2lmKGF3YWl0IGxbMF0ubG9hZCgpLDE9PT1sLmxlbmd0aHx8bnVsbD09PWxbMV0pcmV0dXJuIGxbMF0uZGF0ZXNJblVua25vd25UaW1lem9uZT9zZShcInVua25vd25cIik6c2UobFswXS5kYXRlRmllbGRzVGltZVpvbmUpO2lmKCEobFsxXWluc3RhbmNlb2Ygbil8fCExPT09bFsxXS5oYXNGaWVsZChcInR5cGVcIikpdGhyb3cgbmV3IGEodCxpLkludmFsaWRQYXJhbWV0ZXIscik7Y29uc3QgZT1sWzFdLmZpZWxkKFwidHlwZVwiKTtpZighMT09PWcoZSkpdGhyb3cgbmV3IGEodCxpLkludmFsaWRQYXJhbWV0ZXIscik7c3dpdGNoKEYoZSkudG9Mb3dlckNhc2UoKSl7Y2FzZVwicHJlZmVycmVkdGltZXpvbmVcIjpyZXR1cm4gc2UobFswXS5wcmVmZXJyZWRUaW1lWm9uZSk7Y2FzZVwiZWRpdGZpZWxkc2luZm9cIjpyZXR1cm4gc2UobFswXS5lZGl0RmllbGRzSW5mbz8udGltZVpvbmU/P251bGwpO2Nhc2VcInRpbWVpbmZvXCI6cmV0dXJuIHNlKGxbMF0udGltZUluZm8/LnRpbWVab25lPz9udWxsKTtjYXNlXCJmaWVsZFwiOmlmKGxbMV0uaGFzRmllbGQoXCJmaWVsZG5hbWVcIikmJmcobFsxXS5maWVsZChcImZpZWxkbmFtZVwiKSkpcmV0dXJuIHNlKGxbMF0uZmllbGRUaW1lWm9uZShGKGxbMV0uZmllbGQoXCJmaWVsZG5hbWVcIikpKSl9dGhyb3cgbmV3IGEodCxpLkludmFsaWRQYXJhbWV0ZXIscil9Y29uc3QgZj1JKGxbMF0sRCh0KSk7aWYobnVsbD09PWYpcmV0dXJuIG51bGw7Y29uc3QgdT1mLnRpbWVab25lO3JldHVyblwic3lzdGVtXCI9PT11P2Uuc3lzdGVtVGltZVpvbmVDYW5vbmljYWxOYW1lOlwidXRjXCI9PT11LnRvTG93ZXJDYXNlKCk/XCJVVENcIjpcInVua25vd25cIj09PXUudG9Mb3dlckNhc2UoKT9cIlVua25vd25cIjp1fSkpfSxxLmZ1bmN0aW9ucy5zcWx0aW1lc3RhbXA9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhuLHIscyk9PntwKHMsMSwzLGUsdCk7Y29uc3Qgbz1zWzBdO2lmKFQobykpe2lmKDE9PT1zLmxlbmd0aClyZXR1cm4gby50b1NRTFdpdGhLZXl3b3JkKCk7aWYoMj09PXMubGVuZ3RoKXJldHVybiBvLmNoYW5nZVRpbWVab25lKEYoc1sxXSkpLnRvU1FMV2l0aEtleXdvcmQoKTt0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KX1pZih3KG8pKXJldHVybiBvLnRvU1FMV2l0aEtleXdvcmQoKTtpZihoKG8pKXtpZigzIT09cy5sZW5ndGgpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7YXdhaXQgby5sb2FkKCk7Y29uc3Qgbj1GKHNbMV0pO2lmKHcoc1syXSkpcmV0dXJuIHNbMl0udG9TUUxXaXRoS2V5d29yZCgpO2lmKCExPT09VChzWzJdKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTtjb25zdCByPW8uZmllbGRUaW1lWm9uZShuKTtyZXR1cm4gbnVsbD09PXI/c1syXS50b1NRTFdpdGhLZXl3b3JkKCk6c1syXS5jaGFuZ2VUaW1lWm9uZShyKS50b1NRTFdpdGhLZXl3b3JkKCl9dGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCl9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwic3FsdGltZXN0YW1wXCIsbWluOjIsbWF4OjR9KSxxLmZ1bmN0aW9ucy5mZWF0dXJlc2V0YnlpZD1mdW5jdGlvbihlLHQpe3JldHVybiBxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKChuLHIsbyk9PntpZihwKG8sMiw0LGUsdCksb1swXWluc3RhbmNlb2Ygcyl7Y29uc3Qgbj1GKG9bMV0pO2xldCByPUUob1syXSxudWxsKTtjb25zdCBzPWIoRShvWzNdLCEwKSk7aWYobnVsbD09PXImJihyPVtcIipcIl0pLCExPT09QShyKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTtyZXR1cm4gb1swXS5mZWF0dXJlU2V0QnlJZChuLHMscil9dGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCl9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmVhdHVyZXNldGJ5aWRcIixtaW46MixtYXg6NH0pLHEuZnVuY3Rpb25zLmdldGZlYXR1cmVzZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LCgobixyLHMpPT57aWYocChzLDEsMixlLHQpLE4oc1swXSkpe2xldCB0PUUoc1sxXSxcImRhdGFzb3VyY2VcIik7cmV0dXJuIG51bGw9PT10JiYodD1cImRhdGFzb3VyY2VcIiksdD1GKHQpLnRvTG93ZXJDYXNlKCksbyhzWzBdLmZ1bGxTY2hlbWEoKSx0LGUubHJ1Y2FjaGUsZS5pbnRlcmNlcHRvcixlLnNwYXRpYWxSZWZlcmVuY2UpfXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpfSkpfSxxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImdldGZlYXR1cmVzZXRcIixtaW46MSxtYXg6Mn0pLHEuZnVuY3Rpb25zLmZlYXR1cmVzZXRieXBvcnRhbGl0ZW09ZnVuY3Rpb24oZSxuKXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSxuLCgocixzLG8pPT57aWYocChvLDIsNSxlLG4pLG51bGw9PT1vWzBdKXRocm93IG5ldyBhKGUsaS5Qb3J0YWxSZXF1aXJlZCxuKTtpZihvWzBdaW5zdGFuY2VvZiB0KXtjb25zdCB0PUYob1sxXSkscj1GKG9bMl0pO2xldCBzPUUob1szXSxudWxsKTtjb25zdCBmPWIoRShvWzRdLCEwKSk7aWYobnVsbD09PXMmJihzPVtcIipcIl0pLCExPT09QShzKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcixuKTtsZXQgdT1udWxsO3JldHVybiB1PWUuc2VydmljZXM/LnBvcnRhbD9lLnNlcnZpY2VzLnBvcnRhbDpKLmdldERlZmF1bHQoKSx1PXYob1swXSx1KSxsKHQscixlLnNwYXRpYWxSZWZlcmVuY2UscyxmLHUsZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKX1pZighMT09PWcob1swXSkpdGhyb3cgbmV3IGEoZSxpLlBvcnRhbFJlcXVpcmVkLG4pO2NvbnN0IGY9RihvWzBdKSx1PUYob1sxXSk7bGV0IGM9RShvWzJdLG51bGwpO2NvbnN0IGQ9YihFKG9bM10sITApKTtpZihudWxsPT09YyYmKGM9W1wiKlwiXSksITE9PT1BKGMpKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLG4pO3JldHVybiBsKGYsdSxlLnNwYXRpYWxSZWZlcmVuY2UsYyxkLGUuc2VydmljZXM/LnBvcnRhbD8/Si5nZXREZWZhdWx0KCksZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKX0pKX0scS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJmZWF0dXJlc2V0Ynlwb3J0YWxpdGVtXCIsbWluOjIsbWF4OjV9KSxxLmZ1bmN0aW9ucy5mZWF0dXJlc2V0YnluYW1lPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKGUsdCwoKG4scixvKT0+e2lmKHAobywyLDQsZSx0KSxvWzBdaW5zdGFuY2VvZiBzKXtjb25zdCBuPUYob1sxXSk7bGV0IHI9RShvWzJdLG51bGwpO2NvbnN0IHM9YihFKG9bM10sITApKTtpZihudWxsPT09ciYmKHI9W1wiKlwiXSksITE9PT1BKHIpKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpO3JldHVybiBvWzBdLmZlYXR1cmVTZXRCeU5hbWUobixzLHIpfXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpfSkpfSxxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImZlYXR1cmVzZXRieW5hbWVcIixtaW46MixtYXg6NH0pLHEuZnVuY3Rpb25zLmZlYXR1cmVzZXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uKGUsdCwoKHIscyxvKT0+e3AobywxLDEsZSx0KTtsZXQgbD1vWzBdO2NvbnN0IGY9e2xheWVyRGVmaW5pdGlvbjp7Z2VvbWV0cnlUeXBlOlwiXCIsb2JqZWN0SWRGaWVsZDpcIlwiLGhhc006ITEsaGFzWjohMSxnbG9iYWxJZEZpZWxkOlwiXCIsdHlwZUlkRmllbGQ6XCJcIixmaWVsZHM6W119LGZlYXR1cmVTZXQ6e2dlb21ldHJ5VHlwZTpcIlwiLGZlYXR1cmVzOltdfX07aWYoZyhsKSlsPUpTT04ucGFyc2UobCksdm9pZCAwIT09bC5sYXllckRlZmluaXRpb24/KGYubGF5ZXJEZWZpbml0aW9uPWwubGF5ZXJEZWZpbml0aW9uLGYuZmVhdHVyZVNldD1sLmZlYXR1cmVTZXQsbC5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZSYmKGYubGF5ZXJEZWZpbml0aW9uLnNwYXRpYWxSZWZlcmVuY2U9bC5sYXllckRlZmluaXRpb24uc3BhdGlhbFJlZmVyZW5jZSkpOihmLmZlYXR1cmVTZXQuZmVhdHVyZXM9bC5mZWF0dXJlcyxmLmZlYXR1cmVTZXQuZ2VvbWV0cnlUeXBlPWwuZ2VvbWV0cnlUeXBlLGYubGF5ZXJEZWZpbml0aW9uLmdlb21ldHJ5VHlwZT1mLmZlYXR1cmVTZXQuZ2VvbWV0cnlUeXBlLGYubGF5ZXJEZWZpbml0aW9uLm9iamVjdElkRmllbGQ9bC5vYmplY3RJZEZpZWxkTmFtZT8/XCJcIixmLmxheWVyRGVmaW5pdGlvbi50eXBlSWRGaWVsZD1sLnR5cGVJZEZpZWxkTmFtZSxmLmxheWVyRGVmaW5pdGlvbi5nbG9iYWxJZEZpZWxkPWwuZ2xvYmFsSWRGaWVsZE5hbWUsZi5sYXllckRlZmluaXRpb24uZmllbGRzPWwuZmllbGRzLGwuc3BhdGlhbFJlZmVyZW5jZSYmKGYubGF5ZXJEZWZpbml0aW9uLnNwYXRpYWxSZWZlcmVuY2U9bC5zcGF0aWFsUmVmZXJlbmNlKSk7ZWxzZXtpZighKG9bMF1pbnN0YW5jZW9mIG4pKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpO3tsPUpTT04ucGFyc2Uob1swXS5jYXN0VG9UZXh0KCEwKSk7Y29uc3QgZT1lZShsLFwibGF5ZXJkZWZpbml0aW9uXCIpO2lmKG51bGwhPT1lKXtmLmxheWVyRGVmaW5pdGlvbi5nZW9tZXRyeVR5cGU9ZWUoZSxcImdlb21ldHJ5dHlwZVwiLFwiXCIpLGYuZmVhdHVyZVNldC5nZW9tZXRyeVR5cGU9Zi5sYXllckRlZmluaXRpb24uZ2VvbWV0cnlUeXBlLGYubGF5ZXJEZWZpbml0aW9uLmdsb2JhbElkRmllbGQ9ZWUoZSxcImdsb2JhbGlkZmllbGRcIixcIlwiKSxmLmxheWVyRGVmaW5pdGlvbi5vYmplY3RJZEZpZWxkPWVlKGUsXCJvYmplY3RpZGZpZWxkXCIsXCJcIiksZi5sYXllckRlZmluaXRpb24udHlwZUlkRmllbGQ9ZWUoZSxcInR5cGVpZGZpZWxkXCIsXCJcIiksZi5sYXllckRlZmluaXRpb24uaGFzWj0hMD09PWVlKGUsXCJoYXN6XCIsITEpLGYubGF5ZXJEZWZpbml0aW9uLmhhc009ITA9PT1lZShlLFwiaGFzbVwiLCExKTtjb25zdCB0PWVlKGUsXCJzcGF0aWFscmVmZXJlbmNlXCIsbnVsbCk7dCYmKGYubGF5ZXJEZWZpbml0aW9uLnNwYXRpYWxSZWZlcmVuY2U9bmUodCkpO2Zvcihjb25zdCBhIG9mIGVlKGUsXCJmaWVsZHNcIixbXSkpe2NvbnN0IGU9e25hbWU6ZWUoYSxcIm5hbWVcIixcIlwiKSxhbGlhczplZShhLFwiYWxpYXNcIixcIlwiKSx0eXBlOmVlKGEsXCJ0eXBlXCIsXCJcIiksbnVsbGFibGU6ZWUoYSxcIm51bGxhYmxlXCIsITApLGVkaXRhYmxlOmVlKGEsXCJlZGl0YWJsZVwiLCEwKSxsZW5ndGg6ZWUoYSxcImxlbmd0aFwiLG51bGwpLGRvbWFpbjp0ZShlZShhLFwiZG9tYWluXCIpKX07Zi5sYXllckRlZmluaXRpb24uZmllbGRzLnB1c2goZSl9Y29uc3Qgbj1lZShsLFwiZmVhdHVyZXNldFwiLG51bGwpO2lmKG4pe2NvbnN0IGU9e307Zm9yKGNvbnN0IHQgb2YgZi5sYXllckRlZmluaXRpb24uZmllbGRzKWVbdC5uYW1lLnRvTG93ZXJDYXNlKCldPXQubmFtZTtmb3IoY29uc3QgdCBvZiBlZShuLFwiZmVhdHVyZXNcIixbXSkpe2NvbnN0IG49e30sYT1lZSh0LFwiYXR0cmlidXRlc1wiLHt9KTtmb3IoY29uc3QgdCBpbiBhKW5bZVt0LnRvTG93ZXJDYXNlKCldXT1hW3RdO2YuZmVhdHVyZVNldC5mZWF0dXJlcy5wdXNoKHthdHRyaWJ1dGVzOm4sZ2VvbWV0cnk6YWUoZWUodCxcImdlb21ldHJ5XCIsbnVsbCkpfSl9fX1lbHNle2YubGF5ZXJEZWZpbml0aW9uLmhhc1o9ITA9PT1lZShsLFwiaGFzelwiLCExKSxmLmxheWVyRGVmaW5pdGlvbi5oYXNNPSEwPT09ZWUobCxcImhhc21cIiwhMSksZi5sYXllckRlZmluaXRpb24uZ2VvbWV0cnlUeXBlPWVlKGwsXCJnZW9tZXRyeXR5cGVcIixcIlwiKSxmLmZlYXR1cmVTZXQuZ2VvbWV0cnlUeXBlPWYubGF5ZXJEZWZpbml0aW9uLmdlb21ldHJ5VHlwZSxmLmxheWVyRGVmaW5pdGlvbi5vYmplY3RJZEZpZWxkPWVlKGwsXCJvYmplY3RpZGZpZWxkbmFtZVwiLFwiXCIpLGYubGF5ZXJEZWZpbml0aW9uLnR5cGVJZEZpZWxkPWVlKGwsXCJ0eXBlaWRmaWVsZG5hbWVcIixcIlwiKTtjb25zdCBlPWVlKGwsXCJzcGF0aWFscmVmZXJlbmNlXCIsbnVsbCk7ZSYmKGYubGF5ZXJEZWZpbml0aW9uLnNwYXRpYWxSZWZlcmVuY2U9bmUoZSkpO2xldCB0PWVlKGwsXCJmaWVsZHNcIixudWxsKTtpZihBKHQpKWZvcihjb25zdCBpIG9mIHQpe2NvbnN0IGU9e25hbWU6ZWUoaSxcIm5hbWVcIixcIlwiKSxhbGlhczplZShpLFwiYWxpYXNcIixcIlwiKSx0eXBlOmVlKGksXCJ0eXBlXCIsXCJcIiksbnVsbGFibGU6ZWUoaSxcIm51bGxhYmxlXCIsITApLGVkaXRhYmxlOmVlKGksXCJlZGl0YWJsZVwiLCEwKSxsZW5ndGg6ZWUoaSxcImxlbmd0aFwiLG51bGwpLGRvbWFpbjp0ZShlZShpLFwiZG9tYWluXCIpKX07Zi5sYXllckRlZmluaXRpb24uZmllbGRzLnB1c2goZSl9ZWxzZSB0PW51bGwsZi5sYXllckRlZmluaXRpb24uZmllbGRzPXQ7Y29uc3Qgbj17fTtmb3IoY29uc3QgaSBvZiBmLmxheWVyRGVmaW5pdGlvbi5maWVsZHMpbltpLm5hbWUudG9Mb3dlckNhc2UoKV09aS5uYW1lO2xldCBhPWVlKGwsXCJmZWF0dXJlc1wiLG51bGwpO2lmKEEoYSkpZm9yKGNvbnN0IGkgb2YgYSl7Y29uc3QgZT17fSx0PWVlKGksXCJhdHRyaWJ1dGVzXCIse30pO2Zvcihjb25zdCBhIGluIHQpZVtuW2EudG9Mb3dlckNhc2UoKV1dPXRbYV07Zi5mZWF0dXJlU2V0LmZlYXR1cmVzLnB1c2goe2F0dHJpYnV0ZXM6ZSxnZW9tZXRyeTphZShlZShpLFwiZ2VvbWV0cnlcIixudWxsKSl9KX1lbHNlIGE9bnVsbCxmLmZlYXR1cmVTZXQuZmVhdHVyZXM9YX19fWlmKCExPT09cmUoZikpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7cmV0dXJuIGYubGF5ZXJEZWZpbml0aW9uLmdlb21ldHJ5VHlwZXx8KGYubGF5ZXJEZWZpbml0aW9uLmdlb21ldHJ5VHlwZT1cImVzcmlHZW9tZXRyeU51bGxcIiksVy5jcmVhdGUoZixlLnNwYXRpYWxSZWZlcmVuY2UpfSkpfSxxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImZlYXR1cmVzZXRcIixtaW46MSxtYXg6MX0pLHEuZnVuY3Rpb25zLmZpbHRlcj1mdW5jdGlvbihlLHQpe3JldHVybiBxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKGFzeW5jKG4scixzKT0+e2lmKHAocywyLDIsZSx0KSxBKHNbMF0pfHx4KHNbMF0pKXtjb25zdCBuPVtdO2xldCByPXNbMF07ciBpbnN0YW5jZW9mIG0mJihyPXIudG9BcnJheSgpKTtsZXQgbz1udWxsO2lmKCFMKHNbMV0pKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpO289c1sxXS5jcmVhdGVGdW5jdGlvbihlKTtmb3IoY29uc3QgZSBvZiByKXtjb25zdCB0PW8oZSk7Qih0KT8hMD09PWF3YWl0IHQmJm4ucHVzaChlKTohMD09PXQmJm4ucHVzaChlKX1yZXR1cm4gbn1pZihoKHNbMF0pKXtjb25zdCB0PWF3YWl0IHNbMF0ubG9hZCgpLG49Sy5jcmVhdGUoc1sxXSx0LmdldEZpZWxkc0luZGV4KCksdC5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSxhPW4uZ2V0VmFyaWFibGVzKCk7aWYoYS5sZW5ndGg+MCl7Y29uc3QgdD1bXTtmb3IobGV0IG49MDtuPGEubGVuZ3RoO24rKyl7Y29uc3QgaT17bmFtZTphW25dfTt0LnB1c2goYXdhaXQgcS5ldmFsdWF0ZUlkZW50aWZpZXIoZSxpKSl9Y29uc3QgaT17fTtmb3IobGV0IGU9MDtlPGEubGVuZ3RoO2UrKylpW2FbZV1dPXRbZV07cmV0dXJuIG4ucGFyYW1ldGVycz1pLG5ldyBNKHtwYXJlbnRmZWF0dXJlc2V0OnNbMF0sd2hlcmVjbGF1c2U6bn0pfXJldHVybiBuZXcgTSh7cGFyZW50ZmVhdHVyZXNldDpzWzBdLHdoZXJlY2xhdXNlOm59KX10aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KX0pKX0scS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJmaWx0ZXJcIixtaW46MixtYXg6Mn0pLHEuZnVuY3Rpb25zLm9yZGVyYnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhuLHIscyk9PntpZihwKHMsMiwyLGUsdCksaChzWzBdKSl7Y29uc3QgZT1uZXcgSChzWzFdKTtyZXR1cm4gbmV3IGsoe3BhcmVudGZlYXR1cmVzZXQ6c1swXSxvcmRlcmJ5Y2xhdXNlOmV9KX10aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KX0pKX0scS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJvcmRlcmJ5XCIsbWluOjIsbWF4OjJ9KSxxLmZ1bmN0aW9ucy50b3A9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhuLHIscyk9PntpZihwKHMsMiwyLGUsdCksaChzWzBdKSlyZXR1cm4gbmV3IE8oe3BhcmVudGZlYXR1cmVzZXQ6c1swXSx0b3BudW06c1sxXX0pO2lmKEEoc1swXSkpcmV0dXJuIFMoc1sxXSk+PXNbMF0ubGVuZ3RoP3NbMF0uc2xpY2UoMCk6c1swXS5zbGljZSgwLFMoc1sxXSkpO2lmKHgoc1swXSkpcmV0dXJuIFMoc1sxXSk+PXNbMF0ubGVuZ3RoKCk/c1swXS5zbGljZSgwKTpzWzBdLnNsaWNlKDAsUyhzWzFdKSk7dGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCl9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwidG9wXCIsbWluOjIsbWF4OjJ9KSxxLmZ1bmN0aW9ucy5maXJzdD1mdW5jdGlvbihlLHQpe3JldHVybiBxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKGFzeW5jKG4sYSxpKT0+e2lmKHAoaSwxLDEsZSx0KSxoKGlbMF0pKXtjb25zdCB0PWF3YWl0IGlbMF0uZmlyc3Qobi5hYm9ydFNpZ25hbCk7aWYobnVsbCE9PXQpe2NvbnN0IG49ci5jcmVhdGVGcm9tR3JhcGhpY0xpa2VPYmplY3QodC5nZW9tZXRyeSx0LmF0dHJpYnV0ZXMsaVswXSxlLnRpbWVab25lKTtyZXR1cm4gbi5fdW5kZXJseWluZ0dyYXBoaWM9dCxufXJldHVybiB0fXJldHVybiBBKGlbMF0pPzA9PT1pWzBdLmxlbmd0aD9udWxsOmlbMF1bMF06eChpWzBdKT8wPT09aVswXS5sZW5ndGgoKT9udWxsOmlbMF0uZ2V0KDApOm51bGx9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmlyc3RcIixtaW46MSxtYXg6MX0pLHEuZnVuY3Rpb25zLmF0dGFjaG1lbnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKGUsdCwoYXN5bmMocixzLG8pPT57cChvLDEsMixlLHQpO2NvbnN0IGw9e21pbnNpemU6LTEsbWF4c2l6ZTotMSx0eXBlczpudWxsLHJldHVybk1ldGFkYXRhOiExfTtpZihvLmxlbmd0aD4xKWlmKG9bMV1pbnN0YW5jZW9mIG4pe2lmKG9bMV0uaGFzRmllbGQoXCJtaW5zaXplXCIpJiYobC5taW5zaXplPVMob1sxXS5maWVsZChcIm1pbnNpemVcIikpKSxvWzFdLmhhc0ZpZWxkKFwibWV0YWRhdGFcIikmJihsLnJldHVybk1ldGFkYXRhPWIob1sxXS5maWVsZChcIm1ldGFkYXRhXCIpKSksb1sxXS5oYXNGaWVsZChcIm1heHNpemVcIikmJihsLm1heHNpemU9UyhvWzFdLmZpZWxkKFwibWF4c2l6ZVwiKSkpLG9bMV0uaGFzRmllbGQoXCJ0eXBlc1wiKSl7Y29uc3QgZT1DKG9bMV0uZmllbGQoXCJ0eXBlc1wiKSwhMSk7ZS5sZW5ndGg+MCYmKGwudHlwZXM9ZSl9fWVsc2UgaWYobnVsbCE9PW9bMV0pdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7aWYoTihvWzBdKSl7bGV0IHQ9b1swXS5fbGF5ZXI7cmV0dXJuIHQgaW5zdGFuY2VvZiBWJiYodD1mKHQsZS5zcGF0aWFsUmVmZXJlbmNlLFtcIipcIl0sITAsZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKSksbnVsbD09PXQ/W106ITE9PT1oKHQpP1tdOihhd2FpdCB0LmxvYWQoKSx0LnF1ZXJ5QXR0YWNobWVudHMob1swXS5maWVsZCh0Lm9iamVjdElkRmllbGQpLGwubWluc2l6ZSxsLm1heHNpemUsbC50eXBlcyxsLnJldHVybk1ldGFkYXRhKSl9aWYobnVsbD09PW9bMF0pcmV0dXJuW107dGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCl9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiYXR0YWNobWVudHNcIixtaW46MSxtYXg6Mn0pLHEuZnVuY3Rpb25zLmZlYXR1cmVzZXRieXJlbGF0aW9uc2hpcG5hbWU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhuLHIscyk9PntwKHMsMiw0LGUsdCk7Y29uc3Qgbz1zWzBdLGw9RihzWzFdKTtsZXQgZD1FKHNbMl0sbnVsbCk7Y29uc3QgbT1iKEUoc1szXSwhMCkpO2lmKG51bGw9PT1kJiYoZD1bXCIqXCJdKSwhMT09PUEoZCkpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7aWYobnVsbD09PXNbMF0pcmV0dXJuIG51bGw7aWYoIU4oc1swXSkpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7bGV0IHk9by5fbGF5ZXI7aWYoeSBpbnN0YW5jZW9mIFYmJih5PWYoeSxlLnNwYXRpYWxSZWZlcmVuY2UsW1wiKlwiXSwhMCxlLmxydWNhY2hlLGUuaW50ZXJjZXB0b3IpKSxudWxsPT09eSlyZXR1cm4gbnVsbDtpZighMT09PWgoeSkpcmV0dXJuIG51bGw7eT1hd2FpdCB5LmxvYWQoKTtjb25zdCB3PXkucmVsYXRpb25zaGlwTWV0YURhdGEoKS5maWx0ZXIoKGU9PmUubmFtZT09PWwpKTtpZigwPT09dy5sZW5ndGgpcmV0dXJuIG51bGw7aWYodm9pZCAwIT09d1swXS5yZWxhdGlvbnNoaXBUYWJsZUlkJiZudWxsIT09d1swXS5yZWxhdGlvbnNoaXBUYWJsZUlkJiZ3WzBdLnJlbGF0aW9uc2hpcFRhYmxlSWQ+LTEpcmV0dXJuIHUoeSx3WzBdLG8uZmllbGQoeS5vYmplY3RJZEZpZWxkKSx5LnNwYXRpYWxSZWZlcmVuY2UsZCxtLGUubHJ1Y2FjaGUsZS5pbnRlcmNlcHRvcik7bGV0IGc9eS5zZXJ2aWNlVXJsKCk7aWYoIWcpcmV0dXJuIG51bGw7Zz1cIi9cIj09PWcuY2hhckF0KGcubGVuZ3RoLTEpP2crd1swXS5yZWxhdGVkVGFibGVJZC50b1N0cmluZygpOmcrXCIvXCIrd1swXS5yZWxhdGVkVGFibGVJZC50b1N0cmluZygpO2NvbnN0IEk9YXdhaXQgYyhnLHkuc3BhdGlhbFJlZmVyZW5jZSxkLG0sZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKTthd2FpdCBJLmxvYWQoKTtsZXQgRD1JLnJlbGF0aW9uc2hpcE1ldGFEYXRhKCk7aWYoRD1ELmZpbHRlcigoZT0+ZS5pZD09PXdbMF0uaWQpKSwhMT09PW8uaGFzRmllbGQod1swXS5rZXlGaWVsZCl8fG51bGw9PT1vLmZpZWxkKHdbMF0ua2V5RmllbGQpKXtjb25zdCBlPWF3YWl0IHkuZ2V0RmVhdHVyZUJ5T2JqZWN0SWQoby5maWVsZCh5Lm9iamVjdElkRmllbGQpLFt3WzBdLmtleUZpZWxkXSk7aWYoZSl7Y29uc3QgdD1LLmNyZWF0ZShEWzBdLmtleUZpZWxkK1wiPSBAaWRcIixJLmdldEZpZWxkc0luZGV4KCksSS5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTtyZXR1cm4gdC5wYXJhbWV0ZXJzPXtpZDplLmF0dHJpYnV0ZXNbd1swXS5rZXlGaWVsZF19LEkuZmlsdGVyKHQpfXJldHVybiBuZXcgeih7cGFyZW50ZmVhdHVyZXNldDpJfSl9Y29uc3QgVD1LLmNyZWF0ZShEWzBdLmtleUZpZWxkK1wiPSBAaWRcIixJLmdldEZpZWxkc0luZGV4KCksSS5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTtyZXR1cm4gVC5wYXJhbWV0ZXJzPXtpZDpvLmZpZWxkKHdbMF0ua2V5RmllbGQpfSxJLmZpbHRlcihUKX0pKX0scS5zaWduYXR1cmVzLnB1c2goe25hbWU6XCJmZWF0dXJlc2V0YnlyZWxhdGlvbnNoaXBuYW1lXCIsbWluOjIsbWF4OjR9KSxxLmZ1bmN0aW9ucy5mZWF0dXJlc2V0Ynlhc3NvY2lhdGlvbj1mdW5jdGlvbihlLHQpe3JldHVybiBxLnN0YW5kYXJkRnVuY3Rpb25Bc3luYyhlLHQsKGFzeW5jKG4scixzKT0+e3AocywyLDMsZSx0KTtjb25zdCBvPXNbMF0sbD1GKEUoc1sxXSxcIlwiKSkudG9Mb3dlckNhc2UoKSx1PWcoc1syXSk/RihzWzJdKTpudWxsO2lmKG51bGw9PT1zWzBdKXJldHVybiBudWxsO2lmKCFOKHNbMF0pKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpO2xldCBjPW8uX2xheWVyO2lmKGMgaW5zdGFuY2VvZiBWJiYoYz1mKGMsZS5zcGF0aWFsUmVmZXJlbmNlLFtcIipcIl0sITAsZS5scnVjYWNoZSxlLmludGVyY2VwdG9yKSksbnVsbD09PWMpcmV0dXJuIG51bGw7aWYoITE9PT1oKGMpKXJldHVybiBudWxsO2F3YWl0IGMubG9hZCgpO2NvbnN0IG09Yy5zZXJ2aWNlVXJsKCkseT1hd2FpdCBkKG0sZS5zcGF0aWFsUmVmZXJlbmNlKTtsZXQgdz1udWxsLEk9bnVsbCxEPSExO2lmKG51bGwhPT11JiZcIlwiIT09dSYmdm9pZCAwIT09dSl7Zm9yKGNvbnN0IGUgb2YgeS50ZXJtaW5hbHMpZS50ZXJtaW5hbE5hbWU9PT11JiYoST1lLnRlcm1pbmFsSWQpO251bGw9PT1JJiYoRD0hMCl9Y29uc3QgVD15LmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpLGI9VC5nZXQoXCJUT0dMT0JBTElEXCIpLm5hbWUsQT1ULmdldChcIkZST01HTE9CQUxJRFwiKS5uYW1lLHg9VC5nZXQoXCJUT1RFUk1JTkFMSURcIikubmFtZSxMPVQuZ2V0KFwiRlJPTVRFUk1JTkFMSURcIikubmFtZSxTPVQuZ2V0KFwiRlJPTU5FVFdPUktTT1VSQ0VJRFwiKS5uYW1lLEM9VC5nZXQoXCJUT05FVFdPUktTT1VSQ0VJRFwiKS5uYW1lLHY9VC5nZXQoXCJBU1NPQ0lBVElPTlRZUEVcIikubmFtZSxNPVQuZ2V0KFwiSVNDT05URU5UVklTSUJMRVwiKS5uYW1lLGs9VC5nZXQoXCJPQkpFQ1RJRFwiKS5uYW1lO2Zvcihjb25zdCBlIG9mIGMuZmllbGRzKWlmKFwiZ2xvYmFsLWlkXCI9PT1lLnR5cGUpe3c9by5maWVsZChlLm5hbWUpO2JyZWFrfWxldCBPPW51bGwsej1uZXcgUChuZXcgUSh7bmFtZTpcInBlcmNlbnRhbG9uZ1wiLGFsaWFzOlwicGVyY2VudGFsb25nXCIsdHlwZTpcImRvdWJsZVwifSksSy5jcmVhdGUoXCIwXCIseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSksVz1uZXcgUChuZXcgUSh7bmFtZTpcInNpZGVcIixhbGlhczpcInNpZGVcIix0eXBlOlwic3RyaW5nXCJ9KSxLLmNyZWF0ZShcIicnXCIseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSk7Y29uc3QgSD1cImdsb2JhbGlkXCIsXz1cImdsb2JhbElkXCIscT17fTtmb3IoY29uc3QgZSBpbiB5LmxrcClxW2VdPXkubGtwW2VdLnNvdXJjZUlkO2NvbnN0IEI9bmV3IGoobmV3IFEoe25hbWU6XCJjbGFzc25hbWVcIixhbGlhczpcImNsYXNzbmFtZVwiLHR5cGU6XCJzdHJpbmdcIn0pLG51bGwscSk7bGV0IEo9XCJcIjtzd2l0Y2gobCl7Y2FzZVwibWlkc3BhblwiOntKPWAoKCR7Yn09JyR7d30nKSBPUiAoICR7QX09JyR7d30nKSkgQU5EICgke3Z9IElOICg1KSlgLEIuY29kZWZpZWxkPUsuY3JlYXRlKGBDQVNFIFdIRU4gKCR7Yn09JyR7d30nKSBUSEVOICR7U30gRUxTRSAke0N9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTtjb25zdCBlPUcoUi5maW5kRmllbGQoeS5hc3NvY2lhdGlvbnMuZmllbGRzLEEpKTtlLm5hbWU9SCxlLmFsaWFzPUgsTz1uZXcgUChlLEsuY3JlYXRlKGBDQVNFIFdIRU4gKCR7QX09JyR7d30nKSBUSEVOICR7Yn0gRUxTRSAke0F9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSksej15LnVuVmVyc2lvbj49ND9uZXcgWihSLmZpbmRGaWVsZCh5LmFzc29jaWF0aW9ucy5maWVsZHMsVC5nZXQoXCJQRVJDRU5UQUxPTkdcIikubmFtZSkpOm5ldyBQKG5ldyBRKHtuYW1lOlwicGVyY2VudGFsb25nXCIsYWxpYXM6XCJwZXJjZW50YWxvbmdcIix0eXBlOlwiZG91YmxlXCJ9KSxLLmNyZWF0ZShcIjBcIix5LmFzc29jaWF0aW9ucy5nZXRGaWVsZHNJbmRleCgpLHkuYXNzb2NpYXRpb25zLmRhdGVGaWVsZHNUaW1lWm9uZURlZmF1bHRVVEMpKTticmVha31jYXNlXCJqdW5jdGlvbmVkZ2VcIjp7Sj1gKCgke2J9PScke3d9JykgT1IgKCAke0F9PScke3d9JykpIEFORCAoJHt2fSBJTiAoNCw2KSlgLEIuY29kZWZpZWxkPUsuY3JlYXRlKGBDQVNFIFdIRU4gKCR7Yn09JyR7d30nKSBUSEVOICR7U30gRUxTRSAke0N9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTtjb25zdCBlPUcoUi5maW5kRmllbGQoeS5hc3NvY2lhdGlvbnMuZmllbGRzLEEpKTtlLm5hbWU9SCxlLmFsaWFzPUgsTz1uZXcgUChlLEsuY3JlYXRlKGBDQVNFIFdIRU4gKCR7QX09JyR7d30nKSBUSEVOICR7Yn0gRUxTRSAke0F9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSksVz1uZXcgUChuZXcgUSh7bmFtZTpcInNpZGVcIixhbGlhczpcInNpZGVcIix0eXBlOlwic3RyaW5nXCJ9KSxLLmNyZWF0ZShgQ0FTRSBXSEVOICgke3Z9PTQpIFRIRU4gJ2Zyb20nIEVMU0UgJ3RvJyBFTkRgLHkuYXNzb2NpYXRpb25zLmdldEZpZWxkc0luZGV4KCkseS5hc3NvY2lhdGlvbnMuZGF0ZUZpZWxkc1RpbWVab25lRGVmYXVsdFVUQykpO2JyZWFrfWNhc2VcImNvbm5lY3RlZFwiOntsZXQgZT1gJHtifT0nQFQnYCx0PWAke0F9PSdAVCdgO251bGwhPT1JJiYoZSs9YCBBTkQgJHt4fT1AQWAsdCs9YCBBTkQgJHtMfT1AQWApLEo9XCIoKFwiK2UrXCIpIE9SIChcIit0K1wiKSlcIixKPSQoSixcIkBUXCIsdz8/XCJcIiksZT0kKGUsXCJAVFwiLHc/P1wiXCIpLG51bGwhPT1JJiYoZT0kKGUsXCJAQVwiLEkudG9TdHJpbmcoKSksSj0kKEosXCJAQVwiLEkudG9TdHJpbmcoKSkpLEIuY29kZWZpZWxkPUsuY3JlYXRlKFwiQ0FTRSBXSEVOIFwiK2UrYCBUSEVOICR7U30gRUxTRSAke0N9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTtjb25zdCBuPUcoUi5maW5kRmllbGQoeS5hc3NvY2lhdGlvbnMuZmllbGRzLEEpKTtuLm5hbWU9SCxuLmFsaWFzPUgsTz1uZXcgUChuLEsuY3JlYXRlKFwiQ0FTRSBXSEVOIFwiK2UrYCBUSEVOICR7QX0gRUxTRSAke2J9IEVORGAseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKSk7YnJlYWt9Y2FzZVwiY29udGFpbmVyXCI6Sj1gJHtifT0nJHt3fScgQU5EICR7dn0gPSAyYCxudWxsIT09SSYmKEorPWAgQU5EICR7eH0gPSBgK0kudG9TdHJpbmcoKSksQi5jb2RlZmllbGQ9UyxKPVwiKCBcIitKK1wiIClcIixPPW5ldyBVKFIuZmluZEZpZWxkKHkuYXNzb2NpYXRpb25zLmZpZWxkcyxBKSxILEgpO2JyZWFrO2Nhc2VcImNvbnRlbnRcIjpKPWAoJHtBfT0nJHt3fScgQU5EICR7dn0gPSAyKWAsbnVsbCE9PUkmJihKKz1gIEFORCAke0x9ID0gYCtJLnRvU3RyaW5nKCkpLEIuY29kZWZpZWxkPUMsSj1cIiggXCIrSitcIiApXCIsTz1uZXcgVShSLmZpbmRGaWVsZCh5LmFzc29jaWF0aW9ucy5maWVsZHMsYiksSCxIKTticmVhaztjYXNlXCJzdHJ1Y3R1cmVcIjpKPWAoJHtifT0nJHt3fScgQU5EICR7dn0gPSAzKWAsbnVsbCE9PUkmJihKKz1gIEFORCAke3h9ID0gYCtJLnRvU3RyaW5nKCkpLEIuY29kZWZpZWxkPVMsSj1cIiggXCIrSitcIiApXCIsTz1uZXcgVShSLmZpbmRGaWVsZCh5LmFzc29jaWF0aW9ucy5maWVsZHMsQSksSCxfKTticmVhaztjYXNlXCJhdHRhY2hlZFwiOko9YCgke0F9PScke3d9JyBBTkQgJHt2fSA9IDMpYCxudWxsIT09SSYmKEorPWAgQU5EICR7TH0gPSBgK0kudG9TdHJpbmcoKSksQi5jb2RlZmllbGQ9QyxKPVwiKCBcIitKK1wiIClcIixPPW5ldyBVKFIuZmluZEZpZWxkKHkuYXNzb2NpYXRpb25zLmZpZWxkcyxiKSxILF8pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCl9RCYmKEo9XCIxIDw+IDFcIik7cmV0dXJuIG5ldyBSKHtwYXJlbnRmZWF0dXJlc2V0OnkuYXNzb2NpYXRpb25zLGFkYXB0ZWRGaWVsZHM6W25ldyBaKFIuZmluZEZpZWxkKHkuYXNzb2NpYXRpb25zLmZpZWxkcyxrKSksbmV3IFooUi5maW5kRmllbGQoeS5hc3NvY2lhdGlvbnMuZmllbGRzLE0pKSxPLFcsQix6XSxleHRyYUZpbHRlcjpKP0suY3JlYXRlKEoseS5hc3NvY2lhdGlvbnMuZ2V0RmllbGRzSW5kZXgoKSx5LmFzc29jaWF0aW9ucy5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKTpudWxsfSl9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZmVhdHVyZXNldGJ5YXNzb2NpYXRpb25cIixtaW46MixtYXg6Nn0pLHEuZnVuY3Rpb25zLmdyb3VwYnk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhyLHMsbyk9PntpZihwKG8sMywzLGUsdCksIWgob1swXSkpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7Y29uc3QgbD1hd2FpdCBvWzBdLmxvYWQoKSxmPVtdLHU9W107bGV0IGM9ITEsZD1bXTtpZihnKG9bMV0pKWQucHVzaChvWzFdKTtlbHNlIGlmKG9bMV1pbnN0YW5jZW9mIG4pZC5wdXNoKG9bMV0pO2Vsc2UgaWYoQShvWzFdKSlkPW9bMV07ZWxzZXtpZigheChvWzFdKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTtkPW9bMV0udG9BcnJheSgpfWZvcihjb25zdCBtIG9mIGQpaWYoZyhtKSl7Y29uc3QgZT1LLmNyZWF0ZShGKG0pLGwuZ2V0RmllbGRzSW5kZXgoKSxsLmRhdGVGaWVsZHNUaW1lWm9uZURlZmF1bHRVVEMpLHQ9ITA9PT1fKGUpP0YobSk6XCIlJSUlRklFTEROQU1FXCI7Zi5wdXNoKHtuYW1lOnQsZXhwcmVzc2lvbjplfSksXCIlJSUlRklFTEROQU1FXCI9PT10JiYoYz0hMCl9ZWxzZXtpZighKG0gaW5zdGFuY2VvZiBuKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTt7Y29uc3Qgbj1tLmhhc0ZpZWxkKFwibmFtZVwiKT9tLmZpZWxkKFwibmFtZVwiKTpcIiUlJSVGSUVMRE5BTUVcIixyPW0uaGFzRmllbGQoXCJleHByZXNzaW9uXCIpP20uZmllbGQoXCJleHByZXNzaW9uXCIpOlwiXCI7aWYoXCIlJSUlRklFTEROQU1FXCI9PT1uJiYoYz0hMCksIW4pdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7Zi5wdXNoKHtuYW1lOm4sZXhwcmVzc2lvbjpLLmNyZWF0ZShyfHxuLGwuZ2V0RmllbGRzSW5kZXgoKSxsLmRhdGVGaWVsZHNUaW1lWm9uZURlZmF1bHRVVEMpfSl9fWlmKGQ9W10sZyhvWzJdKSlkLnB1c2gob1syXSk7ZWxzZSBpZihBKG9bMl0pKWQ9b1syXTtlbHNlIGlmKHgob1syXSkpZD1vWzJdLnRvQXJyYXkoKTtlbHNle2lmKCEob1syXWluc3RhbmNlb2YgbikpdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7ZC5wdXNoKG9bMl0pfWZvcihjb25zdCBtIG9mIGQpe2lmKCEobSBpbnN0YW5jZW9mIG4pKXRocm93IG5ldyBhKGUsaS5JbnZhbGlkUGFyYW1ldGVyLHQpO3tjb25zdCBuPW0uaGFzRmllbGQoXCJuYW1lXCIpP20uZmllbGQoXCJuYW1lXCIpOlwiXCIscj1tLmhhc0ZpZWxkKFwic3RhdGlzdGljXCIpP20uZmllbGQoXCJzdGF0aXN0aWNcIik6XCJcIixzPW0uaGFzRmllbGQoXCJleHByZXNzaW9uXCIpP20uZmllbGQoXCJleHByZXNzaW9uXCIpOlwiXCI7aWYoIW58fCFyfHwhcyl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTt1LnB1c2goe25hbWU6bixzdGF0aXN0aWM6ci50b0xvd2VyQ2FzZSgpLGV4cHJlc3Npb246Sy5jcmVhdGUocyxsLmdldEZpZWxkc0luZGV4KCksbC5kYXRlRmllbGRzVGltZVpvbmVEZWZhdWx0VVRDKX0pfX1pZihjKXtjb25zdCBlPXt9O2Zvcihjb25zdCBuIG9mIGwuZmllbGRzKWVbbi5uYW1lLnRvTG93ZXJDYXNlKCldPTE7Zm9yKGNvbnN0IG4gb2YgZilcIiUlJSVGSUVMRE5BTUVcIiE9PW4ubmFtZSYmKGVbbi5uYW1lLnRvTG93ZXJDYXNlKCldPTEpO2Zvcihjb25zdCBuIG9mIHUpXCIlJSUlRklFTEROQU1FXCIhPT1uLm5hbWUmJihlW24ubmFtZS50b0xvd2VyQ2FzZSgpXT0xKTtsZXQgdD0wO2Zvcihjb25zdCBuIG9mIGYpaWYoXCIlJSUlRklFTEROQU1FXCI9PT1uLm5hbWUpe2Zvcig7MT09PWVbXCJmaWVsZF9cIit0LnRvU3RyaW5nKCldOyl0Kys7ZVtcImZpZWxkX1wiK3QudG9TdHJpbmcoKV09MSxuLm5hbWU9XCJGSUVMRF9cIit0LnRvU3RyaW5nKCl9fWZvcihjb25zdCB0IG9mIGYpYXdhaXQgWCh0LmV4cHJlc3Npb24scSxlKTtmb3IoY29uc3QgdCBvZiB1KWF3YWl0IFgodC5leHByZXNzaW9uLHEsZSk7cmV0dXJuIG9bMF0uZ3JvdXBieShmLHUpfSkpfSxxLnNpZ25hdHVyZXMucHVzaCh7bmFtZTpcImdyb3VwYnlcIixtaW46MyxtYXg6M30pLHEuZnVuY3Rpb25zLmRpc3RpbmN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHEuc3RhbmRhcmRGdW5jdGlvbkFzeW5jKGUsdCwoYXN5bmMocixzLG8pPT57aWYoaChvWzBdKSl7cChvLDIsMixlLHQpO2NvbnN0IHI9YXdhaXQgb1swXS5sb2FkKCkscz1bXTtsZXQgbD1bXTtpZihnKG9bMV0pKWwucHVzaChvWzFdKTtlbHNlIGlmKG9bMV1pbnN0YW5jZW9mIG4pbC5wdXNoKG9bMV0pO2Vsc2UgaWYoQShvWzFdKSlsPW9bMV07ZWxzZXtpZigheChvWzFdKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTtsPW9bMV0udG9BcnJheSgpfWxldCBmPSExO2Zvcihjb25zdCBvIG9mIGwpaWYoZyhvKSl7Y29uc3QgZT1LLmNyZWF0ZShGKG8pLHIuZ2V0RmllbGRzSW5kZXgoKSxyLmRhdGVGaWVsZHNUaW1lWm9uZURlZmF1bHRVVEMpLHQ9ITA9PT1fKGUpP0Yobyk6XCIlJSUlRklFTEROQU1FXCI7cy5wdXNoKHtuYW1lOnQsZXhwcmVzc2lvbjplfSksXCIlJSUlRklFTEROQU1FXCI9PT10JiYoZj0hMCl9ZWxzZXtpZighKG8gaW5zdGFuY2VvZiBuKSl0aHJvdyBuZXcgYShlLGkuSW52YWxpZFBhcmFtZXRlcix0KTt7Y29uc3Qgbj1vLmhhc0ZpZWxkKFwibmFtZVwiKT9vLmZpZWxkKFwibmFtZVwiKTpcIiUlJSVGSUVMRE5BTUVcIixsPW8uaGFzRmllbGQoXCJleHByZXNzaW9uXCIpP28uZmllbGQoXCJleHByZXNzaW9uXCIpOlwiXCI7aWYoXCIlJSUlRklFTEROQU1FXCI9PT1uJiYoZj0hMCksIW4pdGhyb3cgbmV3IGEoZSxpLkludmFsaWRQYXJhbWV0ZXIsdCk7cy5wdXNoKHtuYW1lOm4sZXhwcmVzc2lvbjpLLmNyZWF0ZShsfHxuLHIuZ2V0RmllbGRzSW5kZXgoKSxyLmRhdGVGaWVsZHNUaW1lWm9uZURlZmF1bHRVVEMpfSl9fWlmKGYpe2NvbnN0IGU9e307Zm9yKGNvbnN0IG4gb2Ygci5maWVsZHMpZVtuLm5hbWUudG9Mb3dlckNhc2UoKV09MTtmb3IoY29uc3QgbiBvZiBzKVwiJSUlJUZJRUxETkFNRVwiIT09bi5uYW1lJiYoZVtuLm5hbWUudG9Mb3dlckNhc2UoKV09MSk7bGV0IHQ9MDtmb3IoY29uc3QgbiBvZiBzKWlmKFwiJSUlJUZJRUxETkFNRVwiPT09bi5uYW1lKXtmb3IoOzE9PT1lW1wiZmllbGRfXCIrdC50b1N0cmluZygpXTspdCsrO2VbXCJmaWVsZF9cIit0LnRvU3RyaW5nKCldPTEsbi5uYW1lPVwiRklFTERfXCIrdC50b1N0cmluZygpfX1mb3IoY29uc3QgdCBvZiBzKWF3YWl0IFgodC5leHByZXNzaW9uLHEsZSk7cmV0dXJuIG9bMF0uZ3JvdXBieShzLFtdKX1yZXR1cm4gWShcImRpc3RpbmN0XCIscixzLG8pfSkpfSkscS5mdW5jdGlvbnMuZ2V0ZmVhdHVyZXNldGluZm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gcS5zdGFuZGFyZEZ1bmN0aW9uQXN5bmMoZSx0LChhc3luYyhhLGkscik9PntpZihwKHIsMSwxLGUsdCksIWgoclswXSkpcmV0dXJuIG51bGw7Y29uc3Qgcz1hd2FpdCByWzBdLmdldEZlYXR1cmVTZXRJbmZvKCk7cmV0dXJuIHM/bi5jb252ZXJ0T2JqZWN0VG9BcmNhZGVEaWN0aW9uYXJ5KHtsYXllcklkOnMubGF5ZXJJZCxsYXllck5hbWU6cy5sYXllck5hbWUsaXRlbUlkOnMuaXRlbUlkLHNlcnZpY2VMYXllclVybDpzLnNlcnZpY2VMYXllclVybCx3ZWJNYXBMYXllcklkOnMud2ViTWFwTGF5ZXJJZD8/bnVsbCx3ZWJNYXBMYXllclRpdGxlOnMud2ViTWFwTGF5ZXJUaXRsZT8/bnVsbCxjbGFzc05hbWU6bnVsbCxvYmplY3RDbGFzc0lkOm51bGx9LEQoZSksITEsITEpOm51bGx9KSl9LHEuc2lnbmF0dXJlcy5wdXNoKHtuYW1lOlwiZ2V0ZmVhdHVyZXNldGluZm9cIixtaW46MSxtYXg6MX0pfWV4cG9ydHtvZSBhcyByZWdpc3RlckZ1bmN0aW9uc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHIgZnJvbVwiLi4vcG9ydGFsL1BvcnRhbC5qc1wiO2Z1bmN0aW9uIGwobCx0KXtpZihudWxsPT09bClyZXR1cm4gdDtyZXR1cm4gbmV3IHIoe3VybDpsLmZpZWxkKFwidXJsXCIpfSl9ZXhwb3J0e2wgYXMgZ2V0UG9ydGFsfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==