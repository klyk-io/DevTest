"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_sources_support_uploadAssets_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssetErrors.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssetErrors.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BadResponseError: () => (/* binding */ u),
/* harmony export */   Convert3DFailedError: () => (/* binding */ l),
/* harmony export */   NoGlbSupportError: () => (/* binding */ t),
/* harmony export */   NoSupportedSourceError: () => (/* binding */ a),
/* harmony export */   NotBase64Error: () => (/* binding */ n),
/* harmony export */   UnableToPrepareOptionsError: () => (/* binding */ p),
/* harmony export */   UnsupportedError: () => (/* binding */ r),
/* harmony export */   UnsupportedFormatUploadedError: () => (/* binding */ d),
/* harmony export */   UploadFailedError: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e="upload-assets",o=()=>new Error;class r extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:unsupported`,"Layer does not support asset uploads.",o())}}class t extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:no-glb-support`,"Layer does not support glb.",o())}}class a extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:no-supported-source`,"No supported external source found",o())}}class n extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:not-base-64`,"Expected gltf data in base64 format after conversion.",o())}}class p extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:unable-to-prepare-options`,"Unable to prepare uploadAsset request options.",o())}}class u extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(s,r){super(`${e}:bad-response`,`Bad response. Uploaded ${s} items and received ${r} results.`,o())}}class c extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(s,r){super(`${e}-layer:upload-failed`,`Failed to upload mesh file ${s}. Error code: ${r?.code??"-1"}. Error message: ${r?.messages??"unknown"}`,o())}}class d extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(s){super(`${e}-layer:unsupported-format`,`The service allowed us to upload an asset of FormatID ${s}, but it does not list it in its supported formats.`,o())}}class l extends _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(`${e}:convert3D-failed`,"convert3D failed.")}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssets.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadAssets: () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_time_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/time.js */ "./node_modules/@arcgis/core/core/time.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../geometry/support/meshUtils/External.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/External.js");
/* harmony import */ var _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./uploadAssetErrors.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadAssetErrors.js");
/* harmony import */ var _uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./uploadProgressWeights.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js");
/* harmony import */ var _uploads_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./uploads.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploads.js");
/* harmony import */ var _support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/infoFor3D.js */ "./node_modules/@arcgis/core/layers/support/infoFor3D.js");
/* harmony import */ var _support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../support/progressUtils.js */ "./node_modules/@arcgis/core/support/progressUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function O(s,e,t){const r=s.length;if(!r)return t?.onProgress?.(1),[];const o=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.makeProgressManager)(r,t?.onProgress,"uploadAssets");return Promise.all(s.map(((s,r)=>v(s,e,{...t,onProgress:o.makeOnProgress(r)}))))}async function v(s,{layer:e,ongoingUploads:t},r){const o=t.get(s);if(o)return o;if(!Z(e))throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.UnsupportedError;if(I(s,e))return r?.onProgress?.(1),s;const n=k(s,e,r);t.set(s,n);try{await n}finally{t.delete(s)}return s}function I(s,e){const{parsedUrl:t}=e;return null!=t&&s.metadata.externalSources.some((s=>(0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.externalIsOnService)(s,t)))}async function k(s,e,r){const{metadata:o}=s,{displaySource:n}=o,a=H(n?.source,e),i=!!a,c=o.externalSources.length>0,u=i?B(a,e,r):c?R(s,e,r):C(s,e,r),l=await u;return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),s.addExternalSources([l]),s}async function B(s,e,t){return{source:await G(s,e,t),original:!0}}async function R(s,e,t){const r=_(e),{externalSources:o}=s.metadata,n=q(o,e);if(!n)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.NoSupportedSourceError;const a=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_9__.uploadProgressWeights.uploadConvertibleSource,t?.onProgress,"uploadConvertibleSource"),i=await G(n,e,{onProgress:a.makeOnProgress("uploadEditSource")});s.addExternalSources([{source:i,original:!0}]);const c=n.reduce(((s,{asset:e})=>e instanceof File?s+e.size:s),0),u=a.simulate("serviceAssetsToGlb",(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.estimatedConversionTime)(c));try{return{source:await V(i,e,r)}}finally{u.remove()}}async function C(s,e,t){const r=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_9__.uploadProgressWeights.uploadLocalMesh,t?.onProgress,"uploadLocalMesh"),o=L(s,e,{...t,onProgress:r.makeOnProgress("meshToAssetBlob")});return{source:await J([o],e,{...t,onProgress:r.makeOnProgress("uploadAssetBlobs")}),extent:s.extent.clone(),original:!0}}async function L(s,e,r){const o=_(e),n=await s.load(r),a=await n.toBinaryGLTF({ignoreLocalTransform:!0});(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const i=await a.buffer();return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),{blob:new Blob([i.data],{type:i.type}),assetName:`${(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_6__.generateBracedUUID)()}.glb`,assetType:o}}function q(s,e){for(const t of s){const s=H(t.source,e);if(s)return s}return null}function H(s,e){if(!s)return null;const{infoFor3D:{supportedFormats:t,editFormats:r}}=e,o=(0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.externalSourceToMultiPart)(s),n=new Array;let a=!1;for(let i=0;i<o.length;++i){const s=$(o[i],t);if(!s)return null;r.includes(s.assetType)&&(a=!0),n.push(s)}return a?n:null}function $(s,e){const t=(0,_geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.assetFormatId)(s,e);return t?{asset:s,assetType:t}:null}async function G(s,e,t){return J(s.map((s=>M(s,t))),e,t)}async function J(s,e,r){const o=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.makeProgressManager)(_uploadProgressWeights_js__WEBPACK_IMPORTED_MODULE_9__.uploadProgressWeights.uploadAssetBlobs,r?.onProgress,"uploadAssetBlobs"),n=await z(s,e,{...r,onProgress:o.makeOnProgress("prepareAssetItems")});(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const a=n.map((({item:s})=>s)),{uploadResults:i}=await K(a,e,{...r,onProgress:o.makeOnProgress("uploadAssetItems")});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),s.map(((s,t)=>Q(n[t],i[t],e)))}async function M(s,e){const{asset:r,assetType:o}=s;if(r instanceof File)return{blob:r,assetName:r.name,assetType:o};const n=await r.toBlob(e);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(e),{blob:n,assetName:r.assetName,assetType:o}}async function W(s,e,r){const{blob:n,assetType:a,assetName:c}=s;let u=null;try{const s=await (0,_uploads_js__WEBPACK_IMPORTED_MODULE_10__.uploadItem)({data:n,name:c},e.url,r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),u={assetType:a,assetUploadId:s.itemID}}catch(l){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(l),ss().warnOnce(`Service ${e.url} does not support the REST Uploads API.`)}if(!u){const s=await (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.parseData)(n);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),!s.isBase64)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.NotBase64Error;u={assetType:a,assetData:s.data}}if(!u)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.UnableToPrepareOptionsError;return{item:u,assetName:c}}function z(s,e,r){const o=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.makeProgressManager)(s.length,r?.onProgress,"prepareAssetItems");return Promise.all(s.map((async(s,n)=>{const a=W(await s,e,{...r,onProgress:o.makeOnProgress(n)});return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r),a})))}async function K(e,r,o){const n=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_12__.simulateProgress)(o?.onProgress);try{const n=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.join)(r.parsedUrl.path,"uploadAssets"),{timeout:0,query:{f:"json",assets:JSON.stringify(e)},method:"post",responseType:"json"});if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(o),n.data.uploadResults.length!==e.length)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.BadResponseError(e.length,n.data.uploadResults.length);return n.data}finally{n.remove()}}function Q(s,e,t){const{success:r}=e;if(!r){const{error:t}=e;throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.UploadFailedError(s.assetName,t)}const{assetHash:o}=e,{assetName:n,item:{assetType:a}}=s,{infoFor3D:{supportedFormats:i}}=t,c=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_11__.getFormatIdMimeType)(a,i);if(!c)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.UnsupportedFormatUploadedError(a);return new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.ServiceAsset(n,c,[new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.ServiceAssetPart(`${t.parsedUrl.path}/assets/${o}`,o)])}async function V(s,e,t){const r=s.map((({assetName:s,parts:e})=>({assetName:s,assetHash:e[0].partHash}))),o=e.capabilities?.operations.supportsAsyncConvert3D,n={f:"json",assets:JSON.stringify(r),transportType:"esriTransportTypeUrl",targetFormat:t,async:o},i=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.join)(e.parsedUrl.path,"convert3D");let c;try{c=(await(o?Y:X)(i,{query:n,responseType:"json",timeout:0})).data}catch(l){throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.Convert3DFailedError}const{supportedFormats:u}=e.infoFor3D;return c.assets.map((s=>{const e=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_11__.getMimeTypeFormatId)(s.contentType,u);if(!e)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.UnsupportedFormatUploadedError(e);return new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.ServiceAsset(s.assetName,s.contentType,[new _geometry_support_meshUtils_External_js__WEBPACK_IMPORTED_MODULE_7__.ServiceAssetPart(s.assetURL,s.assetHash)])}))}function X(e,t){return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e,t)}async function Y(e,t){const o=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e,t)).data.statusUrl;for(;;){const e=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o,{query:{f:"json"},responseType:"json"})).data;switch(e.status){case"Completed":return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new Error(e.status);case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new Error}await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.after)(es)}}function Z(s){return!!s.infoFor3D&&!!s.url}function _(s){const{infoFor3D:e}=s,t=(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_11__.getMimeTypeFormatId)("model/gltf-binary",e.supportedFormats)??(0,_support_infoFor3D_js__WEBPACK_IMPORTED_MODULE_11__.getFilenameFormatId)("glb",e.supportedFormats);if(!t)throw new _uploadAssetErrors_js__WEBPACK_IMPORTED_MODULE_8__.NoGlbSupportError;return t}function ss(){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.graphics.sources.support.uploadAssets")}const es=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_4__.Milliseconds)(1e3);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploadProgressWeights.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadProgressWeights: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e={upload:{createFromFiles:.8,loadMesh:.2},uploadAssetBlobs:{prepareAssetItems:.9,uploadAssetItems:.1},uploadConvertibleSource:{uploadEditSource:.5,serviceAssetsToGlb:.5},uploadLocalMesh:{meshToAssetBlob:.5,uploadAssetBlobs:.5}};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/uploads.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/uploads.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   uploadItem: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _support_base64Utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../support/base64Utils.js */ "./node_modules/@arcgis/core/support/base64Utils.js");
/* harmony import */ var _support_progressUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../support/progressUtils.js */ "./node_modules/@arcgis/core/support/progressUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=1e6,p=20*i,l=2e9,m=3;async function c({data:r,name:c,description:u},d,h){let j=null;try{const w=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(d,"uploads"),y=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(w,"info"),{data:g}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(y,{query:{f:"json"},responseType:"json"});(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(h);const U=(0,_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.isHostedAgolService)(d),q=g.maxUploadFileSize*i,z=U?l:q,T=U?Math.min(p,q):p;if(r.size>z)throw new Error("Data too large");const A=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(w,"register"),{data:E}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(A,{query:{f:"json",itemName:f(c),description:u},responseType:"json",method:"post"});if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(h),!E.success)throw new Error("Registration failed");const{itemID:P}=E.item;j=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(w,P);const D=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(j,"uploadPart"),I=Math.ceil(r.size/T),M=new Array;for(let e=0;e<I;++e)M.push(r.slice(e*T,Math.min((e+1)*T,r.size)));const b=M.slice().reverse(),v=new Array,x=(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_6__.makeProgressManager)(I,h?.onProgress,"uploadItem"),F=async()=>{for(;0!==b.length;){const t=M.length-b.length,s=b.pop(),r=new FormData,a=x.simulate(t,(0,_support_progressUtils_js__WEBPACK_IMPORTED_MODULE_6__.estimatedTransferTime)(s.size));try{const a=s;r.append("f","json"),r.append("file",a),r.append("partId",`${t}`);const{data:n}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(D,{timeout:0,body:r,responseType:"json",method:"post"});if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(h),!n.success)throw new Error("Part upload failed")}finally{a.remove()}}};for(let e=0;e<m&&0!==b.length;++e)v.push(F());await Promise.all(v);const _=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(j,"commit"),{data:C}=await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(_,{query:{f:"json",parts:M.map(((e,o)=>o)).join(",")},responseType:"json",method:"post"});if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(h),!C.success)throw new Error("Commit failed");return C.item}catch(w){if(null!=j){const o=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.join)(j,"delete");await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o,{query:{f:"json"},responseType:"json",method:"post"})}throw w}}function f(e){return e.replaceAll("/","_").replaceAll("\\","_")}


/***/ }),

/***/ "./node_modules/@arcgis/core/support/progressUtils.js":
/*!************************************************************!*\
  !*** ./node_modules/@arcgis/core/support/progressUtils.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ProgressManager: () => (/* binding */ n),
/* harmony export */   estimatedConversionTime: () => (/* binding */ m),
/* harmony export */   estimatedTransferTime: () => (/* binding */ h),
/* harmony export */   makeProgressManager: () => (/* binding */ i),
/* harmony export */   simulateProgress: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_time_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/time.js */ "./node_modules/@arcgis/core/core/time.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(s,t=(s=>{}),e){return new n(s,t,e)}class n{constructor(s,t=(s=>{}),e){if(this.onProgress=t,this.taskName=e,this._progressMap=new Map,this._startTime=void 0,this._timingsMap=new Map,"number"==typeof s){this._weights={};for(let t=0;t<s;t++){const e=t,r=1/s;this._weights[e]=r,this._progressMap.set(e,0)}}else this._weights=s;this.emitProgress()}emitProgress(){let s=0;for(const[t,e]of this._progressMap.entries()){s+=e*this._weights[t]}if(1===s&&(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("enable-feature:esri-3dofl-upload-timings")){const s=Math.round(performance.now()-(this._startTime??0))/1e3;console.log(`${this.taskName} done in ${s} sec`);for(const[t,e]of this._timingsMap){const r=Math.round(e.end-e.start)/1e3,o=Math.round(r/s*100);console.log(this.taskName??"Task",{stepKey:t,stepTime:r,relativeTime:o})}}this.onProgress(s)}setProgress(s,e){if(this._progressMap.set(s,e),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("enable-feature:esri-3dofl-upload-timings")){const r=performance.now();this._startTime??=r;const o=(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__.getOrCreateMapValue)(this._timingsMap,s,(()=>({start:r,end:0})));1===e&&(o.end=r)}this.emitProgress()}simulate(s,t){return a((t=>this.setProgress(s,t)),t)}makeOnProgress(s){return t=>this.setProgress(s,t)}}function a(t=(s=>{}),e=l){const r=performance.now();t(0);const o=setInterval((()=>{const s=performance.now()-r,o=1-Math.exp(-s/e);t(o)}),g);return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__.makeHandle)((()=>{clearInterval(o),t(1)}))}function h(s,t=c){return (0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.millisecondsFromSeconds)((0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.Seconds)(s*f/t))}function m(s,t=p){return (0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.millisecondsFromSeconds)((0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.Seconds)(s*f/t))}const c=10,p=10,f=8e-6,g=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.Milliseconds)(50),l=(0,_core_time_js__WEBPACK_IMPORTED_MODULE_3__.Milliseconds)(1e3);


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19zb3VyY2VzX3N1cHBvcnRfdXBsb2FkQXNzZXRzX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeUMsd0NBQXdDLGdCQUFnQixzREFBQyxDQUFDLGNBQWMsU0FBUyxFQUFFLDREQUE0RCxnQkFBZ0Isc0RBQUMsQ0FBQyxjQUFjLFNBQVMsRUFBRSxxREFBcUQsZ0JBQWdCLHNEQUFDLENBQUMsY0FBYyxTQUFTLEVBQUUsaUVBQWlFLGdCQUFnQixzREFBQyxDQUFDLGNBQWMsU0FBUyxFQUFFLDRFQUE0RSxnQkFBZ0Isc0RBQUMsQ0FBQyxjQUFjLFNBQVMsRUFBRSxtRkFBbUYsZ0JBQWdCLHNEQUFDLENBQUMsaUJBQWlCLFNBQVMsRUFBRSx5Q0FBeUMsR0FBRyxxQkFBcUIsR0FBRyxnQkFBZ0IsZ0JBQWdCLHNEQUFDLENBQUMsaUJBQWlCLFNBQVMsRUFBRSxvREFBb0QsRUFBRSxnQkFBZ0IsY0FBYyxtQkFBbUIsdUJBQXVCLFFBQVEsZ0JBQWdCLHNEQUFDLENBQUMsZUFBZSxTQUFTLEVBQUUsb0ZBQW9GLEVBQUUsMkRBQTJELGdCQUFnQixzREFBQyxDQUFDLGNBQWMsU0FBUyxFQUFFLHlDQUEwUjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0pqN0M7QUFDQTtBQUNBO0FBQ0E7QUFDOHFDLHdCQUF3QixpQkFBaUIsbUNBQW1DLFFBQVEsK0VBQUMsaUNBQWlDLHdDQUF3QyxvQ0FBb0MsS0FBSyxvQkFBb0IseUJBQXlCLElBQUksaUJBQWlCLGNBQWMsbUJBQW1CLG1FQUFDLENBQUMsc0NBQXNDLGlCQUFpQixXQUFXLElBQUksUUFBUSxRQUFRLFlBQVksU0FBUyxnQkFBZ0IsTUFBTSxZQUFZLEdBQUcsb0RBQW9ELDRGQUFDLFFBQVEsd0JBQXdCLE1BQU0sV0FBVyxJQUFJLGdCQUFnQixr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S0FBSyxtSUFBbUksaUJBQWlCLFlBQVksSUFBSSxLQUFLLGdCQUFnQiwrQ0FBK0MscUJBQXFCLG9CQUFvQixlQUFlLFFBQVEsOENBQThDLHNCQUFzQixVQUFVLHdEQUFHLDhDQUE4QywrREFBK0QsZUFBZSxlQUFlLFVBQVUsR0FBRyxNQUFNLG1DQUFtQyw0REFBNEQsbUNBQW1DLG9DQUFvQyxHQUFHLG1CQUFtQixpQkFBaUIsOEJBQThCLHdEQUFHLDhDQUE4QywwQkFBMEIsb0JBQW9CLFFBQVEsc0VBQUMsMkJBQTJCLGNBQWMsSUFBSSxpQkFBaUIsb0JBQW9CLGNBQWMsdUNBQXVDLGtCQUFrQixpQ0FBaUMsbUJBQW1CLE9BQU8sMEJBQTBCLEtBQUssMEJBQTBCLCtDQUErQyxLQUFLLEtBQUssT0FBTyxnRUFBQyxPQUFPLHNCQUFzQixHQUFHLGtCQUFrQixPQUFPLHNFQUFDLENBQUMsc0RBQUMsU0FBUyxrQkFBa0IsT0FBTyxzRUFBQyxDQUFDLHNEQUFDLFNBQVMseUJBQXlCLDJEQUFDLE9BQU8sMkRBQUMsTUFBMEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvc3VwcG9ydC91cGxvYWRBc3NldEVycm9ycy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvc3VwcG9ydC91cGxvYWRBc3NldHMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL3N1cHBvcnQvdXBsb2FkUHJvZ3Jlc3NXZWlnaHRzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9zdXBwb3J0L3VwbG9hZHMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3N1cHBvcnQvcHJvZ3Jlc3NVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2NvbnN0IGU9XCJ1cGxvYWQtYXNzZXRzXCIsbz0oKT0+bmV3IEVycm9yO2NsYXNzIHIgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKCl7c3VwZXIoYCR7ZX06dW5zdXBwb3J0ZWRgLFwiTGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBhc3NldCB1cGxvYWRzLlwiLG8oKSl9fWNsYXNzIHQgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKCl7c3VwZXIoYCR7ZX06bm8tZ2xiLXN1cHBvcnRgLFwiTGF5ZXIgZG9lcyBub3Qgc3VwcG9ydCBnbGIuXCIsbygpKX19Y2xhc3MgYSBleHRlbmRzIHN7Y29uc3RydWN0b3IoKXtzdXBlcihgJHtlfTpuby1zdXBwb3J0ZWQtc291cmNlYCxcIk5vIHN1cHBvcnRlZCBleHRlcm5hbCBzb3VyY2UgZm91bmRcIixvKCkpfX1jbGFzcyBuIGV4dGVuZHMgc3tjb25zdHJ1Y3Rvcigpe3N1cGVyKGAke2V9Om5vdC1iYXNlLTY0YCxcIkV4cGVjdGVkIGdsdGYgZGF0YSBpbiBiYXNlNjQgZm9ybWF0IGFmdGVyIGNvbnZlcnNpb24uXCIsbygpKX19Y2xhc3MgcCBleHRlbmRzIHN7Y29uc3RydWN0b3IoKXtzdXBlcihgJHtlfTp1bmFibGUtdG8tcHJlcGFyZS1vcHRpb25zYCxcIlVuYWJsZSB0byBwcmVwYXJlIHVwbG9hZEFzc2V0IHJlcXVlc3Qgb3B0aW9ucy5cIixvKCkpfX1jbGFzcyB1IGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihzLHIpe3N1cGVyKGAke2V9OmJhZC1yZXNwb25zZWAsYEJhZCByZXNwb25zZS4gVXBsb2FkZWQgJHtzfSBpdGVtcyBhbmQgcmVjZWl2ZWQgJHtyfSByZXN1bHRzLmAsbygpKX19Y2xhc3MgYyBleHRlbmRzIHN7Y29uc3RydWN0b3IocyxyKXtzdXBlcihgJHtlfS1sYXllcjp1cGxvYWQtZmFpbGVkYCxgRmFpbGVkIHRvIHVwbG9hZCBtZXNoIGZpbGUgJHtzfS4gRXJyb3IgY29kZTogJHtyPy5jb2RlPz9cIi0xXCJ9LiBFcnJvciBtZXNzYWdlOiAke3I/Lm1lc3NhZ2VzPz9cInVua25vd25cIn1gLG8oKSl9fWNsYXNzIGQgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKHMpe3N1cGVyKGAke2V9LWxheWVyOnVuc3VwcG9ydGVkLWZvcm1hdGAsYFRoZSBzZXJ2aWNlIGFsbG93ZWQgdXMgdG8gdXBsb2FkIGFuIGFzc2V0IG9mIEZvcm1hdElEICR7c30sIGJ1dCBpdCBkb2VzIG5vdCBsaXN0IGl0IGluIGl0cyBzdXBwb3J0ZWQgZm9ybWF0cy5gLG8oKSl9fWNsYXNzIGwgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKCl7c3VwZXIoYCR7ZX06Y29udmVydDNELWZhaWxlZGAsXCJjb252ZXJ0M0QgZmFpbGVkLlwiKX19ZXhwb3J0e3UgYXMgQmFkUmVzcG9uc2VFcnJvcixsIGFzIENvbnZlcnQzREZhaWxlZEVycm9yLHQgYXMgTm9HbGJTdXBwb3J0RXJyb3IsYSBhcyBOb1N1cHBvcnRlZFNvdXJjZUVycm9yLG4gYXMgTm90QmFzZTY0RXJyb3IscCBhcyBVbmFibGVUb1ByZXBhcmVPcHRpb25zRXJyb3IsciBhcyBVbnN1cHBvcnRlZEVycm9yLGQgYXMgVW5zdXBwb3J0ZWRGb3JtYXRVcGxvYWRlZEVycm9yLGMgYXMgVXBsb2FkRmFpbGVkRXJyb3J9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBzIGZyb21cIi4uLy4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgdCxhZnRlciBhcyByLHRocm93SWZBYm9ydEVycm9yIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7TWlsbGlzZWNvbmRzIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS90aW1lLmpzXCI7aW1wb3J0e2pvaW4gYXMgYSxwYXJzZURhdGEgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0e2dlbmVyYXRlQnJhY2VkVVVJRCBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvdXVpZC5qc1wiO2ltcG9ydHtleHRlcm5hbElzT25TZXJ2aWNlIGFzIHUsYXNzZXRGb3JtYXRJZCBhcyBsLFNlcnZpY2VBc3NldCBhcyBwLFNlcnZpY2VBc3NldFBhcnQgYXMgbSxleHRlcm5hbFNvdXJjZVRvTXVsdGlQYXJ0IGFzIGZ9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9tZXNoVXRpbHMvRXh0ZXJuYWwuanNcIjtpbXBvcnR7VW5zdXBwb3J0ZWRFcnJvciBhcyBkLE5vU3VwcG9ydGVkU291cmNlRXJyb3IgYXMgZyxCYWRSZXNwb25zZUVycm9yIGFzIHksVXBsb2FkRmFpbGVkRXJyb3IgYXMgdyxVbnN1cHBvcnRlZEZvcm1hdFVwbG9hZGVkRXJyb3IgYXMgaCxDb252ZXJ0M0RGYWlsZWRFcnJvciBhcyBQLE5vR2xiU3VwcG9ydEVycm9yIGFzIFQsTm90QmFzZTY0RXJyb3IgYXMgYixVbmFibGVUb1ByZXBhcmVPcHRpb25zRXJyb3IgYXMgan1mcm9tXCIuL3VwbG9hZEFzc2V0RXJyb3JzLmpzXCI7aW1wb3J0e3VwbG9hZFByb2dyZXNzV2VpZ2h0cyBhcyBBfWZyb21cIi4vdXBsb2FkUHJvZ3Jlc3NXZWlnaHRzLmpzXCI7aW1wb3J0e3VwbG9hZEl0ZW0gYXMgRn1mcm9tXCIuL3VwbG9hZHMuanNcIjtpbXBvcnR7Z2V0Rm9ybWF0SWRNaW1lVHlwZSBhcyBVLGdldE1pbWVUeXBlRm9ybWF0SWQgYXMgUyxnZXRGaWxlbmFtZUZvcm1hdElkIGFzIHh9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9pbmZvRm9yM0QuanNcIjtpbXBvcnR7bWFrZVByb2dyZXNzTWFuYWdlciBhcyBFLGVzdGltYXRlZENvbnZlcnNpb25UaW1lIGFzIE4sc2ltdWxhdGVQcm9ncmVzcyBhcyBEfWZyb21cIi4uLy4uLy4uLy4uL3N1cHBvcnQvcHJvZ3Jlc3NVdGlscy5qc1wiO2FzeW5jIGZ1bmN0aW9uIE8ocyxlLHQpe2NvbnN0IHI9cy5sZW5ndGg7aWYoIXIpcmV0dXJuIHQ/Lm9uUHJvZ3Jlc3M/LigxKSxbXTtjb25zdCBvPUUocix0Py5vblByb2dyZXNzLFwidXBsb2FkQXNzZXRzXCIpO3JldHVybiBQcm9taXNlLmFsbChzLm1hcCgoKHMscik9PnYocyxlLHsuLi50LG9uUHJvZ3Jlc3M6by5tYWtlT25Qcm9ncmVzcyhyKX0pKSkpfWFzeW5jIGZ1bmN0aW9uIHYocyx7bGF5ZXI6ZSxvbmdvaW5nVXBsb2Fkczp0fSxyKXtjb25zdCBvPXQuZ2V0KHMpO2lmKG8pcmV0dXJuIG87aWYoIVooZSkpdGhyb3cgbmV3IGQ7aWYoSShzLGUpKXJldHVybiByPy5vblByb2dyZXNzPy4oMSkscztjb25zdCBuPWsocyxlLHIpO3Quc2V0KHMsbik7dHJ5e2F3YWl0IG59ZmluYWxseXt0LmRlbGV0ZShzKX1yZXR1cm4gc31mdW5jdGlvbiBJKHMsZSl7Y29uc3R7cGFyc2VkVXJsOnR9PWU7cmV0dXJuIG51bGwhPXQmJnMubWV0YWRhdGEuZXh0ZXJuYWxTb3VyY2VzLnNvbWUoKHM9PnUocyx0KSkpfWFzeW5jIGZ1bmN0aW9uIGsocyxlLHIpe2NvbnN0e21ldGFkYXRhOm99PXMse2Rpc3BsYXlTb3VyY2U6bn09byxhPUgobj8uc291cmNlLGUpLGk9ISFhLGM9by5leHRlcm5hbFNvdXJjZXMubGVuZ3RoPjAsdT1pP0IoYSxlLHIpOmM/UihzLGUscik6QyhzLGUsciksbD1hd2FpdCB1O3JldHVybiB0KHIpLHMuYWRkRXh0ZXJuYWxTb3VyY2VzKFtsXSksc31hc3luYyBmdW5jdGlvbiBCKHMsZSx0KXtyZXR1cm57c291cmNlOmF3YWl0IEcocyxlLHQpLG9yaWdpbmFsOiEwfX1hc3luYyBmdW5jdGlvbiBSKHMsZSx0KXtjb25zdCByPV8oZSkse2V4dGVybmFsU291cmNlczpvfT1zLm1ldGFkYXRhLG49cShvLGUpO2lmKCFuKXRocm93IG5ldyBnO2NvbnN0IGE9RShBLnVwbG9hZENvbnZlcnRpYmxlU291cmNlLHQ/Lm9uUHJvZ3Jlc3MsXCJ1cGxvYWRDb252ZXJ0aWJsZVNvdXJjZVwiKSxpPWF3YWl0IEcobixlLHtvblByb2dyZXNzOmEubWFrZU9uUHJvZ3Jlc3MoXCJ1cGxvYWRFZGl0U291cmNlXCIpfSk7cy5hZGRFeHRlcm5hbFNvdXJjZXMoW3tzb3VyY2U6aSxvcmlnaW5hbDohMH1dKTtjb25zdCBjPW4ucmVkdWNlKCgocyx7YXNzZXQ6ZX0pPT5lIGluc3RhbmNlb2YgRmlsZT9zK2Uuc2l6ZTpzKSwwKSx1PWEuc2ltdWxhdGUoXCJzZXJ2aWNlQXNzZXRzVG9HbGJcIixOKGMpKTt0cnl7cmV0dXJue3NvdXJjZTphd2FpdCBWKGksZSxyKX19ZmluYWxseXt1LnJlbW92ZSgpfX1hc3luYyBmdW5jdGlvbiBDKHMsZSx0KXtjb25zdCByPUUoQS51cGxvYWRMb2NhbE1lc2gsdD8ub25Qcm9ncmVzcyxcInVwbG9hZExvY2FsTWVzaFwiKSxvPUwocyxlLHsuLi50LG9uUHJvZ3Jlc3M6ci5tYWtlT25Qcm9ncmVzcyhcIm1lc2hUb0Fzc2V0QmxvYlwiKX0pO3JldHVybntzb3VyY2U6YXdhaXQgSihbb10sZSx7Li4udCxvblByb2dyZXNzOnIubWFrZU9uUHJvZ3Jlc3MoXCJ1cGxvYWRBc3NldEJsb2JzXCIpfSksZXh0ZW50OnMuZXh0ZW50LmNsb25lKCksb3JpZ2luYWw6ITB9fWFzeW5jIGZ1bmN0aW9uIEwocyxlLHIpe2NvbnN0IG89XyhlKSxuPWF3YWl0IHMubG9hZChyKSxhPWF3YWl0IG4udG9CaW5hcnlHTFRGKHtpZ25vcmVMb2NhbFRyYW5zZm9ybTohMH0pO3Qocik7Y29uc3QgaT1hd2FpdCBhLmJ1ZmZlcigpO3JldHVybiB0KHIpLHtibG9iOm5ldyBCbG9iKFtpLmRhdGFdLHt0eXBlOmkudHlwZX0pLGFzc2V0TmFtZTpgJHtjKCl9LmdsYmAsYXNzZXRUeXBlOm99fWZ1bmN0aW9uIHEocyxlKXtmb3IoY29uc3QgdCBvZiBzKXtjb25zdCBzPUgodC5zb3VyY2UsZSk7aWYocylyZXR1cm4gc31yZXR1cm4gbnVsbH1mdW5jdGlvbiBIKHMsZSl7aWYoIXMpcmV0dXJuIG51bGw7Y29uc3R7aW5mb0ZvcjNEOntzdXBwb3J0ZWRGb3JtYXRzOnQsZWRpdEZvcm1hdHM6cn19PWUsbz1mKHMpLG49bmV3IEFycmF5O2xldCBhPSExO2ZvcihsZXQgaT0wO2k8by5sZW5ndGg7KytpKXtjb25zdCBzPSQob1tpXSx0KTtpZighcylyZXR1cm4gbnVsbDtyLmluY2x1ZGVzKHMuYXNzZXRUeXBlKSYmKGE9ITApLG4ucHVzaChzKX1yZXR1cm4gYT9uOm51bGx9ZnVuY3Rpb24gJChzLGUpe2NvbnN0IHQ9bChzLGUpO3JldHVybiB0P3thc3NldDpzLGFzc2V0VHlwZTp0fTpudWxsfWFzeW5jIGZ1bmN0aW9uIEcocyxlLHQpe3JldHVybiBKKHMubWFwKChzPT5NKHMsdCkpKSxlLHQpfWFzeW5jIGZ1bmN0aW9uIEoocyxlLHIpe2NvbnN0IG89RShBLnVwbG9hZEFzc2V0QmxvYnMscj8ub25Qcm9ncmVzcyxcInVwbG9hZEFzc2V0QmxvYnNcIiksbj1hd2FpdCB6KHMsZSx7Li4ucixvblByb2dyZXNzOm8ubWFrZU9uUHJvZ3Jlc3MoXCJwcmVwYXJlQXNzZXRJdGVtc1wiKX0pO3Qocik7Y29uc3QgYT1uLm1hcCgoKHtpdGVtOnN9KT0+cykpLHt1cGxvYWRSZXN1bHRzOml9PWF3YWl0IEsoYSxlLHsuLi5yLG9uUHJvZ3Jlc3M6by5tYWtlT25Qcm9ncmVzcyhcInVwbG9hZEFzc2V0SXRlbXNcIil9KTtyZXR1cm4gdChyKSxzLm1hcCgoKHMsdCk9PlEoblt0XSxpW3RdLGUpKSl9YXN5bmMgZnVuY3Rpb24gTShzLGUpe2NvbnN0e2Fzc2V0OnIsYXNzZXRUeXBlOm99PXM7aWYociBpbnN0YW5jZW9mIEZpbGUpcmV0dXJue2Jsb2I6cixhc3NldE5hbWU6ci5uYW1lLGFzc2V0VHlwZTpvfTtjb25zdCBuPWF3YWl0IHIudG9CbG9iKGUpO3JldHVybiB0KGUpLHtibG9iOm4sYXNzZXROYW1lOnIuYXNzZXROYW1lLGFzc2V0VHlwZTpvfX1hc3luYyBmdW5jdGlvbiBXKHMsZSxyKXtjb25zdHtibG9iOm4sYXNzZXRUeXBlOmEsYXNzZXROYW1lOmN9PXM7bGV0IHU9bnVsbDt0cnl7Y29uc3Qgcz1hd2FpdCBGKHtkYXRhOm4sbmFtZTpjfSxlLnVybCxyKTt0KHIpLHU9e2Fzc2V0VHlwZTphLGFzc2V0VXBsb2FkSWQ6cy5pdGVtSUR9fWNhdGNoKGwpe28obCksc3MoKS53YXJuT25jZShgU2VydmljZSAke2UudXJsfSBkb2VzIG5vdCBzdXBwb3J0IHRoZSBSRVNUIFVwbG9hZHMgQVBJLmApfWlmKCF1KXtjb25zdCBzPWF3YWl0IGkobik7aWYodChyKSwhcy5pc0Jhc2U2NCl0aHJvdyBuZXcgYjt1PXthc3NldFR5cGU6YSxhc3NldERhdGE6cy5kYXRhfX1pZighdSl0aHJvdyBuZXcgajtyZXR1cm57aXRlbTp1LGFzc2V0TmFtZTpjfX1mdW5jdGlvbiB6KHMsZSxyKXtjb25zdCBvPUUocy5sZW5ndGgscj8ub25Qcm9ncmVzcyxcInByZXBhcmVBc3NldEl0ZW1zXCIpO3JldHVybiBQcm9taXNlLmFsbChzLm1hcCgoYXN5bmMocyxuKT0+e2NvbnN0IGE9Vyhhd2FpdCBzLGUsey4uLnIsb25Qcm9ncmVzczpvLm1ha2VPblByb2dyZXNzKG4pfSk7cmV0dXJuIHQociksYX0pKSl9YXN5bmMgZnVuY3Rpb24gSyhlLHIsbyl7Y29uc3Qgbj1EKG8/Lm9uUHJvZ3Jlc3MpO3RyeXtjb25zdCBuPWF3YWl0IHMoYShyLnBhcnNlZFVybC5wYXRoLFwidXBsb2FkQXNzZXRzXCIpLHt0aW1lb3V0OjAscXVlcnk6e2Y6XCJqc29uXCIsYXNzZXRzOkpTT04uc3RyaW5naWZ5KGUpfSxtZXRob2Q6XCJwb3N0XCIscmVzcG9uc2VUeXBlOlwianNvblwifSk7aWYodChvKSxuLmRhdGEudXBsb2FkUmVzdWx0cy5sZW5ndGghPT1lLmxlbmd0aCl0aHJvdyBuZXcgeShlLmxlbmd0aCxuLmRhdGEudXBsb2FkUmVzdWx0cy5sZW5ndGgpO3JldHVybiBuLmRhdGF9ZmluYWxseXtuLnJlbW92ZSgpfX1mdW5jdGlvbiBRKHMsZSx0KXtjb25zdHtzdWNjZXNzOnJ9PWU7aWYoIXIpe2NvbnN0e2Vycm9yOnR9PWU7dGhyb3cgbmV3IHcocy5hc3NldE5hbWUsdCl9Y29uc3R7YXNzZXRIYXNoOm99PWUse2Fzc2V0TmFtZTpuLGl0ZW06e2Fzc2V0VHlwZTphfX09cyx7aW5mb0ZvcjNEOntzdXBwb3J0ZWRGb3JtYXRzOml9fT10LGM9VShhLGkpO2lmKCFjKXRocm93IG5ldyBoKGEpO3JldHVybiBuZXcgcChuLGMsW25ldyBtKGAke3QucGFyc2VkVXJsLnBhdGh9L2Fzc2V0cy8ke299YCxvKV0pfWFzeW5jIGZ1bmN0aW9uIFYocyxlLHQpe2NvbnN0IHI9cy5tYXAoKCh7YXNzZXROYW1lOnMscGFydHM6ZX0pPT4oe2Fzc2V0TmFtZTpzLGFzc2V0SGFzaDplWzBdLnBhcnRIYXNofSkpKSxvPWUuY2FwYWJpbGl0aWVzPy5vcGVyYXRpb25zLnN1cHBvcnRzQXN5bmNDb252ZXJ0M0Qsbj17ZjpcImpzb25cIixhc3NldHM6SlNPTi5zdHJpbmdpZnkociksdHJhbnNwb3J0VHlwZTpcImVzcmlUcmFuc3BvcnRUeXBlVXJsXCIsdGFyZ2V0Rm9ybWF0OnQsYXN5bmM6b30saT1hKGUucGFyc2VkVXJsLnBhdGgsXCJjb252ZXJ0M0RcIik7bGV0IGM7dHJ5e2M9KGF3YWl0KG8/WTpYKShpLHtxdWVyeTpuLHJlc3BvbnNlVHlwZTpcImpzb25cIix0aW1lb3V0OjB9KSkuZGF0YX1jYXRjaChsKXt0aHJvdyBuZXcgUH1jb25zdHtzdXBwb3J0ZWRGb3JtYXRzOnV9PWUuaW5mb0ZvcjNEO3JldHVybiBjLmFzc2V0cy5tYXAoKHM9Pntjb25zdCBlPVMocy5jb250ZW50VHlwZSx1KTtpZighZSl0aHJvdyBuZXcgaChlKTtyZXR1cm4gbmV3IHAocy5hc3NldE5hbWUscy5jb250ZW50VHlwZSxbbmV3IG0ocy5hc3NldFVSTCxzLmFzc2V0SGFzaCldKX0pKX1mdW5jdGlvbiBYKGUsdCl7cmV0dXJuIHMoZSx0KX1hc3luYyBmdW5jdGlvbiBZKGUsdCl7Y29uc3Qgbz0oYXdhaXQgcyhlLHQpKS5kYXRhLnN0YXR1c1VybDtmb3IoOzspe2NvbnN0IGU9KGF3YWl0IHMobyx7cXVlcnk6e2Y6XCJqc29uXCJ9LHJlc3BvbnNlVHlwZTpcImpzb25cIn0pKS5kYXRhO3N3aXRjaChlLnN0YXR1cyl7Y2FzZVwiQ29tcGxldGVkXCI6cmV0dXJuIHMoZS5yZXN1bHRVcmwse3F1ZXJ5OntmOlwianNvblwifSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9KTtjYXNlXCJDb21wbGV0ZWRXaXRoRXJyb3JzXCI6dGhyb3cgbmV3IEVycm9yKGUuc3RhdHVzKTtjYXNlXCJGYWlsZWQgSW1wb3J0Q2hhbmdlc1wiOmNhc2VcIkluUHJvZ3Jlc3NcIjpjYXNlXCJQZW5kaW5nXCI6Y2FzZVwiRXhwb3J0QXR0YWNobWVudHNcIjpjYXNlXCJFeHBvcnRDaGFuZ2VzXCI6Y2FzZVwiRXhwb3J0aW5nRGF0YVwiOmNhc2VcIkV4cG9ydGluZ1NuYXBzaG90XCI6Y2FzZVwiSW1wb3J0QXR0YWNobWVudHNcIjpjYXNlXCJQcm92aXNpb25pbmdSZXBsaWNhXCI6Y2FzZVwiVW5SZWdpc3RlcmluZ1JlcGxpY2FcIjpicmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcn1hd2FpdCByKGVzKX19ZnVuY3Rpb24gWihzKXtyZXR1cm4hIXMuaW5mb0ZvcjNEJiYhIXMudXJsfWZ1bmN0aW9uIF8ocyl7Y29uc3R7aW5mb0ZvcjNEOmV9PXMsdD1TKFwibW9kZWwvZ2x0Zi1iaW5hcnlcIixlLnN1cHBvcnRlZEZvcm1hdHMpPz94KFwiZ2xiXCIsZS5zdXBwb3J0ZWRGb3JtYXRzKTtpZighdCl0aHJvdyBuZXcgVDtyZXR1cm4gdH1mdW5jdGlvbiBzcygpe3JldHVybiBlLmdldExvZ2dlcihcImVzcmkubGF5ZXJzLmdyYXBoaWNzLnNvdXJjZXMuc3VwcG9ydC51cGxvYWRBc3NldHNcIil9Y29uc3QgZXM9bigxZTMpO2V4cG9ydHtPIGFzIHVwbG9hZEFzc2V0c307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgZT17dXBsb2FkOntjcmVhdGVGcm9tRmlsZXM6LjgsbG9hZE1lc2g6LjJ9LHVwbG9hZEFzc2V0QmxvYnM6e3ByZXBhcmVBc3NldEl0ZW1zOi45LHVwbG9hZEFzc2V0SXRlbXM6LjF9LHVwbG9hZENvbnZlcnRpYmxlU291cmNlOnt1cGxvYWRFZGl0U291cmNlOi41LHNlcnZpY2VBc3NldHNUb0dsYjouNX0sdXBsb2FkTG9jYWxNZXNoOnttZXNoVG9Bc3NldEJsb2I6LjUsdXBsb2FkQXNzZXRCbG9iczouNX19O2V4cG9ydHtlIGFzIHVwbG9hZFByb2dyZXNzV2VpZ2h0c307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vcmVxdWVzdC5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtqb2luIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtpc0hvc3RlZEFnb2xTZXJ2aWNlIGFzIHN9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9hcmNnaXNMYXllclVybC5qc1wiO2ltcG9ydHthcnJheUJ1ZmZlclRvQmFzZTY0IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9iYXNlNjRVdGlscy5qc1wiO2ltcG9ydHttYWtlUHJvZ3Jlc3NNYW5hZ2VyIGFzIGEsZXN0aW1hdGVkVHJhbnNmZXJUaW1lIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9wcm9ncmVzc1V0aWxzLmpzXCI7Y29uc3QgaT0xZTYscD0yMCppLGw9MmU5LG09Mzthc3luYyBmdW5jdGlvbiBjKHtkYXRhOnIsbmFtZTpjLGRlc2NyaXB0aW9uOnV9LGQsaCl7bGV0IGo9bnVsbDt0cnl7Y29uc3Qgdz10KGQsXCJ1cGxvYWRzXCIpLHk9dCh3LFwiaW5mb1wiKSx7ZGF0YTpnfT1hd2FpdCBlKHkse3F1ZXJ5OntmOlwianNvblwifSxyZXNwb25zZVR5cGU6XCJqc29uXCJ9KTtvKGgpO2NvbnN0IFU9cyhkKSxxPWcubWF4VXBsb2FkRmlsZVNpemUqaSx6PVU/bDpxLFQ9VT9NYXRoLm1pbihwLHEpOnA7aWYoci5zaXplPnopdGhyb3cgbmV3IEVycm9yKFwiRGF0YSB0b28gbGFyZ2VcIik7Y29uc3QgQT10KHcsXCJyZWdpc3RlclwiKSx7ZGF0YTpFfT1hd2FpdCBlKEEse3F1ZXJ5OntmOlwianNvblwiLGl0ZW1OYW1lOmYoYyksZGVzY3JpcHRpb246dX0scmVzcG9uc2VUeXBlOlwianNvblwiLG1ldGhvZDpcInBvc3RcIn0pO2lmKG8oaCksIUUuc3VjY2Vzcyl0aHJvdyBuZXcgRXJyb3IoXCJSZWdpc3RyYXRpb24gZmFpbGVkXCIpO2NvbnN0e2l0ZW1JRDpQfT1FLml0ZW07aj10KHcsUCk7Y29uc3QgRD10KGosXCJ1cGxvYWRQYXJ0XCIpLEk9TWF0aC5jZWlsKHIuc2l6ZS9UKSxNPW5ldyBBcnJheTtmb3IobGV0IGU9MDtlPEk7KytlKU0ucHVzaChyLnNsaWNlKGUqVCxNYXRoLm1pbigoZSsxKSpULHIuc2l6ZSkpKTtjb25zdCBiPU0uc2xpY2UoKS5yZXZlcnNlKCksdj1uZXcgQXJyYXkseD1hKEksaD8ub25Qcm9ncmVzcyxcInVwbG9hZEl0ZW1cIiksRj1hc3luYygpPT57Zm9yKDswIT09Yi5sZW5ndGg7KXtjb25zdCB0PU0ubGVuZ3RoLWIubGVuZ3RoLHM9Yi5wb3AoKSxyPW5ldyBGb3JtRGF0YSxhPXguc2ltdWxhdGUodCxuKHMuc2l6ZSkpO3RyeXtjb25zdCBhPXM7ci5hcHBlbmQoXCJmXCIsXCJqc29uXCIpLHIuYXBwZW5kKFwiZmlsZVwiLGEpLHIuYXBwZW5kKFwicGFydElkXCIsYCR7dH1gKTtjb25zdHtkYXRhOm59PWF3YWl0IGUoRCx7dGltZW91dDowLGJvZHk6cixyZXNwb25zZVR5cGU6XCJqc29uXCIsbWV0aG9kOlwicG9zdFwifSk7aWYobyhoKSwhbi5zdWNjZXNzKXRocm93IG5ldyBFcnJvcihcIlBhcnQgdXBsb2FkIGZhaWxlZFwiKX1maW5hbGx5e2EucmVtb3ZlKCl9fX07Zm9yKGxldCBlPTA7ZTxtJiYwIT09Yi5sZW5ndGg7KytlKXYucHVzaChGKCkpO2F3YWl0IFByb21pc2UuYWxsKHYpO2NvbnN0IF89dChqLFwiY29tbWl0XCIpLHtkYXRhOkN9PWF3YWl0IGUoXyx7cXVlcnk6e2Y6XCJqc29uXCIscGFydHM6TS5tYXAoKChlLG8pPT5vKSkuam9pbihcIixcIil9LHJlc3BvbnNlVHlwZTpcImpzb25cIixtZXRob2Q6XCJwb3N0XCJ9KTtpZihvKGgpLCFDLnN1Y2Nlc3MpdGhyb3cgbmV3IEVycm9yKFwiQ29tbWl0IGZhaWxlZFwiKTtyZXR1cm4gQy5pdGVtfWNhdGNoKHcpe2lmKG51bGwhPWope2NvbnN0IG89dChqLFwiZGVsZXRlXCIpO2F3YWl0IGUobyx7cXVlcnk6e2Y6XCJqc29uXCJ9LHJlc3BvbnNlVHlwZTpcImpzb25cIixtZXRob2Q6XCJwb3N0XCJ9KX10aHJvdyB3fX1mdW5jdGlvbiBmKGUpe3JldHVybiBlLnJlcGxhY2VBbGwoXCIvXCIsXCJfXCIpLnJlcGxhY2VBbGwoXCJcXFxcXCIsXCJfXCIpfWV4cG9ydHtjIGFzIHVwbG9hZEl0ZW19O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHttYWtlSGFuZGxlIGFzIHN9ZnJvbVwiLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7Z2V0T3JDcmVhdGVNYXBWYWx1ZSBhcyB0fWZyb21cIi4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7bWlsbGlzZWNvbmRzRnJvbVNlY29uZHMgYXMgZSxTZWNvbmRzIGFzIHIsTWlsbGlzZWNvbmRzIGFzIG99ZnJvbVwiLi4vY29yZS90aW1lLmpzXCI7ZnVuY3Rpb24gaShzLHQ9KHM9Pnt9KSxlKXtyZXR1cm4gbmV3IG4ocyx0LGUpfWNsYXNzIG57Y29uc3RydWN0b3Iocyx0PShzPT57fSksZSl7aWYodGhpcy5vblByb2dyZXNzPXQsdGhpcy50YXNrTmFtZT1lLHRoaXMuX3Byb2dyZXNzTWFwPW5ldyBNYXAsdGhpcy5fc3RhcnRUaW1lPXZvaWQgMCx0aGlzLl90aW1pbmdzTWFwPW5ldyBNYXAsXCJudW1iZXJcIj09dHlwZW9mIHMpe3RoaXMuX3dlaWdodHM9e307Zm9yKGxldCB0PTA7dDxzO3QrKyl7Y29uc3QgZT10LHI9MS9zO3RoaXMuX3dlaWdodHNbZV09cix0aGlzLl9wcm9ncmVzc01hcC5zZXQoZSwwKX19ZWxzZSB0aGlzLl93ZWlnaHRzPXM7dGhpcy5lbWl0UHJvZ3Jlc3MoKX1lbWl0UHJvZ3Jlc3MoKXtsZXQgcz0wO2Zvcihjb25zdFt0LGVdb2YgdGhpcy5fcHJvZ3Jlc3NNYXAuZW50cmllcygpKXtzKz1lKnRoaXMuX3dlaWdodHNbdF19aWYoMT09PXMmJmhhcyhcImVuYWJsZS1mZWF0dXJlOmVzcmktM2RvZmwtdXBsb2FkLXRpbWluZ3NcIikpe2NvbnN0IHM9TWF0aC5yb3VuZChwZXJmb3JtYW5jZS5ub3coKS0odGhpcy5fc3RhcnRUaW1lPz8wKSkvMWUzO2NvbnNvbGUubG9nKGAke3RoaXMudGFza05hbWV9IGRvbmUgaW4gJHtzfSBzZWNgKTtmb3IoY29uc3RbdCxlXW9mIHRoaXMuX3RpbWluZ3NNYXApe2NvbnN0IHI9TWF0aC5yb3VuZChlLmVuZC1lLnN0YXJ0KS8xZTMsbz1NYXRoLnJvdW5kKHIvcyoxMDApO2NvbnNvbGUubG9nKHRoaXMudGFza05hbWU/P1wiVGFza1wiLHtzdGVwS2V5OnQsc3RlcFRpbWU6cixyZWxhdGl2ZVRpbWU6b30pfX10aGlzLm9uUHJvZ3Jlc3Mocyl9c2V0UHJvZ3Jlc3MocyxlKXtpZih0aGlzLl9wcm9ncmVzc01hcC5zZXQocyxlKSxoYXMoXCJlbmFibGUtZmVhdHVyZTplc3JpLTNkb2ZsLXVwbG9hZC10aW1pbmdzXCIpKXtjb25zdCByPXBlcmZvcm1hbmNlLm5vdygpO3RoaXMuX3N0YXJ0VGltZT8/PXI7Y29uc3Qgbz10KHRoaXMuX3RpbWluZ3NNYXAscywoKCk9Pih7c3RhcnQ6cixlbmQ6MH0pKSk7MT09PWUmJihvLmVuZD1yKX10aGlzLmVtaXRQcm9ncmVzcygpfXNpbXVsYXRlKHMsdCl7cmV0dXJuIGEoKHQ9PnRoaXMuc2V0UHJvZ3Jlc3Mocyx0KSksdCl9bWFrZU9uUHJvZ3Jlc3Mocyl7cmV0dXJuIHQ9PnRoaXMuc2V0UHJvZ3Jlc3Mocyx0KX19ZnVuY3Rpb24gYSh0PShzPT57fSksZT1sKXtjb25zdCByPXBlcmZvcm1hbmNlLm5vdygpO3QoMCk7Y29uc3Qgbz1zZXRJbnRlcnZhbCgoKCk9Pntjb25zdCBzPXBlcmZvcm1hbmNlLm5vdygpLXIsbz0xLU1hdGguZXhwKC1zL2UpO3Qobyl9KSxnKTtyZXR1cm4gcygoKCk9PntjbGVhckludGVydmFsKG8pLHQoMSl9KSl9ZnVuY3Rpb24gaChzLHQ9Yyl7cmV0dXJuIGUocihzKmYvdCkpfWZ1bmN0aW9uIG0ocyx0PXApe3JldHVybiBlKHIocypmL3QpKX1jb25zdCBjPTEwLHA9MTAsZj04ZS02LGc9byg1MCksbD1vKDFlMyk7ZXhwb3J0e24gYXMgUHJvZ3Jlc3NNYW5hZ2VyLG0gYXMgZXN0aW1hdGVkQ29udmVyc2lvblRpbWUsaCBhcyBlc3RpbWF0ZWRUcmFuc2ZlclRpbWUsaSBhcyBtYWtlUHJvZ3Jlc3NNYW5hZ2VyLGEgYXMgc2ltdWxhdGVQcm9ncmVzc307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=