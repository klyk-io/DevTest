"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_interactive_snapping_featureSources_GraphicsSna-547387"],{

/***/ "./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CutVertical: () => (/* binding */ T),
/* harmony export */   normalizeCentralMeridianForDisplay: () => (/* binding */ a),
/* harmony export */   normalizeCentralMeridianSync: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _boundsUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./coordsUtils.js */ "./node_modules/@arcgis/core/geometry/support/coordsUtils.js");
/* harmony import */ var _jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./normalizeUtilsCommon.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtilsCommon.js");
/* harmony import */ var _spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function p(t){return f(t,!0)}function a(t){return f(t,!1)}function f(i,n){if(null==i)return null;const p=i.spatialReference,a=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__.getInfo)(p),f=(0,_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_0__.isSerializable)(i)?i.toJSON():i;if(!a)return f;const I=(0,_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__.isWebMercator)(p)?102100:4326,g=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.cutParams[I].maxX,v=_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.cutParams[I].minX;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isPoint)(f))return y(f,g,v);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isMultipoint)(f))return f.points=f.points.map((t=>y(t,g,v))),f;if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isExtent)(f))return d(f,a);if((0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isPolygon)(f)||(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isPolyline)(f)){const t=(0,_boundsUtils_js__WEBPACK_IMPORTED_MODULE_2__.getBoundsXY)(S,f),i={xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3]},e=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.offsetMagnitude)(i.xmin,v)*(2*g),h=0===e?f:(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.updatePolyGeometry)(f,e);return i.xmin+=e,i.xmax+=e,i.xmax>g?P(h,g,n):i.xmin<v?P(h,v,n):h}return f}function d(t,i){if(!i)return t;const s=I(t,i).map((t=>t.extent));return s.length<2?s[0]||t:s.length>2?(t.xmin=i.valid[0],t.xmax=i.valid[1],t):{rings:s.map((t=>[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]))}}function y(t,i,s){if(Array.isArray(t)){const n=t[0];if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.offsetMagnitude)(n,i);t[0]=n+s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.offsetMagnitude)(n,s);t[0]=n+i*(-2*s)}}else{const n=t.x;if(n>i){const s=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.offsetMagnitude)(n,i);t.x+=s*(-2*i)}else if(n<s){const i=(0,_normalizeUtilsCommon_js__WEBPACK_IMPORTED_MODULE_5__.offsetMagnitude)(n,s);t.x+=i*(-2*s)}}return t}function I(t,i){const s=[],{ymin:n,ymax:e,xmin:h,xmax:o}=t,r=t.xmax-t.xmin,[u,m]=i.valid,{x,frameId:_}=g(t.xmin,i),{x:l,frameId:c}=g(t.xmax,i),p=x===l&&r>0;if(r>2*m){const t={xmin:h<o?x:l,ymin:n,xmax:m,ymax:e},i={xmin:u,ymin:n,xmax:h<o?l:x,ymax:e},r={xmin:0,ymin:n,xmax:m,ymax:e},p={xmin:u,ymin:n,xmax:0,ymax:e},a=[],f=[];v(t,r)&&a.push(_),v(t,p)&&f.push(_),v(i,r)&&a.push(c),v(i,p)&&f.push(c);for(let s=_+1;s<c;s++)a.push(s),f.push(s);s.push(new C(t,[_]),new C(i,[c]),new C(r,a),new C(p,f))}else x>l||p?s.push(new C({xmin:x,ymin:n,xmax:m,ymax:e},[_]),new C({xmin:u,ymin:n,xmax:l,ymax:e},[c])):s.push(new C({xmin:x,ymin:n,xmax:l,ymax:e},[_]));return s}function g(t,i){const[s,n]=i.valid,e=2*n;let h,o=0;return t>n?(h=Math.ceil(Math.abs(t-n)/e),t-=h*e,o=h):t<s&&(h=Math.ceil(Math.abs(t-s)/e),t+=h*e,o=-h),{x:t,frameId:o}}function v(t,i){const{xmin:s,ymin:n,xmax:e,ymax:h}=i;return O(t,s,n)&&O(t,s,h)&&O(t,e,h)&&O(t,e,n)}function O(t,i,s){return i>=t.xmin&&i<=t.xmax&&s>=t.ymin&&s<=t.ymax}function P(t,i,s=!0){const e=!(0,_jsonUtils_js__WEBPACK_IMPORTED_MODULE_4__.isPolyline)(t);if(e&&(0,_coordsUtils_js__WEBPACK_IMPORTED_MODULE_3__.closeRings)(t),s){return(new T).cut(t,i)}const h=e?t.rings:t.paths,o=e?4:2,r=h.length,m=-2*i;for(let n=0;n<r;n++){const t=h[n];if(t&&t.length>=o){const i=[];for(const s of t)i.push([s[0]+m,s[1]]);h.push(i)}}return e?t.rings=h:t.paths=h,t}class C{constructor(t,i){this.extent=t,this.frameIds=i}}const S=(0,_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)();class T{constructor(){this._linesIn=[],this._linesOut=[]}cut(t,i){let s;if(this._xCut=i,t.rings)this._closed=!0,s=t.rings,this._minPts=4;else{if(!t.paths)return null;this._closed=!1,s=t.paths,this._minPts=2}for(const e of s){if(!e||e.length<this._minPts)continue;let t=!0;for(const i of e)t?(this.moveTo(i),t=!1):this.lineTo(i);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),s=[];for(const e of this._linesIn)e&&e.length>=this._minPts&&s.push(e);const n=-2*this._xCut;for(const e of this._linesOut)if(e&&e.length>=this._minPts){for(const t of e)t[0]+=n;s.push(e)}return this._closed?t.rings=s:t.paths=s,t}moveTo(t){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(t[0]),this._moveTo(t[0],t[1],this._prevSide),this._prevPt=t,this._firstPt=t}lineTo(t){const i=this._side(t[0]);if(i*this._prevSide==-1){const s=this._intersect(this._prevPt,t);this._lineTo(this._xCut,s,0),this._prevSide=0,this._lineTo(t[0],t[1],i)}else this._lineTo(t[0],t[1],i);this._prevSide=i,this._prevPt=t}close(){const t=this._firstPt,i=this._prevPt;t[0]===i[0]&&t[1]===i[1]||this.lineTo(t),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(t,i,s){this._closed?(this._lineIn.push([s<=0?t:this._xCut,i]),this._lineOut.push([s>=0?t:this._xCut,i])):(s<=0&&this._lineIn.push([t,i]),s>=0&&this._lineOut.push([t,i]))}_lineTo(t,i,s){this._closed?(this._addPolyVertex(this._lineIn,s<=0?t:this._xCut,i),this._addPolyVertex(this._lineOut,s>=0?t:this._xCut,i)):s<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([t,i])):s>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([t,i])):this._prevSide<0?(this._lineIn.push([t,i]),this._lineOut.push([t,i])):this._prevSide>0&&(this._lineOut.push([t,i]),this._lineIn.push([t,i]))}_addPolyVertex(t,i,s){const n=t.length;n>1&&t[n-1][0]===i&&t[n-2][0]===i?t[n-1][1]=s:t.push([i,s])}_checkClosingPt(t){const i=t.length;i>3&&t[0][0]===this._xCut&&t[i-2][0]===this._xCut&&t[1][0]===this._xCut&&(t[0][1]=t[i-2][1],t.pop())}_side(t){return t<this._xCut?-1:t>this._xCut?1:0}_intersect(t,i){const s=(this._xCut-t[0])/(i[0]-t[0]);return t[1]+s*(i[1]-t[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VertexSnappingCandidate: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _sketch_constraints_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sketch/constraints.js */ "./node_modules/@arcgis/core/views/interactive/sketch/constraints.js");
/* harmony import */ var _FeatureSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./FeatureSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/FeatureSnappingCandidate.js");
/* harmony import */ var _hints_PointSnappingHint_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../hints/PointSnappingHint.js */ "./node_modules/@arcgis/core/views/interactive/snapping/hints/PointSnappingHint.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _FeatureSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_1__.FeatureSnappingCandidate{constructor(n){super({...n,constraint:new _sketch_constraints_js__WEBPACK_IMPORTED_MODULE_0__.PointConstraint(n.targetPoint)})}get hints(){return[new _hints_PointSnappingHint_js__WEBPACK_IMPORTED_MODULE_2__.PointSnappingHint(this.targetPoint,this.isDraped,this.domain)]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/GraphicsSnappingSource.js ***!
  \*******************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsSnappingSource: () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_memoize_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/memoize.js */ "./node_modules/@arcgis/core/core/memoize.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../geometry/Polygon.js */ "./node_modules/@arcgis/core/geometry/Polygon.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_support_normalizeUtilsSync_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../geometry/support/normalizeUtilsSync.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtilsSync.js");
/* harmony import */ var _geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../geometry/support/typeUtils.js */ "./node_modules/@arcgis/core/geometry/support/typeUtils.js");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../layers/graphics/OptimizedFeature.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js");
/* harmony import */ var _layers_graphics_data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../layers/graphics/data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../layers/graphics/data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../layers/support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../support/elevationInfoUtils.js */ "./node_modules/@arcgis/core/support/elevationInfoUtils.js");
/* harmony import */ var _symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../symbols/support/utils.js */ "./node_modules/@arcgis/core/symbols/support/utils.js");
/* harmony import */ var _snappingUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../snappingUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/snappingUtils.js");
/* harmony import */ var _queryEngineUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./queryEngineUtils.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js");
/* harmony import */ var _snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./snappingCandidateElevationAlignment.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js");
/* harmony import */ var _snappingCandidateElevationFilter_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./snappingCandidateElevationFilter.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js");
/* harmony import */ var _symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./symbologySnappingCandidates.js */ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const z="graphics-collections";let O=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{get updating(){return this._updatingHandles.updating}get _hasZ(){const e=this.view;return null!=e&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type}get _snappingElevationAligner(){const{view:e}=this,{layer:t}=this.layerSource,s=null!=e&&"3d"===e.type;if(!s||"map-notes"===t.type)return (0,_snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_25__.getSnappingCandidateElevationAligner)();const o=async(s,o)=>(await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.whenOrAbort)(e.whenLayerView(t),o)).elevationAlignPointsInFeatures(s,o);return (0,_snappingCandidateElevationAlignment_js__WEBPACK_IMPORTED_MODULE_25__.getSnappingCandidateElevationAligner)(s,{elevationInfo:t.elevationInfo,alignPointsInFeatures:o})}get _snappingElevationFilter(){const{view:e}=this,t=null!=e&&"3d"===e.type&&"map-notes"!==this.layerSource.layer.type;return (0,_snappingCandidateElevationFilter_js__WEBPACK_IMPORTED_MODULE_26__.getSnappingCandidateElevationFilter)(t)}get _symbologySnappingFetcher(){const{view:e}=this,{layer:t}=this.layerSource,s=null!=e&&"3d"===e.type,o=this._extrudedPolygonSymbolsCount>0;return s&&"map-notes"!==t.type&&o?(0,_symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_27__.getSymbologySnappingCandidatesFetcher)(o,(async(s,o)=>{const r=await e.whenLayerView(t);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(o),r.queryForSymbologySnapping({candidates:s,spatialReference:e.spatialReference},o)})):(0,_symbologySnappingCandidates_js__WEBPACK_IMPORTED_MODULE_27__.getSymbologySnappingCandidatesFetcher)()}constructor(e){super(e),this.availability=1,this._sources={multipoint:null,point:null,polygon:null,polyline:null},this._loadedWkids=new Set,this._loadedWkts=new Set,this._pendingAdds=[],this._extrudedPolygonSymbolsCount=0,this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_11__.UpdatingHandles,this._memoizedMakeGetGroundElevation=(0,_core_memoize_js__WEBPACK_IMPORTED_MODULE_4__.memoize)(_queryEngineUtils_js__WEBPACK_IMPORTED_MODULE_24__.makeGetGroundElevation)}destroy(){for(const e of this._pendingAdds)e.task.abort();this._pendingAdds.length=0,this._mapSources((e=>this._destroySource(e))),this._updatingHandles.destroy()}initialize(){this._updatingHandles.add((()=>this.getGraphicsLayers()),(e=>{this._updatingHandles.removeHandles(z);for(const t of e)this._addMany(t.graphics.toArray()),this.addHandles([t.on("graphic-update",(e=>this._onGraphicUpdate(e))),this._updatingHandles.addOnCollectionChange((()=>t.graphics),(e=>this._onGraphicsChanged(e)))],z)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial);const{view:e}=this,{layer:t}=this.layerSource;null!=e&&"3d"===e.type&&"map-notes"!==t.type&&this.addHandles([e.elevationProvider.on("elevation-change",(({context:e})=>{(0,_support_elevationInfoUtils_js__WEBPACK_IMPORTED_MODULE_21__.elevationContextAffectsAlignment)(e,t.elevationInfo)&&this._snappingElevationAligner.notifyElevationSourceChange()})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>t.elevationInfo),(()=>this._snappingElevationAligner.notifyElevationSourceChange()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.on)((()=>t),["edits","apply-edits","graphic-update"],(()=>this._symbologySnappingFetcher.notifySymbologyChange()))])}async fetchCandidates(e,t){const{point:s,coordinateHelper:{spatialReference:o}}=e,r=await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.allSettledValues)(this._mapSources((s=>this._fetchCandidatesForSource(s,e,t))));(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(t);const a=this._memoizedMakeGetGroundElevation(this.view,o),p=r.flat().map((e=>(0,_queryEngineUtils_js__WEBPACK_IMPORTED_MODULE_24__.convertSnappingCandidate)(e,a)));return (0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_23__.sortCandidatesInPlace)(s,p),p}async _fetchCandidatesForSource(e,t,s){const o=(0,_snappingUtils_js__WEBPACK_IMPORTED_MODULE_23__.makeSnappingQuery)(t,this.view?.type??"2d"),r=await e.queryEngine.executeQueryForSnapping(o,s);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(s);const n=await this._snappingElevationAligner.alignCandidates(r.candidates,t.coordinateHelper.spatialReference,s);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(s);const a=await this._symbologySnappingFetcher.fetch(n,s);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(s);const p=0===a.length?n:[...n,...a];return this._snappingElevationFilter.filter(o,p)}refresh(){}_onGraphicUpdate(e){if(this.getGraphicsLayers().some((t=>t.graphics.includes(e.graphic))))switch(e.property){case"geometry":case"visible":this._remove(e.graphic),this._addMany([e.graphic])}}_onGraphicsChanged(e){for(const t of e.removed)this._remove(t);this._addMany(e.added)}_addMany(e){const t=[],s=new Map;for(const o of e)null!=o.geometry&&(this._needsInitializeProjection(o.geometry.spatialReference)?(t.push(o.geometry.spatialReference),s.set(o.uid,o)):this._add(o));this._createPendingAdd(t,s)}_createPendingAdd(e,t){if(!e.length)return;const r=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_3__.createTask)((async s=>{await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_13__.initializeProjection)(e.map((e=>({source:e,dest:this.spatialReference}))),{signal:s}),this._markLoadedSpatialReferences(e);for(const[,e]of t)this._add(e)}));this._updatingHandles.addPromise(r.promise);const i={task:r,graphics:t},n=()=>(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.removeUnordered)(this._pendingAdds,i);r.promise.then(n,n),this._pendingAdds.push(i)}_markLoadedSpatialReferences(e){for(const t of e){null!=t.wkid&&this._loadedWkids.add(t.wkid);const e=t.wkt2||t.wkt;e&&this._loadedWkts.add(e)}}_add(e){if(null==e.geometry||!e.visible)return;let t=e.geometry;if("mesh"===t.type)return;"extent"===t.type&&(t=_geometry_Polygon_js__WEBPACK_IMPORTED_MODULE_12__["default"].fromExtent(t));const s=this._ensureSource(t.type);if(null==s)return;const o=this._createOptimizedFeature(e.uid,t);null!=o&&(s.featureStore.add(o),(0,_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_22__.symbolHasExtrudeSymbolLayer)(e.symbol)&&this._extrudedPolygonSymbolsCount++)}_needsInitializeProjection(e){if(null!=e.wkid&&this._loadedWkids.has(e.wkid))return!1;const t=e.wkt2||e.wkt;return(!t||!this._loadedWkts.has(t))&&!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_13__.canProjectWithoutEngine)(e,this.spatialReference)}_createOptimizedFeature(e,t){const s=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_13__.project)((0,_geometry_support_normalizeUtilsSync_js__WEBPACK_IMPORTED_MODULE_14__.normalizeCentralMeridianForDisplay)(t),this.spatialReference);if(!s)return null;const o=this._ensureGeometryHasZ(s),r=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_16__.convertFromGeometry)(o,this._hasZ,!1);return new _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_17__.OptimizedFeature(r,{[U]:e},null,e)}_ensureGeometryHasZ(e){if(!this._hasZ)return e;const t=e=>{for(;e.length<3;)e.push(0)},s=e.clone();switch(s.hasZ=!0,s.type){case"point":s.z=s.z??0;break;case"multipoint":s.points.forEach(t);break;case"polyline":s.paths.forEach((e=>e.forEach(t)));break;case"polygon":s.rings.forEach((e=>e.forEach(t)))}return s}_ensureSource(e){const t=this._sources[e];if(null!=t)return t;const s=this._createSource(e);return this._sources[e]=s,s}_createSource(e){const t=_geometry_support_typeUtils_js__WEBPACK_IMPORTED_MODULE_15__.featureGeometryTypeKebabDictionary.toJSON(e),s=this._hasZ,o=new _layers_graphics_data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_18__["default"]({geometryType:t,hasZ:s,hasM:!1});return{featureStore:o,queryEngine:new _layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_19__.QueryEngine({featureStore:o,fieldsIndex:_layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_20__["default"].fromLayerJSON({fields:[{name:U,type:"esriFieldTypeOID",alias:U}]}),geometryType:t,hasM:!1,hasZ:s,objectIdField:U,spatialReference:this.spatialReference,priority:_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_28__.TaskPriority.SNAPPING,scheduler:null!=this.view&&"3d"===this.view.type?this.view.resourceController.scheduler:null}),type:e}}_remove(e){this._mapSources((t=>this._removeFromSource(t,e)));for(const t of this._pendingAdds)t.graphics.delete(e.uid),0===t.graphics.size&&t.task.abort()}_removeFromSource(e,t){const s=t.uid;e.featureStore.has(s)&&(e.featureStore.removeById(t.uid),(0,_symbols_support_utils_js__WEBPACK_IMPORTED_MODULE_22__.symbolHasExtrudeSymbolLayer)(t.symbol)&&this._extrudedPolygonSymbolsCount--)}_destroySource(e){e.queryEngine.destroy(),this._sources[e.type]=null}_mapSources(e){const{point:t,polygon:s,polyline:o,multipoint:r}=this._sources,i=[];return null!=t&&i.push(e(t)),null!=s&&i.push(e(s)),null!=o&&i.push(e(o)),null!=r&&i.push(e(r)),i}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"getGraphicsLayers",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],O.prototype,"layerSource",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],O.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],O.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],O.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],O.prototype,"availability",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"_hasZ",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"_snappingElevationAligner",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"_snappingElevationFilter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"_symbologySnappingFetcher",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],O.prototype,"_extrudedPolygonSymbolsCount",void 0),O=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.views.interactive.snapping.featureSources.GraphicsSnappingSource")],O);const U="OBJECTID";


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/queryEngineUtils.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertSnappingCandidate: () => (/* binding */ a),
/* harmony export */   makeGetGroundElevation: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../sketch/normalizedPoint.js */ "./node_modules/@arcgis/core/views/interactive/sketch/normalizedPoint.js");
/* harmony import */ var _candidates_DrapedEdgeSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../candidates/DrapedEdgeSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/DrapedEdgeSnappingCandidate.js");
/* harmony import */ var _candidates_EdgeSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../candidates/EdgeSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/EdgeSnappingCandidate.js");
/* harmony import */ var _candidates_VertexSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../candidates/VertexSnappingCandidate.js */ "./node_modules/@arcgis/core/views/interactive/snapping/candidates/VertexSnappingCandidate.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function r({x:t,y:n,z:d}){return (0,_sketch_normalizedPoint_js__WEBPACK_IMPORTED_MODULE_0__.fromValues)(t,n,d??0)}function a(e,a){switch(e.type){case"edge":return e.draped?new _candidates_DrapedEdgeSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_1__.DrapedEdgeSnappingCandidate({edgeStart:r(e.start),edgeEnd:r(e.end),targetPoint:r(e.target),objectId:e.objectId,getGroundElevation:a}):new _candidates_EdgeSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_2__.EdgeSnappingCandidate({edgeStart:r(e.start),edgeEnd:r(e.end),targetPoint:r(e.target),objectId:e.objectId,isDraped:!1});case"vertex":return new _candidates_VertexSnappingCandidate_js__WEBPACK_IMPORTED_MODULE_3__.VertexSnappingCandidate({targetPoint:r(e.target),objectId:e.objectId,isDraped:!1})}}function o(e,t){return null!=e&&"3d"===e.type?(n,d)=>e.elevationProvider.getElevation(n,d,0,t,"ground"):()=>null}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js":
/*!********************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationAlignment.js ***!
  \********************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSnappingCandidateElevationAligner: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../symbols/support/unitConversionUtils.js */ "./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(e=!1,t){if(e){const{elevationInfo:e,alignPointsInFeatures:s}=t;return new c(e,s)}return new a}class a{async alignCandidates(e,t,s){return e}notifyElevationSourceChange(){}}const r=1024;class c{constructor(t,s){this._elevationInfo=t,this._alignPointsInFeatures=s,this._alignmentsCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_1__.LRUCache(r),this._cacheVersion=0}async alignCandidates(e,t,s){const n=this._elevationInfo;return null==n||"absolute-height"!==n.mode||n.featureExpressionInfo?this._alignComputedElevationCandidates(e,t,s):(this._alignAbsoluteElevationCandidates(e,t,n),e)}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(e,t,s){const{offset:i,unit:a}=s;if(null==i)return;const r=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerVerticalUnitForSR)(t),c=i*((0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.getMetersPerUnit)(a??"meters")/r);for(const n of e)switch(n.type){case"edge":n.start.z+=c,n.end.z+=c;continue;case"vertex":n.target.z+=c;continue}}async _alignComputedElevationCandidates(e,n,o){const i=new Map;for(const s of e)(0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_2__.getOrCreateMapValue)(i,s.objectId,d).push(s);const[a,r,c]=this._prepareQuery(i,n),l=await this._alignPointsInFeatures(a,o);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(o);if(c!==this._cacheVersion)return this._alignComputedElevationCandidates(e,n,o);this._applyCacheAndResponse(a,l,r);const{drapedObjectIds:h,failedObjectIds:u}=l,p=[];for(const t of e){const{objectId:e}=t;h.has(e)&&"edge"===t.type&&(t.draped=!0),u.has(e)||p.push(t)}return p}_prepareQuery(e,t){const s=[],n=[];for(const[o,i]of e){const e=[];for(const t of i)this._addToQueriesOrCachedResult(o,t.target,e,n),"edge"===t.type&&(this._addToQueriesOrCachedResult(o,t.start,e,n),this._addToQueriesOrCachedResult(o,t.end,e,n));0!==e.length&&s.push({objectId:o,points:e})}return[{spatialReference:t.toJSON(),pointsInFeatures:s},n,this._cacheVersion]}_addToQueriesOrCachedResult(e,t,s,n){const o=h(e,t),i=this._alignmentsCache.get(o);null==i?s.push(t):n.push(new l(t,i))}_applyCacheAndResponse(e,{elevations:t,drapedObjectIds:s,failedObjectIds:n},o){for(const r of o)r.apply();let i=0;const a=this._alignmentsCache;for(const{objectId:r,points:c}of e.pointsInFeatures){if(n.has(r)){i+=c.length;continue}const e=!s.has(r);for(const s of c){const n=h(r,s),o=t[i++];s.z=o,e&&a.put(n,o,1)}}}}class l{constructor(e,t){this.point=e,this.z=t}apply(){this.point.z=this.z}}function h(e,{x:t,y:s,z:n,spatialReference:o}){return`${e}-${t}-${s}-${n??0}}-wkid:${o?.wkid}`}function d(){return[]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js":
/*!*****************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/snappingCandidateElevationFilter.js ***!
  \*****************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSnappingCandidateElevationFilter: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{filter(t,n){return n}notifyElevationSourceChange(){}}class n{filter(t,n){const{point:r,distance:c}=t,{z:i}=r;if(!(null!=i))return n;if(0===n.length)return n;const o=s(c),u=this._updateCandidatesTo3D(n,r,o).filter(e);return u.sort(a),u}_updateCandidatesTo3D(t,n,e){for(const r of t)switch(r.type){case"edge":c(r,n,e);continue;case"vertex":o(r,n,e);continue}return t}}function e(t){return t.distance<=1}function r(e=!1){return e?new n:new t}function c(t,n,{x:e,y:r,z:c}){const{start:o,end:s,target:a}=t;t.draped||i(a,n,o,s);const u=(n.x-a.x)/e,d=(n.y-a.y)/r,f=(n.z-a.z)/c;t.distance=Math.sqrt(u*u+d*d+f*f)}function i(t,n,e,r){const c=r.x-e.x,i=r.y-e.y,o=r.z-e.z,s=c*c+i*i+o*o,a=(n.x-e.x)*c+(n.y-e.y)*i+o*(n.z-e.z),u=Math.min(1,Math.max(0,a/s)),d=e.x+c*u,f=e.y+i*u,x=e.z+o*u;t.x=d,t.y=f,t.z=x}function o(t,n,{x:e,y:r,z:c}){const{target:i}=t,o=(n.x-i.x)/e,s=(n.y-i.y)/r,a=(n.z-i.z)/c,u=Math.sqrt(o*o+s*s+a*a);t.distance=u}function s(t){return"number"==typeof t?{x:t,y:t,z:t}:t}function a(t,n){return t.distance-n.distance}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js":
/*!************************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/interactive/snapping/featureSources/symbologySnappingCandidates.js ***!
  \************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSymbologySnappingCandidatesFetcher: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/string.js */ "./node_modules/@arcgis/core/core/string.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t=!1,e){return t?new i(e):new c}class c{async fetch(){return[]}notifySymbologyChange(){}}const r=1024;class i{constructor(t){this._getSymbologyCandidates=t,this._candidatesCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_2__.LRUCache(r),this._cacheVersion=0}async fetch(e,o){if(0===e.length)return[];const n=[],c=[],r=this._candidatesCache;for(const s of e){const e=a(s),o=r.get(e);if(o)for(const s of o)c.push((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(s));else n.push(s),r.put(e,[],1)}if(0===n.length)return c;const i=this._cacheVersion,{candidates:h,sourceCandidateIndices:d}=await this._getSymbologyCandidates(n,o);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(o);if(i!==this._cacheVersion)return this.fetch(e,o);const f=[],{length:g}=h;for(let s=0;s<g;++s){const e=h[s],o=a(n[d[s]]),c=r.get(o);c.push(e),r.put(o,c,c.length),f.push((0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(e))}return c.concat(f)}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function a(t){switch(t.type){case"vertex":{const{objectId:e,target:s}=t,n=`${e}-vertex-${s.x}-${s.y}-${s.z??0}`;return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_4__.numericHash)(n).toString()}case"edge":{const{objectId:e,start:s,end:n}=t,c=`${e}-edge-${s.x}-${s.y}-${s.z??0}-to-${n.x}-${n.y}-${n.z??0}`;return (0,_core_string_js__WEBPACK_IMPORTED_MODULE_4__.numericHash)(c).toString()}default:return""}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzX2ludGVyYWN0aXZlX3NuYXBwaW5nX2ZlYXR1cmVTb3VyY2VzX0dyYXBoaWNzU25hLTU0NzM4Ny5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ3dkLGNBQWMsZUFBZSxjQUFjLGVBQWUsZ0JBQWdCLHVCQUF1Qiw2QkFBNkIsa0VBQUMsTUFBTSxvRUFBQyxpQkFBaUIsZUFBZSxRQUFRLHdFQUFDLGtCQUFrQiwrREFBQyxXQUFXLCtEQUFDLFNBQVMsR0FBRyxzREFBQyxvQkFBb0IsR0FBRywyREFBQyxrREFBa0QsR0FBRyx1REFBQyxrQkFBa0IsR0FBRyx3REFBQyxLQUFLLHlEQUFDLEtBQUssUUFBUSw0REFBQyxTQUFTLHdDQUF3QyxHQUFHLHlFQUFDLDJCQUEyQiw0RUFBQyxNQUFNLGlFQUFpRSxTQUFTLGdCQUFnQixlQUFlLGtDQUFrQyw4RUFBOEUscUdBQXFHLGtCQUFrQixxQkFBcUIsYUFBYSxRQUFRLFFBQVEseUVBQUMsTUFBTSxnQkFBZ0IsYUFBYSxRQUFRLHlFQUFDLE1BQU0saUJBQWlCLEtBQUssWUFBWSxRQUFRLFFBQVEseUVBQUMsTUFBTSxjQUFjLGFBQWEsUUFBUSx5RUFBQyxNQUFNLGVBQWUsU0FBUyxnQkFBZ0IsWUFBWSw0QkFBNEIsa0NBQWtDLFlBQVksY0FBYyxjQUFjLDBCQUEwQixVQUFVLFNBQVMsa0NBQWtDLElBQUksa0NBQWtDLElBQUksNEJBQTRCLElBQUksNEJBQTRCLFdBQVcsd0VBQXdFLGNBQWMsSUFBSSx3QkFBd0Isd0RBQXdELDBCQUEwQiw0QkFBNEIsYUFBYSw0QkFBNEIscUJBQXFCLDRCQUE0QixPQUFPLFNBQVMsZ0JBQWdCLHlCQUF5QixVQUFVLHNHQUFzRyxlQUFlLGdCQUFnQixNQUFNLDRCQUE0QixHQUFHLDhDQUE4QyxrQkFBa0Isa0RBQWtELHFCQUFxQixTQUFTLHlE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QixZQUFZLEVBQUUsTUFBTSx1QkFBdUIsR0FBRyxxQkFBcUIsZ0RBQWdELGtDQUFrQyxvQkFBb0Isb0pBQW9KLGtCQUFrQixnQkFBZ0IsWUFBWSxFQUFFLE1BQU0sU0FBUyxzRUFBc0UsYUFBYSxjQUFjLDBCQUEwQixZQUFZLEdBQUcsZ0JBQWdCLDZCQUE4RTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKbmxDO0FBQ0E7QUFDQTtBQUNBO0FBQ29RLG1CQUFtQix3QkFBd0IsUUFBUSxjQUFjLFNBQVMsMEJBQTBCLGFBQWEsUUFBUSxlQUFlLHlEQUF5RCx1REFBQyx5QkFBeUIsaUJBQWlCLHlCQUF5Qix3Q0FBd0Msa0JBQWtCLHdCQUF3Qiw2QkFBNkIsb0RBQUMsS0FBSyw2QkFBNkIseUJBQXlCLDRCQUE0QixzQ0FBc0MseUNBQXlDLHFFQUFDLElBQUksaURBQWlELFlBQVksU0FBUyxHQUFHLFlBQVksSUFBSSxLQUFLLHFDQUFxQyxxQ0FBcUMsb0RBQUMsS0FBSyxtQkFBbUIsd0JBQXdCLG9EQUFvRCxjQUFjLGVBQWUsY0FBYyxNQUFNLG9CQUFvQixRQUFRLEVBQUUsVUFBVSxJQUFJLEdBQUcsSUFBSSxHQUFHLE9BQU8sRUFBRSxPQUFPLDREQUFDLGVBQWUsWUFBWSxNQUFNLHlCQUF5QixRQUFRLEVBQUUsUUFBUSxJQUFJLEdBQUcsSUFBSSxHQUFHLE9BQU8sTUFBTSxJQUFJLEdBQUcsSUFBSSxHQUFHLE9BQU8sRUFBRSxPQUFPLDREQUFDLGVBQWUsa0JBQXFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2dlb21ldHJ5L3N1cHBvcnQvbm9ybWFsaXplVXRpbHNTeW5jLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9jYW5kaWRhdGVzL1ZlcnRleFNuYXBwaW5nQ2FuZGlkYXRlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9HcmFwaGljc1NuYXBwaW5nU291cmNlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9xdWVyeUVuZ2luZVV0aWxzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9pbnRlcmFjdGl2ZS9zbmFwcGluZy9mZWF0dXJlU291cmNlcy9zbmFwcGluZ0NhbmRpZGF0ZUVsZXZhdGlvbkFsaWdubWVudC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvaW50ZXJhY3RpdmUvc25hcHBpbmcvZmVhdHVyZVNvdXJjZXMvc25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25GaWx0ZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2ludGVyYWN0aXZlL3NuYXBwaW5nL2ZlYXR1cmVTb3VyY2VzL3N5bWJvbG9neVNuYXBwaW5nQ2FuZGlkYXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2lzU2VyaWFsaXphYmxlIGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9KU09OU3VwcG9ydC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgaX1mcm9tXCIuL2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2dldEJvdW5kc1hZIGFzIHN9ZnJvbVwiLi9ib3VuZHNVdGlscy5qc1wiO2ltcG9ydHtjbG9zZVJpbmdzIGFzIG59ZnJvbVwiLi9jb29yZHNVdGlscy5qc1wiO2ltcG9ydHtpc1BvaW50IGFzIGUsaXNNdWx0aXBvaW50IGFzIGgsaXNFeHRlbnQgYXMgbyxpc1BvbHlnb24gYXMgcixpc1BvbHlsaW5lIGFzIHV9ZnJvbVwiLi9qc29uVXRpbHMuanNcIjtpbXBvcnR7Y3V0UGFyYW1zIGFzIG0sdXBkYXRlUG9seUdlb21ldHJ5IGFzIHgsb2Zmc2V0TWFnbml0dWRlIGFzIF99ZnJvbVwiLi9ub3JtYWxpemVVdGlsc0NvbW1vbi5qc1wiO2ltcG9ydHtnZXRJbmZvIGFzIGwsaXNXZWJNZXJjYXRvciBhcyBjfWZyb21cIi4vc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7ZnVuY3Rpb24gcCh0KXtyZXR1cm4gZih0LCEwKX1mdW5jdGlvbiBhKHQpe3JldHVybiBmKHQsITEpfWZ1bmN0aW9uIGYoaSxuKXtpZihudWxsPT1pKXJldHVybiBudWxsO2NvbnN0IHA9aS5zcGF0aWFsUmVmZXJlbmNlLGE9bChwKSxmPXQoaSk/aS50b0pTT04oKTppO2lmKCFhKXJldHVybiBmO2NvbnN0IEk9YyhwKT8xMDIxMDA6NDMyNixnPW1bSV0ubWF4WCx2PW1bSV0ubWluWDtpZihlKGYpKXJldHVybiB5KGYsZyx2KTtpZihoKGYpKXJldHVybiBmLnBvaW50cz1mLnBvaW50cy5tYXAoKHQ9PnkodCxnLHYpKSksZjtpZihvKGYpKXJldHVybiBkKGYsYSk7aWYocihmKXx8dShmKSl7Y29uc3QgdD1zKFMsZiksaT17eG1pbjp0WzBdLHltaW46dFsxXSx4bWF4OnRbMl0seW1heDp0WzNdfSxlPV8oaS54bWluLHYpKigyKmcpLGg9MD09PWU/Zjp4KGYsZSk7cmV0dXJuIGkueG1pbis9ZSxpLnhtYXgrPWUsaS54bWF4Pmc/UChoLGcsbik6aS54bWluPHY/UChoLHYsbik6aH1yZXR1cm4gZn1mdW5jdGlvbiBkKHQsaSl7aWYoIWkpcmV0dXJuIHQ7Y29uc3Qgcz1JKHQsaSkubWFwKCh0PT50LmV4dGVudCkpO3JldHVybiBzLmxlbmd0aDwyP3NbMF18fHQ6cy5sZW5ndGg+Mj8odC54bWluPWkudmFsaWRbMF0sdC54bWF4PWkudmFsaWRbMV0sdCk6e3JpbmdzOnMubWFwKCh0PT5bW3QueG1pbix0LnltaW5dLFt0LnhtaW4sdC55bWF4XSxbdC54bWF4LHQueW1heF0sW3QueG1heCx0LnltaW5dLFt0LnhtaW4sdC55bWluXV0pKX19ZnVuY3Rpb24geSh0LGkscyl7aWYoQXJyYXkuaXNBcnJheSh0KSl7Y29uc3Qgbj10WzBdO2lmKG4+aSl7Y29uc3Qgcz1fKG4saSk7dFswXT1uK3MqKC0yKmkpfWVsc2UgaWYobjxzKXtjb25zdCBpPV8obixzKTt0WzBdPW4raSooLTIqcyl9fWVsc2V7Y29uc3Qgbj10Lng7aWYobj5pKXtjb25zdCBzPV8obixpKTt0LngrPXMqKC0yKmkpfWVsc2UgaWYobjxzKXtjb25zdCBpPV8obixzKTt0LngrPWkqKC0yKnMpfX1yZXR1cm4gdH1mdW5jdGlvbiBJKHQsaSl7Y29uc3Qgcz1bXSx7eW1pbjpuLHltYXg6ZSx4bWluOmgseG1heDpvfT10LHI9dC54bWF4LXQueG1pbixbdSxtXT1pLnZhbGlkLHt4LGZyYW1lSWQ6X309Zyh0LnhtaW4saSkse3g6bCxmcmFtZUlkOmN9PWcodC54bWF4LGkpLHA9eD09PWwmJnI+MDtpZihyPjIqbSl7Y29uc3QgdD17eG1pbjpoPG8/eDpsLHltaW46bix4bWF4Om0seW1heDplfSxpPXt4bWluOnUseW1pbjpuLHhtYXg6aDxvP2w6eCx5bWF4OmV9LHI9e3htaW46MCx5bWluOm4seG1heDptLHltYXg6ZX0scD17eG1pbjp1LHltaW46bix4bWF4OjAseW1heDplfSxhPVtdLGY9W107dih0LHIpJiZhLnB1c2goXyksdih0LHApJiZmLnB1c2goXyksdihpLHIpJiZhLnB1c2goYyksdihpLHApJiZmLnB1c2goYyk7Zm9yKGxldCBzPV8rMTtzPGM7cysrKWEucHVzaChzKSxmLnB1c2gocyk7cy5wdXNoKG5ldyBDKHQsW19dKSxuZXcgQyhpLFtjXSksbmV3IEMocixhKSxuZXcgQyhwLGYpKX1lbHNlIHg+bHx8cD9zLnB1c2gobmV3IEMoe3htaW46eCx5bWluOm4seG1heDptLHltYXg6ZX0sW19dKSxuZXcgQyh7eG1pbjp1LHltaW46bix4bWF4OmwseW1heDplfSxbY10pKTpzLnB1c2gobmV3IEMoe3htaW46eCx5bWluOm4seG1heDpsLHltYXg6ZX0sW19dKSk7cmV0dXJuIHN9ZnVuY3Rpb24gZyh0LGkpe2NvbnN0W3Msbl09aS52YWxpZCxlPTIqbjtsZXQgaCxvPTA7cmV0dXJuIHQ+bj8oaD1NYXRoLmNlaWwoTWF0aC5hYnModC1uKS9lKSx0LT1oKmUsbz1oKTp0PHMmJihoPU1hdGguY2VpbChNYXRoLmFicyh0LXMpL2UpLHQrPWgqZSxvPS1oKSx7eDp0LGZyYW1lSWQ6b319ZnVuY3Rpb24gdih0LGkpe2NvbnN0e3htaW46cyx5bWluOm4seG1heDplLHltYXg6aH09aTtyZXR1cm4gTyh0LHMsbikmJk8odCxzLGgpJiZPKHQsZSxoKSYmTyh0LGUsbil9ZnVuY3Rpb24gTyh0LGkscyl7cmV0dXJuIGk+PXQueG1pbiYmaTw9dC54bWF4JiZzPj10LnltaW4mJnM8PXQueW1heH1mdW5jdGlvbiBQKHQsaSxzPSEwKXtjb25zdCBlPSF1KHQpO2lmKGUmJm4odCkscyl7cmV0dXJuKG5ldyBUKS5jdXQodCxpKX1jb25zdCBoPWU/dC5yaW5nczp0LnBhdGhzLG89ZT80OjIscj1oLmxlbmd0aCxtPS0yKmk7Zm9yKGxldCBuPTA7bjxyO24rKyl7Y29uc3QgdD1oW25dO2lmKHQmJnQubGVuZ3RoPj1vKXtjb25zdCBpPVtdO2Zvcihjb25zdCBzIG9mIHQpaS5wdXNoKFtzWzBdK20sc1sxXV0pO2gucHVzaChpKX19cmV0dXJuIGU/dC5yaW5ncz1oOnQucGF0aHM9aCx0fWNsYXNzIEN7Y29uc3RydWN0b3IodCxpKXt0aGlzLmV4dGVudD10LHRoaXMuZnJhbWVJZHM9aX19Y29uc3QgUz1pKCk7Y2xhc3MgVHtjb25zdHJ1Y3Rvcigpe3RoaXMuX2xpbmVzSW49W10sdGhpcy5fbGluZXNPdXQ9W119Y3V0KHQsaSl7bGV0IHM7aWYodGhpcy5feEN1dD1pLHQucmluZ3MpdGhpcy5fY2xvc2VkPSEwLHM9dC5yaW5ncyx0aGlzLl9taW5QdHM9NDtlbHNle2lmKCF0LnBhdGhzKXJldHVybiBudWxsO3RoaXMuX2Nsb3NlZD0hMSxzPXQucGF0aHMsdGhpcy5fbWluUHRzPTJ9Zm9yKGNvbnN0IGUgb2Ygcyl7aWYoIWV8fGUubGVuZ3RoPHRoaXMuX21pblB0cyljb250aW51ZTtsZXQgdD0hMDtmb3IoY29uc3QgaSBvZiBlKXQ/KHRoaXMubW92ZVRvKGkpLHQ9ITEpOnRoaXMubGluZVRvKGkpO3RoaXMuX2Nsb3NlZCYmdGhpcy5jbG9zZSgpfXRoaXMuX3B1c2hMaW5lSW4oKSx0aGlzLl9wdXNoTGluZU91dCgpLHM9W107Zm9yKGNvbnN0IGUgb2YgdGhpcy5fbGluZXNJbillJiZlLmxlbmd0aD49dGhpcy5fbWluUHRzJiZzLnB1c2goZSk7Y29uc3Qgbj0tMip0aGlzLl94Q3V0O2Zvcihjb25zdCBlIG9mIHRoaXMuX2xpbmVzT3V0KWlmKGUmJmUubGVuZ3RoPj10aGlzLl9taW5QdHMpe2Zvcihjb25zdCB0IG9mIGUpdFswXSs9bjtzLnB1c2goZSl9cmV0dXJuIHRoaXMuX2Nsb3NlZD90LnJpbmdzPXM6dC5wYXRocz1zLHR9bW92ZVRvKHQpe3RoaXMuX3B1c2hMaW5lSW4oKSx0aGlzLl9wdXNoTGluZU91dCgpLHRoaXMuX3ByZXZTaWRlPXRoaXMuX3NpZGUodFswXSksdGhpcy5fbW92ZVRvKHRbMF0sdFsxXSx0aGlzLl9wcmV2U2lkZSksdGhpcy5fcHJldlB0PXQsdGhpcy5fZmlyc3RQdD10fWxpbmVUbyh0KXtjb25zdCBpPXRoaXMuX3NpZGUodFswXSk7aWYoaSp0aGlzLl9wcmV2U2lkZT09LTEpe2NvbnN0IHM9dGhpcy5faW50ZXJzZWN0KHRoaXMuX3ByZXZQdCx0KTt0aGlzLl9saW5lVG8odGhpcy5feEN1dCxzLDApLHRoaXMuX3ByZXZTaWRlPTAsdGhpcy5fbGluZVRvKHRbMF0sdFsxXSxpKX1lbHNlIHRoaXMuX2xpbmVUbyh0WzBdLHRbMV0saSk7dGhpcy5fcHJldlNpZGU9aSx0aGlzLl9wcmV2UHQ9dH1jbG9zZSgpe2NvbnN0IHQ9dGhpcy5fZmlyc3RQdCxpPXRoaXMuX3ByZXZQdDt0WzBdPT09aVswXSYmdFsxXT09PWlbMV18fHRoaXMubGluZVRvKHQpLHRoaXMuX2NoZWNrQ2xvc2luZ1B0KHRoaXMuX2xpbmVJbiksdGhpcy5fY2hlY2tDbG9zaW5nUHQodGhpcy5fbGluZU91dCl9X21vdmVUbyh0LGkscyl7dGhpcy5fY2xvc2VkPyh0aGlzLl9saW5lSW4ucHVzaChbczw9MD90OnRoaXMuX3hDdXQsaV0pLHRoaXMuX2xpbmVPdXQucHVzaChbcz49MD90OnRoaXMuX3hDdXQsaV0pKTooczw9MCYmdGhpcy5fbGluZUluLnB1c2goW3QsaV0pLHM+PTAmJnRoaXMuX2xpbmVPdXQucHVzaChbdCxpXSkpfV9saW5lVG8odCxpLHMpe3RoaXMuX2Nsb3NlZD8odGhpcy5fYWRkUG9seVZlcnRleCh0aGlzLl9saW5lSW4sczw9MD90OnRoaXMuX3hDdXQsaSksdGhpcy5fYWRkUG9seVZlcnRleCh0aGlzLl9saW5lT3V0LHM+PTA/dDp0aGlzLl94Q3V0LGkpKTpzPDA/KDA9PT10aGlzLl9wcmV2U2lkZSYmdGhpcy5fcHVzaExpbmVPdXQoKSx0aGlzLl9saW5lSW4ucHVzaChbdCxpXSkpOnM+MD8oMD09PXRoaXMuX3ByZXZTaWRlJiZ0aGlzLl9wdXNoTGluZUluKCksdGhpcy5fbGluZU91dC5wdXNoKFt0LGldKSk6dGhpcy5fcHJldlNpZGU8MD8odGhpcy5fbGluZUluLnB1c2goW3QsaV0pLHRoaXMuX2xpbmVPdXQucHVzaChbdCxpXSkpOnRoaXMuX3ByZXZTaWRlPjAmJih0aGlzLl9saW5lT3V0LnB1c2goW3QsaV0pLHRoaXMuX2xpbmVJbi5wdXNoKFt0LGldKSl9X2FkZFBvbHlWZXJ0ZXgodCxpLHMpe2NvbnN0IG49dC5sZW5ndGg7bj4xJiZ0W24tMV1bMF09PT1pJiZ0W24tMl1bMF09PT1pP3Rbbi0xXVsxXT1zOnQucHVzaChbaSxzXSl9X2NoZWNrQ2xvc2luZ1B0KHQpe2NvbnN0IGk9dC5sZW5ndGg7aT4zJiZ0WzBdWzBdPT09dGhpcy5feEN1dCYmdFtpLTJdWzBdPT09dGhpcy5feEN1dCYmdFsxXVswXT09PXRoaXMuX3hDdXQmJih0WzBdWzFdPXRbaS0yXVsxXSx0LnBvcCgpKX1fc2lkZSh0KXtyZXR1cm4gdDx0aGlzLl94Q3V0Py0xOnQ+dGhpcy5feEN1dD8xOjB9X2ludGVyc2VjdCh0LGkpe2NvbnN0IHM9KHRoaXMuX3hDdXQtdFswXSkvKGlbMF0tdFswXSk7cmV0dXJuIHRbMV0rcyooaVsxXS10WzFdKX1fcHVzaExpbmVJbigpe3RoaXMuX2xpbmVJbiYmdGhpcy5fbGluZUluLmxlbmd0aD49dGhpcy5fbWluUHRzJiZ0aGlzLl9saW5lc0luLnB1c2godGhpcy5fbGluZUluKSx0aGlzLl9saW5lSW49W119X3B1c2hMaW5lT3V0KCl7dGhpcy5fbGluZU91dCYmdGhpcy5fbGluZU91dC5sZW5ndGg+PXRoaXMuX21pblB0cyYmdGhpcy5fbGluZXNPdXQucHVzaCh0aGlzLl9saW5lT3V0KSx0aGlzLl9saW5lT3V0PVtdfX1leHBvcnR7VCBhcyBDdXRWZXJ0aWNhbCxhIGFzIG5vcm1hbGl6ZUNlbnRyYWxNZXJpZGlhbkZvckRpc3BsYXkscCBhcyBub3JtYWxpemVDZW50cmFsTWVyaWRpYW5TeW5jfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7UG9pbnRDb25zdHJhaW50IGFzIHR9ZnJvbVwiLi4vLi4vc2tldGNoL2NvbnN0cmFpbnRzLmpzXCI7aW1wb3J0e0ZlYXR1cmVTbmFwcGluZ0NhbmRpZGF0ZSBhcyBufWZyb21cIi4vRmVhdHVyZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e1BvaW50U25hcHBpbmdIaW50IGFzIGl9ZnJvbVwiLi4vaGludHMvUG9pbnRTbmFwcGluZ0hpbnQuanNcIjtjbGFzcyByIGV4dGVuZHMgbntjb25zdHJ1Y3RvcihuKXtzdXBlcih7Li4ubixjb25zdHJhaW50Om5ldyB0KG4udGFyZ2V0UG9pbnQpfSl9Z2V0IGhpbnRzKCl7cmV0dXJuW25ldyBpKHRoaXMudGFyZ2V0UG9pbnQsdGhpcy5pc0RyYXBlZCx0aGlzLmRvbWFpbildfX1leHBvcnR7ciBhcyBWZXJ0ZXhTbmFwcGluZ0NhbmRpZGF0ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtyZW1vdmVVbm9yZGVyZWQgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlVGFzayBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXN5bmNVdGlscy5qc1wiO2ltcG9ydHttZW1vaXplIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tZW1vaXplLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIGksYWxsU2V0dGxlZFZhbHVlcyBhcyBuLHdoZW5PckFib3J0IGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7aW5pdGlhbCBhcyBwLHdhdGNoIGFzIGwsb24gYXMgZH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7VXBkYXRpbmdIYW5kbGVzIGFzIGh9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zdXBwb3J0L1VwZGF0aW5nSGFuZGxlcy5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L1BvbHlnb24uanNcIjtpbXBvcnR7aW5pdGlhbGl6ZVByb2plY3Rpb24gYXMgbSxjYW5Qcm9qZWN0V2l0aG91dEVuZ2luZSBhcyBnLHByb2plY3QgYXMgZn1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCI7aW1wb3J0e25vcm1hbGl6ZUNlbnRyYWxNZXJpZGlhbkZvckRpc3BsYXkgYXMgX31mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L25vcm1hbGl6ZVV0aWxzU3luYy5qc1wiO2ltcG9ydHtmZWF0dXJlR2VvbWV0cnlUeXBlS2ViYWJEaWN0aW9uYXJ5IGFzIFN9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC90eXBlVXRpbHMuanNcIjtpbXBvcnR7Y29udmVydEZyb21HZW9tZXRyeSBhcyB2fWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e09wdGltaXplZEZlYXR1cmUgYXMgd31mcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvT3B0aW1pemVkRmVhdHVyZS5qc1wiO2ltcG9ydCBqIGZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kYXRhL0ZlYXR1cmVTdG9yZS5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZSBhcyBifWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kYXRhL1F1ZXJ5RW5naW5lLmpzXCI7aW1wb3J0IEUgZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnR7ZWxldmF0aW9uQ29udGV4dEFmZmVjdHNBbGlnbm1lbnQgYXMga31mcm9tXCIuLi8uLi8uLi8uLi9zdXBwb3J0L2VsZXZhdGlvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtzeW1ib2xIYXNFeHRydWRlU3ltYm9sTGF5ZXIgYXMgRn1mcm9tXCIuLi8uLi8uLi8uLi9zeW1ib2xzL3N1cHBvcnQvdXRpbHMuanNcIjtpbXBvcnR7c29ydENhbmRpZGF0ZXNJblBsYWNlIGFzIEMsbWFrZVNuYXBwaW5nUXVlcnkgYXMgQX1mcm9tXCIuLi9zbmFwcGluZ1V0aWxzLmpzXCI7aW1wb3J0e2NvbnZlcnRTbmFwcGluZ0NhbmRpZGF0ZSBhcyBJLG1ha2VHZXRHcm91bmRFbGV2YXRpb24gYXMgUH1mcm9tXCIuL3F1ZXJ5RW5naW5lVXRpbHMuanNcIjtpbXBvcnR7Z2V0U25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25BbGlnbmVyIGFzIEd9ZnJvbVwiLi9zbmFwcGluZ0NhbmRpZGF0ZUVsZXZhdGlvbkFsaWdubWVudC5qc1wiO2ltcG9ydHtnZXRTbmFwcGluZ0NhbmRpZGF0ZUVsZXZhdGlvbkZpbHRlciBhcyBIfWZyb21cIi4vc25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25GaWx0ZXIuanNcIjtpbXBvcnR7Z2V0U3ltYm9sb2d5U25hcHBpbmdDYW5kaWRhdGVzRmV0Y2hlciBhcyBSfWZyb21cIi4vc3ltYm9sb2d5U25hcHBpbmdDYW5kaWRhdGVzLmpzXCI7aW1wb3J0e1Rhc2tQcmlvcml0eSBhcyB4fWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvU2NoZWR1bGVyLmpzXCI7Y29uc3Qgej1cImdyYXBoaWNzLWNvbGxlY3Rpb25zXCI7bGV0IE89Y2xhc3MgZXh0ZW5kcyB0e2dldCB1cGRhdGluZygpe3JldHVybiB0aGlzLl91cGRhdGluZ0hhbmRsZXMudXBkYXRpbmd9Z2V0IF9oYXNaKCl7Y29uc3QgZT10aGlzLnZpZXc7cmV0dXJuIG51bGwhPWUmJlwiM2RcIj09PWUudHlwZSYmXCJtYXAtbm90ZXNcIiE9PXRoaXMubGF5ZXJTb3VyY2UubGF5ZXIudHlwZX1nZXQgX3NuYXBwaW5nRWxldmF0aW9uQWxpZ25lcigpe2NvbnN0e3ZpZXc6ZX09dGhpcyx7bGF5ZXI6dH09dGhpcy5sYXllclNvdXJjZSxzPW51bGwhPWUmJlwiM2RcIj09PWUudHlwZTtpZighc3x8XCJtYXAtbm90ZXNcIj09PXQudHlwZSlyZXR1cm4gRygpO2NvbnN0IG89YXN5bmMocyxvKT0+KGF3YWl0IGEoZS53aGVuTGF5ZXJWaWV3KHQpLG8pKS5lbGV2YXRpb25BbGlnblBvaW50c0luRmVhdHVyZXMocyxvKTtyZXR1cm4gRyhzLHtlbGV2YXRpb25JbmZvOnQuZWxldmF0aW9uSW5mbyxhbGlnblBvaW50c0luRmVhdHVyZXM6b30pfWdldCBfc25hcHBpbmdFbGV2YXRpb25GaWx0ZXIoKXtjb25zdHt2aWV3OmV9PXRoaXMsdD1udWxsIT1lJiZcIjNkXCI9PT1lLnR5cGUmJlwibWFwLW5vdGVzXCIhPT10aGlzLmxheWVyU291cmNlLmxheWVyLnR5cGU7cmV0dXJuIEgodCl9Z2V0IF9zeW1ib2xvZ3lTbmFwcGluZ0ZldGNoZXIoKXtjb25zdHt2aWV3OmV9PXRoaXMse2xheWVyOnR9PXRoaXMubGF5ZXJTb3VyY2Uscz1udWxsIT1lJiZcIjNkXCI9PT1lLnR5cGUsbz10aGlzLl9leHRydWRlZFBvbHlnb25TeW1ib2xzQ291bnQ+MDtyZXR1cm4gcyYmXCJtYXAtbm90ZXNcIiE9PXQudHlwZSYmbz9SKG8sKGFzeW5jKHMsbyk9Pntjb25zdCByPWF3YWl0IGUud2hlbkxheWVyVmlldyh0KTtyZXR1cm4gaShvKSxyLnF1ZXJ5Rm9yU3ltYm9sb2d5U25hcHBpbmcoe2NhbmRpZGF0ZXM6cyxzcGF0aWFsUmVmZXJlbmNlOmUuc3BhdGlhbFJlZmVyZW5jZX0sbyl9KSk6UigpfWNvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuYXZhaWxhYmlsaXR5PTEsdGhpcy5fc291cmNlcz17bXVsdGlwb2ludDpudWxsLHBvaW50Om51bGwscG9seWdvbjpudWxsLHBvbHlsaW5lOm51bGx9LHRoaXMuX2xvYWRlZFdraWRzPW5ldyBTZXQsdGhpcy5fbG9hZGVkV2t0cz1uZXcgU2V0LHRoaXMuX3BlbmRpbmdBZGRzPVtdLHRoaXMuX2V4dHJ1ZGVkUG9seWdvblN5bWJvbHNDb3VudD0wLHRoaXMuX3VwZGF0aW5nSGFuZGxlcz1uZXcgaCx0aGlzLl9tZW1vaXplZE1ha2VHZXRHcm91bmRFbGV2YXRpb249cihQKX1kZXN0cm95KCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fcGVuZGluZ0FkZHMpZS50YXNrLmFib3J0KCk7dGhpcy5fcGVuZGluZ0FkZHMubGVuZ3RoPTAsdGhpcy5fbWFwU291cmNlcygoZT0+dGhpcy5fZGVzdHJveVNvdXJjZShlKSkpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5kZXN0cm95KCl9aW5pdGlhbGl6ZSgpe3RoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmdldEdyYXBoaWNzTGF5ZXJzKCkpLChlPT57dGhpcy5fdXBkYXRpbmdIYW5kbGVzLnJlbW92ZUhhbmRsZXMoeik7Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLl9hZGRNYW55KHQuZ3JhcGhpY3MudG9BcnJheSgpKSx0aGlzLmFkZEhhbmRsZXMoW3Qub24oXCJncmFwaGljLXVwZGF0ZVwiLChlPT50aGlzLl9vbkdyYXBoaWNVcGRhdGUoZSkpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkT25Db2xsZWN0aW9uQ2hhbmdlKCgoKT0+dC5ncmFwaGljcyksKGU9PnRoaXMuX29uR3JhcGhpY3NDaGFuZ2VkKGUpKSldLHopfSkscCk7Y29uc3R7dmlldzplfT10aGlzLHtsYXllcjp0fT10aGlzLmxheWVyU291cmNlO251bGwhPWUmJlwiM2RcIj09PWUudHlwZSYmXCJtYXAtbm90ZXNcIiE9PXQudHlwZSYmdGhpcy5hZGRIYW5kbGVzKFtlLmVsZXZhdGlvblByb3ZpZGVyLm9uKFwiZWxldmF0aW9uLWNoYW5nZVwiLCgoe2NvbnRleHQ6ZX0pPT57ayhlLHQuZWxldmF0aW9uSW5mbykmJnRoaXMuX3NuYXBwaW5nRWxldmF0aW9uQWxpZ25lci5ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKX0pKSxsKCgoKT0+dC5lbGV2YXRpb25JbmZvKSwoKCk9PnRoaXMuX3NuYXBwaW5nRWxldmF0aW9uQWxpZ25lci5ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKSkscCksZCgoKCk9PnQpLFtcImVkaXRzXCIsXCJhcHBseS1lZGl0c1wiLFwiZ3JhcGhpYy11cGRhdGVcIl0sKCgpPT50aGlzLl9zeW1ib2xvZ3lTbmFwcGluZ0ZldGNoZXIubm90aWZ5U3ltYm9sb2d5Q2hhbmdlKCkpKV0pfWFzeW5jIGZldGNoQ2FuZGlkYXRlcyhlLHQpe2NvbnN0e3BvaW50OnMsY29vcmRpbmF0ZUhlbHBlcjp7c3BhdGlhbFJlZmVyZW5jZTpvfX09ZSxyPWF3YWl0IG4odGhpcy5fbWFwU291cmNlcygocz0+dGhpcy5fZmV0Y2hDYW5kaWRhdGVzRm9yU291cmNlKHMsZSx0KSkpKTtpKHQpO2NvbnN0IGE9dGhpcy5fbWVtb2l6ZWRNYWtlR2V0R3JvdW5kRWxldmF0aW9uKHRoaXMudmlldyxvKSxwPXIuZmxhdCgpLm1hcCgoZT0+SShlLGEpKSk7cmV0dXJuIEMocyxwKSxwfWFzeW5jIF9mZXRjaENhbmRpZGF0ZXNGb3JTb3VyY2UoZSx0LHMpe2NvbnN0IG89QSh0LHRoaXMudmlldz8udHlwZT8/XCIyZFwiKSxyPWF3YWl0IGUucXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yU25hcHBpbmcobyxzKTtpKHMpO2NvbnN0IG49YXdhaXQgdGhpcy5fc25hcHBpbmdFbGV2YXRpb25BbGlnbmVyLmFsaWduQ2FuZGlkYXRlcyhyLmNhbmRpZGF0ZXMsdC5jb29yZGluYXRlSGVscGVyLnNwYXRpYWxSZWZlcmVuY2Uscyk7aShzKTtjb25zdCBhPWF3YWl0IHRoaXMuX3N5bWJvbG9neVNuYXBwaW5nRmV0Y2hlci5mZXRjaChuLHMpO2kocyk7Y29uc3QgcD0wPT09YS5sZW5ndGg/bjpbLi4ubiwuLi5hXTtyZXR1cm4gdGhpcy5fc25hcHBpbmdFbGV2YXRpb25GaWx0ZXIuZmlsdGVyKG8scCl9cmVmcmVzaCgpe31fb25HcmFwaGljVXBkYXRlKGUpe2lmKHRoaXMuZ2V0R3JhcGhpY3NMYXllcnMoKS5zb21lKCh0PT50LmdyYXBoaWNzLmluY2x1ZGVzKGUuZ3JhcGhpYykpKSlzd2l0Y2goZS5wcm9wZXJ0eSl7Y2FzZVwiZ2VvbWV0cnlcIjpjYXNlXCJ2aXNpYmxlXCI6dGhpcy5fcmVtb3ZlKGUuZ3JhcGhpYyksdGhpcy5fYWRkTWFueShbZS5ncmFwaGljXSl9fV9vbkdyYXBoaWNzQ2hhbmdlZChlKXtmb3IoY29uc3QgdCBvZiBlLnJlbW92ZWQpdGhpcy5fcmVtb3ZlKHQpO3RoaXMuX2FkZE1hbnkoZS5hZGRlZCl9X2FkZE1hbnkoZSl7Y29uc3QgdD1bXSxzPW5ldyBNYXA7Zm9yKGNvbnN0IG8gb2YgZSludWxsIT1vLmdlb21ldHJ5JiYodGhpcy5fbmVlZHNJbml0aWFsaXplUHJvamVjdGlvbihvLmdlb21ldHJ5LnNwYXRpYWxSZWZlcmVuY2UpPyh0LnB1c2goby5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlKSxzLnNldChvLnVpZCxvKSk6dGhpcy5fYWRkKG8pKTt0aGlzLl9jcmVhdGVQZW5kaW5nQWRkKHQscyl9X2NyZWF0ZVBlbmRpbmdBZGQoZSx0KXtpZighZS5sZW5ndGgpcmV0dXJuO2NvbnN0IHI9bygoYXN5bmMgcz0+e2F3YWl0IG0oZS5tYXAoKGU9Pih7c291cmNlOmUsZGVzdDp0aGlzLnNwYXRpYWxSZWZlcmVuY2V9KSkpLHtzaWduYWw6c30pLHRoaXMuX21hcmtMb2FkZWRTcGF0aWFsUmVmZXJlbmNlcyhlKTtmb3IoY29uc3RbLGVdb2YgdCl0aGlzLl9hZGQoZSl9KSk7dGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2Uoci5wcm9taXNlKTtjb25zdCBpPXt0YXNrOnIsZ3JhcGhpY3M6dH0sbj0oKT0+cyh0aGlzLl9wZW5kaW5nQWRkcyxpKTtyLnByb21pc2UudGhlbihuLG4pLHRoaXMuX3BlbmRpbmdBZGRzLnB1c2goaSl9X21hcmtMb2FkZWRTcGF0aWFsUmVmZXJlbmNlcyhlKXtmb3IoY29uc3QgdCBvZiBlKXtudWxsIT10LndraWQmJnRoaXMuX2xvYWRlZFdraWRzLmFkZCh0LndraWQpO2NvbnN0IGU9dC53a3QyfHx0LndrdDtlJiZ0aGlzLl9sb2FkZWRXa3RzLmFkZChlKX19X2FkZChlKXtpZihudWxsPT1lLmdlb21ldHJ5fHwhZS52aXNpYmxlKXJldHVybjtsZXQgdD1lLmdlb21ldHJ5O2lmKFwibWVzaFwiPT09dC50eXBlKXJldHVybjtcImV4dGVudFwiPT09dC50eXBlJiYodD15LmZyb21FeHRlbnQodCkpO2NvbnN0IHM9dGhpcy5fZW5zdXJlU291cmNlKHQudHlwZSk7aWYobnVsbD09cylyZXR1cm47Y29uc3Qgbz10aGlzLl9jcmVhdGVPcHRpbWl6ZWRGZWF0dXJlKGUudWlkLHQpO251bGwhPW8mJihzLmZlYXR1cmVTdG9yZS5hZGQobyksRihlLnN5bWJvbCkmJnRoaXMuX2V4dHJ1ZGVkUG9seWdvblN5bWJvbHNDb3VudCsrKX1fbmVlZHNJbml0aWFsaXplUHJvamVjdGlvbihlKXtpZihudWxsIT1lLndraWQmJnRoaXMuX2xvYWRlZFdraWRzLmhhcyhlLndraWQpKXJldHVybiExO2NvbnN0IHQ9ZS53a3QyfHxlLndrdDtyZXR1cm4oIXR8fCF0aGlzLl9sb2FkZWRXa3RzLmhhcyh0KSkmJiFnKGUsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKX1fY3JlYXRlT3B0aW1pemVkRmVhdHVyZShlLHQpe2NvbnN0IHM9ZihfKHQpLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7aWYoIXMpcmV0dXJuIG51bGw7Y29uc3Qgbz10aGlzLl9lbnN1cmVHZW9tZXRyeUhhc1oocykscj12KG8sdGhpcy5faGFzWiwhMSk7cmV0dXJuIG5ldyB3KHIse1tVXTplfSxudWxsLGUpfV9lbnN1cmVHZW9tZXRyeUhhc1ooZSl7aWYoIXRoaXMuX2hhc1opcmV0dXJuIGU7Y29uc3QgdD1lPT57Zm9yKDtlLmxlbmd0aDwzOyllLnB1c2goMCl9LHM9ZS5jbG9uZSgpO3N3aXRjaChzLmhhc1o9ITAscy50eXBlKXtjYXNlXCJwb2ludFwiOnMuej1zLno/PzA7YnJlYWs7Y2FzZVwibXVsdGlwb2ludFwiOnMucG9pbnRzLmZvckVhY2godCk7YnJlYWs7Y2FzZVwicG9seWxpbmVcIjpzLnBhdGhzLmZvckVhY2goKGU9PmUuZm9yRWFjaCh0KSkpO2JyZWFrO2Nhc2VcInBvbHlnb25cIjpzLnJpbmdzLmZvckVhY2goKGU9PmUuZm9yRWFjaCh0KSkpfXJldHVybiBzfV9lbnN1cmVTb3VyY2UoZSl7Y29uc3QgdD10aGlzLl9zb3VyY2VzW2VdO2lmKG51bGwhPXQpcmV0dXJuIHQ7Y29uc3Qgcz10aGlzLl9jcmVhdGVTb3VyY2UoZSk7cmV0dXJuIHRoaXMuX3NvdXJjZXNbZV09cyxzfV9jcmVhdGVTb3VyY2UoZSl7Y29uc3QgdD1TLnRvSlNPTihlKSxzPXRoaXMuX2hhc1osbz1uZXcgaih7Z2VvbWV0cnlUeXBlOnQsaGFzWjpzLGhhc006ITF9KTtyZXR1cm57ZmVhdHVyZVN0b3JlOm8scXVlcnlFbmdpbmU6bmV3IGIoe2ZlYXR1cmVTdG9yZTpvLGZpZWxkc0luZGV4OkUuZnJvbUxheWVySlNPTih7ZmllbGRzOlt7bmFtZTpVLHR5cGU6XCJlc3JpRmllbGRUeXBlT0lEXCIsYWxpYXM6VX1dfSksZ2VvbWV0cnlUeXBlOnQsaGFzTTohMSxoYXNaOnMsb2JqZWN0SWRGaWVsZDpVLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlLHByaW9yaXR5OnguU05BUFBJTkcsc2NoZWR1bGVyOm51bGwhPXRoaXMudmlldyYmXCIzZFwiPT09dGhpcy52aWV3LnR5cGU/dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5zY2hlZHVsZXI6bnVsbH0pLHR5cGU6ZX19X3JlbW92ZShlKXt0aGlzLl9tYXBTb3VyY2VzKCh0PT50aGlzLl9yZW1vdmVGcm9tU291cmNlKHQsZSkpKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9wZW5kaW5nQWRkcyl0LmdyYXBoaWNzLmRlbGV0ZShlLnVpZCksMD09PXQuZ3JhcGhpY3Muc2l6ZSYmdC50YXNrLmFib3J0KCl9X3JlbW92ZUZyb21Tb3VyY2UoZSx0KXtjb25zdCBzPXQudWlkO2UuZmVhdHVyZVN0b3JlLmhhcyhzKSYmKGUuZmVhdHVyZVN0b3JlLnJlbW92ZUJ5SWQodC51aWQpLEYodC5zeW1ib2wpJiZ0aGlzLl9leHRydWRlZFBvbHlnb25TeW1ib2xzQ291bnQtLSl9X2Rlc3Ryb3lTb3VyY2UoZSl7ZS5xdWVyeUVuZ2luZS5kZXN0cm95KCksdGhpcy5fc291cmNlc1tlLnR5cGVdPW51bGx9X21hcFNvdXJjZXMoZSl7Y29uc3R7cG9pbnQ6dCxwb2x5Z29uOnMscG9seWxpbmU6byxtdWx0aXBvaW50OnJ9PXRoaXMuX3NvdXJjZXMsaT1bXTtyZXR1cm4gbnVsbCE9dCYmaS5wdXNoKGUodCkpLG51bGwhPXMmJmkucHVzaChlKHMpKSxudWxsIT1vJiZpLnB1c2goZShvKSksbnVsbCE9ciYmaS5wdXNoKGUocikpLGl9fTtlKFtjKCldLE8ucHJvdG90eXBlLFwiZ2V0R3JhcGhpY3NMYXllcnNcIix2b2lkIDApLGUoW2Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJsYXllclNvdXJjZVwiLHZvaWQgMCksZShbYyh7Y29uc3RydWN0T25seTohMH0pXSxPLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLGUoW2Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxlKFtjKHtyZWFkT25seTohMH0pXSxPLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbYyh7cmVhZE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJhdmFpbGFiaWxpdHlcIix2b2lkIDApLGUoW2MoKV0sTy5wcm90b3R5cGUsXCJfaGFzWlwiLG51bGwpLGUoW2MoKV0sTy5wcm90b3R5cGUsXCJfc25hcHBpbmdFbGV2YXRpb25BbGlnbmVyXCIsbnVsbCksZShbYygpXSxPLnByb3RvdHlwZSxcIl9zbmFwcGluZ0VsZXZhdGlvbkZpbHRlclwiLG51bGwpLGUoW2MoKV0sTy5wcm90b3R5cGUsXCJfc3ltYm9sb2d5U25hcHBpbmdGZXRjaGVyXCIsbnVsbCksZShbYygpXSxPLnByb3RvdHlwZSxcIl9leHRydWRlZFBvbHlnb25TeW1ib2xzQ291bnRcIix2b2lkIDApLE89ZShbdShcImVzcmkudmlld3MuaW50ZXJhY3RpdmUuc25hcHBpbmcuZmVhdHVyZVNvdXJjZXMuR3JhcGhpY3NTbmFwcGluZ1NvdXJjZVwiKV0sTyk7Y29uc3QgVT1cIk9CSkVDVElEXCI7ZXhwb3J0e08gYXMgR3JhcGhpY3NTbmFwcGluZ1NvdXJjZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2Zyb21WYWx1ZXMgYXMgZX1mcm9tXCIuLi8uLi9za2V0Y2gvbm9ybWFsaXplZFBvaW50LmpzXCI7aW1wb3J0e0RyYXBlZEVkZ2VTbmFwcGluZ0NhbmRpZGF0ZSBhcyB0fWZyb21cIi4uL2NhbmRpZGF0ZXMvRHJhcGVkRWRnZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e0VkZ2VTbmFwcGluZ0NhbmRpZGF0ZSBhcyBufWZyb21cIi4uL2NhbmRpZGF0ZXMvRWRnZVNuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e1ZlcnRleFNuYXBwaW5nQ2FuZGlkYXRlIGFzIGR9ZnJvbVwiLi4vY2FuZGlkYXRlcy9WZXJ0ZXhTbmFwcGluZ0NhbmRpZGF0ZS5qc1wiO2Z1bmN0aW9uIHIoe3g6dCx5Om4sejpkfSl7cmV0dXJuIGUodCxuLGQ/PzApfWZ1bmN0aW9uIGEoZSxhKXtzd2l0Y2goZS50eXBlKXtjYXNlXCJlZGdlXCI6cmV0dXJuIGUuZHJhcGVkP25ldyB0KHtlZGdlU3RhcnQ6cihlLnN0YXJ0KSxlZGdlRW5kOnIoZS5lbmQpLHRhcmdldFBvaW50OnIoZS50YXJnZXQpLG9iamVjdElkOmUub2JqZWN0SWQsZ2V0R3JvdW5kRWxldmF0aW9uOmF9KTpuZXcgbih7ZWRnZVN0YXJ0OnIoZS5zdGFydCksZWRnZUVuZDpyKGUuZW5kKSx0YXJnZXRQb2ludDpyKGUudGFyZ2V0KSxvYmplY3RJZDplLm9iamVjdElkLGlzRHJhcGVkOiExfSk7Y2FzZVwidmVydGV4XCI6cmV0dXJuIG5ldyBkKHt0YXJnZXRQb2ludDpyKGUudGFyZ2V0KSxvYmplY3RJZDplLm9iamVjdElkLGlzRHJhcGVkOiExfSl9fWZ1bmN0aW9uIG8oZSx0KXtyZXR1cm4gbnVsbCE9ZSYmXCIzZFwiPT09ZS50eXBlPyhuLGQpPT5lLmVsZXZhdGlvblByb3ZpZGVyLmdldEVsZXZhdGlvbihuLGQsMCx0LFwiZ3JvdW5kXCIpOigpPT5udWxsfWV4cG9ydHthIGFzIGNvbnZlcnRTbmFwcGluZ0NhbmRpZGF0ZSxvIGFzIG1ha2VHZXRHcm91bmRFbGV2YXRpb259O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7TFJVQ2FjaGUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xSVUNhY2hlLmpzXCI7aW1wb3J0e2dldE9yQ3JlYXRlTWFwVmFsdWUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL01hcFV0aWxzLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVmVydGljYWxVbml0Rm9yU1IgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtnZXRNZXRlcnNQZXJVbml0IGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vc3ltYm9scy9zdXBwb3J0L3VuaXRDb252ZXJzaW9uVXRpbHMuanNcIjtmdW5jdGlvbiBpKGU9ITEsdCl7aWYoZSl7Y29uc3R7ZWxldmF0aW9uSW5mbzplLGFsaWduUG9pbnRzSW5GZWF0dXJlczpzfT10O3JldHVybiBuZXcgYyhlLHMpfXJldHVybiBuZXcgYX1jbGFzcyBhe2FzeW5jIGFsaWduQ2FuZGlkYXRlcyhlLHQscyl7cmV0dXJuIGV9bm90aWZ5RWxldmF0aW9uU291cmNlQ2hhbmdlKCl7fX1jb25zdCByPTEwMjQ7Y2xhc3MgY3tjb25zdHJ1Y3Rvcih0LHMpe3RoaXMuX2VsZXZhdGlvbkluZm89dCx0aGlzLl9hbGlnblBvaW50c0luRmVhdHVyZXM9cyx0aGlzLl9hbGlnbm1lbnRzQ2FjaGU9bmV3IGUociksdGhpcy5fY2FjaGVWZXJzaW9uPTB9YXN5bmMgYWxpZ25DYW5kaWRhdGVzKGUsdCxzKXtjb25zdCBuPXRoaXMuX2VsZXZhdGlvbkluZm87cmV0dXJuIG51bGw9PW58fFwiYWJzb2x1dGUtaGVpZ2h0XCIhPT1uLm1vZGV8fG4uZmVhdHVyZUV4cHJlc3Npb25JbmZvP3RoaXMuX2FsaWduQ29tcHV0ZWRFbGV2YXRpb25DYW5kaWRhdGVzKGUsdCxzKToodGhpcy5fYWxpZ25BYnNvbHV0ZUVsZXZhdGlvbkNhbmRpZGF0ZXMoZSx0LG4pLGUpfW5vdGlmeUVsZXZhdGlvblNvdXJjZUNoYW5nZSgpe3RoaXMuX2FsaWdubWVudHNDYWNoZS5jbGVhcigpLHRoaXMuX2NhY2hlVmVyc2lvbisrfV9hbGlnbkFic29sdXRlRWxldmF0aW9uQ2FuZGlkYXRlcyhlLHQscyl7Y29uc3R7b2Zmc2V0OmksdW5pdDphfT1zO2lmKG51bGw9PWkpcmV0dXJuO2NvbnN0IHI9bih0KSxjPWkqKG8oYT8/XCJtZXRlcnNcIikvcik7Zm9yKGNvbnN0IG4gb2YgZSlzd2l0Y2gobi50eXBlKXtjYXNlXCJlZGdlXCI6bi5zdGFydC56Kz1jLG4uZW5kLnorPWM7Y29udGludWU7Y2FzZVwidmVydGV4XCI6bi50YXJnZXQueis9Yztjb250aW51ZX19YXN5bmMgX2FsaWduQ29tcHV0ZWRFbGV2YXRpb25DYW5kaWRhdGVzKGUsbixvKXtjb25zdCBpPW5ldyBNYXA7Zm9yKGNvbnN0IHMgb2YgZSl0KGkscy5vYmplY3RJZCxkKS5wdXNoKHMpO2NvbnN0W2EscixjXT10aGlzLl9wcmVwYXJlUXVlcnkoaSxuKSxsPWF3YWl0IHRoaXMuX2FsaWduUG9pbnRzSW5GZWF0dXJlcyhhLG8pO3Mobyk7aWYoYyE9PXRoaXMuX2NhY2hlVmVyc2lvbilyZXR1cm4gdGhpcy5fYWxpZ25Db21wdXRlZEVsZXZhdGlvbkNhbmRpZGF0ZXMoZSxuLG8pO3RoaXMuX2FwcGx5Q2FjaGVBbmRSZXNwb25zZShhLGwscik7Y29uc3R7ZHJhcGVkT2JqZWN0SWRzOmgsZmFpbGVkT2JqZWN0SWRzOnV9PWwscD1bXTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdHtvYmplY3RJZDplfT10O2guaGFzKGUpJiZcImVkZ2VcIj09PXQudHlwZSYmKHQuZHJhcGVkPSEwKSx1LmhhcyhlKXx8cC5wdXNoKHQpfXJldHVybiBwfV9wcmVwYXJlUXVlcnkoZSx0KXtjb25zdCBzPVtdLG49W107Zm9yKGNvbnN0W28saV1vZiBlKXtjb25zdCBlPVtdO2Zvcihjb25zdCB0IG9mIGkpdGhpcy5fYWRkVG9RdWVyaWVzT3JDYWNoZWRSZXN1bHQobyx0LnRhcmdldCxlLG4pLFwiZWRnZVwiPT09dC50eXBlJiYodGhpcy5fYWRkVG9RdWVyaWVzT3JDYWNoZWRSZXN1bHQobyx0LnN0YXJ0LGUsbiksdGhpcy5fYWRkVG9RdWVyaWVzT3JDYWNoZWRSZXN1bHQobyx0LmVuZCxlLG4pKTswIT09ZS5sZW5ndGgmJnMucHVzaCh7b2JqZWN0SWQ6byxwb2ludHM6ZX0pfXJldHVyblt7c3BhdGlhbFJlZmVyZW5jZTp0LnRvSlNPTigpLHBvaW50c0luRmVhdHVyZXM6c30sbix0aGlzLl9jYWNoZVZlcnNpb25dfV9hZGRUb1F1ZXJpZXNPckNhY2hlZFJlc3VsdChlLHQscyxuKXtjb25zdCBvPWgoZSx0KSxpPXRoaXMuX2FsaWdubWVudHNDYWNoZS5nZXQobyk7bnVsbD09aT9zLnB1c2godCk6bi5wdXNoKG5ldyBsKHQsaSkpfV9hcHBseUNhY2hlQW5kUmVzcG9uc2UoZSx7ZWxldmF0aW9uczp0LGRyYXBlZE9iamVjdElkczpzLGZhaWxlZE9iamVjdElkczpufSxvKXtmb3IoY29uc3QgciBvZiBvKXIuYXBwbHkoKTtsZXQgaT0wO2NvbnN0IGE9dGhpcy5fYWxpZ25tZW50c0NhY2hlO2Zvcihjb25zdHtvYmplY3RJZDpyLHBvaW50czpjfW9mIGUucG9pbnRzSW5GZWF0dXJlcyl7aWYobi5oYXMocikpe2krPWMubGVuZ3RoO2NvbnRpbnVlfWNvbnN0IGU9IXMuaGFzKHIpO2Zvcihjb25zdCBzIG9mIGMpe2NvbnN0IG49aChyLHMpLG89dFtpKytdO3Muej1vLGUmJmEucHV0KG4sbywxKX19fX1jbGFzcyBse2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5wb2ludD1lLHRoaXMuej10fWFwcGx5KCl7dGhpcy5wb2ludC56PXRoaXMuen19ZnVuY3Rpb24gaChlLHt4OnQseTpzLHo6bixzcGF0aWFsUmVmZXJlbmNlOm99KXtyZXR1cm5gJHtlfS0ke3R9LSR7c30tJHtuPz8wfX0td2tpZDoke28/LndraWR9YH1mdW5jdGlvbiBkKCl7cmV0dXJuW119ZXhwb3J0e2kgYXMgZ2V0U25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25BbGlnbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7Y2xhc3MgdHtmaWx0ZXIodCxuKXtyZXR1cm4gbn1ub3RpZnlFbGV2YXRpb25Tb3VyY2VDaGFuZ2UoKXt9fWNsYXNzIG57ZmlsdGVyKHQsbil7Y29uc3R7cG9pbnQ6cixkaXN0YW5jZTpjfT10LHt6Oml9PXI7aWYoIShudWxsIT1pKSlyZXR1cm4gbjtpZigwPT09bi5sZW5ndGgpcmV0dXJuIG47Y29uc3Qgbz1zKGMpLHU9dGhpcy5fdXBkYXRlQ2FuZGlkYXRlc1RvM0QobixyLG8pLmZpbHRlcihlKTtyZXR1cm4gdS5zb3J0KGEpLHV9X3VwZGF0ZUNhbmRpZGF0ZXNUbzNEKHQsbixlKXtmb3IoY29uc3QgciBvZiB0KXN3aXRjaChyLnR5cGUpe2Nhc2VcImVkZ2VcIjpjKHIsbixlKTtjb250aW51ZTtjYXNlXCJ2ZXJ0ZXhcIjpvKHIsbixlKTtjb250aW51ZX1yZXR1cm4gdH19ZnVuY3Rpb24gZSh0KXtyZXR1cm4gdC5kaXN0YW5jZTw9MX1mdW5jdGlvbiByKGU9ITEpe3JldHVybiBlP25ldyBuOm5ldyB0fWZ1bmN0aW9uIGModCxuLHt4OmUseTpyLHo6Y30pe2NvbnN0e3N0YXJ0Om8sZW5kOnMsdGFyZ2V0OmF9PXQ7dC5kcmFwZWR8fGkoYSxuLG8scyk7Y29uc3QgdT0obi54LWEueCkvZSxkPShuLnktYS55KS9yLGY9KG4uei1hLnopL2M7dC5kaXN0YW5jZT1NYXRoLnNxcnQodSp1K2QqZCtmKmYpfWZ1bmN0aW9uIGkodCxuLGUscil7Y29uc3QgYz1yLngtZS54LGk9ci55LWUueSxvPXIuei1lLnoscz1jKmMraSppK28qbyxhPShuLngtZS54KSpjKyhuLnktZS55KSppK28qKG4uei1lLnopLHU9TWF0aC5taW4oMSxNYXRoLm1heCgwLGEvcykpLGQ9ZS54K2MqdSxmPWUueStpKnUseD1lLnorbyp1O3QueD1kLHQueT1mLHQuej14fWZ1bmN0aW9uIG8odCxuLHt4OmUseTpyLHo6Y30pe2NvbnN0e3RhcmdldDppfT10LG89KG4ueC1pLngpL2Uscz0obi55LWkueSkvcixhPShuLnotaS56KS9jLHU9TWF0aC5zcXJ0KG8qbytzKnMrYSphKTt0LmRpc3RhbmNlPXV9ZnVuY3Rpb24gcyh0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdD97eDp0LHk6dCx6OnR9OnR9ZnVuY3Rpb24gYSh0LG4pe3JldHVybiB0LmRpc3RhbmNlLW4uZGlzdGFuY2V9ZXhwb3J0e3IgYXMgZ2V0U25hcHBpbmdDYW5kaWRhdGVFbGV2YXRpb25GaWx0ZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7Y2xvbmUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2xhbmcuanNcIjtpbXBvcnR7TFJVQ2FjaGUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xSVUNhY2hlLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7bnVtZXJpY0hhc2ggYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3N0cmluZy5qc1wiO2Z1bmN0aW9uIG4odD0hMSxlKXtyZXR1cm4gdD9uZXcgaShlKTpuZXcgY31jbGFzcyBje2FzeW5jIGZldGNoKCl7cmV0dXJuW119bm90aWZ5U3ltYm9sb2d5Q2hhbmdlKCl7fX1jb25zdCByPTEwMjQ7Y2xhc3MgaXtjb25zdHJ1Y3Rvcih0KXt0aGlzLl9nZXRTeW1ib2xvZ3lDYW5kaWRhdGVzPXQsdGhpcy5fY2FuZGlkYXRlc0NhY2hlPW5ldyBlKHIpLHRoaXMuX2NhY2hlVmVyc2lvbj0wfWFzeW5jIGZldGNoKGUsbyl7aWYoMD09PWUubGVuZ3RoKXJldHVybltdO2NvbnN0IG49W10sYz1bXSxyPXRoaXMuX2NhbmRpZGF0ZXNDYWNoZTtmb3IoY29uc3QgcyBvZiBlKXtjb25zdCBlPWEocyksbz1yLmdldChlKTtpZihvKWZvcihjb25zdCBzIG9mIG8pYy5wdXNoKHQocykpO2Vsc2Ugbi5wdXNoKHMpLHIucHV0KGUsW10sMSl9aWYoMD09PW4ubGVuZ3RoKXJldHVybiBjO2NvbnN0IGk9dGhpcy5fY2FjaGVWZXJzaW9uLHtjYW5kaWRhdGVzOmgsc291cmNlQ2FuZGlkYXRlSW5kaWNlczpkfT1hd2FpdCB0aGlzLl9nZXRTeW1ib2xvZ3lDYW5kaWRhdGVzKG4sbyk7cyhvKTtpZihpIT09dGhpcy5fY2FjaGVWZXJzaW9uKXJldHVybiB0aGlzLmZldGNoKGUsbyk7Y29uc3QgZj1bXSx7bGVuZ3RoOmd9PWg7Zm9yKGxldCBzPTA7czxnOysrcyl7Y29uc3QgZT1oW3NdLG89YShuW2Rbc11dKSxjPXIuZ2V0KG8pO2MucHVzaChlKSxyLnB1dChvLGMsYy5sZW5ndGgpLGYucHVzaCh0KGUpKX1yZXR1cm4gYy5jb25jYXQoZil9bm90aWZ5U3ltYm9sb2d5Q2hhbmdlKCl7dGhpcy5fY2FuZGlkYXRlc0NhY2hlLmNsZWFyKCksdGhpcy5fY2FjaGVWZXJzaW9uKyt9fWZ1bmN0aW9uIGEodCl7c3dpdGNoKHQudHlwZSl7Y2FzZVwidmVydGV4XCI6e2NvbnN0e29iamVjdElkOmUsdGFyZ2V0OnN9PXQsbj1gJHtlfS12ZXJ0ZXgtJHtzLnh9LSR7cy55fS0ke3Muej8/MH1gO3JldHVybiBvKG4pLnRvU3RyaW5nKCl9Y2FzZVwiZWRnZVwiOntjb25zdHtvYmplY3RJZDplLHN0YXJ0OnMsZW5kOm59PXQsYz1gJHtlfS1lZGdlLSR7cy54fS0ke3MueX0tJHtzLno/PzB9LXRvLSR7bi54fS0ke24ueX0tJHtuLno/PzB9YDtyZXR1cm4gbyhjKS50b1N0cmluZygpfWRlZmF1bHQ6cmV0dXJuXCJcIn19ZXhwb3J0e24gYXMgZ2V0U3ltYm9sb2d5U25hcHBpbmdDYW5kaWRhdGVzRmV0Y2hlcn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=