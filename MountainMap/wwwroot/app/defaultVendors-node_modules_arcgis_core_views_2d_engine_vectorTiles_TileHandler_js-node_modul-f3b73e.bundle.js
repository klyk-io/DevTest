"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_2d_engine_vectorTiles_TileHandler_js-node_modul-f3b73e"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./RectangleBinPack.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js");
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n{constructor(e,s,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=e,this.height=s,this._glyphSource=i,this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__["default"](e-4,s-4),this._glyphData.push(new Uint8Array(e*s)),this._dirties.push(!0),this._textures.push(void 0)}getGlyphItems(s,i){const h=[],r=this._glyphSource,n=new Set,o=1/256;for(const t of i){const e=Math.floor(t*o);n.add(e)}const a=[];return n.forEach((t=>{const e=s+t;if(this._rangePromises.has(e))a.push(this._rangePromises.get(e));else{const i=r.getRange(s,t).then((()=>{this._rangePromises.delete(e)}),(()=>{this._rangePromises.delete(e)}));this._rangePromises.set(e,i),a.push(i)}})),Promise.all(a).then((()=>{let n=this._glyphIndex[s];n||(n={},this._glyphIndex[s]=n);for(const o of i){const i=n[o];if(i){h[o]={sdf:!0,rect:i.rect,metrics:i.metrics,page:i.page,code:o};continue}const a=r.getGlyph(s,o);if(!a?.metrics)continue;const l=a.metrics;let c;if(0===l.width)c=new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_1__["default"](0,0,0,0);else{const e=3,s=l.width+2*e,i=l.height+2*e;let h=s%4?4-s%4:4,r=i%4?4-i%4:4;1===h&&(h=5),1===r&&(r=5),c=this._binPack.allocate(s+h,i+r),c.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_0__["default"](this.width-4,this.height-4),c=this._binPack.allocate(s+h,i+r));const n=this._glyphData[this._currentPage],o=a.bitmap;let g,_;if(o)for(let t=0;t<i;t++){g=s*t,_=this.width*(c.y+t+1)+c.x;for(let t=0;t<s;t++)n[_+t+1]=o.at(g+t)}}n[o]={rect:c,metrics:l,tileIDs:null,page:this._currentPage},h[o]={sdf:!0,rect:c,metrics:l,page:this._currentPage,code:o},this._dirties[this._currentPage]=!0}return h}))}removeGlyphs(t){for(const e in this._glyphIndex){const s=this._glyphIndex[e];if(!s)continue;let i;for(const e in s)if(i=s[e],i.tileIDs.delete(t),0===i.tileIDs.size){const t=this._glyphData[i.page],h=i.rect;let r,n;for(let e=0;e<h.height;e++)for(r=this.width*(h.y+e)+h.x,n=0;n<h.width;n++)t[r+n]=0;delete s[e],this._dirties[i.page]=!0}}}bind(t,e,n,o=0){if(!this._textures[n]){const e=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.TextureDescriptor;e.pixelFormat=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.ALPHA,e.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureWrapMode.CLAMP_TO_EDGE,e.width=this.width,e.height=this.height,this._textures[n]=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_3__.Texture(t,e,new Uint8Array(this.width*this.height))}const a=this._textures[n];a.setSamplingMode(e),this._dirties[n]&&a.setData(this._glyphData[n]),t.bindTexture(a,o),this._dirties[n]=!1}destroy(){this.dispose()}dispose(){this._glyphData.length=0,this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_pbf_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/pbf.js */ "./node_modules/@arcgis/core/core/pbf.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t){if(this._metrics=[],!t)return void(this._allBitmaps=null);const e=new Map;let s=0;for(;t.next();)switch(t.tag()){case 1:{const a=t.getMessage();for(;a.next();)switch(a.tag()){case 3:{const t=a.getMessage();let r,n,i,c,o,g,h;for(;t.next();)switch(t.tag()){case 1:r=t.getUInt32();break;case 2:n=t.getBytes();break;case 3:i=t.getUInt32();break;case 4:c=t.getUInt32();break;case 5:o=t.getSInt32();break;case 6:g=t.getSInt32();break;case 7:h=t.getUInt32();break;default:t.skip()}if(t.release(),r){const t=n?.length??0;this._metrics[r]={width:i,height:c,left:o,top:g,advance:h,startOffset:s,length:t},e.set(r,n),s+=t}break}default:a.skip()}a.release();break}default:t.skip()}const a=new Uint8Array(s),r=this._metrics;for(const[n,i]of e){const{startOffset:t,length:e}=r[n];if(i)for(let s=0;s<e;++s)a[t+s]=i[s]}this._allBitmaps=a}getMetrics(t){return this._metrics[t]}getBitmap(t){if(!this._allBitmaps)return;const e=this._metrics[t];if(void 0===e)return;const{startOffset:s,length:a}=e;return 0!==a?new n(this._allBitmaps,s,a):void 0}}class a{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class r{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(a,r){const n=this._getFontStack(a);if(n.getRange(r))return Promise.resolve();const i=256*r,c=i+255;if(this._baseURL){const o=this._baseURL.replace("{fontstack}",a).replace("{range}",i+"-"+c);return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o,{responseType:"array-buffer"}).then((t=>{n.addRange(r,new s(new _core_pbf_js__WEBPACK_IMPORTED_MODULE_1__["default"](new Uint8Array(t.data),new DataView(t.data))))})).catch((()=>{n.addRange(r,new s)}))}return n.addRange(r,new s),Promise.resolve()}getGlyph(t,e){const s=this._getFontStack(t);if(!s)return;const a=Math.floor(e/256),r=s.getRange(a);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new a),e}}class n{constructor(t,e,s){this._array=t,this._start=e,this.length=s}at(t){return 0<=t&&t<this.length?this._array[this._start+t]:void 0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e,t){this._width=0,this._height=0,this._free=[],this._width=e,this._height=t,this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](0,0,e,t))}get width(){return this._width}get height(){return this._height}allocate(e,t){if(e>this._width||t>this._height)return new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"];let i=null,s=-1;for(let h=0;h<this._free.length;++h){const w=this._free[h];e<=w.width&&t<=w.height&&(null===i||w.y<=i.y&&w.x<=i.x)&&(i=w,s=h)}return null===i?new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"]:(this._free.splice(s,1),i.width<i.height?(i.width>e&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x+e,i.y,i.width-e,t)),i.height>t&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y+t,i.width,i.height-t))):(i.width>e&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x+e,i.y,i.width-e,i.height)),i.height>t&&this._free.push(new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y+t,e,i.height-t))),new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_0__["default"](i.x,i.y,e,t))}release(h){for(let e=0;e<this._free.length;++e){const t=this._free[e];if(t.y===h.y&&t.height===h.height&&t.x+t.width===h.x)t.width+=h.width;else if(t.x===h.x&&t.width===h.width&&t.y+t.height===h.y)t.height+=h.height;else if(h.y===t.y&&h.height===t.height&&h.x+h.width===t.x)t.x=h.x,t.width+=h.width;else{if(h.x!==t.x||h.width!==t.width||h.y+h.height!==t.y)continue;t.y=h.y,t.height+=h.height}this._free.splice(e,1),this.release(h)}this._free.push(h)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _symbols_cim_rasterizingUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../symbols/cim/rasterizingUtils.js */ "./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js");
/* harmony import */ var _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./RectangleBinPack.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/RectangleBinPack.js");
/* harmony import */ var _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../webgl/Rect.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r="dasharray-";class o{constructor(t,e,s=0){this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(t<=0||e<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=t,this._pageHeight=e,s>0&&(this._maxItemSize=s),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](t-4,e-4)}destroy(){this.dispose()}dispose(){this._binPack=null,this._mosaicsData.length=0,this._mosaicRects={};for(const t of this._textures)t&&t.dispose();this._textures.length=0}getWidth(t){return t>=this._size.length?-1:this._size[t][0]}getHeight(t){return t>=this._size.length?-1:this._size[t][1]}getPageSize(t){return t>=this._size.length?null:this._size[t]}setSpriteSource(t){if(this.dispose(),this.pixelRatio=t.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](this._pageWidth-4,this._pageHeight-4);const t=Math.floor(this._pageWidth),e=Math.floor(this._pageHeight),s=new Uint32Array(t*e);this._mosaicsData[0]=s,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=t}getSpriteItem(t,i=!1){let e,s,h=this._mosaicRects[t];if(h)return h;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;if(t&&t.startsWith(r)?([e,s]=this._rasterizeDash(t),i=!0):e=this._sprites.getSpriteInfo(t),!e?.width||!e.height||e.width<0||e.height<0)return null;const a=e.width,o=e.height,[n,_,g]=this._allocateImage(a,o);return n.width<=0?null:(this._copy(n,e,_,g,i,s),h={rect:n,width:a,height:o,sdf:e.sdf,simplePattern:!1,pixelRatio:e.pixelRatio,page:_},this._mosaicRects[t]=h,h)}getSpriteItems(t){const i={};for(const e of t)i[e.name]=this.getSpriteItem(e.name,e.repeat);return i}getMosaicItemPosition(t,i){const e=this.getSpriteItem(t,i),s=e&&e.rect;if(!s)return null;s.width=e.width,s.height=e.height;const h=e.width,a=e.height,r=2;return{tl:[s.x+r,s.y+r],br:[s.x+r+h,s.y+r+a],page:e.page}}bind(t,i,e=0,r=0){if(e>=this._size.length||e>=this._mosaicsData.length)return;if(!this._textures[e]){const i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_5__.TextureDescriptor;i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.TextureWrapMode.CLAMP_TO_EDGE,i.width=this._size[e][0],i.height=this._size[e][1],this._textures[e]=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_4__.Texture(t,i,new Uint8Array(this._mosaicsData[e].buffer))}const o=this._textures[e];o.setSamplingMode(i),this._dirties[e]&&o.setData(new Uint8Array(this._mosaicsData[e].buffer)),t.bindTexture(o,r),this._dirties[e]=!1}static _copyBits(t,i,e,s,h,a,r,o,n,_,g){let c=s*i+e,l=o*a+r;if(g){l-=a;for(let r=-1;r<=_;r++,c=((r+_)%_+s)*i+e,l+=a)for(let i=-1;i<=n;i++)h[l+i]=t[c+(i+n)%n]}else for(let p=0;p<_;p++){for(let i=0;i<n;i++)h[l+i]=t[c+i];c+=i,l+=a}}_copy(t,i,e,s,h,a){if(!this._sprites||"loaded"!==this._sprites.loadStatus||e>=this._mosaicsData.length)return;const r=new Uint32Array(a?a.buffer:this._sprites.image.buffer),n=this._mosaicsData[e];n&&r||console.error("Source or target images are uninitialized!");const _=2,g=a?i.width:this._sprites.width;o._copyBits(r,g,i.x,i.y,n,s[0],t.x+_,t.y+_,i.width,i.height,h),this._dirties[e]=!0}_allocateImage(t,s){t+=2,s+=2;const h=Math.max(t,s);if(this._maxItemSize&&this._maxItemSize<h){const i=new _webgl_Rect_js__WEBPACK_IMPORTED_MODULE_2__["default"](0,0,t,s);return this._mosaicsData.push(new Uint32Array(t*s)),this._dirties.push(!0),this._size.push([t,s]),this._textures.push(void 0),[i,this._mosaicsData.length-1,[t,s]]}let a=t%4?4-t%4:4,r=s%4?4-s%4:4;1===a&&(a=5),1===r&&(r=5);const o=this._binPack.allocate(t+a,s+r);return o.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new _RectangleBinPack_js__WEBPACK_IMPORTED_MODULE_1__["default"](this._pageWidth-4,this._pageHeight-4),this._allocateImage(t,s)):[o,this._currentPage,[this._pageWidth,this._pageHeight]]}_rasterizeDash(i){const e=/\[(.*?)\]/,s=i.match(e);if(!s)return null;const h=s[1].split(",").map(Number),a=i.slice(i.lastIndexOf("-")+1),[r,o,n]=(0,_symbols_cim_rasterizingUtils_js__WEBPACK_IMPORTED_MODULE_0__.rasterizeDash)(h,a);return[{x:0,y:0,width:o,height:n,sdf:!0,pixelRatio:1},new Uint8Array(r.buffer)]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TileHandler: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/workers/workers.js */ "./node_modules/@arcgis/core/core/workers/workers.js");
/* harmony import */ var _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./GlyphMosaic.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphMosaic.js");
/* harmony import */ var _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./GlyphSource.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/GlyphSource.js");
/* harmony import */ var _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SpriteMosaic.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/SpriteMosaic.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class u{constructor(t,e,s){this._layer=t,this._styleRepository=e,this.devicePixelRatio=s,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._spriteSourceAbortController=null,this._startOptionsInputSignal=null,this._inputSignalEventListener=null}destroy(){this._connection?.close(),this._connection=null,this._styleRepository=null,this._layer=null,this._spriteMosaic?.destroy(),this._spriteMosaic=null,this._glyphMosaic=null,this._spriteSourceAbortController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.abortMaybe)(this._spriteSourceAbortController),this._spriteSourcePromise=null,this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,this._inputSignalEventListener=null}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(t){this._requestSprite(t);const s=this._layer.currentStyleInfo.glyphsUrl,r=new _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__["default"](s?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.addQueryParameters)(s,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__["default"](1024,1024,r),this._broadcastPromise=(0,_core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__.open)("WorkerTileHandler",{client:this,schedule:t.schedule,signal:t.signal}).then((s=>{if(this._layer&&(this._connection?.close(),this._connection=s,this._layer&&!this._connection.closed)){const r=s.broadcast("setStyle",this._layer.currentStyleInfo.style,t);Promise.all(r).catch((t=>(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfNotAbortError)(t)))}}))}_requestSprite(t){this._spriteSourceAbortController?.abort();const e=new AbortController;this._spriteSourceAbortController=e;const r=t?.signal;this._inputSignalEventListener&&this._startOptionsInputSignal?.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,r&&(this._inputSignalEventListener=h(e),r.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const{signal:i}=e,o={...t,signal:i};this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,o),this._spriteSourcePromise.then((t=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAbortError)(i),this._spriteMosaic=new _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__["default"](1024,1024,250),this._spriteMosaic.setSpriteSource(t)}))}async updateStyle(t){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",t)),this._broadcastPromise}setSpriteSource(t){const e=new _SpriteMosaic_js__WEBPACK_IMPORTED_MODULE_6__["default"](1024,1024,250);return e.setSpriteSource(t),this._spriteMosaic=e,this._spriteSourcePromise=Promise.resolve(t),this._spriteSourceAbortController=null,e}async setStyle(t,e){await this._broadcastPromise,this._styleRepository=t,this._requestSprite();const s=new _GlyphSource_js__WEBPACK_IMPORTED_MODULE_5__["default"](this._layer.currentStyleInfo.glyphsUrl?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.addQueryParameters)(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new _GlyphMosaic_js__WEBPACK_IMPORTED_MODULE_4__["default"](1024,1024,s),this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",e)),this._broadcastPromise}fetchTileData(t,e){return this._getRefKeys(t,e).then((t=>{const s=this._layer.sourceNameToSource,r=[];for(const e in s)r.push(e);return this._getSourcesData(r,t,e)}))}parseTileData(t,e){const s=t&&t.data;if(!s)return Promise.resolve(null);const{sourceName2DataAndRefKey:r,transferList:i}=s;return 0===Object.keys(r).length?Promise.resolve(null):this._broadcastPromise.then((()=>this._connection.invoke("createTileAndParse",{key:t.key.id,sourceName2DataAndRefKey:r,styleLayerUIDs:t.styleLayerUIDs},{...e,transferList:i})))}async getSprites(t){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(t)}getGlyphs(t){return this._glyphMosaic.getGlyphItems(t.font,t.codePoints)}async _getTilePayload(t,e,s){const i=_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.acquire(t.id),o=this._layer.sourceNameToSource[e],{level:n,row:l,col:a}=i;_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.release(i);try{return{protobuff:await o.requestTile(n,l,a,s),sourceName:e}}catch(u){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isAbortError)(u))throw u;return{protobuff:null,sourceName:e}}}_getRefKeys(t,e){const s=this._layer.sourceNameToSource,r=new Array;for(const i in s){const o=s[i].getRefKey(t,e);r.push(o)}return Promise.allSettled(r)}_getSourcesData(t,e,s){const r=[];for(let i=0;i<e.length;i++){const o=e[i],n="fulfilled"===o.status?o.value:null;if(null==n||null==t[i])r.push(null);else{const e=this._getTilePayload(n,t[i],s);r.push(e)}}return Promise.allSettled(r).then((t=>{const s={},r=[];for(let i=0;i<t.length;i++){const o=t[i],n="fulfilled"===o.status?o.value:null,l=n?.protobuff;if(!n||!l?.byteLength)continue;const a=e[i],c="fulfilled"===a.status?a.value:null;if(c){const t=c.id;s[n.sourceName]={refKey:t,protobuff:l},r.push(l)}}return{sourceName2DataAndRefKey:s,transferList:r}}))}}function h(t){return()=>t.abort()}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolDeclutterer: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(o,t){if(o.priority-t.priority)return o.priority-t.priority;const e=o.tile.key,i=t.tile.key;return e.world-i.world?e.world-i.world:e.level-i.level?e.level-i.level:e.row-i.row?e.row-i.row:e.col-i.col?e.col-i.col:o.xTile-t.xTile?o.xTile-t.xTile:o.yTile-t.yTile}class e{get running(){return this._running}constructor(o,t,e,i,s,n){this._visibleTiles=o,this._symbolRepository=t,this._createCollisionJob=e,this._assignTileSymbolsOpacity=i,this._symbolLayerSorter=s,this._isLayerVisible=n,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}setScreenSize(o,t){this._screenWidth===o&&this._screenHeight===t||this.restart(),this._screenWidth=o,this._screenHeight=t}restart(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}continue(o){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){const t=performance.now();if(!this._selectionJob.work(o))return!1;if(this._selectionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){const t=performance.now();if(!this._collisionJob.work(o))return!1;if(this._collisionJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){const t=performance.now();if(!this._opacityJob.work(o))return!1;if(this._opacityJobCompleted=!0,0===(o=Math.max(0,o-(performance.now()-t))))return!1}return this._running=!1,!0}_createSelectionJob(){const o=this._symbolRepository.uniqueSymbols;for(let t=0;t<o.length;t++){const e=o[t];for(let o=0;o<e.uniqueSymbols.length;o++){const t=e.uniqueSymbols[o];for(const o of t.tileSymbols)o.selectedForRendering=!1}}const e=[];let i=0,s=0;const n=this._isLayerVisible;function r(r){let l;const c=performance.now();for(;s<o.length;s++,i=0){const t=o[s],h=t.styleLayerUID;if(!n(h)){e[s]||(e[s]={styleLayerUID:h,symbols:[]});continue}e[s]=e[s]||{styleLayerUID:h,symbols:[]};const a=e[s];for(;i<t.uniqueSymbols.length;i++){if(l=t.uniqueSymbols[i],i%100==99&&performance.now()-c>r)return!1;let o=null,e=!1,s=!1;for(const t of l.tileSymbols)if(!s||!e){const i=t.tile;(!o||i.isCoverage||i.neededForCoverage&&!e)&&(o=t,(i.neededForCoverage||i.isCoverage)&&(s=!0),i.isCoverage&&(e=!0))}if(o.selectedForRendering=!0,s){a.symbols.push(o),l.show=!0;for(const o of l.parts)o.show=!0}else l.show=!1}}for(const o of e)o.symbols.sort(t);return!0}const l=this._symbolLayerSorter;return{work:r,get sortedSymbols(){return e.sort(l)}}}_createOpacityJob(){const o=this._assignTileSymbolsOpacity,t=this._visibleTiles;let e=0;function s(t,e){const n=t.symbols;for(const[o,s]of n)i(s,e);o(t,e);for(const o of t.childrenTiles)s(o,e)}return{work(o){const i=performance.now();for(;e<t.length;e++){if(performance.now()-i>o)return!1;const n=t[e];if(null!=n.parentTile)continue;s(n,performance.now())}return!0}}}}function i(t,e){for(const i of t){const t=i.unique;for(const i of t.parts){const s=i.targetOpacity>.5?1:-1;i.startOpacity+=s*((e-i.startTime)/_config_js__WEBPACK_IMPORTED_MODULE_0__.fadeDuration),i.startOpacity=Math.min(Math.max(i.startOpacity,0),1),i.startTime=e,i.targetOpacity=t.show&&i.show?1:0}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolRepository: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=32,o=8,t=64;class i{constructor(e,s,l){this.tileCoordRange=e,this._visibleTiles=s,this._createUnique=l,this._tiles=new Map,this._uniqueSymbolsReferences=new Map}get uniqueSymbols(){return null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}add(s,i){this._uniqueSymbolLayerArray=null;let n=this._tiles.get(s.id);n||(n={symbols:new Map},this._tiles.set(s.id,n));const r=new Map;if(i)for(const e of i)n.symbols.has(e)&&(r.set(e,n.symbols.get(e)),n.symbols.delete(e));else for(const[e,l]of s.layerData)n.symbols.has(e)&&(r.set(e,n.symbols.get(e)),n.symbols.delete(e));this._removeSymbols(r);const y=s.symbols,a=new Map;for(const[f,c]of y){let s=c.length;if(s>=l){let l=this.tileCoordRange;do{l/=2,s/=4}while(s>o&&l>t);const i=new _util_js__WEBPACK_IMPORTED_MODULE_0__.GridIndex(this.tileCoordRange,this.tileCoordRange,l);a.set(f,{flat:c,index:i}),n.symbols.set(f,{flat:c,index:i});for(const e of c)i.getCell(e.xTile,e.yTile).push(e)}else a.set(f,{flat:c}),n.symbols.set(f,{flat:c})}this._addSymbols(s.key,y)}deleteStyleLayers(e){this._uniqueSymbolLayerArray=null;for(const[s,l]of this._tiles){const o=new Map;for(const s of e)l.symbols.has(s)&&(o.set(s,l.symbols.get(s)),l.symbols.delete(s));this._removeSymbols(o),0===l.symbols.size&&this._tiles.delete(s)}}removeTile(e){this._uniqueSymbolLayerArray=null;const s=this._tiles.get(e.id);if(!s)return;const l=new Map;for(const[o,t]of e.symbols)s.symbols.has(o)&&(l.set(o,s.symbols.get(o)),s.symbols.delete(o));this._removeSymbols(l),0===s.symbols.size&&this._tiles.delete(e.id)}_removeSymbols(e){for(const[s,{flat:l}]of e)for(const e of l){const l=e.unique,o=l.tileSymbols,t=o.length-1;for(let s=0;s<t;s++)if(o[s]===e){o[s]=o[t];break}if(o.length=t,0===t){const e=this._uniqueSymbolsReferences.get(s);e.delete(l),0===e.size&&this._uniqueSymbolsReferences.delete(s)}e.unique=null}}_addSymbols(e,s){if(0===s.size)return;const l=this._visibleTiles;for(const o of l)o.parentTile||o.key.world!==e.world||o.key.level===e.level&&!o.key.equals(e)||this._matchSymbols(o,e,s);for(const[o,t]of s)for(const e of t)if(null==e.unique){const s=this._createUnique();e.unique=s,s.tileSymbols.push(e);let l=this._uniqueSymbolsReferences.get(o);l||(l=new Set,this._uniqueSymbolsReferences.set(o,l)),l.add(s)}}_matchSymbols(e,l,o){if(e.key.level>l.level){const s=e.key.level-l.level;if(e.key.row>>s!==l.row||e.key.col>>s!==l.col)return}if(l.level>e.key.level){const s=l.level-e.key.level;if(l.row>>s!==e.key.row||l.col>>s!==e.key.col)return}if(l.equals(e.key)){for(const s of e.childrenTiles)this._matchSymbols(s,l,o);return}const t=new Map;for(const[i,n]of o){const o=[];for(const t of n){const i=(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.tileCoordChange)(this.tileCoordRange,t.xTile,l.level,l.col,e.key.level,e.key.col),n=(0,_util_js__WEBPACK_IMPORTED_MODULE_0__.tileCoordChange)(this.tileCoordRange,t.yTile,l.level,l.row,e.key.level,e.key.row);i>=0&&i<this.tileCoordRange&&n>=0&&n<this.tileCoordRange&&o.push({symbol:t,xTransformed:i,yTransformed:n})}const r=[],y=e.key.level<l.level?1:1<<e.key.level-l.level,a=this._tiles.get(e.id).symbols.get(i);if(a){const e=a.flat;for(const s of o){let l,o=!1;const t=s.xTransformed,i=s.yTransformed;l=null!=a.index?a.index.getCell(t,i):e;const n=s.symbol,f=n.hash;for(const e of l)if(f===e.hash&&Math.abs(t-e.xTile)<=y&&Math.abs(i-e.yTile)<=y){const s=e.unique;n.unique=s,s.tileSymbols.push(n),o=!0;break}o||r.push(n)}}r.length>0&&t.set(i,r)}for(const s of e.childrenTiles)this._matchSymbols(s,l,t)}_createUniqueSymbolLayerArray(){const e=this._uniqueSymbolsReferences,s=new Array(e.size);let l,o=0;for(const[t,i]of e){const e=new Array(i.size);l=0;for(const s of i)e[l++]=s;s[o]={styleLayerUID:t,uniqueSymbols:e},o++}return s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CollisionJob: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(e,t,n,o,i,l){const{iconRotationAlignment:a,textRotationAlignment:c,iconTranslate:h,iconTranslateAnchor:u,textTranslate:d,textTranslateAnchor:y}=o;let x=0;for(const g of e.colliders){const[e,o]=0===g.partIndex?h:d,m=0===g.partIndex?u:y,f=g.minLod<=l&&l<=g.maxLod;x+=f?0:1,g.enabled=f,g.xScreen=g.xTile*i[0]+g.yTile*i[3]+i[6],g.yScreen=g.xTile*i[1]+g.yTile*i[4]+i[7],m===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.TranslateAnchor.MAP?(g.xScreen+=n*e-t*o,g.yScreen+=t*e+n*o):(g.xScreen+=e,g.yScreen+=o),_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT===(0===g.partIndex?a:c)?(g.dxScreen=g.dxPixels,g.dyScreen=g.dyPixels):(g.dxScreen=n*(g.dxPixels+g.width/2)-t*(g.dyPixels+g.height/2)-g.width/2,g.dyScreen=t*(g.dxPixels+g.width/2)+n*(g.dyPixels+g.height/2)-g.height/2)}e.colliders.length>0&&x===e.colliders.length&&(e.unique.show=!1)}class l{constructor(o,r,s,i,l,a){this._symbols=o,this._styleRepository=i,this._zoom=l,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new _util_js__WEBPACK_IMPORTED_MODULE_2__.GridIndex(r,s,_config_js__WEBPACK_IMPORTED_MODULE_1__.collisionGridCellSize),this._si=Math.sin(Math.PI*a/180),this._co=Math.cos(Math.PI*a/180);for(const t of o)for(const n of t.symbols)this._allNeededMatrices.has(n.tile)||this._allNeededMatrices.set(n.tile,(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.a)(n.tile.transforms.tileUnitsToPixels))}work(e){const t=this._gridIndex;function n(e){const n=e.xScreen+e.dxScreen,o=e.yScreen+e.dyScreen,r=n+e.width,s=o+e.height,[i,l,a,c]=t.getCellSpan(n,o,r,s);for(let h=l;h<=c;h++)for(let e=i;e<=a;e++){const i=t.cells[h][e];for(const e of i){const t=e.xScreen+e.dxScreen,i=e.yScreen+e.dyScreen,l=t+e.width,a=i+e.height;if(!(r<t||n>l||s<i||o>a))return!0}}return!1}const o=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const t=this._symbols[this._currentLayerCursor],r=this._getProperties(t.styleLayerUID);for(;this._currentSymbolCursor<t.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-o>e)return!1;const s=t.symbols[this._currentSymbolCursor];if(!s.unique.show)continue;i(s,this._si,this._co,r,this._allNeededMatrices.get(s.tile),this._zoom);const l=s.unique;if(!l.show)continue;const{iconAllowOverlap:a,iconIgnorePlacement:c,textAllowOverlap:h,textIgnorePlacement:u}=r;for(const e of s.colliders){if(!e.enabled)continue;const t=l.parts[e.partIndex];if(!t.show)continue;!(e.partIndex?h:a)&&n(e)&&(e.hard?l.show=!1:t.show=!1)}if(l.show)for(const e of s.colliders){if(!e.enabled)continue;if(e.partIndex?u:c)continue;if(!l.parts[e.partIndex].show)continue;const t=e.xScreen+e.dxScreen,n=e.yScreen+e.dyScreen,o=t+e.width,r=n+e.height,[s,i,a,h]=this._gridIndex.getCellSpan(t,n,o,r);for(let l=i;l<=h;l++)for(let t=s;t<=a;t++){this._gridIndex.cells[l][t].push(e)}}}}return!0}_getProperties(e){const t=this._styleProps.get(e);if(t)return t;const n=this._zoom,s=this._styleRepository.getStyleLayerByUID(e),i=s.getLayoutValue("symbol-placement",n)!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.SymbolPlacement.POINT;let l=s.getLayoutValue("icon-rotation-alignment",n);l===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.AUTO&&(l=i?_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.MAP:_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT);let a=s.getLayoutValue("text-rotation-alignment",n);a===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.AUTO&&(a=i?_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.MAP:_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.RotationAlignment.VIEWPORT);const c=s.getPaintValue("icon-translate",n),h=s.getPaintValue("icon-translate-anchor",n),u=s.getPaintValue("text-translate",n),d=s.getPaintValue("text-translate-anchor",n),y={iconAllowOverlap:s.getLayoutValue("icon-allow-overlap",n),iconIgnorePlacement:s.getLayoutValue("icon-ignore-placement",n),textAllowOverlap:s.getLayoutValue("text-allow-overlap",n),textIgnorePlacement:s.getLayoutValue("text-ignore-placement",n),iconRotationAlignment:l,textRotationAlignment:a,iconTranslateAnchor:h,iconTranslate:c,textTranslateAnchor:d,textTranslate:u};return this._styleProps.set(e,y),y}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/Rect.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t=0,h=0,i=0,s=0){this.x=t,this.y=h,this.width=i,this.height=s}get isEmpty(){return this.width<=0||this.height<=0}union(t){this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.width=Math.max(this.width,t.width),this.height=Math.max(this.height,t.height)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/TileInfo.js */ "./node_modules/@arcgis/core/layers/support/TileInfo.js");
/* harmony import */ var _TileInfoView_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t extends _TileInfoView_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(e){const l=_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].pool.acquire(e),t=0===l.level?null:_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].getId(l.level-1,l.row>>1,l.col>>1,l.world);return _TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].pool.release(l),t}getTileCoverage(e,l,s=!0,t){const o=super.getTileCoverage(e,l,s,t);if(!o)return o;const i=1<<o.lodInfo.level;return o.spans=o.spans.filter((e=>e.row>=0&&e.row<i)),o}scaleToLevel(e){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[e])return this._levelByScale[e];{const l=this._fullCacheLodInfos;if(e>l[0].scale)return l[0].level;let s,t;for(let o=0;o<l.length-1;o++)if(t=l[o+1],e>t.scale)return s=l[o],s.level+(s.scale-e)/(s.scale-t.scale);return l[l.length-1].level}}_initializeFullCacheLODs(l){let s;if(0===l[0].level)s=l.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})));else{const l=this.tileInfo.size[0],t=this.tileInfo.spatialReference;s=_layers_support_TileInfo_js__WEBPACK_IMPORTED_MODULE_0__["default"].create({size:l,spatialReference:t}).lods.map((e=>({level:e.level,resolution:e.resolution,scale:e.scale})))}for(let e=0;e<s.length;e++)this._levelByScale[s[e].scale]=s[e].level;this._fullCacheLodInfos=s}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2VuZ2luZV92ZWN0b3JUaWxlc19UaWxlSGFuZGxlcl9qcy1ub2RlX21vZHVsLWYzYjczZS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDNFEsUUFBUSxtQkFBbUIsc0dBQXNHLGdIQUFnSCw0REFBQyx1R0FBdUcsbUJBQW1CLGlEQUFpRCxrQkFBa0Isd0JBQXdCLFNBQVMsV0FBVyxzQkFBc0IsWUFBWSxpRUFBaUUsS0FBSyxtQ0FBbUMsOEJBQThCLFFBQVEsOEJBQThCLEdBQUcsd0NBQXdDLDZCQUE2QiwwQkFBMEIsUUFBUSx3QkFBd0Isa0JBQWtCLGFBQWEsTUFBTSxNQUFNLHlEQUF5RCxTQUFTLHdCQUF3Qix3QkFBd0Isa0JBQWtCLE1BQU0scUJBQXFCLHNEQUFDLFVBQVUsS0FBSyx1Q0FBdUMsZ0NBQWdDLCtUQUErVCw0REFBQyxnRUFBZ0Usc0RBQXNELFFBQVEsaUJBQWlCLElBQUksS0FBSyxpQ0FBaUMsWUFBWSxJQUFJLHdCQUF3QixNQUFNLHFEQUFxRCxPQUFPLHNEQUFzRCxxQ0FBcUMsU0FBUyxHQUFHLGdCQUFnQixpQ0FBaUMsNEJBQTRCLGVBQWUsTUFBTSxtRUFBbUUseUNBQXlDLFFBQVEsWUFBWSxXQUFXLHFDQUFxQyxVQUFVLGFBQWEsdUNBQXVDLGdCQUFnQix1QkFBdUIsWUFBWSwwRUFBQyxDQUFDLGNBQWMsd0RBQUMsa0JBQWtCLDREQUFDLDZFQUE2RSxzREFBQyw2Q0FBNkMsMEJBQTBCLDRHQUE0RyxVQUFVLGVBQWUsVUFBVSw0Q0FBNEMsNkNBQTZDLHlCQUE4Qzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcjNGO0FBQ0E7QUFDQTtBQUNBO0FBQzZFLFFBQVEsZUFBZSwwREFBMEQsZ0JBQWdCLFFBQVEsS0FBSyxTQUFTLGlCQUFpQixRQUFRLHVCQUF1QixLQUFLLFNBQVMsaUJBQWlCLFFBQVEsdUJB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QUFzQyx1QkFBdUIsNEJBQTRCLHVDQUF1Qyw0SEFBNEgsWUFBWSxLQUFLLGdCQUFnQixLQUFLLEtBQUssdUNBQXVDLFNBQVMsa0JBQWtCLGdDQUFnQyxjQUFjLDRHQUE0RyxzRUFBQyxPQUFPLG9EQUFvRCxJQUFJLHdFQUFDLFlBQVksd0VBQUMsS0FBSyx3RUFBQyxXQUFXLG9EQUFvRCxJQUFJLHdFQUFDLFlBQVksd0VBQUMsS0FBSyx3RUFBQyxXQUFXLCtLQUErSyxpWEFBaVgsb0NBQThEOzs7Ozs7Ozs7Ozs7Ozs7QUNKM3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2QkFBNkIsNkNBQTZDLGNBQWMscUNBQXFDLFNBQVMsNElBQWlLOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKL1M7QUFDQTtBQUNBO0FBQ0E7QUFDZ0gsZ0JBQWdCLHdEQUFDLENBQUMsY0FBYyx1RUFBdUUsbUJBQW1CLFFBQVEsbURBQUMsb0NBQW9DLG1EQUFDLDRDQUE0QyxPQUFPLG1EQUFDLG1CQUFtQiw0QkFBNEIsdUNBQXVDLGVBQWUsMkJBQTJCLHdEQUF3RCxnQkFBZ0IsOEhBQThILGdDQUFnQyxrQ0FBa0MsUUFBUSxZQUFZLGFBQWEsOEVBQThFLDRCQUE0Qiw0QkFBNEIsTUFBTSxnQ0FBZ0Msb0RBQW9ELElBQUksS0FBSywrREFBK0QsRUFBRSxtRUFBQyxTQUFTLDBCQUEwQixpQkFBaUIsb0RBQW9ELElBQUksWUFBWSxXQUFXLDhDQUE4QywyQkFBZ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL0dseXBoTW9zYWljLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvR2x5cGhTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9SZWN0YW5nbGVCaW5QYWNrLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvU3ByaXRlTW9zYWljLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvVGlsZUhhbmRsZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9kZWNsdXR0ZXJpbmcvU3ltYm9sRGVjbHV0dGVyZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9kZWNsdXR0ZXJpbmcvU3ltYm9sUmVwb3NpdG9yeS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3ZlY3RvclRpbGVzL2RlY2x1dHRlcmluZy9qb2JzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvd2ViZ2wvUmVjdC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvdGlsaW5nL1RpbGVJbmZvVmlld1BPVC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHQgZnJvbVwiLi9SZWN0YW5nbGVCaW5QYWNrLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vd2ViZ2wvUmVjdC5qc1wiO2ltcG9ydHtQaXhlbEZvcm1hdCBhcyBzLFRleHR1cmVXcmFwTW9kZSBhcyBpfWZyb21cIi4uLy4uLy4uL3dlYmdsL2VudW1zLmpzXCI7aW1wb3J0e1RleHR1cmUgYXMgaH1mcm9tXCIuLi8uLi8uLi93ZWJnbC9UZXh0dXJlLmpzXCI7aW1wb3J0e1RleHR1cmVEZXNjcmlwdG9yIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvVGV4dHVyZURlc2NyaXB0b3IuanNcIjtjbGFzcyBue2NvbnN0cnVjdG9yKGUscyxpKXt0aGlzLndpZHRoPTAsdGhpcy5oZWlnaHQ9MCx0aGlzLl9kaXJ0aWVzPVtdLHRoaXMuX2dseXBoRGF0YT1bXSx0aGlzLl9jdXJyZW50UGFnZT0wLHRoaXMuX2dseXBoSW5kZXg9e30sdGhpcy5fdGV4dHVyZXM9W10sdGhpcy5fcmFuZ2VQcm9taXNlcz1uZXcgTWFwLHRoaXMud2lkdGg9ZSx0aGlzLmhlaWdodD1zLHRoaXMuX2dseXBoU291cmNlPWksdGhpcy5fYmluUGFjaz1uZXcgdChlLTQscy00KSx0aGlzLl9nbHlwaERhdGEucHVzaChuZXcgVWludDhBcnJheShlKnMpKSx0aGlzLl9kaXJ0aWVzLnB1c2goITApLHRoaXMuX3RleHR1cmVzLnB1c2godm9pZCAwKX1nZXRHbHlwaEl0ZW1zKHMsaSl7Y29uc3QgaD1bXSxyPXRoaXMuX2dseXBoU291cmNlLG49bmV3IFNldCxvPTEvMjU2O2Zvcihjb25zdCB0IG9mIGkpe2NvbnN0IGU9TWF0aC5mbG9vcih0Km8pO24uYWRkKGUpfWNvbnN0IGE9W107cmV0dXJuIG4uZm9yRWFjaCgodD0+e2NvbnN0IGU9cyt0O2lmKHRoaXMuX3JhbmdlUHJvbWlzZXMuaGFzKGUpKWEucHVzaCh0aGlzLl9yYW5nZVByb21pc2VzLmdldChlKSk7ZWxzZXtjb25zdCBpPXIuZ2V0UmFuZ2Uocyx0KS50aGVuKCgoKT0+e3RoaXMuX3JhbmdlUHJvbWlzZXMuZGVsZXRlKGUpfSksKCgpPT57dGhpcy5fcmFuZ2VQcm9taXNlcy5kZWxldGUoZSl9KSk7dGhpcy5fcmFuZ2VQcm9taXNlcy5zZXQoZSxpKSxhLnB1c2goaSl9fSkpLFByb21pc2UuYWxsKGEpLnRoZW4oKCgpPT57bGV0IG49dGhpcy5fZ2x5cGhJbmRleFtzXTtufHwobj17fSx0aGlzLl9nbHlwaEluZGV4W3NdPW4pO2Zvcihjb25zdCBvIG9mIGkpe2NvbnN0IGk9bltvXTtpZihpKXtoW29dPXtzZGY6ITAscmVjdDppLnJlY3QsbWV0cmljczppLm1ldHJpY3MscGFnZTppLnBhZ2UsY29kZTpvfTtjb250aW51ZX1jb25zdCBhPXIuZ2V0R2x5cGgocyxvKTtpZighYT8ubWV0cmljcyljb250aW51ZTtjb25zdCBsPWEubWV0cmljcztsZXQgYztpZigwPT09bC53aWR0aCljPW5ldyBlKDAsMCwwLDApO2Vsc2V7Y29uc3QgZT0zLHM9bC53aWR0aCsyKmUsaT1sLmhlaWdodCsyKmU7bGV0IGg9cyU0PzQtcyU0OjQscj1pJTQ/NC1pJTQ6NDsxPT09aCYmKGg9NSksMT09PXImJihyPTUpLGM9dGhpcy5fYmluUGFjay5hbGxvY2F0ZShzK2gsaStyKSxjLmlzRW1wdHkmJih0aGlzLl9kaXJ0aWVzW3RoaXMuX2N1cnJlbnRQYWdlXXx8KHRoaXMuX2dseXBoRGF0YVt0aGlzLl9jdXJyZW50UGFnZV09bnVsbCksdGhpcy5fY3VycmVudFBhZ2U9dGhpcy5fZ2x5cGhEYXRhLmxlbmd0aCx0aGlzLl9nbHlwaERhdGEucHVzaChuZXcgVWludDhBcnJheSh0aGlzLndpZHRoKnRoaXMuaGVpZ2h0KSksdGhpcy5fZGlydGllcy5wdXNoKCEwKSx0aGlzLl90ZXh0dXJlcy5wdXNoKHZvaWQgMCksdGhpcy5fYmluUGFjaz1uZXcgdCh0aGlzLndpZHRoLTQsdGhpcy5oZWlnaHQtNCksYz10aGlzLl9iaW5QYWNrLmFsbG9jYXRlKHMraCxpK3IpKTtjb25zdCBuPXRoaXMuX2dseXBoRGF0YVt0aGlzLl9jdXJyZW50UGFnZV0sbz1hLmJpdG1hcDtsZXQgZyxfO2lmKG8pZm9yKGxldCB0PTA7dDxpO3QrKyl7Zz1zKnQsXz10aGlzLndpZHRoKihjLnkrdCsxKStjLng7Zm9yKGxldCB0PTA7dDxzO3QrKyluW18rdCsxXT1vLmF0KGcrdCl9fW5bb109e3JlY3Q6YyxtZXRyaWNzOmwsdGlsZUlEczpudWxsLHBhZ2U6dGhpcy5fY3VycmVudFBhZ2V9LGhbb109e3NkZjohMCxyZWN0OmMsbWV0cmljczpsLHBhZ2U6dGhpcy5fY3VycmVudFBhZ2UsY29kZTpvfSx0aGlzLl9kaXJ0aWVzW3RoaXMuX2N1cnJlbnRQYWdlXT0hMH1yZXR1cm4gaH0pKX1yZW1vdmVHbHlwaHModCl7Zm9yKGNvbnN0IGUgaW4gdGhpcy5fZ2x5cGhJbmRleCl7Y29uc3Qgcz10aGlzLl9nbHlwaEluZGV4W2VdO2lmKCFzKWNvbnRpbnVlO2xldCBpO2Zvcihjb25zdCBlIGluIHMpaWYoaT1zW2VdLGkudGlsZUlEcy5kZWxldGUodCksMD09PWkudGlsZUlEcy5zaXplKXtjb25zdCB0PXRoaXMuX2dseXBoRGF0YVtpLnBhZ2VdLGg9aS5yZWN0O2xldCByLG47Zm9yKGxldCBlPTA7ZTxoLmhlaWdodDtlKyspZm9yKHI9dGhpcy53aWR0aCooaC55K2UpK2gueCxuPTA7bjxoLndpZHRoO24rKyl0W3Irbl09MDtkZWxldGUgc1tlXSx0aGlzLl9kaXJ0aWVzW2kucGFnZV09ITB9fX1iaW5kKHQsZSxuLG89MCl7aWYoIXRoaXMuX3RleHR1cmVzW25dKXtjb25zdCBlPW5ldyByO2UucGl4ZWxGb3JtYXQ9cy5BTFBIQSxlLndyYXBNb2RlPWkuQ0xBTVBfVE9fRURHRSxlLndpZHRoPXRoaXMud2lkdGgsZS5oZWlnaHQ9dGhpcy5oZWlnaHQsdGhpcy5fdGV4dHVyZXNbbl09bmV3IGgodCxlLG5ldyBVaW50OEFycmF5KHRoaXMud2lkdGgqdGhpcy5oZWlnaHQpKX1jb25zdCBhPXRoaXMuX3RleHR1cmVzW25dO2Euc2V0U2FtcGxpbmdNb2RlKGUpLHRoaXMuX2RpcnRpZXNbbl0mJmEuc2V0RGF0YSh0aGlzLl9nbHlwaERhdGFbbl0pLHQuYmluZFRleHR1cmUoYSxvKSx0aGlzLl9kaXJ0aWVzW25dPSExfWRlc3Ryb3koKXt0aGlzLmRpc3Bvc2UoKX1kaXNwb3NlKCl7dGhpcy5fZ2x5cGhEYXRhLmxlbmd0aD0wLHRoaXMuX2JpblBhY2s9bnVsbDtmb3IoY29uc3QgdCBvZiB0aGlzLl90ZXh0dXJlcyl0JiZ0LmRpc3Bvc2UoKTt0aGlzLl90ZXh0dXJlcy5sZW5ndGg9MH19ZXhwb3J0e24gYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vcmVxdWVzdC5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcGJmLmpzXCI7Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLl9tZXRyaWNzPVtdLCF0KXJldHVybiB2b2lkKHRoaXMuX2FsbEJpdG1hcHM9bnVsbCk7Y29uc3QgZT1uZXcgTWFwO2xldCBzPTA7Zm9yKDt0Lm5leHQoKTspc3dpdGNoKHQudGFnKCkpe2Nhc2UgMTp7Y29uc3QgYT10LmdldE1lc3NhZ2UoKTtmb3IoO2EubmV4dCgpOylzd2l0Y2goYS50YWcoKSl7Y2FzZSAzOntjb25zdCB0PWEuZ2V0TWVzc2FnZSgpO2xldCByLG4saSxjLG8sZyxoO2Zvcig7dC5uZXh0KCk7KXN3aXRjaCh0LnRhZygpKXtjYXNlIDE6cj10LmdldFVJbnQzMigpO2JyZWFrO2Nhc2UgMjpuPXQuZ2V0Qnl0ZXMoKTticmVhaztjYXNlIDM6aT10LmdldFVJbnQzMigpO2JyZWFrO2Nhc2UgNDpjPXQuZ2V0VUludDMyKCk7YnJlYWs7Y2FzZSA1Om89dC5nZXRTSW50MzIoKTticmVhaztjYXNlIDY6Zz10LmdldFNJbnQzMigpO2JyZWFrO2Nhc2UgNzpoPXQuZ2V0VUludDMyKCk7YnJlYWs7ZGVmYXVsdDp0LnNraXAoKX1pZih0LnJlbGVhc2UoKSxyKXtjb25zdCB0PW4/Lmxlbmd0aD8/MDt0aGlzLl9tZXRyaWNzW3JdPXt3aWR0aDppLGhlaWdodDpjLGxlZnQ6byx0b3A6ZyxhZHZhbmNlOmgsc3RhcnRPZmZzZXQ6cyxsZW5ndGg6dH0sZS5zZXQocixuKSxzKz10fWJyZWFrfWRlZmF1bHQ6YS5za2lwKCl9YS5yZWxlYXNlKCk7YnJlYWt9ZGVmYXVsdDp0LnNraXAoKX1jb25zdCBhPW5ldyBVaW50OEFycmF5KHMpLHI9dGhpcy5fbWV0cmljcztmb3IoY29uc3RbbixpXW9mIGUpe2NvbnN0e3N0YXJ0T2Zmc2V0OnQsbGVuZ3RoOmV9PXJbbl07aWYoaSlmb3IobGV0IHM9MDtzPGU7KytzKWFbdCtzXT1pW3NdfXRoaXMuX2FsbEJpdG1hcHM9YX1nZXRNZXRyaWNzKHQpe3JldHVybiB0aGlzLl9tZXRyaWNzW3RdfWdldEJpdG1hcCh0KXtpZighdGhpcy5fYWxsQml0bWFwcylyZXR1cm47Y29uc3QgZT10aGlzLl9tZXRyaWNzW3RdO2lmKHZvaWQgMD09PWUpcmV0dXJuO2NvbnN0e3N0YXJ0T2Zmc2V0OnMsbGVuZ3RoOmF9PWU7cmV0dXJuIDAhPT1hP25ldyBuKHRoaXMuX2FsbEJpdG1hcHMscyxhKTp2b2lkIDB9fWNsYXNzIGF7Y29uc3RydWN0b3IoKXt0aGlzLl9yYW5nZXM9W119Z2V0IHJhbmdlcygpe3JldHVybiB0aGlzLl9yYW5nZXN9Z2V0UmFuZ2UodCl7cmV0dXJuIHRoaXMuX3Jhbmdlc1t0XX1hZGRSYW5nZSh0LGUpe3RoaXMuX3Jhbmdlc1t0XT1lfX1jbGFzcyBye2NvbnN0cnVjdG9yKHQpe3RoaXMuX2dseXBoSW5mbz17fSx0aGlzLl9iYXNlVVJMPXR9Z2V0UmFuZ2UoYSxyKXtjb25zdCBuPXRoaXMuX2dldEZvbnRTdGFjayhhKTtpZihuLmdldFJhbmdlKHIpKXJldHVybiBQcm9taXNlLnJlc29sdmUoKTtjb25zdCBpPTI1NipyLGM9aSsyNTU7aWYodGhpcy5fYmFzZVVSTCl7Y29uc3Qgbz10aGlzLl9iYXNlVVJMLnJlcGxhY2UoXCJ7Zm9udHN0YWNrfVwiLGEpLnJlcGxhY2UoXCJ7cmFuZ2V9XCIsaStcIi1cIitjKTtyZXR1cm4gdChvLHtyZXNwb25zZVR5cGU6XCJhcnJheS1idWZmZXJcIn0pLnRoZW4oKHQ9PntuLmFkZFJhbmdlKHIsbmV3IHMobmV3IGUobmV3IFVpbnQ4QXJyYXkodC5kYXRhKSxuZXcgRGF0YVZpZXcodC5kYXRhKSkpKX0pKS5jYXRjaCgoKCk9PntuLmFkZFJhbmdlKHIsbmV3IHMpfSkpfXJldHVybiBuLmFkZFJhbmdlKHIsbmV3IHMpLFByb21pc2UucmVzb2x2ZSgpfWdldEdseXBoKHQsZSl7Y29uc3Qgcz10aGlzLl9nZXRGb250U3RhY2sodCk7aWYoIXMpcmV0dXJuO2NvbnN0IGE9TWF0aC5mbG9vcihlLzI1Nikscj1zLmdldFJhbmdlKGEpO3JldHVybiByP3ttZXRyaWNzOnIuZ2V0TWV0cmljcyhlKSxiaXRtYXA6ci5nZXRCaXRtYXAoZSl9OnZvaWQgMH1fZ2V0Rm9udFN0YWNrKHQpe2xldCBlPXRoaXMuX2dseXBoSW5mb1t0XTtyZXR1cm4gZXx8KGU9dGhpcy5fZ2x5cGhJbmZvW3RdPW5ldyBhKSxlfX1jbGFzcyBue2NvbnN0cnVjdG9yKHQsZSxzKXt0aGlzLl9hcnJheT10LHRoaXMuX3N0YXJ0PWUsdGhpcy5sZW5ndGg9c31hdCh0KXtyZXR1cm4gMDw9dCYmdDx0aGlzLmxlbmd0aD90aGlzLl9hcnJheVt0aGlzLl9zdGFydCt0XTp2b2lkIDB9fWV4cG9ydHtyIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBoIGZyb21cIi4uL3dlYmdsL1JlY3QuanNcIjtjbGFzcyBle2NvbnN0cnVjdG9yKGUsdCl7dGhpcy5fd2lkdGg9MCx0aGlzLl9oZWlnaHQ9MCx0aGlzLl9mcmVlPVtdLHRoaXMuX3dpZHRoPWUsdGhpcy5faGVpZ2h0PXQsdGhpcy5fZnJlZS5wdXNoKG5ldyBoKDAsMCxlLHQpKX1nZXQgd2lkdGgoKXtyZXR1cm4gdGhpcy5fd2lkdGh9Z2V0IGhlaWdodCgpe3JldHVybiB0aGlzLl9oZWlnaHR9YWxsb2NhdGUoZSx0KXtpZihlPnRoaXMuX3dpZHRofHx0PnRoaXMuX2hlaWdodClyZXR1cm4gbmV3IGg7bGV0IGk9bnVsbCxzPS0xO2ZvcihsZXQgaD0wO2g8dGhpcy5fZnJlZS5sZW5ndGg7KytoKXtjb25zdCB3PXRoaXMuX2ZyZWVbaF07ZTw9dy53aWR0aCYmdDw9dy5oZWlnaHQmJihudWxsPT09aXx8dy55PD1pLnkmJncueDw9aS54KSYmKGk9dyxzPWgpfXJldHVybiBudWxsPT09aT9uZXcgaDoodGhpcy5fZnJlZS5zcGxpY2UocywxKSxpLndpZHRoPGkuaGVpZ2h0PyhpLndpZHRoPmUmJnRoaXMuX2ZyZWUucHVzaChuZXcgaChpLngrZSxpLnksaS53aWR0aC1lLHQpKSxpLmhlaWdodD50JiZ0aGlzLl9mcmVlLnB1c2gobmV3IGgoaS54LGkueSt0LGkud2lkdGgsaS5oZWlnaHQtdCkpKTooaS53aWR0aD5lJiZ0aGlzLl9mcmVlLnB1c2gobmV3IGgoaS54K2UsaS55LGkud2lkdGgtZSxpLmhlaWdodCkpLGkuaGVpZ2h0PnQmJnRoaXMuX2ZyZWUucHVzaChuZXcgaChpLngsaS55K3QsZSxpLmhlaWdodC10KSkpLG5ldyBoKGkueCxpLnksZSx0KSl9cmVsZWFzZShoKXtmb3IobGV0IGU9MDtlPHRoaXMuX2ZyZWUubGVuZ3RoOysrZSl7Y29uc3QgdD10aGlzLl9mcmVlW2VdO2lmKHQueT09PWgueSYmdC5oZWlnaHQ9PT1oLmhlaWdodCYmdC54K3Qud2lkdGg9PT1oLngpdC53aWR0aCs9aC53aWR0aDtlbHNlIGlmKHQueD09PWgueCYmdC53aWR0aD09PWgud2lkdGgmJnQueSt0LmhlaWdodD09PWgueSl0LmhlaWdodCs9aC5oZWlnaHQ7ZWxzZSBpZihoLnk9PT10LnkmJmguaGVpZ2h0PT09dC5oZWlnaHQmJmgueCtoLndpZHRoPT09dC54KXQueD1oLngsdC53aWR0aCs9aC53aWR0aDtlbHNle2lmKGgueCE9PXQueHx8aC53aWR0aCE9PXQud2lkdGh8fGgueStoLmhlaWdodCE9PXQueSljb250aW51ZTt0Lnk9aC55LHQuaGVpZ2h0Kz1oLmhlaWdodH10aGlzLl9mcmVlLnNwbGljZShlLDEpLHRoaXMucmVsZWFzZShoKX10aGlzLl9mcmVlLnB1c2goaCl9fWV4cG9ydHtlIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtyYXN0ZXJpemVEYXNoIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vc3ltYm9scy9jaW0vcmFzdGVyaXppbmdVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4vUmVjdGFuZ2xlQmluUGFjay5qc1wiO2ltcG9ydCBlIGZyb21cIi4uL3dlYmdsL1JlY3QuanNcIjtpbXBvcnR7VGV4dHVyZVdyYXBNb2RlIGFzIHN9ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyBofWZyb21cIi4uLy4uLy4uL3dlYmdsL1RleHR1cmUuanNcIjtpbXBvcnR7VGV4dHVyZURlc2NyaXB0b3IgYXMgYX1mcm9tXCIuLi8uLi8uLi93ZWJnbC9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2NvbnN0IHI9XCJkYXNoYXJyYXktXCI7Y2xhc3Mgb3tjb25zdHJ1Y3Rvcih0LGUscz0wKXt0aGlzLl9zaXplPVtdLHRoaXMuX21vc2FpY3NEYXRhPVtdLHRoaXMuX3RleHR1cmVzPVtdLHRoaXMuX2RpcnRpZXM9W10sdGhpcy5fbWF4SXRlbVNpemU9MCx0aGlzLl9jdXJyZW50UGFnZT0wLHRoaXMuX3BhZ2VXaWR0aD0wLHRoaXMuX3BhZ2VIZWlnaHQ9MCx0aGlzLl9tb3NhaWNSZWN0cz17fSx0aGlzLnBpeGVsUmF0aW89MSwodDw9MHx8ZTw9MCkmJmNvbnNvbGUuZXJyb3IoXCJTcHJpdGVzIG1vc2FpYyBkZWZhdWx0V2lkdGggYW5kIGRlZmF1bHRIZWlnaHQgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybyFcIiksdGhpcy5fcGFnZVdpZHRoPXQsdGhpcy5fcGFnZUhlaWdodD1lLHM+MCYmKHRoaXMuX21heEl0ZW1TaXplPXMpLHRoaXMuX2JpblBhY2s9bmV3IGkodC00LGUtNCl9ZGVzdHJveSgpe3RoaXMuZGlzcG9zZSgpfWRpc3Bvc2UoKXt0aGlzLl9iaW5QYWNrPW51bGwsdGhpcy5fbW9zYWljc0RhdGEubGVuZ3RoPTAsdGhpcy5fbW9zYWljUmVjdHM9e307Zm9yKGNvbnN0IHQgb2YgdGhpcy5fdGV4dHVyZXMpdCYmdC5kaXNwb3NlKCk7dGhpcy5fdGV4dHVyZXMubGVuZ3RoPTB9Z2V0V2lkdGgodCl7cmV0dXJuIHQ+PXRoaXMuX3NpemUubGVuZ3RoPy0xOnRoaXMuX3NpemVbdF1bMF19Z2V0SGVpZ2h0KHQpe3JldHVybiB0Pj10aGlzLl9zaXplLmxlbmd0aD8tMTp0aGlzLl9zaXplW3RdWzFdfWdldFBhZ2VTaXplKHQpe3JldHVybiB0Pj10aGlzLl9zaXplLmxlbmd0aD9udWxsOnRoaXMuX3NpemVbdF19c2V0U3ByaXRlU291cmNlKHQpe2lmKHRoaXMuZGlzcG9zZSgpLHRoaXMucGl4ZWxSYXRpbz10LmRldmljZVBpeGVsUmF0aW8sMD09PXRoaXMuX21vc2FpY3NEYXRhLmxlbmd0aCl7dGhpcy5fYmluUGFjaz1uZXcgaSh0aGlzLl9wYWdlV2lkdGgtNCx0aGlzLl9wYWdlSGVpZ2h0LTQpO2NvbnN0IHQ9TWF0aC5mbG9vcih0aGlzLl9wYWdlV2lkdGgpLGU9TWF0aC5mbG9vcih0aGlzLl9wYWdlSGVpZ2h0KSxzPW5ldyBVaW50MzJBcnJheSh0KmUpO3RoaXMuX21vc2FpY3NEYXRhWzBdPXMsdGhpcy5fZGlydGllcy5wdXNoKCEwKSx0aGlzLl9zaXplLnB1c2goW3RoaXMuX3BhZ2VXaWR0aCx0aGlzLl9wYWdlSGVpZ2h0XSksdGhpcy5fdGV4dHVyZXMucHVzaCh2b2lkIDApfXRoaXMuX3Nwcml0ZXM9dH1nZXRTcHJpdGVJdGVtKHQsaT0hMSl7bGV0IGUscyxoPXRoaXMuX21vc2FpY1JlY3RzW3RdO2lmKGgpcmV0dXJuIGg7aWYoIXRoaXMuX3Nwcml0ZXN8fFwibG9hZGVkXCIhPT10aGlzLl9zcHJpdGVzLmxvYWRTdGF0dXMpcmV0dXJuIG51bGw7aWYodCYmdC5zdGFydHNXaXRoKHIpPyhbZSxzXT10aGlzLl9yYXN0ZXJpemVEYXNoKHQpLGk9ITApOmU9dGhpcy5fc3ByaXRlcy5nZXRTcHJpdGVJbmZvKHQpLCFlPy53aWR0aHx8IWUuaGVpZ2h0fHxlLndpZHRoPDB8fGUuaGVpZ2h0PDApcmV0dXJuIG51bGw7Y29uc3QgYT1lLndpZHRoLG89ZS5oZWlnaHQsW24sXyxnXT10aGlzLl9hbGxvY2F0ZUltYWdlKGEsbyk7cmV0dXJuIG4ud2lkdGg8PTA/bnVsbDoodGhpcy5fY29weShuLGUsXyxnLGkscyksaD17cmVjdDpuLHdpZHRoOmEsaGVpZ2h0Om8sc2RmOmUuc2RmLHNpbXBsZVBhdHRlcm46ITEscGl4ZWxSYXRpbzplLnBpeGVsUmF0aW8scGFnZTpffSx0aGlzLl9tb3NhaWNSZWN0c1t0XT1oLGgpfWdldFNwcml0ZUl0ZW1zKHQpe2NvbnN0IGk9e307Zm9yKGNvbnN0IGUgb2YgdClpW2UubmFtZV09dGhpcy5nZXRTcHJpdGVJdGVtKGUubmFtZSxlLnJlcGVhdCk7cmV0dXJuIGl9Z2V0TW9zYWljSXRlbVBvc2l0aW9uKHQsaSl7Y29uc3QgZT10aGlzLmdldFNwcml0ZUl0ZW0odCxpKSxzPWUmJmUucmVjdDtpZighcylyZXR1cm4gbnVsbDtzLndpZHRoPWUud2lkdGgscy5oZWlnaHQ9ZS5oZWlnaHQ7Y29uc3QgaD1lLndpZHRoLGE9ZS5oZWlnaHQscj0yO3JldHVybnt0bDpbcy54K3Iscy55K3JdLGJyOltzLngrcitoLHMueStyK2FdLHBhZ2U6ZS5wYWdlfX1iaW5kKHQsaSxlPTAscj0wKXtpZihlPj10aGlzLl9zaXplLmxlbmd0aHx8ZT49dGhpcy5fbW9zYWljc0RhdGEubGVuZ3RoKXJldHVybjtpZighdGhpcy5fdGV4dHVyZXNbZV0pe2NvbnN0IGk9bmV3IGE7aS53cmFwTW9kZT1zLkNMQU1QX1RPX0VER0UsaS53aWR0aD10aGlzLl9zaXplW2VdWzBdLGkuaGVpZ2h0PXRoaXMuX3NpemVbZV1bMV0sdGhpcy5fdGV4dHVyZXNbZV09bmV3IGgodCxpLG5ldyBVaW50OEFycmF5KHRoaXMuX21vc2FpY3NEYXRhW2VdLmJ1ZmZlcikpfWNvbnN0IG89dGhpcy5fdGV4dHVyZXNbZV07by5zZXRTYW1wbGluZ01vZGUoaSksdGhpcy5fZGlydGllc1tlXSYmby5zZXREYXRhKG5ldyBVaW50OEFycmF5KHRoaXMuX21vc2FpY3NEYXRhW2VdLmJ1ZmZlcikpLHQuYmluZFRleHR1cmUobyxyKSx0aGlzLl9kaXJ0aWVzW2VdPSExfXN0YXRpYyBfY29weUJpdHModCxpLGUscyxoLGEscixvLG4sXyxnKXtsZXQgYz1zKmkrZSxsPW8qYStyO2lmKGcpe2wtPWE7Zm9yKGxldCByPS0xO3I8PV87cisrLGM9KChyK18pJV8rcykqaStlLGwrPWEpZm9yKGxldCBpPS0xO2k8PW47aSsrKWhbbCtpXT10W2MrKGkrbiklbl19ZWxzZSBmb3IobGV0IHA9MDtwPF87cCsrKXtmb3IobGV0IGk9MDtpPG47aSsrKWhbbCtpXT10W2MraV07Yys9aSxsKz1hfX1fY29weSh0LGksZSxzLGgsYSl7aWYoIXRoaXMuX3Nwcml0ZXN8fFwibG9hZGVkXCIhPT10aGlzLl9zcHJpdGVzLmxvYWRTdGF0dXN8fGU+PXRoaXMuX21vc2FpY3NEYXRhLmxlbmd0aClyZXR1cm47Y29uc3Qgcj1uZXcgVWludDMyQXJyYXkoYT9hLmJ1ZmZlcjp0aGlzLl9zcHJpdGVzLmltYWdlLmJ1ZmZlciksbj10aGlzLl9tb3NhaWNzRGF0YVtlXTtuJiZyfHxjb25zb2xlLmVycm9yKFwiU291cmNlIG9yIHRhcmdldCBpbWFnZXMgYXJlIHVuaW5pdGlhbGl6ZWQhXCIpO2NvbnN0IF89MixnPWE/aS53aWR0aDp0aGlzLl9zcHJpdGVzLndpZHRoO28uX2NvcHlCaXRzKHIsZyxpLngsaS55LG4sc1swXSx0LngrXyx0LnkrXyxpLndpZHRoLGkuaGVpZ2h0LGgpLHRoaXMuX2RpcnRpZXNbZV09ITB9X2FsbG9jYXRlSW1hZ2UodCxzKXt0Kz0yLHMrPTI7Y29uc3QgaD1NYXRoLm1heCh0LHMpO2lmKHRoaXMuX21heEl0ZW1TaXplJiZ0aGlzLl9tYXhJdGVtU2l6ZTxoKXtjb25zdCBpPW5ldyBlKDAsMCx0LHMpO3JldHVybiB0aGlzLl9tb3NhaWNzRGF0YS5wdXNoKG5ldyBVaW50MzJBcnJheSh0KnMpKSx0aGlzLl9kaXJ0aWVzLnB1c2goITApLHRoaXMuX3NpemUucHVzaChbdCxzXSksdGhpcy5fdGV4dHVyZXMucHVzaCh2b2lkIDApLFtpLHRoaXMuX21vc2FpY3NEYXRhLmxlbmd0aC0xLFt0LHNdXX1sZXQgYT10JTQ/NC10JTQ6NCxyPXMlND80LXMlNDo0OzE9PT1hJiYoYT01KSwxPT09ciYmKHI9NSk7Y29uc3Qgbz10aGlzLl9iaW5QYWNrLmFsbG9jYXRlKHQrYSxzK3IpO3JldHVybiBvLndpZHRoPD0wPyh0aGlzLl9kaXJ0aWVzW3RoaXMuX2N1cnJlbnRQYWdlXXx8KHRoaXMuX21vc2FpY3NEYXRhW3RoaXMuX2N1cnJlbnRQYWdlXT1udWxsKSx0aGlzLl9jdXJyZW50UGFnZT10aGlzLl9tb3NhaWNzRGF0YS5sZW5ndGgsdGhpcy5fbW9zYWljc0RhdGEucHVzaChuZXcgVWludDMyQXJyYXkodGhpcy5fcGFnZVdpZHRoKnRoaXMuX3BhZ2VIZWlnaHQpKSx0aGlzLl9kaXJ0aWVzLnB1c2goITApLHRoaXMuX3NpemUucHVzaChbdGhpcy5fcGFnZVdpZHRoLHRoaXMuX3BhZ2VIZWlnaHRdKSx0aGlzLl90ZXh0dXJlcy5wdXNoKHZvaWQgMCksdGhpcy5fYmluUGFjaz1uZXcgaSh0aGlzLl9wYWdlV2lkdGgtNCx0aGlzLl9wYWdlSGVpZ2h0LTQpLHRoaXMuX2FsbG9jYXRlSW1hZ2UodCxzKSk6W28sdGhpcy5fY3VycmVudFBhZ2UsW3RoaXMuX3BhZ2VXaWR0aCx0aGlzLl9wYWdlSGVpZ2h0XV19X3Jhc3Rlcml6ZURhc2goaSl7Y29uc3QgZT0vXFxbKC4qPylcXF0vLHM9aS5tYXRjaChlKTtpZighcylyZXR1cm4gbnVsbDtjb25zdCBoPXNbMV0uc3BsaXQoXCIsXCIpLm1hcChOdW1iZXIpLGE9aS5zbGljZShpLmxhc3RJbmRleE9mKFwiLVwiKSsxKSxbcixvLG5dPXQoaCxhKTtyZXR1cm5be3g6MCx5OjAsd2lkdGg6byxoZWlnaHQ6bixzZGY6ITAscGl4ZWxSYXRpbzoxfSxuZXcgVWludDhBcnJheShyLmJ1ZmZlcildfX1leHBvcnR7byBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7YWJvcnRNYXliZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7dGhyb3dJZk5vdEFib3J0RXJyb3IgYXMgZSx0aHJvd0lmQWJvcnRFcnJvciBhcyBzLGlzQWJvcnRFcnJvciBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2FkZFF1ZXJ5UGFyYW1ldGVycyBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnR7b3BlbiBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvd29ya2Vycy93b3JrZXJzLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi9HbHlwaE1vc2FpYy5qc1wiO2ltcG9ydCBsIGZyb21cIi4vR2x5cGhTb3VyY2UuanNcIjtpbXBvcnQgYSBmcm9tXCIuL1Nwcml0ZU1vc2FpYy5qc1wiO2ltcG9ydCBjIGZyb21cIi4uLy4uL3RpbGluZy9UaWxlS2V5LmpzXCI7Y2xhc3MgdXtjb25zdHJ1Y3Rvcih0LGUscyl7dGhpcy5fbGF5ZXI9dCx0aGlzLl9zdHlsZVJlcG9zaXRvcnk9ZSx0aGlzLmRldmljZVBpeGVsUmF0aW89cyx0aGlzLl9zcHJpdGVNb3NhaWM9bnVsbCx0aGlzLl9nbHlwaE1vc2FpYz1udWxsLHRoaXMuX2Nvbm5lY3Rpb249bnVsbCx0aGlzLl9zcHJpdGVTb3VyY2VBYm9ydENvbnRyb2xsZXI9bnVsbCx0aGlzLl9zdGFydE9wdGlvbnNJbnB1dFNpZ25hbD1udWxsLHRoaXMuX2lucHV0U2lnbmFsRXZlbnRMaXN0ZW5lcj1udWxsfWRlc3Ryb3koKXt0aGlzLl9jb25uZWN0aW9uPy5jbG9zZSgpLHRoaXMuX2Nvbm5lY3Rpb249bnVsbCx0aGlzLl9zdHlsZVJlcG9zaXRvcnk9bnVsbCx0aGlzLl9sYXllcj1udWxsLHRoaXMuX3Nwcml0ZU1vc2FpYz8uZGVzdHJveSgpLHRoaXMuX3Nwcml0ZU1vc2FpYz1udWxsLHRoaXMuX2dseXBoTW9zYWljPW51bGwsdGhpcy5fc3ByaXRlU291cmNlQWJvcnRDb250cm9sbGVyPXQodGhpcy5fc3ByaXRlU291cmNlQWJvcnRDb250cm9sbGVyKSx0aGlzLl9zcHJpdGVTb3VyY2VQcm9taXNlPW51bGwsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyJiZ0aGlzLl9zdGFydE9wdGlvbnNJbnB1dFNpZ25hbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyKSx0aGlzLl9zdGFydE9wdGlvbnNJbnB1dFNpZ25hbD1udWxsLHRoaXMuX2lucHV0U2lnbmFsRXZlbnRMaXN0ZW5lcj1udWxsfWdldCBzcHJpdGVNb3NhaWMoKXtyZXR1cm4gdGhpcy5fc3ByaXRlU291cmNlUHJvbWlzZS50aGVuKCgoKT0+dGhpcy5fc3ByaXRlTW9zYWljKSl9Z2V0IGdseXBoTW9zYWljKCl7cmV0dXJuIHRoaXMuX2dseXBoTW9zYWljfWFzeW5jIHN0YXJ0KHQpe3RoaXMuX3JlcXVlc3RTcHJpdGUodCk7Y29uc3Qgcz10aGlzLl9sYXllci5jdXJyZW50U3R5bGVJbmZvLmdseXBoc1VybCxyPW5ldyBsKHM/aShzLHsuLi50aGlzLl9sYXllci5jdXN0b21QYXJhbWV0ZXJzLHRva2VuOnRoaXMuX2xheWVyLmFwaUtleX0pOm51bGwpO3RoaXMuX2dseXBoTW9zYWljPW5ldyBuKDEwMjQsMTAyNCxyKSx0aGlzLl9icm9hZGNhc3RQcm9taXNlPW8oXCJXb3JrZXJUaWxlSGFuZGxlclwiLHtjbGllbnQ6dGhpcyxzY2hlZHVsZTp0LnNjaGVkdWxlLHNpZ25hbDp0LnNpZ25hbH0pLnRoZW4oKHM9PntpZih0aGlzLl9sYXllciYmKHRoaXMuX2Nvbm5lY3Rpb24/LmNsb3NlKCksdGhpcy5fY29ubmVjdGlvbj1zLHRoaXMuX2xheWVyJiYhdGhpcy5fY29ubmVjdGlvbi5jbG9zZWQpKXtjb25zdCByPXMuYnJvYWRjYXN0KFwic2V0U3R5bGVcIix0aGlzLl9sYXllci5jdXJyZW50U3R5bGVJbmZvLnN0eWxlLHQpO1Byb21pc2UuYWxsKHIpLmNhdGNoKCh0PT5lKHQpKSl9fSkpfV9yZXF1ZXN0U3ByaXRlKHQpe3RoaXMuX3Nwcml0ZVNvdXJjZUFib3J0Q29udHJvbGxlcj8uYWJvcnQoKTtjb25zdCBlPW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy5fc3ByaXRlU291cmNlQWJvcnRDb250cm9sbGVyPWU7Y29uc3Qgcj10Py5zaWduYWw7dGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyJiZ0aGlzLl9zdGFydE9wdGlvbnNJbnB1dFNpZ25hbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImFib3J0XCIsdGhpcy5faW5wdXRTaWduYWxFdmVudExpc3RlbmVyKSx0aGlzLl9zdGFydE9wdGlvbnNJbnB1dFNpZ25hbD1udWxsLHImJih0aGlzLl9pbnB1dFNpZ25hbEV2ZW50TGlzdGVuZXI9aChlKSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHRoaXMuX2lucHV0U2lnbmFsRXZlbnRMaXN0ZW5lcix7b25jZTohMH0pKTtjb25zdHtzaWduYWw6aX09ZSxvPXsuLi50LHNpZ25hbDppfTt0aGlzLl9zcHJpdGVTb3VyY2VQcm9taXNlPXRoaXMuX2xheWVyLmxvYWRTcHJpdGVTb3VyY2UodGhpcy5kZXZpY2VQaXhlbFJhdGlvLG8pLHRoaXMuX3Nwcml0ZVNvdXJjZVByb21pc2UudGhlbigodD0+e3MoaSksdGhpcy5fc3ByaXRlTW9zYWljPW5ldyBhKDEwMjQsMTAyNCwyNTApLHRoaXMuX3Nwcml0ZU1vc2FpYy5zZXRTcHJpdGVTb3VyY2UodCl9KSl9YXN5bmMgdXBkYXRlU3R5bGUodCl7cmV0dXJuIGF3YWl0IHRoaXMuX2Jyb2FkY2FzdFByb21pc2UsdGhpcy5fYnJvYWRjYXN0UHJvbWlzZT1Qcm9taXNlLmFsbCh0aGlzLl9jb25uZWN0aW9uLmJyb2FkY2FzdChcInVwZGF0ZVN0eWxlXCIsdCkpLHRoaXMuX2Jyb2FkY2FzdFByb21pc2V9c2V0U3ByaXRlU291cmNlKHQpe2NvbnN0IGU9bmV3IGEoMTAyNCwxMDI0LDI1MCk7cmV0dXJuIGUuc2V0U3ByaXRlU291cmNlKHQpLHRoaXMuX3Nwcml0ZU1vc2FpYz1lLHRoaXMuX3Nwcml0ZVNvdXJjZVByb21pc2U9UHJvbWlzZS5yZXNvbHZlKHQpLHRoaXMuX3Nwcml0ZVNvdXJjZUFib3J0Q29udHJvbGxlcj1udWxsLGV9YXN5bmMgc2V0U3R5bGUodCxlKXthd2FpdCB0aGlzLl9icm9hZGNhc3RQcm9taXNlLHRoaXMuX3N0eWxlUmVwb3NpdG9yeT10LHRoaXMuX3JlcXVlc3RTcHJpdGUoKTtjb25zdCBzPW5ldyBsKHRoaXMuX2xheWVyLmN1cnJlbnRTdHlsZUluZm8uZ2x5cGhzVXJsP2kodGhpcy5fbGF5ZXIuY3VycmVudFN0eWxlSW5mby5nbHlwaHNVcmwsey4uLnRoaXMuX2xheWVyLmN1c3RvbVBhcmFtZXRlcnMsdG9rZW46dGhpcy5fbGF5ZXIuYXBpS2V5fSk6bnVsbCk7cmV0dXJuIHRoaXMuX2dseXBoTW9zYWljPW5ldyBuKDEwMjQsMTAyNCxzKSx0aGlzLl9icm9hZGNhc3RQcm9taXNlPVByb21pc2UuYWxsKHRoaXMuX2Nvbm5lY3Rpb24uYnJvYWRjYXN0KFwic2V0U3R5bGVcIixlKSksdGhpcy5fYnJvYWRjYXN0UHJvbWlzZX1mZXRjaFRpbGVEYXRhKHQsZSl7cmV0dXJuIHRoaXMuX2dldFJlZktleXModCxlKS50aGVuKCh0PT57Y29uc3Qgcz10aGlzLl9sYXllci5zb3VyY2VOYW1lVG9Tb3VyY2Uscj1bXTtmb3IoY29uc3QgZSBpbiBzKXIucHVzaChlKTtyZXR1cm4gdGhpcy5fZ2V0U291cmNlc0RhdGEocix0LGUpfSkpfXBhcnNlVGlsZURhdGEodCxlKXtjb25zdCBzPXQmJnQuZGF0YTtpZighcylyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO2NvbnN0e3NvdXJjZU5hbWUyRGF0YUFuZFJlZktleTpyLHRyYW5zZmVyTGlzdDppfT1zO3JldHVybiAwPT09T2JqZWN0LmtleXMocikubGVuZ3RoP1Byb21pc2UucmVzb2x2ZShudWxsKTp0aGlzLl9icm9hZGNhc3RQcm9taXNlLnRoZW4oKCgpPT50aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNyZWF0ZVRpbGVBbmRQYXJzZVwiLHtrZXk6dC5rZXkuaWQsc291cmNlTmFtZTJEYXRhQW5kUmVmS2V5OnIsc3R5bGVMYXllclVJRHM6dC5zdHlsZUxheWVyVUlEc30sey4uLmUsdHJhbnNmZXJMaXN0Oml9KSkpfWFzeW5jIGdldFNwcml0ZXModCl7cmV0dXJuIGF3YWl0IHRoaXMuX3Nwcml0ZVNvdXJjZVByb21pc2UsdGhpcy5fc3ByaXRlTW9zYWljLmdldFNwcml0ZUl0ZW1zKHQpfWdldEdseXBocyh0KXtyZXR1cm4gdGhpcy5fZ2x5cGhNb3NhaWMuZ2V0R2x5cGhJdGVtcyh0LmZvbnQsdC5jb2RlUG9pbnRzKX1hc3luYyBfZ2V0VGlsZVBheWxvYWQodCxlLHMpe2NvbnN0IGk9Yy5wb29sLmFjcXVpcmUodC5pZCksbz10aGlzLl9sYXllci5zb3VyY2VOYW1lVG9Tb3VyY2VbZV0se2xldmVsOm4scm93OmwsY29sOmF9PWk7Yy5wb29sLnJlbGVhc2UoaSk7dHJ5e3JldHVybntwcm90b2J1ZmY6YXdhaXQgby5yZXF1ZXN0VGlsZShuLGwsYSxzKSxzb3VyY2VOYW1lOmV9fWNhdGNoKHUpe2lmKHIodSkpdGhyb3cgdTtyZXR1cm57cHJvdG9idWZmOm51bGwsc291cmNlTmFtZTplfX19X2dldFJlZktleXModCxlKXtjb25zdCBzPXRoaXMuX2xheWVyLnNvdXJjZU5hbWVUb1NvdXJjZSxyPW5ldyBBcnJheTtmb3IoY29uc3QgaSBpbiBzKXtjb25zdCBvPXNbaV0uZ2V0UmVmS2V5KHQsZSk7ci5wdXNoKG8pfXJldHVybiBQcm9taXNlLmFsbFNldHRsZWQocil9X2dldFNvdXJjZXNEYXRhKHQsZSxzKXtjb25zdCByPVtdO2ZvcihsZXQgaT0wO2k8ZS5sZW5ndGg7aSsrKXtjb25zdCBvPWVbaV0sbj1cImZ1bGZpbGxlZFwiPT09by5zdGF0dXM/by52YWx1ZTpudWxsO2lmKG51bGw9PW58fG51bGw9PXRbaV0pci5wdXNoKG51bGwpO2Vsc2V7Y29uc3QgZT10aGlzLl9nZXRUaWxlUGF5bG9hZChuLHRbaV0scyk7ci5wdXNoKGUpfX1yZXR1cm4gUHJvbWlzZS5hbGxTZXR0bGVkKHIpLnRoZW4oKHQ9Pntjb25zdCBzPXt9LHI9W107Zm9yKGxldCBpPTA7aTx0Lmxlbmd0aDtpKyspe2NvbnN0IG89dFtpXSxuPVwiZnVsZmlsbGVkXCI9PT1vLnN0YXR1cz9vLnZhbHVlOm51bGwsbD1uPy5wcm90b2J1ZmY7aWYoIW58fCFsPy5ieXRlTGVuZ3RoKWNvbnRpbnVlO2NvbnN0IGE9ZVtpXSxjPVwiZnVsZmlsbGVkXCI9PT1hLnN0YXR1cz9hLnZhbHVlOm51bGw7aWYoYyl7Y29uc3QgdD1jLmlkO3Nbbi5zb3VyY2VOYW1lXT17cmVmS2V5OnQscHJvdG9idWZmOmx9LHIucHVzaChsKX19cmV0dXJue3NvdXJjZU5hbWUyRGF0YUFuZFJlZktleTpzLHRyYW5zZmVyTGlzdDpyfX0pKX19ZnVuY3Rpb24gaCh0KXtyZXR1cm4oKT0+dC5hYm9ydCgpfWV4cG9ydHt1IGFzIFRpbGVIYW5kbGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZmFkZUR1cmF0aW9uIGFzIG99ZnJvbVwiLi9jb25maWcuanNcIjtmdW5jdGlvbiB0KG8sdCl7aWYoby5wcmlvcml0eS10LnByaW9yaXR5KXJldHVybiBvLnByaW9yaXR5LXQucHJpb3JpdHk7Y29uc3QgZT1vLnRpbGUua2V5LGk9dC50aWxlLmtleTtyZXR1cm4gZS53b3JsZC1pLndvcmxkP2Uud29ybGQtaS53b3JsZDplLmxldmVsLWkubGV2ZWw/ZS5sZXZlbC1pLmxldmVsOmUucm93LWkucm93P2Uucm93LWkucm93OmUuY29sLWkuY29sP2UuY29sLWkuY29sOm8ueFRpbGUtdC54VGlsZT9vLnhUaWxlLXQueFRpbGU6by55VGlsZS10LnlUaWxlfWNsYXNzIGV7Z2V0IHJ1bm5pbmcoKXtyZXR1cm4gdGhpcy5fcnVubmluZ31jb25zdHJ1Y3RvcihvLHQsZSxpLHMsbil7dGhpcy5fdmlzaWJsZVRpbGVzPW8sdGhpcy5fc3ltYm9sUmVwb3NpdG9yeT10LHRoaXMuX2NyZWF0ZUNvbGxpc2lvbkpvYj1lLHRoaXMuX2Fzc2lnblRpbGVTeW1ib2xzT3BhY2l0eT1pLHRoaXMuX3N5bWJvbExheWVyU29ydGVyPXMsdGhpcy5faXNMYXllclZpc2libGU9bix0aGlzLl9zZWxlY3Rpb25Kb2I9bnVsbCx0aGlzLl9zZWxlY3Rpb25Kb2JDb21wbGV0ZWQ9ITEsdGhpcy5fY29sbGlzaW9uSm9iPW51bGwsdGhpcy5fY29sbGlzaW9uSm9iQ29tcGxldGVkPSExLHRoaXMuX29wYWNpdHlKb2I9bnVsbCx0aGlzLl9vcGFjaXR5Sm9iQ29tcGxldGVkPSExLHRoaXMuX3J1bm5pbmc9ITB9c2V0U2NyZWVuU2l6ZShvLHQpe3RoaXMuX3NjcmVlbldpZHRoPT09byYmdGhpcy5fc2NyZWVuSGVpZ2h0PT09dHx8dGhpcy5yZXN0YXJ0KCksdGhpcy5fc2NyZWVuV2lkdGg9byx0aGlzLl9zY3JlZW5IZWlnaHQ9dH1yZXN0YXJ0KCl7dGhpcy5fc2VsZWN0aW9uSm9iPW51bGwsdGhpcy5fc2VsZWN0aW9uSm9iQ29tcGxldGVkPSExLHRoaXMuX2NvbGxpc2lvbkpvYj1udWxsLHRoaXMuX2NvbGxpc2lvbkpvYkNvbXBsZXRlZD0hMSx0aGlzLl9vcGFjaXR5Sm9iPW51bGwsdGhpcy5fb3BhY2l0eUpvYkNvbXBsZXRlZD0hMSx0aGlzLl9ydW5uaW5nPSEwfWNvbnRpbnVlKG8pe2lmKHRoaXMuX3NlbGVjdGlvbkpvYnx8KHRoaXMuX3NlbGVjdGlvbkpvYj10aGlzLl9jcmVhdGVTZWxlY3Rpb25Kb2IoKSksIXRoaXMuX3NlbGVjdGlvbkpvYkNvbXBsZXRlZCl7Y29uc3QgdD1wZXJmb3JtYW5jZS5ub3coKTtpZighdGhpcy5fc2VsZWN0aW9uSm9iLndvcmsobykpcmV0dXJuITE7aWYodGhpcy5fc2VsZWN0aW9uSm9iQ29tcGxldGVkPSEwLDA9PT0obz1NYXRoLm1heCgwLG8tKHBlcmZvcm1hbmNlLm5vdygpLXQpKSkpcmV0dXJuITF9aWYodGhpcy5fY29sbGlzaW9uSm9ifHwodGhpcy5fY29sbGlzaW9uSm9iPXRoaXMuX2NyZWF0ZUNvbGxpc2lvbkpvYih0aGlzLl9zZWxlY3Rpb25Kb2Iuc29ydGVkU3ltYm9scyx0aGlzLl9zY3JlZW5XaWR0aCx0aGlzLl9zY3JlZW5IZWlnaHQpKSwhdGhpcy5fY29sbGlzaW9uSm9iQ29tcGxldGVkKXtjb25zdCB0PXBlcmZvcm1hbmNlLm5vdygpO2lmKCF0aGlzLl9jb2xsaXNpb25Kb2Iud29yayhvKSlyZXR1cm4hMTtpZih0aGlzLl9jb2xsaXNpb25Kb2JDb21wbGV0ZWQ9ITAsMD09PShvPU1hdGgubWF4KDAsby0ocGVyZm9ybWFuY2Uubm93KCktdCkpKSlyZXR1cm4hMX1pZih0aGlzLl9vcGFjaXR5Sm9ifHwodGhpcy5fb3BhY2l0eUpvYj10aGlzLl9jcmVhdGVPcGFjaXR5Sm9iKCkpLCF0aGlzLl9vcGFjaXR5Sm9iQ29tcGxldGVkKXtjb25zdCB0PXBlcmZvcm1hbmNlLm5vdygpO2lmKCF0aGlzLl9vcGFjaXR5Sm9iLndvcmsobykpcmV0dXJuITE7aWYodGhpcy5fb3BhY2l0eUpvYkNvbXBsZXRlZD0hMCwwPT09KG89TWF0aC5tYXgoMCxvLShwZXJmb3JtYW5jZS5ub3coKS10KSkpKXJldHVybiExfXJldHVybiB0aGlzLl9ydW5uaW5nPSExLCEwfV9jcmVhdGVTZWxlY3Rpb25Kb2IoKXtjb25zdCBvPXRoaXMuX3N5bWJvbFJlcG9zaXRvcnkudW5pcXVlU3ltYm9scztmb3IobGV0IHQ9MDt0PG8ubGVuZ3RoO3QrKyl7Y29uc3QgZT1vW3RdO2ZvcihsZXQgbz0wO288ZS51bmlxdWVTeW1ib2xzLmxlbmd0aDtvKyspe2NvbnN0IHQ9ZS51bmlxdWVTeW1ib2xzW29dO2Zvcihjb25zdCBvIG9mIHQudGlsZVN5bWJvbHMpby5zZWxlY3RlZEZvclJlbmRlcmluZz0hMX19Y29uc3QgZT1bXTtsZXQgaT0wLHM9MDtjb25zdCBuPXRoaXMuX2lzTGF5ZXJWaXNpYmxlO2Z1bmN0aW9uIHIocil7bGV0IGw7Y29uc3QgYz1wZXJmb3JtYW5jZS5ub3coKTtmb3IoO3M8by5sZW5ndGg7cysrLGk9MCl7Y29uc3QgdD1vW3NdLGg9dC5zdHlsZUxheWVyVUlEO2lmKCFuKGgpKXtlW3NdfHwoZVtzXT17c3R5bGVMYXllclVJRDpoLHN5bWJvbHM6W119KTtjb250aW51ZX1lW3NdPWVbc118fHtzdHlsZUxheWVyVUlEOmgsc3ltYm9sczpbXX07Y29uc3QgYT1lW3NdO2Zvcig7aTx0LnVuaXF1ZVN5bWJvbHMubGVuZ3RoO2krKyl7aWYobD10LnVuaXF1ZVN5bWJvbHNbaV0saSUxMDA9PTk5JiZwZXJmb3JtYW5jZS5ub3coKS1jPnIpcmV0dXJuITE7bGV0IG89bnVsbCxlPSExLHM9ITE7Zm9yKGNvbnN0IHQgb2YgbC50aWxlU3ltYm9scylpZighc3x8IWUpe2NvbnN0IGk9dC50aWxlOyghb3x8aS5pc0NvdmVyYWdlfHxpLm5lZWRlZEZvckNvdmVyYWdlJiYhZSkmJihvPXQsKGkubmVlZGVkRm9yQ292ZXJhZ2V8fGkuaXNDb3ZlcmFnZSkmJihzPSEwKSxpLmlzQ292ZXJhZ2UmJihlPSEwKSl9aWYoby5zZWxlY3RlZEZvclJlbmRlcmluZz0hMCxzKXthLnN5bWJvbHMucHVzaChvKSxsLnNob3c9ITA7Zm9yKGNvbnN0IG8gb2YgbC5wYXJ0cylvLnNob3c9ITB9ZWxzZSBsLnNob3c9ITF9fWZvcihjb25zdCBvIG9mIGUpby5zeW1ib2xzLnNvcnQodCk7cmV0dXJuITB9Y29uc3QgbD10aGlzLl9zeW1ib2xMYXllclNvcnRlcjtyZXR1cm57d29yazpyLGdldCBzb3J0ZWRTeW1ib2xzKCl7cmV0dXJuIGUuc29ydChsKX19fV9jcmVhdGVPcGFjaXR5Sm9iKCl7Y29uc3Qgbz10aGlzLl9hc3NpZ25UaWxlU3ltYm9sc09wYWNpdHksdD10aGlzLl92aXNpYmxlVGlsZXM7bGV0IGU9MDtmdW5jdGlvbiBzKHQsZSl7Y29uc3Qgbj10LnN5bWJvbHM7Zm9yKGNvbnN0W28sc11vZiBuKWkocyxlKTtvKHQsZSk7Zm9yKGNvbnN0IG8gb2YgdC5jaGlsZHJlblRpbGVzKXMobyxlKX1yZXR1cm57d29yayhvKXtjb25zdCBpPXBlcmZvcm1hbmNlLm5vdygpO2Zvcig7ZTx0Lmxlbmd0aDtlKyspe2lmKHBlcmZvcm1hbmNlLm5vdygpLWk+bylyZXR1cm4hMTtjb25zdCBuPXRbZV07aWYobnVsbCE9bi5wYXJlbnRUaWxlKWNvbnRpbnVlO3MobixwZXJmb3JtYW5jZS5ub3coKSl9cmV0dXJuITB9fX19ZnVuY3Rpb24gaSh0LGUpe2Zvcihjb25zdCBpIG9mIHQpe2NvbnN0IHQ9aS51bmlxdWU7Zm9yKGNvbnN0IGkgb2YgdC5wYXJ0cyl7Y29uc3Qgcz1pLnRhcmdldE9wYWNpdHk+LjU/MTotMTtpLnN0YXJ0T3BhY2l0eSs9cyooKGUtaS5zdGFydFRpbWUpL28pLGkuc3RhcnRPcGFjaXR5PU1hdGgubWluKE1hdGgubWF4KGkuc3RhcnRPcGFjaXR5LDApLDEpLGkuc3RhcnRUaW1lPWUsaS50YXJnZXRPcGFjaXR5PXQuc2hvdyYmaS5zaG93PzE6MH19fWV4cG9ydHtlIGFzIFN5bWJvbERlY2x1dHRlcmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7R3JpZEluZGV4IGFzIGUsdGlsZUNvb3JkQ2hhbmdlIGFzIHN9ZnJvbVwiLi91dGlsLmpzXCI7Y29uc3QgbD0zMixvPTgsdD02NDtjbGFzcyBpe2NvbnN0cnVjdG9yKGUscyxsKXt0aGlzLnRpbGVDb29yZFJhbmdlPWUsdGhpcy5fdmlzaWJsZVRpbGVzPXMsdGhpcy5fY3JlYXRlVW5pcXVlPWwsdGhpcy5fdGlsZXM9bmV3IE1hcCx0aGlzLl91bmlxdWVTeW1ib2xzUmVmZXJlbmNlcz1uZXcgTWFwfWdldCB1bmlxdWVTeW1ib2xzKCl7cmV0dXJuIG51bGw9PXRoaXMuX3VuaXF1ZVN5bWJvbExheWVyQXJyYXkmJih0aGlzLl91bmlxdWVTeW1ib2xMYXllckFycmF5PXRoaXMuX2NyZWF0ZVVuaXF1ZVN5bWJvbExheWVyQXJyYXkoKSksdGhpcy5fdW5pcXVlU3ltYm9sTGF5ZXJBcnJheX1hZGQocyxpKXt0aGlzLl91bmlxdWVTeW1ib2xMYXllckFycmF5PW51bGw7bGV0IG49dGhpcy5fdGlsZXMuZ2V0KHMuaWQpO258fChuPXtzeW1ib2xzOm5ldyBNYXB9LHRoaXMuX3RpbGVzLnNldChzLmlkLG4pKTtjb25zdCByPW5ldyBNYXA7aWYoaSlmb3IoY29uc3QgZSBvZiBpKW4uc3ltYm9scy5oYXMoZSkmJihyLnNldChlLG4uc3ltYm9scy5nZXQoZSkpLG4uc3ltYm9scy5kZWxldGUoZSkpO2Vsc2UgZm9yKGNvbnN0W2UsbF1vZiBzLmxheWVyRGF0YSluLnN5bWJvbHMuaGFzKGUpJiYoci5zZXQoZSxuLnN5bWJvbHMuZ2V0KGUpKSxuLnN5bWJvbHMuZGVsZXRlKGUpKTt0aGlzLl9yZW1vdmVTeW1ib2xzKHIpO2NvbnN0IHk9cy5zeW1ib2xzLGE9bmV3IE1hcDtmb3IoY29uc3RbZixjXW9mIHkpe2xldCBzPWMubGVuZ3RoO2lmKHM+PWwpe2xldCBsPXRoaXMudGlsZUNvb3JkUmFuZ2U7ZG97bC89MixzLz00fXdoaWxlKHM+byYmbD50KTtjb25zdCBpPW5ldyBlKHRoaXMudGlsZUNvb3JkUmFuZ2UsdGhpcy50aWxlQ29vcmRSYW5nZSxsKTthLnNldChmLHtmbGF0OmMsaW5kZXg6aX0pLG4uc3ltYm9scy5zZXQoZix7ZmxhdDpjLGluZGV4Oml9KTtmb3IoY29uc3QgZSBvZiBjKWkuZ2V0Q2VsbChlLnhUaWxlLGUueVRpbGUpLnB1c2goZSl9ZWxzZSBhLnNldChmLHtmbGF0OmN9KSxuLnN5bWJvbHMuc2V0KGYse2ZsYXQ6Y30pfXRoaXMuX2FkZFN5bWJvbHMocy5rZXkseSl9ZGVsZXRlU3R5bGVMYXllcnMoZSl7dGhpcy5fdW5pcXVlU3ltYm9sTGF5ZXJBcnJheT1udWxsO2Zvcihjb25zdFtzLGxdb2YgdGhpcy5fdGlsZXMpe2NvbnN0IG89bmV3IE1hcDtmb3IoY29uc3QgcyBvZiBlKWwuc3ltYm9scy5oYXMocykmJihvLnNldChzLGwuc3ltYm9scy5nZXQocykpLGwuc3ltYm9scy5kZWxldGUocykpO3RoaXMuX3JlbW92ZVN5bWJvbHMobyksMD09PWwuc3ltYm9scy5zaXplJiZ0aGlzLl90aWxlcy5kZWxldGUocyl9fXJlbW92ZVRpbGUoZSl7dGhpcy5fdW5pcXVlU3ltYm9sTGF5ZXJBcnJheT1udWxsO2NvbnN0IHM9dGhpcy5fdGlsZXMuZ2V0KGUuaWQpO2lmKCFzKXJldHVybjtjb25zdCBsPW5ldyBNYXA7Zm9yKGNvbnN0W28sdF1vZiBlLnN5bWJvbHMpcy5zeW1ib2xzLmhhcyhvKSYmKGwuc2V0KG8scy5zeW1ib2xzLmdldChvKSkscy5zeW1ib2xzLmRlbGV0ZShvKSk7dGhpcy5fcmVtb3ZlU3ltYm9scyhsKSwwPT09cy5zeW1ib2xzLnNpemUmJnRoaXMuX3RpbGVzLmRlbGV0ZShlLmlkKX1fcmVtb3ZlU3ltYm9scyhlKXtmb3IoY29uc3Rbcyx7ZmxhdDpsfV1vZiBlKWZvcihjb25zdCBlIG9mIGwpe2NvbnN0IGw9ZS51bmlxdWUsbz1sLnRpbGVTeW1ib2xzLHQ9by5sZW5ndGgtMTtmb3IobGV0IHM9MDtzPHQ7cysrKWlmKG9bc109PT1lKXtvW3NdPW9bdF07YnJlYWt9aWYoby5sZW5ndGg9dCwwPT09dCl7Y29uc3QgZT10aGlzLl91bmlxdWVTeW1ib2xzUmVmZXJlbmNlcy5nZXQocyk7ZS5kZWxldGUobCksMD09PWUuc2l6ZSYmdGhpcy5fdW5pcXVlU3ltYm9sc1JlZmVyZW5jZXMuZGVsZXRlKHMpfWUudW5pcXVlPW51bGx9fV9hZGRTeW1ib2xzKGUscyl7aWYoMD09PXMuc2l6ZSlyZXR1cm47Y29uc3QgbD10aGlzLl92aXNpYmxlVGlsZXM7Zm9yKGNvbnN0IG8gb2YgbClvLnBhcmVudFRpbGV8fG8ua2V5LndvcmxkIT09ZS53b3JsZHx8by5rZXkubGV2ZWw9PT1lLmxldmVsJiYhby5rZXkuZXF1YWxzKGUpfHx0aGlzLl9tYXRjaFN5bWJvbHMobyxlLHMpO2Zvcihjb25zdFtvLHRdb2Ygcylmb3IoY29uc3QgZSBvZiB0KWlmKG51bGw9PWUudW5pcXVlKXtjb25zdCBzPXRoaXMuX2NyZWF0ZVVuaXF1ZSgpO2UudW5pcXVlPXMscy50aWxlU3ltYm9scy5wdXNoKGUpO2xldCBsPXRoaXMuX3VuaXF1ZVN5bWJvbHNSZWZlcmVuY2VzLmdldChvKTtsfHwobD1uZXcgU2V0LHRoaXMuX3VuaXF1ZVN5bWJvbHNSZWZlcmVuY2VzLnNldChvLGwpKSxsLmFkZChzKX19X21hdGNoU3ltYm9scyhlLGwsbyl7aWYoZS5rZXkubGV2ZWw+bC5sZXZlbCl7Y29uc3Qgcz1lLmtleS5sZXZlbC1sLmxldmVsO2lmKGUua2V5LnJvdz4+cyE9PWwucm93fHxlLmtleS5jb2w+PnMhPT1sLmNvbClyZXR1cm59aWYobC5sZXZlbD5lLmtleS5sZXZlbCl7Y29uc3Qgcz1sLmxldmVsLWUua2V5LmxldmVsO2lmKGwucm93Pj5zIT09ZS5rZXkucm93fHxsLmNvbD4+cyE9PWUua2V5LmNvbClyZXR1cm59aWYobC5lcXVhbHMoZS5rZXkpKXtmb3IoY29uc3QgcyBvZiBlLmNoaWxkcmVuVGlsZXMpdGhpcy5fbWF0Y2hTeW1ib2xzKHMsbCxvKTtyZXR1cm59Y29uc3QgdD1uZXcgTWFwO2Zvcihjb25zdFtpLG5db2Ygbyl7Y29uc3Qgbz1bXTtmb3IoY29uc3QgdCBvZiBuKXtjb25zdCBpPXModGhpcy50aWxlQ29vcmRSYW5nZSx0LnhUaWxlLGwubGV2ZWwsbC5jb2wsZS5rZXkubGV2ZWwsZS5rZXkuY29sKSxuPXModGhpcy50aWxlQ29vcmRSYW5nZSx0LnlUaWxlLGwubGV2ZWwsbC5yb3csZS5rZXkubGV2ZWwsZS5rZXkucm93KTtpPj0wJiZpPHRoaXMudGlsZUNvb3JkUmFuZ2UmJm4+PTAmJm48dGhpcy50aWxlQ29vcmRSYW5nZSYmby5wdXNoKHtzeW1ib2w6dCx4VHJhbnNmb3JtZWQ6aSx5VHJhbnNmb3JtZWQ6bn0pfWNvbnN0IHI9W10seT1lLmtleS5sZXZlbDxsLmxldmVsPzE6MTw8ZS5rZXkubGV2ZWwtbC5sZXZlbCxhPXRoaXMuX3RpbGVzLmdldChlLmlkKS5zeW1ib2xzLmdldChpKTtpZihhKXtjb25zdCBlPWEuZmxhdDtmb3IoY29uc3QgcyBvZiBvKXtsZXQgbCxvPSExO2NvbnN0IHQ9cy54VHJhbnNmb3JtZWQsaT1zLnlUcmFuc2Zvcm1lZDtsPW51bGwhPWEuaW5kZXg/YS5pbmRleC5nZXRDZWxsKHQsaSk6ZTtjb25zdCBuPXMuc3ltYm9sLGY9bi5oYXNoO2Zvcihjb25zdCBlIG9mIGwpaWYoZj09PWUuaGFzaCYmTWF0aC5hYnModC1lLnhUaWxlKTw9eSYmTWF0aC5hYnMoaS1lLnlUaWxlKTw9eSl7Y29uc3Qgcz1lLnVuaXF1ZTtuLnVuaXF1ZT1zLHMudGlsZVN5bWJvbHMucHVzaChuKSxvPSEwO2JyZWFrfW98fHIucHVzaChuKX19ci5sZW5ndGg+MCYmdC5zZXQoaSxyKX1mb3IoY29uc3QgcyBvZiBlLmNoaWxkcmVuVGlsZXMpdGhpcy5fbWF0Y2hTeW1ib2xzKHMsbCx0KX1fY3JlYXRlVW5pcXVlU3ltYm9sTGF5ZXJBcnJheSgpe2NvbnN0IGU9dGhpcy5fdW5pcXVlU3ltYm9sc1JlZmVyZW5jZXMscz1uZXcgQXJyYXkoZS5zaXplKTtsZXQgbCxvPTA7Zm9yKGNvbnN0W3QsaV1vZiBlKXtjb25zdCBlPW5ldyBBcnJheShpLnNpemUpO2w9MDtmb3IoY29uc3QgcyBvZiBpKWVbbCsrXT1zO3Nbb109e3N0eWxlTGF5ZXJVSUQ6dCx1bmlxdWVTeW1ib2xzOmV9LG8rK31yZXR1cm4gc319ZXhwb3J0e2kgYXMgU3ltYm9sUmVwb3NpdG9yeX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2EgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvbWF0M2YzMi5qc1wiO2ltcG9ydHtjb2xsaXNpb25HcmlkQ2VsbFNpemUgYXMgdH1mcm9tXCIuL2NvbmZpZy5qc1wiO2ltcG9ydHtHcmlkSW5kZXggYXMgbn1mcm9tXCIuL3V0aWwuanNcIjtpbXBvcnR7U3ltYm9sUGxhY2VtZW50IGFzIG8sUm90YXRpb25BbGlnbm1lbnQgYXMgcixUcmFuc2xhdGVBbmNob3IgYXMgc31mcm9tXCIuLi9zdHlsZS9TdHlsZURlZmluaXRpb24uanNcIjtmdW5jdGlvbiBpKGUsdCxuLG8saSxsKXtjb25zdHtpY29uUm90YXRpb25BbGlnbm1lbnQ6YSx0ZXh0Um90YXRpb25BbGlnbm1lbnQ6YyxpY29uVHJhbnNsYXRlOmgsaWNvblRyYW5zbGF0ZUFuY2hvcjp1LHRleHRUcmFuc2xhdGU6ZCx0ZXh0VHJhbnNsYXRlQW5jaG9yOnl9PW87bGV0IHg9MDtmb3IoY29uc3QgZyBvZiBlLmNvbGxpZGVycyl7Y29uc3RbZSxvXT0wPT09Zy5wYXJ0SW5kZXg/aDpkLG09MD09PWcucGFydEluZGV4P3U6eSxmPWcubWluTG9kPD1sJiZsPD1nLm1heExvZDt4Kz1mPzA6MSxnLmVuYWJsZWQ9ZixnLnhTY3JlZW49Zy54VGlsZSppWzBdK2cueVRpbGUqaVszXStpWzZdLGcueVNjcmVlbj1nLnhUaWxlKmlbMV0rZy55VGlsZSppWzRdK2lbN10sbT09PXMuTUFQPyhnLnhTY3JlZW4rPW4qZS10Km8sZy55U2NyZWVuKz10KmUrbipvKTooZy54U2NyZWVuKz1lLGcueVNjcmVlbis9byksci5WSUVXUE9SVD09PSgwPT09Zy5wYXJ0SW5kZXg/YTpjKT8oZy5keFNjcmVlbj1nLmR4UGl4ZWxzLGcuZHlTY3JlZW49Zy5keVBpeGVscyk6KGcuZHhTY3JlZW49biooZy5keFBpeGVscytnLndpZHRoLzIpLXQqKGcuZHlQaXhlbHMrZy5oZWlnaHQvMiktZy53aWR0aC8yLGcuZHlTY3JlZW49dCooZy5keFBpeGVscytnLndpZHRoLzIpK24qKGcuZHlQaXhlbHMrZy5oZWlnaHQvMiktZy5oZWlnaHQvMil9ZS5jb2xsaWRlcnMubGVuZ3RoPjAmJng9PT1lLmNvbGxpZGVycy5sZW5ndGgmJihlLnVuaXF1ZS5zaG93PSExKX1jbGFzcyBse2NvbnN0cnVjdG9yKG8scixzLGksbCxhKXt0aGlzLl9zeW1ib2xzPW8sdGhpcy5fc3R5bGVSZXBvc2l0b3J5PWksdGhpcy5fem9vbT1sLHRoaXMuX2N1cnJlbnRMYXllckN1cnNvcj0wLHRoaXMuX2N1cnJlbnRTeW1ib2xDdXJzb3I9MCx0aGlzLl9zdHlsZVByb3BzPW5ldyBNYXAsdGhpcy5fYWxsTmVlZGVkTWF0cmljZXM9bmV3IE1hcCx0aGlzLl9ncmlkSW5kZXg9bmV3IG4ocixzLHQpLHRoaXMuX3NpPU1hdGguc2luKE1hdGguUEkqYS8xODApLHRoaXMuX2NvPU1hdGguY29zKE1hdGguUEkqYS8xODApO2Zvcihjb25zdCB0IG9mIG8pZm9yKGNvbnN0IG4gb2YgdC5zeW1ib2xzKXRoaXMuX2FsbE5lZWRlZE1hdHJpY2VzLmhhcyhuLnRpbGUpfHx0aGlzLl9hbGxOZWVkZWRNYXRyaWNlcy5zZXQobi50aWxlLGUobi50aWxlLnRyYW5zZm9ybXMudGlsZVVuaXRzVG9QaXhlbHMpKX13b3JrKGUpe2NvbnN0IHQ9dGhpcy5fZ3JpZEluZGV4O2Z1bmN0aW9uIG4oZSl7Y29uc3Qgbj1lLnhTY3JlZW4rZS5keFNjcmVlbixvPWUueVNjcmVlbitlLmR5U2NyZWVuLHI9bitlLndpZHRoLHM9bytlLmhlaWdodCxbaSxsLGEsY109dC5nZXRDZWxsU3BhbihuLG8scixzKTtmb3IobGV0IGg9bDtoPD1jO2grKylmb3IobGV0IGU9aTtlPD1hO2UrKyl7Y29uc3QgaT10LmNlbGxzW2hdW2VdO2Zvcihjb25zdCBlIG9mIGkpe2NvbnN0IHQ9ZS54U2NyZWVuK2UuZHhTY3JlZW4saT1lLnlTY3JlZW4rZS5keVNjcmVlbixsPXQrZS53aWR0aCxhPWkrZS5oZWlnaHQ7aWYoIShyPHR8fG4+bHx8czxpfHxvPmEpKXJldHVybiEwfX1yZXR1cm4hMX1jb25zdCBvPXBlcmZvcm1hbmNlLm5vdygpO2Zvcig7dGhpcy5fY3VycmVudExheWVyQ3Vyc29yPHRoaXMuX3N5bWJvbHMubGVuZ3RoO3RoaXMuX2N1cnJlbnRMYXllckN1cnNvcisrLHRoaXMuX2N1cnJlbnRTeW1ib2xDdXJzb3I9MCl7Y29uc3QgdD10aGlzLl9zeW1ib2xzW3RoaXMuX2N1cnJlbnRMYXllckN1cnNvcl0scj10aGlzLl9nZXRQcm9wZXJ0aWVzKHQuc3R5bGVMYXllclVJRCk7Zm9yKDt0aGlzLl9jdXJyZW50U3ltYm9sQ3Vyc29yPHQuc3ltYm9scy5sZW5ndGg7dGhpcy5fY3VycmVudFN5bWJvbEN1cnNvcisrKXtpZih0aGlzLl9jdXJyZW50U3ltYm9sQ3Vyc29yJTEwMD09OTkmJnBlcmZvcm1hbmNlLm5vdygpLW8+ZSlyZXR1cm4hMTtjb25zdCBzPXQuc3ltYm9sc1t0aGlzLl9jdXJyZW50U3ltYm9sQ3Vyc29yXTtpZighcy51bmlxdWUuc2hvdyljb250aW51ZTtpKHMsdGhpcy5fc2ksdGhpcy5fY28scix0aGlzLl9hbGxOZWVkZWRNYXRyaWNlcy5nZXQocy50aWxlKSx0aGlzLl96b29tKTtjb25zdCBsPXMudW5pcXVlO2lmKCFsLnNob3cpY29udGludWU7Y29uc3R7aWNvbkFsbG93T3ZlcmxhcDphLGljb25JZ25vcmVQbGFjZW1lbnQ6Yyx0ZXh0QWxsb3dPdmVybGFwOmgsdGV4dElnbm9yZVBsYWNlbWVudDp1fT1yO2Zvcihjb25zdCBlIG9mIHMuY29sbGlkZXJzKXtpZighZS5lbmFibGVkKWNvbnRpbnVlO2NvbnN0IHQ9bC5wYXJ0c1tlLnBhcnRJbmRleF07aWYoIXQuc2hvdyljb250aW51ZTshKGUucGFydEluZGV4P2g6YSkmJm4oZSkmJihlLmhhcmQ/bC5zaG93PSExOnQuc2hvdz0hMSl9aWYobC5zaG93KWZvcihjb25zdCBlIG9mIHMuY29sbGlkZXJzKXtpZighZS5lbmFibGVkKWNvbnRpbnVlO2lmKGUucGFydEluZGV4P3U6Yyljb250aW51ZTtpZighbC5wYXJ0c1tlLnBhcnRJbmRleF0uc2hvdyljb250aW51ZTtjb25zdCB0PWUueFNjcmVlbitlLmR4U2NyZWVuLG49ZS55U2NyZWVuK2UuZHlTY3JlZW4sbz10K2Uud2lkdGgscj1uK2UuaGVpZ2h0LFtzLGksYSxoXT10aGlzLl9ncmlkSW5kZXguZ2V0Q2VsbFNwYW4odCxuLG8scik7Zm9yKGxldCBsPWk7bDw9aDtsKyspZm9yKGxldCB0PXM7dDw9YTt0Kyspe3RoaXMuX2dyaWRJbmRleC5jZWxsc1tsXVt0XS5wdXNoKGUpfX19fXJldHVybiEwfV9nZXRQcm9wZXJ0aWVzKGUpe2NvbnN0IHQ9dGhpcy5fc3R5bGVQcm9wcy5nZXQoZSk7aWYodClyZXR1cm4gdDtjb25zdCBuPXRoaXMuX3pvb20scz10aGlzLl9zdHlsZVJlcG9zaXRvcnkuZ2V0U3R5bGVMYXllckJ5VUlEKGUpLGk9cy5nZXRMYXlvdXRWYWx1ZShcInN5bWJvbC1wbGFjZW1lbnRcIixuKSE9PW8uUE9JTlQ7bGV0IGw9cy5nZXRMYXlvdXRWYWx1ZShcImljb24tcm90YXRpb24tYWxpZ25tZW50XCIsbik7bD09PXIuQVVUTyYmKGw9aT9yLk1BUDpyLlZJRVdQT1JUKTtsZXQgYT1zLmdldExheW91dFZhbHVlKFwidGV4dC1yb3RhdGlvbi1hbGlnbm1lbnRcIixuKTthPT09ci5BVVRPJiYoYT1pP3IuTUFQOnIuVklFV1BPUlQpO2NvbnN0IGM9cy5nZXRQYWludFZhbHVlKFwiaWNvbi10cmFuc2xhdGVcIixuKSxoPXMuZ2V0UGFpbnRWYWx1ZShcImljb24tdHJhbnNsYXRlLWFuY2hvclwiLG4pLHU9cy5nZXRQYWludFZhbHVlKFwidGV4dC10cmFuc2xhdGVcIixuKSxkPXMuZ2V0UGFpbnRWYWx1ZShcInRleHQtdHJhbnNsYXRlLWFuY2hvclwiLG4pLHk9e2ljb25BbGxvd092ZXJsYXA6cy5nZXRMYXlvdXRWYWx1ZShcImljb24tYWxsb3ctb3ZlcmxhcFwiLG4pLGljb25JZ25vcmVQbGFjZW1lbnQ6cy5nZXRMYXlvdXRWYWx1ZShcImljb24taWdub3JlLXBsYWNlbWVudFwiLG4pLHRleHRBbGxvd092ZXJsYXA6cy5nZXRMYXlvdXRWYWx1ZShcInRleHQtYWxsb3ctb3ZlcmxhcFwiLG4pLHRleHRJZ25vcmVQbGFjZW1lbnQ6cy5nZXRMYXlvdXRWYWx1ZShcInRleHQtaWdub3JlLXBsYWNlbWVudFwiLG4pLGljb25Sb3RhdGlvbkFsaWdubWVudDpsLHRleHRSb3RhdGlvbkFsaWdubWVudDphLGljb25UcmFuc2xhdGVBbmNob3I6aCxpY29uVHJhbnNsYXRlOmMsdGV4dFRyYW5zbGF0ZUFuY2hvcjpkLHRleHRUcmFuc2xhdGU6dX07cmV0dXJuIHRoaXMuX3N0eWxlUHJvcHMuc2V0KGUseSkseX19ZXhwb3J0e2wgYXMgQ29sbGlzaW9uSm9ifTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0e2NvbnN0cnVjdG9yKHQ9MCxoPTAsaT0wLHM9MCl7dGhpcy54PXQsdGhpcy55PWgsdGhpcy53aWR0aD1pLHRoaXMuaGVpZ2h0PXN9Z2V0IGlzRW1wdHkoKXtyZXR1cm4gdGhpcy53aWR0aDw9MHx8dGhpcy5oZWlnaHQ8PTB9dW5pb24odCl7dGhpcy54PU1hdGgubWluKHRoaXMueCx0LngpLHRoaXMueT1NYXRoLm1pbih0aGlzLnksdC55KSx0aGlzLndpZHRoPU1hdGgubWF4KHRoaXMud2lkdGgsdC53aWR0aCksdGhpcy5oZWlnaHQ9TWF0aC5tYXgodGhpcy5oZWlnaHQsdC5oZWlnaHQpfX1leHBvcnR7dCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9UaWxlSW5mby5qc1wiO2ltcG9ydCBsIGZyb21cIi4vVGlsZUluZm9WaWV3LmpzXCI7aW1wb3J0IHMgZnJvbVwiLi9UaWxlS2V5LmpzXCI7Y2xhc3MgdCBleHRlbmRzIGx7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2Z1bGxDYWNoZUxvZEluZm9zPW51bGwsdGhpcy5fbGV2ZWxCeVNjYWxlPXt9fWdldFRpbGVQYXJlbnRJZChlKXtjb25zdCBsPXMucG9vbC5hY3F1aXJlKGUpLHQ9MD09PWwubGV2ZWw/bnVsbDpzLmdldElkKGwubGV2ZWwtMSxsLnJvdz4+MSxsLmNvbD4+MSxsLndvcmxkKTtyZXR1cm4gcy5wb29sLnJlbGVhc2UobCksdH1nZXRUaWxlQ292ZXJhZ2UoZSxsLHM9ITAsdCl7Y29uc3Qgbz1zdXBlci5nZXRUaWxlQ292ZXJhZ2UoZSxsLHMsdCk7aWYoIW8pcmV0dXJuIG87Y29uc3QgaT0xPDxvLmxvZEluZm8ubGV2ZWw7cmV0dXJuIG8uc3BhbnM9by5zcGFucy5maWx0ZXIoKGU9PmUucm93Pj0wJiZlLnJvdzxpKSksb31zY2FsZVRvTGV2ZWwoZSl7aWYodGhpcy5fZnVsbENhY2hlTG9kSW5mb3N8fHRoaXMuX2luaXRpYWxpemVGdWxsQ2FjaGVMT0RzKHRoaXMuX2xvZEluZm9zKSx0aGlzLl9sZXZlbEJ5U2NhbGVbZV0pcmV0dXJuIHRoaXMuX2xldmVsQnlTY2FsZVtlXTt7Y29uc3QgbD10aGlzLl9mdWxsQ2FjaGVMb2RJbmZvcztpZihlPmxbMF0uc2NhbGUpcmV0dXJuIGxbMF0ubGV2ZWw7bGV0IHMsdDtmb3IobGV0IG89MDtvPGwubGVuZ3RoLTE7bysrKWlmKHQ9bFtvKzFdLGU+dC5zY2FsZSlyZXR1cm4gcz1sW29dLHMubGV2ZWwrKHMuc2NhbGUtZSkvKHMuc2NhbGUtdC5zY2FsZSk7cmV0dXJuIGxbbC5sZW5ndGgtMV0ubGV2ZWx9fV9pbml0aWFsaXplRnVsbENhY2hlTE9EcyhsKXtsZXQgcztpZigwPT09bFswXS5sZXZlbClzPWwubWFwKChlPT4oe2xldmVsOmUubGV2ZWwscmVzb2x1dGlvbjplLnJlc29sdXRpb24sc2NhbGU6ZS5zY2FsZX0pKSk7ZWxzZXtjb25zdCBsPXRoaXMudGlsZUluZm8uc2l6ZVswXSx0PXRoaXMudGlsZUluZm8uc3BhdGlhbFJlZmVyZW5jZTtzPWUuY3JlYXRlKHtzaXplOmwsc3BhdGlhbFJlZmVyZW5jZTp0fSkubG9kcy5tYXAoKGU9Pih7bGV2ZWw6ZS5sZXZlbCxyZXNvbHV0aW9uOmUucmVzb2x1dGlvbixzY2FsZTplLnNjYWxlfSkpKX1mb3IobGV0IGU9MDtlPHMubGVuZ3RoO2UrKyl0aGlzLl9sZXZlbEJ5U2NhbGVbc1tlXS5zY2FsZV09c1tlXS5sZXZlbDt0aGlzLl9mdWxsQ2FjaGVMb2RJbmZvcz1zfX1leHBvcnR7dCBhcyBkZWZhdWx0fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==