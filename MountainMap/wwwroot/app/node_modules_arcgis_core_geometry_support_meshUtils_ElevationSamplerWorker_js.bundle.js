"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["node_modules_arcgis_core_geometry_support_meshUtils_ElevationSamplerWorker_js"],{

/***/ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BBox: () => (/* binding */ Y),
/* harmony export */   PooledRBush: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/quickselect.js */ "./node_modules/@arcgis/core/chunks/quickselect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t=9,i){this._compareMinX=o,this._compareMinY=l,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),p.prune(),g.prune(),M.prune(),X.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(x(t,n))for(p.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;x(t,a)&&(n.leaf?i(h):_(t,a)?this._all(h,i):p.push(h))}n=p.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!x(t,i))return!1;for(p.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(x(t,h)){if(i.leaf||_(t,h))return!0;p.push(s)}}i=p.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(i){if(!i)return this;let n,e=this._data,s=null,h=0,a=!1;const r=this._toBBox(i);for(M.clear(),X.clear();e||M.length>0;){if(e||(e=M.pop(),s=M.data[M.length-1],h=X.pop()??0,a=!0),e.leaf&&(n=(0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(e.children,i,e.children.length,e.indexHint),-1!==n))return e.children.splice(n,1),M.push(e),this._condense(M),this;a||e.leaf||!_(e,r)?s?(h++,e=s.children[h],a=!1):e=null:(M.push(e),X.push(h),h=0,s=e,e=e.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(g.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else g.pushArray(n.children);n=g.pop()??null}}_build(t,i,n,e){const s=n-i+1;let a=this._maxEntries;if(s<=a){const e=new w(t.slice(i,n+1));return h(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/a**(e-1)));const r=new b([]);r.height=e;const o=Math.ceil(s/a),l=o*Math.ceil(Math.sqrt(a));f(t,i,n,l,this._compareMinX);for(let h=i;h<=n;h+=l){const i=Math.min(h+l-1,n);f(t,h,i,o,this._compareMinY);for(let n=h;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return h(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=c(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);M.clear();const h=this._chooseSubtree(s,this._data,i,M);for(h.children.push(t),r(h,s);i>=0&&M.data[i].children.length>this._maxEntries;)this._split(M,i),i--;this._adjustParentBBoxes(s,M,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const a=this._chooseSplitIndex(n,s,e);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(a,n.children.length-a),o=n.leaf?new w(r):new b(r);o.height=n.height,h(n,this._toBBox),h(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new b([t,i]),this._data.height=t.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let r=i;r<=n-i;r++){const i=a(t,0,r,this._toBBox),o=a(t,r,n,this._toBBox),l=u(i,o),m=c(i)+c(o);l<e?(e=l,h=r,s=m<s?m:s):l===e&&m<s&&(s=m,h=r)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:o,s=t.leaf?this._compareMinY:l;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=a(t,0,i,s),o=a(t,n-i,n,s);let l=m(h)+m(o);for(let a=i;a<n-i;a++){const i=t.children[a];r(h,t.leaf?s(i):i),l+=m(h)}for(let a=n-i-1;a>=i;a--){const i=t.children[a];r(o,t.leaf?s(i):i),l+=m(o)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)r(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice((0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(h,e,h.length,s.indexHint),1)}else this.clear();else h(e,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this._compareMinX=new Function("a","b",i.join(t[0])),this._compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function h(t,i){a(t,0,t.children.length,i,t)}function a(t,i,n,e,s){s||(s=new w([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],r(s,t.leaf?e(h):h);return s}function r(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function o(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function _(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function x(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function f(t,i,n,s,h){const a=[i,n];for(;a.length;){const i=a.pop(),n=a.pop();if(i-n<=s)continue;const r=n+Math.ceil((i-n)/s/2)*s;(0,_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,r,n,i,h),a.push(n,r,r,i)}}const p=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],g=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],M=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],X=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint}}class w extends B{constructor(t){super(),this.children=t,this.leaf=!0}}class b extends B{constructor(t){super(),this.children=t,this.leaf=!1}}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/support/meshUtils/ElevationSamplerWorker.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/libs/rbush/PooledRBush.js */ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js");
/* harmony import */ var _georeference_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./georeference.js */ "./node_modules/@arcgis/core/geometry/support/meshUtils/georeference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{async createIndex(t,r){const n=new Array;if(!t.vertexAttributes?.position)return new _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__.PooledRBush;const o=this._createMeshData(t),s=null!=r?await r.invoke("createIndexThread",o,{transferList:n}):this.createIndexThread(o).result;return this._createPooledRBush().fromJSON(s)}createIndexThread(e){const t=new Float64Array(e.position),r=this._createPooledRBush();return e.components?this._createIndexComponentsThread(r,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(r,t)}_createIndexAllThread(e,t){const r=new Array(t.length/9);let o=0;for(let s=0;s<t.length;s+=9)r[o++]=n(t,s,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,t,r){let o=0;for(const n of r)o+=n.length/3;const s=new Array(o);let a=0;for(const i of r)for(let e=0;e<i.length;e+=3)s[a++]=n(t,3*i[e],3*i[e+1],3*i[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const r=(e.vertexSpace.isRelative?(0,_georeference_js__WEBPACK_IMPORTED_MODULE_2__.georeferenceApplyTransform)({position:e.vertexAttributes.position,normal:null,tangent:null},e.vertexSpace,e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:r}:{position:r,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__.PooledRBush(9,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-csp-restrictions")?e=>e:[".minX",".minY",".maxX",".maxY"])}}function n(e,t,r,n){return{minX:Math.min(e[t],e[r],e[n]),maxX:Math.max(e[t],e[r],e[n]),minY:Math.min(e[t+1],e[r+1],e[n+1]),maxY:Math.max(e[t+1],e[r+1],e[n+1]),p0:[e[t],e[t+1],e[t+2]],p1:[e[r],e[r+1],e[r+2]],p2:[e[n],e[n+1],e[n+2]]}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2dlb21ldHJ5X3N1cHBvcnRfbWVzaFV0aWxzX0VsZXZhdGlvblNhbXBsZXJXb3JrZXJfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDdUosUUFBUSxtQkFBbUIsa09BQWtPLFVBQVUscURBQXFELE9BQU8sd0JBQXdCLFlBQVksaUJBQWlCLHFCQUFxQix3QkFBd0IsRUFBRSxFQUFFLGdDQUFnQyxJQUFJLEtBQUssc0NBQXNDLHNEQUFzRCxXQUFXLFlBQVksaUJBQWlCLHFCQUFxQixvQkFBb0IsY0FBYyxFQUFFLEVBQUUsZ0NBQWdDLElBQUksS0FBSyxzQ0FBc0MsV0FBVywyQkFBMkIsV0FBVyxVQUFVLFNBQVMsUUFBUSx5QkFBeUIsOEJBQThCLHVCQUF1QixJQUFJLHNCQUFzQixZQUFZLHNEQUFzRCw0RkFBNEYsS0FBSywrQkFBK0IsbUJBQW1CLGlCQUFpQixnREFBZ0Qsa0JBQWtCLFlBQVksVUFBVSxtREFBbUQsUUFBUSxpQ0FBaUMsVUFBVSxrQkFBa0IsbUNBQW1DLHdCQUF3Qix3QkFBd0IsY0FBYyxFQUFFLG9FQUFvRSx1REFBQyxvSEFBb0gscUdBQXFHLFlBQVksU0FBUyxrQkFBa0IsWUFBWSx5QkFBeUIsVUFBVSxRQUFRLGNBQWMsRUFBRSxFQUFFLDhDQUE4Qyw2QkFBNkIsaUJBQWlCLGdCQUFnQixjQUFjLHVCQUF1QixTQUFTLDhCQUE4QiwyQkFBMkIsa0VBQWtFLGtCQUFrQixXQUFXLG1EQUFtRCw2QkFBNkIsWUFBWSxLQUFLLE1BQU0sMEJBQTBCLDZCQUE2QixZQUFZLEtBQUssTUFBTSwwQkFBMEIseUNBQXlDLDJCQUEyQix3QkFBd0IsS0FBSyxzQ0FBc0MsRUFBRSxrQkFBa0IsZ0NBQWdDLElBQUksS0FBSyx3Q0FBd0MsOENBQThDLG1CQUFtQixTQUFTLGVBQWUsZ0NBQWdDLFVBQVUsOENBQThDLDhCQUE4QixpREFBaUQsc0JBQXNCLGdDQUFnQyxZQUFZLHlEQUF5RCw2QkFBNkIsc0NBQXNDLHVHQUF1Ryw0RUFBNEUsMEdBQTBHLGdCQUFnQixnRkFBZ0YseUJBQXlCLFVBQVUsUUFBUSxZQUFZLE9BQU8sS0FBSywyRUFBMkUsOENBQThDLFNBQVMsd0JBQXdCLGdFQUFnRSw4RUFBOEUsd0JBQXdCLG1CQUFtQixpREFBaUQsZ0JBQWdCLFlBQVksTUFBTSxLQUFLLHNCQUFzQiwyQkFBMkIsZ0JBQWdCLEtBQUssS0FBSyxzQkFBc0IsMkJBQTJCLFNBQVMsMkJBQTJCLFlBQVksS0FBSyxtQkFBbUIsYUFBYSxxQkFBcUIsS0FBSyxLQUFLLGtCQUFrQixpQ0FBaUMsaUNBQWlDLFNBQVMsdURBQUMsOEJBQThCLGtCQUFrQix3QkFBd0IsZUFBZSw2QkFBNkIsR0FBRyxpSkFBaUosb0VBQW9FLElBQUksZ0JBQWdCLDZCQUE2QixzQkFBc0IsK0RBQStELGNBQWMsSUFBSSx1Q0FBdUMsU0FBUyxnQkFBZ0IsNEhBQTRILGdCQUFnQixxQkFBcUIsZ0JBQWdCLHFCQUFxQixjQUFjLHNDQUFzQyxjQUFjLHFDQUFxQyxnQkFBZ0IsMEdBQTBHLGdCQUFnQiw4R0FBOEcsdUNBQXVDLGdCQUFnQixzRUFBc0UsZ0JBQWdCLHNFQUFzRSxzQkFBc0IsY0FBYyxLQUFLLFNBQVMsRUFBRSwwQkFBMEIsbUJBQW1CLGlDQUFpQyx5REFBQyw2QkFBNkIsWUFBWSx1REFBQyxPQUFPLHVEQUFDLE9BQU8sdURBQUMsT0FBTyx1REFBQyxFQUFFLG1CQUFtQixFQUFFLFFBQVEsY0FBYywyREFBMkQsa0JBQWtCLGNBQWMscURBQXFELHdEQUFDLEVBQUUsa0JBQWtCLGVBQWUsc0NBQXNDLGtCQUFrQixlQUFlLHNDQUF5RTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnhvTTtBQUNBO0FBQ0E7QUFDQTtBQUMySyxRQUFRLHVCQUF1QixrQkFBa0IsNENBQTRDLHdFQUFDLENBQUMsZ0ZBQWdGLGVBQWUsbUNBQW1DLDZDQUE2QyxxQkFBcUIsaUVBQWlFLHFJQUFxSSwyQkFBMkIsOEJBQThCLFFBQVEsWUFBWSxXQUFXLDJCQUEyQixrQkFBa0IsbUJBQW1CLG9DQUFvQyxRQUFRLCtCQUErQixxQkFBcUIsUUFBUSw2QkFBNkIsV0FBVywwQ0FBMEMsa0JBQWtCLG1CQUFtQixtQkFBbUIsa0NBQWtDLDRFQUFDLEVBQUUsOERBQThELDRGQUE0Rix1REFBdUQsV0FBVyxFQUFFLHNEQUFzRCxxQkFBcUIsV0FBVyx3RUFBQyxHQUFHLHdEQUFHLG1FQUFtRSxvQkFBb0IsT0FBTyw2TUFBa08iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9saWJzL3JidXNoL1Bvb2xlZFJCdXNoLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9nZW9tZXRyeS9zdXBwb3J0L21lc2hVdGlscy9FbGV2YXRpb25TYW1wbGVyV29ya2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7aW5kZXhPZiBhcyB0LFBvc2l0aW9uSGludCBhcyBpfWZyb21cIi4uLy4uL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi8uLi9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHtxIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3F1aWNrc2VsZWN0LmpzXCI7Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0PTksaSl7dGhpcy5fY29tcGFyZU1pblg9byx0aGlzLl9jb21wYXJlTWluWT1sLHRoaXMuX3RvQkJveD10PT50LHRoaXMuX21heEVudHJpZXM9TWF0aC5tYXgoNCx0fHw5KSx0aGlzLl9taW5FbnRyaWVzPU1hdGgubWF4KDIsTWF0aC5jZWlsKC40KnRoaXMuX21heEVudHJpZXMpKSxpJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgaT90aGlzLl90b0JCb3g9aTp0aGlzLl9pbml0Rm9ybWF0KGkpKSx0aGlzLmNsZWFyKCl9ZGVzdHJveSgpe3RoaXMuY2xlYXIoKSxwLnBydW5lKCksZy5wcnVuZSgpLE0ucHJ1bmUoKSxYLnBydW5lKCl9YWxsKHQpe3RoaXMuX2FsbCh0aGlzLl9kYXRhLHQpfXNlYXJjaCh0LGkpe2xldCBuPXRoaXMuX2RhdGE7Y29uc3QgZT10aGlzLl90b0JCb3g7aWYoeCh0LG4pKWZvcihwLmNsZWFyKCk7bjspe2ZvcihsZXQgcz0wLGg9bi5jaGlsZHJlbi5sZW5ndGg7czxoO3MrKyl7Y29uc3QgaD1uLmNoaWxkcmVuW3NdLGE9bi5sZWFmP2UoaCk6aDt4KHQsYSkmJihuLmxlYWY/aShoKTpfKHQsYSk/dGhpcy5fYWxsKGgsaSk6cC5wdXNoKGgpKX1uPXAucG9wKCl9fWNvbGxpZGVzKHQpe2xldCBpPXRoaXMuX2RhdGE7Y29uc3Qgbj10aGlzLl90b0JCb3g7aWYoIXgodCxpKSlyZXR1cm4hMTtmb3IocC5jbGVhcigpO2k7KXtmb3IobGV0IGU9MCxzPWkuY2hpbGRyZW4ubGVuZ3RoO2U8cztlKyspe2NvbnN0IHM9aS5jaGlsZHJlbltlXSxoPWkubGVhZj9uKHMpOnM7aWYoeCh0LGgpKXtpZihpLmxlYWZ8fF8odCxoKSlyZXR1cm4hMDtwLnB1c2gocyl9fWk9cC5wb3AoKX1yZXR1cm4hMX1sb2FkKHQpe2lmKCF0Lmxlbmd0aClyZXR1cm4gdGhpcztpZih0Lmxlbmd0aDx0aGlzLl9taW5FbnRyaWVzKXtmb3IobGV0IGk9MCxuPXQubGVuZ3RoO2k8bjtpKyspdGhpcy5pbnNlcnQodFtpXSk7cmV0dXJuIHRoaXN9bGV0IGk9dGhpcy5fYnVpbGQodC5zbGljZSgwLHQubGVuZ3RoKSwwLHQubGVuZ3RoLTEsMCk7aWYodGhpcy5fZGF0YS5jaGlsZHJlbi5sZW5ndGgpaWYodGhpcy5fZGF0YS5oZWlnaHQ9PT1pLmhlaWdodCl0aGlzLl9zcGxpdFJvb3QodGhpcy5fZGF0YSxpKTtlbHNle2lmKHRoaXMuX2RhdGEuaGVpZ2h0PGkuaGVpZ2h0KXtjb25zdCB0PXRoaXMuX2RhdGE7dGhpcy5fZGF0YT1pLGk9dH10aGlzLl9pbnNlcnQoaSx0aGlzLl9kYXRhLmhlaWdodC1pLmhlaWdodC0xLCEwKX1lbHNlIHRoaXMuX2RhdGE9aTtyZXR1cm4gdGhpc31pbnNlcnQodCl7cmV0dXJuIHQmJnRoaXMuX2luc2VydCh0LHRoaXMuX2RhdGEuaGVpZ2h0LTEpLHRoaXN9Y2xlYXIoKXtyZXR1cm4gdGhpcy5fZGF0YT1uZXcgdyhbXSksdGhpc31yZW1vdmUoaSl7aWYoIWkpcmV0dXJuIHRoaXM7bGV0IG4sZT10aGlzLl9kYXRhLHM9bnVsbCxoPTAsYT0hMTtjb25zdCByPXRoaXMuX3RvQkJveChpKTtmb3IoTS5jbGVhcigpLFguY2xlYXIoKTtlfHxNLmxlbmd0aD4wOyl7aWYoZXx8KGU9TS5wb3AoKSxzPU0uZGF0YVtNLmxlbmd0aC0xXSxoPVgucG9wKCk/PzAsYT0hMCksZS5sZWFmJiYobj10KGUuY2hpbGRyZW4saSxlLmNoaWxkcmVuLmxlbmd0aCxlLmluZGV4SGludCksLTEhPT1uKSlyZXR1cm4gZS5jaGlsZHJlbi5zcGxpY2UobiwxKSxNLnB1c2goZSksdGhpcy5fY29uZGVuc2UoTSksdGhpczthfHxlLmxlYWZ8fCFfKGUscik/cz8oaCsrLGU9cy5jaGlsZHJlbltoXSxhPSExKTplPW51bGw6KE0ucHVzaChlKSxYLnB1c2goaCksaD0wLHM9ZSxlPWUuY2hpbGRyZW5bMF0pfXJldHVybiB0aGlzfXRvSlNPTigpe3JldHVybiB0aGlzLl9kYXRhfWZyb21KU09OKHQpe3JldHVybiB0aGlzLl9kYXRhPXQsdGhpc31fYWxsKHQsaSl7bGV0IG49dDtmb3IoZy5jbGVhcigpO247KXtpZighMD09PW4ubGVhZilmb3IoY29uc3QgdCBvZiBuLmNoaWxkcmVuKWkodCk7ZWxzZSBnLnB1c2hBcnJheShuLmNoaWxkcmVuKTtuPWcucG9wKCk/P251bGx9fV9idWlsZCh0LGksbixlKXtjb25zdCBzPW4taSsxO2xldCBhPXRoaXMuX21heEVudHJpZXM7aWYoczw9YSl7Y29uc3QgZT1uZXcgdyh0LnNsaWNlKGksbisxKSk7cmV0dXJuIGgoZSx0aGlzLl90b0JCb3gpLGV9ZXx8KGU9TWF0aC5jZWlsKE1hdGgubG9nKHMpL01hdGgubG9nKGEpKSxhPU1hdGguY2VpbChzL2EqKihlLTEpKSk7Y29uc3Qgcj1uZXcgYihbXSk7ci5oZWlnaHQ9ZTtjb25zdCBvPU1hdGguY2VpbChzL2EpLGw9bypNYXRoLmNlaWwoTWF0aC5zcXJ0KGEpKTtmKHQsaSxuLGwsdGhpcy5fY29tcGFyZU1pblgpO2ZvcihsZXQgaD1pO2g8PW47aCs9bCl7Y29uc3QgaT1NYXRoLm1pbihoK2wtMSxuKTtmKHQsaCxpLG8sdGhpcy5fY29tcGFyZU1pblkpO2ZvcihsZXQgbj1oO248PWk7bis9byl7Y29uc3Qgcz1NYXRoLm1pbihuK28tMSxpKTtyLmNoaWxkcmVuLnB1c2godGhpcy5fYnVpbGQodCxuLHMsZS0xKSl9fXJldHVybiBoKHIsdGhpcy5fdG9CQm94KSxyfV9jaG9vc2VTdWJ0cmVlKHQsaSxuLGUpe2Zvcig7ZS5wdXNoKGkpLCEwIT09aS5sZWFmJiZlLmxlbmd0aC0xIT09bjspe2xldCBuLGU9MS8wLHM9MS8wO2ZvcihsZXQgaD0wLGE9aS5jaGlsZHJlbi5sZW5ndGg7aDxhO2grKyl7Y29uc3QgYT1pLmNoaWxkcmVuW2hdLHI9YyhhKSxvPWQodCxhKS1yO288cz8ocz1vLGU9cjxlP3I6ZSxuPWEpOm89PT1zJiZyPGUmJihlPXIsbj1hKX1pPW58fGkuY2hpbGRyZW5bMF19cmV0dXJuIGl9X2luc2VydCh0LGksbil7Y29uc3QgZT10aGlzLl90b0JCb3gscz1uP3Q6ZSh0KTtNLmNsZWFyKCk7Y29uc3QgaD10aGlzLl9jaG9vc2VTdWJ0cmVlKHMsdGhpcy5fZGF0YSxpLE0pO2ZvcihoLmNoaWxkcmVuLnB1c2godCkscihoLHMpO2k+PTAmJk0uZGF0YVtpXS5jaGlsZHJlbi5sZW5ndGg+dGhpcy5fbWF4RW50cmllczspdGhpcy5fc3BsaXQoTSxpKSxpLS07dGhpcy5fYWRqdXN0UGFyZW50QkJveGVzKHMsTSxpKX1fc3BsaXQodCxpKXtjb25zdCBuPXQuZGF0YVtpXSxlPW4uY2hpbGRyZW4ubGVuZ3RoLHM9dGhpcy5fbWluRW50cmllczt0aGlzLl9jaG9vc2VTcGxpdEF4aXMobixzLGUpO2NvbnN0IGE9dGhpcy5fY2hvb3NlU3BsaXRJbmRleChuLHMsZSk7aWYoIWEpcmV0dXJuIHZvaWQgY29uc29sZS5sb2coXCIgIEVycm9yOiBhc3NlcnRpb24gZmFpbGVkIGF0IFBvb2xlZFJCdXNoLl9zcGxpdDogbm8gdmFsaWQgc3BsaXQgaW5kZXhcIik7Y29uc3Qgcj1uLmNoaWxkcmVuLnNwbGljZShhLG4uY2hpbGRyZW4ubGVuZ3RoLWEpLG89bi5sZWFmP25ldyB3KHIpOm5ldyBiKHIpO28uaGVpZ2h0PW4uaGVpZ2h0LGgobix0aGlzLl90b0JCb3gpLGgobyx0aGlzLl90b0JCb3gpLGk/dC5kYXRhW2ktMV0uY2hpbGRyZW4ucHVzaChvKTp0aGlzLl9zcGxpdFJvb3QobixvKX1fc3BsaXRSb290KHQsaSl7dGhpcy5fZGF0YT1uZXcgYihbdCxpXSksdGhpcy5fZGF0YS5oZWlnaHQ9dC5oZWlnaHQrMSxoKHRoaXMuX2RhdGEsdGhpcy5fdG9CQm94KX1fY2hvb3NlU3BsaXRJbmRleCh0LGksbil7bGV0IGUscyxoO2U9cz0xLzA7Zm9yKGxldCByPWk7cjw9bi1pO3IrKyl7Y29uc3QgaT1hKHQsMCxyLHRoaXMuX3RvQkJveCksbz1hKHQscixuLHRoaXMuX3RvQkJveCksbD11KGksbyksbT1jKGkpK2Mobyk7bDxlPyhlPWwsaD1yLHM9bTxzP206cyk6bD09PWUmJm08cyYmKHM9bSxoPXIpfXJldHVybiBofV9jaG9vc2VTcGxpdEF4aXModCxpLG4pe2NvbnN0IGU9dC5sZWFmP3RoaXMuX2NvbXBhcmVNaW5YOm8scz10LmxlYWY/dGhpcy5fY29tcGFyZU1pblk6bDt0aGlzLl9hbGxEaXN0TWFyZ2luKHQsaSxuLGUpPHRoaXMuX2FsbERpc3RNYXJnaW4odCxpLG4scykmJnQuY2hpbGRyZW4uc29ydChlKX1fYWxsRGlzdE1hcmdpbih0LGksbixlKXt0LmNoaWxkcmVuLnNvcnQoZSk7Y29uc3Qgcz10aGlzLl90b0JCb3gsaD1hKHQsMCxpLHMpLG89YSh0LG4taSxuLHMpO2xldCBsPW0oaCkrbShvKTtmb3IobGV0IGE9aTthPG4taTthKyspe2NvbnN0IGk9dC5jaGlsZHJlblthXTtyKGgsdC5sZWFmP3MoaSk6aSksbCs9bShoKX1mb3IobGV0IGE9bi1pLTE7YT49aTthLS0pe2NvbnN0IGk9dC5jaGlsZHJlblthXTtyKG8sdC5sZWFmP3MoaSk6aSksbCs9bShvKX1yZXR1cm4gbH1fYWRqdXN0UGFyZW50QkJveGVzKHQsaSxuKXtmb3IobGV0IGU9bjtlPj0wO2UtLSlyKGkuZGF0YVtlXSx0KX1fY29uZGVuc2UoaSl7Zm9yKGxldCBuPWkubGVuZ3RoLTE7bj49MDtuLS0pe2NvbnN0IGU9aS5kYXRhW25dO2lmKDA9PT1lLmNoaWxkcmVuLmxlbmd0aClpZihuPjApe2NvbnN0IHM9aS5kYXRhW24tMV0saD1zLmNoaWxkcmVuO2guc3BsaWNlKHQoaCxlLGgubGVuZ3RoLHMuaW5kZXhIaW50KSwxKX1lbHNlIHRoaXMuY2xlYXIoKTtlbHNlIGgoZSx0aGlzLl90b0JCb3gpfX1faW5pdEZvcm1hdCh0KXtjb25zdCBpPVtcInJldHVybiBhXCIsXCIgLSBiXCIsXCI7XCJdO3RoaXMuX2NvbXBhcmVNaW5YPW5ldyBGdW5jdGlvbihcImFcIixcImJcIixpLmpvaW4odFswXSkpLHRoaXMuX2NvbXBhcmVNaW5ZPW5ldyBGdW5jdGlvbihcImFcIixcImJcIixpLmpvaW4odFsxXSkpLHRoaXMuX3RvQkJveD1uZXcgRnVuY3Rpb24oXCJhXCIsXCJyZXR1cm4ge21pblg6IGFcIit0WzBdK1wiLCBtaW5ZOiBhXCIrdFsxXStcIiwgbWF4WDogYVwiK3RbMl0rXCIsIG1heFk6IGFcIit0WzNdK1wifTtcIil9fWZ1bmN0aW9uIGgodCxpKXthKHQsMCx0LmNoaWxkcmVuLmxlbmd0aCxpLHQpfWZ1bmN0aW9uIGEodCxpLG4sZSxzKXtzfHwocz1uZXcgdyhbXSkpLHMubWluWD0xLzAscy5taW5ZPTEvMCxzLm1heFg9LTEvMCxzLm1heFk9LTEvMDtmb3IobGV0IGgsYT1pO2E8bjthKyspaD10LmNoaWxkcmVuW2FdLHIocyx0LmxlYWY/ZShoKTpoKTtyZXR1cm4gc31mdW5jdGlvbiByKHQsaSl7dC5taW5YPU1hdGgubWluKHQubWluWCxpLm1pblgpLHQubWluWT1NYXRoLm1pbih0Lm1pblksaS5taW5ZKSx0Lm1heFg9TWF0aC5tYXgodC5tYXhYLGkubWF4WCksdC5tYXhZPU1hdGgubWF4KHQubWF4WSxpLm1heFkpfWZ1bmN0aW9uIG8odCxpKXtyZXR1cm4gdC5taW5YLWkubWluWH1mdW5jdGlvbiBsKHQsaSl7cmV0dXJuIHQubWluWS1pLm1pbll9ZnVuY3Rpb24gYyh0KXtyZXR1cm4odC5tYXhYLXQubWluWCkqKHQubWF4WS10Lm1pblkpfWZ1bmN0aW9uIG0odCl7cmV0dXJuIHQubWF4WC10Lm1pblgrKHQubWF4WS10Lm1pblkpfWZ1bmN0aW9uIGQodCxpKXtyZXR1cm4oTWF0aC5tYXgoaS5tYXhYLHQubWF4WCktTWF0aC5taW4oaS5taW5YLHQubWluWCkpKihNYXRoLm1heChpLm1heFksdC5tYXhZKS1NYXRoLm1pbihpLm1pblksdC5taW5ZKSl9ZnVuY3Rpb24gdSh0LGkpe2NvbnN0IG49TWF0aC5tYXgodC5taW5YLGkubWluWCksZT1NYXRoLm1heCh0Lm1pblksaS5taW5ZKSxzPU1hdGgubWluKHQubWF4WCxpLm1heFgpLGg9TWF0aC5taW4odC5tYXhZLGkubWF4WSk7cmV0dXJuIE1hdGgubWF4KDAscy1uKSpNYXRoLm1heCgwLGgtZSl9ZnVuY3Rpb24gXyh0LGkpe3JldHVybiB0Lm1pblg8PWkubWluWCYmdC5taW5ZPD1pLm1pblkmJmkubWF4WDw9dC5tYXhYJiZpLm1heFk8PXQubWF4WX1mdW5jdGlvbiB4KHQsaSl7cmV0dXJuIGkubWluWDw9dC5tYXhYJiZpLm1pblk8PXQubWF4WSYmaS5tYXhYPj10Lm1pblgmJmkubWF4WT49dC5taW5ZfWZ1bmN0aW9uIGYodCxpLG4scyxoKXtjb25zdCBhPVtpLG5dO2Zvcig7YS5sZW5ndGg7KXtjb25zdCBpPWEucG9wKCksbj1hLnBvcCgpO2lmKGktbjw9cyljb250aW51ZTtjb25zdCByPW4rTWF0aC5jZWlsKChpLW4pL3MvMikqcztlKHQscixuLGksaCksYS5wdXNoKG4scixyLGkpfX1jb25zdCBwPW5ldyBuLGc9bmV3IG4sTT1uZXcgbixYPW5ldyBuKHtkZWFsbG9jYXRvcjp2b2lkIDB9KTtjbGFzcyBZe2NvbnN0cnVjdG9yKCl7dGhpcy5taW5YPTEvMCx0aGlzLm1pblk9MS8wLHRoaXMubWF4WD0tMS8wLHRoaXMubWF4WT0tMS8wfX1jbGFzcyBCIGV4dGVuZHMgWXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5oZWlnaHQ9MSx0aGlzLmluZGV4SGludD1uZXcgaX19Y2xhc3MgdyBleHRlbmRzIEJ7Y29uc3RydWN0b3IodCl7c3VwZXIoKSx0aGlzLmNoaWxkcmVuPXQsdGhpcy5sZWFmPSEwfX1jbGFzcyBiIGV4dGVuZHMgQntjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMuY2hpbGRyZW49dCx0aGlzLmxlYWY9ITF9fWV4cG9ydHtZIGFzIEJCb3gscyBhcyBQb29sZWRSQnVzaH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtQb29sZWRSQnVzaCBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9yYnVzaC9Qb29sZWRSQnVzaC5qc1wiO2ltcG9ydHtnZW9yZWZlcmVuY2VBcHBseVRyYW5zZm9ybSBhcyB0fWZyb21cIi4vZ2VvcmVmZXJlbmNlLmpzXCI7Y2xhc3Mgcnthc3luYyBjcmVhdGVJbmRleCh0LHIpe2NvbnN0IG49bmV3IEFycmF5O2lmKCF0LnZlcnRleEF0dHJpYnV0ZXM/LnBvc2l0aW9uKXJldHVybiBuZXcgZTtjb25zdCBvPXRoaXMuX2NyZWF0ZU1lc2hEYXRhKHQpLHM9bnVsbCE9cj9hd2FpdCByLmludm9rZShcImNyZWF0ZUluZGV4VGhyZWFkXCIsbyx7dHJhbnNmZXJMaXN0Om59KTp0aGlzLmNyZWF0ZUluZGV4VGhyZWFkKG8pLnJlc3VsdDtyZXR1cm4gdGhpcy5fY3JlYXRlUG9vbGVkUkJ1c2goKS5mcm9tSlNPTihzKX1jcmVhdGVJbmRleFRocmVhZChlKXtjb25zdCB0PW5ldyBGbG9hdDY0QXJyYXkoZS5wb3NpdGlvbikscj10aGlzLl9jcmVhdGVQb29sZWRSQnVzaCgpO3JldHVybiBlLmNvbXBvbmVudHM/dGhpcy5fY3JlYXRlSW5kZXhDb21wb25lbnRzVGhyZWFkKHIsdCxlLmNvbXBvbmVudHMubWFwKChlPT5uZXcgVWludDMyQXJyYXkoZSkpKSk6dGhpcy5fY3JlYXRlSW5kZXhBbGxUaHJlYWQocix0KX1fY3JlYXRlSW5kZXhBbGxUaHJlYWQoZSx0KXtjb25zdCByPW5ldyBBcnJheSh0Lmxlbmd0aC85KTtsZXQgbz0wO2ZvcihsZXQgcz0wO3M8dC5sZW5ndGg7cys9OSlyW28rK109bih0LHMscyszLHMrNik7cmV0dXJuIGUubG9hZChyKSx7cmVzdWx0OmUudG9KU09OKCl9fV9jcmVhdGVJbmRleENvbXBvbmVudHNUaHJlYWQoZSx0LHIpe2xldCBvPTA7Zm9yKGNvbnN0IG4gb2YgcilvKz1uLmxlbmd0aC8zO2NvbnN0IHM9bmV3IEFycmF5KG8pO2xldCBhPTA7Zm9yKGNvbnN0IGkgb2Ygcilmb3IobGV0IGU9MDtlPGkubGVuZ3RoO2UrPTMpc1thKytdPW4odCwzKmlbZV0sMyppW2UrMV0sMyppW2UrMl0pO3JldHVybiBlLmxvYWQocykse3Jlc3VsdDplLnRvSlNPTigpfX1fY3JlYXRlTWVzaERhdGEoZSl7Y29uc3Qgcj0oZS52ZXJ0ZXhTcGFjZS5pc1JlbGF0aXZlP3Qoe3Bvc2l0aW9uOmUudmVydGV4QXR0cmlidXRlcy5wb3NpdGlvbixub3JtYWw6bnVsbCx0YW5nZW50Om51bGx9LGUudmVydGV4U3BhY2UsZS50cmFuc2Zvcm0sZS5zcGF0aWFsUmVmZXJlbmNlKS5wb3NpdGlvbjplLnZlcnRleEF0dHJpYnV0ZXMucG9zaXRpb24pLmJ1ZmZlcjtyZXR1cm4hZS5jb21wb25lbnRzfHxlLmNvbXBvbmVudHMuc29tZSgoZT0+IWUuZmFjZXMpKT97cG9zaXRpb246cn06e3Bvc2l0aW9uOnIsY29tcG9uZW50czplLmNvbXBvbmVudHMubWFwKChlPT5lLmZhY2VzKSl9fV9jcmVhdGVQb29sZWRSQnVzaCgpe3JldHVybiBuZXcgZSg5LGhhcyhcImVzcmktY3NwLXJlc3RyaWN0aW9uc1wiKT9lPT5lOltcIi5taW5YXCIsXCIubWluWVwiLFwiLm1heFhcIixcIi5tYXhZXCJdKX19ZnVuY3Rpb24gbihlLHQscixuKXtyZXR1cm57bWluWDpNYXRoLm1pbihlW3RdLGVbcl0sZVtuXSksbWF4WDpNYXRoLm1heChlW3RdLGVbcl0sZVtuXSksbWluWTpNYXRoLm1pbihlW3QrMV0sZVtyKzFdLGVbbisxXSksbWF4WTpNYXRoLm1heChlW3QrMV0sZVtyKzFdLGVbbisxXSkscDA6W2VbdF0sZVt0KzFdLGVbdCsyXV0scDE6W2Vbcl0sZVtyKzFdLGVbcisyXV0scDI6W2Vbbl0sZVtuKzFdLGVbbisyXV19fWV4cG9ydHtyIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9