"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["node_modules_arcgis_core_views_2d_layers_SubtypeGroupLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/SubtypeGroupLayerView2D.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./FeatureLayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(e,r){return!e.visible||0!==e.minScale&&r>e.minScale||0!==e.maxScale&&r<e.maxScale}let l=class extends _FeatureLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__["default"]{initialize(){this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)((()=>this.view.scale),(()=>this._update()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.initial)],"constructor")}isUpdating(){const e=this.layer.sublayers.some((e=>null!=e.renderer)),r=this._commandsQueue.updating,s=null!=this._updatingRequiredFieldsPromise,i=!this._proxy||!this._proxy.isReady,t=this._pipelineIsUpdating,a=null==this.tileRenderer||this.tileRenderer?.updating,n=e&&(r||s||i||t||a);return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-log-updating")&&console.log(`Updating FLV2D: ${n}\n  -> hasRenderer ${e}\n  -> hasPendingCommand ${r}\n  -> updatingRequiredFields ${s}\n  -> updatingProxy ${i}\n  -> updatingPipeline ${t}\n  -> updatingTileRenderer ${a}\n`),n}_injectOverrides(e){let r=super._injectOverrides(e);const s=this.view.scale,i=this.layer.sublayers.filter((e=>n(e,s))).map((e=>e.subtypeCode));if(!i.length)return r;r=null!=r?r:(new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_8__["default"]).toJSON();const a=`NOT ${this.layer.subtypeField} IN (${i.join(",")})`;return r.where=r.where?`(${r.where}) AND (${a})`:a,r}_setLayersForFeature(e){const r=this.layer.fieldsIndex.get(this.layer.subtypeField),s=e.attributes[r.name],i=this.layer.sublayers.find((e=>e.subtypeCode===s));e.layer=e.sourceLayer=i}_createSchemaConfig(){const e={subtypeField:this.layer.subtypeField,sublayers:Array.from(this.layer.sublayers).map((e=>({featureReduction:null,geometryType:this.layer.geometryType,labelingInfo:e.labelingInfo,labelsVisible:e.labelsVisible,renderer:e.renderer,subtypeCode:e.subtypeCode,orderBy:null})))},r=this.layer.sublayers.map((e=>e.subtypeCode)).join(","),s=this.layer.sublayers.length?`${this.layer.subtypeField} IN (${r})`:"1=2";let i=this.layer.definitionExpression?this.layer.definitionExpression+" AND ":"";return i+=s,{...super._createSchemaConfig(),...e,definitionExpression:i}}};l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.2d.layers.SubtypeGroupLayerView2D")],l);const o=l;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19TdWJ0eXBlR3JvdXBMYXllclZpZXcyRF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNpZSxnQkFBZ0IsNkVBQTZFLG9CQUFvQiw4REFBQyxDQUFDLGFBQWEsaUJBQWlCLDZEQUFDLDRDQUE0QywyREFBQyxrQkFBa0IsYUFBYSxnUkFBZ1IsT0FBTyx3REFBRyx5REFBeUQsRUFBRSxxQkFBcUIsRUFBRSwyQkFBMkIsRUFBRSxnQ0FBZ0MsRUFBRSx1QkFBdUIsRUFBRSwwQkFBMEIsRUFBRSw4QkFBOEIsRUFBRSxPQUFPLG9CQUFvQixnQ0FBZ0MsMkZBQTJGLHNCQUFzQixpQkFBaUIsd0VBQUMsV0FBVyxlQUFlLHlCQUF5QixNQUFNLFlBQVksR0FBRywyQkFBMkIsUUFBUSxTQUFTLEVBQUUsT0FBTyx3QkFBd0IsdUlBQXVJLHdCQUF3QixzQkFBc0IsU0FBUywwRkFBMEYsZ0xBQWdMLElBQUksMkZBQTJGLHlCQUF5QixNQUFNLEVBQUUsU0FBUyxpRkFBaUYsYUFBYSw4REFBOEQsRUFBRSx1REFBQyxFQUFFLHNGQUFDLHFEQUFxRCxVQUErQiIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvU3VidHlwZUdyb3VwTGF5ZXJWaWV3MkQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgcixpbml0aWFsIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L0ZlYXR1cmVGaWx0ZXIuanNcIjtpbXBvcnQgYSBmcm9tXCIuL0ZlYXR1cmVMYXllclZpZXcyRC5qc1wiO2Z1bmN0aW9uIG4oZSxyKXtyZXR1cm4hZS52aXNpYmxlfHwwIT09ZS5taW5TY2FsZSYmcj5lLm1pblNjYWxlfHwwIT09ZS5tYXhTY2FsZSYmcjxlLm1heFNjYWxlfWxldCBsPWNsYXNzIGV4dGVuZHMgYXtpbml0aWFsaXplKCl7dGhpcy5hZGRIYW5kbGVzKFtyKCgoKT0+dGhpcy52aWV3LnNjYWxlKSwoKCk9PnRoaXMuX3VwZGF0ZSgpKSxzKV0sXCJjb25zdHJ1Y3RvclwiKX1pc1VwZGF0aW5nKCl7Y29uc3QgZT10aGlzLmxheWVyLnN1YmxheWVycy5zb21lKChlPT5udWxsIT1lLnJlbmRlcmVyKSkscj10aGlzLl9jb21tYW5kc1F1ZXVlLnVwZGF0aW5nLHM9bnVsbCE9dGhpcy5fdXBkYXRpbmdSZXF1aXJlZEZpZWxkc1Byb21pc2UsaT0hdGhpcy5fcHJveHl8fCF0aGlzLl9wcm94eS5pc1JlYWR5LHQ9dGhpcy5fcGlwZWxpbmVJc1VwZGF0aW5nLGE9bnVsbD09dGhpcy50aWxlUmVuZGVyZXJ8fHRoaXMudGlsZVJlbmRlcmVyPy51cGRhdGluZyxuPWUmJihyfHxzfHxpfHx0fHxhKTtyZXR1cm4gaGFzKFwiZXNyaS0yZC1sb2ctdXBkYXRpbmdcIikmJmNvbnNvbGUubG9nKGBVcGRhdGluZyBGTFYyRDogJHtufVxcbiAgLT4gaGFzUmVuZGVyZXIgJHtlfVxcbiAgLT4gaGFzUGVuZGluZ0NvbW1hbmQgJHtyfVxcbiAgLT4gdXBkYXRpbmdSZXF1aXJlZEZpZWxkcyAke3N9XFxuICAtPiB1cGRhdGluZ1Byb3h5ICR7aX1cXG4gIC0+IHVwZGF0aW5nUGlwZWxpbmUgJHt0fVxcbiAgLT4gdXBkYXRpbmdUaWxlUmVuZGVyZXIgJHthfVxcbmApLG59X2luamVjdE92ZXJyaWRlcyhlKXtsZXQgcj1zdXBlci5faW5qZWN0T3ZlcnJpZGVzKGUpO2NvbnN0IHM9dGhpcy52aWV3LnNjYWxlLGk9dGhpcy5sYXllci5zdWJsYXllcnMuZmlsdGVyKChlPT5uKGUscykpKS5tYXAoKGU9PmUuc3VidHlwZUNvZGUpKTtpZighaS5sZW5ndGgpcmV0dXJuIHI7cj1udWxsIT1yP3I6KG5ldyB0KS50b0pTT04oKTtjb25zdCBhPWBOT1QgJHt0aGlzLmxheWVyLnN1YnR5cGVGaWVsZH0gSU4gKCR7aS5qb2luKFwiLFwiKX0pYDtyZXR1cm4gci53aGVyZT1yLndoZXJlP2AoJHtyLndoZXJlfSkgQU5EICgke2F9KWA6YSxyfV9zZXRMYXllcnNGb3JGZWF0dXJlKGUpe2NvbnN0IHI9dGhpcy5sYXllci5maWVsZHNJbmRleC5nZXQodGhpcy5sYXllci5zdWJ0eXBlRmllbGQpLHM9ZS5hdHRyaWJ1dGVzW3IubmFtZV0saT10aGlzLmxheWVyLnN1YmxheWVycy5maW5kKChlPT5lLnN1YnR5cGVDb2RlPT09cykpO2UubGF5ZXI9ZS5zb3VyY2VMYXllcj1pfV9jcmVhdGVTY2hlbWFDb25maWcoKXtjb25zdCBlPXtzdWJ0eXBlRmllbGQ6dGhpcy5sYXllci5zdWJ0eXBlRmllbGQsc3VibGF5ZXJzOkFycmF5LmZyb20odGhpcy5sYXllci5zdWJsYXllcnMpLm1hcCgoZT0+KHtmZWF0dXJlUmVkdWN0aW9uOm51bGwsZ2VvbWV0cnlUeXBlOnRoaXMubGF5ZXIuZ2VvbWV0cnlUeXBlLGxhYmVsaW5nSW5mbzplLmxhYmVsaW5nSW5mbyxsYWJlbHNWaXNpYmxlOmUubGFiZWxzVmlzaWJsZSxyZW5kZXJlcjplLnJlbmRlcmVyLHN1YnR5cGVDb2RlOmUuc3VidHlwZUNvZGUsb3JkZXJCeTpudWxsfSkpKX0scj10aGlzLmxheWVyLnN1YmxheWVycy5tYXAoKGU9PmUuc3VidHlwZUNvZGUpKS5qb2luKFwiLFwiKSxzPXRoaXMubGF5ZXIuc3VibGF5ZXJzLmxlbmd0aD9gJHt0aGlzLmxheWVyLnN1YnR5cGVGaWVsZH0gSU4gKCR7cn0pYDpcIjE9MlwiO2xldCBpPXRoaXMubGF5ZXIuZGVmaW5pdGlvbkV4cHJlc3Npb24/dGhpcy5sYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbitcIiBBTkQgXCI6XCJcIjtyZXR1cm4gaSs9cyx7Li4uc3VwZXIuX2NyZWF0ZVNjaGVtYUNvbmZpZygpLC4uLmUsZGVmaW5pdGlvbkV4cHJlc3Npb246aX19fTtsPWUoW2koXCJlc3JpLnZpZXdzLjJkLmxheWVycy5TdWJ0eXBlR3JvdXBMYXllclZpZXcyRFwiKV0sbCk7Y29uc3Qgbz1sO2V4cG9ydHtvIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9