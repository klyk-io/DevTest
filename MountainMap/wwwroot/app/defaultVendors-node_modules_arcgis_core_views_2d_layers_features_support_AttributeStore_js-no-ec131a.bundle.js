"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_2d_layers_features_support_AttributeStore_js-no-ec131a"],{

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/AttributeStore.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../layers/support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/* harmony import */ var _engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../engine/webgl/DisplayId.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js");
/* harmony import */ var _engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../engine/webgl/Utils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js");
/* harmony import */ var _engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../engine/webgl/util/debug.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/util/debug.js");
/* harmony import */ var _tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../tileRenderers/support/visualVariablesUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/visualVariablesUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const U=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.views.layers.2d.features.support.AttributeStore"),A=(0,_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_11__.createDebugLogger)(_engine_webgl_util_debug_js__WEBPACK_IMPORTED_MODULE_11__.debugAttrUpdates,U),E={sharedArrayBuffer:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-shared-array-buffer"),atomics:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-atomics")};function w(t,e){return i=>e(t(i))}class D{constructor(t,e,i,s){this.size=0,this.texelSize=4,this.dirtyStart=0,this.dirtyEnd=0;const{pixelType:r,layout:a,textureOnly:n}=s;this.textureOnly=n||!1,this.pixelType=r,this._ctype=e,this.layout=a,this._resetRange(),this._shared=t,this.size=i,n||(this.data=this._initData(r,i,t,e))}get buffer(){return this.data?.buffer}unsetComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]&=~e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponentAllTexels(t,e){const i=this.data;for(let s=0;s<this.size*this.size;s++)i[s*this.texelSize+t]|=255&e;this.dirtyStart=0,this.dirtyEnd=this.size*this.size-1}setComponent(t,e,i){const s=this.data;for(const r of i)s[r*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,r),this.dirtyEnd=Math.max(this.dirtyEnd,r)}setComponentTexel(t,e,i){this.data[i*this.texelSize+t]|=e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}unsetComponentTexel(t,e,i){this.data[i*this.texelSize+t]&=~e,this.dirtyStart=Math.min(this.dirtyStart,i),this.dirtyEnd=Math.max(this.dirtyEnd,i)}getData(t,e){const i=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t);return this.data[i*this.texelSize+e]}setData(t,e,i){const s=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t),r=1<<e;0!=(this.layout&r)?null!=this.data&&(this.data[s*this.texelSize+e]=i,this.dirtyStart=Math.min(this.dirtyStart,s),this.dirtyEnd=Math.max(this.dirtyEnd,s)):U.error("mapview-attributes-store","Tried to set a value for a texel's readonly component")}lock(){this.pixelType===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE&&this._shared&&E.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,1)}unlock(){this.pixelType===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE&&this._shared&&E.atomics&&"local"!==this._ctype&&Atomics.store(this.data,0,0)}expand(t){if(this.size=t,!this.textureOnly){const e=this._initData(this.pixelType,t,this._shared,this._ctype),i=this.data;e.set(i),this.data=e}}toMessage(){const t=this.dirtyStart,e=this.dirtyEnd,i=this.texelSize;if(t>e)return null;this._resetRange();const s=!(this._shared||"local"===this._ctype),r=this.pixelType,a=this.layout,n=this.data;return{start:t,end:e,data:s&&n.slice(t*i,(e+1)*i)||null,pixelType:r,layout:a}}_initData(t,e,i,s){const r=i&&"local"!==s?SharedArrayBuffer:ArrayBuffer,a=(0,_engine_webgl_Utils_js__WEBPACK_IMPORTED_MODULE_10__.getPixelArrayCtor)(t),n=new a(new r(e*e*4*a.BYTES_PER_ELEMENT));for(let o=0;o<n.length;o+=4)n[o+1]=255;return n}_resetRange(){this.dirtyStart=2147483647,this.dirtyEnd=0}}class k{constructor(t,e){this._client=t,this.config=e,this.updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_6__.UpdatingHandles,this._blocks=new Array,this._filters=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.maxFilters),this._attributeComputeInfo=null,this._targetType=0,this._abortController=new AbortController,this._hasScaleExpr=!1,this._size=32,this._nextUpdate=null,this._currUpdate=null,this._idsToHighlight=new Set;const i=e.supportsTextureFloat?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.FLOAT:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE;A(`Creating AttributeStore ${E.sharedArrayBuffer?"with":"without"} shared memory`),this._blockDescriptors=[{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE,layout:1},{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_13__.PixelType.UNSIGNED_BYTE,layout:15,textureOnly:!0},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15},{pixelType:i,layout:15}],this._blocks=this._blockDescriptors.map((()=>null))}destroy(){this._abortController.abort(),this.updatingHandles.destroy()}get hasScaleExpr(){return this._hasScaleExpr}get _signal(){return this._abortController.signal}get hasHighlight(){return this._idsToHighlight.size>0}isUpdating(){const t=this.updatingHandles.updating||!!this._nextUpdate;return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-log-updating")&&console.log(`Updating AttributeStore: ${t}\n  -> updatingHandles ${this.updatingHandles.updating} (currUpdate: ${!!this._currUpdate})\n  -> nextUpdate: ${!!this._nextUpdate}\n`),t}update(t,e){this.config=e;const i=e.schema.processors[0].storage,s=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_5__.diff)(this._schema,i);if((t.targets.feature||t.targets.aggregate)&&(t.storage.data=!0),s&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:",s),t.storage.data=!0,this._schema=i,this._attributeComputeInfo=null,null!=i)){switch(i.target){case"feature":this._targetType=_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.displayIdTypeFeature;break;case"aggregate":this._targetType=_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.displayIdTypeAggregate}if("subtype"===i.type){this._attributeComputeInfo={isSubtype:!0,subtypeField:i.subtypeField,map:new Map};for(const t in i.mapping){const e=i.mapping[t];if(null!=e?.vvMapping)for(const i of e.vvMapping)this._bindAttribute(i,parseInt(t,10))}}else{if(this._attributeComputeInfo={isSubtype:!1,map:new Map},null!=i.vvMapping)for(const t of i.vvMapping)this._bindAttribute(t);if(null!=i.attributeMapping)for(const t of i.attributeMapping)this._bindAttribute(t)}}}onTileData(t,e){if(null==e.addOrUpdate)return;const i=e.addOrUpdate.getCursor();for(;i.next();){const t=i.getDisplayId();this.setAttributeData(t,i)}}async setHighlight(t,e){const i=1,s=this._getBlock(0),r=e.map((t=>(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t)));s.lock(),s.unsetComponentAllTexels(0,i),s.setComponent(0,i,r),s.unlock(),this._idsToHighlight.clear();for(const a of t)this._idsToHighlight.add(a);await this.sendUpdates()}async updateFilters(t,e,i){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters");const{service:s,spatialReference:r}=i,{filters:a}=e,n=a.map(((t,e)=>this._updateFilter(t,e,s,r))),o=(await Promise.all(n)).some((t=>t));(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("AttributeStore::updateFilters - finsihed"),o&&(t.storage.filters=!0,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("Applying Update - AttributeStore:","Filters changed"))}setData(t,e,i,s){const r=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t);this._ensureSizeForTexel(r),this._getBlock(e).setData(t,i,s)}getData(t,e,i){return this._getBlock(e).getData(t,i)}getHighlightFlag(t){return this._idsToHighlight.has(t)?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.highlightFlag:0}unsetAttributeData(t){const e=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t);this._getBlock(0).setData(e,0,0)}setAttributeData(t,e){const s=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdTexel)(t);if(this._ensureSizeForTexel(s),this._getBlock(0).setData(s,0,this.getFilterFlags(e)),this._targetType!==(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdType)(t))return;const r=this._attributeComputeInfo,a=this.config.supportsTextureFloat?1:2,n=4;let o=null;r&&(o=r.isSubtype?r.map.get(e.readAttribute(r.subtypeField)):r.map,o?.size&&o.forEach(((t,r)=>{const o=r*a%n,l=Math.floor(r*a/n),h=this._getBlock(l+_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.attributeDataVv),p=t(e);if(this.config.supportsTextureFloat)h.setData(s,o,p);else if(p===_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.nanMagicNumber)h.setData(s,o,255),h.setData(s,o+1,255);else{const t=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_3__.clamp)(Math.round(p),-32767,32766)+32768,e=255&t,r=(65280&t)>>8;h.setData(s,o,e),h.setData(s,o+1,r)}})))}sendUpdates(){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate"),this._nextUpdate)return this._nextUpdate.promise;if(this._currUpdate)return this._nextUpdate=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.createResolver)(),this.updatingHandles.addPromise(this._nextUpdate.promise),this._nextUpdate.promise;const e={blocks:this._blocks.map((t=>null!=t?t.toMessage():null))};return this._currUpdate=this._createResources().then((()=>{const t=()=>{if(this._currUpdate=null,this._nextUpdate){const t=this._nextUpdate;this._nextUpdate=null,this.sendUpdates().then((()=>t.resolve()))}else (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::No additional updates queued")};(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug("AttributeStore::sendUpdate::client.update");const i=this.updatingHandles.addPromise(this._client.update(e,this._signal).then(t).catch(t));return this._client.render(this._signal),i})).catch((e=>{if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.isAbortError)(e))return this._createResourcesPromise=null,this._createResources();U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("mapview-attribute-store","Encountered an error during client update",e))})),this._currUpdate}_ensureSizeForTexel(t){for(;t>=this._size*this._size;)if(this._expand())return}_bindAttribute(t,e){function i(){const{normalizationField:e}=t;return e?i=>{const s=i.readAttribute(e);if(!s)return null;return i.readAttribute(t.field)/s}:e=>e.readAttribute(t.field)}function s(){return t.normalizationField&&U.warn("mapview-arcade","Ignoring normalizationField specified with an arcade expression which is not supported."),e=>e.getComputedNumericAtIndex(t.fieldIndex)}let r;if(null!=t.fieldIndex)r=s();else{if(!t.field)return;r=i()}const{valueRepresentation:a}=t;if(a){r=w(r,(t=>(0,_tileRenderers_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_12__.getVisualVariableSizeValueRepresentationRatio)(t,a)))}const n=t=>null===t||isNaN(t)||t===1/0||t===-1/0?_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.nanMagicNumber:t,o=this._attributeComputeInfo;if(o.isSubtype){const i=o.map.get(e)??new Map;i.set(t.binding,w(r,n)),o.map.set(e,i)}else o.map.set(t.binding,w(r,n))}_createResources(){if(null!=this._createResourcesPromise)return this._createResourcesPromise;this._getBlock(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.attributeDataAnimation),this._getBlock(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_8__.attributeDataGpgpu),A("Initializing AttributeStore");const e={shared:E.sharedArrayBuffer&&!("local"===this._client.type),size:this._size,blocks:this._blocks.map((t=>null!=t?{textureOnly:t.textureOnly,buffer:t.buffer,pixelType:t.pixelType}:null))},i=this._client.initialize(e,this._signal).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.isAbortError)(e)?this._createResourcesPromise=null:U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("mapview-attribute-store","Encountered an error during client initialization",e))}));return this._createResourcesPromise=i,i.then((()=>null==this._createResourcesPromise?this._createResources():void 0)),i}_getBlock(t){const e=this._blocks[t];if(null!=e)return e;A(`Initializing AttributeBlock at index ${t}`);const i=E.sharedArrayBuffer,s=this._client.type,r=new D(i,s,this._size,this._blockDescriptors[t]);return this._blocks[t]=r,this._createResourcesPromise=null,r}_expand(){if(this._size<this.config.maxTextureSize){const t=this._size<<=1;A("Expanding block size to",t,this._blocks);for(const e of this._blocks)e?.expand(t);return this._createResourcesPromise=null,this._size=t,0}return U.error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("mapview-limitations","Maximum number of onscreen features exceeded.")),-1}async _updateFilter(t,e,i,s){const r=this._filters[e],a=null!=r&&r.hash;if(!r&&!t)return!1;if(a===JSON.stringify(t))return!1;if(null==t){if(!r)return!1;const t=1<<e+1,i=this._getBlock(0);return this._filters[e]=null,i.setComponentAllTexels(0,t),this.sendUpdates(),!0}const n=await this._getFilter(e,i);return await n.update(t,s),!0}async _getFilter(t,e){const i=this._filters[t];if(null!=i)return i;const{default:s}=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_layers_graphics_data_queryUtils_js-node_modules_arcgi-ede671"), __webpack_require__.e("defaultVendors-node_modules_arcgis_core_views_2d_layers_features_FeatureStore2D_js"), __webpack_require__.e("node_modules_arcgis_core_views_2d_layers_features_support_FeatureFilter_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ./FeatureFilter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureFilter.js")),r=new s({geometryType:e.geometryType,hasM:!1,hasZ:!1,timeInfo:e.timeInfo,fieldsIndex:_layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_7__["default"].fromJSON(e.fieldsIndex)});return this._filters[t]=r,r}isVisible(t){return!!(2&this._getBlock(0).getData(t,0))}getFilterFlags(t){let e=0;const i=(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_9__.getDisplayIdFilterMask)(t.getDisplayId());for(let r=0;r<this._filters.length;r++){const s=!!(i&1<<r),a=this._filters[r];e|=(!s||null==a||a.check(t)?1:0)<<r}let s=0;if(this._idsToHighlight.size){const e=t.getObjectId();s=this.getHighlightFlag(e)}return e<<1|s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/ComputedAttributeStorage.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ComputedAttributeStorage: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/webgl/DisplayId.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js");
/* harmony import */ var _DisplayIdGenerator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./DisplayIdGenerator.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/DisplayIdGenerator.js");
/* harmony import */ var _StaticBitSet_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StaticBitSet.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(t,e,s){if(!(t.length>e))for(;t.length<=e;)t.push(s)}class r{constructor(){this._numerics=[],this._strings=[],this._idGenerator=new _DisplayIdGenerator_js__WEBPACK_IMPORTED_MODULE_1__.DisplayIdGenerator,this._allocatedSize=256,this._bitsets=[],this._instanceIds=[],this._bounds=[]}createBitset(){const e=this._bitsets.length;return this._bitsets.push(_StaticBitSet_js__WEBPACK_IMPORTED_MODULE_2__.StaticBitSet.create(this._allocatedSize,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)),e+1}getBitset(t){return this._bitsets[t-1]}_expand(){this._allocatedSize<<=1;for(const t of this._bitsets)t.resize(this._allocatedSize)}_ensureNumeric(t,e){this._numerics[t]||(this._numerics[t]=[]);n(this._numerics[t],e,0)}_ensureInstanceId(t){n(this._instanceIds,t,0)}_ensureString(t,e){this._strings[t]||(this._strings[t]=[]);n(this._strings[t],e,null)}createDisplayId(t=!1){const s=this._idGenerator.createId();return s>this._allocatedSize&&this._expand(),(0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.createDisplayId)(s,t)}releaseDisplayId(e){for(const t of this._bitsets)t.unset(e);return this._idGenerator.releaseId(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)}getComputedNumeric(e,s){return this.getComputedNumericAtIndex(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask,0)}setComputedNumeric(e,s,i){return this.setComputedNumericAtIndex(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask,i,0)}getComputedString(e,s){return this.getComputedStringAtIndex(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask,0)}setComputedString(e,s,i){return this.setComputedStringAtIndex(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask,0,i)}getComputedNumericAtIndex(e,s){const i=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;return this._ensureNumeric(s,i),this._numerics[s][i]}setComputedNumericAtIndex(e,s,i){const n=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;this._ensureNumeric(s,n),this._numerics[s][n]=i}getInstanceId(e){const s=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;return this._ensureInstanceId(s),this._instanceIds[s]}setInstanceId(e,s){const i=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;this._ensureInstanceId(i),this._instanceIds[i]=s}getComputedStringAtIndex(e,s){const i=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;return this._ensureString(s,i),this._strings[s][i]}setComputedStringAtIndex(e,s,i){const n=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;this._ensureString(s,n),this._strings[s][n]=i}getXMin(e){return this._bounds[4*(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)]}getYMin(e){return this._bounds[4*(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)+1]}getXMax(e){return this._bounds[4*(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)+2]}getYMax(e){return this._bounds[4*(e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask)+3]}setBounds(e,s){const i=s.readHydratedGeometry();if(!i?.coords.length)return!1;let r=1/0,u=1/0,o=-1/0,h=-1/0;i.forEachVertex(((t,e)=>{r=Math.min(r,t),u=Math.min(u,e),o=Math.max(o,t),h=Math.max(h,e)}));const d=e&_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.displayIdTexelMask;return n(this._bounds,4*d+4,0),this._bounds[4*d]=r,this._bounds[4*d+1]=u,this._bounds[4*d+2]=o,this._bounds[4*d+3]=h,!0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/DisplayIdGenerator.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/DisplayIdGenerator.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DisplayIdGenerator: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../engine/webgl/DisplayId.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/DisplayId.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(){this._freeIds=[],this._idCounter=1}createId(r=!1){return (0,_engine_webgl_DisplayId_js__WEBPACK_IMPORTED_MODULE_0__.createDisplayId)(this._getFreeId(),r)}releaseId(e){this._freeIds.push(e)}_getFreeId(){return this._freeIds.length?this._freeIds.pop():this._idCounter++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureSetReader: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../arcade/ArcadeDate.js */ "./node_modules/@arcgis/core/arcade/ArcadeDate.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/sql/DateOnly.js */ "./node_modules/@arcgis/core/core/sql/DateOnly.js");
/* harmony import */ var _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/sql/TimeOnly.js */ "./node_modules/@arcgis/core/core/sql/TimeOnly.js");
/* harmony import */ var _geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../geometry/GeometryCursor.js */ "./node_modules/@arcgis/core/geometry/GeometryCursor.js");
/* harmony import */ var _geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../geometry/support/labelPoint.js */ "./node_modules/@arcgis/core/geometry/support/labelPoint.js");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../layers/graphics/OptimizedGeometry.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js");
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../time/timeZoneUtils.js */ "./node_modules/@arcgis/core/time/timeZoneUtils.js");
/* harmony import */ var _StaticBitSet_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./StaticBitSet.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=0;const h=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("featurelayer-simplify-thresholds")??[.5,.5,.5,.5],y=h[0],f=h[1],p=h[2],g=h[3],_=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("featurelayer-simplify-payload-size-factors")??[1,2,4],x=_[0],A=_[1],T=_[2],I=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("featurelayer-simplify-mobile-factor")??2,b=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-mobile");class S{constructor(e,t){this.type="FeatureSetReader",this.arcadeDeclaredClass="esri.arcade.Feature",this.seen=!1,this.instance=0,this._tx=0,this._ty=0,this._sx=1,this._sy=1,this._deleted=null,this._joined=[],this._objectIdToIndex=null,this._contextTimeZone=null,this._level=0,this.instance=e,this._layerSchema=t}static createInstance(){return c++,c=c>65535?0:c,c}get isEmpty(){return null!=this._deleted&&this._deleted.countSet()===this.getSize()}get contextTimeZone(){return this._contextTimeZone}set contextTimeZone(e){this._contextTimeZone=e}set level(e){this._level=e}getAreaSimplificationThreshold(e,t){let r=1;const s=b?I:1;t>4e6?r=T*s:t>1e6?r=A*s:t>5e5?r=x*s:t>1e5&&(r=s);let i=0;e>4e3?i=g*r:e>2e3?i=p*r:e>100?i=f:e>15&&(i=y);let n=8;return this._level<4?n=1:this._level<5?n=2:this._level<6&&(n=4),i*n}createQuantizedExtrudedGeometry(e,t){return"esriGeometryPolyline"===this.geometryType?this._createQuantizedExtrudedLine(e,t):this._createQuantizedExtrudedQuad(e,t)}_createQuantizedExtrudedQuad(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_9__["default"]([5],[e-1,t,1,-1,1,1,-1,1,-1,-1])}_createQuantizedExtrudedLine(e,t){return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_9__["default"]([2],[e-1,t+1,1,-1])}parseTimestampOffset(e){return e}setArcadeSpatialReference(e){this._arcadeSpatialReference=e}attachStorage(e){this._storage=e}getQuantizationTransform(){throw new Error("Unable to find transform for featureSet")}getStorage(){return this._storage}getComputedNumeric(e){return this.getComputedNumericAtIndex(0)}setComputedNumeric(e,t){return this.setComputedNumericAtIndex(t,0)}getComputedString(e){return this.getComputedStringAtIndex(0)}setComputedString(e,t){return this.setComputedStringAtIndex(0,t)}getComputedNumericAtIndex(e){return this._storage.getComputedNumericAtIndex(this.getDisplayId(),e)}setComputedNumericAtIndex(e,t){this._storage.setComputedNumericAtIndex(this.getDisplayId(),e,t)}getComputedStringAtIndex(e){return this._storage.getComputedStringAtIndex(this.getDisplayId(),e)}setComputedStringAtIndex(e,t){return this._storage.setComputedStringAtIndex(this.getDisplayId(),e,t)}transform(e,t,r,s){const i=this.copy();return i._tx+=e,i._ty+=t,i._sx*=r,i._sy*=s,i}readAttributeAsTimestamp(e){const t=this.readAttribute(e);return"string"==typeof t?new Date(t).getTime():"number"==typeof t||null==t?t:null}readAttribute(e,t=!1){const r=this._readAttribute(e,t);if(void 0!==r)return r;for(const s of this._joined){s.setIndex(this.getIndex());const r=s._readAttribute(e,t);if(void 0!==r)return r}}readAttributes(){const e=this._readAttributes();for(const t of this._joined){t.setIndex(this.getIndex());const r=t._readAttributes();for(const t of Object.keys(r))e[t]=r[t]}return e}joinAttributes(e){this._joined.push(e)}readArcadeFeature(){return this}hasField(e){return this.fields.has(e)}geometry(){const e=this.readHydratedGeometry(),t=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_8__.convertToGeometry)(e,this.geometryType,this.hasZ,this.hasM),r=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.fromJSON)(t);return r&&(r.spatialReference=this._arcadeSpatialReference),r}autocastArcadeDate(t,r){return r&&r instanceof Date?this.isUnknownDateTimeField(t)?_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate.unknownDateJSToArcadeDate(r):_arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate.dateJSAndZoneToArcadeDate(r,this.contextTimeZone??_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_10__.system):r}isUnknownDateTimeField(e){return this._layerSchema.fieldsIndex.getTimeZone(e)===_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_10__.unknown}field(t){let i=this.fields.get(t);if(i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_4__.DateOnly.fromReader(this.readAttribute(t,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_5__.TimeOnly.fromReader(this.readAttribute(t,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate.fromReaderAsTimeStampOffset(this.readAttribute(t,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(t,this.readAttribute(t,!0));default:return this.readAttribute(t,!1)}for(const n of this._joined)if(n.setIndex(this.getIndex()),i=n.fields.get(t),i)switch(i.type){case"date-only":case"esriFieldTypeDateOnly":return _core_sql_DateOnly_js__WEBPACK_IMPORTED_MODULE_4__.DateOnly.fromReader(n._readAttribute(t,!1));case"time-only":case"esriFieldTypeTimeOnly":return _core_sql_TimeOnly_js__WEBPACK_IMPORTED_MODULE_5__.TimeOnly.fromReader(n._readAttribute(t,!1));case"esriFieldTypeTimestampOffset":case"timestamp-offset":return _arcade_ArcadeDate_js__WEBPACK_IMPORTED_MODULE_1__.ArcadeDate.fromReaderAsTimeStampOffset(n._readAttribute(t,!1));case"date":case"esriFieldTypeDate":return this.autocastArcadeDate(t,n._readAttribute(t,!0));default:return this.readAttribute(t,!1)}throw new Error(`Field ${t} does not exist`)}setField(e,t){throw new Error("Unable to update feature attribute values, feature is readonly")}keys(){return this.fields.fields.map((e=>e.name))}castToText(e=!1){if(!e)return JSON.stringify(this.readLegacyFeature());const t=this.readLegacyFeature();if(!t)return JSON.stringify(null);const r={geometry:t.geometry,attributes:{...t.attributes??{}}};for(const s in r.attributes){const e=r.attributes[s];e instanceof Date&&(r.attributes[s]=e.getTime())}return JSON.stringify(r)}gdbVersion(){return null}fullSchema(){return this._layerSchema}castAsJson(e=null){return{attributes:this._readAttributes(),geometry:!0===e?.keepGeometryType?this.geometry():this.geometry()?.toJSON()??null}}castAsJsonAsync(e=null,t=null){return Promise.resolve(this.castAsJson(t))}removeIds(e){if(null==this._objectIdToIndex){const e=new Map,r=this.getCursor();for(;r.next();){const s=r.getObjectId();(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.assertIsSome)(s),e.set(s,r.getIndex())}this._objectIdToIndex=e}const r=this._objectIdToIndex;for(const t of e)r.has(t)&&this.removeAtIndex(r.get(t))}removeAtIndex(e){null==this._deleted&&(this._deleted=_StaticBitSet_js__WEBPACK_IMPORTED_MODULE_11__.StaticBitSet.create(this.getSize())),this._deleted.set(e)}readGeometryForDisplay(){return this.readUnquantizedGeometry(!0)}readLegacyGeometryForDisplay(){return this.readLegacyGeometry(!0)}*features(){const e=this.getCursor();for(;e.next();)yield e.readOptimizedFeature()}_getExists(){return null==this._deleted||!this._deleted.has(this.getIndex())}_computeCentroid(){if("esriGeometryPolygon"!==this.geometryType)return null;const e=this.readUnquantizedGeometry();if(!e||e.hasIndeterminateRingOrder)return null;const t=_geometry_GeometryCursor_js__WEBPACK_IMPORTED_MODULE_6__.GeometryCursor.fromOptimized(e,this.geometryType);t.yFactor*=-1;const r=(0,_geometry_support_labelPoint_js__WEBPACK_IMPORTED_MODULE_7__.getLabelPoint)(t);return r?(r[1]*=-1,new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_9__["default"]([],r)):null}copyInto(e){e.seen=this.seen,e._storage=this._storage,e._arcadeSpatialReference=this._arcadeSpatialReference,e._joined=this._joined,e._tx=this._tx,e._ty=this._ty,e._sx=this._sx,e._sy=this._sy,e._deleted=this._deleted,e._objectIdToIndex=this._objectIdToIndex,e.contextTimeZone=this.contextTimeZone}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReaderJSON.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureSetReaderJSON: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../layers/graphics/OptimizedFeature.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../layers/support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./FeatureSetReader.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/FeatureSetReader.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function d({coords:t,lengths:e}){let r=0;for(const s of e){for(let e=1;e<s;e++)t[2*(r+e)]+=t[2*(r+e)-2],t[2*(r+e)+1]+=t[2*(r+e)-1];r+=s}}class h extends _FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetReader{static fromFeatures(e,r){const{objectIdField:s,geometryType:i}=r,n=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.convertFromFeatures)([],e,i,!1,!1,s);for(let t=0;t<n.length;t++)n[t].displayId=e[t].displayId;return h.fromOptimizedFeatures(n,r)}static fromFeatureSet(t,r){const s=(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.convertFromFeatureSet)(t,r.objectIdField);return h.fromOptimizedFeatureSet(s,r)}static fromOptimizedFeatureSet(t,e){const{features:r}=t,s=h.fromOptimizedFeatures(r,e);return s._exceededTransferLimit=t.exceededTransferLimit,s._transform=t.transform,s._fieldsIndex=new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_2__["default"](e.fields),s}static fromOptimizedFeatures(t,e,r){const s=_FeatureSetReader_js__WEBPACK_IMPORTED_MODULE_3__.FeatureSetReader.createInstance(),i=new h(s,t,e);return i._fieldsIndex=new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_2__["default"](e.fields),i._transform=r,i}constructor(t,e,r){super(t,r),this._exceededTransferLimit=!1,this._featureIndex=-1,this._fieldsIndex=null,this._geometryType=r?.geometryType,this._features=e}get fields(){return this._fieldsIndex}get _current(){return this._features[this._featureIndex]}get geometryType(){return this._geometryType}get hasFeatures(){return!!this._features.length}get hasNext(){return this._featureIndex+1<this._features.length}get exceededTransferLimit(){return this._exceededTransferLimit}get hasZ(){return!1}get hasM(){return!1}removeIds(t){const e=new Set(t);this._features=this._features.filter((t=>!(null!=t.objectId&&e.has(t.objectId))))}append(t){for(const e of t)this._features.push(e)}getSize(){return this._features.length}getCursor(){return this.copy()}getQuantizationTransform(){return this._transform}getAttributeHash(){let t="";for(const e in this._current.attributes)t+=this._current.attributes[e];return t}getIndex(){return this._featureIndex}setIndex(t){this._featureIndex=t}getObjectId(){return this._current?.objectId}getDisplayId(){return this._current.displayId}setDisplayId(t){this._current.displayId=t}getGroupId(){return this._current.groupId}setGroupId(t){this._current.groupId=t}copy(){const t=new h(this.instance,this._features,this.fullSchema());return this.copyInto(t),t}next(){for(;++this._featureIndex<this._features.length&&!this._getExists(););return this._featureIndex<this._features.length}readLegacyFeature(){return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.convertToFeature)(this._current,this.geometryType,this.hasZ,this.hasM)}readOptimizedFeature(){return this._current}readLegacyPointGeometry(){return this.readGeometry()?{x:this.getX(),y:this.getY()}:null}readLegacyGeometry(){const t=this.readUnquantizedGeometry();return (0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.convertToGeometry)(t,this.geometryType,this.hasZ,this.hasM)}readLegacyCentroid(){const t=this.readCentroid();return null==t?null:{x:t.coords[0]*this._sx+this._tx,y:t.coords[1]*this._sy+this._ty}}readGeometryArea(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current)?(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getQuantizedArea)(this._current.geometry,2):0}readUnquantizedGeometry(){const t=this.readGeometry();if("esriGeometryPoint"===this.geometryType||!t)return t;const e=t.clone();return d(e),e}readHydratedGeometry(){const t=this._current.geometry;if(null==t)return null;const e=t.clone();return null!=this._transform&&(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_0__.unquantizeOptimizedGeometry)(e,e,this.hasZ,this.hasM,this._transform),e}getXHydrated(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current))return 0;const t=this._current.geometry.coords[0],e=this.getQuantizationTransform();return null==e?t:t*e.scale[0]+e.translate[0]}getYHydrated(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current))return 0;const t=this._current.geometry.coords[1],e=this.getQuantizationTransform();return null==e?t:e.translate[1]-t*e.scale[1]}getX(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current)?this._current.geometry.coords[0]*this._sx+this._tx:0}getY(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current)?this._current.geometry.coords[1]*this._sy+this._ty:0}readGeometry(){if(!(0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current)){if(null!=this._current.centroid){const[t,e]=this._current.centroid.coords;return this.createQuantizedExtrudedGeometry(t,e)}return null}const t=this._current.geometry.clone();if(t.isPoint)return t.coords[0]=t.coords[0]*this._sx+this._tx,t.coords[1]=t.coords[1]*this._sy+this._ty,t;let e=0;for(const r of t.lengths)t.coords[2*e]=t.coords[2*e]*this._sx+this._tx,t.coords[2*e+1]=t.coords[2*e+1]*this._sy+this._ty,e+=r;return t}readCentroid(){return (0,_layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.hasGeometry)(this._current)?this._computeCentroid():this._current.centroid}_readAttribute(t,e){const r=this._fieldsIndex.get(t);if(!r)return;let s=this._current.attributes[r.name];return null==s?s:("esriFieldTypeTimestampOffset"===this.fields.get(t)?.type&&(s=this.parseTimestampOffset(s)),e&&this.fields.isDateField(t)?new Date(s):s)}copyInto(t){super.copyInto(t),t._featureIndex=this._featureIndex,t._transform=this._transform,t._fieldsIndex=this._fieldsIndex}_readAttributes(){return this._current.attributes}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/StaticBitSet.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StaticBitSet: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{static fromBuffer(e,s){return new t(e,s)}static create(e,s=4294967295){const r=new Uint32Array(Math.ceil(e/32));return new t(r,s)}constructor(t,e){this._mask=0,this._buf=t,this._mask=e}_getIndex(t){return Math.floor(t/32)}has(t){const e=this._mask&t;return!!(this._buf[this._getIndex(e)]&1<<e%32)}hasRange(t,e){let s=t,r=e;for(;s%32&&s!==r;){if(this.has(s))return!0;s++}for(;r%32&&s!==r;){if(this.has(s))return!0;r--}if(s===r)return!1;for(let h=s/32;h!==r/32;h++){if(this._buf[h])return!0}return!1}set(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]|=r}setRange(t,e){let s=t,r=e;for(;s%32&&s!==r;)this.set(s++);for(;r%32&&s!==r;)this.set(r--);if(s!==r)for(let h=s/32;h!==r/32;h++)this._buf[h]=4294967295}unset(t){const e=this._mask&t,s=this._getIndex(e),r=1<<e%32;this._buf[s]&=4294967295^r}resize(t){const e=this._buf,s=new Uint32Array(Math.ceil(t/32));s.set(e),this._buf=s}or(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=t._buf[e];return this}and(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=t._buf[e];return this}xor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=t._buf[e];return this}ior(t){for(let e=0;e<this._buf.length;e++)this._buf[e]|=~t._buf[e];return this}iand(t){for(let e=0;e<this._buf.length;e++)this._buf[e]&=~t._buf[e];return this}ixor(t){for(let e=0;e<this._buf.length;e++)this._buf[e]^=~t._buf[e];return this}any(){for(let t=0;t<this._buf.length;t++)if(this._buf[t])return!0;return!1}copy(t){for(let e=0;e<this._buf.length;e++)this._buf[e]=t._buf[e];return this}clone(){return new t(this._buf.slice(),this._mask)}clear(){for(let t=0;t<this._buf.length;t++)this._buf[t]=0}forEachSet(t){for(let e=0;e<this._buf.length;e++){let s=this._buf[e],r=32*e;if(s)for(;s;){1&s&&t(r),s>>>=1,r++}}}countSet(){let t=0;return this.forEachSet((e=>{t++})),t}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19mZWF0dXJlc19zdXBwb3J0X0F0dHJpYnV0ZVN0b3JlX2pzLW5vLWVjMTMxYS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDb3BDLFFBQVEsdURBQUMscUVBQXFFLCtFQUFDLENBQUMsMEVBQUMsT0FBTyxrQkFBa0Isd0RBQUcscUNBQXFDLHdEQUFHLGtCQUFrQixnQkFBZ0Isa0JBQWtCLFFBQVEscUJBQXFCLCtEQUErRCxNQUFNLG1DQUFtQyxHQUFHLHlKQUF5SixhQUFhLHlCQUF5Qiw2QkFBNkIsa0JBQWtCLFlBQVksc0JBQXNCLDhCQUE4QixzREFBc0QsMkJBQTJCLGtCQUFrQixZQUFZLHNCQUFzQixpQ0FBaUMsc0RBQXNELG9CQUFvQixrQkFBa0IsOEhBQThILHlCQUF5QixxSEFBcUgsMkJBQTJCLHNIQUFzSCxhQUFhLFFBQVEsNkVBQUMsSUFBSSxxQ0FBcUMsZUFBZSxRQUFRLDZFQUFDLFdBQVcsc1BBQXNQLE9BQU8saUJBQWlCLHVEQUFDLDZGQUE2RixTQUFTLGlCQUFpQix1REFBQyw2RkFBNkYsVUFBVSxrQ0FBa0MsOEVBQThFLHNCQUFzQixZQUFZLHlEQUF5RCxtQkFBbUIsbUJBQW1CLDBGQUEwRixPQUFPLHVFQUF1RSxtQkFBbUIsdURBQXVELDBFQUFDLDhDQUE4QyxZQUFZLFdBQVcsZ0JBQWdCLFNBQVMsY0FBYyw0Q0FBNEMsUUFBUSxpQkFBaUIsc0RBQXNELDZFQUFDLGdEQUFnRCxvRUFBQyw0TUFBNE0sK0JBQStCLHVEQUFDLE9BQU8sdURBQUMsZUFBZSw2QkFBNkIsc0NBQXNDLHlDQUF5QyxVQUFVLHVEQUFDLHdCQUF3QixFQUFFLFVBQVUsdURBQUMsd0NBQXdDLEVBQUUsVUFBVSx1REFBQyx3Q0FBd0MsRUFBRSxzQkFBc0IsRUFBRSxzQkFBc0IsRUFBRSxzQkFB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QVksT0FBTyxZQUFZLG1CQUFtQiw0QkFBNEIsWUFBWSxPQUFPLFlBQVksbUJBQW1CLDZCQUE2QixZQUFZLFFBQVEsWUFBWSxtQkFBbUIsNkJBQTZCLFlBQVksUUFBUSxZQUFZLG1CQUFtQiw2QkFBNkIsWUFBWSxNQUFNLFlBQVksbUJBQW1CLDZCQUE2QixTQUFTLFFBQVEsWUFBWSxtQkFBbUIsMkJBQTJCLFlBQVksUUFBUSwyQ0FBMkMsUUFBUSxZQUFZLG1CQUFtQixtQkFBbUIsY0FBYyxZQUFZLG1CQUFtQixLQUFLLDBCQUEwQixVQUFVLEVBQUUsRUFBRSx1QkFBdUIsV0FBVyxRQUFRLDRCQUE0QixJQUFJLE1BQWdDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy9zdXBwb3J0L0F0dHJpYnV0ZVN0b3JlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvc3VwcG9ydC9Db21wdXRlZEF0dHJpYnV0ZVN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy9zdXBwb3J0L0Rpc3BsYXlJZEdlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3N1cHBvcnQvRmVhdHVyZVNldFJlYWRlci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3N1cHBvcnQvRmVhdHVyZVNldFJlYWRlckpTT04uanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy9zdXBwb3J0L1N0YXRpY0JpdFNldC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtjbGFtcCBhcyBpfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIHMsaXNBYm9ydEVycm9yIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7ZGlmZiBhcyBhfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RpZmZVdGlscy5qc1wiO2ltcG9ydHtVcGRhdGluZ0hhbmRsZXMgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL3N1cHBvcnQvVXBkYXRpbmdIYW5kbGVzLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnR7bWF4RmlsdGVycyBhcyBsLGhpZ2hsaWdodEZsYWcgYXMgaCxhdHRyaWJ1dGVEYXRhVnYgYXMgdSxuYW5NYWdpY051bWJlciBhcyBkLGF0dHJpYnV0ZURhdGFBbmltYXRpb24gYXMgcCxhdHRyaWJ1dGVEYXRhR3BncHUgYXMgY31mcm9tXCIuLi8uLi8uLi9lbmdpbmUvd2ViZ2wvZGVmaW5pdGlvbnMuanNcIjtpbXBvcnR7ZGlzcGxheUlkVHlwZUFnZ3JlZ2F0ZSBhcyBnLGRpc3BsYXlJZFR5cGVGZWF0dXJlIGFzIF8sZ2V0RGlzcGxheUlkVGV4ZWwgYXMgZixnZXREaXNwbGF5SWRUeXBlIGFzIG0sZ2V0RGlzcGxheUlkRmlsdGVyTWFzayBhcyB5fWZyb21cIi4uLy4uLy4uL2VuZ2luZS93ZWJnbC9EaXNwbGF5SWQuanNcIjtpbXBvcnR7Z2V0UGl4ZWxBcnJheUN0b3IgYXMgYn1mcm9tXCIuLi8uLi8uLi9lbmdpbmUvd2ViZ2wvVXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlRGVidWdMb2dnZXIgYXMgeCxkZWJ1Z0F0dHJVcGRhdGVzIGFzIFN9ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL3V0aWwvZGVidWcuanNcIjtpbXBvcnR7Z2V0VmlzdWFsVmFyaWFibGVTaXplVmFsdWVSZXByZXNlbnRhdGlvblJhdGlvIGFzIFR9ZnJvbVwiLi4vdGlsZVJlbmRlcmVycy9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlc1V0aWxzLmpzXCI7aW1wb3J0e1BpeGVsVHlwZSBhcyB6fWZyb21cIi4uLy4uLy4uLy4uL3dlYmdsL2VudW1zLmpzXCI7Y29uc3QgVT1lLmdldExvZ2dlcihcImVzcmkudmlld3MubGF5ZXJzLjJkLmZlYXR1cmVzLnN1cHBvcnQuQXR0cmlidXRlU3RvcmVcIiksQT14KFMsVSksRT17c2hhcmVkQXJyYXlCdWZmZXI6aGFzKFwiZXNyaS1zaGFyZWQtYXJyYXktYnVmZmVyXCIpLGF0b21pY3M6aGFzKFwiZXNyaS1hdG9taWNzXCIpfTtmdW5jdGlvbiB3KHQsZSl7cmV0dXJuIGk9PmUodChpKSl9Y2xhc3MgRHtjb25zdHJ1Y3Rvcih0LGUsaSxzKXt0aGlzLnNpemU9MCx0aGlzLnRleGVsU2l6ZT00LHRoaXMuZGlydHlTdGFydD0wLHRoaXMuZGlydHlFbmQ9MDtjb25zdHtwaXhlbFR5cGU6cixsYXlvdXQ6YSx0ZXh0dXJlT25seTpufT1zO3RoaXMudGV4dHVyZU9ubHk9bnx8ITEsdGhpcy5waXhlbFR5cGU9cix0aGlzLl9jdHlwZT1lLHRoaXMubGF5b3V0PWEsdGhpcy5fcmVzZXRSYW5nZSgpLHRoaXMuX3NoYXJlZD10LHRoaXMuc2l6ZT1pLG58fCh0aGlzLmRhdGE9dGhpcy5faW5pdERhdGEocixpLHQsZSkpfWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5kYXRhPy5idWZmZXJ9dW5zZXRDb21wb25lbnRBbGxUZXhlbHModCxlKXtjb25zdCBpPXRoaXMuZGF0YTtmb3IobGV0IHM9MDtzPHRoaXMuc2l6ZSp0aGlzLnNpemU7cysrKWlbcyp0aGlzLnRleGVsU2l6ZSt0XSY9fmU7dGhpcy5kaXJ0eVN0YXJ0PTAsdGhpcy5kaXJ0eUVuZD10aGlzLnNpemUqdGhpcy5zaXplLTF9c2V0Q29tcG9uZW50QWxsVGV4ZWxzKHQsZSl7Y29uc3QgaT10aGlzLmRhdGE7Zm9yKGxldCBzPTA7czx0aGlzLnNpemUqdGhpcy5zaXplO3MrKylpW3MqdGhpcy50ZXhlbFNpemUrdF18PTI1NSZlO3RoaXMuZGlydHlTdGFydD0wLHRoaXMuZGlydHlFbmQ9dGhpcy5zaXplKnRoaXMuc2l6ZS0xfXNldENvbXBvbmVudCh0LGUsaSl7Y29uc3Qgcz10aGlzLmRhdGE7Zm9yKGNvbnN0IHIgb2YgaSlzW3IqdGhpcy50ZXhlbFNpemUrdF18PWUsdGhpcy5kaXJ0eVN0YXJ0PU1hdGgubWluKHRoaXMuZGlydHlTdGFydCxyKSx0aGlzLmRpcnR5RW5kPU1hdGgubWF4KHRoaXMuZGlydHlFbmQscil9c2V0Q29tcG9uZW50VGV4ZWwodCxlLGkpe3RoaXMuZGF0YVtpKnRoaXMudGV4ZWxTaXplK3RdfD1lLHRoaXMuZGlydHlTdGFydD1NYXRoLm1pbih0aGlzLmRpcnR5U3RhcnQsaSksdGhpcy5kaXJ0eUVuZD1NYXRoLm1heCh0aGlzLmRpcnR5RW5kLGkpfXVuc2V0Q29tcG9uZW50VGV4ZWwodCxlLGkpe3RoaXMuZGF0YVtpKnRoaXMudGV4ZWxTaXplK3RdJj1+ZSx0aGlzLmRpcnR5U3RhcnQ9TWF0aC5taW4odGhpcy5kaXJ0eVN0YXJ0LGkpLHRoaXMuZGlydHlFbmQ9TWF0aC5tYXgodGhpcy5kaXJ0eUVuZCxpKX1nZXREYXRhKHQsZSl7Y29uc3QgaT1mKHQpO3JldHVybiB0aGlzLmRhdGFbaSp0aGlzLnRleGVsU2l6ZStlXX1zZXREYXRhKHQsZSxpKXtjb25zdCBzPWYodCkscj0xPDxlOzAhPSh0aGlzLmxheW91dCZyKT9udWxsIT10aGlzLmRhdGEmJih0aGlzLmRhdGFbcyp0aGlzLnRleGVsU2l6ZStlXT1pLHRoaXMuZGlydHlTdGFydD1NYXRoLm1pbih0aGlzLmRpcnR5U3RhcnQscyksdGhpcy5kaXJ0eUVuZD1NYXRoLm1heCh0aGlzLmRpcnR5RW5kLHMpKTpVLmVycm9yKFwibWFwdmlldy1hdHRyaWJ1dGVzLXN0b3JlXCIsXCJUcmllZCB0byBzZXQgYSB2YWx1ZSBmb3IgYSB0ZXhlbCdzIHJlYWRvbmx5IGNvbXBvbmVudFwiKX1sb2NrKCl7dGhpcy5waXhlbFR5cGU9PT16LlVOU0lHTkVEX0JZVEUmJnRoaXMuX3NoYXJlZCYmRS5hdG9taWNzJiZcImxvY2FsXCIhPT10aGlzLl9jdHlwZSYmQXRvbWljcy5zdG9yZSh0aGlzLmRhdGEsMCwxKX11bmxvY2soKXt0aGlzLnBpeGVsVHlwZT09PXouVU5TSUdORURfQllURSYmdGhpcy5fc2hhcmVkJiZFLmF0b21pY3MmJlwibG9jYWxcIiE9PXRoaXMuX2N0eXBlJiZBdG9taWNzLnN0b3JlKHRoaXMuZGF0YSwwLDApfWV4cGFuZCh0KXtpZih0aGlzLnNpemU9dCwhdGhpcy50ZXh0dXJlT25seSl7Y29uc3QgZT10aGlzLl9pbml0RGF0YSh0aGlzLnBpeGVsVHlwZSx0LHRoaXMuX3NoYXJlZCx0aGlzLl9jdHlwZSksaT10aGlzLmRhdGE7ZS5zZXQoaSksdGhpcy5kYXRhPWV9fXRvTWVzc2FnZSgpe2NvbnN0IHQ9dGhpcy5kaXJ0eVN0YXJ0LGU9dGhpcy5kaXJ0eUVuZCxpPXRoaXMudGV4ZWxTaXplO2lmKHQ+ZSlyZXR1cm4gbnVsbDt0aGlzLl9yZXNldFJhbmdlKCk7Y29uc3Qgcz0hKHRoaXMuX3NoYXJlZHx8XCJsb2NhbFwiPT09dGhpcy5fY3R5cGUpLHI9dGhpcy5waXhlbFR5cGUsYT10aGlzLmxheW91dCxuPXRoaXMuZGF0YTtyZXR1cm57c3RhcnQ6dCxlbmQ6ZSxkYXRhOnMmJm4uc2xpY2UodCppLChlKzEpKmkpfHxudWxsLHBpeGVsVHlwZTpyLGxheW91dDphfX1faW5pdERhdGEodCxlLGkscyl7Y29uc3Qgcj1pJiZcImxvY2FsXCIhPT1zP1NoYXJlZEFycmF5QnVmZmVyOkFycmF5QnVmZmVyLGE9Yih0KSxuPW5ldyBhKG5ldyByKGUqZSo0KmEuQllURVNfUEVSX0VMRU1FTlQpKTtmb3IobGV0IG89MDtvPG4ubGVuZ3RoO28rPTQpbltvKzFdPTI1NTtyZXR1cm4gbn1fcmVzZXRSYW5nZSgpe3RoaXMuZGlydHlTdGFydD0yMTQ3NDgzNjQ3LHRoaXMuZGlydHlFbmQ9MH19Y2xhc3Mga3tjb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX2NsaWVudD10LHRoaXMuY29uZmlnPWUsdGhpcy51cGRhdGluZ0hhbmRsZXM9bmV3IG4sdGhpcy5fYmxvY2tzPW5ldyBBcnJheSx0aGlzLl9maWx0ZXJzPW5ldyBBcnJheShsKSx0aGlzLl9hdHRyaWJ1dGVDb21wdXRlSW5mbz1udWxsLHRoaXMuX3RhcmdldFR5cGU9MCx0aGlzLl9hYm9ydENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcix0aGlzLl9oYXNTY2FsZUV4cHI9ITEsdGhpcy5fc2l6ZT0zMix0aGlzLl9uZXh0VXBkYXRlPW51bGwsdGhpcy5fY3VyclVwZGF0ZT1udWxsLHRoaXMuX2lkc1RvSGlnaGxpZ2h0PW5ldyBTZXQ7Y29uc3QgaT1lLnN1cHBvcnRzVGV4dHVyZUZsb2F0P3ouRkxPQVQ6ei5VTlNJR05FRF9CWVRFO0EoYENyZWF0aW5nIEF0dHJpYnV0ZVN0b3JlICR7RS5zaGFyZWRBcnJheUJ1ZmZlcj9cIndpdGhcIjpcIndpdGhvdXRcIn0gc2hhcmVkIG1lbW9yeWApLHRoaXMuX2Jsb2NrRGVzY3JpcHRvcnM9W3twaXhlbFR5cGU6ei5VTlNJR05FRF9CWVRFLGxheW91dDoxfSx7cGl4ZWxUeXBlOnouVU5TSUdORURfQllURSxsYXlvdXQ6MTUsdGV4dHVyZU9ubHk6ITB9LHtwaXhlbFR5cGU6ei5VTlNJR05FRF9CWVRFLGxheW91dDoxNSx0ZXh0dXJlT25seTohMH0se3BpeGVsVHlwZTppLGxheW91dDoxNX0se3BpeGVsVHlwZTppLGxheW91dDoxNX0se3BpeGVsVHlwZTppLGxheW91dDoxNX0se3BpeGVsVHlwZTppLGxheW91dDoxNX1dLHRoaXMuX2Jsb2Nrcz10aGlzLl9ibG9ja0Rlc2NyaXB0b3JzLm1hcCgoKCk9Pm51bGwpKX1kZXN0cm95KCl7dGhpcy5fYWJvcnRDb250cm9sbGVyLmFib3J0KCksdGhpcy51cGRhdGluZ0hhbmRsZXMuZGVzdHJveSgpfWdldCBoYXNTY2FsZUV4cHIoKXtyZXR1cm4gdGhpcy5faGFzU2NhbGVFeHByfWdldCBfc2lnbmFsKCl7cmV0dXJuIHRoaXMuX2Fib3J0Q29udHJvbGxlci5zaWduYWx9Z2V0IGhhc0hpZ2hsaWdodCgpe3JldHVybiB0aGlzLl9pZHNUb0hpZ2hsaWdodC5zaXplPjB9aXNVcGRhdGluZygpe2NvbnN0IHQ9dGhpcy51cGRhdGluZ0hhbmRsZXMudXBkYXRpbmd8fCEhdGhpcy5fbmV4dFVwZGF0ZTtyZXR1cm4gaGFzKFwiZXNyaS0yZC1sb2ctdXBkYXRpbmdcIikmJmNvbnNvbGUubG9nKGBVcGRhdGluZyBBdHRyaWJ1dGVTdG9yZTogJHt0fVxcbiAgLT4gdXBkYXRpbmdIYW5kbGVzICR7dGhpcy51cGRhdGluZ0hhbmRsZXMudXBkYXRpbmd9IChjdXJyVXBkYXRlOiAkeyEhdGhpcy5fY3VyclVwZGF0ZX0pXFxuICAtPiBuZXh0VXBkYXRlOiAkeyEhdGhpcy5fbmV4dFVwZGF0ZX1cXG5gKSx0fXVwZGF0ZSh0LGUpe3RoaXMuY29uZmlnPWU7Y29uc3QgaT1lLnNjaGVtYS5wcm9jZXNzb3JzWzBdLnN0b3JhZ2Uscz1hKHRoaXMuX3NjaGVtYSxpKTtpZigodC50YXJnZXRzLmZlYXR1cmV8fHQudGFyZ2V0cy5hZ2dyZWdhdGUpJiYodC5zdG9yYWdlLmRhdGE9ITApLHMmJihoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkFwcGx5aW5nIFVwZGF0ZSAtIEF0dHJpYnV0ZVN0b3JlOlwiLHMpLHQuc3RvcmFnZS5kYXRhPSEwLHRoaXMuX3NjaGVtYT1pLHRoaXMuX2F0dHJpYnV0ZUNvbXB1dGVJbmZvPW51bGwsbnVsbCE9aSkpe3N3aXRjaChpLnRhcmdldCl7Y2FzZVwiZmVhdHVyZVwiOnRoaXMuX3RhcmdldFR5cGU9XzticmVhaztjYXNlXCJhZ2dyZWdhdGVcIjp0aGlzLl90YXJnZXRUeXBlPWd9aWYoXCJzdWJ0eXBlXCI9PT1pLnR5cGUpe3RoaXMuX2F0dHJpYnV0ZUNvbXB1dGVJbmZvPXtpc1N1YnR5cGU6ITAsc3VidHlwZUZpZWxkOmkuc3VidHlwZUZpZWxkLG1hcDpuZXcgTWFwfTtmb3IoY29uc3QgdCBpbiBpLm1hcHBpbmcpe2NvbnN0IGU9aS5tYXBwaW5nW3RdO2lmKG51bGwhPWU/LnZ2TWFwcGluZylmb3IoY29uc3QgaSBvZiBlLnZ2TWFwcGluZyl0aGlzLl9iaW5kQXR0cmlidXRlKGkscGFyc2VJbnQodCwxMCkpfX1lbHNle2lmKHRoaXMuX2F0dHJpYnV0ZUNvbXB1dGVJbmZvPXtpc1N1YnR5cGU6ITEsbWFwOm5ldyBNYXB9LG51bGwhPWkudnZNYXBwaW5nKWZvcihjb25zdCB0IG9mIGkudnZNYXBwaW5nKXRoaXMuX2JpbmRBdHRyaWJ1dGUodCk7aWYobnVsbCE9aS5hdHRyaWJ1dGVNYXBwaW5nKWZvcihjb25zdCB0IG9mIGkuYXR0cmlidXRlTWFwcGluZyl0aGlzLl9iaW5kQXR0cmlidXRlKHQpfX19b25UaWxlRGF0YSh0LGUpe2lmKG51bGw9PWUuYWRkT3JVcGRhdGUpcmV0dXJuO2NvbnN0IGk9ZS5hZGRPclVwZGF0ZS5nZXRDdXJzb3IoKTtmb3IoO2kubmV4dCgpOyl7Y29uc3QgdD1pLmdldERpc3BsYXlJZCgpO3RoaXMuc2V0QXR0cmlidXRlRGF0YSh0LGkpfX1hc3luYyBzZXRIaWdobGlnaHQodCxlKXtjb25zdCBpPTEscz10aGlzLl9nZXRCbG9jaygwKSxyPWUubWFwKCh0PT5mKHQpKSk7cy5sb2NrKCkscy51bnNldENvbXBvbmVudEFsbFRleGVscygwLGkpLHMuc2V0Q29tcG9uZW50KDAsaSxyKSxzLnVubG9jaygpLHRoaXMuX2lkc1RvSGlnaGxpZ2h0LmNsZWFyKCk7Zm9yKGNvbnN0IGEgb2YgdCl0aGlzLl9pZHNUb0hpZ2hsaWdodC5hZGQoYSk7YXdhaXQgdGhpcy5zZW5kVXBkYXRlcygpfWFzeW5jIHVwZGF0ZUZpbHRlcnModCxlLGkpe2hhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKFwiQXR0cmlidXRlU3RvcmU6OnVwZGF0ZUZpbHRlcnNcIik7Y29uc3R7c2VydmljZTpzLHNwYXRpYWxSZWZlcmVuY2U6cn09aSx7ZmlsdGVyczphfT1lLG49YS5tYXAoKCh0LGUpPT50aGlzLl91cGRhdGVGaWx0ZXIodCxlLHMscikpKSxvPShhd2FpdCBQcm9taXNlLmFsbChuKSkuc29tZSgodD0+dCkpO2hhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKFwiQXR0cmlidXRlU3RvcmU6OnVwZGF0ZUZpbHRlcnMgLSBmaW5zaWhlZFwiKSxvJiYodC5zdG9yYWdlLmZpbHRlcnM9ITAsaGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJBcHBseWluZyBVcGRhdGUgLSBBdHRyaWJ1dGVTdG9yZTpcIixcIkZpbHRlcnMgY2hhbmdlZFwiKSl9c2V0RGF0YSh0LGUsaSxzKXtjb25zdCByPWYodCk7dGhpcy5fZW5zdXJlU2l6ZUZvclRleGVsKHIpLHRoaXMuX2dldEJsb2NrKGUpLnNldERhdGEodCxpLHMpfWdldERhdGEodCxlLGkpe3JldHVybiB0aGlzLl9nZXRCbG9jayhlKS5nZXREYXRhKHQsaSl9Z2V0SGlnaGxpZ2h0RmxhZyh0KXtyZXR1cm4gdGhpcy5faWRzVG9IaWdobGlnaHQuaGFzKHQpP2g6MH11bnNldEF0dHJpYnV0ZURhdGEodCl7Y29uc3QgZT1mKHQpO3RoaXMuX2dldEJsb2NrKDApLnNldERhdGEoZSwwLDApfXNldEF0dHJpYnV0ZURhdGEodCxlKXtjb25zdCBzPWYodCk7aWYodGhpcy5fZW5zdXJlU2l6ZUZvclRleGVsKHMpLHRoaXMuX2dldEJsb2NrKDApLnNldERhdGEocywwLHRoaXMuZ2V0RmlsdGVyRmxhZ3MoZSkpLHRoaXMuX3RhcmdldFR5cGUhPT1tKHQpKXJldHVybjtjb25zdCByPXRoaXMuX2F0dHJpYnV0ZUNvbXB1dGVJbmZvLGE9dGhpcy5jb25maWcuc3VwcG9ydHNUZXh0dXJlRmxvYXQ/MToyLG49NDtsZXQgbz1udWxsO3ImJihvPXIuaXNTdWJ0eXBlP3IubWFwLmdldChlLnJlYWRBdHRyaWJ1dGUoci5zdWJ0eXBlRmllbGQpKTpyLm1hcCxvPy5zaXplJiZvLmZvckVhY2goKCh0LHIpPT57Y29uc3Qgbz1yKmElbixsPU1hdGguZmxvb3IociphL24pLGg9dGhpcy5fZ2V0QmxvY2sobCt1KSxwPXQoZSk7aWYodGhpcy5jb25maWcuc3VwcG9ydHNUZXh0dXJlRmxvYXQpaC5zZXREYXRhKHMsbyxwKTtlbHNlIGlmKHA9PT1kKWguc2V0RGF0YShzLG8sMjU1KSxoLnNldERhdGEocyxvKzEsMjU1KTtlbHNle2NvbnN0IHQ9aShNYXRoLnJvdW5kKHApLC0zMjc2NywzMjc2NikrMzI3NjgsZT0yNTUmdCxyPSg2NTI4MCZ0KT4+ODtoLnNldERhdGEocyxvLGUpLGguc2V0RGF0YShzLG8rMSxyKX19KSkpfXNlbmRVcGRhdGVzKCl7aWYoaGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJBdHRyaWJ1dGVTdG9yZTo6c2VuZFVwZGF0ZVwiKSx0aGlzLl9uZXh0VXBkYXRlKXJldHVybiB0aGlzLl9uZXh0VXBkYXRlLnByb21pc2U7aWYodGhpcy5fY3VyclVwZGF0ZSlyZXR1cm4gdGhpcy5fbmV4dFVwZGF0ZT1zKCksdGhpcy51cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl9uZXh0VXBkYXRlLnByb21pc2UpLHRoaXMuX25leHRVcGRhdGUucHJvbWlzZTtjb25zdCBlPXtibG9ja3M6dGhpcy5fYmxvY2tzLm1hcCgodD0+bnVsbCE9dD90LnRvTWVzc2FnZSgpOm51bGwpKX07cmV0dXJuIHRoaXMuX2N1cnJVcGRhdGU9dGhpcy5fY3JlYXRlUmVzb3VyY2VzKCkudGhlbigoKCk9Pntjb25zdCB0PSgpPT57aWYodGhpcy5fY3VyclVwZGF0ZT1udWxsLHRoaXMuX25leHRVcGRhdGUpe2NvbnN0IHQ9dGhpcy5fbmV4dFVwZGF0ZTt0aGlzLl9uZXh0VXBkYXRlPW51bGwsdGhpcy5zZW5kVXBkYXRlcygpLnRoZW4oKCgpPT50LnJlc29sdmUoKSkpfWVsc2UgaGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJBdHRyaWJ1dGVTdG9yZTo6c2VuZFVwZGF0ZTo6Tm8gYWRkaXRpb25hbCB1cGRhdGVzIHF1ZXVlZFwiKX07aGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJBdHRyaWJ1dGVTdG9yZTo6c2VuZFVwZGF0ZTo6Y2xpZW50LnVwZGF0ZVwiKTtjb25zdCBpPXRoaXMudXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fY2xpZW50LnVwZGF0ZShlLHRoaXMuX3NpZ25hbCkudGhlbih0KS5jYXRjaCh0KSk7cmV0dXJuIHRoaXMuX2NsaWVudC5yZW5kZXIodGhpcy5fc2lnbmFsKSxpfSkpLmNhdGNoKChlPT57aWYocihlKSlyZXR1cm4gdGhpcy5fY3JlYXRlUmVzb3VyY2VzUHJvbWlzZT1udWxsLHRoaXMuX2NyZWF0ZVJlc291cmNlcygpO1UuZXJyb3IobmV3IHQoXCJtYXB2aWV3LWF0dHJpYnV0ZS1zdG9yZVwiLFwiRW5jb3VudGVyZWQgYW4gZXJyb3IgZHVyaW5nIGNsaWVudCB1cGRhdGVcIixlKSl9KSksdGhpcy5fY3VyclVwZGF0ZX1fZW5zdXJlU2l6ZUZvclRleGVsKHQpe2Zvcig7dD49dGhpcy5fc2l6ZSp0aGlzLl9zaXplOylpZih0aGlzLl9leHBhbmQoKSlyZXR1cm59X2JpbmRBdHRyaWJ1dGUodCxlKXtmdW5jdGlvbiBpKCl7Y29uc3R7bm9ybWFsaXphdGlvbkZpZWxkOmV9PXQ7cmV0dXJuIGU/aT0+e2NvbnN0IHM9aS5yZWFkQXR0cmlidXRlKGUpO2lmKCFzKXJldHVybiBudWxsO3JldHVybiBpLnJlYWRBdHRyaWJ1dGUodC5maWVsZCkvc306ZT0+ZS5yZWFkQXR0cmlidXRlKHQuZmllbGQpfWZ1bmN0aW9uIHMoKXtyZXR1cm4gdC5ub3JtYWxpemF0aW9uRmllbGQmJlUud2FybihcIm1hcHZpZXctYXJjYWRlXCIsXCJJZ25vcmluZyBub3JtYWxpemF0aW9uRmllbGQgc3BlY2lmaWVkIHdpdGggYW4gYXJjYWRlIGV4cHJlc3Npb24gd2hpY2ggaXMgbm90IHN1cHBvcnRlZC5cIiksZT0+ZS5nZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KHQuZmllbGRJbmRleCl9bGV0IHI7aWYobnVsbCE9dC5maWVsZEluZGV4KXI9cygpO2Vsc2V7aWYoIXQuZmllbGQpcmV0dXJuO3I9aSgpfWNvbnN0e3ZhbHVlUmVwcmVzZW50YXRpb246YX09dDtpZihhKXtyPXcociwodD0+VCh0LGEpKSl9Y29uc3Qgbj10PT5udWxsPT09dHx8aXNOYU4odCl8fHQ9PT0xLzB8fHQ9PT0tMS8wP2Q6dCxvPXRoaXMuX2F0dHJpYnV0ZUNvbXB1dGVJbmZvO2lmKG8uaXNTdWJ0eXBlKXtjb25zdCBpPW8ubWFwLmdldChlKT8/bmV3IE1hcDtpLnNldCh0LmJpbmRpbmcsdyhyLG4pKSxvLm1hcC5zZXQoZSxpKX1lbHNlIG8ubWFwLnNldCh0LmJpbmRpbmcsdyhyLG4pKX1fY3JlYXRlUmVzb3VyY2VzKCl7aWYobnVsbCE9dGhpcy5fY3JlYXRlUmVzb3VyY2VzUHJvbWlzZSlyZXR1cm4gdGhpcy5fY3JlYXRlUmVzb3VyY2VzUHJvbWlzZTt0aGlzLl9nZXRCbG9jayhwKSx0aGlzLl9nZXRCbG9jayhjKSxBKFwiSW5pdGlhbGl6aW5nIEF0dHJpYnV0ZVN0b3JlXCIpO2NvbnN0IGU9e3NoYXJlZDpFLnNoYXJlZEFycmF5QnVmZmVyJiYhKFwibG9jYWxcIj09PXRoaXMuX2NsaWVudC50eXBlKSxzaXplOnRoaXMuX3NpemUsYmxvY2tzOnRoaXMuX2Jsb2Nrcy5tYXAoKHQ9Pm51bGwhPXQ/e3RleHR1cmVPbmx5OnQudGV4dHVyZU9ubHksYnVmZmVyOnQuYnVmZmVyLHBpeGVsVHlwZTp0LnBpeGVsVHlwZX06bnVsbCkpfSxpPXRoaXMuX2NsaWVudC5pbml0aWFsaXplKGUsdGhpcy5fc2lnbmFsKS5jYXRjaCgoZT0+e3IoZSk/dGhpcy5fY3JlYXRlUmVzb3VyY2VzUHJvbWlzZT1udWxsOlUuZXJyb3IobmV3IHQoXCJtYXB2aWV3LWF0dHJpYnV0ZS1zdG9yZVwiLFwiRW5jb3VudGVyZWQgYW4gZXJyb3IgZHVyaW5nIGNsaWVudCBpbml0aWFsaXphdGlvblwiLGUpKX0pKTtyZXR1cm4gdGhpcy5fY3JlYXRlUmVzb3VyY2VzUHJvbWlzZT1pLGkudGhlbigoKCk9Pm51bGw9PXRoaXMuX2NyZWF0ZVJlc291cmNlc1Byb21pc2U/dGhpcy5fY3JlYXRlUmVzb3VyY2VzKCk6dm9pZCAwKSksaX1fZ2V0QmxvY2sodCl7Y29uc3QgZT10aGlzLl9ibG9ja3NbdF07aWYobnVsbCE9ZSlyZXR1cm4gZTtBKGBJbml0aWFsaXppbmcgQXR0cmlidXRlQmxvY2sgYXQgaW5kZXggJHt0fWApO2NvbnN0IGk9RS5zaGFyZWRBcnJheUJ1ZmZlcixzPXRoaXMuX2NsaWVudC50eXBlLHI9bmV3IEQoaSxzLHRoaXMuX3NpemUsdGhpcy5fYmxvY2tEZXNjcmlwdG9yc1t0XSk7cmV0dXJuIHRoaXMuX2Jsb2Nrc1t0XT1yLHRoaXMuX2NyZWF0ZVJlc291cmNlc1Byb21pc2U9bnVsbCxyfV9leHBhbmQoKXtpZih0aGlzLl9zaXplPHRoaXMuY29uZmlnLm1heFRleHR1cmVTaXplKXtjb25zdCB0PXRoaXMuX3NpemU8PD0xO0EoXCJFeHBhbmRpbmcgYmxvY2sgc2l6ZSB0b1wiLHQsdGhpcy5fYmxvY2tzKTtmb3IoY29uc3QgZSBvZiB0aGlzLl9ibG9ja3MpZT8uZXhwYW5kKHQpO3JldHVybiB0aGlzLl9jcmVhdGVSZXNvdXJjZXNQcm9taXNlPW51bGwsdGhpcy5fc2l6ZT10LDB9cmV0dXJuIFUuZXJyb3IobmV3IHQoXCJtYXB2aWV3LWxpbWl0YXRpb25zXCIsXCJNYXhpbXVtIG51bWJlciBvZiBvbnNjcmVlbiBmZWF0dXJlcyBleGNlZWRlZC5cIikpLC0xfWFzeW5jIF91cGRhdGVGaWx0ZXIodCxlLGkscyl7Y29uc3Qgcj10aGlzLl9maWx0ZXJzW2VdLGE9bnVsbCE9ciYmci5oYXNoO2lmKCFyJiYhdClyZXR1cm4hMTtpZihhPT09SlNPTi5zdHJpbmdpZnkodCkpcmV0dXJuITE7aWYobnVsbD09dCl7aWYoIXIpcmV0dXJuITE7Y29uc3QgdD0xPDxlKzEsaT10aGlzLl9nZXRCbG9jaygwKTtyZXR1cm4gdGhpcy5fZmlsdGVyc1tlXT1udWxsLGkuc2V0Q29tcG9uZW50QWxsVGV4ZWxzKDAsdCksdGhpcy5zZW5kVXBkYXRlcygpLCEwfWNvbnN0IG49YXdhaXQgdGhpcy5fZ2V0RmlsdGVyKGUsaSk7cmV0dXJuIGF3YWl0IG4udXBkYXRlKHQscyksITB9YXN5bmMgX2dldEZpbHRlcih0LGUpe2NvbnN0IGk9dGhpcy5fZmlsdGVyc1t0XTtpZihudWxsIT1pKXJldHVybiBpO2NvbnN0e2RlZmF1bHQ6c309YXdhaXQgaW1wb3J0KFwiLi9GZWF0dXJlRmlsdGVyLmpzXCIpLHI9bmV3IHMoe2dlb21ldHJ5VHlwZTplLmdlb21ldHJ5VHlwZSxoYXNNOiExLGhhc1o6ITEsdGltZUluZm86ZS50aW1lSW5mbyxmaWVsZHNJbmRleDpvLmZyb21KU09OKGUuZmllbGRzSW5kZXgpfSk7cmV0dXJuIHRoaXMuX2ZpbHRlcnNbdF09cixyfWlzVmlzaWJsZSh0KXtyZXR1cm4hISgyJnRoaXMuX2dldEJsb2NrKDApLmdldERhdGEodCwwKSl9Z2V0RmlsdGVyRmxhZ3ModCl7bGV0IGU9MDtjb25zdCBpPXkodC5nZXREaXNwbGF5SWQoKSk7Zm9yKGxldCByPTA7cjx0aGlzLl9maWx0ZXJzLmxlbmd0aDtyKyspe2NvbnN0IHM9ISEoaSYxPDxyKSxhPXRoaXMuX2ZpbHRlcnNbcl07ZXw9KCFzfHxudWxsPT1hfHxhLmNoZWNrKHQpPzE6MCk8PHJ9bGV0IHM9MDtpZih0aGlzLl9pZHNUb0hpZ2hsaWdodC5zaXplKXtjb25zdCBlPXQuZ2V0T2JqZWN0SWQoKTtzPXRoaXMuZ2V0SGlnaGxpZ2h0RmxhZyhlKX1yZXR1cm4gZTw8MXxzfX1leHBvcnR7ayBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZGlzcGxheUlkVGV4ZWxNYXNrIGFzIHQsY3JlYXRlRGlzcGxheUlkIGFzIGV9ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL0Rpc3BsYXlJZC5qc1wiO2ltcG9ydHtEaXNwbGF5SWRHZW5lcmF0b3IgYXMgc31mcm9tXCIuL0Rpc3BsYXlJZEdlbmVyYXRvci5qc1wiO2ltcG9ydHtTdGF0aWNCaXRTZXQgYXMgaX1mcm9tXCIuL1N0YXRpY0JpdFNldC5qc1wiO2Z1bmN0aW9uIG4odCxlLHMpe2lmKCEodC5sZW5ndGg+ZSkpZm9yKDt0Lmxlbmd0aDw9ZTspdC5wdXNoKHMpfWNsYXNzIHJ7Y29uc3RydWN0b3IoKXt0aGlzLl9udW1lcmljcz1bXSx0aGlzLl9zdHJpbmdzPVtdLHRoaXMuX2lkR2VuZXJhdG9yPW5ldyBzLHRoaXMuX2FsbG9jYXRlZFNpemU9MjU2LHRoaXMuX2JpdHNldHM9W10sdGhpcy5faW5zdGFuY2VJZHM9W10sdGhpcy5fYm91bmRzPVtdfWNyZWF0ZUJpdHNldCgpe2NvbnN0IGU9dGhpcy5fYml0c2V0cy5sZW5ndGg7cmV0dXJuIHRoaXMuX2JpdHNldHMucHVzaChpLmNyZWF0ZSh0aGlzLl9hbGxvY2F0ZWRTaXplLHQpKSxlKzF9Z2V0Qml0c2V0KHQpe3JldHVybiB0aGlzLl9iaXRzZXRzW3QtMV19X2V4cGFuZCgpe3RoaXMuX2FsbG9jYXRlZFNpemU8PD0xO2Zvcihjb25zdCB0IG9mIHRoaXMuX2JpdHNldHMpdC5yZXNpemUodGhpcy5fYWxsb2NhdGVkU2l6ZSl9X2Vuc3VyZU51bWVyaWModCxlKXt0aGlzLl9udW1lcmljc1t0XXx8KHRoaXMuX251bWVyaWNzW3RdPVtdKTtuKHRoaXMuX251bWVyaWNzW3RdLGUsMCl9X2Vuc3VyZUluc3RhbmNlSWQodCl7bih0aGlzLl9pbnN0YW5jZUlkcyx0LDApfV9lbnN1cmVTdHJpbmcodCxlKXt0aGlzLl9zdHJpbmdzW3RdfHwodGhpcy5fc3RyaW5nc1t0XT1bXSk7bih0aGlzLl9zdHJpbmdzW3RdLGUsbnVsbCl9Y3JlYXRlRGlzcGxheUlkKHQ9ITEpe2NvbnN0IHM9dGhpcy5faWRHZW5lcmF0b3IuY3JlYXRlSWQoKTtyZXR1cm4gcz50aGlzLl9hbGxvY2F0ZWRTaXplJiZ0aGlzLl9leHBhbmQoKSxlKHMsdCl9cmVsZWFzZURpc3BsYXlJZChlKXtmb3IoY29uc3QgdCBvZiB0aGlzLl9iaXRzZXRzKXQudW5zZXQoZSk7cmV0dXJuIHRoaXMuX2lkR2VuZXJhdG9yLnJlbGVhc2VJZChlJnQpfWdldENvbXB1dGVkTnVtZXJpYyhlLHMpe3JldHVybiB0aGlzLmdldENvbXB1dGVkTnVtZXJpY0F0SW5kZXgoZSZ0LDApfXNldENvbXB1dGVkTnVtZXJpYyhlLHMsaSl7cmV0dXJuIHRoaXMuc2V0Q29tcHV0ZWROdW1lcmljQXRJbmRleChlJnQsaSwwKX1nZXRDb21wdXRlZFN0cmluZyhlLHMpe3JldHVybiB0aGlzLmdldENvbXB1dGVkU3RyaW5nQXRJbmRleChlJnQsMCl9c2V0Q29tcHV0ZWRTdHJpbmcoZSxzLGkpe3JldHVybiB0aGlzLnNldENvbXB1dGVkU3RyaW5nQXRJbmRleChlJnQsMCxpKX1nZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KGUscyl7Y29uc3QgaT1lJnQ7cmV0dXJuIHRoaXMuX2Vuc3VyZU51bWVyaWMocyxpKSx0aGlzLl9udW1lcmljc1tzXVtpXX1zZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KGUscyxpKXtjb25zdCBuPWUmdDt0aGlzLl9lbnN1cmVOdW1lcmljKHMsbiksdGhpcy5fbnVtZXJpY3Nbc11bbl09aX1nZXRJbnN0YW5jZUlkKGUpe2NvbnN0IHM9ZSZ0O3JldHVybiB0aGlzLl9lbnN1cmVJbnN0YW5jZUlkKHMpLHRoaXMuX2luc3RhbmNlSWRzW3NdfXNldEluc3RhbmNlSWQoZSxzKXtjb25zdCBpPWUmdDt0aGlzLl9lbnN1cmVJbnN0YW5jZUlkKGkpLHRoaXMuX2luc3RhbmNlSWRzW2ldPXN9Z2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KGUscyl7Y29uc3QgaT1lJnQ7cmV0dXJuIHRoaXMuX2Vuc3VyZVN0cmluZyhzLGkpLHRoaXMuX3N0cmluZ3Nbc11baV19c2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KGUscyxpKXtjb25zdCBuPWUmdDt0aGlzLl9lbnN1cmVTdHJpbmcocyxuKSx0aGlzLl9zdHJpbmdzW3NdW25dPWl9Z2V0WE1pbihlKXtyZXR1cm4gdGhpcy5fYm91bmRzWzQqKGUmdCldfWdldFlNaW4oZSl7cmV0dXJuIHRoaXMuX2JvdW5kc1s0KihlJnQpKzFdfWdldFhNYXgoZSl7cmV0dXJuIHRoaXMuX2JvdW5kc1s0KihlJnQpKzJdfWdldFlNYXgoZSl7cmV0dXJuIHRoaXMuX2JvdW5kc1s0KihlJnQpKzNdfXNldEJvdW5kcyhlLHMpe2NvbnN0IGk9cy5yZWFkSHlkcmF0ZWRHZW9tZXRyeSgpO2lmKCFpPy5jb29yZHMubGVuZ3RoKXJldHVybiExO2xldCByPTEvMCx1PTEvMCxvPS0xLzAsaD0tMS8wO2kuZm9yRWFjaFZlcnRleCgoKHQsZSk9PntyPU1hdGgubWluKHIsdCksdT1NYXRoLm1pbih1LGUpLG89TWF0aC5tYXgobyx0KSxoPU1hdGgubWF4KGgsZSl9KSk7Y29uc3QgZD1lJnQ7cmV0dXJuIG4odGhpcy5fYm91bmRzLDQqZCs0LDApLHRoaXMuX2JvdW5kc1s0KmRdPXIsdGhpcy5fYm91bmRzWzQqZCsxXT11LHRoaXMuX2JvdW5kc1s0KmQrMl09byx0aGlzLl9ib3VuZHNbNCpkKzNdPWgsITB9fWV4cG9ydHtyIGFzIENvbXB1dGVkQXR0cmlidXRlU3RvcmFnZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZURpc3BsYXlJZCBhcyBlfWZyb21cIi4uLy4uLy4uL2VuZ2luZS93ZWJnbC9EaXNwbGF5SWQuanNcIjtjbGFzcyBye2NvbnN0cnVjdG9yKCl7dGhpcy5fZnJlZUlkcz1bXSx0aGlzLl9pZENvdW50ZXI9MX1jcmVhdGVJZChyPSExKXtyZXR1cm4gZSh0aGlzLl9nZXRGcmVlSWQoKSxyKX1yZWxlYXNlSWQoZSl7dGhpcy5fZnJlZUlkcy5wdXNoKGUpfV9nZXRGcmVlSWQoKXtyZXR1cm4gdGhpcy5fZnJlZUlkcy5sZW5ndGg/dGhpcy5fZnJlZUlkcy5wb3AoKTp0aGlzLl9pZENvdW50ZXIrK319ZXhwb3J0e3IgYXMgRGlzcGxheUlkR2VuZXJhdG9yfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2dlb21ldHJ5LmpzXCI7aW1wb3J0e0FyY2FkZURhdGUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9hcmNhZGUvQXJjYWRlRGF0ZS5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7YXNzZXJ0SXNTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtEYXRlT25seSBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvc3FsL0RhdGVPbmx5LmpzXCI7aW1wb3J0e1RpbWVPbmx5IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9zcWwvVGltZU9ubHkuanNcIjtpbXBvcnR7R2VvbWV0cnlDdXJzb3IgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9HZW9tZXRyeUN1cnNvci5qc1wiO2ltcG9ydHtnZXRMYWJlbFBvaW50IGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9sYWJlbFBvaW50LmpzXCI7aW1wb3J0e2NvbnZlcnRUb0dlb21ldHJ5IGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2ZlYXR1cmVDb252ZXJzaW9uVXRpbHMuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvT3B0aW1pemVkR2VvbWV0cnkuanNcIjtpbXBvcnR7c3lzdGVtIGFzIGQsdW5rbm93biBhcyB1fWZyb21cIi4uLy4uLy4uLy4uLy4uL3RpbWUvdGltZVpvbmVVdGlscy5qc1wiO2ltcG9ydHtTdGF0aWNCaXRTZXQgYXMgbH1mcm9tXCIuL1N0YXRpY0JpdFNldC5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBtfWZyb21cIi4uLy4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7bGV0IGM9MDtjb25zdCBoPWhhcyhcImZlYXR1cmVsYXllci1zaW1wbGlmeS10aHJlc2hvbGRzXCIpPz9bLjUsLjUsLjUsLjVdLHk9aFswXSxmPWhbMV0scD1oWzJdLGc9aFszXSxfPWhhcyhcImZlYXR1cmVsYXllci1zaW1wbGlmeS1wYXlsb2FkLXNpemUtZmFjdG9yc1wiKT8/WzEsMiw0XSx4PV9bMF0sQT1fWzFdLFQ9X1syXSxJPWhhcyhcImZlYXR1cmVsYXllci1zaW1wbGlmeS1tb2JpbGUtZmFjdG9yXCIpPz8yLGI9aGFzKFwiZXNyaS1tb2JpbGVcIik7Y2xhc3MgU3tjb25zdHJ1Y3RvcihlLHQpe3RoaXMudHlwZT1cIkZlYXR1cmVTZXRSZWFkZXJcIix0aGlzLmFyY2FkZURlY2xhcmVkQ2xhc3M9XCJlc3JpLmFyY2FkZS5GZWF0dXJlXCIsdGhpcy5zZWVuPSExLHRoaXMuaW5zdGFuY2U9MCx0aGlzLl90eD0wLHRoaXMuX3R5PTAsdGhpcy5fc3g9MSx0aGlzLl9zeT0xLHRoaXMuX2RlbGV0ZWQ9bnVsbCx0aGlzLl9qb2luZWQ9W10sdGhpcy5fb2JqZWN0SWRUb0luZGV4PW51bGwsdGhpcy5fY29udGV4dFRpbWVab25lPW51bGwsdGhpcy5fbGV2ZWw9MCx0aGlzLmluc3RhbmNlPWUsdGhpcy5fbGF5ZXJTY2hlbWE9dH1zdGF0aWMgY3JlYXRlSW5zdGFuY2UoKXtyZXR1cm4gYysrLGM9Yz42NTUzNT8wOmMsY31nZXQgaXNFbXB0eSgpe3JldHVybiBudWxsIT10aGlzLl9kZWxldGVkJiZ0aGlzLl9kZWxldGVkLmNvdW50U2V0KCk9PT10aGlzLmdldFNpemUoKX1nZXQgY29udGV4dFRpbWVab25lKCl7cmV0dXJuIHRoaXMuX2NvbnRleHRUaW1lWm9uZX1zZXQgY29udGV4dFRpbWVab25lKGUpe3RoaXMuX2NvbnRleHRUaW1lWm9uZT1lfXNldCBsZXZlbChlKXt0aGlzLl9sZXZlbD1lfWdldEFyZWFTaW1wbGlmaWNhdGlvblRocmVzaG9sZChlLHQpe2xldCByPTE7Y29uc3Qgcz1iP0k6MTt0PjRlNj9yPVQqczp0PjFlNj9yPUEqczp0PjVlNT9yPXgqczp0PjFlNSYmKHI9cyk7bGV0IGk9MDtlPjRlMz9pPWcqcjplPjJlMz9pPXAqcjplPjEwMD9pPWY6ZT4xNSYmKGk9eSk7bGV0IG49ODtyZXR1cm4gdGhpcy5fbGV2ZWw8ND9uPTE6dGhpcy5fbGV2ZWw8NT9uPTI6dGhpcy5fbGV2ZWw8NiYmKG49NCksaSpufWNyZWF0ZVF1YW50aXplZEV4dHJ1ZGVkR2VvbWV0cnkoZSx0KXtyZXR1cm5cImVzcmlHZW9tZXRyeVBvbHlsaW5lXCI9PT10aGlzLmdlb21ldHJ5VHlwZT90aGlzLl9jcmVhdGVRdWFudGl6ZWRFeHRydWRlZExpbmUoZSx0KTp0aGlzLl9jcmVhdGVRdWFudGl6ZWRFeHRydWRlZFF1YWQoZSx0KX1fY3JlYXRlUXVhbnRpemVkRXh0cnVkZWRRdWFkKGUsdCl7cmV0dXJuIG5ldyBvKFs1XSxbZS0xLHQsMSwtMSwxLDEsLTEsMSwtMSwtMV0pfV9jcmVhdGVRdWFudGl6ZWRFeHRydWRlZExpbmUoZSx0KXtyZXR1cm4gbmV3IG8oWzJdLFtlLTEsdCsxLDEsLTFdKX1wYXJzZVRpbWVzdGFtcE9mZnNldChlKXtyZXR1cm4gZX1zZXRBcmNhZGVTcGF0aWFsUmVmZXJlbmNlKGUpe3RoaXMuX2FyY2FkZVNwYXRpYWxSZWZlcmVuY2U9ZX1hdHRhY2hTdG9yYWdlKGUpe3RoaXMuX3N0b3JhZ2U9ZX1nZXRRdWFudGl6YXRpb25UcmFuc2Zvcm0oKXt0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gZmluZCB0cmFuc2Zvcm0gZm9yIGZlYXR1cmVTZXRcIil9Z2V0U3RvcmFnZSgpe3JldHVybiB0aGlzLl9zdG9yYWdlfWdldENvbXB1dGVkTnVtZXJpYyhlKXtyZXR1cm4gdGhpcy5nZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KDApfXNldENvbXB1dGVkTnVtZXJpYyhlLHQpe3JldHVybiB0aGlzLnNldENvbXB1dGVkTnVtZXJpY0F0SW5kZXgodCwwKX1nZXRDb21wdXRlZFN0cmluZyhlKXtyZXR1cm4gdGhpcy5nZXRDb21wdXRlZFN0cmluZ0F0SW5kZXgoMCl9c2V0Q29tcHV0ZWRTdHJpbmcoZSx0KXtyZXR1cm4gdGhpcy5zZXRDb21wdXRlZFN0cmluZ0F0SW5kZXgoMCx0KX1nZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KGUpe3JldHVybiB0aGlzLl9zdG9yYWdlLmdldENvbXB1dGVkTnVtZXJpY0F0SW5kZXgodGhpcy5nZXREaXNwbGF5SWQoKSxlKX1zZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KGUsdCl7dGhpcy5fc3RvcmFnZS5zZXRDb21wdXRlZE51bWVyaWNBdEluZGV4KHRoaXMuZ2V0RGlzcGxheUlkKCksZSx0KX1nZXRDb21wdXRlZFN0cmluZ0F0SW5kZXgoZSl7cmV0dXJuIHRoaXMuX3N0b3JhZ2UuZ2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KHRoaXMuZ2V0RGlzcGxheUlkKCksZSl9c2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KGUsdCl7cmV0dXJuIHRoaXMuX3N0b3JhZ2Uuc2V0Q29tcHV0ZWRTdHJpbmdBdEluZGV4KHRoaXMuZ2V0RGlzcGxheUlkKCksZSx0KX10cmFuc2Zvcm0oZSx0LHIscyl7Y29uc3QgaT10aGlzLmNvcHkoKTtyZXR1cm4gaS5fdHgrPWUsaS5fdHkrPXQsaS5fc3gqPXIsaS5fc3kqPXMsaX1yZWFkQXR0cmlidXRlQXNUaW1lc3RhbXAoZSl7Y29uc3QgdD10aGlzLnJlYWRBdHRyaWJ1dGUoZSk7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IERhdGUodCkuZ2V0VGltZSgpOlwibnVtYmVyXCI9PXR5cGVvZiB0fHxudWxsPT10P3Q6bnVsbH1yZWFkQXR0cmlidXRlKGUsdD0hMSl7Y29uc3Qgcj10aGlzLl9yZWFkQXR0cmlidXRlKGUsdCk7aWYodm9pZCAwIT09cilyZXR1cm4gcjtmb3IoY29uc3QgcyBvZiB0aGlzLl9qb2luZWQpe3Muc2V0SW5kZXgodGhpcy5nZXRJbmRleCgpKTtjb25zdCByPXMuX3JlYWRBdHRyaWJ1dGUoZSx0KTtpZih2b2lkIDAhPT1yKXJldHVybiByfX1yZWFkQXR0cmlidXRlcygpe2NvbnN0IGU9dGhpcy5fcmVhZEF0dHJpYnV0ZXMoKTtmb3IoY29uc3QgdCBvZiB0aGlzLl9qb2luZWQpe3Quc2V0SW5kZXgodGhpcy5nZXRJbmRleCgpKTtjb25zdCByPXQuX3JlYWRBdHRyaWJ1dGVzKCk7Zm9yKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMocikpZVt0XT1yW3RdfXJldHVybiBlfWpvaW5BdHRyaWJ1dGVzKGUpe3RoaXMuX2pvaW5lZC5wdXNoKGUpfXJlYWRBcmNhZGVGZWF0dXJlKCl7cmV0dXJuIHRoaXN9aGFzRmllbGQoZSl7cmV0dXJuIHRoaXMuZmllbGRzLmhhcyhlKX1nZW9tZXRyeSgpe2NvbnN0IGU9dGhpcy5yZWFkSHlkcmF0ZWRHZW9tZXRyeSgpLHQ9YShlLHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00pLHI9bSh0KTtyZXR1cm4gciYmKHIuc3BhdGlhbFJlZmVyZW5jZT10aGlzLl9hcmNhZGVTcGF0aWFsUmVmZXJlbmNlKSxyfWF1dG9jYXN0QXJjYWRlRGF0ZSh0LHIpe3JldHVybiByJiZyIGluc3RhbmNlb2YgRGF0ZT90aGlzLmlzVW5rbm93bkRhdGVUaW1lRmllbGQodCk/ZS51bmtub3duRGF0ZUpTVG9BcmNhZGVEYXRlKHIpOmUuZGF0ZUpTQW5kWm9uZVRvQXJjYWRlRGF0ZShyLHRoaXMuY29udGV4dFRpbWVab25lPz9kKTpyfWlzVW5rbm93bkRhdGVUaW1lRmllbGQoZSl7cmV0dXJuIHRoaXMuX2xheWVyU2NoZW1hLmZpZWxkc0luZGV4LmdldFRpbWVab25lKGUpPT09dX1maWVsZCh0KXtsZXQgaT10aGlzLmZpZWxkcy5nZXQodCk7aWYoaSlzd2l0Y2goaS50eXBlKXtjYXNlXCJkYXRlLW9ubHlcIjpjYXNlXCJlc3JpRmllbGRUeXBlRGF0ZU9ubHlcIjpyZXR1cm4gci5mcm9tUmVhZGVyKHRoaXMucmVhZEF0dHJpYnV0ZSh0LCExKSk7Y2FzZVwidGltZS1vbmx5XCI6Y2FzZVwiZXNyaUZpZWxkVHlwZVRpbWVPbmx5XCI6cmV0dXJuIHMuZnJvbVJlYWRlcih0aGlzLnJlYWRBdHRyaWJ1dGUodCwhMSkpO2Nhc2VcImVzcmlGaWVsZFR5cGVUaW1lc3RhbXBPZmZzZXRcIjpjYXNlXCJ0aW1lc3RhbXAtb2Zmc2V0XCI6cmV0dXJuIGUuZnJvbVJlYWRlckFzVGltZVN0YW1wT2Zmc2V0KHRoaXMucmVhZEF0dHJpYnV0ZSh0LCExKSk7Y2FzZVwiZGF0ZVwiOmNhc2VcImVzcmlGaWVsZFR5cGVEYXRlXCI6cmV0dXJuIHRoaXMuYXV0b2Nhc3RBcmNhZGVEYXRlKHQsdGhpcy5yZWFkQXR0cmlidXRlKHQsITApKTtkZWZhdWx0OnJldHVybiB0aGlzLnJlYWRBdHRyaWJ1dGUodCwhMSl9Zm9yKGNvbnN0IG4gb2YgdGhpcy5fam9pbmVkKWlmKG4uc2V0SW5kZXgodGhpcy5nZXRJbmRleCgpKSxpPW4uZmllbGRzLmdldCh0KSxpKXN3aXRjaChpLnR5cGUpe2Nhc2VcImRhdGUtb25seVwiOmNhc2VcImVzcmlGaWVsZFR5cGVEYXRlT25seVwiOnJldHVybiByLmZyb21SZWFkZXIobi5fcmVhZEF0dHJpYnV0ZSh0LCExKSk7Y2FzZVwidGltZS1vbmx5XCI6Y2FzZVwiZXNyaUZpZWxkVHlwZVRpbWVPbmx5XCI6cmV0dXJuIHMuZnJvbVJlYWRlcihuLl9yZWFkQXR0cmlidXRlKHQsITEpKTtjYXNlXCJlc3JpRmllbGRUeXBlVGltZXN0YW1wT2Zmc2V0XCI6Y2FzZVwidGltZXN0YW1wLW9mZnNldFwiOnJldHVybiBlLmZyb21SZWFkZXJBc1RpbWVTdGFtcE9mZnNldChuLl9yZWFkQXR0cmlidXRlKHQsITEpKTtjYXNlXCJkYXRlXCI6Y2FzZVwiZXNyaUZpZWxkVHlwZURhdGVcIjpyZXR1cm4gdGhpcy5hdXRvY2FzdEFyY2FkZURhdGUodCxuLl9yZWFkQXR0cmlidXRlKHQsITApKTtkZWZhdWx0OnJldHVybiB0aGlzLnJlYWRBdHRyaWJ1dGUodCwhMSl9dGhyb3cgbmV3IEVycm9yKGBGaWVsZCAke3R9IGRvZXMgbm90IGV4aXN0YCl9c2V0RmllbGQoZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gdXBkYXRlIGZlYXR1cmUgYXR0cmlidXRlIHZhbHVlcywgZmVhdHVyZSBpcyByZWFkb25seVwiKX1rZXlzKCl7cmV0dXJuIHRoaXMuZmllbGRzLmZpZWxkcy5tYXAoKGU9PmUubmFtZSkpfWNhc3RUb1RleHQoZT0hMSl7aWYoIWUpcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMucmVhZExlZ2FjeUZlYXR1cmUoKSk7Y29uc3QgdD10aGlzLnJlYWRMZWdhY3lGZWF0dXJlKCk7aWYoIXQpcmV0dXJuIEpTT04uc3RyaW5naWZ5KG51bGwpO2NvbnN0IHI9e2dlb21ldHJ5OnQuZ2VvbWV0cnksYXR0cmlidXRlczp7Li4udC5hdHRyaWJ1dGVzPz97fX19O2Zvcihjb25zdCBzIGluIHIuYXR0cmlidXRlcyl7Y29uc3QgZT1yLmF0dHJpYnV0ZXNbc107ZSBpbnN0YW5jZW9mIERhdGUmJihyLmF0dHJpYnV0ZXNbc109ZS5nZXRUaW1lKCkpfXJldHVybiBKU09OLnN0cmluZ2lmeShyKX1nZGJWZXJzaW9uKCl7cmV0dXJuIG51bGx9ZnVsbFNjaGVtYSgpe3JldHVybiB0aGlzLl9sYXllclNjaGVtYX1jYXN0QXNKc29uKGU9bnVsbCl7cmV0dXJue2F0dHJpYnV0ZXM6dGhpcy5fcmVhZEF0dHJpYnV0ZXMoKSxnZW9tZXRyeTohMD09PWU/LmtlZXBHZW9tZXRyeVR5cGU/dGhpcy5nZW9tZXRyeSgpOnRoaXMuZ2VvbWV0cnkoKT8udG9KU09OKCk/P251bGx9fWNhc3RBc0pzb25Bc3luYyhlPW51bGwsdD1udWxsKXtyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuY2FzdEFzSnNvbih0KSl9cmVtb3ZlSWRzKGUpe2lmKG51bGw9PXRoaXMuX29iamVjdElkVG9JbmRleCl7Y29uc3QgZT1uZXcgTWFwLHI9dGhpcy5nZXRDdXJzb3IoKTtmb3IoO3IubmV4dCgpOyl7Y29uc3Qgcz1yLmdldE9iamVjdElkKCk7dChzKSxlLnNldChzLHIuZ2V0SW5kZXgoKSl9dGhpcy5fb2JqZWN0SWRUb0luZGV4PWV9Y29uc3Qgcj10aGlzLl9vYmplY3RJZFRvSW5kZXg7Zm9yKGNvbnN0IHQgb2YgZSlyLmhhcyh0KSYmdGhpcy5yZW1vdmVBdEluZGV4KHIuZ2V0KHQpKX1yZW1vdmVBdEluZGV4KGUpe251bGw9PXRoaXMuX2RlbGV0ZWQmJih0aGlzLl9kZWxldGVkPWwuY3JlYXRlKHRoaXMuZ2V0U2l6ZSgpKSksdGhpcy5fZGVsZXRlZC5zZXQoZSl9cmVhZEdlb21ldHJ5Rm9yRGlzcGxheSgpe3JldHVybiB0aGlzLnJlYWRVbnF1YW50aXplZEdlb21ldHJ5KCEwKX1yZWFkTGVnYWN5R2VvbWV0cnlGb3JEaXNwbGF5KCl7cmV0dXJuIHRoaXMucmVhZExlZ2FjeUdlb21ldHJ5KCEwKX0qZmVhdHVyZXMoKXtjb25zdCBlPXRoaXMuZ2V0Q3Vyc29yKCk7Zm9yKDtlLm5leHQoKTspeWllbGQgZS5yZWFkT3B0aW1pemVkRmVhdHVyZSgpfV9nZXRFeGlzdHMoKXtyZXR1cm4gbnVsbD09dGhpcy5fZGVsZXRlZHx8IXRoaXMuX2RlbGV0ZWQuaGFzKHRoaXMuZ2V0SW5kZXgoKSl9X2NvbXB1dGVDZW50cm9pZCgpe2lmKFwiZXNyaUdlb21ldHJ5UG9seWdvblwiIT09dGhpcy5nZW9tZXRyeVR5cGUpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLnJlYWRVbnF1YW50aXplZEdlb21ldHJ5KCk7aWYoIWV8fGUuaGFzSW5kZXRlcm1pbmF0ZVJpbmdPcmRlcilyZXR1cm4gbnVsbDtjb25zdCB0PWkuZnJvbU9wdGltaXplZChlLHRoaXMuZ2VvbWV0cnlUeXBlKTt0LnlGYWN0b3IqPS0xO2NvbnN0IHI9bih0KTtyZXR1cm4gcj8oclsxXSo9LTEsbmV3IG8oW10scikpOm51bGx9Y29weUludG8oZSl7ZS5zZWVuPXRoaXMuc2VlbixlLl9zdG9yYWdlPXRoaXMuX3N0b3JhZ2UsZS5fYXJjYWRlU3BhdGlhbFJlZmVyZW5jZT10aGlzLl9hcmNhZGVTcGF0aWFsUmVmZXJlbmNlLGUuX2pvaW5lZD10aGlzLl9qb2luZWQsZS5fdHg9dGhpcy5fdHgsZS5fdHk9dGhpcy5fdHksZS5fc3g9dGhpcy5fc3gsZS5fc3k9dGhpcy5fc3ksZS5fZGVsZXRlZD10aGlzLl9kZWxldGVkLGUuX29iamVjdElkVG9JbmRleD10aGlzLl9vYmplY3RJZFRvSW5kZXgsZS5jb250ZXh0VGltZVpvbmU9dGhpcy5jb250ZXh0VGltZVpvbmV9fWV4cG9ydHtTIGFzIEZlYXR1cmVTZXRSZWFkZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjb252ZXJ0RnJvbUZlYXR1cmVzIGFzIHQsY29udmVydEZyb21GZWF0dXJlU2V0IGFzIGUsY29udmVydFRvRmVhdHVyZSBhcyByLGNvbnZlcnRUb0dlb21ldHJ5IGFzIHMsZ2V0UXVhbnRpemVkQXJlYSBhcyBpLHVucXVhbnRpemVPcHRpbWl6ZWRHZW9tZXRyeSBhcyBufWZyb21cIi4uLy4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e2hhc0dlb21ldHJ5IGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL09wdGltaXplZEZlYXR1cmUuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi8uLi8uLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9GaWVsZHNJbmRleC5qc1wiO2ltcG9ydHtGZWF0dXJlU2V0UmVhZGVyIGFzIGF9ZnJvbVwiLi9GZWF0dXJlU2V0UmVhZGVyLmpzXCI7ZnVuY3Rpb24gZCh7Y29vcmRzOnQsbGVuZ3RoczplfSl7bGV0IHI9MDtmb3IoY29uc3QgcyBvZiBlKXtmb3IobGV0IGU9MTtlPHM7ZSsrKXRbMioocitlKV0rPXRbMioocitlKS0yXSx0WzIqKHIrZSkrMV0rPXRbMioocitlKS0xXTtyKz1zfX1jbGFzcyBoIGV4dGVuZHMgYXtzdGF0aWMgZnJvbUZlYXR1cmVzKGUscil7Y29uc3R7b2JqZWN0SWRGaWVsZDpzLGdlb21ldHJ5VHlwZTppfT1yLG49dChbXSxlLGksITEsITEscyk7Zm9yKGxldCB0PTA7dDxuLmxlbmd0aDt0Kyspblt0XS5kaXNwbGF5SWQ9ZVt0XS5kaXNwbGF5SWQ7cmV0dXJuIGguZnJvbU9wdGltaXplZEZlYXR1cmVzKG4scil9c3RhdGljIGZyb21GZWF0dXJlU2V0KHQscil7Y29uc3Qgcz1lKHQsci5vYmplY3RJZEZpZWxkKTtyZXR1cm4gaC5mcm9tT3B0aW1pemVkRmVhdHVyZVNldChzLHIpfXN0YXRpYyBmcm9tT3B0aW1pemVkRmVhdHVyZVNldCh0LGUpe2NvbnN0e2ZlYXR1cmVzOnJ9PXQscz1oLmZyb21PcHRpbWl6ZWRGZWF0dXJlcyhyLGUpO3JldHVybiBzLl9leGNlZWRlZFRyYW5zZmVyTGltaXQ9dC5leGNlZWRlZFRyYW5zZmVyTGltaXQscy5fdHJhbnNmb3JtPXQudHJhbnNmb3JtLHMuX2ZpZWxkc0luZGV4PW5ldyB1KGUuZmllbGRzKSxzfXN0YXRpYyBmcm9tT3B0aW1pemVkRmVhdHVyZXModCxlLHIpe2NvbnN0IHM9YS5jcmVhdGVJbnN0YW5jZSgpLGk9bmV3IGgocyx0LGUpO3JldHVybiBpLl9maWVsZHNJbmRleD1uZXcgdShlLmZpZWxkcyksaS5fdHJhbnNmb3JtPXIsaX1jb25zdHJ1Y3Rvcih0LGUscil7c3VwZXIodCxyKSx0aGlzLl9leGNlZWRlZFRyYW5zZmVyTGltaXQ9ITEsdGhpcy5fZmVhdHVyZUluZGV4PS0xLHRoaXMuX2ZpZWxkc0luZGV4PW51bGwsdGhpcy5fZ2VvbWV0cnlUeXBlPXI/Lmdlb21ldHJ5VHlwZSx0aGlzLl9mZWF0dXJlcz1lfWdldCBmaWVsZHMoKXtyZXR1cm4gdGhpcy5fZmllbGRzSW5kZXh9Z2V0IF9jdXJyZW50KCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVzW3RoaXMuX2ZlYXR1cmVJbmRleF19Z2V0IGdlb21ldHJ5VHlwZSgpe3JldHVybiB0aGlzLl9nZW9tZXRyeVR5cGV9Z2V0IGhhc0ZlYXR1cmVzKCl7cmV0dXJuISF0aGlzLl9mZWF0dXJlcy5sZW5ndGh9Z2V0IGhhc05leHQoKXtyZXR1cm4gdGhpcy5fZmVhdHVyZUluZGV4KzE8dGhpcy5fZmVhdHVyZXMubGVuZ3RofWdldCBleGNlZWRlZFRyYW5zZmVyTGltaXQoKXtyZXR1cm4gdGhpcy5fZXhjZWVkZWRUcmFuc2ZlckxpbWl0fWdldCBoYXNaKCl7cmV0dXJuITF9Z2V0IGhhc00oKXtyZXR1cm4hMX1yZW1vdmVJZHModCl7Y29uc3QgZT1uZXcgU2V0KHQpO3RoaXMuX2ZlYXR1cmVzPXRoaXMuX2ZlYXR1cmVzLmZpbHRlcigodD0+IShudWxsIT10Lm9iamVjdElkJiZlLmhhcyh0Lm9iamVjdElkKSkpKX1hcHBlbmQodCl7Zm9yKGNvbnN0IGUgb2YgdCl0aGlzLl9mZWF0dXJlcy5wdXNoKGUpfWdldFNpemUoKXtyZXR1cm4gdGhpcy5fZmVhdHVyZXMubGVuZ3RofWdldEN1cnNvcigpe3JldHVybiB0aGlzLmNvcHkoKX1nZXRRdWFudGl6YXRpb25UcmFuc2Zvcm0oKXtyZXR1cm4gdGhpcy5fdHJhbnNmb3JtfWdldEF0dHJpYnV0ZUhhc2goKXtsZXQgdD1cIlwiO2Zvcihjb25zdCBlIGluIHRoaXMuX2N1cnJlbnQuYXR0cmlidXRlcyl0Kz10aGlzLl9jdXJyZW50LmF0dHJpYnV0ZXNbZV07cmV0dXJuIHR9Z2V0SW5kZXgoKXtyZXR1cm4gdGhpcy5fZmVhdHVyZUluZGV4fXNldEluZGV4KHQpe3RoaXMuX2ZlYXR1cmVJbmRleD10fWdldE9iamVjdElkKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnQ/Lm9iamVjdElkfWdldERpc3BsYXlJZCgpe3JldHVybiB0aGlzLl9jdXJyZW50LmRpc3BsYXlJZH1zZXREaXNwbGF5SWQodCl7dGhpcy5fY3VycmVudC5kaXNwbGF5SWQ9dH1nZXRHcm91cElkKCl7cmV0dXJuIHRoaXMuX2N1cnJlbnQuZ3JvdXBJZH1zZXRHcm91cElkKHQpe3RoaXMuX2N1cnJlbnQuZ3JvdXBJZD10fWNvcHkoKXtjb25zdCB0PW5ldyBoKHRoaXMuaW5zdGFuY2UsdGhpcy5fZmVhdHVyZXMsdGhpcy5mdWxsU2NoZW1hKCkpO3JldHVybiB0aGlzLmNvcHlJbnRvKHQpLHR9bmV4dCgpe2Zvcig7Kyt0aGlzLl9mZWF0dXJlSW5kZXg8dGhpcy5fZmVhdHVyZXMubGVuZ3RoJiYhdGhpcy5fZ2V0RXhpc3RzKCk7KTtyZXR1cm4gdGhpcy5fZmVhdHVyZUluZGV4PHRoaXMuX2ZlYXR1cmVzLmxlbmd0aH1yZWFkTGVnYWN5RmVhdHVyZSgpe3JldHVybiByKHRoaXMuX2N1cnJlbnQsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSl9cmVhZE9wdGltaXplZEZlYXR1cmUoKXtyZXR1cm4gdGhpcy5fY3VycmVudH1yZWFkTGVnYWN5UG9pbnRHZW9tZXRyeSgpe3JldHVybiB0aGlzLnJlYWRHZW9tZXRyeSgpP3t4OnRoaXMuZ2V0WCgpLHk6dGhpcy5nZXRZKCl9Om51bGx9cmVhZExlZ2FjeUdlb21ldHJ5KCl7Y29uc3QgdD10aGlzLnJlYWRVbnF1YW50aXplZEdlb21ldHJ5KCk7cmV0dXJuIHModCx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKX1yZWFkTGVnYWN5Q2VudHJvaWQoKXtjb25zdCB0PXRoaXMucmVhZENlbnRyb2lkKCk7cmV0dXJuIG51bGw9PXQ/bnVsbDp7eDp0LmNvb3Jkc1swXSp0aGlzLl9zeCt0aGlzLl90eCx5OnQuY29vcmRzWzFdKnRoaXMuX3N5K3RoaXMuX3R5fX1yZWFkR2VvbWV0cnlBcmVhKCl7cmV0dXJuIG8odGhpcy5fY3VycmVudCk/aSh0aGlzLl9jdXJyZW50Lmdlb21ldHJ5LDIpOjB9cmVhZFVucXVhbnRpemVkR2VvbWV0cnkoKXtjb25zdCB0PXRoaXMucmVhZEdlb21ldHJ5KCk7aWYoXCJlc3JpR2VvbWV0cnlQb2ludFwiPT09dGhpcy5nZW9tZXRyeVR5cGV8fCF0KXJldHVybiB0O2NvbnN0IGU9dC5jbG9uZSgpO3JldHVybiBkKGUpLGV9cmVhZEh5ZHJhdGVkR2VvbWV0cnkoKXtjb25zdCB0PXRoaXMuX2N1cnJlbnQuZ2VvbWV0cnk7aWYobnVsbD09dClyZXR1cm4gbnVsbDtjb25zdCBlPXQuY2xvbmUoKTtyZXR1cm4gbnVsbCE9dGhpcy5fdHJhbnNmb3JtJiZuKGUsZSx0aGlzLmhhc1osdGhpcy5oYXNNLHRoaXMuX3RyYW5zZm9ybSksZX1nZXRYSHlkcmF0ZWQoKXtpZighbyh0aGlzLl9jdXJyZW50KSlyZXR1cm4gMDtjb25zdCB0PXRoaXMuX2N1cnJlbnQuZ2VvbWV0cnkuY29vcmRzWzBdLGU9dGhpcy5nZXRRdWFudGl6YXRpb25UcmFuc2Zvcm0oKTtyZXR1cm4gbnVsbD09ZT90OnQqZS5zY2FsZVswXStlLnRyYW5zbGF0ZVswXX1nZXRZSHlkcmF0ZWQoKXtpZighbyh0aGlzLl9jdXJyZW50KSlyZXR1cm4gMDtjb25zdCB0PXRoaXMuX2N1cnJlbnQuZ2VvbWV0cnkuY29vcmRzWzFdLGU9dGhpcy5nZXRRdWFudGl6YXRpb25UcmFuc2Zvcm0oKTtyZXR1cm4gbnVsbD09ZT90OmUudHJhbnNsYXRlWzFdLXQqZS5zY2FsZVsxXX1nZXRYKCl7cmV0dXJuIG8odGhpcy5fY3VycmVudCk/dGhpcy5fY3VycmVudC5nZW9tZXRyeS5jb29yZHNbMF0qdGhpcy5fc3grdGhpcy5fdHg6MH1nZXRZKCl7cmV0dXJuIG8odGhpcy5fY3VycmVudCk/dGhpcy5fY3VycmVudC5nZW9tZXRyeS5jb29yZHNbMV0qdGhpcy5fc3krdGhpcy5fdHk6MH1yZWFkR2VvbWV0cnkoKXtpZighbyh0aGlzLl9jdXJyZW50KSl7aWYobnVsbCE9dGhpcy5fY3VycmVudC5jZW50cm9pZCl7Y29uc3RbdCxlXT10aGlzLl9jdXJyZW50LmNlbnRyb2lkLmNvb3JkcztyZXR1cm4gdGhpcy5jcmVhdGVRdWFudGl6ZWRFeHRydWRlZEdlb21ldHJ5KHQsZSl9cmV0dXJuIG51bGx9Y29uc3QgdD10aGlzLl9jdXJyZW50Lmdlb21ldHJ5LmNsb25lKCk7aWYodC5pc1BvaW50KXJldHVybiB0LmNvb3Jkc1swXT10LmNvb3Jkc1swXSp0aGlzLl9zeCt0aGlzLl90eCx0LmNvb3Jkc1sxXT10LmNvb3Jkc1sxXSp0aGlzLl9zeSt0aGlzLl90eSx0O2xldCBlPTA7Zm9yKGNvbnN0IHIgb2YgdC5sZW5ndGhzKXQuY29vcmRzWzIqZV09dC5jb29yZHNbMiplXSp0aGlzLl9zeCt0aGlzLl90eCx0LmNvb3Jkc1syKmUrMV09dC5jb29yZHNbMiplKzFdKnRoaXMuX3N5K3RoaXMuX3R5LGUrPXI7cmV0dXJuIHR9cmVhZENlbnRyb2lkKCl7cmV0dXJuIG8odGhpcy5fY3VycmVudCk/dGhpcy5fY29tcHV0ZUNlbnRyb2lkKCk6dGhpcy5fY3VycmVudC5jZW50cm9pZH1fcmVhZEF0dHJpYnV0ZSh0LGUpe2NvbnN0IHI9dGhpcy5fZmllbGRzSW5kZXguZ2V0KHQpO2lmKCFyKXJldHVybjtsZXQgcz10aGlzLl9jdXJyZW50LmF0dHJpYnV0ZXNbci5uYW1lXTtyZXR1cm4gbnVsbD09cz9zOihcImVzcmlGaWVsZFR5cGVUaW1lc3RhbXBPZmZzZXRcIj09PXRoaXMuZmllbGRzLmdldCh0KT8udHlwZSYmKHM9dGhpcy5wYXJzZVRpbWVzdGFtcE9mZnNldChzKSksZSYmdGhpcy5maWVsZHMuaXNEYXRlRmllbGQodCk/bmV3IERhdGUocyk6cyl9Y29weUludG8odCl7c3VwZXIuY29weUludG8odCksdC5fZmVhdHVyZUluZGV4PXRoaXMuX2ZlYXR1cmVJbmRleCx0Ll90cmFuc2Zvcm09dGhpcy5fdHJhbnNmb3JtLHQuX2ZpZWxkc0luZGV4PXRoaXMuX2ZpZWxkc0luZGV4fV9yZWFkQXR0cmlidXRlcygpe3JldHVybiB0aGlzLl9jdXJyZW50LmF0dHJpYnV0ZXN9fWV4cG9ydHtoIGFzIEZlYXR1cmVTZXRSZWFkZXJKU09OfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyB0e3N0YXRpYyBmcm9tQnVmZmVyKGUscyl7cmV0dXJuIG5ldyB0KGUscyl9c3RhdGljIGNyZWF0ZShlLHM9NDI5NDk2NzI5NSl7Y29uc3Qgcj1uZXcgVWludDMyQXJyYXkoTWF0aC5jZWlsKGUvMzIpKTtyZXR1cm4gbmV3IHQocixzKX1jb25zdHJ1Y3Rvcih0LGUpe3RoaXMuX21hc2s9MCx0aGlzLl9idWY9dCx0aGlzLl9tYXNrPWV9X2dldEluZGV4KHQpe3JldHVybiBNYXRoLmZsb29yKHQvMzIpfWhhcyh0KXtjb25zdCBlPXRoaXMuX21hc2smdDtyZXR1cm4hISh0aGlzLl9idWZbdGhpcy5fZ2V0SW5kZXgoZSldJjE8PGUlMzIpfWhhc1JhbmdlKHQsZSl7bGV0IHM9dCxyPWU7Zm9yKDtzJTMyJiZzIT09cjspe2lmKHRoaXMuaGFzKHMpKXJldHVybiEwO3MrK31mb3IoO3IlMzImJnMhPT1yOyl7aWYodGhpcy5oYXMocykpcmV0dXJuITA7ci0tfWlmKHM9PT1yKXJldHVybiExO2ZvcihsZXQgaD1zLzMyO2ghPT1yLzMyO2grKyl7aWYodGhpcy5fYnVmW2hdKXJldHVybiEwfXJldHVybiExfXNldCh0KXtjb25zdCBlPXRoaXMuX21hc2smdCxzPXRoaXMuX2dldEluZGV4KGUpLHI9MTw8ZSUzMjt0aGlzLl9idWZbc118PXJ9c2V0UmFuZ2UodCxlKXtsZXQgcz10LHI9ZTtmb3IoO3MlMzImJnMhPT1yOyl0aGlzLnNldChzKyspO2Zvcig7ciUzMiYmcyE9PXI7KXRoaXMuc2V0KHItLSk7aWYocyE9PXIpZm9yKGxldCBoPXMvMzI7aCE9PXIvMzI7aCsrKXRoaXMuX2J1ZltoXT00Mjk0OTY3Mjk1fXVuc2V0KHQpe2NvbnN0IGU9dGhpcy5fbWFzayZ0LHM9dGhpcy5fZ2V0SW5kZXgoZSkscj0xPDxlJTMyO3RoaXMuX2J1ZltzXSY9NDI5NDk2NzI5NV5yfXJlc2l6ZSh0KXtjb25zdCBlPXRoaXMuX2J1ZixzPW5ldyBVaW50MzJBcnJheShNYXRoLmNlaWwodC8zMikpO3Muc2V0KGUpLHRoaXMuX2J1Zj1zfW9yKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5fYnVmLmxlbmd0aDtlKyspdGhpcy5fYnVmW2VdfD10Ll9idWZbZV07cmV0dXJuIHRoaXN9YW5kKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5fYnVmLmxlbmd0aDtlKyspdGhpcy5fYnVmW2VdJj10Ll9idWZbZV07cmV0dXJuIHRoaXN9eG9yKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5fYnVmLmxlbmd0aDtlKyspdGhpcy5fYnVmW2VdXj10Ll9idWZbZV07cmV0dXJuIHRoaXN9aW9yKHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5fYnVmLmxlbmd0aDtlKyspdGhpcy5fYnVmW2VdfD1+dC5fYnVmW2VdO3JldHVybiB0aGlzfWlhbmQodCl7Zm9yKGxldCBlPTA7ZTx0aGlzLl9idWYubGVuZ3RoO2UrKyl0aGlzLl9idWZbZV0mPX50Ll9idWZbZV07cmV0dXJuIHRoaXN9aXhvcih0KXtmb3IobGV0IGU9MDtlPHRoaXMuX2J1Zi5sZW5ndGg7ZSsrKXRoaXMuX2J1ZltlXV49fnQuX2J1ZltlXTtyZXR1cm4gdGhpc31hbnkoKXtmb3IobGV0IHQ9MDt0PHRoaXMuX2J1Zi5sZW5ndGg7dCsrKWlmKHRoaXMuX2J1Zlt0XSlyZXR1cm4hMDtyZXR1cm4hMX1jb3B5KHQpe2ZvcihsZXQgZT0wO2U8dGhpcy5fYnVmLmxlbmd0aDtlKyspdGhpcy5fYnVmW2VdPXQuX2J1ZltlXTtyZXR1cm4gdGhpc31jbG9uZSgpe3JldHVybiBuZXcgdCh0aGlzLl9idWYuc2xpY2UoKSx0aGlzLl9tYXNrKX1jbGVhcigpe2ZvcihsZXQgdD0wO3Q8dGhpcy5fYnVmLmxlbmd0aDt0KyspdGhpcy5fYnVmW3RdPTB9Zm9yRWFjaFNldCh0KXtmb3IobGV0IGU9MDtlPHRoaXMuX2J1Zi5sZW5ndGg7ZSsrKXtsZXQgcz10aGlzLl9idWZbZV0scj0zMiplO2lmKHMpZm9yKDtzOyl7MSZzJiZ0KHIpLHM+Pj49MSxyKyt9fX1jb3VudFNldCgpe2xldCB0PTA7cmV0dXJuIHRoaXMuZm9yRWFjaFNldCgoZT0+e3QrK30pKSx0fX1leHBvcnR7dCBhcyBTdGF0aWNCaXRTZXR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9