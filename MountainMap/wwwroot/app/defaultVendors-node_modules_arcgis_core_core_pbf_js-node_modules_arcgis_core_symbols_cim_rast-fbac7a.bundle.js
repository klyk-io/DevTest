"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_core_pbf_js-node_modules_arcgis_core_symbols_cim_rast-fbac7a"],{

/***/ "./node_modules/@arcgis/core/core/pbf.js":
/*!***********************************************!*\
  !*** ./node_modules/@arcgis/core/core/pbf.js ***!
  \***********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _ObjectPool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ObjectPool.js */ "./node_modules/@arcgis/core/core/ObjectPool.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e;!function(t){t[t.varint=0]="varint",t[t.fixed64=1]="fixed64",t[t.delimited=2]="delimited",t[t.fixed32=5]="fixed32",t[t.unknown=99]="unknown"}(e||(e={}));const i=4294967296,s=new TextDecoder("utf-8"),n=(0,_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("safari")||(0,_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("ios")?6:(0,_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("ff")?12:32;class r{constructor(t,i,s=0,n=(t?t.byteLength:0)){this._tag=0,this._dataType=e.unknown,this._init(t,i,s,n)}_init(t,e,i,s){this._data=t,this._dataView=e,this._pos=i,this._end=s}asUnsafe(){return this}clone(){return new r(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const e=this._decodeVarint();if(this._tag=e>>3,this._dataType=7&e,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();if(void 0!==t)return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=0!==this._data[this._pos];return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getUint32(e+4,!0)*i;return this._skip(8),s}getSFixed64(){const t=this._dataView,e=this._pos,s=t.getUint32(e,!0)+t.getInt32(e+4,!0)*i;return this._skip(8),s}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),e=this._pos,i=this._toString(this._data,e,e+t);return this._skip(t),i}getBytes(){const t=this._getLength(),e=this._pos,i=this._toBytes(this._data,e,e+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,e,i,s){const n=this.getMessage(),r=t(n,e,i,s);return n.release(),r}processMessage(t){const e=this.getMessage(),i=t(e);return e.release(),i}getMessage(){const t=this._getLength(),e=r.pool.acquire();return e._init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),e}release(){r.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case e.varint:this._decodeVarint();break;case e.fixed64:this._skip(8);break;case e.delimited:this._skip(this._getLength());break;case e.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let e=this._pos,i=0,s=0;if(this._end-e>=10)do{if(s=t[e++],i|=127&s,0==(128&s))break;if(s=t[e++],i|=(127&s)<<7,0==(128&s))break;if(s=t[e++],i|=(127&s)<<14,0==(128&s))break;if(s=t[e++],i|=(127&s)<<21,0==(128&s))break;if(s=t[e++],i+=268435456*(127&s),0==(128&s))break;if(s=t[e++],i+=34359738368*(127&s),0==(128&s))break;if(s=t[e++],i+=4398046511104*(127&s),0==(128&s))break;if(s=t[e++],i+=562949953421312*(127&s),0==(128&s))break;if(s=t[e++],i+=72057594037927940*(127&s),0==(128&s))break;if(s=t[e++],i+=0x8000000000000000*(127&s),0==(128&s))break;throw new Error("Varint too long!")}while(0);else{let n=1;for(;e!==this._end&&(s=t[e],0!=(128&s));)++e,i+=(127&s)*n,n*=128;if(e===this._end)throw new Error("Varint overrun!");++e,i+=s*n}return this._pos=e,i}_decodeSVarint(){const t=this._data;let e,i=0,s=0;const n=1&t[this._pos];if(s=t[this._pos++],i|=127&s,0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<7,0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<14,0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i|=(127&s)<<21,0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i+=268435456*(127&s),0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i+=34359738368*(127&s),0==(128&s))return n?-(i+1)/2:i/2;if(s=t[this._pos++],i+=4398046511104*(127&s),0==(128&s))return n?-(i+1)/2:i/2;if(e=BigInt(i),s=t[this._pos++],e+=0x2000000000000n*BigInt(127&s),0==(128&s))return Number(n?-(e+1n)/2n:e/2n);if(s=t[this._pos++],e+=0x100000000000000n*BigInt(127&s),0==(128&s))return Number(n?-(e+1n)/2n:e/2n);if(s=t[this._pos++],e+=0x8000000000000000n*BigInt(127&s),0==(128&s))return Number(n?-(e+1n)/2n:e/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==e.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,e,i){if((i=Math.min(this._end,i))-e>n){const n=t.subarray(e,i);return s.decode(n)}let r="",h="";for(let s=e;s<i;++s){const e=t[s];128&e?h+="%"+e.toString(16):(r+=decodeURIComponent(h)+String.fromCharCode(e),h="")}return h.length&&(r+=decodeURIComponent(h)),r}_toBytes(t,e,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,e,i-e)}}r.pool=new _ObjectPool_js__WEBPACK_IMPORTED_MODULE_1__["default"](r,void 0,(t=>{t._data=null,t._dataView=null}));


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/rasterizingUtils.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   rasterizeDash: () => (/* binding */ e),
/* harmony export */   rasterizeSimpleFill: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/floatRGBA.js */ "./node_modules/@arcgis/core/core/floatRGBA.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=o=>"vertical"===o||"horizontal"===o||"cross"===o||"esriSFSCross"===o||"esriSFSVertical"===o||"esriSFSHorizontal"===o;function r(o,r,e){const i=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.nextPowerOfTwo)(Math.ceil(e)),n=a(r)?8*i:16*i,s=2*i;o.width=n,o.height=n;const l=o.getContext("2d");l.strokeStyle="#FFFFFF",l.lineWidth=i,l.beginPath(),"vertical"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSVertical"!==r||(l.moveTo(n/2,-s),l.lineTo(n/2,n+s)),"horizontal"!==r&&"cross"!==r&&"esriSFSCross"!==r&&"esriSFSHorizontal"!==r||(l.moveTo(-s,n/2),l.lineTo(n+s,n/2)),"forward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSDiagonalCross"!==r&&"esriSFSForwardDiagonal"!==r||(l.moveTo(-s,-s),l.lineTo(n+s,n+s),l.moveTo(n-s,-s),l.lineTo(n+s,s),l.moveTo(-s,n-s),l.lineTo(s,n+s)),"backward-diagonal"!==r&&"diagonal-cross"!==r&&"esriSFSBackwardDiagonal"!==r&&"esriSFSDiagonalCross"!==r||(l.moveTo(n+s,-s),l.lineTo(-s,n+s),l.moveTo(s,-s),l.lineTo(-s,s),l.moveTo(n+s,n-s),l.lineTo(n-s,n+s)),l.stroke();const h=l.getImageData(0,0,o.width,o.height),c=new Uint8Array(h.data);let m;for(let t=0;t<c.length;t+=4)m=c[t+3]/255,c[t]=c[t]*m,c[t+1]=c[t+1]*m,c[t+2]=c[t+2]*m;return[c,o.width,o.height]}function e(t,a){const r="Butt"===a,e="Square"===a,i=!r&&!e;t.length%2==1&&(t=[...t,...t]);const n=15.5,s=2*n;let l=0;for(const o of t)l+=o;const h=Math.round(l*n),c=new Float32Array(h*s),m=.5*n;let S=0,F=0,g=.5,T=!0;for(const o of t){for(S=F,F+=o*n;g<=F;){let o=.5;for(;o<s;){const t=(o-.5)*h+g-.5,a=i?(o-n)*(o-n):Math.abs(o-n);c[t]=T?r?Math.max(Math.max(S+m-g,a),Math.max(g-F+m,a)):a:i?Math.min((g-S)*(g-S)+a,(g-F)*(g-F)+a):e?Math.min(Math.max(g-S,a),Math.max(F-g,a)):Math.min(Math.max(g-S+m,a),Math.max(F+m-g,a)),o++}g++}T=!T}const d=c.length,f=new Uint8Array(4*d);for(let M=0;M<d;++M){const t=(i?Math.sqrt(c[M]):c[M])/n;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__.packFloatRGBA)(t,f,4*M)}return[f,h,s]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TileManager: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../tiling/TileCoverage.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=512,s=1e-6,r=(e,i)=>e+1/(1<<2*i);class o{constructor(i,t){this._tiles=new Map,this._tileCache=new _core_LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(40,(e=>e.dispose())),this._viewSize=[0,0],this._visibleTiles=new Map,this.acquireTile=i.acquireTile,this.releaseTile=i.releaseTile,this.tileInfoView=i.tileInfoView,this._container=t}destroy(){for(const[e,i]of this._tiles)i.dispose();this._tiles=null,this._tileCache.clear(),this._tileCache=null}update(e){this._updateCacheSize(e);const l=this.tileInfoView,s=l.getTileCoverage(e.state,0,!0,"smallest");if(!s)return!0;const{spans:r,lodInfo:o}=s,{level:n}=o,a=this._tiles,c=new Set,h=new Set;for(const{row:i,colFrom:_,colTo:f}of r)for(let e=_;e<=f;e++){const l=_tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"].getId(n,i,o.normalizeCol(e),o.getWorldForColumn(e)),s=this._getOrAcquireTile(l);c.add(l),s.processed()?this._addToContainer(s):h.add(new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](l))}for(const[i,t]of a)t.isCoverage=c.has(i);for(const i of h)this._findPlaceholdersForMissingTiles(i,c);let d=!1;for(const[i,t]of a)t.neededForCoverage=c.has(i),t.neededForCoverage||t.isHoldingForFade&&l.intersects(s,t.key)&&c.add(i),t.isFading&&(d=!0);for(const[i,t]of this._tiles)c.has(i)||this._releaseTile(i);return _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_1__["default"].pool.release(s),!d}clear(){this._tiles.clear(),this._tileCache.clear(),this._visibleTiles.clear()}clearCache(){this._tileCache.clear()}_findPlaceholdersForMissingTiles(e,i){const t=[];for(const[s,r]of this._tiles)this._addPlaceholderChild(t,r,e,i);const l=t.reduce(r,0);Math.abs(1-l)<s||this._addPlaceholderParent(e.id,i)}_addPlaceholderChild(e,i,t,l){i.key.level<=t.level||!i.hasData()||a(t,i.key)&&(this._addToContainer(i),l.add(i.id),e.push(i.key.level-t.level))}_addPlaceholderParent(e,i){const t=this._tiles;let l=e;for(;;){if(l=n(l),!l||i.has(l))return;const e=t.get(l);if(e&&e.hasData())return this._addToContainer(e),void i.add(e.id)}}_getOrAcquireTile(e){let i=this._tiles.get(e);return i||(i=this._tileCache.pop(e),i||(i=this.acquireTile(new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](e))),this._tiles.set(e,i),i)}_releaseTile(e){const i=this._tiles.get(e);this.releaseTile(i),this._removeFromContainer(i),this._tiles.delete(e),i.hasData()?this._tileCache.put(e,i,1):i.dispose()}_addToContainer(e){let i;const t=[],l=this._container;if(l.contains(e))return;const s=this._visibleTiles;for(const[r,o]of s)this._canConnectDirectly(e,o)&&t.push(o),null==i&&this._canConnectDirectly(o,e)&&(i=o);if(null!=i){for(const l of t)i.childrenTiles.delete(l),e.childrenTiles.add(l),l.parentTile=e;i.childrenTiles.add(e),e.parentTile=i}else for(const r of t)e.childrenTiles.add(r),r.parentTile=e;s.set(e.id,e),l.addChild(e)}_removeFromContainer(e){if(this._visibleTiles.delete(e.id),this._container.removeChild(e),null!=e.parentTile){e.parentTile.childrenTiles.delete(e);for(const i of e.childrenTiles)null!=e.parentTile&&e.parentTile.childrenTiles.add(i)}for(const i of e.childrenTiles)i.parentTile=e.parentTile;e.parentTile=null,e.childrenTiles.clear()}_canConnectDirectly(e,i){const t=e.key;let{level:l,row:s,col:r,world:o}=i.key;const n=this._visibleTiles;for(;l>0;){if(l--,s>>=1,r>>=1,t.level===l&&t.row===s&&t.col===r&&t.world===o)return!0;if(n.has(`${l}/${s}/${r}/${o}`))return!1}return!1}_updateCacheSize(e){const i=e.state.size;if(i[0]===this._viewSize[0]&&i[1]===this._viewSize[1])return;const t=Math.ceil(i[0]/l)+1,s=Math.ceil(i[1]/l)+1;this._viewSize[0]=i[0],this._viewSize[1]=i[1],this._tileCache.maxSize=5*t*s}}function n(e){const[i,t,l,s]=e.split("/"),r=parseInt(i,10);return 0===r?null:`${r-1}/${parseInt(t,10)>>1}/${parseInt(l,10)>>1}/${parseInt(s,10)}`}function a(e,i){const t=i.level-e.level;return e.row===i.row>>t&&e.col===i.col>>t&&e.world===i.world}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VectorTileContainer: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./decluttering/SymbolFader.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _webgl_RenderableTile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../webgl/RenderableTile.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/RenderableTile.js");
/* harmony import */ var _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../webgl/TileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");
/* harmony import */ var _tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tiling/TileCoverage.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const y=1e-6;function p(e,t){if(e){const s=e.getLayoutProperty("visibility");if(!s||s.getValue()!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.Visibility.NONE&&(void 0===e.minzoom||e.minzoom<t+y)&&(void 0===e.maxzoom||e.maxzoom>=t-y))return!0}return!1}class m extends _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_6__["default"]{constructor(e){super(e),this._backgroundTiles=[],this._pointToCallbacks=new Map}destroy(){this.removeAllChildren(),this._spriteMosaic?.dispose(),this._spriteMosaic=null,this._glyphMosaic?.dispose(),this._glyphMosaic=null,null!=this._symbolFader&&(this._symbolFader.clear(),this._symbolFader=null),this._styleRepository=null,this._backgroundTiles=[],this._pointToCallbacks.clear()}get fading(){return this._symbolFader?.fading??!1}setStyleResources(e,t,r){this._spriteMosaic=e,this._glyphMosaic=t,this._styleRepository=r,null==this._symbolFader&&(this._symbolFader=new _decluttering_SymbolFader_js__WEBPACK_IMPORTED_MODULE_2__.SymbolFader(this._styleRepository,this.children)),this._symbolFader.styleRepository=r}setSpriteMosaic(e){this._spriteMosaic?.dispose(),this._spriteMosaic=e}deleteStyleLayers(e){null!=this._symbolFader&&this._symbolFader.deleteStyleLayers(e)}async hitTest(t){const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createResolver)();return this._pointToCallbacks.set(t,s),this.requestRender(),s.promise}createRenderParams(e){return{...super.createRenderParams(e),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}}doRender(e){!this.visible||e.drawPhase!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.MAP&&e.drawPhase!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.DEBUG||void 0===this._spriteMosaic||super.doRender(e)}addChild(e){return super.addChild(e),null!=this._symbolFader?this._symbolFader.addTile(e):e.decluttered=!0,this.requestRender(),e}removeChild(e){return null!=this._symbolFader&&this._symbolFader.removeTile(e),this.requestRender(),super.removeChild(e)}renderChildren(e){const{drawPhase:t}=e;if(t!==_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.DEBUG){if(this._doRender(e),this._pointToCallbacks.size>0){e.drawPhase=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST;const s=e.painter.effects.hittestVTL;s.bind(e),this._doRender(e),s.draw(e,this._pointToCallbacks),s.unbind(e),e.drawPhase=t}}else super.renderChildren(e)}removeAllChildren(){for(let e=0;e<this.children.length;e++){const t=this.children[e];null!=this._symbolFader&&this._symbolFader.removeTile(t),t.dispose()}super.removeAllChildren()}getStencilTarget(){return this.children.filter((e=>e.neededForCoverage&&e.hasData()))}restartDeclutter(){null!=this._symbolFader&&this._symbolFader.restartDeclutter()}_doRender(e){const{context:t}=e,s=this._styleRepository;if(!s)return;const r=s.layers;let i=!0;e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST&&(i=!1),s.backgroundBucketIds.length>0&&(e.renderPass="background",this._renderBackgroundLayers(e,s.backgroundBucketIds)),super.renderChildren(e),e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.MAP&&this._fade(e.displayLevel,e.state);const o=this.children.filter((e=>e.visible&&e.hasData()));if(!o||0===o.length)return t.bindVAO(),t.setStencilTestEnabled(!0),void t.setBlendingEnabled(!0);for(const l of o)l.triangleCount=0;t.setStencilWriteMask(0),t.setColorMask(!0,!0,!0,!0),t.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.REPLACE),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!1),t.setDepthTestEnabled(!0),t.setDepthWriteEnabled(!0),t.setDepthFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.CompareFunction.LEQUAL),t.setClearDepth(1),t.clear(t.gl.DEPTH_BUFFER_BIT),e.renderPass="opaque";for(let l=r.length-1;l>=0;l--)this._renderStyleLayer(r[l],e,o);t.setDepthWriteEnabled(!1),t.setBlendingEnabled(i),t.setBlendFunctionSeparate(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE_MINUS_SRC_ALPHA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.BlendFactor.ONE_MINUS_SRC_ALPHA),e.renderPass="translucent";for(let l=0;l<r.length;l++)this._renderStyleLayer(r[l],e,o);t.bindVAO(),t.setStencilTestEnabled(!0),t.setBlendingEnabled(!0)}_fade(e,t){null!=this._symbolFader&&(this._symbolFader.update(e,t)||this.requestRender())}_renderStyleLayer(e,t,s){const{painter:l,renderPass:o}=t;if(void 0===e)return;const n=e.getLayoutProperty("visibility");if(n&&n.getValue()===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.Visibility.NONE)return;let a;switch(e.type){case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND:return;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.FILL:if("opaque"!==o&&"translucent"!==t.renderPass)return;a="vtlFill";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.LINE:if("translucent"!==o)return;a="vtlLine";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.CIRCLE:if("translucent"!==o)return;a="vtlCircle";break;case _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.SYMBOL:if("translucent"!==o)return;a="vtlSymbol"}if(s=e.type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.SYMBOL?s.filter((e=>e.decluttered)):s.filter((e=>e.neededForCoverage)),"vtlSymbol"!==a){const r=t.displayLevel;if(0===s.length||void 0!==e.minzoom&&e.minzoom>=r+y||void 0!==e.maxzoom&&e.maxzoom<r-y)return}const d=e.uid;t.styleLayerUID=d,t.styleLayer=e;for(const r of s)if(r.layerData.has(d)){l.renderObjects(t,s,a);break}}_renderBackgroundLayers(e,s){const{context:r,displayLevel:n,painter:u,state:y}=e,m=this._styleRepository;let _=!1;for(const t of s){if(m.getLayerById(t).type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND&&p(m.getLayerById(t),n)){_=!0;break}}if(!_)return;const b=this._tileInfoView.getTileCoverage(e.state,0,!0,"smallest"),{spans:f,lodInfo:g}=b,{level:T}=g,E=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)(),C=[];if(this._renderPasses){const t=this._renderPasses[0];null!=this._clippingInfos&&(t.brushes[0].prepareState(e),t.brushes[0].drawMany(e,this._clippingInfos))}const L=this._backgroundTiles;let v,F=0;for(const{row:i,colFrom:l,colTo:a}of f)for(let e=l;e<=a;e++){if(F<L.length)v=L[F],v.key.set(T,i,g.normalizeCol(e),g.getWorldForColumn(e)),this._tileInfoView.getTileBounds(E,v.key,!1),v.x=E[0],v.y=E[3],v.resolution=this._tileInfoView.getTileResolution(T);else{const s=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_8__["default"](T,i,g.normalizeCol(e),g.getWorldForColumn(e)),r=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)(),s),l=this._tileInfoView.getTileResolution(T);v=new _webgl_RenderableTile_js__WEBPACK_IMPORTED_MODULE_5__.RenderableTile(s,l,r[0],r[3],512,512,4096,4096),L.push(v)}v.setTransform(y),C.push(v),F++}r.setStencilWriteMask(0),r.setColorMask(!0,!0,!0,!0),r.setStencilOp(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.KEEP,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.StencilOperation.REPLACE),r.setStencilFunction(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.CompareFunction.EQUAL,0,255);let S=!0;e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST&&(S=!1),r.setStencilTestEnabled(S);for(const t of s){const s=m.getLayerById(t);s.type===_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_3__.StyleLayerType.BACKGROUND&&p(s,n)&&(e.styleLayerUID=s.uid,e.styleLayer=s,u.renderObjects(e,C,"vtlBackground"))}_tiling_TileCoverage_js__WEBPACK_IMPORTED_MODULE_7__["default"].pool.release(b)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolFader.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolFader: () => (/* binding */ _)
/* harmony export */ });
/* harmony import */ var _core_signal_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/signal.js */ "./node_modules/@arcgis/core/core/signal.js");
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/config.js");
/* harmony import */ var _core_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/core.js");
/* harmony import */ var _jobs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./jobs.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/jobs.js");
/* harmony import */ var _SymbolDeclutterer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SymbolDeclutterer.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolDeclutterer.js");
/* harmony import */ var _SymbolRepository_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./SymbolRepository.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/SymbolRepository.js");
/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./util.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/decluttering/util.js");
/* harmony import */ var _style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=.5,c=1e-6;class _{constructor(e,i){this.styleRepository=e,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._completed=!1,this._fading=(0,_core_signal_js__WEBPACK_IMPORTED_MODULE_0__.signal)(!1),this._symbolRepository=new _SymbolRepository_js__WEBPACK_IMPORTED_MODULE_5__.SymbolRepository(4096,i,(()=>new _core_js__WEBPACK_IMPORTED_MODULE_2__.VTLUniqueSymbol)),this._symbolDeclutterer=new _SymbolDeclutterer_js__WEBPACK_IMPORTED_MODULE_4__.SymbolDeclutterer(i,this._symbolRepository,((t,e,i)=>new _jobs_js__WEBPACK_IMPORTED_MODULE_3__.CollisionJob(t,e,i,this.styleRepository,this._zoom,this._viewState.rotation)),((t,e)=>{t.allSymbolsFadingOut=!0,t.lastOpacityUpdate=e,(0,_util_js__WEBPACK_IMPORTED_MODULE_6__.writeOpacityToBuffers)(t,e,!0),t.decluttered=!0,t.requestRender()}),((t,e)=>this.styleRepository.getStyleLayerByUID(t.styleLayerUID).z-this.styleRepository.getStyleLayerByUID(e.styleLayerUID).z),(t=>{const e=this.styleRepository.getStyleLayerByUID(t);if(this._zoom+c<e.minzoom||this._zoom-c>=e.maxzoom)return!1;const i=e.getLayoutProperty("visibility");return!i||i.getValue()!==_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_7__.Visibility.NONE}))}get fading(){return this._fading.value}addTile(t){t.decluttered=!1,this._tileToHandle.set(t,t.on("symbols-changed",(()=>{this._symbolRepository.add(t),this.restartDeclutter()}))),this._symbolRepository.add(t),this.restartDeclutter()}removeTile(t){const e=this._tileToHandle.get(t);e&&(this._symbolRepository.removeTile(t),this.restartDeclutter(),e.remove(),this._tileToHandle.delete(t))}update(t,e){return this._zoom=t,this._viewState={scale:e.scale,rotation:e.rotation,center:[e.center[0],e.center[1]],size:[e.size[0],e.size[1]]},this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((t=>t.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(t){this._symbolRepository.deleteStyleLayers(t)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(_config_js__WEBPACK_IMPORTED_MODULE_1__.declutterBudget),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){null!=this._stableNotificationHandle&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this._fading.value=!1}),(1+n)*_config_js__WEBPACK_IMPORTED_MODULE_1__.fadeDuration)}_notifyUnstable(){null!=this._stableNotificationHandle&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this._fading.value=!0}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/VectorTileLayerView2D.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../engine/vectorTiles/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/enums.js");
/* harmony import */ var _engine_vectorTiles_TileHandler_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../engine/vectorTiles/TileHandler.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler.js");
/* harmony import */ var _engine_vectorTiles_TileManager_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../engine/vectorTiles/TileManager.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileManager.js");
/* harmony import */ var _engine_vectorTiles_VectorTile_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../engine/vectorTiles/VectorTile.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTile.js");
/* harmony import */ var _engine_vectorTiles_VectorTileContainer_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../engine/vectorTiles/VectorTileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/VectorTileContainer.js");
/* harmony import */ var _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../engine/vectorTiles/style/StyleDefinition.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js");
/* harmony import */ var _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../engine/vectorTiles/style/StyleRepository.js */ "./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleRepository.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _tiling_TileInfoViewPOT_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../tiling/TileInfoViewPOT.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoViewPOT.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let v=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__["default"])){constructor(){super(...arguments),this._styleChanges=[],this._fetchQueue=null,this._parseQueue=null,this._tileHandlerPromise=null,this._isTileHandlerReady=!1}get fading(){return this._vectorTileContainer?.fading??!1}async hitTest(e,i){if(!this._tileHandlerPromise)return null;await this._tileHandlerPromise;const s=await this._vectorTileContainer.hitTest(i);if(!s||0===s.length)return null;const r=s[0]-1,a=this._styleRepository,l=a.getStyleLayerByUID(r);if(!l)return null;const o=a.getStyleLayerIndex(l.id);return[{type:"graphic",mapPoint:e,layer:this.layer,graphic:new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({attributes:{layerId:o,layerName:l.id,layerUID:r},layer:this.layer,sourceLayer:this.layer})}]}update(e){if(this._tileHandlerPromise&&this._isTileHandlerReady)return e.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=e.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=e.state,this._parseQueue.state=e.state,this._tileManager.update(e)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){const{style:e}=this.layer.currentStyleInfo;this._styleRepository=new _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__["default"](e),this._tileInfoView=new _tiling_TileInfoViewPOT_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new _engine_vectorTiles_VectorTileContainer_js__WEBPACK_IMPORTED_MODULE_16__.VectorTileContainer(this._tileInfoView),this._tileHandler=new _engine_vectorTiles_TileHandler_js__WEBPACK_IMPORTED_MODULE_13__.TileHandler(this.layer,this._styleRepository,window.devicePixelRatio||1),this.container.addChild(this._vectorTileContainer),this._start(),this.addAttachHandles([this.layer.on("paint-change",(e=>{if(e.isDataDriven)this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:e}),this.requestUpdate();else{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL;t.setPaintProperties(e.layer,e.paint),s&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender()}})),this.layer.on("layout-change",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);if(!i)return;const s=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__.diff)(i.layout,e.layout);if(null!=s){if((0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_9__.hasDiff)(s,"visibility")&&1===D(s))return t.setLayoutProperties(e.layer,e.layout),i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),void this._vectorTileContainer?.requestRender();this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED,data:e}),this.requestUpdate()}})),this.layer.on("style-layer-visibility-change",(e=>{const t=this._styleRepository,i=t.getLayerById(e.layer);i&&(t.setStyleLayerVisibility(e.layer,e.visibility),i.type===_engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL&&this._vectorTileContainer?.restartDeclutter(),this._vectorTileContainer?.requestRender())})),this.layer.on("style-layer-change",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_CHANGED,data:e}),this.requestUpdate()})),this.layer.on("delete-style-layer",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED,data:e}),this.requestUpdate()})),this.layer.on("load-style",(()=>this._loadStyle())),this.layer.on("spriteSource-change",(e=>{this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.SPRITES_CHANGED,data:e});const t=this._styleRepository.layers;for(const i of t)switch(i.type){case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.SYMBOL:i.getLayoutProperty("icon-image")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED,data:{layer:i.id,layout:i.layout}});break;case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.LINE:i.getPaintProperty("line-pattern")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}});break;case _engine_vectorTiles_style_StyleDefinition_js__WEBPACK_IMPORTED_MODULE_17__.StyleLayerType.FILL:i.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED,data:{layer:i.id,paint:i.paint,isDataDriven:i.isPainterDataDriven()}})}this.requestUpdate()}))])}detach(){this._stop(),this.container.removeAllChildren(),this._vectorTileContainer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._vectorTileContainer),this._tileHandler=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._tileHandler)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return (0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_11__.equals)(this.layer.tileInfo?.spatialReference,e)}canResume(){let e=super.canResume();const{currentStyleInfo:t}=this.layer;if(e&&t?.layerDefinition){const i=this.view.scale,{minScale:s,maxScale:r}=t.layerDefinition;t?.layerDefinition&&(s&&s<i&&(e=!1),r&&r>i&&(e=!1))}return e}isUpdating(){return this.fading}acquireTile(e){const t=this._createVectorTile(e);return this._updatingHandles.addPromise(this._fetchQueue.push(t.key).then((e=>this._parseQueue.push({key:t.key,data:e}))).then((e=>{t.once("attach",(()=>this.requestUpdate())),t.setData(e),this.requestUpdate()})).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(e)}))),t}releaseTile(e){const t=e.key.id;this._fetchQueue.abort(t),this._parseQueue.abort(t),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new _engine_vectorTiles_TileManager_js__WEBPACK_IMPORTED_MODULE_14__.TileManager({acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const e=new AbortController,t=this._tileHandler.start({signal:e.signal}).then((()=>{this._fetchQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__["default"]({tileInfoView:this._tileInfoView,process:(e,t)=>this._getTileData(e,t),concurrency:15}),this._parseQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_21__["default"]({tileInfoView:this._tileInfoView,process:(e,t)=>this._parseTileData(e,t),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((e=>{this._vectorTileContainer.setStyleResources(e,this._tileHandler.glyphMosaic,this._styleRepository),this.requestUpdate()})),this._tileHandlerAbortController=e,this._tileHandlerPromise=t}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const e=this._tileHandlerAbortController;e&&e.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._fetchQueue),this._parseQueue=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._parseQueue),this._tileManager=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._tileManager),this._vectorTileContainer.removeAllChildren()}async _getTileData(e,t){return this._tileHandler.fetchTileData(e,t)}async _parseTileData(e,t){return this._tileHandler.parseTileData(e,t)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const e=this._styleChanges;try{await this._tileHandler.updateStyle(e)}catch(l){_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("error applying vector-tiles style update",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const t=this._styleRepository,i=new Set;e.forEach((e=>{if(e.type!==_engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED)return;const s=e.data,r=t.getLayerById(s.layer);r&&i.add(r.uid)}));const r=new Set;e.forEach((e=>{let i;switch(e.type){case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.PAINTER_CHANGED:t.setPaintProperties(e.data.layer,e.data.paint),i=e.data.layer;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYOUT_CHANGED:t.setLayoutProperties(e.data.layer,e.data.layout),i=e.data.layer;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_REMOVED:return void t.deleteStyleLayer(e.data.layer);case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.LAYER_CHANGED:t.setStyleLayer(e.data.layer,e.data.index),i=e.data.layer.id;break;case _engine_vectorTiles_enums_js__WEBPACK_IMPORTED_MODULE_12__.StyleUpdateType.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(e.data.spriteSource))}if(i){const e=t.getLayerById(i);e&&r.add(e.uid)}}));const a=this._vectorTileContainer.children;if(i.size>0){const e=Array.from(i);this._vectorTileContainer.deleteStyleLayers(e);for(const t of a)t.deleteLayerData(e)}if(this._fetchQueue.resume(),this._parseQueue.resume(),r.size>0){const e=Array.from(r),t=[];for(const i of a){const s=this._updatingHandles.addPromise(this._fetchQueue.push(i.key).then((t=>this._parseQueue.push({key:i.key,data:t,styleLayerUIDs:e}))).then((e=>i.setData(e))));t.push(s)}await Promise.all(t)}this._styleChanges=[],this._isTileHandlerReady=!0,this.requestUpdate()}async _loadStyle(){const{style:e}=this.layer.currentStyleInfo,t=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e);this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._styleRepository=new _engine_vectorTiles_style_StyleRepository_js__WEBPACK_IMPORTED_MODULE_18__["default"](t),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=new AbortController;const{signal:s}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,t),await this._tileHandlerPromise}catch(l){if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(l))throw l}if(s.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,void this.requestUpdate();const r=await this._tileHandler.spriteMosaic;this._vectorTileContainer.setStyleResources(r,this._tileHandler.glyphMosaic,this._styleRepository),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.requestUpdate()}_createVectorTile(e){const t=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)(),e),i=this._tileInfoView.getTileResolution(e.level);return new _engine_vectorTiles_VectorTile_js__WEBPACK_IMPORTED_MODULE_15__.VectorTile(e,i,t[0],t[3],512,512,this._styleRepository)}};function D(e){if(null==e)return 0;switch(e.type){case"partial":return Object.keys(e.diff).length;case"complete":return Math.max(Object.keys(e.oldValue).length,Object.keys(e.newValue).length);case"collection":return Object.keys(e.added).length+Object.keys(e.changed).length+Object.keys(e.removed).length}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],v.prototype,"_isTileHandlerReady",void 0),v=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.VectorTileLayerView2D")],v);const w=v;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2NvcmVfcGJmX2pzLW5vZGVfbW9kdWxlc19hcmNnaXNfY29yZV9zeW1ib2xzX2NpbV9yYXN0LWZiYWM3YS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeUQsTUFBTSxhQUFhLGdJQUFnSSxTQUFTLEdBQUcsZ0RBQWdELG1EQUFHLFlBQVksbURBQUcsVUFBVSxtREFBRyxhQUFhLFFBQVEsMENBQTBDLHlEQUF5RCxlQUFlLHNEQUFzRCxXQUFXLFlBQVksUUFBUSw0REFBNEQsTUFBTSxpQkFBaUIsUUFBUSxZQUFZLFdBQVcsTUFBTSxFQUFFLGtDQUFrQyw2QkFBNkIsNkRBQTZELFlBQVksU0FBUyxPQUFPLGtDQUFrQyw2QkFBNkIsNENBQTRDLFFBQVEsNEJBQTRCLE1BQU0saUJBQWlCLFdBQVcsNEJBQTRCLFdBQVcsNEJBQTRCLFlBQVksaUJBQWlCLG9YQUFvWCxZQUFZLDRCQUE0QixZQUFZLHlCQUF5QixvQ0FBb0MsWUFBWSw2QkFBNkIsVUFBVSxrQ0FBa0MsdUJBQXVCLFVBQVUsNEJBQTRCLGFBQWEsNkVBQTZFLHVCQUF1QixjQUFjLDRFQUE0RSx1QkFBdUIsWUFBWSxnREFBZ0QsdUJBQXVCLGFBQWEsK0NBQStDLHVCQUF1QixjQUFjLDhDQUE4Qyx1QkFBdUIsV0FBVyxnREFBZ0QsdUJBQXVCLFlBQVkseUVBQXlFLHVCQUF1QixXQUFXLHdFQUF3RSx1QkFBdUIsWUFBWSwrQkFBK0IsZ0NBQWdDLHVDQUF1QyxxQkFBcUIsa0JBQWtCLGlDQUFpQyxxQkFBcUIsYUFBYSw2Q0FBNkMsZ0ZBQWdGLFVBQVUscUJBQXFCLFdBQVcsc0JBQXNCLE9BQU8sdUJBQXVCLG1DQUFtQyxNQUFNLDZCQUE2QixNQUFNLCtDQUErQyxNQUFNLDZCQUE2QixNQUFNLCtDQUErQyxXQUFXLGNBQWMsU0FBUyxvRkFBb0YsYUFBYSxnQkFBZ0IsbUJBQW1CLHdC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QUFzRCxXQUFXLDBFQUFDLGdEQUFnRCxjQUFjLG9CQUFvQixlQUFlLGdEQUFnRCw4RkFBOEYsaUhBQWlILHVEQUFDLEVBQUUsc0ZBQUMsZ0RBQWdELHVEQUFDLEVBQUUsc0ZBQUMsbURBQW1ELFVBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvcGJmLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9zeW1ib2xzL2NpbS9yYXN0ZXJpemluZ1V0aWxzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvVGlsZU1hbmFnZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS92ZWN0b3JUaWxlcy9WZWN0b3JUaWxlQ29udGFpbmVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvdmVjdG9yVGlsZXMvZGVjbHV0dGVyaW5nL1N5bWJvbEZhZGVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvd2ViZ2wvVGlsZUNvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL1ZlY3RvclRpbGVMYXllclZpZXcyRC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGhhcyBmcm9tXCIuL2hhcy5qc1wiO2ltcG9ydCB0IGZyb21cIi4vT2JqZWN0UG9vbC5qc1wiO3ZhciBlOyFmdW5jdGlvbih0KXt0W3QudmFyaW50PTBdPVwidmFyaW50XCIsdFt0LmZpeGVkNjQ9MV09XCJmaXhlZDY0XCIsdFt0LmRlbGltaXRlZD0yXT1cImRlbGltaXRlZFwiLHRbdC5maXhlZDMyPTVdPVwiZml4ZWQzMlwiLHRbdC51bmtub3duPTk5XT1cInVua25vd25cIn0oZXx8KGU9e30pKTtjb25zdCBpPTQyOTQ5NjcyOTYscz1uZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSxuPWhhcyhcInNhZmFyaVwiKXx8aGFzKFwiaW9zXCIpPzY6aGFzKFwiZmZcIik/MTI6MzI7Y2xhc3Mgcntjb25zdHJ1Y3Rvcih0LGkscz0wLG49KHQ/dC5ieXRlTGVuZ3RoOjApKXt0aGlzLl90YWc9MCx0aGlzLl9kYXRhVHlwZT1lLnVua25vd24sdGhpcy5faW5pdCh0LGkscyxuKX1faW5pdCh0LGUsaSxzKXt0aGlzLl9kYXRhPXQsdGhpcy5fZGF0YVZpZXc9ZSx0aGlzLl9wb3M9aSx0aGlzLl9lbmQ9c31hc1Vuc2FmZSgpe3JldHVybiB0aGlzfWNsb25lKCl7cmV0dXJuIG5ldyByKHRoaXMuX2RhdGEsdGhpcy5fZGF0YVZpZXcsdGhpcy5fcG9zLHRoaXMuX2VuZCl9cG9zKCl7cmV0dXJuIHRoaXMuX3Bvc31tb3ZlKHQpe3RoaXMuX3Bvcz10fW5leHRUYWcodCl7Zm9yKDs7KXtpZih0aGlzLl9wb3M9PT10aGlzLl9lbmQpcmV0dXJuITE7Y29uc3QgZT10aGlzLl9kZWNvZGVWYXJpbnQoKTtpZih0aGlzLl90YWc9ZT4+Myx0aGlzLl9kYXRhVHlwZT03JmUsIXR8fHQ9PT10aGlzLl90YWcpYnJlYWs7dGhpcy5za2lwKCl9cmV0dXJuITB9bmV4dCgpe2lmKHRoaXMuX3Bvcz09PXRoaXMuX2VuZClyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2RlY29kZVZhcmludCgpO3JldHVybiB0aGlzLl90YWc9dD4+Myx0aGlzLl9kYXRhVHlwZT03JnQsITB9ZW1wdHkoKXtyZXR1cm4gdGhpcy5fcG9zPj10aGlzLl9lbmR9dGFnKCl7cmV0dXJuIHRoaXMuX3RhZ31nZXRJbnQzMigpe3JldHVybiB0aGlzLl9kZWNvZGVWYXJpbnQoKX1nZXRJbnQ2NCgpe3JldHVybiB0aGlzLl9kZWNvZGVWYXJpbnQoKX1nZXRVSW50MzIoKXtsZXQgdD00Mjk0OTY3Mjk1O3JldHVybiB0PSgxMjcmdGhpcy5fZGF0YVt0aGlzLl9wb3NdKT4+PjAsdGhpcy5fZGF0YVt0aGlzLl9wb3MrK108MTI4P3Q6KHQ9KHR8KDEyNyZ0aGlzLl9kYXRhW3RoaXMuX3Bvc10pPDw3KT4+PjAsdGhpcy5fZGF0YVt0aGlzLl9wb3MrK108MTI4P3Q6KHQ9KHR8KDEyNyZ0aGlzLl9kYXRhW3RoaXMuX3Bvc10pPDwxNCk+Pj4wLHRoaXMuX2RhdGFbdGhpcy5fcG9zKytdPDEyOD90Oih0PSh0fCgxMjcmdGhpcy5fZGF0YVt0aGlzLl9wb3NdKTw8MjEpPj4+MCx0aGlzLl9kYXRhW3RoaXMuX3BvcysrXTwxMjg/dDoodD0odHwoMTUmdGhpcy5fZGF0YVt0aGlzLl9wb3NdKTw8MjgpPj4+MCx0aGlzLl9kYXRhW3RoaXMuX3BvcysrXTwxMjg/dDp2b2lkIDApKSkpfWdldFVJbnQ2NCgpe3JldHVybiB0aGlzLl9kZWNvZGVWYXJpbnQoKX1nZXRTSW50MzIoKXtjb25zdCB0PXRoaXMuZ2V0VUludDMyKCk7aWYodm9pZCAwIT09dClyZXR1cm4gdD4+PjFeLSgxJnQpfDB9Z2V0U0ludDY0KCl7cmV0dXJuIHRoaXMuX2RlY29kZVNWYXJpbnQoKX1nZXRCb29sKCl7Y29uc3QgdD0wIT09dGhpcy5fZGF0YVt0aGlzLl9wb3NdO3JldHVybiB0aGlzLl9za2lwKDEpLHR9Z2V0RW51bSgpe3JldHVybiB0aGlzLl9kZWNvZGVWYXJpbnQoKX1nZXRGaXhlZDY0KCl7Y29uc3QgdD10aGlzLl9kYXRhVmlldyxlPXRoaXMuX3BvcyxzPXQuZ2V0VWludDMyKGUsITApK3QuZ2V0VWludDMyKGUrNCwhMCkqaTtyZXR1cm4gdGhpcy5fc2tpcCg4KSxzfWdldFNGaXhlZDY0KCl7Y29uc3QgdD10aGlzLl9kYXRhVmlldyxlPXRoaXMuX3BvcyxzPXQuZ2V0VWludDMyKGUsITApK3QuZ2V0SW50MzIoZSs0LCEwKSppO3JldHVybiB0aGlzLl9za2lwKDgpLHN9Z2V0RG91YmxlKCl7Y29uc3QgdD10aGlzLl9kYXRhVmlldy5nZXRGbG9hdDY0KHRoaXMuX3BvcywhMCk7cmV0dXJuIHRoaXMuX3NraXAoOCksdH1nZXRGaXhlZDMyKCl7Y29uc3QgdD10aGlzLl9kYXRhVmlldy5nZXRVaW50MzIodGhpcy5fcG9zLCEwKTtyZXR1cm4gdGhpcy5fc2tpcCg0KSx0fWdldFNGaXhlZDMyKCl7Y29uc3QgdD10aGlzLl9kYXRhVmlldy5nZXRJbnQzMih0aGlzLl9wb3MsITApO3JldHVybiB0aGlzLl9za2lwKDQpLHR9Z2V0RmxvYXQoKXtjb25zdCB0PXRoaXMuX2RhdGFWaWV3LmdldEZsb2F0MzIodGhpcy5fcG9zLCEwKTtyZXR1cm4gdGhpcy5fc2tpcCg0KSx0fWdldFN0cmluZygpe2NvbnN0IHQ9dGhpcy5fZ2V0TGVuZ3RoKCksZT10aGlzLl9wb3MsaT10aGlzLl90b1N0cmluZyh0aGlzLl9kYXRhLGUsZSt0KTtyZXR1cm4gdGhpcy5fc2tpcCh0KSxpfWdldEJ5dGVzKCl7Y29uc3QgdD10aGlzLl9nZXRMZW5ndGgoKSxlPXRoaXMuX3BvcyxpPXRoaXMuX3RvQnl0ZXModGhpcy5fZGF0YSxlLGUrdCk7cmV0dXJuIHRoaXMuX3NraXAodCksaX1nZXRMZW5ndGgoKXtyZXR1cm4gdGhpcy5fZ2V0TGVuZ3RoVW5zYWZlKCl9cHJvY2Vzc01lc3NhZ2VXaXRoQXJncyh0LGUsaSxzKXtjb25zdCBuPXRoaXMuZ2V0TWVzc2FnZSgpLHI9dChuLGUsaSxzKTtyZXR1cm4gbi5yZWxlYXNlKCkscn1wcm9jZXNzTWVzc2FnZSh0KXtjb25zdCBlPXRoaXMuZ2V0TWVzc2FnZSgpLGk9dChlKTtyZXR1cm4gZS5yZWxlYXNlKCksaX1nZXRNZXNzYWdlKCl7Y29uc3QgdD10aGlzLl9nZXRMZW5ndGgoKSxlPXIucG9vbC5hY3F1aXJlKCk7cmV0dXJuIGUuX2luaXQodGhpcy5fZGF0YSx0aGlzLl9kYXRhVmlldyx0aGlzLl9wb3MsdGhpcy5fcG9zK3QpLHRoaXMuX3NraXAodCksZX1yZWxlYXNlKCl7ci5wb29sLnJlbGVhc2UodGhpcyl9ZGF0YVR5cGUoKXtyZXR1cm4gdGhpcy5fZGF0YVR5cGV9c2tpcCgpe3N3aXRjaCh0aGlzLl9kYXRhVHlwZSl7Y2FzZSBlLnZhcmludDp0aGlzLl9kZWNvZGVWYXJpbnQoKTticmVhaztjYXNlIGUuZml4ZWQ2NDp0aGlzLl9za2lwKDgpO2JyZWFrO2Nhc2UgZS5kZWxpbWl0ZWQ6dGhpcy5fc2tpcCh0aGlzLl9nZXRMZW5ndGgoKSk7YnJlYWs7Y2FzZSBlLmZpeGVkMzI6dGhpcy5fc2tpcCg0KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgZGF0YSB0eXBlIVwiKX19c2tpcExlbih0KXt0aGlzLl9za2lwKHQpfV9za2lwKHQpe2lmKHRoaXMuX3Bvcyt0PnRoaXMuX2VuZCl0aHJvdyBuZXcgRXJyb3IoXCJBdHRlbXB0IHRvIHNraXAgcGFzdCB0aGUgZW5kIG9mIGJ1ZmZlciFcIik7dGhpcy5fcG9zKz10fV9kZWNvZGVWYXJpbnQoKXtjb25zdCB0PXRoaXMuX2RhdGE7bGV0IGU9dGhpcy5fcG9zLGk9MCxzPTA7aWYodGhpcy5fZW5kLWU+PTEwKWRve2lmKHM9dFtlKytdLGl8PTEyNyZzLDA9PSgxMjgmcykpYnJlYWs7aWYocz10W2UrK10saXw9KDEyNyZzKTw8NywwPT0oMTI4JnMpKWJyZWFrO2lmKHM9dFtlKytdLGl8PSgxMjcmcyk8PDE0LDA9PSgxMjgmcykpYnJlYWs7aWYocz10W2UrK10saXw9KDEyNyZzKTw8MjEsMD09KDEyOCZzKSlicmVhaztpZihzPXRbZSsrXSxpKz0yNjg0MzU0NTYqKDEyNyZzKSwwPT0oMTI4JnMpKWJyZWFrO2lmKHM9dFtlKytdLGkrPTM0MzU5NzM4MzY4KigxMjcmcyksMD09KDEyOCZzKSlicmVhaztpZihzPXRbZSsrXSxpKz00Mzk4MDQ2NTExMTA0KigxMjcmcyksMD09KDEyOCZzKSlicmVhaztpZihzPXRbZSsrXSxpKz01NjI5NDk5NTM0MjEzMTIqKDEyNyZzKSwwPT0oMTI4JnMpKWJyZWFrO2lmKHM9dFtlKytdLGkrPTcyMDU3NTk0MDM3OTI3OTQwKigxMjcmcyksMD09KDEyOCZzKSlicmVhaztpZihzPXRbZSsrXSxpKz0weDgwMDAwMDAwMDAwMDAwMDAqKDEyNyZzKSwwPT0oMTI4JnMpKWJyZWFrO3Rocm93IG5ldyBFcnJvcihcIlZhcmludCB0b28gbG9uZyFcIil9d2hpbGUoMCk7ZWxzZXtsZXQgbj0xO2Zvcig7ZSE9PXRoaXMuX2VuZCYmKHM9dFtlXSwwIT0oMTI4JnMpKTspKytlLGkrPSgxMjcmcykqbixuKj0xMjg7aWYoZT09PXRoaXMuX2VuZCl0aHJvdyBuZXcgRXJyb3IoXCJWYXJpbnQgb3ZlcnJ1biFcIik7KytlLGkrPXMqbn1yZXR1cm4gdGhpcy5fcG9zPWUsaX1fZGVjb2RlU1ZhcmludCgpe2NvbnN0IHQ9dGhpcy5fZGF0YTtsZXQgZSxpPTAscz0wO2NvbnN0IG49MSZ0W3RoaXMuX3Bvc107aWYocz10W3RoaXMuX3BvcysrXSxpfD0xMjcmcywwPT0oMTI4JnMpKXJldHVybiBuPy0oaSsxKS8yOmkvMjtpZihzPXRbdGhpcy5fcG9zKytdLGl8PSgxMjcmcyk8PDcsMD09KDEyOCZzKSlyZXR1cm4gbj8tKGkrMSkvMjppLzI7aWYocz10W3RoaXMuX3BvcysrXSxpfD0oMTI3JnMpPDwxNCwwPT0oMTI4JnMpKXJldHVybiBuPy0oaSsxKS8yOmkvMjtpZihzPXRbdGhpcy5fcG9zKytdLGl8PSgxMjcmcyk8PDIxLDA9PSgxMjgmcykpcmV0dXJuIG4/LShpKzEpLzI6aS8yO2lmKHM9dFt0aGlzLl9wb3MrK10saSs9MjY4NDM1NDU2KigxMjcmcyksMD09KDEyOCZzKSlyZXR1cm4gbj8tKGkrMSkvMjppLzI7aWYocz10W3RoaXMuX3BvcysrXSxpKz0zNDM1OTczODM2OCooMTI3JnMpLDA9PSgxMjgmcykpcmV0dXJuIG4/LShpKzEpLzI6aS8yO2lmKHM9dFt0aGlzLl9wb3MrK10saSs9NDM5ODA0NjUxMTEwNCooMTI3JnMpLDA9PSgxMjgmcykpcmV0dXJuIG4/LShpKzEpLzI6aS8yO2lmKGU9QmlnSW50KGkpLHM9dFt0aGlzLl9wb3MrK10sZSs9MHgyMDAwMDAwMDAwMDAwbipCaWdJbnQoMTI3JnMpLDA9PSgxMjgmcykpcmV0dXJuIE51bWJlcihuPy0oZSsxbikvMm46ZS8ybik7aWYocz10W3RoaXMuX3BvcysrXSxlKz0weDEwMDAwMDAwMDAwMDAwMG4qQmlnSW50KDEyNyZzKSwwPT0oMTI4JnMpKXJldHVybiBOdW1iZXIobj8tKGUrMW4pLzJuOmUvMm4pO2lmKHM9dFt0aGlzLl9wb3MrK10sZSs9MHg4MDAwMDAwMDAwMDAwMDAwbipCaWdJbnQoMTI3JnMpLDA9PSgxMjgmcykpcmV0dXJuIE51bWJlcihuPy0oZSsxbikvMm46ZS8ybik7dGhyb3cgbmV3IEVycm9yKFwiVmFyaW50IHRvbyBsb25nIVwiKX1fZ2V0TGVuZ3RoKCl7aWYodGhpcy5fZGF0YVR5cGUhPT1lLmRlbGltaXRlZCl0aHJvdyBuZXcgRXJyb3IoXCJOb3QgYSBkZWxpbWl0ZWQgZGF0YSB0eXBlIVwiKTtyZXR1cm4gdGhpcy5fZGVjb2RlVmFyaW50KCl9X2dldExlbmd0aFVuc2FmZSgpe3JldHVybiB0aGlzLmdldFVJbnQzMigpfV90b1N0cmluZyh0LGUsaSl7aWYoKGk9TWF0aC5taW4odGhpcy5fZW5kLGkpKS1lPm4pe2NvbnN0IG49dC5zdWJhcnJheShlLGkpO3JldHVybiBzLmRlY29kZShuKX1sZXQgcj1cIlwiLGg9XCJcIjtmb3IobGV0IHM9ZTtzPGk7KytzKXtjb25zdCBlPXRbc107MTI4JmU/aCs9XCIlXCIrZS50b1N0cmluZygxNik6KHIrPWRlY29kZVVSSUNvbXBvbmVudChoKStTdHJpbmcuZnJvbUNoYXJDb2RlKGUpLGg9XCJcIil9cmV0dXJuIGgubGVuZ3RoJiYocis9ZGVjb2RlVVJJQ29tcG9uZW50KGgpKSxyfV90b0J5dGVzKHQsZSxpKXtyZXR1cm4gaT1NYXRoLm1pbih0aGlzLl9lbmQsaSksbmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsZSxpLWUpfX1yLnBvb2w9bmV3IHQocix2b2lkIDAsKHQ9Pnt0Ll9kYXRhPW51bGwsdC5fZGF0YVZpZXc9bnVsbH0pKTtleHBvcnR7ciBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cGFja0Zsb2F0UkdCQSBhcyBvfWZyb21cIi4uLy4uL2NvcmUvZmxvYXRSR0JBLmpzXCI7aW1wb3J0e25leHRQb3dlck9mVHdvIGFzIHR9ZnJvbVwiLi4vLi4vY29yZS9tYXRoVXRpbHMuanNcIjtjb25zdCBhPW89PlwidmVydGljYWxcIj09PW98fFwiaG9yaXpvbnRhbFwiPT09b3x8XCJjcm9zc1wiPT09b3x8XCJlc3JpU0ZTQ3Jvc3NcIj09PW98fFwiZXNyaVNGU1ZlcnRpY2FsXCI9PT1vfHxcImVzcmlTRlNIb3Jpem9udGFsXCI9PT1vO2Z1bmN0aW9uIHIobyxyLGUpe2NvbnN0IGk9dChNYXRoLmNlaWwoZSkpLG49YShyKT84Kmk6MTYqaSxzPTIqaTtvLndpZHRoPW4sby5oZWlnaHQ9bjtjb25zdCBsPW8uZ2V0Q29udGV4dChcIjJkXCIpO2wuc3Ryb2tlU3R5bGU9XCIjRkZGRkZGXCIsbC5saW5lV2lkdGg9aSxsLmJlZ2luUGF0aCgpLFwidmVydGljYWxcIiE9PXImJlwiY3Jvc3NcIiE9PXImJlwiZXNyaVNGU0Nyb3NzXCIhPT1yJiZcImVzcmlTRlNWZXJ0aWNhbFwiIT09cnx8KGwubW92ZVRvKG4vMiwtcyksbC5saW5lVG8obi8yLG4rcykpLFwiaG9yaXpvbnRhbFwiIT09ciYmXCJjcm9zc1wiIT09ciYmXCJlc3JpU0ZTQ3Jvc3NcIiE9PXImJlwiZXNyaVNGU0hvcml6b250YWxcIiE9PXJ8fChsLm1vdmVUbygtcyxuLzIpLGwubGluZVRvKG4rcyxuLzIpKSxcImZvcndhcmQtZGlhZ29uYWxcIiE9PXImJlwiZGlhZ29uYWwtY3Jvc3NcIiE9PXImJlwiZXNyaVNGU0RpYWdvbmFsQ3Jvc3NcIiE9PXImJlwiZXNyaVNGU0ZvcndhcmREaWFnb25hbFwiIT09cnx8KGwubW92ZVRvKC1zLC1zKSxsLmxpbmVUbyhuK3MsbitzKSxsLm1vdmVUbyhuLXMsLXMpLGwubGluZVRvKG4rcyxzKSxsLm1vdmVUbygtcyxuLXMpLGwubGluZVRvKHMsbitzKSksXCJiYWNrd2FyZC1kaWFnb25hbFwiIT09ciYmXCJkaWFnb25hbC1jcm9zc1wiIT09ciYmXCJlc3JpU0ZTQmFja3dhcmREaWFnb25hbFwiIT09ciYmXCJlc3JpU0ZTRGlhZ29uYWxDcm9zc1wiIT09cnx8KGwubW92ZVRvKG4rcywtcyksbC5saW5lVG8oLXMsbitzKSxsLm1vdmVUbyhzLC1zKSxsLmxpbmVUbygtcyxzKSxsLm1vdmVUbyhuK3Msbi1zKSxsLmxpbmVUbyhuLXMsbitzKSksbC5zdHJva2UoKTtjb25zdCBoPWwuZ2V0SW1hZ2VEYXRhKDAsMCxvLndpZHRoLG8uaGVpZ2h0KSxjPW5ldyBVaW50OEFycmF5KGguZGF0YSk7bGV0IG07Zm9yKGxldCB0PTA7dDxjLmxlbmd0aDt0Kz00KW09Y1t0KzNdLzI1NSxjW3RdPWNbdF0qbSxjW3QrMV09Y1t0KzFdKm0sY1t0KzJdPWNbdCsyXSptO3JldHVybltjLG8ud2lkdGgsby5oZWlnaHRdfWZ1bmN0aW9uIGUodCxhKXtjb25zdCByPVwiQnV0dFwiPT09YSxlPVwiU3F1YXJlXCI9PT1hLGk9IXImJiFlO3QubGVuZ3RoJTI9PTEmJih0PVsuLi50LC4uLnRdKTtjb25zdCBuPTE1LjUscz0yKm47bGV0IGw9MDtmb3IoY29uc3QgbyBvZiB0KWwrPW87Y29uc3QgaD1NYXRoLnJvdW5kKGwqbiksYz1uZXcgRmxvYXQzMkFycmF5KGgqcyksbT0uNSpuO2xldCBTPTAsRj0wLGc9LjUsVD0hMDtmb3IoY29uc3QgbyBvZiB0KXtmb3IoUz1GLEYrPW8qbjtnPD1GOyl7bGV0IG89LjU7Zm9yKDtvPHM7KXtjb25zdCB0PShvLS41KSpoK2ctLjUsYT1pPyhvLW4pKihvLW4pOk1hdGguYWJzKG8tbik7Y1t0XT1UP3I/TWF0aC5tYXgoTWF0aC5tYXgoUyttLWcsYSksTWF0aC5tYXgoZy1GK20sYSkpOmE6aT9NYXRoLm1pbigoZy1TKSooZy1TKSthLChnLUYpKihnLUYpK2EpOmU/TWF0aC5taW4oTWF0aC5tYXgoZy1TLGEpLE1hdGgubWF4KEYtZyxhKSk6TWF0aC5taW4oTWF0aC5tYXgoZy1TK20sYSksTWF0aC5tYXgoRittLWcsYSkpLG8rK31nKyt9VD0hVH1jb25zdCBkPWMubGVuZ3RoLGY9bmV3IFVpbnQ4QXJyYXkoNCpkKTtmb3IobGV0IE09MDtNPGQ7KytNKXtjb25zdCB0PShpP01hdGguc3FydChjW01dKTpjW01dKS9uO28odCxmLDQqTSl9cmV0dXJuW2YsaCxzXX1leHBvcnR7ZSBhcyByYXN0ZXJpemVEYXNoLHIgYXMgcmFzdGVyaXplU2ltcGxlRmlsbH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e0xSVUNhY2hlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9MUlVDYWNoZS5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uL3RpbGluZy9UaWxlQ292ZXJhZ2UuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi90aWxpbmcvVGlsZUtleS5qc1wiO2NvbnN0IGw9NTEyLHM9MWUtNixyPShlLGkpPT5lKzEvKDE8PDIqaSk7Y2xhc3Mgb3tjb25zdHJ1Y3RvcihpLHQpe3RoaXMuX3RpbGVzPW5ldyBNYXAsdGhpcy5fdGlsZUNhY2hlPW5ldyBlKDQwLChlPT5lLmRpc3Bvc2UoKSkpLHRoaXMuX3ZpZXdTaXplPVswLDBdLHRoaXMuX3Zpc2libGVUaWxlcz1uZXcgTWFwLHRoaXMuYWNxdWlyZVRpbGU9aS5hY3F1aXJlVGlsZSx0aGlzLnJlbGVhc2VUaWxlPWkucmVsZWFzZVRpbGUsdGhpcy50aWxlSW5mb1ZpZXc9aS50aWxlSW5mb1ZpZXcsdGhpcy5fY29udGFpbmVyPXR9ZGVzdHJveSgpe2Zvcihjb25zdFtlLGldb2YgdGhpcy5fdGlsZXMpaS5kaXNwb3NlKCk7dGhpcy5fdGlsZXM9bnVsbCx0aGlzLl90aWxlQ2FjaGUuY2xlYXIoKSx0aGlzLl90aWxlQ2FjaGU9bnVsbH11cGRhdGUoZSl7dGhpcy5fdXBkYXRlQ2FjaGVTaXplKGUpO2NvbnN0IGw9dGhpcy50aWxlSW5mb1ZpZXcscz1sLmdldFRpbGVDb3ZlcmFnZShlLnN0YXRlLDAsITAsXCJzbWFsbGVzdFwiKTtpZighcylyZXR1cm4hMDtjb25zdHtzcGFuczpyLGxvZEluZm86b309cyx7bGV2ZWw6bn09byxhPXRoaXMuX3RpbGVzLGM9bmV3IFNldCxoPW5ldyBTZXQ7Zm9yKGNvbnN0e3JvdzppLGNvbEZyb206Xyxjb2xUbzpmfW9mIHIpZm9yKGxldCBlPV87ZTw9ZjtlKyspe2NvbnN0IGw9dC5nZXRJZChuLGksby5ub3JtYWxpemVDb2woZSksby5nZXRXb3JsZEZvckNvbHVtbihlKSkscz10aGlzLl9nZXRPckFjcXVpcmVUaWxlKGwpO2MuYWRkKGwpLHMucHJvY2Vzc2VkKCk/dGhpcy5fYWRkVG9Db250YWluZXIocyk6aC5hZGQobmV3IHQobCkpfWZvcihjb25zdFtpLHRdb2YgYSl0LmlzQ292ZXJhZ2U9Yy5oYXMoaSk7Zm9yKGNvbnN0IGkgb2YgaCl0aGlzLl9maW5kUGxhY2Vob2xkZXJzRm9yTWlzc2luZ1RpbGVzKGksYyk7bGV0IGQ9ITE7Zm9yKGNvbnN0W2ksdF1vZiBhKXQubmVlZGVkRm9yQ292ZXJhZ2U9Yy5oYXMoaSksdC5uZWVkZWRGb3JDb3ZlcmFnZXx8dC5pc0hvbGRpbmdGb3JGYWRlJiZsLmludGVyc2VjdHMocyx0LmtleSkmJmMuYWRkKGkpLHQuaXNGYWRpbmcmJihkPSEwKTtmb3IoY29uc3RbaSx0XW9mIHRoaXMuX3RpbGVzKWMuaGFzKGkpfHx0aGlzLl9yZWxlYXNlVGlsZShpKTtyZXR1cm4gaS5wb29sLnJlbGVhc2UocyksIWR9Y2xlYXIoKXt0aGlzLl90aWxlcy5jbGVhcigpLHRoaXMuX3RpbGVDYWNoZS5jbGVhcigpLHRoaXMuX3Zpc2libGVUaWxlcy5jbGVhcigpfWNsZWFyQ2FjaGUoKXt0aGlzLl90aWxlQ2FjaGUuY2xlYXIoKX1fZmluZFBsYWNlaG9sZGVyc0Zvck1pc3NpbmdUaWxlcyhlLGkpe2NvbnN0IHQ9W107Zm9yKGNvbnN0W3Mscl1vZiB0aGlzLl90aWxlcyl0aGlzLl9hZGRQbGFjZWhvbGRlckNoaWxkKHQscixlLGkpO2NvbnN0IGw9dC5yZWR1Y2UociwwKTtNYXRoLmFicygxLWwpPHN8fHRoaXMuX2FkZFBsYWNlaG9sZGVyUGFyZW50KGUuaWQsaSl9X2FkZFBsYWNlaG9sZGVyQ2hpbGQoZSxpLHQsbCl7aS5rZXkubGV2ZWw8PXQubGV2ZWx8fCFpLmhhc0RhdGEoKXx8YSh0LGkua2V5KSYmKHRoaXMuX2FkZFRvQ29udGFpbmVyKGkpLGwuYWRkKGkuaWQpLGUucHVzaChpLmtleS5sZXZlbC10LmxldmVsKSl9X2FkZFBsYWNlaG9sZGVyUGFyZW50KGUsaSl7Y29uc3QgdD10aGlzLl90aWxlcztsZXQgbD1lO2Zvcig7Oyl7aWYobD1uKGwpLCFsfHxpLmhhcyhsKSlyZXR1cm47Y29uc3QgZT10LmdldChsKTtpZihlJiZlLmhhc0RhdGEoKSlyZXR1cm4gdGhpcy5fYWRkVG9Db250YWluZXIoZSksdm9pZCBpLmFkZChlLmlkKX19X2dldE9yQWNxdWlyZVRpbGUoZSl7bGV0IGk9dGhpcy5fdGlsZXMuZ2V0KGUpO3JldHVybiBpfHwoaT10aGlzLl90aWxlQ2FjaGUucG9wKGUpLGl8fChpPXRoaXMuYWNxdWlyZVRpbGUobmV3IHQoZSkpKSx0aGlzLl90aWxlcy5zZXQoZSxpKSxpKX1fcmVsZWFzZVRpbGUoZSl7Y29uc3QgaT10aGlzLl90aWxlcy5nZXQoZSk7dGhpcy5yZWxlYXNlVGlsZShpKSx0aGlzLl9yZW1vdmVGcm9tQ29udGFpbmVyKGkpLHRoaXMuX3RpbGVzLmRlbGV0ZShlKSxpLmhhc0RhdGEoKT90aGlzLl90aWxlQ2FjaGUucHV0KGUsaSwxKTppLmRpc3Bvc2UoKX1fYWRkVG9Db250YWluZXIoZSl7bGV0IGk7Y29uc3QgdD1bXSxsPXRoaXMuX2NvbnRhaW5lcjtpZihsLmNvbnRhaW5zKGUpKXJldHVybjtjb25zdCBzPXRoaXMuX3Zpc2libGVUaWxlcztmb3IoY29uc3RbcixvXW9mIHMpdGhpcy5fY2FuQ29ubmVjdERpcmVjdGx5KGUsbykmJnQucHVzaChvKSxudWxsPT1pJiZ0aGlzLl9jYW5Db25uZWN0RGlyZWN0bHkobyxlKSYmKGk9byk7aWYobnVsbCE9aSl7Zm9yKGNvbnN0IGwgb2YgdClpLmNoaWxkcmVuVGlsZXMuZGVsZXRlKGwpLGUuY2hpbGRyZW5UaWxlcy5hZGQobCksbC5wYXJlbnRUaWxlPWU7aS5jaGlsZHJlblRpbGVzLmFkZChlKSxlLnBhcmVudFRpbGU9aX1lbHNlIGZvcihjb25zdCByIG9mIHQpZS5jaGlsZHJlblRpbGVzLmFkZChyKSxyLnBhcmVudFRpbGU9ZTtzLnNldChlLmlkLGUpLGwuYWRkQ2hpbGQoZSl9X3JlbW92ZUZyb21Db250YWluZXIoZSl7aWYodGhpcy5fdmlzaWJsZVRpbGVzLmRlbGV0ZShlLmlkKSx0aGlzLl9jb250YWluZXIucmVtb3ZlQ2hpbGQoZSksbnVsbCE9ZS5wYXJlbnRUaWxlKXtlLnBhcmVudFRpbGUuY2hpbGRyZW5UaWxlcy5kZWxldGUoZSk7Zm9yKGNvbnN0IGkgb2YgZS5jaGlsZHJlblRpbGVzKW51bGwhPWUucGFyZW50VGlsZSYmZS5wYXJlbnRUaWxlLmNoaWxkcmVuVGlsZXMuYWRkKGkpfWZvcihjb25zdCBpIG9mIGUuY2hpbGRyZW5UaWxlcylpLnBhcmVudFRpbGU9ZS5wYXJlbnRUaWxlO2UucGFyZW50VGlsZT1udWxsLGUuY2hpbGRyZW5UaWxlcy5jbGVhcigpfV9jYW5Db25uZWN0RGlyZWN0bHkoZSxpKXtjb25zdCB0PWUua2V5O2xldHtsZXZlbDpsLHJvdzpzLGNvbDpyLHdvcmxkOm99PWkua2V5O2NvbnN0IG49dGhpcy5fdmlzaWJsZVRpbGVzO2Zvcig7bD4wOyl7aWYobC0tLHM+Pj0xLHI+Pj0xLHQubGV2ZWw9PT1sJiZ0LnJvdz09PXMmJnQuY29sPT09ciYmdC53b3JsZD09PW8pcmV0dXJuITA7aWYobi5oYXMoYCR7bH0vJHtzfS8ke3J9LyR7b31gKSlyZXR1cm4hMX1yZXR1cm4hMX1fdXBkYXRlQ2FjaGVTaXplKGUpe2NvbnN0IGk9ZS5zdGF0ZS5zaXplO2lmKGlbMF09PT10aGlzLl92aWV3U2l6ZVswXSYmaVsxXT09PXRoaXMuX3ZpZXdTaXplWzFdKXJldHVybjtjb25zdCB0PU1hdGguY2VpbChpWzBdL2wpKzEscz1NYXRoLmNlaWwoaVsxXS9sKSsxO3RoaXMuX3ZpZXdTaXplWzBdPWlbMF0sdGhpcy5fdmlld1NpemVbMV09aVsxXSx0aGlzLl90aWxlQ2FjaGUubWF4U2l6ZT01KnQqc319ZnVuY3Rpb24gbihlKXtjb25zdFtpLHQsbCxzXT1lLnNwbGl0KFwiL1wiKSxyPXBhcnNlSW50KGksMTApO3JldHVybiAwPT09cj9udWxsOmAke3ItMX0vJHtwYXJzZUludCh0LDEwKT4+MX0vJHtwYXJzZUludChsLDEwKT4+MX0vJHtwYXJzZUludChzLDEwKX1gfWZ1bmN0aW9uIGEoZSxpKXtjb25zdCB0PWkubGV2ZWwtZS5sZXZlbDtyZXR1cm4gZS5yb3c9PT1pLnJvdz4+dCYmZS5jb2w9PT1pLmNvbD4+dCYmZS53b3JsZD09PWkud29ybGR9ZXhwb3J0e28gYXMgVGlsZU1hbmFnZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjcmVhdGVSZXNvbHZlciBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7U3ltYm9sRmFkZXIgYXMgc31mcm9tXCIuL2RlY2x1dHRlcmluZy9TeW1ib2xGYWRlci5qc1wiO2ltcG9ydHtWaXNpYmlsaXR5IGFzIHIsU3R5bGVMYXllclR5cGUgYXMgaX1mcm9tXCIuL3N0eWxlL1N0eWxlRGVmaW5pdGlvbi5qc1wiO2ltcG9ydHtXR0xEcmF3UGhhc2UgYXMgbH1mcm9tXCIuLi93ZWJnbC9lbnVtcy5qc1wiO2ltcG9ydHtSZW5kZXJhYmxlVGlsZSBhcyBvfWZyb21cIi4uL3dlYmdsL1JlbmRlcmFibGVUaWxlLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vd2ViZ2wvVGlsZUNvbnRhaW5lci5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uL3RpbGluZy9UaWxlQ292ZXJhZ2UuanNcIjtpbXBvcnQgZCBmcm9tXCIuLi8uLi90aWxpbmcvVGlsZUtleS5qc1wiO2ltcG9ydHtTdGVuY2lsT3BlcmF0aW9uIGFzIGgsQ29tcGFyZUZ1bmN0aW9uIGFzIGMsQmxlbmRGYWN0b3IgYXMgdX1mcm9tXCIuLi8uLi8uLi93ZWJnbC9lbnVtcy5qc1wiO2NvbnN0IHk9MWUtNjtmdW5jdGlvbiBwKGUsdCl7aWYoZSl7Y29uc3Qgcz1lLmdldExheW91dFByb3BlcnR5KFwidmlzaWJpbGl0eVwiKTtpZighc3x8cy5nZXRWYWx1ZSgpIT09ci5OT05FJiYodm9pZCAwPT09ZS5taW56b29tfHxlLm1pbnpvb208dCt5KSYmKHZvaWQgMD09PWUubWF4em9vbXx8ZS5tYXh6b29tPj10LXkpKXJldHVybiEwfXJldHVybiExfWNsYXNzIG0gZXh0ZW5kcyBue2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2JhY2tncm91bmRUaWxlcz1bXSx0aGlzLl9wb2ludFRvQ2FsbGJhY2tzPW5ldyBNYXB9ZGVzdHJveSgpe3RoaXMucmVtb3ZlQWxsQ2hpbGRyZW4oKSx0aGlzLl9zcHJpdGVNb3NhaWM/LmRpc3Bvc2UoKSx0aGlzLl9zcHJpdGVNb3NhaWM9bnVsbCx0aGlzLl9nbHlwaE1vc2FpYz8uZGlzcG9zZSgpLHRoaXMuX2dseXBoTW9zYWljPW51bGwsbnVsbCE9dGhpcy5fc3ltYm9sRmFkZXImJih0aGlzLl9zeW1ib2xGYWRlci5jbGVhcigpLHRoaXMuX3N5bWJvbEZhZGVyPW51bGwpLHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1udWxsLHRoaXMuX2JhY2tncm91bmRUaWxlcz1bXSx0aGlzLl9wb2ludFRvQ2FsbGJhY2tzLmNsZWFyKCl9Z2V0IGZhZGluZygpe3JldHVybiB0aGlzLl9zeW1ib2xGYWRlcj8uZmFkaW5nPz8hMX1zZXRTdHlsZVJlc291cmNlcyhlLHQscil7dGhpcy5fc3ByaXRlTW9zYWljPWUsdGhpcy5fZ2x5cGhNb3NhaWM9dCx0aGlzLl9zdHlsZVJlcG9zaXRvcnk9cixudWxsPT10aGlzLl9zeW1ib2xGYWRlciYmKHRoaXMuX3N5bWJvbEZhZGVyPW5ldyBzKHRoaXMuX3N0eWxlUmVwb3NpdG9yeSx0aGlzLmNoaWxkcmVuKSksdGhpcy5fc3ltYm9sRmFkZXIuc3R5bGVSZXBvc2l0b3J5PXJ9c2V0U3ByaXRlTW9zYWljKGUpe3RoaXMuX3Nwcml0ZU1vc2FpYz8uZGlzcG9zZSgpLHRoaXMuX3Nwcml0ZU1vc2FpYz1lfWRlbGV0ZVN0eWxlTGF5ZXJzKGUpe251bGwhPXRoaXMuX3N5bWJvbEZhZGVyJiZ0aGlzLl9zeW1ib2xGYWRlci5kZWxldGVTdHlsZUxheWVycyhlKX1hc3luYyBoaXRUZXN0KHQpe2NvbnN0IHM9ZSgpO3JldHVybiB0aGlzLl9wb2ludFRvQ2FsbGJhY2tzLnNldCh0LHMpLHRoaXMucmVxdWVzdFJlbmRlcigpLHMucHJvbWlzZX1jcmVhdGVSZW5kZXJQYXJhbXMoZSl7cmV0dXJuey4uLnN1cGVyLmNyZWF0ZVJlbmRlclBhcmFtcyhlKSxyZW5kZXJQYXNzOm51bGwsc3R5bGVMYXllcjpudWxsLHN0eWxlTGF5ZXJVSUQ6LTEsZ2x5cGhNb3NhaWM6dGhpcy5fZ2x5cGhNb3NhaWMsc3ByaXRlTW9zYWljOnRoaXMuX3Nwcml0ZU1vc2FpYyxoYXNDbGlwcGluZzohIXRoaXMuX2NsaXBwaW5nSW5mb3N9fWRvUmVuZGVyKGUpeyF0aGlzLnZpc2libGV8fGUuZHJhd1BoYXNlIT09bC5NQVAmJmUuZHJhd1BoYXNlIT09bC5ERUJVR3x8dm9pZCAwPT09dGhpcy5fc3ByaXRlTW9zYWljfHxzdXBlci5kb1JlbmRlcihlKX1hZGRDaGlsZChlKXtyZXR1cm4gc3VwZXIuYWRkQ2hpbGQoZSksbnVsbCE9dGhpcy5fc3ltYm9sRmFkZXI/dGhpcy5fc3ltYm9sRmFkZXIuYWRkVGlsZShlKTplLmRlY2x1dHRlcmVkPSEwLHRoaXMucmVxdWVzdFJlbmRlcigpLGV9cmVtb3ZlQ2hpbGQoZSl7cmV0dXJuIG51bGwhPXRoaXMuX3N5bWJvbEZhZGVyJiZ0aGlzLl9zeW1ib2xGYWRlci5yZW1vdmVUaWxlKGUpLHRoaXMucmVxdWVzdFJlbmRlcigpLHN1cGVyLnJlbW92ZUNoaWxkKGUpfXJlbmRlckNoaWxkcmVuKGUpe2NvbnN0e2RyYXdQaGFzZTp0fT1lO2lmKHQhPT1sLkRFQlVHKXtpZih0aGlzLl9kb1JlbmRlcihlKSx0aGlzLl9wb2ludFRvQ2FsbGJhY2tzLnNpemU+MCl7ZS5kcmF3UGhhc2U9bC5ISVRURVNUO2NvbnN0IHM9ZS5wYWludGVyLmVmZmVjdHMuaGl0dGVzdFZUTDtzLmJpbmQoZSksdGhpcy5fZG9SZW5kZXIoZSkscy5kcmF3KGUsdGhpcy5fcG9pbnRUb0NhbGxiYWNrcykscy51bmJpbmQoZSksZS5kcmF3UGhhc2U9dH19ZWxzZSBzdXBlci5yZW5kZXJDaGlsZHJlbihlKX1yZW1vdmVBbGxDaGlsZHJlbigpe2ZvcihsZXQgZT0wO2U8dGhpcy5jaGlsZHJlbi5sZW5ndGg7ZSsrKXtjb25zdCB0PXRoaXMuY2hpbGRyZW5bZV07bnVsbCE9dGhpcy5fc3ltYm9sRmFkZXImJnRoaXMuX3N5bWJvbEZhZGVyLnJlbW92ZVRpbGUodCksdC5kaXNwb3NlKCl9c3VwZXIucmVtb3ZlQWxsQ2hpbGRyZW4oKX1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW4uZmlsdGVyKChlPT5lLm5lZWRlZEZvckNvdmVyYWdlJiZlLmhhc0RhdGEoKSkpfXJlc3RhcnREZWNsdXR0ZXIoKXtudWxsIT10aGlzLl9zeW1ib2xGYWRlciYmdGhpcy5fc3ltYm9sRmFkZXIucmVzdGFydERlY2x1dHRlcigpfV9kb1JlbmRlcihlKXtjb25zdHtjb250ZXh0OnR9PWUscz10aGlzLl9zdHlsZVJlcG9zaXRvcnk7aWYoIXMpcmV0dXJuO2NvbnN0IHI9cy5sYXllcnM7bGV0IGk9ITA7ZS5kcmF3UGhhc2U9PT1sLkhJVFRFU1QmJihpPSExKSxzLmJhY2tncm91bmRCdWNrZXRJZHMubGVuZ3RoPjAmJihlLnJlbmRlclBhc3M9XCJiYWNrZ3JvdW5kXCIsdGhpcy5fcmVuZGVyQmFja2dyb3VuZExheWVycyhlLHMuYmFja2dyb3VuZEJ1Y2tldElkcykpLHN1cGVyLnJlbmRlckNoaWxkcmVuKGUpLGUuZHJhd1BoYXNlPT09bC5NQVAmJnRoaXMuX2ZhZGUoZS5kaXNwbGF5TGV2ZWwsZS5zdGF0ZSk7Y29uc3Qgbz10aGlzLmNoaWxkcmVuLmZpbHRlcigoZT0+ZS52aXNpYmxlJiZlLmhhc0RhdGEoKSkpO2lmKCFvfHwwPT09by5sZW5ndGgpcmV0dXJuIHQuYmluZFZBTygpLHQuc2V0U3RlbmNpbFRlc3RFbmFibGVkKCEwKSx2b2lkIHQuc2V0QmxlbmRpbmdFbmFibGVkKCEwKTtmb3IoY29uc3QgbCBvZiBvKWwudHJpYW5nbGVDb3VudD0wO3Quc2V0U3RlbmNpbFdyaXRlTWFzaygwKSx0LnNldENvbG9yTWFzayghMCwhMCwhMCwhMCksdC5zZXRTdGVuY2lsT3AoaC5LRUVQLGguS0VFUCxoLlJFUExBQ0UpLHQuc2V0U3RlbmNpbFRlc3RFbmFibGVkKCEwKSx0LnNldEJsZW5kaW5nRW5hYmxlZCghMSksdC5zZXREZXB0aFRlc3RFbmFibGVkKCEwKSx0LnNldERlcHRoV3JpdGVFbmFibGVkKCEwKSx0LnNldERlcHRoRnVuY3Rpb24oYy5MRVFVQUwpLHQuc2V0Q2xlYXJEZXB0aCgxKSx0LmNsZWFyKHQuZ2wuREVQVEhfQlVGRkVSX0JJVCksZS5yZW5kZXJQYXNzPVwib3BhcXVlXCI7Zm9yKGxldCBsPXIubGVuZ3RoLTE7bD49MDtsLS0pdGhpcy5fcmVuZGVyU3R5bGVMYXllcihyW2xdLGUsbyk7dC5zZXREZXB0aFdyaXRlRW5hYmxlZCghMSksdC5zZXRCbGVuZGluZ0VuYWJsZWQoaSksdC5zZXRCbGVuZEZ1bmN0aW9uU2VwYXJhdGUodS5PTkUsdS5PTkVfTUlOVVNfU1JDX0FMUEhBLHUuT05FLHUuT05FX01JTlVTX1NSQ19BTFBIQSksZS5yZW5kZXJQYXNzPVwidHJhbnNsdWNlbnRcIjtmb3IobGV0IGw9MDtsPHIubGVuZ3RoO2wrKyl0aGlzLl9yZW5kZXJTdHlsZUxheWVyKHJbbF0sZSxvKTt0LmJpbmRWQU8oKSx0LnNldFN0ZW5jaWxUZXN0RW5hYmxlZCghMCksdC5zZXRCbGVuZGluZ0VuYWJsZWQoITApfV9mYWRlKGUsdCl7bnVsbCE9dGhpcy5fc3ltYm9sRmFkZXImJih0aGlzLl9zeW1ib2xGYWRlci51cGRhdGUoZSx0KXx8dGhpcy5yZXF1ZXN0UmVuZGVyKCkpfV9yZW5kZXJTdHlsZUxheWVyKGUsdCxzKXtjb25zdHtwYWludGVyOmwscmVuZGVyUGFzczpvfT10O2lmKHZvaWQgMD09PWUpcmV0dXJuO2NvbnN0IG49ZS5nZXRMYXlvdXRQcm9wZXJ0eShcInZpc2liaWxpdHlcIik7aWYobiYmbi5nZXRWYWx1ZSgpPT09ci5OT05FKXJldHVybjtsZXQgYTtzd2l0Y2goZS50eXBlKXtjYXNlIGkuQkFDS0dST1VORDpyZXR1cm47Y2FzZSBpLkZJTEw6aWYoXCJvcGFxdWVcIiE9PW8mJlwidHJhbnNsdWNlbnRcIiE9PXQucmVuZGVyUGFzcylyZXR1cm47YT1cInZ0bEZpbGxcIjticmVhaztjYXNlIGkuTElORTppZihcInRyYW5zbHVjZW50XCIhPT1vKXJldHVybjthPVwidnRsTGluZVwiO2JyZWFrO2Nhc2UgaS5DSVJDTEU6aWYoXCJ0cmFuc2x1Y2VudFwiIT09bylyZXR1cm47YT1cInZ0bENpcmNsZVwiO2JyZWFrO2Nhc2UgaS5TWU1CT0w6aWYoXCJ0cmFuc2x1Y2VudFwiIT09bylyZXR1cm47YT1cInZ0bFN5bWJvbFwifWlmKHM9ZS50eXBlPT09aS5TWU1CT0w/cy5maWx0ZXIoKGU9PmUuZGVjbHV0dGVyZWQpKTpzLmZpbHRlcigoZT0+ZS5uZWVkZWRGb3JDb3ZlcmFnZSkpLFwidnRsU3ltYm9sXCIhPT1hKXtjb25zdCByPXQuZGlzcGxheUxldmVsO2lmKDA9PT1zLmxlbmd0aHx8dm9pZCAwIT09ZS5taW56b29tJiZlLm1pbnpvb20+PXIreXx8dm9pZCAwIT09ZS5tYXh6b29tJiZlLm1heHpvb208ci15KXJldHVybn1jb25zdCBkPWUudWlkO3Quc3R5bGVMYXllclVJRD1kLHQuc3R5bGVMYXllcj1lO2Zvcihjb25zdCByIG9mIHMpaWYoci5sYXllckRhdGEuaGFzKGQpKXtsLnJlbmRlck9iamVjdHModCxzLGEpO2JyZWFrfX1fcmVuZGVyQmFja2dyb3VuZExheWVycyhlLHMpe2NvbnN0e2NvbnRleHQ6cixkaXNwbGF5TGV2ZWw6bixwYWludGVyOnUsc3RhdGU6eX09ZSxtPXRoaXMuX3N0eWxlUmVwb3NpdG9yeTtsZXQgXz0hMTtmb3IoY29uc3QgdCBvZiBzKXtpZihtLmdldExheWVyQnlJZCh0KS50eXBlPT09aS5CQUNLR1JPVU5EJiZwKG0uZ2V0TGF5ZXJCeUlkKHQpLG4pKXtfPSEwO2JyZWFrfX1pZighXylyZXR1cm47Y29uc3QgYj10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZUNvdmVyYWdlKGUuc3RhdGUsMCwhMCxcInNtYWxsZXN0XCIpLHtzcGFuczpmLGxvZEluZm86Z309Yix7bGV2ZWw6VH09ZyxFPXQoKSxDPVtdO2lmKHRoaXMuX3JlbmRlclBhc3Nlcyl7Y29uc3QgdD10aGlzLl9yZW5kZXJQYXNzZXNbMF07bnVsbCE9dGhpcy5fY2xpcHBpbmdJbmZvcyYmKHQuYnJ1c2hlc1swXS5wcmVwYXJlU3RhdGUoZSksdC5icnVzaGVzWzBdLmRyYXdNYW55KGUsdGhpcy5fY2xpcHBpbmdJbmZvcykpfWNvbnN0IEw9dGhpcy5fYmFja2dyb3VuZFRpbGVzO2xldCB2LEY9MDtmb3IoY29uc3R7cm93OmksY29sRnJvbTpsLGNvbFRvOmF9b2YgZilmb3IobGV0IGU9bDtlPD1hO2UrKyl7aWYoRjxMLmxlbmd0aCl2PUxbRl0sdi5rZXkuc2V0KFQsaSxnLm5vcm1hbGl6ZUNvbChlKSxnLmdldFdvcmxkRm9yQ29sdW1uKGUpKSx0aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZUJvdW5kcyhFLHYua2V5LCExKSx2Lng9RVswXSx2Lnk9RVszXSx2LnJlc29sdXRpb249dGhpcy5fdGlsZUluZm9WaWV3LmdldFRpbGVSZXNvbHV0aW9uKFQpO2Vsc2V7Y29uc3Qgcz1uZXcgZChULGksZy5ub3JtYWxpemVDb2woZSksZy5nZXRXb3JsZEZvckNvbHVtbihlKSkscj10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZUJvdW5kcyh0KCkscyksbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZVJlc29sdXRpb24oVCk7dj1uZXcgbyhzLGwsclswXSxyWzNdLDUxMiw1MTIsNDA5Niw0MDk2KSxMLnB1c2godil9di5zZXRUcmFuc2Zvcm0oeSksQy5wdXNoKHYpLEYrK31yLnNldFN0ZW5jaWxXcml0ZU1hc2soMCksci5zZXRDb2xvck1hc2soITAsITAsITAsITApLHIuc2V0U3RlbmNpbE9wKGguS0VFUCxoLktFRVAsaC5SRVBMQUNFKSxyLnNldFN0ZW5jaWxGdW5jdGlvbihjLkVRVUFMLDAsMjU1KTtsZXQgUz0hMDtlLmRyYXdQaGFzZT09PWwuSElUVEVTVCYmKFM9ITEpLHIuc2V0U3RlbmNpbFRlc3RFbmFibGVkKFMpO2Zvcihjb25zdCB0IG9mIHMpe2NvbnN0IHM9bS5nZXRMYXllckJ5SWQodCk7cy50eXBlPT09aS5CQUNLR1JPVU5EJiZwKHMsbikmJihlLnN0eWxlTGF5ZXJVSUQ9cy51aWQsZS5zdHlsZUxheWVyPXMsdS5yZW5kZXJPYmplY3RzKGUsQyxcInZ0bEJhY2tncm91bmRcIikpfWEucG9vbC5yZWxlYXNlKGIpfX1leHBvcnR7bSBhcyBWZWN0b3JUaWxlQ29udGFpbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7c2lnbmFsIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9zaWduYWwuanNcIjtpbXBvcnR7ZGVjbHV0dGVyQnVkZ2V0IGFzIGUsZmFkZUR1cmF0aW9uIGFzIGl9ZnJvbVwiLi9jb25maWcuanNcIjtpbXBvcnR7VlRMVW5pcXVlU3ltYm9sIGFzIHN9ZnJvbVwiLi9jb3JlLmpzXCI7aW1wb3J0e0NvbGxpc2lvbkpvYiBhcyBvfWZyb21cIi4vam9icy5qc1wiO2ltcG9ydHtTeW1ib2xEZWNsdXR0ZXJlciBhcyBsfWZyb21cIi4vU3ltYm9sRGVjbHV0dGVyZXIuanNcIjtpbXBvcnR7U3ltYm9sUmVwb3NpdG9yeSBhcyByfWZyb21cIi4vU3ltYm9sUmVwb3NpdG9yeS5qc1wiO2ltcG9ydHt3cml0ZU9wYWNpdHlUb0J1ZmZlcnMgYXMgYX1mcm9tXCIuL3V0aWwuanNcIjtpbXBvcnR7VmlzaWJpbGl0eSBhcyBofWZyb21cIi4uL3N0eWxlL1N0eWxlRGVmaW5pdGlvbi5qc1wiO2NvbnN0IG49LjUsYz0xZS02O2NsYXNzIF97Y29uc3RydWN0b3IoZSxpKXt0aGlzLnN0eWxlUmVwb3NpdG9yeT1lLHRoaXMuX3RpbGVUb0hhbmRsZT1uZXcgTWFwLHRoaXMuX3ZpZXdTdGF0ZT17c2NhbGU6MCxyb3RhdGlvbjowLGNlbnRlcjpbMCwwXSxzaXplOlswLDBdfSx0aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGU9e3NjYWxlOjAscm90YXRpb246MCxjZW50ZXI6WzAsMF0sc2l6ZTpbMCwwXX0sdGhpcy5fY29tcGxldGVkPSExLHRoaXMuX2ZhZGluZz10KCExKSx0aGlzLl9zeW1ib2xSZXBvc2l0b3J5PW5ldyByKDQwOTYsaSwoKCk9Pm5ldyBzKSksdGhpcy5fc3ltYm9sRGVjbHV0dGVyZXI9bmV3IGwoaSx0aGlzLl9zeW1ib2xSZXBvc2l0b3J5LCgodCxlLGkpPT5uZXcgbyh0LGUsaSx0aGlzLnN0eWxlUmVwb3NpdG9yeSx0aGlzLl96b29tLHRoaXMuX3ZpZXdTdGF0ZS5yb3RhdGlvbikpLCgodCxlKT0+e3QuYWxsU3ltYm9sc0ZhZGluZ091dD0hMCx0Lmxhc3RPcGFjaXR5VXBkYXRlPWUsYSh0LGUsITApLHQuZGVjbHV0dGVyZWQ9ITAsdC5yZXF1ZXN0UmVuZGVyKCl9KSwoKHQsZSk9PnRoaXMuc3R5bGVSZXBvc2l0b3J5LmdldFN0eWxlTGF5ZXJCeVVJRCh0LnN0eWxlTGF5ZXJVSUQpLnotdGhpcy5zdHlsZVJlcG9zaXRvcnkuZ2V0U3R5bGVMYXllckJ5VUlEKGUuc3R5bGVMYXllclVJRCkueiksKHQ9Pntjb25zdCBlPXRoaXMuc3R5bGVSZXBvc2l0b3J5LmdldFN0eWxlTGF5ZXJCeVVJRCh0KTtpZih0aGlzLl96b29tK2M8ZS5taW56b29tfHx0aGlzLl96b29tLWM+PWUubWF4em9vbSlyZXR1cm4hMTtjb25zdCBpPWUuZ2V0TGF5b3V0UHJvcGVydHkoXCJ2aXNpYmlsaXR5XCIpO3JldHVybiFpfHxpLmdldFZhbHVlKCkhPT1oLk5PTkV9KSl9Z2V0IGZhZGluZygpe3JldHVybiB0aGlzLl9mYWRpbmcudmFsdWV9YWRkVGlsZSh0KXt0LmRlY2x1dHRlcmVkPSExLHRoaXMuX3RpbGVUb0hhbmRsZS5zZXQodCx0Lm9uKFwic3ltYm9scy1jaGFuZ2VkXCIsKCgpPT57dGhpcy5fc3ltYm9sUmVwb3NpdG9yeS5hZGQodCksdGhpcy5yZXN0YXJ0RGVjbHV0dGVyKCl9KSkpLHRoaXMuX3N5bWJvbFJlcG9zaXRvcnkuYWRkKHQpLHRoaXMucmVzdGFydERlY2x1dHRlcigpfXJlbW92ZVRpbGUodCl7Y29uc3QgZT10aGlzLl90aWxlVG9IYW5kbGUuZ2V0KHQpO2UmJih0aGlzLl9zeW1ib2xSZXBvc2l0b3J5LnJlbW92ZVRpbGUodCksdGhpcy5yZXN0YXJ0RGVjbHV0dGVyKCksZS5yZW1vdmUoKSx0aGlzLl90aWxlVG9IYW5kbGUuZGVsZXRlKHQpKX11cGRhdGUodCxlKXtyZXR1cm4gdGhpcy5fem9vbT10LHRoaXMuX3ZpZXdTdGF0ZT17c2NhbGU6ZS5zY2FsZSxyb3RhdGlvbjplLnJvdGF0aW9uLGNlbnRlcjpbZS5jZW50ZXJbMF0sZS5jZW50ZXJbMV1dLHNpemU6W2Uuc2l6ZVswXSxlLnNpemVbMV1dfSx0aGlzLl9jb250aW51ZURlY2x1dHRlcigpLHRoaXMuX2NvbXBsZXRlZH1yZXN0YXJ0RGVjbHV0dGVyKCl7dGhpcy5fY29tcGxldGVkPSExLHRoaXMuX3N5bWJvbERlY2x1dHRlcmVyLnJlc3RhcnQoKSx0aGlzLl9ub3RpZnlVbnN0YWJsZSgpfWNsZWFyKCl7dGhpcy5fY29tcGxldGVkPSExLHRoaXMuX3N5bWJvbFJlcG9zaXRvcnk9bnVsbCx0aGlzLl9zeW1ib2xEZWNsdXR0ZXJlci5yZXN0YXJ0KCksdGhpcy5fdGlsZVRvSGFuZGxlLmZvckVhY2goKHQ9PnQucmVtb3ZlKCkpKSx0aGlzLl90aWxlVG9IYW5kbGUuY2xlYXIoKX1nZXQgc3RhbGUoKXtyZXR1cm4gdGhpcy5fem9vbSE9PXRoaXMuX2RlY2x1dHRlclpvb218fHRoaXMuX3ZpZXdTdGF0ZS5zaXplWzBdIT09dGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNpemVbMF18fHRoaXMuX3ZpZXdTdGF0ZS5zaXplWzFdIT09dGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNpemVbMV18fHRoaXMuX3ZpZXdTdGF0ZS5zY2FsZSE9PXRoaXMuX2RlY2x1dHRlclZpZXdTdGF0ZS5zY2FsZXx8dGhpcy5fdmlld1N0YXRlLnJvdGF0aW9uIT09dGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnJvdGF0aW9ufWRlbGV0ZVN0eWxlTGF5ZXJzKHQpe3RoaXMuX3N5bWJvbFJlcG9zaXRvcnkuZGVsZXRlU3R5bGVMYXllcnModCl9X2NvbnRpbnVlRGVjbHV0dGVyKCl7dGhpcy5fY29tcGxldGVkJiYhdGhpcy5zdGFsZXx8KHRoaXMuX3N5bWJvbERlY2x1dHRlcmVyLnJ1bm5pbmd8fCh0aGlzLl9kZWNsdXR0ZXJab29tPXRoaXMuX3pvb20sdGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLmNlbnRlclswXT10aGlzLl92aWV3U3RhdGUuY2VudGVyWzBdLHRoaXMuX2RlY2x1dHRlclZpZXdTdGF0ZS5jZW50ZXJbMV09dGhpcy5fdmlld1N0YXRlLmNlbnRlclsxXSx0aGlzLl9kZWNsdXR0ZXJWaWV3U3RhdGUucm90YXRpb249dGhpcy5fdmlld1N0YXRlLnJvdGF0aW9uLHRoaXMuX2RlY2x1dHRlclZpZXdTdGF0ZS5zY2FsZT10aGlzLl92aWV3U3RhdGUuc2NhbGUsdGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNpemVbMF09dGhpcy5fdmlld1N0YXRlLnNpemVbMF0sdGhpcy5fZGVjbHV0dGVyVmlld1N0YXRlLnNpemVbMV09dGhpcy5fdmlld1N0YXRlLnNpemVbMV0sdGhpcy5fc3ltYm9sRGVjbHV0dGVyZXIucmVzdGFydCgpKSx0aGlzLl9zeW1ib2xEZWNsdXR0ZXJlci5zZXRTY3JlZW5TaXplKHRoaXMuX3ZpZXdTdGF0ZS5zaXplWzBdLHRoaXMuX3ZpZXdTdGF0ZS5zaXplWzFdKSx0aGlzLl9jb21wbGV0ZWQ9dGhpcy5fc3ltYm9sRGVjbHV0dGVyZXIuY29udGludWUoZSksdGhpcy5fY29tcGxldGVkJiZ0aGlzLl9zY2hlZHVsZU5vdGlmeVN0YWJsZSgpKX1fc2NoZWR1bGVOb3RpZnlTdGFibGUoKXtudWxsIT10aGlzLl9zdGFibGVOb3RpZmljYXRpb25IYW5kbGUmJmNsZWFyVGltZW91dCh0aGlzLl9zdGFibGVOb3RpZmljYXRpb25IYW5kbGUpLHRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZT1zZXRUaW1lb3V0KCgoKT0+e3RoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZT1udWxsLHRoaXMuX2ZhZGluZy52YWx1ZT0hMX0pLCgxK24pKmkpfV9ub3RpZnlVbnN0YWJsZSgpe251bGwhPXRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZSYmKGNsZWFyVGltZW91dCh0aGlzLl9zdGFibGVOb3RpZmljYXRpb25IYW5kbGUpLHRoaXMuX3N0YWJsZU5vdGlmaWNhdGlvbkhhbmRsZT1udWxsKSx0aGlzLl9mYWRpbmcudmFsdWU9ITB9fWV4cG9ydHtfIGFzIFN5bWJvbEZhZGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBlfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL1dHTENvbnRhaW5lci5qc1wiO2ltcG9ydCBzIGZyb21cIi4vYnJ1c2hlcy9XR0xCcnVzaEluZm8uanNcIjtpbXBvcnQgdCBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hTdGVuY2lsLmpzXCI7Y29uc3Qgbj0oZSxyKT0+ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWwhPTA/ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWw6ZS5rZXkucm93LXIua2V5LnJvdyE9MD9lLmtleS5yb3ctci5rZXkucm93OmUua2V5LmNvbC1yLmtleS5jb2w7Y2xhc3MgaSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl90aWxlSW5mb1ZpZXc9ZX1yZW5kZXJDaGlsZHJlbihlKXt0aGlzLnNvcnRDaGlsZHJlbihuKSx0aGlzLnNldFN0ZW5jaWxSZWZlcmVuY2UoZSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe2NvbnN0e3N0YXRlOnJ9PWUscz1zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSk7cmV0dXJuIHMucmVxdWlyZWRMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0Q2xvc2VzdEluZm9Gb3JTY2FsZShyLnNjYWxlKS5sZXZlbCxzLmRpc3BsYXlMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2NhbGVUb1pvb20oci5zY2FsZSksc31wcmVwYXJlUmVuZGVyUGFzc2VzKHIpe2NvbnN0IG49c3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhyKTtyZXR1cm4gbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwic3RlbmNpbFwiLGJydXNoZXM6W3RdLGRyYXdQaGFzZTplLkRFQlVHfGUuTUFQfGUuSElHSExJR0hULHRhcmdldDooKT0+dGhpcy5nZXRTdGVuY2lsVGFyZ2V0KCl9KSksaGFzKFwiZXNyaS10aWxlcy1kZWJ1Z1wiKSYmbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwidGlsZUluZm9cIixicnVzaGVzOltzXSxkcmF3UGhhc2U6ZS5ERUJVRyx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW59KSksbn1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW59c2V0U3RlbmNpbFJlZmVyZW5jZShlKXtsZXQgcj0xO2Zvcihjb25zdCBzIG9mIHRoaXMuY2hpbGRyZW4pcy5zdGVuY2lsUmVmPXIrK319ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vR3JhcGhpYy5qc1wiO2ltcG9ydHtjbG9uZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbGFuZy5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtkaWZmIGFzIG4saGFzRGlmZiBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RpZmZVdGlscy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgeX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2VxdWFscyBhcyB1fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e1N0eWxlVXBkYXRlVHlwZSBhcyBjfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9lbnVtcy5qc1wiO2ltcG9ydHtUaWxlSGFuZGxlciBhcyBwfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9UaWxlSGFuZGxlci5qc1wiO2ltcG9ydHtUaWxlTWFuYWdlciBhcyBkfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9UaWxlTWFuYWdlci5qc1wiO2ltcG9ydHtWZWN0b3JUaWxlIGFzIF99ZnJvbVwiLi4vZW5naW5lL3ZlY3RvclRpbGVzL1ZlY3RvclRpbGUuanNcIjtpbXBvcnR7VmVjdG9yVGlsZUNvbnRhaW5lciBhcyBmfWZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9WZWN0b3JUaWxlQ29udGFpbmVyLmpzXCI7aW1wb3J0e1N0eWxlTGF5ZXJUeXBlIGFzIG19ZnJvbVwiLi4vZW5naW5lL3ZlY3RvclRpbGVzL3N0eWxlL1N0eWxlRGVmaW5pdGlvbi5qc1wiO2ltcG9ydCBnIGZyb21cIi4uL2VuZ2luZS92ZWN0b3JUaWxlcy9zdHlsZS9TdHlsZVJlcG9zaXRvcnkuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBUfWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnQgQyBmcm9tXCIuLi90aWxpbmcvVGlsZUluZm9WaWV3UE9ULmpzXCI7aW1wb3J0IEggZnJvbVwiLi4vdGlsaW5nL1RpbGVRdWV1ZS5qc1wiO2ltcG9ydCBSIGZyb21cIi4uLy4uL2xheWVycy9MYXllclZpZXcuanNcIjtsZXQgdj1jbGFzcyBleHRlbmRzKFQoUikpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9zdHlsZUNoYW5nZXM9W10sdGhpcy5fZmV0Y2hRdWV1ZT1udWxsLHRoaXMuX3BhcnNlUXVldWU9bnVsbCx0aGlzLl90aWxlSGFuZGxlclByb21pc2U9bnVsbCx0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITF9Z2V0IGZhZGluZygpe3JldHVybiB0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5mYWRpbmc/PyExfWFzeW5jIGhpdFRlc3QoZSxpKXtpZighdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlKXJldHVybiBudWxsO2F3YWl0IHRoaXMuX3RpbGVIYW5kbGVyUHJvbWlzZTtjb25zdCBzPWF3YWl0IHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuaGl0VGVzdChpKTtpZighc3x8MD09PXMubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IHI9c1swXS0xLGE9dGhpcy5fc3R5bGVSZXBvc2l0b3J5LGw9YS5nZXRTdHlsZUxheWVyQnlVSUQocik7aWYoIWwpcmV0dXJuIG51bGw7Y29uc3Qgbz1hLmdldFN0eWxlTGF5ZXJJbmRleChsLmlkKTtyZXR1cm5be3R5cGU6XCJncmFwaGljXCIsbWFwUG9pbnQ6ZSxsYXllcjp0aGlzLmxheWVyLGdyYXBoaWM6bmV3IHQoe2F0dHJpYnV0ZXM6e2xheWVySWQ6byxsYXllck5hbWU6bC5pZCxsYXllclVJRDpyfSxsYXllcjp0aGlzLmxheWVyLHNvdXJjZUxheWVyOnRoaXMubGF5ZXJ9KX1dfXVwZGF0ZShlKXtpZih0aGlzLl90aWxlSGFuZGxlclByb21pc2UmJnRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeSlyZXR1cm4gZS5waXhlbFJhdGlvIT09dGhpcy5fdGlsZUhhbmRsZXIuZGV2aWNlUGl4ZWxSYXRpbz8odGhpcy5fc3RhcnQoKSx2b2lkKHRoaXMuX3RpbGVIYW5kbGVyLmRldmljZVBpeGVsUmF0aW89ZS5waXhlbFJhdGlvKSk6dm9pZCh0aGlzLl9zdHlsZUNoYW5nZXMubGVuZ3RoPjA/dGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlPXRoaXMuX2FwcGx5U3R5bGVDaGFuZ2VzKCk6KHRoaXMuX2ZldGNoUXVldWUucGF1c2UoKSx0aGlzLl9wYXJzZVF1ZXVlLnBhdXNlKCksdGhpcy5fZmV0Y2hRdWV1ZS5zdGF0ZT1lLnN0YXRlLHRoaXMuX3BhcnNlUXVldWUuc3RhdGU9ZS5zdGF0ZSx0aGlzLl90aWxlTWFuYWdlci51cGRhdGUoZSl8fHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMuX3BhcnNlUXVldWUucmVzdW1lKCksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSkpfWF0dGFjaCgpe2NvbnN0e3N0eWxlOmV9PXRoaXMubGF5ZXIuY3VycmVudFN0eWxlSW5mbzt0aGlzLl9zdHlsZVJlcG9zaXRvcnk9bmV3IGcoZSksdGhpcy5fdGlsZUluZm9WaWV3PW5ldyBDKHRoaXMubGF5ZXIudGlsZUluZm8sdGhpcy5sYXllci5mdWxsRXh0ZW50KSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPW5ldyBmKHRoaXMuX3RpbGVJbmZvVmlldyksdGhpcy5fdGlsZUhhbmRsZXI9bmV3IHAodGhpcy5sYXllcix0aGlzLl9zdHlsZVJlcG9zaXRvcnksd2luZG93LmRldmljZVBpeGVsUmF0aW98fDEpLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIpLHRoaXMuX3N0YXJ0KCksdGhpcy5hZGRBdHRhY2hIYW5kbGVzKFt0aGlzLmxheWVyLm9uKFwicGFpbnQtY2hhbmdlXCIsKGU9PntpZihlLmlzRGF0YURyaXZlbil0aGlzLl9zdHlsZUNoYW5nZXMucHVzaCh7dHlwZTpjLlBBSU5URVJfQ0hBTkdFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKTtlbHNle2NvbnN0IHQ9dGhpcy5fc3R5bGVSZXBvc2l0b3J5LGk9dC5nZXRMYXllckJ5SWQoZS5sYXllcik7aWYoIWkpcmV0dXJuO2NvbnN0IHM9aS50eXBlPT09bS5TWU1CT0w7dC5zZXRQYWludFByb3BlcnRpZXMoZS5sYXllcixlLnBhaW50KSxzJiZ0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXN0YXJ0RGVjbHV0dGVyKCksdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lcj8ucmVxdWVzdFJlbmRlcigpfX0pKSx0aGlzLmxheWVyLm9uKFwibGF5b3V0LWNoYW5nZVwiLChlPT57Y29uc3QgdD10aGlzLl9zdHlsZVJlcG9zaXRvcnksaT10LmdldExheWVyQnlJZChlLmxheWVyKTtpZighaSlyZXR1cm47Y29uc3Qgcz1uKGkubGF5b3V0LGUubGF5b3V0KTtpZihudWxsIT1zKXtpZihoKHMsXCJ2aXNpYmlsaXR5XCIpJiYxPT09RChzKSlyZXR1cm4gdC5zZXRMYXlvdXRQcm9wZXJ0aWVzKGUubGF5ZXIsZS5sYXlvdXQpLGkudHlwZT09PW0uU1lNQk9MJiZ0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXN0YXJ0RGVjbHV0dGVyKCksdm9pZCB0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyPy5yZXF1ZXN0UmVuZGVyKCk7dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlPVVRfQ0hBTkdFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKX19KSksdGhpcy5sYXllci5vbihcInN0eWxlLWxheWVyLXZpc2liaWxpdHktY2hhbmdlXCIsKGU9Pntjb25zdCB0PXRoaXMuX3N0eWxlUmVwb3NpdG9yeSxpPXQuZ2V0TGF5ZXJCeUlkKGUubGF5ZXIpO2kmJih0LnNldFN0eWxlTGF5ZXJWaXNpYmlsaXR5KGUubGF5ZXIsZS52aXNpYmlsaXR5KSxpLnR5cGU9PT1tLlNZTUJPTCYmdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lcj8ucmVzdGFydERlY2x1dHRlcigpLHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXI/LnJlcXVlc3RSZW5kZXIoKSl9KSksdGhpcy5sYXllci5vbihcInN0eWxlLWxheWVyLWNoYW5nZVwiLChlPT57dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlFUl9DSEFOR0VELGRhdGE6ZX0pLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLHRoaXMubGF5ZXIub24oXCJkZWxldGUtc3R5bGUtbGF5ZXJcIiwoZT0+e3RoaXMuX3N0eWxlQ2hhbmdlcy5wdXNoKHt0eXBlOmMuTEFZRVJfUkVNT1ZFRCxkYXRhOmV9KSx0aGlzLnJlcXVlc3RVcGRhdGUoKX0pKSx0aGlzLmxheWVyLm9uKFwibG9hZC1zdHlsZVwiLCgoKT0+dGhpcy5fbG9hZFN0eWxlKCkpKSx0aGlzLmxheWVyLm9uKFwic3ByaXRlU291cmNlLWNoYW5nZVwiLChlPT57dGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5TUFJJVEVTX0NIQU5HRUQsZGF0YTplfSk7Y29uc3QgdD10aGlzLl9zdHlsZVJlcG9zaXRvcnkubGF5ZXJzO2Zvcihjb25zdCBpIG9mIHQpc3dpdGNoKGkudHlwZSl7Y2FzZSBtLlNZTUJPTDppLmdldExheW91dFByb3BlcnR5KFwiaWNvbi1pbWFnZVwiKSYmdGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5MQVlPVVRfQ0hBTkdFRCxkYXRhOntsYXllcjppLmlkLGxheW91dDppLmxheW91dH19KTticmVhaztjYXNlIG0uTElORTppLmdldFBhaW50UHJvcGVydHkoXCJsaW5lLXBhdHRlcm5cIikmJnRoaXMuX3N0eWxlQ2hhbmdlcy5wdXNoKHt0eXBlOmMuUEFJTlRFUl9DSEFOR0VELGRhdGE6e2xheWVyOmkuaWQscGFpbnQ6aS5wYWludCxpc0RhdGFEcml2ZW46aS5pc1BhaW50ZXJEYXRhRHJpdmVuKCl9fSk7YnJlYWs7Y2FzZSBtLkZJTEw6aS5nZXRMYXlvdXRQcm9wZXJ0eShcImZpbGwtcGF0dGVyblwiKSYmdGhpcy5fc3R5bGVDaGFuZ2VzLnB1c2goe3R5cGU6Yy5QQUlOVEVSX0NIQU5HRUQsZGF0YTp7bGF5ZXI6aS5pZCxwYWludDppLnBhaW50LGlzRGF0YURyaXZlbjppLmlzUGFpbnRlckRhdGFEcml2ZW4oKX19KX10aGlzLnJlcXVlc3RVcGRhdGUoKX0pKV0pfWRldGFjaCgpe3RoaXMuX3N0b3AoKSx0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuX3ZlY3RvclRpbGVDb250YWluZXI9cih0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyKSx0aGlzLl90aWxlSGFuZGxlcj1yKHRoaXMuX3RpbGVIYW5kbGVyKX1tb3ZlU3RhcnQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX12aWV3Q2hhbmdlKCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9bW92ZUVuZCgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfXN1cHBvcnRzU3BhdGlhbFJlZmVyZW5jZShlKXtyZXR1cm4gdSh0aGlzLmxheWVyLnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLGUpfWNhblJlc3VtZSgpe2xldCBlPXN1cGVyLmNhblJlc3VtZSgpO2NvbnN0e2N1cnJlbnRTdHlsZUluZm86dH09dGhpcy5sYXllcjtpZihlJiZ0Py5sYXllckRlZmluaXRpb24pe2NvbnN0IGk9dGhpcy52aWV3LnNjYWxlLHttaW5TY2FsZTpzLG1heFNjYWxlOnJ9PXQubGF5ZXJEZWZpbml0aW9uO3Q/LmxheWVyRGVmaW5pdGlvbiYmKHMmJnM8aSYmKGU9ITEpLHImJnI+aSYmKGU9ITEpKX1yZXR1cm4gZX1pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuZmFkaW5nfWFjcXVpcmVUaWxlKGUpe2NvbnN0IHQ9dGhpcy5fY3JlYXRlVmVjdG9yVGlsZShlKTtyZXR1cm4gdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fZmV0Y2hRdWV1ZS5wdXNoKHQua2V5KS50aGVuKChlPT50aGlzLl9wYXJzZVF1ZXVlLnB1c2goe2tleTp0LmtleSxkYXRhOmV9KSkpLnRoZW4oKGU9Pnt0Lm9uY2UoXCJhdHRhY2hcIiwoKCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpKSksdC5zZXREYXRhKGUpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLmNhdGNoKChlPT57YShlKXx8cy5nZXRMb2dnZXIodGhpcykuZXJyb3IoZSl9KSkpLHR9cmVsZWFzZVRpbGUoZSl7Y29uc3QgdD1lLmtleS5pZDt0aGlzLl9mZXRjaFF1ZXVlLmFib3J0KHQpLHRoaXMuX3BhcnNlUXVldWUuYWJvcnQodCksdGhpcy5yZXF1ZXN0VXBkYXRlKCl9X3N0YXJ0KCl7aWYodGhpcy5fc3RvcCgpLHRoaXMuX3RpbGVNYW5hZ2VyPW5ldyBkKHthY3F1aXJlVGlsZTplPT50aGlzLmFjcXVpcmVUaWxlKGUpLHJlbGVhc2VUaWxlOmU9PnRoaXMucmVsZWFzZVRpbGUoZSksdGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlld30sdGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lciksIXRoaXMubGF5ZXIuY3VycmVudFN0eWxlSW5mbylyZXR1cm47Y29uc3QgZT1uZXcgQWJvcnRDb250cm9sbGVyLHQ9dGhpcy5fdGlsZUhhbmRsZXIuc3RhcnQoe3NpZ25hbDplLnNpZ25hbH0pLnRoZW4oKCgpPT57dGhpcy5fZmV0Y2hRdWV1ZT1uZXcgSCh7dGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlldyxwcm9jZXNzOihlLHQpPT50aGlzLl9nZXRUaWxlRGF0YShlLHQpLGNvbmN1cnJlbmN5OjE1fSksdGhpcy5fcGFyc2VRdWV1ZT1uZXcgSCh7dGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlldyxwcm9jZXNzOihlLHQpPT50aGlzLl9wYXJzZVRpbGVEYXRhKGUsdCksY29uY3VycmVuY3k6OH0pLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMH0pKTt0aGlzLl90aWxlSGFuZGxlci5zcHJpdGVNb3NhaWMudGhlbigoZT0+e3RoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuc2V0U3R5bGVSZXNvdXJjZXMoZSx0aGlzLl90aWxlSGFuZGxlci5nbHlwaE1vc2FpYyx0aGlzLl9zdHlsZVJlcG9zaXRvcnkpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLHRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyPWUsdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlPXR9X3N0b3AoKXtpZighdGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXJ8fCF0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyKXJldHVybjtjb25zdCBlPXRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyO2UmJmUuYWJvcnQoKSx0aGlzLl90aWxlSGFuZGxlclByb21pc2U9bnVsbCx0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITEsdGhpcy5fZmV0Y2hRdWV1ZT1yKHRoaXMuX2ZldGNoUXVldWUpLHRoaXMuX3BhcnNlUXVldWU9cih0aGlzLl9wYXJzZVF1ZXVlKSx0aGlzLl90aWxlTWFuYWdlcj1yKHRoaXMuX3RpbGVNYW5hZ2VyKSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLnJlbW92ZUFsbENoaWxkcmVuKCl9YXN5bmMgX2dldFRpbGVEYXRhKGUsdCl7cmV0dXJuIHRoaXMuX3RpbGVIYW5kbGVyLmZldGNoVGlsZURhdGEoZSx0KX1hc3luYyBfcGFyc2VUaWxlRGF0YShlLHQpe3JldHVybiB0aGlzLl90aWxlSGFuZGxlci5wYXJzZVRpbGVEYXRhKGUsdCl9YXN5bmMgX2FwcGx5U3R5bGVDaGFuZ2VzKCl7dGhpcy5faXNUaWxlSGFuZGxlclJlYWR5PSExLHRoaXMuX2ZldGNoUXVldWUucGF1c2UoKSx0aGlzLl9wYXJzZVF1ZXVlLnBhdXNlKCksdGhpcy5fZmV0Y2hRdWV1ZS5jbGVhcigpLHRoaXMuX3BhcnNlUXVldWUuY2xlYXIoKSx0aGlzLl90aWxlTWFuYWdlci5jbGVhckNhY2hlKCk7Y29uc3QgZT10aGlzLl9zdHlsZUNoYW5nZXM7dHJ5e2F3YWl0IHRoaXMuX3RpbGVIYW5kbGVyLnVwZGF0ZVN0eWxlKGUpfWNhdGNoKGwpe3MuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiZXJyb3IgYXBwbHlpbmcgdmVjdG9yLXRpbGVzIHN0eWxlIHVwZGF0ZVwiLGwubWVzc2FnZSksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMH1jb25zdCB0PXRoaXMuX3N0eWxlUmVwb3NpdG9yeSxpPW5ldyBTZXQ7ZS5mb3JFYWNoKChlPT57aWYoZS50eXBlIT09Yy5MQVlFUl9SRU1PVkVEKXJldHVybjtjb25zdCBzPWUuZGF0YSxyPXQuZ2V0TGF5ZXJCeUlkKHMubGF5ZXIpO3ImJmkuYWRkKHIudWlkKX0pKTtjb25zdCByPW5ldyBTZXQ7ZS5mb3JFYWNoKChlPT57bGV0IGk7c3dpdGNoKGUudHlwZSl7Y2FzZSBjLlBBSU5URVJfQ0hBTkdFRDp0LnNldFBhaW50UHJvcGVydGllcyhlLmRhdGEubGF5ZXIsZS5kYXRhLnBhaW50KSxpPWUuZGF0YS5sYXllcjticmVhaztjYXNlIGMuTEFZT1VUX0NIQU5HRUQ6dC5zZXRMYXlvdXRQcm9wZXJ0aWVzKGUuZGF0YS5sYXllcixlLmRhdGEubGF5b3V0KSxpPWUuZGF0YS5sYXllcjticmVhaztjYXNlIGMuTEFZRVJfUkVNT1ZFRDpyZXR1cm4gdm9pZCB0LmRlbGV0ZVN0eWxlTGF5ZXIoZS5kYXRhLmxheWVyKTtjYXNlIGMuTEFZRVJfQ0hBTkdFRDp0LnNldFN0eWxlTGF5ZXIoZS5kYXRhLmxheWVyLGUuZGF0YS5pbmRleCksaT1lLmRhdGEubGF5ZXIuaWQ7YnJlYWs7Y2FzZSBjLlNQUklURVNfQ0hBTkdFRDp0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLnNldFNwcml0ZU1vc2FpYyh0aGlzLl90aWxlSGFuZGxlci5zZXRTcHJpdGVTb3VyY2UoZS5kYXRhLnNwcml0ZVNvdXJjZSkpfWlmKGkpe2NvbnN0IGU9dC5nZXRMYXllckJ5SWQoaSk7ZSYmci5hZGQoZS51aWQpfX0pKTtjb25zdCBhPXRoaXMuX3ZlY3RvclRpbGVDb250YWluZXIuY2hpbGRyZW47aWYoaS5zaXplPjApe2NvbnN0IGU9QXJyYXkuZnJvbShpKTt0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLmRlbGV0ZVN0eWxlTGF5ZXJzKGUpO2Zvcihjb25zdCB0IG9mIGEpdC5kZWxldGVMYXllckRhdGEoZSl9aWYodGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHIuc2l6ZT4wKXtjb25zdCBlPUFycmF5LmZyb20ociksdD1bXTtmb3IoY29uc3QgaSBvZiBhKXtjb25zdCBzPXRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuX2ZldGNoUXVldWUucHVzaChpLmtleSkudGhlbigodD0+dGhpcy5fcGFyc2VRdWV1ZS5wdXNoKHtrZXk6aS5rZXksZGF0YTp0LHN0eWxlTGF5ZXJVSURzOmV9KSkpLnRoZW4oKGU9Pmkuc2V0RGF0YShlKSkpKTt0LnB1c2gocyl9YXdhaXQgUHJvbWlzZS5hbGwodCl9dGhpcy5fc3R5bGVDaGFuZ2VzPVtdLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMCx0aGlzLnJlcXVlc3RVcGRhdGUoKX1hc3luYyBfbG9hZFN0eWxlKCl7Y29uc3R7c3R5bGU6ZX09dGhpcy5sYXllci5jdXJyZW50U3R5bGVJbmZvLHQ9aShlKTt0aGlzLl9pc1RpbGVIYW5kbGVyUmVhZHk9ITEsdGhpcy5fZmV0Y2hRdWV1ZS5wYXVzZSgpLHRoaXMuX3BhcnNlUXVldWUucGF1c2UoKSx0aGlzLl9mZXRjaFF1ZXVlLmNsZWFyKCksdGhpcy5fcGFyc2VRdWV1ZS5jbGVhcigpLHRoaXMuX3N0eWxlUmVwb3NpdG9yeT1uZXcgZyh0KSx0aGlzLl92ZWN0b3JUaWxlQ29udGFpbmVyLmRlc3Ryb3koKSx0aGlzLl90aWxlTWFuYWdlci5jbGVhcigpLHRoaXMuX3RpbGVIYW5kbGVyQWJvcnRDb250cm9sbGVyLmFib3J0KCksdGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcjtjb25zdHtzaWduYWw6c309dGhpcy5fdGlsZUhhbmRsZXJBYm9ydENvbnRyb2xsZXI7dHJ5e3RoaXMuX3RpbGVIYW5kbGVyUHJvbWlzZT10aGlzLl90aWxlSGFuZGxlci5zZXRTdHlsZSh0aGlzLl9zdHlsZVJlcG9zaXRvcnksdCksYXdhaXQgdGhpcy5fdGlsZUhhbmRsZXJQcm9taXNlfWNhdGNoKGwpe2lmKCFhKGwpKXRocm93IGx9aWYocy5hYm9ydGVkKXJldHVybiB0aGlzLl9mZXRjaFF1ZXVlLnJlc3VtZSgpLHRoaXMuX3BhcnNlUXVldWUucmVzdW1lKCksdGhpcy5faXNUaWxlSGFuZGxlclJlYWR5PSEwLHZvaWQgdGhpcy5yZXF1ZXN0VXBkYXRlKCk7Y29uc3Qgcj1hd2FpdCB0aGlzLl90aWxlSGFuZGxlci5zcHJpdGVNb3NhaWM7dGhpcy5fdmVjdG9yVGlsZUNvbnRhaW5lci5zZXRTdHlsZVJlc291cmNlcyhyLHRoaXMuX3RpbGVIYW5kbGVyLmdseXBoTW9zYWljLHRoaXMuX3N0eWxlUmVwb3NpdG9yeSksdGhpcy5fZmV0Y2hRdWV1ZS5yZXN1bWUoKSx0aGlzLl9wYXJzZVF1ZXVlLnJlc3VtZSgpLHRoaXMuX2lzVGlsZUhhbmRsZXJSZWFkeT0hMCx0aGlzLnJlcXVlc3RVcGRhdGUoKX1fY3JlYXRlVmVjdG9yVGlsZShlKXtjb25zdCB0PXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKHkoKSxlKSxpPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbihlLmxldmVsKTtyZXR1cm4gbmV3IF8oZSxpLHRbMF0sdFszXSw1MTIsNTEyLHRoaXMuX3N0eWxlUmVwb3NpdG9yeSl9fTtmdW5jdGlvbiBEKGUpe2lmKG51bGw9PWUpcmV0dXJuIDA7c3dpdGNoKGUudHlwZSl7Y2FzZVwicGFydGlhbFwiOnJldHVybiBPYmplY3Qua2V5cyhlLmRpZmYpLmxlbmd0aDtjYXNlXCJjb21wbGV0ZVwiOnJldHVybiBNYXRoLm1heChPYmplY3Qua2V5cyhlLm9sZFZhbHVlKS5sZW5ndGgsT2JqZWN0LmtleXMoZS5uZXdWYWx1ZSkubGVuZ3RoKTtjYXNlXCJjb2xsZWN0aW9uXCI6cmV0dXJuIE9iamVjdC5rZXlzKGUuYWRkZWQpLmxlbmd0aCtPYmplY3Qua2V5cyhlLmNoYW5nZWQpLmxlbmd0aCtPYmplY3Qua2V5cyhlLnJlbW92ZWQpLmxlbmd0aH19ZShbbCgpXSx2LnByb3RvdHlwZSxcIl9pc1RpbGVIYW5kbGVyUmVhZHlcIix2b2lkIDApLHY9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLlZlY3RvclRpbGVMYXllclZpZXcyRFwiKV0sdik7Y29uc3Qgdz12O2V4cG9ydHt3IGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9