"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_controllers_I3SOnDemandController_js--9e2519"],{

/***/ "./node_modules/@arcgis/core/core/ReactiveSet.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/core/ReactiveSet.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./accessorSupport/tracking.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking.js");
/* harmony import */ var _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./accessorSupport/tracking/SimpleObservable.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking/SimpleObservable.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(){this._set=new Set,this._observable=new _accessorSupport_tracking_SimpleObservable_js__WEBPACK_IMPORTED_MODULE_1__.SimpleObservable}get size(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.size}add(t){const e=this._set.size;return this._set.add(t),this._set.size!==e&&this._observable.notify(),this}clear(){this._set.size>0&&(this._set.clear(),this._observable.notify())}delete(t){const e=this._set.delete(t);return e&&this._observable.notify(),e}entries(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.entries()}forEach(e,s){(0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.forEach(((t,r)=>e.call(s,t,r,this)),s)}has(e){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.has(e)}keys(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.keys()}values(){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set.values()}[Symbol.iterator](){return (0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_0__.trackAccess)(this._observable),this._set[Symbol.iterator]()}get[Symbol.toStringTag](){return this._set[Symbol.toStringTag]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   projectBoundingSphere: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _projectors_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./projectors.js */ "./node_modules/@arcgis/core/geometry/projection/projectors.js");
/* harmony import */ var _support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../support/Ellipsoid.js */ "./node_modules/@arcgis/core/geometry/support/Ellipsoid.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function a(e,r,t,a){if(null==r||null==a)return!1;const E=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_2__.populateProjectorCache)(r,a,p);if(E.projector===_projectors_js__WEBPACK_IMPORTED_MODULE_2__.copy3)return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],!0;if(null==E.projector)return!1;const{source:R,dest:m}=E;if(m.spatialReferenceId===_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WEB_MERCATOR){const r=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[R.spatialReferenceId][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WGS84];return null!=r&&(r(e,0,f,0),(0,_projectors_js__WEBPACK_IMPORTED_MODULE_2__.wgs84ToWebMercator)(f,0,t,0),t[3]=u(f[1],e[2],e[3],_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__.earth.radius),!0)}if(R.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.WGS84&&R.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.CGCS2000||m.spatialReferenceId!==_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.PLATE_CARREE){E.projector(e,0,t,0);const r=R.metersPerUnit??1,n=m.metersPerUnit??1;t[3]=e[3]*r/n}else{const r=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[R.spatialReferenceId][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.SPHERICAL_ECEF],n=_projectors_js__WEBPACK_IMPORTED_MODULE_2__.projectionTable[_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.SPHERICAL_ECEF][_projectors_js__WEBPACK_IMPORTED_MODULE_2__.ProjectionID.PLATE_CARREE];let o=e[3];null!=r&&null!=n&&(o=u(e[1],e[2],e[3],_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_3__.earth.radius)),E.projector(e,0,t,0),t[3]=o}return!0}function u(e,r,t,n){const o=n+r;if(o<n/2||t>o)return Number.MAX_VALUE;const s=Math.abs(E*e)+Math.asin(t/o);return s>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(s)}const f=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),p=(0,_projectors_js__WEBPACK_IMPORTED_MODULE_2__.createEmptyProjectorCache)(),E=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.deg2rad)(1);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ee)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Promise.js */ "./node_modules/@arcgis/core/core/Promise.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/projection/projectBoundingRect.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingRect.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../support/PromiseQueue.js */ "./node_modules/@arcgis/core/layers/support/PromiseQueue.js");
/* harmony import */ var _views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../views/ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _views_3d_layers_i3s_I3SClientNodeLoader_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SClientNodeLoader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js");
/* harmony import */ var _views_3d_layers_i3s_I3SFrameTask_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SFrameTask.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js");
/* harmony import */ var _views_3d_layers_i3s_I3SIndex_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SIndex.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js");
/* harmony import */ var _views_3d_layers_i3s_I3SLodHandling_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SLodHandling.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js");
/* harmony import */ var _views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _views_3d_layers_i3s_I3SNodeLoader_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SNodeLoader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js");
/* harmony import */ var _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SStreamDataController.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js");
/* harmony import */ var _views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _views_3d_layers_i3s_I3SViewportQueries_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../views/3d/layers/i3s/I3SViewportQueries.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js");
/* harmony import */ var _views_3d_layers_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../views/3d/layers/support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/* harmony import */ var _views_3d_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../views/3d/support/extentUtils.js */ "./node_modules/@arcgis/core/views/3d/support/extentUtils.js");
/* harmony import */ var _views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../views/3d/support/index.js */ "./node_modules/@arcgis/core/views/3d/support/index.js");
/* harmony import */ var _views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../views/3d/support/MemoryController.js */ "./node_modules/@arcgis/core/views/3d/support/MemoryController.js");
/* harmony import */ var _views_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../views/support/layerViewUtils.js */ "./node_modules/@arcgis/core/views/support/layerViewUtils.js");
/* harmony import */ var _views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../views/support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const G="esri.layers.graphics.controllers.I3SOnDemandController",j=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(G),T=100,Q=2,E=1e4,H=1e-4,R=1.2,k=500,B=1.5;let z=class extends((0,_core_Promise_js__WEBPACK_IMPORTED_MODULE_5__.EsriPromiseMixin)(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){get isMeshPyramid(){return"mesh-pyramids"===this.layer.profile||"MeshPyramid"===this.layer.store?.lodType}get isGraphics3D(){return"points"===this.layer.profile}get useMaximumNumberOfFeatures(){return!this.isMeshPyramid&&(null==this.layer.priority||"High"===this.layer.priority)}get indexStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_28__.ClientType.I3S_INDEX);return new _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_23__.I3SStreamDataController(e,this.layer.apiKey)}get dataStreamController(){const e=this.layerView.view.resourceController.createStreamDataRequester(_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_28__.ClientType.I3S_DATA);return new _views_3d_layers_i3s_I3SStreamDataController_js__WEBPACK_IMPORTED_MODULE_23__.I3SStreamDataController(e,this.layer.apiKey)}get crsVertex(){return (0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_24__.getVertexCrs)(this.layer)}get crsIndex(){return (0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_24__.getIndexCrs)(this.layer)}get layer(){return this.layerView.i3slayer}get running(){return this.updating}get rootNodeVisible(){if(this._index){const e=this._index.rootNode;if(e)return this._updateViewData(),this._index.isNodeVisible(e.index)}return!0}get index(){return this._index}get requiredAttributes(){return this._requiredAttributes}constructor(e){super(e),this.screenSizeFactor=0,this.featureTarget=5e4,this.fixedFeatureTarget=!1,this.updating=!0,this.updatingProgress=1,this.leavesReached=!1,this.scaleVisibilityEnabled=!0,this.worker=null,this._featureLOD=1,this._stableFeatureLOD=!1,this._isIdle=!1,this._cameraDirty=!0,this._invisibleDirty=!1,this._idleStateCallbacks=null,this._newLoadingNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null}),this._loadedNodeScales=new Map,this._modificationsNodeFilteringArray=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"],this._downloadingCount=0,this._loadingNodes=new Map,this._updatingNodes=new Map,this._progressMaxNumNodes=1,this._requiredAttributes=new Array,this._requiredAttributesDirty=!0,this._updatesDisabled=!1,this.disableIDBCache=!1,this._disableMemCache=!1,this._restartNodeLoading=!1,this._fields=null,this._attributeStorageInfo=null,this._idleQueue=new _support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_15__.PromiseQueue,this._elevationUpdateNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null}),this._errorCount=0}initialize(){const{layerView:e,layer:t}=this;this._disableMemCache=!e.loadCachedGPUData||!e.addCachedGPUData,this._lodHandling=new _views_3d_layers_i3s_I3SLodHandling_js__WEBPACK_IMPORTED_MODULE_20__["default"](e),this._defaultGeometrySchema=t.store.defaultGeometrySchema,this.disableIDBCache=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("disable-feature:idb-cache"),"fields"in t&&(this._fields=t.fields,this._attributeStorageInfo=t.attributeStorageInfo),this.addResolvingPromise(Promise.all([t.indexInfo,t.when(),e.when()]).then((([i])=>{if(this.destroyed||!e||e.destroyed||!i)return;const{view:s,clientGeometry:a}=e,{resourceController:r}=s;if(this._setClippingArea(s.clippingArea),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>s?.pointsOfInterest?.focus?.renderLocation),(e=>this._pointOfInterestChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>s.quality),(()=>this._setCameraDirty()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.sync),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.contentVisible),(e=>{const t=e?()=>this._updateIdleState(!0):()=>this._updateViewData(),i=e?()=>this._updateIdleState(!1):()=>{};e&&null!=this._index&&this._index.invalidateAllElevationRanges(),this._idleStateCallbacks?(e||this.cancelNodeLoading(),this.restartNodeLoading(),this._idleStateCallbacks.idleBegin=t,this._idleStateCallbacks.idleEnd=i):this._idleStateCallbacks=r.scheduler.registerIdleStateCallbacks(t,i)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.initial),(0,_views_3d_layers_i3s_I3SFrameTask_js__WEBPACK_IMPORTED_MODULE_18__.addCallback)(e.view.resourceController.scheduler,this),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.uncompressedTextureDownsamplingEnabled),(()=>this.restartNodeLoading())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>[this.featureTarget,this.fixedFeatureTarget]),(()=>{this._setCameraDirty(),this._stableFeatureLOD=!1})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>s.state?.contentCamera),(()=>this._setCameraDirty())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>t.elevationInfo),(e=>this._elevationInfoChanged(e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>t.effectiveScaleRange),(()=>this._scaleBoundsChanged())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.lodFactor),(()=>this._setCameraDirty())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.availableFields),(()=>this._requiredFieldsChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>e.holeFilling),(e=>null!=this._index&&(this._index.holeFilling=e)))]),this._updateScaleHandles(),this._viewportQueries=new _views_3d_layers_i3s_I3SViewportQueries_js__WEBPACK_IMPORTED_MODULE_25__["default"](this.crsIndex,s.renderCoordsHelper,s.state.contentCamera,!s.state.fixedContentCamera||this.isGraphics3D,this._clippingArea,this.isMeshPyramid?s.basemapTerrain:s.elevationProvider,(0,_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_16__.viewingModeFromString)(s.viewingMode),this.layer.elevationInfo,{progressiveLoadFactor:this._getProgressiveLoadFactor(),screenspaceErrorBias:this._lod,angleDependentLoD:this._lod<.5}),this._clientNodeLoader=new _views_3d_layers_i3s_I3SClientNodeLoader_js__WEBPACK_IMPORTED_MODULE_17__.I3SClientNodeLoader(this.layer.uid,{indexSR:this.crsIndex,vertexSR:this.crsVertex,renderSR:s.renderCoordsHelper.spatialReference,localMode:"local"===s.viewingMode},s.resourceController.memoryController,this.worker),this._index=new _views_3d_layers_i3s_I3SIndex_js__WEBPACK_IMPORTED_MODULE_19__.I3SIndex(t,i,this.indexStreamController,this._clientNodeLoader,this._viewportQueries,j,e.holeFilling,(t=>e.isNodeLoaded(t)),(t=>e.isNodeReloading(t)),(e=>this._shouldLoadNode(e)),(e=>this._enableFromGPUCache(e,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.NodeState.Leaf)),(e=>this._needsUpdate(e)),(()=>!this.indexStreamController.busy),(t=>e.computeVisibilityObb?e.computeVisibilityObb(t):null),e?.computeNodeFiltering?t=>e.computeNodeFiltering(t):void 0),this._index.updateElevationInfo(this.layer.elevationInfo,this.isMeshPyramid||this.isGraphics3D),this._index.imModificationsChanged(!!e.hasModifications),this._index.layerFilterChanged(!!e.hasGeometryFilter),null!=a){for(const e of a)this._addMesh(e.mesh,e.oid);this.addHandles(a.on("change",(e=>{for(const t of e.removed)this._removeMesh(t.oid);for(const t of e.added)this._addMesh(t.mesh,t.oid)})))}this._startNodeLoading()}))),this._tmpPoint=(0,_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_14__.makeDehydratedPoint)(0,0,0,this.crsIndex)}updateNodeModificationStatus(e){const t=this._index,i=this.layerView;null!=t&&i?.updateNodeModificationStatus&&(this._modificationsNodeFilteringArray.clear(),e.forAll((e=>{const i=t.getNode(e);null!=i&&this._modificationsNodeFilteringArray.push(i)})),i.updateNodeModificationStatus(this._modificationsNodeFilteringArray),this._invisibleDirty=!0)}destroy(){this.cancelNodeLoading(),this._idleStateCallbacks&&(this._isIdle=!1,this._idleStateCallbacks.remove(),this._idleStateCallbacks=null),this._nodeLoader=null,K.prune(),null!=W&&(W.hide(),W=null)}_getRequiredAttributes(){if(null==this._attributeStorageInfo||!this._fields||!this.layerView.availableFields)return[];const e=this._attributeStorageInfo,t=this._fields,i=this.layer.objectIdField;return this.layerView.availableFields.map((i=>{const s=$(e,i),a=$(t,i);return s>=0&&a>=0?{index:s,name:t[a].name,field:t[a],attributeStorageInfo:e[s]}:null})).filter((e=>null!=e&&e.name!==i))}_requiredFieldsChange(){const e=this._getRequiredAttributes();X(this._requiredAttributes,e)||(this._requiredAttributes=e,this._requiredAttributesDirty=!1,this.restartNodeLoading())}requestUpdate(){this._requiredAttributesDirty=!0,this.restartNodeLoading()}_setClippingArea(e){const t=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.create)();(0,_views_3d_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_27__.toBoundingRect)(e,t,this.layerView.view.renderSpatialReference)?this._clippingArea=t:this._clippingArea=null}_pointOfInterestChanged(e){null!=this._viewportQueries&&(this._viewportQueries.setPointOfInterest(e),null!=this._index&&(this._index.progressiveLoadPenalty=J.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate()))}updateClippingArea(e){this._setClippingArea(e),null!=this._viewportQueries&&null!=this._index&&(this._viewportQueries.updateClippingArea(this._clippingArea),this._index.invalidateVisibilityCache()),this._setCameraDirty()}_setCameraDirty(){this._cameraDirty=!0,this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}_addMesh(e,t){if(null==this._index)return;const i=this._clientNodeLoader.createMeshNodeInfo(e,t),s=this._index.addClientNodeToIndex(i.id,i.mbs);this._clientNodeLoader.addMeshNode(s,i),this._evaluateUpdating(),this.notifyChange("rootNodeVisible")}_removeMesh(e){const t=this._clientNodeLoader.getMeshNodeIndex(e);if(null!=t){if(null==this._index)throw new Error("delayed removal of client side i3s node geometry not supported yet.");{const e=(e,t)=>{this.layerView.removeNode(t),this._loadedNodeScales.delete(t),this._clientNodeLoader.removeNode(e),this.layerView.deleteCachedNodeData&&null!=e&&this.layerView.deleteCachedNodeData(e),this.layerView.deleteCachedGPUData?.(this.layerView.loadCachedGPUData?.(t))},i=(e,t,i)=>{this._clientNodeLoader.updateNodeIndex(e,t,i),this.layerView.updateNodeIndex&&this.layerView.updateNodeIndex(t,i)};this._index.removeClientNodeFromIndex(t,e,i),this.notifyChange("rootNodeVisible")}}}updateElevationChanged(e,t){const i=this._index;if(null==i?.rootNode||null==t)return null;this.crsIndex.equals(t)||((0,_geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__.projectBoundingRect)(e,t,Y,this.crsIndex),e=Y);const s=this._elevationUpdateNodes;return s.clear(),(0,_views_3d_layers_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_24__.findIntersectingNodes)(e,i.rootNode,i,(e=>s.push(e.index))),s.length&&(s.forAll((e=>i.updateElevationChanged(e))),this._setCameraDirty()),s}removeAllGeometryObbs(){null!=this._index&&this._index.removeAllGeometryObbs()}getRenderMbs(e){return null!=this._viewportQueries?this._viewportQueries.getRenderMbs(e):null}_elevationInfoChanged(e){null!=this._index&&(this._index.updateElevationInfo(e,this.isMeshPyramid||this.isGraphics3D),this._setCameraDirty())}_updateScaleHandles(){const e="scale-bounds";this.removeHandles(e),this._areScaleBoundsActive&&this.addHandles(this.layerView.view.basemapTerrain.on("scale-change",(e=>this._scaleUpdateHandler(e))),e)}_scaleBoundsChanged(){this._areScaleBoundsActive||this._loadedNodeScales.clear(),this._updateScaleHandles(),this._setCameraDirty()}_scaleUpdateHandler(e){this._updateScaleInBoundingRect(e.extent,e.spatialReference),this._setCameraDirty()}_updateScaleInBoundingRect(e,t){const i=this._index;if(null==i)return;null!=i.rootNode&&(0,_geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_12__.projectBoundingRect)(e,t,Y,this.crsIndex)&&this._loadedNodeScales.forEach(((e,t)=>{const s=i.getNode(t);null!=s&&(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.intersectsSphere)(Y,s.mbs)&&this._loadedNodeScales.set(t,this._computeScale(s))}))}restartNodeLoading(){this._restartNodeLoading=!0,this.cancelNodeLoading(),this._evaluateUpdating()}schedule(e,t){return this._idleQueue.push(e,t)}reschedule(e,t){return this._idleQueue.unshift(e,t)}get _isIntegratedMesh(){return"integrated-mesh"===this.layer.type}get _areScaleBoundsActive(){const{minScale:e,maxScale:t}=(0,_views_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_30__.extractSafeScaleBounds)(this.layer);return this.scaleVisibilityEnabled&&(e>0||t>0)}get unloadedMemoryEstimate(){return null!=this._index&&this.layerView.contentVisible?this._index.unloadedMemoryEstimate*this._lodDropFactor:0}async _loadNodeData(e,t){return e.index<0?this._clientNodeLoader.loadNodeData(e.id,t):this._nodeLoader.loadNodeData(e,t)}async _loadAttributes(e,t,i){return(e.index<0?this._clientNodeLoader:this._nodeLoader).loadAttributes(e,t,i)}get indexDepth(){return null!=this._index?this._index.maxLevel:0}set disableMemCache(e){this.layerView.loadCachedGPUData&&this.layerView.addCachedGPUData||(this._disableMemCache=!0),this._disableMemCache=e}runTask(e,t){return this.layerView.contentVisible?this.layerView.visible&&null!=this._index?(this._processWithErrorLogging(e,t),this._index.maxPriority):-1/0:(this._updateViewData(),this._evaluateUpdating(),-1/0)}_processWithErrorLogging(e,t){try{this._process(e,t)}catch(i){this._errorCount<50?j.error("Error during processing: "+i):50===this._errorCount&&j.error("Too many errors for this layer. Further errors will not be displayed."),this._errorCount++}}_process(e,t){this._restartNodeLoading&&this._startNodeLoading(),null!=this._nodeLoader&&null!=this._index&&(this._updateViewData(),this._invisibleDirty&&this._removeInvisibleNodes(e)&&(this._invisibleDirty=!1),this._isIntegratedMesh&&(e.enabled=!1),e.run((()=>this._processIndex(e))),this._updateFeatureLOD(),e.run((()=>this._processCache(e))),this._isIntegratedMesh&&(e.enabled=!0),e.run((()=>this._processNodes(e,t))),this._idleQueue.runTask(e),e.run((()=>this._prefetchIndex())),t.numIndexLoading+=this._index.indexLoading,t.numNodesLoading+=this._downloadingCount,e.run((()=>this._lodHandling.lodGlobalHandling(e))),this._evaluateUpdating())}_processIndex(e){if(null==this._index)return!1;if(this._index.dirty){this._newLoadingNodes.clear(),this._index.update(Array.from(this._loadingNodes.keys()),e,(e=>this.updateNodeModificationStatus(e))),this._disableMemCache||(this._newLoadingNodes.pushArray(this._index.updates.add.data,this._index.updates.add.length),this._newLoadingNodes.pushArray(this._index.updates.missing.data,this._index.updates.missing.length));const t=this._index.featureEstimate.leavesReached;this._index.isLoading||t===this._get("leavesReached")||this._set("leavesReached",t)}return this._index.load()}_prefetchIndex(){return!(null==this._index||this._loadingNodes.size>0||this._index.updates.add.length>0)&&this._index.prefetch()}_updateFeatureLOD(){if(!this.useMaximumNumberOfFeatures||null==this._index||null==this._viewportQueries)return;const e=!this._index.isLoading,t=this.featureTarget*this._baseLOD,i=this._index.featureEstimate;if(i.estimate=i.estimate||t/2,this._index.indexMissing>k){if(this._featureLOD<=H)return;this._featureLOD/=B,this._stableFeatureLOD=!1}else if(e&&i.estimate<t){if(i.leavesReached||this._featureLOD>=E||this._stableFeatureLOD)return;const e=Math.min(10,Math.max(t/i.estimate,1.001));this._featureLOD*=e;const s=this._lod,a=this._index.checkFeatureTarget(t,s);a!==s&&(this._featureLOD=a/this._baseLOD,this._stableFeatureLOD=!0)}else{if(!(i.estimate>t*R||e&&i.estimate>t))return;if(this._featureLOD<=H)return;this._featureLOD/=1+.25*(i.estimate/t-1),this._stableFeatureLOD=!1}this._featureLOD=Math.min(E,Math.max(H,this._featureLOD)),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.requestUpdate()}_processCache(e){const t=this._index;if(null==t)return!1;for(;this._newLoadingNodes.length>0&&!e.done;){const i=this._newLoadingNodes.pop();for(let s=t.getParent(i);null!=s&&(!this.layerView.isNodeLoaded(s.index)&&this._isNodeInScaleBounds(s));s=t.getParent(s.index))if(this._enableFromGPUCache(s,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.NodeState.Hole)){e.madeProgress();break}}return e.hasProgressed}_processNodes(e,t){if(null==this._index)return!1;let i=(this._isIdle?T:Q)-this._loadingNodes.size;const s=this._index.updates;for(s.cancel.forEach(this._cancelNode,this),s.cancel=[];s.remove.length>0&&!e.done;)this.layerView.removeNode(s.remove.pop()),e.madeProgress();for(;s.update.length>0&&!e.done;){const t=this._index.getNode(s.update.pop());null!=t&&(this._updateLoadedNode(t),e.madeProgress())}for(;s.add.length>0&&!e.done&&i>0;){--i;const a=this._index.getNode(s.add.back());if(null==a||a.cacheState!==_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.CacheState.Cached&&!this._hasNodeLoadToken(t))break;s.add.pop(),this._loadNode(a),e.madeProgress()}return e.hasProgressed}_cancelAllNodes(){this._loadingNodes.forEach((e=>e.abort())),this._loadingNodes.clear(),this._updatingNodes.forEach((e=>e.abort())),this._updatingNodes.clear()}_cancelNode(e){const t=this._loadingNodes.get(e);t&&(t.abort(),this._loadingNodes.delete(e))}_hasNodeLoadToken(e){return!(!this._isIdle&&e.numNodesLoading+this._loadingNodes.size>=Q)&&(this._downloadingCount<_views_3d_support_index_js__WEBPACK_IMPORTED_MODULE_28__.maxDownloadSlots&&!this.dataStreamController.busy)}_evaluateUpdating(){let e=!1,t=0;if(this.layerView){if(this.layerView.contentVisible){const i=(null!=this._index?this._index.indexMissing:0)+3*(null!=this._index?this._index.updates.add.length:0)+2*this._loadingNodes.size;e=!!(i>0||this._updatingNodes.size>0||this._restartNodeLoading||this._cameraDirty||this._idleQueue.running||this._lodHandling&&this._lodHandling.requiresLODGlobalHandling||null!=this._index&&this._index.isPrefetching),0===i&&(this._progressMaxNumNodes=1),this._progressMaxNumNodes=Math.max(i,this._progressMaxNumNodes),t=1-i/this._progressMaxNumNodes}else e=this._cameraDirty,t=e?0:1;this.updating=e,this.updatingProgress=t}}_updateViewData(){if(!this._cameraDirty||null==this._index||null==this._viewportQueries)return;const e=this.layerView.view,{contentCamera:t,fixedContentCamera:i}=e.state;this.screenSizeFactor=1/(t.perScreenPixelRatio/2),this._viewportQueries.updateCamera(t,!i||this.isGraphics3D),this._viewportQueries.setPointOfInterest(e.pointsOfInterest.focus.renderLocation),this._viewportQueries.updateScreenSpaceErrorBias(this._lod),this._index.invalidateVisibilityCache(),this._index.progressiveLoadPenalty=J.distancePenalty*this._viewportQueries.distCameraToPOI(),this._index.requestUpdate(),this._stableFeatureLOD=!1,this._invisibleDirty=!0,this._cameraDirty=!1,this.notifyChange("rootNodeVisible")}_getProgressiveLoadFactor(){return this.layerView.view.quality<1?1:this.layerView.progressiveLoadFactor}get _lod(){return this._featureLOD*this._baseLOD}get _baseLOD(){const e=this.layerView.lodFactor;return this.fixedFeatureTarget?1:(e>0?e:1)*this.layerView.view.quality}get _lodDropFactor(){if(this.fixedFeatureTarget)return 1;return(Math.min(this.layerView.view.quality,.5)-_views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_29__.minQuality)/(.5-_views_3d_support_MemoryController_js__WEBPACK_IMPORTED_MODULE_29__.minQuality)}isGeometryVisible(e){return!!this._index?.isGeometryVisible(e.index)}updateVisibility(e){this._index?.invalidateNodeVisibilityCache(e)}invalidateGeometryVisibility(e){this._index?.invalidateGeometryVisibility(e)}invalidateVisibilityObbs(){this._index?.invalidateVisibilityObbs()}modificationsChanged(){this._index?.imModificationsChanged(!!this.layerView.hasModifications),this._invisibleDirty=!0}_shouldLoadNode(e){return!(!this._lodHandling.shouldLoadNode(e)||this._shouldDropNode(e))&&(!(null==this._index||!this._index.isGeometryVisible(e.index))&&this._isNodeInScaleBounds(e))}_shouldDropNode(e){if(null==this._viewportQueries)return!1;const t=this._lodDropFactor;if(t>=1||!this._lodHandling.hasNoVisibleChildren(e))return!1;return Math.abs(this._viewportQueries.calcCameraDistanceToCenter(e))-this._viewportQueries.minDistance>(this._viewportQueries.maxDistance-this._viewportQueries.minDistance)*t}_startNodeLoading(){this._restartNodeLoading=!1;const e=this._index;if(this._updatesDisabled||null==e||null==this._viewportQueries)return;this._updateViewData(),this._requiredAttributesDirty&&(this._requiredAttributes=this._getRequiredAttributes(),this._requiredAttributesDirty=!1);const t={textureEncodings:this.layerView.supportedTextureEncodings,uncompressedTextureDownsamplingEnabled:this.layerView.uncompressedTextureDownsamplingEnabled,textureUsageMask:this.layerView.rendererTextureUsage,loadFeatureData:this.useMaximumNumberOfFeatures};this._nodeLoader=new _views_3d_layers_i3s_I3SNodeLoader_js__WEBPACK_IMPORTED_MODULE_22__["default"](this.layer,this.dataStreamController,j,this._defaultGeometrySchema,this._requiredAttributes,t),e.requestUpdate(),this._lodHandling.startNodeLoading((e=>this._isNodeInScaleBounds(e)),((e,t)=>this._removeNodes(e,t,Z.fadeout)),e,{maxLodLevel:this._viewportQueries.maxLodLevel}),this._evaluateUpdating()}isNodeLoading(){return null!=this._nodeLoader&&null!=this._index}cancelNodeLoading(){this.isNodeLoading()&&(this.indexStreamController.cancelAll(),this.dataStreamController.cancelAll(),this._idleQueue.cancelAll(),this._cancelAllNodes(),this._nodeLoader=null,this._evaluateUpdating())}_removeInvisibleNodes(e){const t=this._index;if(null==t||null==this._viewportQueries)return!1;K.clear(),this.layerView.getLoadedNodeIndices(K);const i=0===this._viewportQueries.maxDistance,s=i?()=>!1:e=>this._shouldDropNode(e);return K.filterInPlace((e=>{const i=t.getNode(e);return null==i||!t.isGeometryVisible(e)||s(i)||!this._isNodeInScaleBounds(i)})),K.length>0&&this._lodHandling.setLodGlobalDirty(),this._removeNodes(K,e,Z.pop),!(i&&this._lodDropFactor<1)&&(0===K.length||(K.clear(),!1))}markNodeToRemove(e){K.push(e)}removeMarkedNodes(){this._removeNodes(K,_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_31__.noBudget,Z.pop)}_removeNodes(e,t,i){const s=e.length;if(0!==s&&!t.done){for(null!=this._index&&this._index.requestUpdate();e.length>0&&!t.done;){const s=e.pop(),a=this._index;i===Z.fadeout&&this.layerView.nodeFadeoutEnabled&&null!=a&&a.isGeometryVisible(s)?this.layerView.fadeNode(s,_views_3d_layers_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_26__.FadeDirection.FadeOut,!0):this.layerView.removeNode(s),t.madeProgress()}if(this._loadedNodeScales.size>0)for(let t=e.length;t<s;t++){const i=e.data[t];this._loadedNodeScales.delete(i)}}}_needsUpdate(e){if(e.resources.isEmpty||this._updatingNodes.has(e.index))return!1;const t=this.layerView.getLoadedAttributes(e.index);return null!=t&&t!==this._requiredAttributes}async _updateLoadedNode(e){const t=new AbortController;this._updatingNodes.set(e.index,t),this._evaluateUpdating();try{const i=X(this.layerView.getLoadedAttributes(e.index),this._requiredAttributes);let s=null;s=i?await Promise.resolve(this.layerView.getAttributeData(e.index)):await this._loadAttributes(e,this._requiredAttributes,t.signal),await this.schedule((()=>this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:s},t.signal)),t.signal)}catch(i){if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(i))return this.layerView.updateAttributes(e.index,{loadedAttributes:this._requiredAttributes,attributeData:{}},t.signal)}this._updatingNodes.delete(e.index),this._evaluateUpdating()}_loadNode(e){if(this._loadingNodes.has(e.index))return void j.error("already loading node "+e.index);const t=new AbortController;this._loadingNodes.set(e.index,t),this._evaluateUpdating(),this._loadAndAddNode(e,t.signal).then((i=>{i&&null!=this._index&&this._loadingNodes.get(e.index)===t&&(this._loadingNodes.delete(e.index),this._index.requestUpdate())})).catch((e=>{if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(e))throw e})).finally((()=>{this._loadingNodes.get(e.index)===t&&this._loadingNodes.delete(e.index),this._evaluateUpdating()}))}_loadAndAddNode(e,t){return e.cacheState===_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.CacheState.Uncached?this._loadUncached(e,t).then((()=>!1)):this._loadCached(e,t).then((t=>!t&&(e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.CacheState.Uncached,!0))).catch((t=>!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t)&&(e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.CacheState.Uncached,!0)))}_enableFromGPUCache(e,t){if(this._disableMemCache||null==this._index)return!1;if(t===_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.NodeState.Hole&&!this._index.useNodeAsHole(e.index))return!0;const i=this._loadCachedGPUData(e);return!!i&&(this.layerView.addCachedGPUData(e,i,t),this._nodeAdded(),!0)}_loadCachedGPUData(e){const t=this.layerView.loadCachedGPUData(e.index);return null!=t?.attributeInfo&&X(t.attributeInfo.loadedAttributes,this._requiredAttributes)?t:(this.layerView.deleteCachedGPUData(t),null)}_nodeAdded(){null!=this._index&&this._index.requestUpdate(),this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating()}updateLoadStatus(e,t){const i=this._index;null!=i&&i.updateChildrenLoaded(e,t?1:-1)}async _loadCached(e,t){if(this._enableFromGPUCache(e,_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.NodeState.Leaf))return!0;const i=this.layerView;if(this.disableIDBCache||!i.loadCachedNodeData||!i.addCachedNodeData)return!1;const s=(t,i)=>this._nodeLoader.loadTextures(e,t,i),a=(t,i)=>this._clientNodeLoader.loadTextures(e,t,i),r=e.index>=0?s:a,d=await this.schedule((()=>i.loadCachedNodeData(e,t,r)),t);if(null==d)return!1;const o=this._requiredAttributes,n=await this.reschedule((()=>this._loadAttributes(e,o,t)),t);return await this.reschedule((()=>i.addCachedNodeData(e,d,{loadedAttributes:o,attributeData:n},t)),t),this._nodeAdded(),!0}_loadUncached(e,t){return this._downloadingCount++,this._loadNodeData(e,t).catch((e=>{throw this._downloadingCount--,e})).then((i=>(this._downloadingCount--,this.schedule((()=>this.layerView.addNode(e,i,t)),t)))).then((()=>{this._nodeAdded(),e.cacheState=_views_3d_layers_i3s_I3SNode_js__WEBPACK_IMPORTED_MODULE_21__.CacheState.Cached})).catch((t=>{if(!(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t))throw j.error("#loadNodeData()",this.layer,`Failed to load node '${e.id}'`,t),e.failed=!0,null!=this._index&&this._index.requestUpdate(),t}))}_updateIdleState(e){e!==this._isIdle&&(this._isIdle=e,this._evaluateUpdating(),e&&this._index&&null!=this._index&&this._index.resetFailedNodes())}_getScale(e){if(this._loadedNodeScales.has(e.index))return this._loadedNodeScales.get(e.index);const t=this._computeScale(e);return this.layerView.isNodeLoaded(e.index)&&this._loadedNodeScales.set(e.index,t),t}_computeScale(e){this._tmpPoint.x=e.mbs[0],this._tmpPoint.y=e.mbs[1],this._tmpPoint.z=e.mbs[2];const t=e.mbs[3];return this.layerView.view.basemapTerrain.getSphereScale(this._tmpPoint,t)}_isNodeInScaleBounds(e){if(!this._areScaleBoundsActive)return!0;const t=this._getScale(e),{minScale:i,maxScale:s}=(0,_views_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_30__.extractSafeScaleBounds)(this.layer);return (0,_views_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_30__.scaleBoundsPredicate)(t,i,s)}updateStats(e){this.isGraphics3D&&(e.detail=this._featureLOD,e.target=this.featureTarget*this._baseLOD),this._index?.updateStats(e)}get test(){const e=this;return{index:this._index,set disableUpdates(t){e._updatesDisabled=t,t?e.cancelNodeLoading():e.requestUpdate()},set disableIDBCache(t){e.disableIDBCache=t},set ignoreServiceObb(t){null!=e._index&&(e._index.ignoreServiceObb=t)},shouldLoadNode:t=>e._shouldLoadNode(t)}}notifyLODUpdate(){this._lodHandling.setLodGlobalDirty(),this._evaluateUpdating(),null!=this._index&&this._index.requestUpdate()}geometryFilterChanged(e){const t=this._index;null!=t&&t.layerFilterChanged(e),this._setCameraDirty()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"isMeshPyramid",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"isGraphics3D",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"useMaximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"indexStreamController",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"dataStreamController",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"crsVertex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"crsIndex",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"screenSizeFactor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"featureTarget",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"fixedFeatureTarget",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"layer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"running",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],z.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],z.prototype,"leavesReached",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],z.prototype,"scaleVisibilityEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],z.prototype,"worker",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0,dependsOn:[]})],z.prototype,"rootNodeVisible",null),z=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_11__.subclass)(G)],z);const K=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_4__["default"]({deallocator:null});let W;function X(e,t){return null!=e&&e.length===t.length&&e.every((e=>$(t,e.name)>=0))}function $(e,t){const i=t.toLowerCase();for(let s=0;s<e.length;s++)if(e[s].name.toLowerCase()===i)return s;return-1}const J={factorIM:.2,factor3dObject:.05,distancePenalty:10},Y=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.create)();var Z;!function(e){e[e.pop=0]="pop",e[e.fadeout=1]="fadeout"}(Z||(Z={}));const ee=z;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/FeatureLayerView3D.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/FeatureLayerView3D.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _support_featureFlags_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../support/featureFlags.js */ "./node_modules/@arcgis/core/support/featureFlags.js");
/* harmony import */ var _FeatureLayerViewBase3D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./FeatureLayerViewBase3D.js */ "./node_modules/@arcgis/core/views/3d/layers/FeatureLayerViewBase3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends _FeatureLayerViewBase3D_js__WEBPACK_IMPORTED_MODULE_10__["default"]{constructor(){super(...arguments),this.type="feature-3d",this.direct3DObjectFeatureLayerDisplayEnabled=(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_9__.direct3DObjectFeatureLayerDisplayEnabled)()}initialize(){const{layer:e,view:t}=this;(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_8__.getEffectiveLayerCapabilities)(e)?.operations.supportsQuery||this.addResolvingPromise(Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:query-not-supported","layer view requires a layer with query capability",{layer:e}))),null!=e.infoFor3D&&(this.direct3DObjectFeatureLayerDisplayEnabled?this._set("suspendResumeExtentMode","computed"):this.addResolvingPromise(Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview3d:unsupported-geometry-type",`Unsupported geometry type ${e.geometryType}`)))),"mesh"!==e.geometryType||(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_7__.canProjectWithoutEngine)(e.spatialReference,t.spatialReference)||this.addResolvingPromise(Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("layerview:spatial-reference-incompatible","The spatial references of the feature layer is incompatible with the spatial reference of the view")))}get featureSpatialReference(){return this.view.featureTiles?.tilingScheme?.spatialReference}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],c.prototype,"direct3DObjectFeatureLayerDisplayEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],c.prototype,"layer",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.FeatureLayerView3D")],c);const l=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/ElevationRange.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/ElevationRange.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   expandElevationRange: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e,a,n){e&&("number"==typeof a?(e.elevationRangeMin=Math.min(e.elevationRangeMin,a),e.elevationRangeMax=Math.max(e.elevationRangeMax,n)):(e.elevationRangeMin=Math.min(e.elevationRangeMin,a.elevationRangeMin),e.elevationRangeMax=Math.max(e.elevationRangeMax,a.elevationRangeMax)))}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   convertMeshMaterialToPBRMaterial: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _Color_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../Color.js */ "./node_modules/@arcgis/core/Color.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _support_requestUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../support/requestUtils.js */ "./node_modules/@arcgis/core/support/requestUtils.js");
/* harmony import */ var _glTF_internal_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../glTF/internal/resourceUtils.js */ "./node_modules/@arcgis/core/views/3d/glTF/internal/resourceUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/* harmony import */ var _webgl_engine_lib_textureUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/lib/textureUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/textureUtils.js");
/* harmony import */ var _webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl-engine/materials/pbrUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function c(o){const t=[],r=[];if(null==o){return{material:{alphaMode:"opaque",alphaCutoff:.1,doubleSided:!0,cullFace:0,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[1,1,1,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6000000238418579},wrapTextures:!1,hasParametersFromSource:!0},requiredTextures:t,textureData:r}}const a=d(o);"auto"===o.alphaMode&&console.warn('alphaMode "auto" not supported by I3S PBRMaterial - defaulting to "blend".');const n=(0,_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_7__.useSchematicPBR)({normalTexture:o.normalTexture,emissiveTexture:a?o.emissiveTexture:null,emissiveFactor:a?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGB(o.emissiveColor):null,occlusionTexture:a?o.occlusionTexture:null,metallicRoughnessTexture:a?o.metallicRoughnessTexture:null,metallicFactor:a?o.metallic:null,roughnessFactor:a?o.roughness:null}),c=n?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_7__.defaultSchematicMRRFactors[0]:a?o.metallic:0,g=n?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_7__.defaultSchematicMRRFactors[1]:a?o.roughness:0;return{material:{alphaMode:"auto"===o.alphaMode?"blend":o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:o.doubleSided?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.CullFaceOptions.None:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_5__.CullFaceOptions.Back,normalTextureId:await m(o.normalTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Normal),emissiveTextureId:a?await m(o.emissiveTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Emissive):-1,occlusionTextureId:a?await m(o.occlusionTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Occlusion):-1,emissiveFactor:a&&null!=o.emissiveColor?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGB(o.emissiveColor):[0,0,0],metallicRoughness:{baseColorFactor:null!=o.color?_Color_js__WEBPACK_IMPORTED_MODULE_0__["default"].toUnitRGBA(o.color):[1,1,1,1],baseColorTextureId:await m(o.colorTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.Color),metallicRoughnessTextureId:a?await m(o.metallicRoughnessTexture,t,r,_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureUsage.MetallicRoughness):-1,metallicFactor:c,roughnessFactor:g},wrapTextures:!0,hasParametersFromSource:n},requiredTextures:t,textureData:r}}async function m(e,s,l,i){if(null==e)return-1;const u=l.length,c=e.data,m=e.url;if(null!=c){if(c instanceof HTMLImageElement||c instanceof HTMLCanvasElement){const e=(0,_webgl_engine_lib_textureUtils_js__WEBPACK_IMPORTED_MODULE_6__.downsampleImage)(c);return l.push({id:u,usage:i,data:e,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG,downsampled:!1}),s.push({id:u,usage:i,encodings:[{name:void 0,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}]}),u}if(c instanceof HTMLVideoElement)return-1;if(c instanceof ImageData)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("ImageData textures not supported yet for client side I3S nodes");if(c instanceof _glTF_internal_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.EncodedMeshTexture)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("EncodedMeshTexture textures not supported yet for client side I3S nodes")}else if(null!=m){const e=new Image;e.src=m;const o=await (0,_support_requestUtils_js__WEBPACK_IMPORTED_MODULE_2__.loadImageAsync)(e,e.src,!1,void 0),r=(0,_webgl_engine_lib_textureUtils_js__WEBPACK_IMPORTED_MODULE_6__.downsampleImage)(o);return l.push({id:u,usage:i,data:r,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG,downsampled:!1}),s.push({id:u,usage:i,encodings:[{name:void 0,encoding:_enums_js__WEBPACK_IMPORTED_MODULE_4__.TextureEncoding.PNG}]}),u}return-1}function d(e){return e.hasOwnProperty("metallicRoughnessTexture")}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientNodeLoader.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SClientNodeLoader: () => (/* binding */ m),
/* harmony export */   createSphereFromExtent: () => (/* binding */ h),
/* harmony export */   sizeOfFloat32: () => (/* binding */ g),
/* harmony export */   sizeOfInt32: () => (/* binding */ M),
/* harmony export */   sizeOfUInt64: () => (/* binding */ S),
/* harmony export */   sizeOfUInt8: () => (/* binding */ _),
/* harmony export */   transformNormals: () => (/* binding */ f)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../chunks/mat3f64.js */ "./node_modules/@arcgis/core/chunks/mat3f64.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _I3SClientMaterialUtil_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./I3SClientMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SClientMaterialUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class m{constructor(e,t,o,r){this._uid=e,this._worker=r,this._id2Meta=new Map,this._oid2Meta=new Map,this._indexSR=t.indexSR,this._vertexSR=t.vertexSR,this._renderSR=t.renderSR,this._localMode=t.localMode,this._memCache=o.newCache(`sl-client-mesh-data-${this._uid}`)}get uid(){return this._uid}get worker(){return this._worker}get indexSR(){return this._indexSR}get renderSR(){return this._renderSR}createMeshNodeInfo(e,t){const o=`mesh${t}`,r=e.extent,n=r.spatialReference,s=this._indexSR,a=h(r,e.origin);(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_9__.projectBoundingSphere)(a,n,a,s);return{type:"mesh",id:o,version:y(e),oid:t,mbs:a,componentNodeIds:[],unloadedMesh:e,nodeIndex:null,loadMeshPromise:null}}addMeshNode(t,o){if(null!=this.getMeshNodeIndex(o.oid))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`I3SClientNodeLoader: client side mesh for feature oid=${o.oid} already exists`);o.nodeIndex=t,this._id2Meta.set(o.id,o),this._oid2Meta.set(o.oid,o)}getMeshNodeIndex(e){const t=this._oid2Meta.get(e);return null==t||"mesh"!==t.type?null:t.nodeIndex}removeNode(e){const t=this._id2Meta.get(e);null!=t&&(this._id2Meta.delete(e),"mesh"===t.type&&this._oid2Meta.delete(t.oid))}async loadNodeJSON(t){const o=this._id2Meta.get(t);if(null==o)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`I3SClientNodeLoader::loadNodeJSON unable to find node ${t}`);switch(o.type){case"mesh":return this._loadMeshNodeJSON(o);case"mesh-component":return this._loadMeshComponentNodeJSON(o);default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`I3SClientNodeLoader::loadNodeJSON unable to handle node ${t}`)}}async _loadMeshNodeJSON(e){const t=e.id,o=(await this._getMeshData(e)).loadedMesh;if(null==o.components||0===o.components.length)return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null};const r=[],n=o.components;for(let s=0;s<n.length;++s){const o=`${t}-component${s}`,n={type:"mesh-component",id:o,mbs:e.mbs,componentIndex:s,meshNodeInfo:e,textureData:new Map};this._id2Meta.set(n.id,n),e.componentNodeIds.push(o),r.push({id:n.id,href:null,mbs:n.mbs,obb:null})}return{id:t,version:null,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:r}}updateNodeIndex(e,t,o){const r=this._id2Meta.get(e);r&&"mesh"===r.type&&(r.nodeIndex=o)}async _loadMeshComponentNodeJSON(e){return{id:e.id,version:e.meshNodeInfo.version,mbs:e.mbs,obb:null,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:null,isEmpty:!1}}async loadNodeData(o,n){const s=this._id2Meta.get(o);if(null==s||"mesh-component"!==s.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`Failed to load client node data for node ${o} (unexpected node info)`);const a=s.meshNodeInfo,i=await this._getMeshData(a),l=i.loadedMesh,d=a.oid;if(null==l.components)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`Failed to load client node data for node ${o} (unexpected null reference)`);const u=l.components[s.componentIndex],{material:m,requiredTextures:h,textureData:x}=await (0,_I3SClientMaterialUtil_js__WEBPACK_IMPORTED_MODULE_11__.convertMeshMaterialToPBRMaterial)(u.material);if(null!=x)for(const e of x)null!=e&&s.textureData.set(e.id,e);const y={params:{material:m},type:"ArrayBufferView"},{vertexSpace:M,origin:g,transform:_}=l,S=[g.x,g.y,g.z??0],w={featureDataPosition:S,featureIds:[],geometries:[y]},N={attributeData:{},loadedAttributes:[]};i.projectionPromise||((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.assertIsSome)(this._worker,"SceneLayerWorker is needed to project mesh"),i.projectionPromise=this._worker.project({positions:l.vertexAttributes.position,localMatrix:_?.localMatrix,vertexSpace:M.toJSON(),origin:S,inSpatialReference:l.spatialReference.toJSON(),outSpatialReference:this._vertexSR.toJSON(),localMode:this._localMode},n));const{projected:b,original:v}=await i.projectionPromise;l.vertexAttributes.position=v;const{transformed:D,original:R}=await f(u,i,this._worker,n);l.vertexAttributes.normal=R,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(n);const{geometryBuffer:I,geometryDescriptor:j}=p(b,u.faces,D,l.vertexAttributes.uv,l.vertexAttributes.color,d);return{geometryData:w,attributeDataInfo:N,geometryBuffer:I,geometryDescriptor:j,requiredTextures:h,textureData:x,normalReferenceFrame:this._vertexSR.isGeographic?"east-north-up":"vertex-reference-frame"}}async loadAttributes(e,t,o){const r=e.numFeatures,n={};for(const{field:{name:s}}of t)n[s]=new Array(r);return n}async loadTextures(e,t,o){const r=e.id,n=this._id2Meta.get(r);if(null==n||"mesh-component"!==n.type)throw new Error(`Failed to load textures for node ${e.id} (unexpected node info)`);const s=[];for(const a of t)s.push(n.textureData.get(a.id)||null);return s}async _getMeshData(e){const t=e.version,r=this._memCache.get(t);if(null==r){if(null!=e.loadMeshPromise)return e.loadMeshPromise;const r=async(r,n)=>{const s=e.unloadedMesh.clone();try{await s.load()}catch(l){n(l)}const a=s.memoryUsage,i={loadedMesh:s,projectionPromise:null,normalsTransformPromise:null,usedMemoryInBytes:a};this._memCache.put(t,i,a,_core_MemCache_js__WEBPACK_IMPORTED_MODULE_2__.minPriority),e.loadMeshPromise=null,r(i)};return e.loadMeshPromise=new Promise(((e,t)=>r(e,t))),e.loadMeshPromise}return r}}function h(e,t){const{spatialReference:o}=e,r=[1,-1],n=[.5*e.width,.5*e.height,e.hasZ?.5*(e.zmax-e.zmin):0],s=o.isGeographic?o.metersPerUnit:1,a=e.center;let i=0;if(e.hasZ)for(let l=0;l<2;++l)for(let e=0;e<2;++e)for(let o=0;o<2;++o){const d=(a.x+r[l]*n[0]-t.x)*s,u=(a.y+r[e]*n[1]-t.y)*s,c=a.z+r[o]*n[2]-t.z;i=Math.max(d*d+u*u+c*c,i)}else for(let l=0;l<2;++l)for(let e=0;e<2;++e){const o=(a.x+r[l]*n[0]-t.x)*s,d=(a.y+r[e]*n[1]-t.y)*s;i=Math.max(o*o+d*d,i)}return (0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_10__.k)([t.x,t.y,t.z],Math.sqrt(i))}async function f(e,o,r,n){const{transform:d,vertexAttributes:u}=o.loadedMesh,c="source"===e.shading?u.normal:null;if(!(null!=c&&null!=d&&(0!==d.rotationAngle||!(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_7__.h)(d.scale,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_8__.O))))return{transformed:c,original:u.normal};if(!o.normalsTransformPromise){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.assertIsSome)(r,"SceneLayerWorker is needed to transform mesh normals");const e=(0,_chunks_mat3f64_js__WEBPACK_IMPORTED_MODULE_6__.a)();(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_5__.n)(e,d.localMatrix),o.normalsTransformPromise=r.transformNormals({normalMatrix:e,normals:c},n)}return o.normalsTransformPromise}function p(e,t,o,r,n,s){const a=1,i=t.length/3,l=3*i;let d=0,u=0,c=!1,m=0,h=!1,f=0,p=!1,y=0,w=0,N=0;d+=M,d+=M,u=d,d+=3*l*g,null!=o&&(c=!0,m=d,d+=3*l*g),null!=r&&(h=!0,f=d,d+=2*l*g),null!=n&&(p=!0,y=d,d+=4*l*_),w=d,d+=a*S,N=d,d+=2*a*M;const b=new ArrayBuffer(d),v=new Uint8Array(b);x(v,0,l),x(v,M,a);const D=new Float32Array(b,u),R=null!=o?new Float32Array(b,m):null,I=null!=r?new Float32Array(b,f):null,j=null!=n?new Uint8Array(b,y):null;for(let x=0;x<i;++x){const s=3*x;for(let a=0;a<3;++a){const i=t[s+a],l=3*i,d=9*x+3*a;if(D[d]=e[l],D[d+1]=e[l+1],D[d+2]=e[l+2],null!=R&&(R[d]=o[l],R[d+1]=o[l+1],R[d+2]=o[l+2]),null!=I){const e=2*i,t=6*x+2*a;I[t]=r[e],I[t+1]=r[e+1]}if(null!=j){const e=4*i,t=12*x+4*a;j[t]=n[e],j[t+1]=n[e+1],j[t+2]=n[e+2],j[t+3]=n[e+3]}}}x(v,w,s),x(v,w+M,s/2**32),x(v,N,0),x(v,N+M,i-1);return{geometryBuffer:b,geometryDescriptor:{isDraco:!1,isLegacy:!0,color:p,normal:c,uv0:h,uvRegion:!1,featureIndex:!0}}}function x(e,t,o){e[t]=255&o,e[t+1]=255&o>>8,e[t+2]=255&o>>16,e[t+3]=255&o>>24}function y(e){const t=e.metadata.displaySource?.source;if(null==t||!Array.isArray(t)||!t.length||t[0]instanceof File)return (0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_4__.generateUUID)();const o=t;let r="";for(const n of o)r+=n.makeHash();return r+JSON.stringify(null!=e.transform?e.transform.toJSON():"")+(e.vertexSpace.isRelative?JSON.stringify(e.vertexSpace.origin):"")}const M=4,g=4,_=1,S=8;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SFrameTask.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addCallback: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let a=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(),this.referenceCount=0,this.callbacks=new Array,this.runIndex=0}get running(){return this.callbacks.some((r=>r.running))}runTask(r){this._sort();const s=this.callbacks,t={numIndexLoading:0,numNodesLoading:0};for(let e=0;e<s.length&&!r.done;++e)s[e].priority=s[e].runTask(r,t),this.runIndex=e}_sort(){const r=this.callbacks;let s=r.length;for(let t=this.runIndex;t>0;t--){const e=r[t-1];let o=t;for(;o<r.length&&e.priority<=r[o].priority&&(o!==s||e.priority<r[o].priority);)r[o-1]=r[o],o++;r[o-1]=e,s=o-1}this.runIndex=0}add(r){this._sort(),r.priority=1/0,this.callbacks.unshift(r),this.notifyChange("running")}remove(r){(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.removeUnordered)(this.callbacks,r),this.runIndex=this.callbacks.length,this._sort(),this.notifyChange("running")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],a.prototype,"running",null),a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.i3s.I3SFrameTask")],a);class c{constructor(r,s){this.task=r,this.handle=s}}const l=new Map;function u(r,s){let t=l.get(r);if(null==t){const s=new a,e=r.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_8__.TaskPriority.I3S_CONTROLLER,s);t=new c(s,e),l.set(r,t)}return t.task.add(s),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_3__.makeHandle)((()=>{if(null==t)return;t.task.remove(s);t.task.callbacks.length>0||(l.delete(r),t.handle.remove(),t.task.destroy()),t=null}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SIndex.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SIndex: () => (/* binding */ P),
/* harmony export */   selectErrorMetric: () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _support_featureFlags_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../support/featureFlags.js */ "./node_modules/@arcgis/core/support/featureFlags.js");
/* harmony import */ var _ElevationRange_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ElevationRange.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/ElevationRange.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class b{constructor(e,t,i,s,n){this.childOffset=e,this.childCount=t,this.visibilityCache=i,this.ref=s,this.node=n,this.useAsHole=0,this.filterImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeFilterImpact.NotChecked,this.traversalState=null,this.parent=-1}}class y{constructor(e=[],t=[]){this.nodes=e,this.children=t,this.lastTraversed=0,this.numNodesWithLoadedChildren=0}}class P{get _useNodePages(){return this._pageSize>0}constructor(t,i,s,n,o,r,a,d,u,c,g,_,f,m,v){this._layer=t,this._streamDataController=s,this._clientNodeLoader=n,this._viewportQueries=o,this._logger=r,this.holeFilling=a,this._isLoaded=d,this._isReloading=u,this._isSelected=c,this._enable=g,this._needsUpdate=_,this._canRequest=f,this._computeVisibilityObb=m,this._computeNodeFiltering=v,this._dirty=!0,this._nodePages=new Map,this._clientNodePage=null,this._pageSize=0,this._rootIndex=0,this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.None,this._lodConversion=e=>e,this._isEditable=!1,this._urlPrefix="",this._loadingNodes=new Set,this._loadingPages=new Set,this._failedNodes=new Set,this._failedPages=new Set,this._indexMissing=1,this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.POSITIVE_INFINITY,this._version=S(0),this._visibilityCacheVersion=S(0),this._maxLevel=1,this._featureEstimate={estimate:0,leavesReached:!1},this._unloadedMemoryEstimate=0,this._missingPagesAndNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this._prefetchNodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this._updates=new I(this._missingPagesAndNodes),this._imModificationUncategorized=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this.ignoreServiceObb=!1,this.progressiveLoadPenalty=0,this._pageQueue=new Array,this._newPages=new Array,this.needNodeElevationRange=!1,this.layerHasModifications=!1,this._layerHasFilter=!1,this._frameNumber=0,this._isEditable=(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_5__.i3sPatchingEnabled)()&&null!=t.associatedLayer?.infoFor3D,t.serviceUpdateTimeStamp?.lastUpdate&&(this._lastUpdate=`${t.serviceUpdateTimeStamp.lastUpdate}`),this._maxLodLevel=this._viewportQueries?this._viewportQueries.maxLodLevel:1,this._init(i)}_init(e){if("page"===e.type){const t=e.rootPage;switch(this._urlPrefix=e.urlPrefix,this._pageSize=e.pageSize,e.lodMetric){case"maxScreenThreshold":this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.MaxScreenThreshold;break;case"maxScreenThresholdSQ":this._lodMetric=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.MaxScreenThreshold,this._lodConversion=z}if(this._isEditable){this._rootIndex=-1;const i=A(e.rootIndex,e.pageSize),s=t.nodes[i],n={nodes:[{index:this._rootIndex,children:[e.rootIndex],mesh:void 0,obb:s.obb,lodThreshold:s.lodThreshold}]};this._addPage(O(this._rootIndex,this._pageSize),n),this.getNode(-1).serviceObb=void 0}else this._rootIndex=e.rootIndex;this._addPage(O(e.rootIndex,this._pageSize),t),this._updateParentsAndLevel()}else if("node"===e.type){this._urlPrefix=e.urlPrefix;const t=new y;if(this._nodePages.set(0,t),this._isEditable){this._clientNodePage=new y;const t={id:"-1",version:null,mbs:e.rootNode.mbs,obb:e.rootNode.obb,sharedResource:null,geometryData:null,attributeData:null,featureData:null,children:[{id:"root",href:"../root",mbs:e.rootNode.mbs,obb:e.rootNode.obb}]};this._rootIndex=this._makeClientRefNode(new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeBase(t.id,null),-1);const i=this._validateNode(t.id,t);i&&this._addNode(i,this._rootIndex)}else this._rootIndex=this._makeRefNode(new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeBase(e.rootNode.id,null),-1);const i=this._validateNode(e.rootNode.id,e.rootNode);i&&this._addNode(i,0)}}addClientNodeToIndex(e,t){const i=-1,s=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeBase(e,t),n=this._makeClientRefNode(s,i);return this._linkChildToParentNode(i,n),this.requestUpdate(),n}removeClientNodeFromIndex(e,t,i){this._destroyClientRefNode(e,t,i),this.requestUpdate()}_loadPage(e){this._loadingPages.add(e);const i=this._urlPrefix+e;this._streamDataController.request(i,"json").then((t=>{this._pageQueue.push({pageIndex:e,page:t})})).catch((i=>{this._loadingPages.delete(e),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isAbortError)(i)||(this._failedPages.add(e),this._logger.error("#loadPage()",this._layer,`Error when loading page ${e}`,i))}))}_addQueuedPages(e){for(;this._pageQueue.length>0&&!e.done;){const{pageIndex:t,page:i}=this._pageQueue.shift();this._addPage(t,i),this._loadingPages.delete(t),e.madeProgress(),this.needNodeElevationRange&&this._newPages.push(t)}this._updateParentsAndLevel()}_invalidateElevationRangeForNewPages(e){if(this.needNodeElevationRange)for(;this._newPages.length>0&&!e.done;){const e=this._nodePages.get(this._newPages.shift());if(null==e)continue;const t=e.nodes;for(let i=0;i<this._pageSize;i++){let e=t[i].parent;for(;null!=e&&e!==this._rootIndex;){const t=this.getNode(e);t&&!Number.isNaN(t?.elevationRangeMin)&&(t.invalidateElevationRange(),this.invalidateBoundingVolumeCache(e)),e=this.getParentIndex(e)}}}}_addPage(e,t){const s=[],o=[],r=t.nodes.map(((t,r)=>{const a=s.length,l=t.children?t.children.length:0;o.push(this._rootIndex);for(let e=0;e<l;e++)s.push(t.children[e]);const d=`${t.index}`,h=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.clone)(t.obb),u=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.f)(h.center[0],h.center[1],h.center[2],(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_2__.l)(h.halfSize)),g=t.mesh?.attribute,_=t.mesh?.geometry,f=t.mesh?.material,m={hasSharedResource:!1,isEmpty:null==_,attributes:null!=g?.resource?`${g.resource}`:void 0,geometry:null!=_?.resource?`${_.resource}`:void 0,texture:null!=f?.resource?`${f.resource}`:void 0,geometryDefinition:_?_.definition:-1,materialDefinition:f?f.definition:-1},v=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.Node(d,V(r,e,this._pageSize),u,l,0,m,this._lastUpdate,this._lodMetric,this._lodConversion(t.lodThreshold),_?_.featureCount:null);return v.serviceObb=h,v.visibilityObb=this._computeVisibilityObb(v),v.vertexCount=_?_.vertexCount:0,new b(a,l,w(this._visibilityCacheVersion),null,v)})),a=new y(r,s);-1===e?this._clientNodePage=a:this._nodePages.set(e,a)}_updateParentsAndLevel(){const e=new Array,t=(t,i,s)=>{const n=this._getPage(t);if(null!=n){const o=A(t,this._pageSize),r=n.nodes[o];r.parent=null!=i?i:-1;const a=r.node;null!=a&&(a.level=s,e.push(t))}};for(t(this._rootIndex,null,0);e.length;){const i=e.pop(),s=this.getNode(i);if(null!=s)for(let e=0;e<s.childCount;e++){t(this.getChildIndex(s.index,e),i,s.level+1),this._maxLevel=Math.max(this._maxLevel,s.level+1)}}}_getPage(e){const t=O(e,this._pageSize);return t<0?this._clientNodePage:this._nodePages.get(t)}_getNodeInternal(e){const t=this._getPage(e);return null==t?null:(t.lastTraversed=this._frameNumber,t.nodes[A(e,this._pageSize)])}_addNode(e,t){null!=e.children&&this.populateChildren(t,e.children);const i=this.getParent(t),s=null!=i?i.level+1:0;this._maxLevel=Math.max(this._maxLevel,e.children?s+1:s);const{lodMetric:n,maxError:o}=k(e.lodSelection),r=this._getNodeInternal(t);return r.node=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.Node(e.id,t,e.mbs,r.childCount,s,e.resources,e.version,n,o,e.numFeatures),e.obb&&(r.node.serviceObb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.clone)(e.obb)),r.node.visibilityObb=this._computeVisibilityObb(r.node),null!=r.ref&&(null==r.ref.mbs&&(r.ref.mbs=e.mbs),r.node.renderMbs=r.ref.renderMbs,r.node.serviceObbInRenderSR=r.ref.serviceObbInRenderSR,r.ref.visibilityObb=r.node.visibilityObb),r.node}_makeRefNode(e,t){const i=this._nodePages.get(0);if(t<-1)return this._makeClientRefNode(e,t);if(null==i)return-1;const s=i.nodes.length,n=new b(0,0,w(this._visibilityCacheVersion),e,null);return i.nodes.push(n),n.parent=t,(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(e.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(e.serviceObbInRenderSR),s}_makeClientRefNode(e,t){const i=this._clientNodePage;if(null==i)return-1;if(t>=0)throw new Error("I3SIndex::client side nodes can not be made children of service side nodes.");const s=-(i.nodes.length+1),n=new b(0,0,w(this._visibilityCacheVersion),e,null);return i.nodes.push(n),n.parent=t,(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(e.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(e.serviceObbInRenderSR),s}_linkChildToParentNode(e,t){const i=this._clientNodePage;if(null==i||e>=0)return;const s=A(e,this._pageSize),n=A(t,this._pageSize),o=i.nodes[s],r=o.childOffset;i.children.splice(o.childOffset+o.childCount,0,t);const a=1;o.childCount+=a,null!=o.node&&(o.node.childCount+=a);for(const l of i.nodes)l.childOffset>r&&(l.childOffset+=a);i.nodes[n].parent=e,this._updateParentBoundingInformation(e)}_destroyClientRefNode(e,t,i){const s=this._clientNodePage;if(null==s)return;const n=this.getParentIndex(e);if(null==n)return;const o=new Set,r=new Map,a=e=>{const i=A(e,this._pageSize),n=s.nodes[i];if(n.childCount>0)for(let t=n.childOffset;t<n.childOffset+n.childCount;++t)a(s.children[t]);const r=n.node?.id??n.ref?.id;if(null==r)throw new Error("Node has no id");t(r,e),o.add(n)};a(e);const l=s.nodes,d=s.children,h=s.nodes.map((()=>-1)),u=[],c=[];for(let g=0;g<l.length;++g){const e=l[g];if(o.has(e))continue;const t=u.length,s=V(g,-1,this._pageSize),n=V(t,-1,this._pageSize);if(e.node&&(e.node.index=n),h[g]=n,u.push(e),s!==n){const t=e.node?.id??e.ref?.id;if(null==t)throw new Error("Node has no id");i(t,s,n),r.set(s,n)}}for(let g=0;g<u.length;++g){const e=V(g,-1,this._pageSize),t=u[g],i=c.length;for(let s=t.childOffset;s<t.childOffset+t.childCount;++s){const t=d[s];if(t>=0)c.push(t);else{const i=A(t,this._pageSize),s=l[i];if(o.has(s))continue;const n=h[i];c.push(n),s.parent=e}}t.childOffset=i,t.childCount=c.length-i,t.node&&(t.node.childCount=t.childCount)}s.nodes=u,s.children=c,this._updateParentBoundingInformation(h[A(n,this._pageSize)])}_updateParentBoundingInformation(e){let t=e;do{let e=null;const i=this._clientNodeLoader.indexSR,n=this._clientNodeLoader.renderSR,l=this._getNodeInternal(t);if(null==l)return;for(let a=0;a<l.childCount;a++){const l=this.getChildIndex(t,a),d=this._getNodeInternal(l),h=null!=d?d.ref||d.node:null;if(null!=h&&h.mbs[3]>0)if(null==e)e=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.h)(h.mbs,D);else{const t=T,o=Q,a=U;(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(h.mbs,i,t,n),(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(e,i,o,n),(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.u)(t,o,a),(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_3__.projectBoundingSphere)(a,n,e,i)}}const d=l.ref||l.node;null!=d&&(null!=e?d.mbs=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.h)(e,null!=d.mbs?d.mbs:(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)()):(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(d.mbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(d.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(d.serviceObbInRenderSR),d.geometryObb=null),this.invalidateNodeVisibilityCacheInternal(l),t=this.getParentIndex(t)}while(null!=t)}populateChildren(e,t){const i=this._getNodeInternal(e),s=this._getPage(e);i.childOffset=s.children.length,i.childCount=t.length;for(let n=0;n<t.length;n++){const i=this._makeRefNode(t[n],e);s.children.push(i)}}getNode(e){const t=this._getNodeInternal(e);return null!=t?t.node:null}getIndexById(e){let t;return this._forAllNodes(((i,s)=>{(null!=i.node&&i.node.id===e||null!=i.ref&&i.ref.id===e)&&(t=s)})),t}getNodeById(e){const t=this.getIndexById(e);return null!=t&&t>=0?this.getNode(t):null}getChildIndex(e,t){const i=this._getPage(e);if(null==i)return-1;const s=i.nodes[A(e,this._pageSize)];return i.children[s.childOffset+t]}getParentIndex(e){const t=this._getPage(e);return null!=t&&e!==this._rootIndex?t.nodes[A(e,this._pageSize)].parent:null}getParent(e){const t=this.getParentIndex(e);return null!=t?this.getNode(t):null}isLeaf(e){const t=this._getNodeInternal(e);return null!=t&&0===t.childCount}get rootNode(){return this.getNode(this._rootIndex)}get isEditable(){return this._isEditable}removeAllGeometryObbs(){this._forAllNodes((e=>{null!=e.node&&(e.node.geometryObb=null)}))}invalidateVisibilityCache(){this._visibilityCacheVersion=S(this._visibilityCacheVersion)}invalidateNodeVisibilityCache(e){const t=this._getNodeInternal(e);null!=t&&this.invalidateNodeVisibilityCacheInternal(t)}invalidateNodeVisibilityCacheInternal(e){e.visibilityCache=w(this._visibilityCacheVersion)}invalidateBoundingVolumeCache(e){const t=this._getNodeInternal(e);null!=t&&(C(t),this.invalidateNodeVisibilityCacheInternal(t))}updateElevationChanged(e){const t=this._getNodeInternal(e);if(null==t)return;if(!this.needNodeElevationRange)return void this.invalidateBoundingVolumeCache(e);const i=null!=t.node?t.node:t.ref;null!=i&&i.invalidateElevationRange()}invalidateGeometryVisibility(e){const t=this._getNodeInternal(e);null!=t?.node&&(t.node.geometryObb=null,(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(t.node.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(t.node.serviceObbInRenderSR))}invalidateVisibilityObbs(){null!=this.rootNode&&this.traverse(this.rootNode,(e=>(e.visibilityObb=this._computeVisibilityObb(e),e.geometryObb=null,!0)))}_updateElevationRange(e){this._updateElevationRangeInternal(e,null)}_updateElevationRangeInternal(e,t){const i=this._getNodeInternal(e);if(!i)return!1;const s=i?.node??i?.ref;if(!s)return!1;const n=s.elevationRangeMin;if(!Number.isNaN(n))return (0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_6__.expandElevationRange)(t,s),!0;const o={elevationRangeMin:1/0,elevationRangeMax:-1/0};let r=!1;for(let l=0;l<i.childCount;l++){const t=this.getChildIndex(e,l);this._updateElevationRangeInternal(t,o)||(r=!0)}if(0===i.childCount||r){const e=!i.node?.resources.isEmpty;this._viewportQueries.expandElevationRange(s,e,o)}const a=s.elevationRangeMax;return Number.isNaN(n)||n!==o.elevationRangeMin||a!==o.elevationRangeMax?(i.node&&(i.node.elevationRangeMin=o.elevationRangeMin,i.node.elevationRangeMax=o.elevationRangeMax),i.ref&&(i.ref.elevationRangeMin=o.elevationRangeMin,i.ref.elevationRangeMax=o.elevationRangeMax),this.invalidateBoundingVolumeCache(e),(0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_6__.expandElevationRange)(t,s),!0):((0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_6__.expandElevationRange)(t,s),!0)}isNodeVisible(e){const t=this._getNodeInternal(e);if(null==t||null!=t.ref&&!t.ref.mbs)return!0;if(this.needNodeElevationRange&&this._updateElevationRange(e),!M(t.visibilityCache,this._visibilityCacheVersion)){const e=t.node,i=!e||t.ref&&!e.visibilityObb?t.ref??null:e;if(this._layerHasFilter&&this._computeNodeFiltering&&(null!=e||null!=t.ref)&&t.filterImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeFilterImpact.NotChecked){const i=null!=e?e.mbs:null!=t.ref?t.ref.mbs:null;t.filterImpact=null!=i?this._computeNodeFiltering(i):_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeFilterImpact.Unmodified}const s=null!=e&&t.filterImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeFilterImpact.Culled,n=!(null!=e&&e.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.Culled)&&(!i||this._viewportQueries.isNodeVisible(i))&&!s;return t.visibilityCache=R(n,this._visibilityCacheVersion),n}return E(t.visibilityCache)}isGeometryVisible(e){if(!this.isNodeVisible(e))return!1;const t=this._getNodeInternal(e);return!!(null==t?.node?.geometryObb||this.layerHasModifications&&t.node.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.NotChecked)||this._viewportQueries.isGeometryVisible(t.node)}_traverseCoverage(e,t,i,s,n){const o=this._getPage(e);if(null==o||0===t.childCount)return;const r=t.childOffset+t.childCount,a=new Array;for(let l=t.childOffset;l<r;++l){const e=o.children[l],t=this._getNodeInternal(e);null!=t?.node&&this.isGeometryVisible(e)&&a.push(t)}s/=a.length;for(const l of a){const e=l.node.index;this._isLoaded(e)||this._isReloading(e)?(n.delta=Math.max(n.delta,i),n.coverage+=s):this._traverseCoverage(e,l,i+1,s,n)}}useNodeAsHole(e){if("off"===this.holeFilling)return!1;const t=this._getNodeInternal(e);if(null==t)return!1;if("always"===this.holeFilling)return!0;if(M(t.useAsHole,this._version))return E(t.useAsHole);const i={delta:0,coverage:0};this._traverseCoverage(e,t,0,1,i);const s=i.delta*i.coverage<=.5;return t.useAsHole=R(s,this._version),s}get maxLevel(){return this._maxLevel}get dirty(){return this._dirty}destroy(){this._updates.add.prune(),this._updates.update.prune()}requestUpdate(){this._dirty=!0,this._indexMissing=1,this._version=S(this._version)}imModificationsChanged(e){this.layerHasModifications=e,this._forAllNodes((({node:e})=>{null!=e&&(e.imModificationImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.NotChecked,e.visibilityObb=this._computeVisibilityObb(e),e.hasModifications&&this.invalidateGeometryVisibility(e.index))})),this.invalidateVisibilityCache()}layerFilterChanged(e){this._layerHasFilter=e,this._forAllNodes((e=>{if(null!=e){e.filterImpact=_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeFilterImpact.NotChecked;const t=e.node;null!=t&&this.invalidateNodeVisibilityCache(t.index)}})),this.invalidateVisibilityCache()}update(e,t,i){if(!this._dirty)return;this._pageQueue.length>0&&this._addQueuedPages(t),this._invalidateElevationRangeForNewPages(t),this._maxUnloadedPrio=Number.NEGATIVE_INFINITY,this._maxProcessingPrio=Number.NEGATIVE_INFINITY,this._missingPagesAndNodes.clear(),this._prefetchNodes.clear(),this._updates.reset(e),x.clear();let s=!0;const n=new F,o=new F,r=this._imModificationUncategorized;r.clear();const a=new Set,l=(l,d,h)=>{const u=O(l,this._pageSize);if(a.add(u),null==d){let e=this._entryPriority(l);return e===1/0&&(e=this._entryPriority(h)),x.set(u,Math.max(e,x.get(u)||0)),this._loadingPages.has(u)||this._failedPages.has(u)||this._missingPagesAndNodes.push(u),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const c=d.node;if(this._updateNodeFeatureEstimate(c,o),null==c){const e=this._entryPriority(l);return this._loadingNodes.has(l)||this._failedNodes.has(l)||(this._missingPagesAndNodes.push(l),x.set(l,e)),void(this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e))}const g=this._getPage(l);if(0===this._missingPagesAndNodes.length&&!this._useNodePages)for(let e=0;e<d.childCount;e++){const t=g.children[d.childOffset+e],i=this._getNodeInternal(t);null==i||i.node||this._loadingNodes.has(t)||this._failedNodes.has(t)||(x.set(t,this._entryPriority(t)),this._prefetchNodes.push(t))}if(c.failed||c.resources.isEmpty)return void(s&&d.childCount>0&&this._isSelected(c)&&(s=!1));if(this._isLoaded(l)){if(n.known+=c.memory,++n.knownNodes,this._isSelected(c)?d.childCount>0&&(s=!1):(n.unremoved+=c.memory,s=!1),this._needsUpdate(c)){const e=this._entryPriority(l);x.set(l,e),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,e),this._updates.update.push(l)}return}if(c.memory&&(n.known+=c.memory,++n.knownNodes),!this._isSelected(c))return void(this._isReloading(l)&&this._updates.remove.push(l));if(d.childCount>0&&(s=!1),c.memory?(n.missing+=c.memory,n.known+=c.memory,++n.knownNodes):++n.missingNodes,e.includes(c.index))return this._maxProcessingPrio=Math.max(this._maxProcessingPrio,this._entryPriority(l)),void(this._updates.cancel=this._updates.cancel.filter((e=>e!==c.index)));if(!t.done&&this._enable(c))return void t.madeProgress();const f=this._entryPriority(l);x.set(l,f),this._maxProcessingPrio=Math.max(this._maxProcessingPrio,f),this._updates.add.push(l),this.layerHasModifications&&i&&null!=c&&c.imModificationImpact===_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.NotChecked&&r.push(l)};this.traverseVisible(l),this._frameNumber++,this._missingPagesAndNodes.sort(((e,t)=>e-t)),this._missingPagesAndNodes.filterInPlace(((e,t)=>t<1||this._missingPagesAndNodes.data[t-1]!==e)),this._missingPagesAndNodes.sort(((e,t)=>x.get(e)-x.get(t))),this._missingPagesAndNodes.length>0&&(this._maxUnloadedPrio=x.get(this._missingPagesAndNodes.back()),this._prefetchNodes.clear());const d=this._updates.add;d.length>0&&this.layerHasModifications&&(r.length>0&&i?.(r),d.filterInPlace((e=>{const t=this._getNodeInternal(e),i=null==t?.node||t.node.imModificationImpact!==_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeIMModificationImpact.Culled;return i||this.invalidateNodeVisibilityCache(e),i}))),this._unloadedMemoryEstimate=n.missing-n.unremoved,n.knownNodes>3&&n.missingNodes>0&&(this._unloadedMemoryEstimate+=n.known/n.knownNodes*n.missingNodes),this._unloadedMemoryEstimate=.8*Math.max(0,this._unloadedMemoryEstimate),this._featureEstimate.estimate=this._computeFeatureEstimate(o),this._featureEstimate.leavesReached=s,this._updates.add.filterInPlace((e=>x.get(e)>=this._maxUnloadedPrio)).sort(((e,t)=>x.get(e)-x.get(t))),this._updates.update.sort(((e,t)=>x.get(e)-x.get(t))),this._indexMissing=this._loadingPages.size+this._loadingNodes.size+this._missingPagesAndNodes.length,this._dirty=this._indexMissing>0,x.clear()}checkFeatureTarget(e,t){const i=this._viewportQueries.updateScreenSpaceErrorBias(t);let s=t,n=t,o=i,r=10;for(;r--;){const i=new F;this._updateFeatureEstimate(s,i);if(this._computeFeatureEstimate(i)<=e){if(s>=t||i.missingNodes>0||0===r)break;o=s,s=.5*(s+n)}else n=s,s=.5*(s+o)}return this._version=S(this._version),this._viewportQueries.updateScreenSpaceErrorBias(i),Math.min(t,s)}_updateFeatureEstimate(e,t){this._version=S(this._version),this._viewportQueries.updateScreenSpaceErrorBias(e),this.traverseVisible(((e,i)=>this._updateNodeFeatureEstimate(null!=i?i.node:void 0,t)))}_updateNodeFeatureEstimate(e,t){null==e||e.failed||null==e.numFeatures||this._isSelected(e)&&(null!=e.numFeatures?(t.missing+=e.numFeatures,t.known+=e.numFeatures,++t.knownNodes):++t.missingNodes)}_computeFeatureEstimate(e){let t=e.known-e.unremoved;return e.knownNodes>3&&e.missingNodes>0&&(t+=e.known/e.knownNodes*e.missingNodes),Math.max(0,t)}load(){return this._load(this._missingPagesAndNodes)}prefetch(){return this._prefetchNodes.sort(((e,t)=>x.get(e)-x.get(t))),this._load(this._prefetchNodes)}_load(e){if(0===e.length||!this._canRequest())return!1;for(;e.length>0&&this._canRequest();){const t=e.pop();this._useNodePages&&t>=0?this._loadPage(t):this._loadNode(t)}return!0}get isLoading(){return this._indexMissing>0}get isPrefetching(){return this._prefetchNodes.length>0}get indexLoading(){return this._loadingPages.size+this._loadingNodes.size}get indexMissing(){return this._indexMissing}get unloadedMemoryEstimate(){return this._unloadedMemoryEstimate}get updates(){return this._updates}get featureEstimate(){return this._featureEstimate}get maxPriority(){return Math.max(this._maxProcessingPrio,this._maxUnloadedPrio)}nodeTraversalState(e){if(null==e)return null;const t=e.index,i=this._getNodeInternal(t);if(!i)return null;let s=i?.traversalState;if(s&&M(s.version,this._version))return s;const n=this._viewportQueries.getLodLevel(e),o=this._viewportQueries.hasLOD(e);let r=!0;if(o){const e=this.getParentIndex(t);if(null!=e){const t=this._getNodeInternal(e),i=t?.traversalState;r=!!i&&n>i.lodLevel}else r=n>0}else r=0===e.childCount;return s?(s.lodLevel=n,s.isChosen=r,s.version=R(!0,this._version),s):(s=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeTraversalState(o,r,n,R(!0,this._version)),i.traversalState=s,s)}async _loadNode(e){this._loadingNodes.add(e);const i=this._getNodeInternal(e).ref;if(null==i)return void this._failedNodes.add(e);const s=i.id,n=this._urlPrefix+s,o=()=>{this._loadingNodes.delete(e),0===this._missingPagesAndNodes.length&&0===this._loadingNodes.size&&this.requestUpdate()};let r=null;try{r=e>=0?await this._streamDataController.request(n,"json"):await this._clientNodeLoader.loadNodeJSON(s)}catch(d){return o(),void((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isAbortError)(d)||(this._logger.error("#loadNode()",this._layer,"Error loading node: "+n),this._failedNodes.add(e)))}o();const a=this._validateNode(s,r);if(null==a)return;a.obb&&this.invalidateNodeVisibilityCache(e);const l=this._addNode(a,e);this.nodeTraversalState(l)}_validateNode(e,t){if(null==t||"object"!=typeof t||t.id!==e)return this._logger.error("#validateNode()",this._layer,`Invalid node. Wrong type or wrong id "${e}"`),null;if(!Array.isArray(t.mbs))return this._logger.error("#validateNode()",this._layer,`Invalid bounding volume on node ${e}.`),null;t.sharedResource&&"./shared"!==t.sharedResource.href&&"./shared/"!==t.sharedResource.href&&this._logger.warn("#validateNode()",this._layer,`Invalid shared resource href on node "${e}"`);const i=t.geometryData;null==i||Array.isArray(i)&&0===i.length||Array.isArray(i)&&1===i.length&&"./geometries/0"===i[0].href||this._logger.warn("#validateNode()",this._layer,`Invalid geometry data on node "${e}"`);const s=t.attributeData,n=this._layer.attributeStorageInfo;null==s||Array.isArray(s)&&!s.some(((e,t)=>e.href!==`./attributes/${n?.[t]?.key??`f_${t}`}/0`))||this._logger.warn("#validateNode()",this._layer,`Invalid attribute data on node "${e}"`),t.featureData&&t.featureData.length>1&&this._logger.warn("#validateNode()",this._layer,`Node ${e} has ${t.featureData.length} bundles. Only the first bundle will be loaded.`);const o=t.hasOwnProperty("obb")&&!this.ignoreServiceObb?t.obb:null,r=t.featureData&&1===t.featureData.length&&t.featureData[0].featureRange?t.featureData[0].featureRange[1]-t.featureData[0].featureRange[0]+1:void 0,a=t=>{if(null==t)return null;const i=t=>this._logger.error("#validateNode()",this._layer,`Invalid node reference on node ${e}: ${t}`);if("number"==typeof t.id)i(`id ${t.id} is a number instead of a string.`);else if("string"!=typeof t.id||!Array.isArray(t.mbs))return i("Missing or invalid id."),null;if(!Array.isArray(t.mbs))return i(`Invalid bounding volume on reference ${t.id}.`),null;t.href&&t.href!=="../"+t.id&&this._logger.error("#validateNode()",this._layer,`Invalid node href on node "${e}"`);const s=t.hasOwnProperty("obb")&&!this.ignoreServiceObb?t.obb:null,n=new _I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.NodeBase(`${t.id}`,t.mbs);return n.serviceObb=s,n.visibilityObb=this._computeVisibilityObb(n),n},l=Array.isArray(t.children)?t.children.map(a).filter((e=>null!=e)):null,d=t.featureData?.length??!1,h=!0===t.isEmpty;return{id:e,mbs:t.mbs,obb:o,children:l,resources:{isEmpty:!d&&h,hasSharedResource:null!=t.sharedResource,attributes:t.attributeData?e:void 0,texture:t.textureData&&t.textureData.length>0?e:void 0,geometry:null!=t.geometryData?e:void 0},version:"string"==typeof t.version?t.version:null,lodSelection:Array.isArray(t.lodSelection)?t.lodSelection:null,numFeatures:r}}resetFailedNodes(){this._failedNodes.clear(),this._failedPages.clear(),this._forAllNodes((e=>{null!=e.node&&(e.node.failed=!1)}))}_entryPriority(e){const t=this._getNodeInternal(e),i=this.getParentIndex(e);if(null==t||null==i&&null==t.node)return null==i?1/0:this._entryPriority(i);let s=0;if(t.node&&null!=i){const e=this._getNodeInternal(i).traversalState;null!=e&&(s=e.lodLevel)}let n=this.progressiveLoadPenalty;for(let r=e;null!=r;r=this.getParentIndex(r))if(this._isLoaded(r)){n=0;break}const o=null!=t.ref?this._viewportQueries.distToPOI(t.ref):null!=t.node?this._viewportQueries.distToPOI(t.node):0;return-o-s*(o+this.progressiveLoadPenalty)+n}traverseVisible(e){const t=this._getNodeInternal(this._rootIndex);null!=t?this._traverseVisible(this._rootIndex,null,t,e):e(this._rootIndex,null,null)}_traverseVisible(e,t,i,s){if(i.node&&0===i.childCount)return void(this.isGeometryVisible(e)&&s(e,i,t));if(!this.isNodeVisible(e))return;if(s(e,i,t),null==i.node)return;const n=this.nodeTraversalState(i.node);if(n?.nodeHasLOD&&n.lodLevel===this._maxLodLevel)return;const o=this._getPage(e);for(let r=0;r<i.childCount;r++){const t=o.children[i.childOffset+r],n=this._getNodeInternal(t);n?this._traverseVisible(t,e,n,s):s(t,null,e)}}traverse(e,t){t(e)&&this.traverseChildren(e,t)}traverseChildren(e,t){const i=e.index,s=this._getNodeInternal(i);null!=s&&this._traverseChildren(i,s,t)}_traverseChildren(e,t,i){const s=this._getPage(e);if(null==s)return;const n=t.childOffset+t.childCount;for(let o=t.childOffset;o<n;++o){const e=s.children[o],t=this._getNodeInternal(e);null!=t?.node&&i(t.node)&&this._traverseChildren(e,t,i)}}updateChildrenLoaded(e,t){let i=this.getNode(e);for(;null!=i;){const e=i.childrenLoaded,s=e+t;i.childrenLoaded=s;const n=0===e?1:0===s?-1:0,o=i.index;if(0!==n){this._getPage(o).numNodesWithLoadedChildren+=n}i=this.getParent(o)}}checkChildrenLoadedInvariant(){if(null==this.rootNode)return!0;const e=[],t=i=>{let s=this._isLoaded(i.index)||this._isReloading(i.index)?1:0;return this.traverseChildren(i,(e=>(s+=t(e),!1))),i.childrenLoaded!==s&&e.push(i.index),s};return t(this.rootNode),e.length&&this._logger.error("childrenLoaded invariant broken at following nodes: "+e.join(",")),e.length>0}updateStats(e){if(this._updates.add.length>0&&(e.nodes+=" + "+this._updates.add.length),e.index=this._nodePages.size*(this._pageSize||1)+(this._clientNodePage?.nodes.length??0),e.prio=this._maxProcessingPrio,(this._indexMissing||this._prefetchNodes.length>0)&&(e.index+=" + "+this._indexMissing||0),this._featureEstimate.estimate){const t=this._featureEstimate.estimate-e.features;t>0?e.features+=" + "+t:t<0&&(e.features+=" - "+-t)}}updateElevationInfo(e,t){this.needNodeElevationRange=t&&!!e&&("relative-to-ground"===e.mode||"on-the-ground"===e.mode),this._viewportQueries.updateElevationInfo(e),this.invalidateAllElevationRanges()}invalidateAllElevationRanges(){this._forAllNodes((e=>{C(e),null!=e.node&&e.node.invalidateElevationRange(),null!=e.ref&&e.ref.invalidateElevationRange()}))}_forAllNodes(e){if(null!=this._clientNodePage){const t=this._clientNodePage;for(let i=0;i<t.nodes.length;i++)e(t.nodes[i],-(i+1))}for(const[t,i]of this._nodePages){const s=t*this._pageSize;for(let t=0;t<i.nodes.length;t++)e(i.nodes[t],s+t)}}clearCaches(){if(this._useNodePages){const e=this._nodePages,t=new Set;this.traverseVisible((e=>t.add(O(e,this._pageSize))));for(const[i,s]of e)if(0!==s.numNodesWithLoadedChildren||t.has(i))for(const e of s.nodes)e.traversalState=null;else this._deleteNodePage(i)}}_deleteNodePage(e){this._nodePages.delete(e)}get test(){return{addNode:(e,t)=>this._addNode(e,t),getNodeInternal:e=>this._getNodeInternal(e),getPageIndex:e=>O(e,this._pageSize),getIndexWithinPage:e=>A(e,this._pageSize),getNodePage:e=>e<0?this._clientNodePage:this._nodePages.get(e),getChildIndices:e=>{const t=this._getNodeInternal(e),i=this._getPage(e);if(null==t||null==i)return[];const s=[];for(let n=t.childOffset;n<t.childOffset+t.childCount;++n)s.push(i.children[n]);return s},rootIndex:this._rootIndex,clientNodePage:this._clientNodePage,nodePages:this._nodePages}}}const x=new Map;class I{constructor(t){this.missing=t,this.update=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this.add=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this.remove=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null}),this.cancel=[]}reset(e){this.add.clear(),this.update.clear(),this.cancel=e}}function C(e){null!=e.node&&((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(e.node.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(e.node.serviceObbInRenderSR)),null!=e.ref&&((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateMbs)(e.ref.renderMbs),(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.invalidateObb)(e.ref.serviceObbInRenderSR))}function w(e){return (0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.addWraparound)(e,-2)}function S(e){return (0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.addWraparound)(e,2)}function R(e,t){return t+(e?1:0)}function M(e,t){return(-2&e)===t}function E(e){return 1==(1&e)}function O(e,t){return e<0?-1:t>0?e/t|0:0}function A(e,t){return e<0?-e-1:0===t?e:e%t}function V(e,t,i){return-1===t?-(e+1):0===i?e:t*i+e}const L=[["maxScreenThreshold",_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.MaxScreenThreshold],["screenSpaceRelative",_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.ScreenSpaceRelative],["removedFeatureDiameter",_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.RemovedFeatureDiameter],["distanceRangeFromDefaultCamera",_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.DistanceRangeFromDefaultCamera]];function k(e){if(e)for(let t=0;t<e.length;t++)for(const i of L)if(i[0]===e[t].metricType)return{lodMetric:i[1],maxError:e[t].maxError};return{lodMetric:_I3SNode_js__WEBPACK_IMPORTED_MODULE_7__.LodMetric.None,maxError:0}}class F{constructor(){this.known=0,this.knownNodes=0,this.missing=0,this.missingNodes=0,this.unremoved=0}}function z(e){return Math.sqrt(e*(4/Math.PI))}const D=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),T=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),Q=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)(),U=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_4__.c)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SLodHandling.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../support/I3SLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(e){this._layerView=e,this._lodGlobalDirty=!1}startNodeLoading(e,i,o,s){this._maxLodLevel=s.maxLodLevel,this._index=o,this._isNodeInScaleBounds=e,this._removeNodes=i}shouldLoadNode(e){if(null==e)return!1;const i=this._index.nodeTraversalState(e);return!!this._isChosenMaxLOD(i)||!!i.isChosen&&this._childrenRequireLoading(e)}setLodGlobalDirty(){this._lodGlobalDirty=!0}get requiresLODGlobalHandling(){return null!=this._index&&!0===this._lodGlobalDirty}lodGlobalHandling(e){if(!this.requiresLODGlobalHandling)return!1;this._lodGlobalDirty=!1;const i=this._layerView.view.resourceController.memoryController.usedMemory,o=Math.max(0,Math.floor(10*(i-1)));d.clear(),this._lodGlobalHandling(this._index.rootNode,o,!1,!!this._layerView.nodeCrossfadingEnabled);const s=d.length;this._removeNodes(d,e);const t=d.length<s;return 0!==d.length&&(this._lodGlobalDirty=!0),d.clear(),t}_lodGlobalHandling(e,s,t,l){if(null==e)return!1;const r=e.index,n=this._index,a=this._layerView,h=n.nodeTraversalState(e),u=this._isChosenMaxLOD(h),_=e.resources.isEmpty;if(u&&_)return e.childrenLoaded>0&&this._removeChildrenRecursive(e),!0;const c=a.isNodeLoaded(r);if(l&&c&&u){const i=!t&&this.hasNoVisibleChildren(e);a.fadeNode(r,_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn,!i)}const x=c&&(!a.isNodeFullyFadedIn||a.isNodeFullyFadedIn(r));if(c&&(a.updateNodeState(r,u?_I3SNode_js__WEBPACK_IMPORTED_MODULE_1__.NodeState.Leaf:_I3SNode_js__WEBPACK_IMPORTED_MODULE_1__.NodeState.Hole),u))return x&&this._removeChildrenRecursive(e),x;const L=e.childCount>0;let y=L;if(L)for(let i=0;i<e.childCount;i++){const e=n.getChildIndex(r,i),o=n.getNode(e);if(null!=o){!(!n.isGeometryVisible(e)||this._lodGlobalHandling(o,s,t||x,l))&&this._isNodeInScaleBounds(o)&&(y=!1)}else n.isNodeVisible(e)&&(y=!1)}const N=c&&!u&&(y||d.length<s);N&&d.push(r),!l||N||!c||t||y||a.fadeNode(r,_support_I3SLayerView_js__WEBPACK_IMPORTED_MODULE_2__.FadeDirection.FadeIn,!1);const m=e.resources.isEmpty;return y||x&&!N||m}_removeChildrenRecursive(e){this._index.traverseChildren(e,(e=>((this._layerView.isNodeLoaded(e.index)||this._layerView.isNodeReloading(e.index))&&d.push(e.index),e.childrenLoaded>0)))}hasNoVisibleChildren(e){let i=!0;return this._index.traverseChildren(e,(e=>!(!i||!this._index.isNodeVisible(e.index))&&(this._layerView.isNodeLoaded(e.index)?(i=!1,!1):e.childrenLoaded>0))),i}_childrenRequireLoading(e){let i=!1,o=!0;return this._index.traverseChildren(e,(e=>{if(!o||!this._index.isNodeVisible(e.index))return!1;const s=this._index.nodeTraversalState(e);return this._isChosenMaxLOD(s)&&this._index.isGeometryVisible(e.index)&&(i=!0),this._layerView.isNodeLoaded(e.index)?(o=!1,!1):e.childrenLoaded>0})),o&&i}_isChosenMaxLOD(e){return e.isChosen&&(!e.nodeHasLOD||e.lodLevel===this._maxLodLevel)}}const d=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({deallocator:null});


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   configureMaterial: () => (/* binding */ S),
/* harmony export */   createTexture: () => (/* binding */ F),
/* harmony export */   defaultMaterial: () => (/* binding */ b),
/* harmony export */   getMaterialAndTextures: () => (/* binding */ g),
/* harmony export */   getMaterialAndTexturesFromShared: () => (/* binding */ x),
/* harmony export */   getSupportedEncodings: () => (/* binding */ M),
/* harmony export */   selectEncoding: () => (/* binding */ D)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../webgl-engine/core/material/RenderTexture.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js");
/* harmony import */ var _webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/util/AlphaCutoff.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js");
/* harmony import */ var _webgl_engine_core_shaderLibrary_util_EllipsoidMode_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/util/EllipsoidMode.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/EllipsoidMode.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/* harmony import */ var _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl-engine/lib/Texture.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Texture.js");
/* harmony import */ var _webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../webgl-engine/materials/pbrUtils.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/materials/pbrUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function g(e,o){const r=new Map,s=(e,o)=>{if(null==e)return-1;const a=r.get(e.id);if(a)return a.usage|=o,a.id;const s=r.size;return r.set(e.id,{id:s,usage:o}),s},t=o.pbrMetallicRoughness,l=t?.baseColorFactor,i=o.emissiveFactor,u=(0,_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.useSchematicPBR)({normalTexture:o.normalTexture,emissiveTexture:o.emissiveTexture,emissiveFactor:o.emissiveFactor,occlusionTexture:o.occlusionTexture,metallicRoughnessTexture:t?.metallicRoughnessTexture,metallicFactor:t?.metallicFactor,roughnessFactor:t?.roughnessFactor}),p=u?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultSchematicMRRFactors[0]:t?.metallicFactor??_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultAdvancedMRRFactors[0],g=u?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultSchematicMRRFactors[1]:t?.roughnessFactor??_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultAdvancedMRRFactors[1],T="mask"===o.alphaMode?_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Color|_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.AlphaMask:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Color,x={baseColorFactor:l?[l[0],l[1],l[2],l[3]]:[1,1,1,1],baseColorTextureId:s(t?.baseColorTexture,T),metallicRoughnessTextureId:s(t?.metallicRoughnessTexture,_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.MetallicRoughness),metallicFactor:p,roughnessFactor:g},b={alphaMode:o.alphaMode,alphaCutoff:o.alphaCutoff,doubleSided:o.doubleSided,cullFace:"none"===o.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.None:"back"===o.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.Back:"front"===o.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.Front:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.None,normalTextureId:s(o.normalTexture,_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Normal),emissiveTextureId:s(o.emissiveTexture,_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Emissive),occlusionTextureId:s(o.occlusionTexture,_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Occlusion),emissiveFactor:i?[i[0],i[1],i[2]]:[0,0,0],metallicRoughness:x,wrapTextures:!1,hasParametersFromSource:u},F=[];return r.forEach((({usage:o},a)=>{const r=null!=e&&e[a]&&e[a].formats,s=r?h(r.map((({name:e,format:o})=>({name:e,encoding:f[o]})))):[];F.push({id:a,usage:o,encodings:s})})),{material:b,textures:F}}function h(e){return e.sort(((e,o)=>e.encoding-o.encoding))}const f={ktx2:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX2,basis:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.Basis,dds:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.DDS_S3TC,png:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.PNG,jpg:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.JPG,"ktx-etc2":_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX_ETC2},T={[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.KTX2_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.Basis,[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.BASIS_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.Basis,[_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.DDS_ENCODING]:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.DDS_S3TC,"image/png":_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.PNG,"image/jpg":_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.JPG,"image/jpeg":_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.JPG,"image/ktx":_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX_ETC2};function x(o){const r=o?.materialDefinitions?Object.keys(o.materialDefinitions)[0]:null,s=o?.textureDefinitions?Object.keys(o.textureDefinitions)[0]:null,t=r?o.materialDefinitions?.[r]:null,l=s?o.textureDefinitions?.[s]:null,i=b();if(null!=t){const o=t.params;o.diffuse&&(i.metallicRoughness.baseColorFactor=[o.diffuse[0],o.diffuse[1],o.diffuse[2],1]),null!=o.doubleSided&&(i.doubleSided=o.doubleSided,i.cullFace=o.doubleSided?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.None:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.Back),"none"!==o.cullFace&&"front"!==o.cullFace&&"back"!==o.cullFace||(i.cullFace="none"===o.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.None:"back"===o.cullFace?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.Back:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.Front),o.transparency&&(i.metallicRoughness.baseColorFactor[3]=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(1-o.transparency,0,1)),(o.useVertexColorAlpha||i.metallicRoughness.baseColorFactor[3]<1)&&(i.alphaMode="blend")}const u=[];if(null!=l){const e=0;!l.wrap||"repeat"!==l.wrap[0]&&"repeat"!==l.wrap[1]||(i.wrapTextures=!0);let o=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Color;"rgba"===l.channels&&(i.alphaMode="blend",o|=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.AlphaMask);const r=l.images.length-1,s=l.images[r],t=e=>e?.split("/").pop(),n=Array.isArray(l.encoding)?h(l.encoding.map(((e,o)=>({name:t(s.href[o]),encoding:T[e]||0})))):[{name:t(s.href),encoding:T[l.encoding]||0}];u.push({id:e,usage:o,encodings:n}),i.metallicRoughness.baseColorTextureId=e}return{material:i,textures:u}}const b=()=>({alphaMode:"opaque",alphaCutoff:_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaskAlphaCutoff,doubleSided:!0,cullFace:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.CullFaceOptions.None,normalTextureId:-1,emissiveTextureId:-1,occlusionTextureId:-1,emissiveFactor:[0,0,0],metallicRoughness:{baseColorFactor:[.8,.8,.8,1],baseColorTextureId:-1,metallicRoughnessTextureId:-1,metallicFactor:0,roughnessFactor:.6},wrapTextures:!1,hasParametersFromSource:!0});function F(e,o,r,s){if(null==e?.data)return null;const t=e.data,l=s.renderingContext.parameters.maxMaxAnisotropy,n=l>1,i=r||!o.wrapTextures?C:P,c=w(e.encoding),m=e.usage&_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Color?"opaque"===o.alphaMode?3:4:3;return new _webgl_engine_lib_Texture_js__WEBPACK_IMPORTED_MODULE_7__.Texture(t,{mipmap:n,maxAnisotropy:l,encoding:c,wrap:i,components:m,noUnpackFlip:!0})}const C={s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.TextureWrapMode.CLAMP_TO_EDGE,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.TextureWrapMode.CLAMP_TO_EDGE},P={s:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.TextureWrapMode.REPEAT,t:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.TextureWrapMode.REPEAT};function S(o,l,n,u,c,p){const g=p.rendererTextureUsage,h=e=>R(u,n,e&g),f=l.metallicRoughness.baseColorFactor,T=(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(l.metallicRoughness.baseColorFactor[3],0,1);o.baseColor=[f[0],f[1],f[2],T],o.hasParametersFromSource=!!l.hasParametersFromSource,o.usePBR=p.usePBR,o.mrrFactors=[l.metallicRoughness.metallicFactor,l.metallicRoughness.roughnessFactor,l.hasParametersFromSource?_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultSchematicMRRFactors[2]:_webgl_engine_materials_pbrUtils_js__WEBPACK_IMPORTED_MODULE_8__.defaultAdvancedMRRFactors[2]],o.emissiveFactor=l.emissiveFactor,o.isIntegratedMesh=p.isIntegratedMesh,o.textureAlphaCutoff="mask"===l.alphaMode?l.alphaCutoff:_webgl_engine_core_shaderLibrary_util_AlphaCutoff_js__WEBPACK_IMPORTED_MODULE_4__.defaultMaskAlphaCutoff,o.alphaDiscardMode="opaque"===l.alphaMode?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.AlphaDiscardMode.Opaque:"mask"===l.alphaMode?_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.AlphaDiscardMode.Mask:_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.AlphaDiscardMode.MaskBlend;const x=[],b=h(_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Color|_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.AlphaMask);null!=b&&(o.baseColorTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__.RenderTexture(c,b),x.push(o.baseColorTexture.loadPromise));const F=h(_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.MetallicRoughness);null!=F&&(o.metallicRoughnessTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__.RenderTexture(c,F),x.push(o.metallicRoughnessTexture.loadPromise));const C=h(_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Emissive);null!=C&&(o.emissionTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__.RenderTexture(c,C),x.push(o.emissionTexture.loadPromise));const P=h(_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Occlusion);null!=P&&(o.occlusionTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__.RenderTexture(c,P),x.push(o.occlusionTexture.loadPromise));const S=h(_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.Normal);return null!=S&&(o.normalTexture=new _webgl_engine_core_material_RenderTexture_js__WEBPACK_IMPORTED_MODULE_3__.RenderTexture(c,S),x.push(o.normalTexture.loadPromise)),o.commonMaterialParameters.hasSlicePlane=p.slicePlaneEnabled,o.commonMaterialParameters.doubleSided=l.doubleSided,o.commonMaterialParameters.cullFace=l.cullFace,o.ellipsoidMode=(0,_webgl_engine_core_shaderLibrary_util_EllipsoidMode_js__WEBPACK_IMPORTED_MODULE_5__.getEllipsoidMode)(p.viewSpatialReference),Promise.all(x)}function M(e){const a=!!e.compressedTextureS3TC,r=!!e.compressedTextureETC,s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("disable-feature:i3s-basis")?0:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.Basis|_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX2,t=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.JPG|_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.PNG,l=s|_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.DDS_S3TC;return t|(a?l:0)|(r?s:0)}function D(e,o){if(null!=o)return e.find((e=>0!=(e.encoding&o)))}function R(e,o,r){if(null==e||r===_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureUsage.None)return null;for(let a=0;a<e.length;a++){const s=e[a];if(null!=s&&0!=(s.usage&r)){const e=o[a];return null!=e?e.id:null}}return null}function w(e){switch(e){case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX2:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.KTX2_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.Basis:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.BASIS_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.DDS_S3TC:return _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_6__.TextureEncodingMimeType.DDS_ENCODING;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.PNG:return"image/png";case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.JPG:return"image/jpeg";case _enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureEncoding.KTX_ETC2:return"image/ktx";default:return""}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CacheState: () => (/* binding */ o),
/* harmony export */   LodMetric: () => (/* binding */ a),
/* harmony export */   Node: () => (/* binding */ h),
/* harmony export */   NodeBase: () => (/* binding */ i),
/* harmony export */   NodeFilterImpact: () => (/* binding */ t),
/* harmony export */   NodeIMModificationImpact: () => (/* binding */ n),
/* harmony export */   NodeState: () => (/* binding */ s),
/* harmony export */   NodeTraversalState: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(i,t){this.id=i,this.mbs=t,this.renderMbs=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_0__.f)(0,0,0,-1),this.elevationRangeMin=NaN,this.elevationRangeMax=NaN}invalidateElevationRange(){this.elevationRangeMin=NaN}}var t,n,o,a,s;!function(e){e[e.Unmodified=0]="Unmodified",e[e.Culled=1]="Culled",e[e.NotChecked=2]="NotChecked"}(t||(t={})),function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(n||(n={}));class h extends i{constructor(e,i,t,a,s,h,d,c,r,l){super(e,t),this.index=i,this.childCount=a,this.level=s,this.resources=h,this.version=d,this.lodMetric=c,this.maxError=r,this.numFeatures=l,this.failed=!1,this.cacheState=o.Unknown,this.vertexCount=0,this.memory=0,this.childrenLoaded=0,this.hasModifications=!1,this.imModificationImpact=n.NotChecked}}!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(o||(o={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(a||(a={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(s||(s={}));class d{constructor(e,i,t,n){this.nodeHasLOD=e,this.isChosen=i,this.lodLevel=t,this.version=n}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNodeLoader.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js");
/* harmony import */ var _I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./I3SBinaryReader.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js");
/* harmony import */ var _I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./I3SMaterialUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMaterialUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class d{constructor(e,t,r,i,o,n){if(this._streamDataController=t,this._logger=r,this._defaultGeometrySchema=i,this._requiredAttributes=o,this._options=n,this._logLayer=e,this._layerUrl=e.parsedUrl.path,this._geometryDefinitions=e.geometryDefinitions,e.materialDefinitions){const t=e.textureSetDefinitions;this._materialAndTextures=e.materialDefinitions.map((e=>(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.getMaterialAndTextures)(t,e)))}}_load(e,t,r){return this._streamDataController.request(e,t,r)}_loadAttribute(e,t,r){const i=`${this._layerUrl}/nodes/${e.resources.attributes}/attributes/${t.key}/0`;return this._load(i,"binary",r).then((e=>(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__.readBinaryAttribute)(t,e)))}async loadAttributes(e,t,r){const o=await Promise.allSettled(t.map((t=>this._loadAttribute(e,t.attributeStorageInfo,r)))),n={};for(let s=0;s<t.length;++s){const r=o[s],a=t[s];if("fulfilled"===r.status){const e=r.value;n[a.name]=e}else{const t=r.reason;(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAbortError)(t),this._logger.error("#loadAttributes",this._logLayer,`Failed to load attributeData for '${a.name}' on node '${e.id}'`,t)}}return n}async loadNodeData(r,i){const o=null!=this._requiredAttributes&&r.resources.attributes?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this.loadAttributes(r,this._requiredAttributes,i)):null,{bufferDefinition:n,bufferIndex:s}=_(this._geometryDefinitions,r),u=!!r.resources.geometry,f=u?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this._loadGeometry(r.resources.geometry,s,i)):null,d=r.resources.hasSharedResource?await this._loadShared(r,i):null,b=r.resources.materialDefinition,y=this._materialAndTextures&&null!=b&&b>=0?this._materialAndTextures[b]:null!=d?(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.getMaterialAndTexturesFromShared)(d):null,D=y?.material,p=y?.textures??[],x=`${r.id}`,A=!u&&this._options.loadFeatureData,w=A?await this._loadFeatureData(x,i):null,T=A?h(w):c(D),$=null==T?m(w):null,j=p.length>0?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this.loadTextures(r,p,i)):null;let I=null,S=null;if(f){I=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await f);const e=g(this._defaultGeometrySchema,d);S=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_6__.createGeometryDescriptor)(n,e)}const U=j?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await j):null,q=o?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.assertResult)(await o):{},B=q?{attributeData:q,loadedAttributes:this._requiredAttributes}:null;if(null!=T)return{geometryData:T,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:p,textureData:U};if(null!=$)return{pointData:$,attributeDataInfo:B,geometryBuffer:I,geometryDescriptor:S,requiredTextures:p,textureData:U};throw new Error}static _addAbsoluteHrefTexture(e,t){const r=e.textureDefinitions;if(null!=r)for(const i of Object.keys(r))for(const e of r[i].images)Array.isArray(e.href)?e.hrefConcat=e.href.map((e=>(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeAbsolute)(e,t))):e.hrefConcat=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeAbsolute)(e.href,t)}static _fixTextureEncodings(e){const t=e.textureDefinitions;if(null!=t)for(const r in t){const e=t[r];if(Array.isArray(e.encoding))for(let t=0;t<e.encoding.length;t++){const r=e.encoding[t];"data:"===r.substring(0,5)&&(e.encoding[t]=r.substring(5))}else{const t=e.encoding;"data:"===t.substring(0,5)&&(e.encoding=t.substring(5))}}}_loadShared(e,t){const r=`${this._layerUrl}/nodes/${e.resources.geometry}/shared`;return this._load(r,"json",t).then((e=>(d._fixTextureEncodings(e),d._addAbsoluteHrefTexture(e,r),e)))}_loadTexture(e,t,r,i,o,s){let a=!1;return o===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.DDS_S3TC||o===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.KTX2||o===_enums_js__WEBPACK_IMPORTED_MODULE_5__.TextureEncoding.Basis?this._load(e,"binary",s).then((e=>({id:t,usage:r,data:e,encoding:o,downsampled:a}))):this._load(e,"image",s).then((e=>{let n=e;const s=4096,u=2;if(i&&e.width*e.height>=s){const t=Math.ceil(e.width/u),r=Math.ceil(e.height/u),i=document.createElement("canvas");i.width=t,i.height=r;i.getContext("2d").drawImage(e,0,0,t,r),n=i,a=!0}return{id:t,usage:r,data:n,encoding:o,downsampled:a}}))}loadTextures(e,t,r){const i=!!this._options.uncompressedTextureDownsamplingEnabled,o=this._options.textureUsageMask;return Promise.all(t.map((t=>{if(0==(t.usage&o))return null;const n=(0,_I3SMaterialUtil_js__WEBPACK_IMPORTED_MODULE_7__.selectEncoding)(t.encodings,this._options.textureEncodings);if(null==n)return this._logger.error("#loadTextures",this._logLayer,`No known encoding for texture found on node ${e.id}`),Promise.reject();const s=e.resources.texture||e.id,a=`${this._layerUrl}/nodes/${s}/textures/${n.name}`;return this._loadTexture(a,t.id,t.usage,i,n.encoding,r)})))}_loadFeatureData(e,t){const r=`${this._layerUrl}/nodes/${e}/features/0`;return this._load(r,"json",t)}_loadGeometry(e,t,r){const i=`${this._layerUrl}/nodes/${e}/geometries/${t}`;return this._load(i,"binary",r)}}function c(e){return{featureIds:[],geometries:[{type:"ArrayBufferView",params:{material:e}}],featureDataPosition:[0,0,0]}}function h(e){if(!e)return null;for(const t of e.featureData){const e=t.geometries;if(null!=e)for(const r of e)return{featureIds:[t.id],featureDataPosition:t.position,geometries:[r]}}return null}function m(e){if(!e)return null;const t=new Array;for(const r of e.featureData)null!=r.position&&t.push({featureIds:[r.id],featureDataPosition:r.position,geometries:[]});return t}function g(e,t){if(!e||!t?.materialDefinitions)return e;const i=Object.keys(t.materialDefinitions)[0];return!t.materialDefinitions[i].params.vertexRegions&&e.vertexAttributes.region&&delete(e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e)).vertexAttributes.region,e}function _(e,t){const r={bufferDefinition:null,bufferIndex:0},i=t.resources.geometryDefinition;if(null==e||null==i||i<0)return r;const o=i>=0?e[i].geometryBuffers:null;if(null==o)return r;for(let n=0;n<o.length;n++){const e=o[n];if(null==e.compressedAttributes)r.bufferIndex=n,r.bufferDefinition=o[n];else if("draco"===e.compressedAttributes.encoding&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("disable-feature:i3s-draco"))return r.bufferIndex=n,r.bufferDefinition=e,r}return r}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SOverrides: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/byteSizeEstimations.js */ "./node_modules/@arcgis/core/core/byteSizeEstimations.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/ReactiveSet.js */ "./node_modules/@arcgis/core/core/ReactiveSet.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _intl_number_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../intl/number.js */ "./node_modules/@arcgis/core/intl/number.js");
/* harmony import */ var _layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../layers/support/featureQueryAll.js */ "./node_modules/@arcgis/core/layers/support/featureQueryAll.js");
/* harmony import */ var _rest_support_meshFeatureSet_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../rest/support/meshFeatureSet.js */ "./node_modules/@arcgis/core/rest/support/meshFeatureSet.js");
/* harmony import */ var _support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../support/featureFlags.js */ "./node_modules/@arcgis/core/support/featureFlags.js");
/* harmony import */ var _support_requestUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../support/requestUtils.js */ "./node_modules/@arcgis/core/support/requestUtils.js");
/* harmony import */ var _FeatureLayerView3D_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../FeatureLayerView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/FeatureLayerView3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const E="esri.views.3d.layers.i3s.I3SOverrides";let S=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(e),this._warnMaximumChangedObjectsExceeded=!1,this._maximumNumberOfEditOVerrides=V,this._original3DOFLDefinitionExpression=null,this._interactiveEditingSessions=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_6__["default"],this.geometryOverrides=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_6__["default"],this._clientGeometryCache=new Map,this._associatedLayerView=null,this._attributeChangedObjectIds=new _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_11__["default"],this._geometryChangedObjectIds=new _core_ReactiveSet_js__WEBPACK_IMPORTED_MODULE_11__["default"],this._pendingFetchChangedObjectIds=null,this._pendingFetchAbortController=new AbortController,this._featureIdLocks=new Map}initialize(){this._memCache=this.memoryController.newCache(`i3s-attribute-overrides-${this.layer.uid}`),this._pendingFetchChangedObjectIds=this._fetchChangedObjectIds(this._pendingFetchAbortController?.signal),this._pendingFetchChangedObjectIds.finally((()=>{this._pendingFetchAbortController=null,this._pendingFetchChangedObjectIds=null})),this.is3DOFL&&null!=this._associatedLayer&&((0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.direct3DObjectFeatureLayerDisplayEnabled)()?this._associatedLayer.load().then((e=>{this.destroyed||(this._original3DOFLDefinitionExpression=e.definitionExpression,this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_12__.watch)((()=>this._definitionExpression),(t=>e.definitionExpression=t),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_12__.initial)),this._associatedLayerView=new _FeatureLayerView3D_js__WEBPACK_IMPORTED_MODULE_22__["default"]({layer:this._associatedLayer,view:this.view}))})):(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.i3sPatchingEnabled)())}destroy(){this.is3DOFL&&null!=this._associatedLayer&&((0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.direct3DObjectFeatureLayerDisplayEnabled)()?null!=this._associatedLayerView&&(this._associatedLayer.definitionExpression=this._original3DOFLDefinitionExpression):(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.i3sPatchingEnabled)()),this._set("layer",null),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.destroyMaybe)(this._memCache),this._pendingFetchAbortController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_9__.abortMaybe)(this._pendingFetchAbortController),this._pendingFetchChangedObjectIds=null,this._featureIdLocks.clear()}get is3DOFL(){return (0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.sceneLayerEditingEnabled)()&&null!=this._associatedLayer?.infoFor3D}get sortedGeometryChangedObjectIds(){return this.is3DOFL?[...this._geometryChangedObjectIds].sort(((e,t)=>e-t)):[]}get _associatedLayer(){return null==this.layer?null:this.layer.associatedLayer}get hasGeometryChanges(){return this._geometryChangedObjectIds.size>0}get _definitionExpression(){const e=this.sortedGeometryChangedObjectIds;return 0===e.length?"1 = 0":`OBJECTID IN (${e.join(",")})`}get updating(){if(!this.is3DOFL)return!1;if(this._pendingFetchChangedObjectIds)return!0;if((0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.direct3DObjectFeatureLayerDisplayEnabled)()){return!(null!=this._associatedLayerView)||null!=this._associatedLayerView&&this._associatedLayerView.updating}return!1}get isEmpty(){return null==this._pendingFetchChangedObjectIds&&0===this._attributeChangedObjectIds.size&&0===this._geometryChangedObjectIds.size}featureHasGeometryChanges(e){return this._geometryChangedObjectIds.has(e)}featureHasAttributeChanges(e){return this._attributeChangedObjectIds.has(e)}createInteractiveEditSession(e){this._attributeChangedObjectIds.add(e);const t=this._interactiveEditingSessions,r=new D(e,(()=>{t.remove(r)}));return t.unshift(r),r}async applyAttributeOverrides(e,t,r,s=[]){if(this._pendingFetchChangedObjectIds&&await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.whenOrAbort)(this._pendingFetchChangedObjectIds,r),null==t)return;const{attributeData:i,loadedAttributes:o}=t;if(null==o||null==i||0===this._attributeChangedObjectIds.size)return;const n=new Set;for(const d of o)n.add(d.index);for(const d of s)n.has(d.index)||(o.push(d),i[d.name]=new Array(e.length));const a=await this._lockFeatureIds(e);try{const t={attributeData:i,loadedAttributes:o},s=this._getOverridesFromCache(e,t,this._attributeChangedObjectIds),{objectIds:n,fieldNames:a}=s;if(0===n.length||0===a.length)return;const d=await this._queryAttributeOverridesFromAssociatedLayer(n,a,r);if(null==d)return;this._processOverridesFromAssociatedLayer(e,d,a,t)}finally{a.remove()}}updateGeometry(e,t){this._geometryChangedObjectIds.add(e);const r=this._clientGeometryCache.get(e);if(null!=r&&(this.geometryOverrides.remove(r),this._clientGeometryCache.delete(e)),null!=t){const r={oid:e,mesh:t};this.geometryOverrides.add(r),this._clientGeometryCache.set(e,r)}}updateAttributeValue(e,t,r){this._attributeChangedObjectIds.add(e),this._cacheAttributeValue(e,t,r)}featureAdded(e){this.is3DOFL&&(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.i3sPatchingEnabled)()&&this._geometryChangedObjectIds.add(e),this._attributeChangedObjectIds.add(e)}_cacheAttributeValue(e,t,r){this._memCache.put(this._getAttributeCacheKey(e,t),r,this._memCacheAttributeValueSize(r))}_getOverridesFromCache(e,{loadedAttributes:t,attributeData:r},s){const i=new Set,o=new Array;for(const a of t)o[a.index]=r[a.name];const n=new Set;for(let a=0;a<e.length;a++){const r=e[a];if(s.has(r))for(const e of t){const t=this._attributeFromCache(r,e.index);void 0===t?(i.add(r),n.add(e.name)):o[e.index][a]=t}}return{objectIds:Array.from(i),fieldNames:Array.from(n)}}_attributeFromCache(e,t){const r=this._fromInteractiveEditingSession(e,t);if(void 0!==r)return r;const s=this._getAttributeCacheKey(e,t);return this._memCache.get(s)}_fromInteractiveEditingSession(e,t){if(null!=this._interactiveEditingSessions)for(const r of this._interactiveEditingSessions){if(r.objectId!==e)continue;const s=r.getAttribute(t);if(void 0!==s)return s}}_getAttributeCacheKey(e,t){return`${e}-${t}`}async _queryAttributeOverridesFromAssociatedLayer(e,t,r){if(0===e.length)return null;this._logWarningIfMaximumObjectsExceeded();const{associatedLayer:s}=this.layer;if(null==s)return null;const i=s.createQuery(),{objectIdField:o}=s,n=[o,...t];i.where="1=1",i.returnGeometry=!1,i.outFields=n,i.cacheHint=!0;const a=await this._executeBatchQuery(s,e,i,r),d=[];for(const c of a)if(c.ok)for(const e of c.value.features)d.push(e);return d}async _queryGeometryOverridesFromAssociatedLayer(e,t){if(0===e.length||!this.is3DOFL||!(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.i3sPatchingEnabled)())return null;this._logWarningIfMaximumObjectsExceeded();const r=this.layer.associatedLayer,{objectIdField:s,globalIdField:i}=r,o=[s,...null!=i?[i]:[]],n=r.createQuery();n.where="1=1",n.returnGeometry=!0,n.outFields=o,n.cacheHint=!0,n.returnZ=r.hasZ,n.returnM=r.hasM;const a=await this._executeBatchQuery(r,e,n,t),d=r.infoFor3D,{spatialReference:c}=r,h=[];for(const l of a){if(!l.ok)continue;const e=l.value,{assetMaps:t,features:r,globalIdFieldName:s}=e;if(null==t)continue;const i=(0,_rest_support_meshFeatureSet_js__WEBPACK_IMPORTED_MODULE_19__.assetMapFromAssetMapsJSON)(d,t);for(const o of r){const e=(0,_rest_support_meshFeatureSet_js__WEBPACK_IMPORTED_MODULE_19__.extractMesh)(o,s,c,d,i),t=o;null!=e?(t.geometry=e,h.push(t)):t.geometry=null}}return h}_logWarningIfMaximumObjectsExceeded(){if(!this._warnMaximumChangedObjectsExceeded)return;this._warnMaximumChangedObjectsExceeded=!1;let e=`The number of edited objects that are not yet cached in the scene service exceeds the maximum limit. Attribute changes will only be available for the first ${(0,_intl_number_js__WEBPACK_IMPORTED_MODULE_17__.formatNumber)(this._maximumNumberOfEditOVerrides)} objects. Please consider re-caching the scene service`;const t=this.layer.portalItem;t&&t.loaded?e+=` (${t.portal.url}/home/item.html?id=${t.id}#settings)`:e+=` (${this.layer.parsedUrl.path})`,_core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(E).warn("#queryOverrides()",this.layer.title,`${e}.`)}async _executeBatchQuery(e,t,r,o){if(0===t.length)return[];const n=(0,_layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__.getMaximumQuerySize)(e);t=[...t].sort(((e,t)=>e-t));const a=(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.splitIntoChunks)(t,n).map((t=>{const s=r.clone();return s.objectIds=t,(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.resultOrAbort)((0,_layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_18__.queryAllJSON)(e,s,{signal:o}))}));return Promise.all(a)}_processOverridesFromAssociatedLayer(e,t,r,{loadedAttributes:s,attributeData:i}){const o=this._associatedLayer;if(null==o)return;const n=o.objectIdField,a=r.map((t=>(t in i||(i[t]=new Array(e.length)),i[t]))),d=new Map(s.map((e=>[e.name,e.index]))),c=r.map((e=>d.get(e))),h=new Map(Array.from(e,((e,t)=>[e,t])));for(const l of t){const e=l.attributes[n];for(let t=0;t<r.length;t++){const s=c[t],i=h.get(e),o=l.attributes[r[t]];a[t][i]=o,this._cacheAttributeValue(e,s,o)}}}_memCacheAttributeValueSize(e){return"string"==typeof e?(0,_core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_5__.estimateStringByteSize)(e):(0,_core_byteSizeEstimations_js__WEBPACK_IMPORTED_MODULE_5__.estimateNumberByteSize)()}async _fetchChangedObjectIds(e){const r=this.layer;await r.load({signal:e}),this._geometryChangedObjectIds.clear(),this._attributeChangedObjectIds.clear();const{associatedLayer:s}=r;if(null==s||!s.capabilities?.operations?.supportsChangeTracking)return;const i=this._getFetchChangedObjectIdsServerGen();if(null==i)return;const n=s.layerId,a=this.is3DOFL,d={f:"json",returnIdsOnly:!0,layers:`[${n}]`,returnUpdates:!0,returnDeletes:a,returnInserts:a,layerServerGens:JSON.stringify([{id:n,serverGen:i}])};if(a){const e=s.infoFor3D;d.fieldsToCompare=JSON.stringify({fields:[...Object.values(e.transformFieldRoles),e.sourceHashField]})}const c=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_4__.result)((0,_request_js__WEBPACK_IMPORTED_MODULE_1__["default"])(`${s.url}/extractChanges`,{method:"post",query:d,timeout:G,signal:e}));if(!c.ok&&(0,_support_requestUtils_js__WEBPACK_IMPORTED_MODULE_21__.isTimeoutError)(c.error)){const e=this.layer.title;_core_Logger_js__WEBPACK_IMPORTED_MODULE_8__["default"].getLogger(E).warn("extractChanges:timeout",e,`${e} could not obtain edited features that are not cached in the scene service. Display of features may not be up to date with the latest edits. Consider re-caching the scene service.`)}if(c.ok&&1===c.value.data?.edits?.length){const t=c.value.data.edits[0],r=t?.objectIds,i=t?.fieldUpdates,o=r?.adds??[],n=r?.updates??[],d=r?.deletes??[],h=[...o,...n,...d],l=a?[...o,...i??n,...d]:[],u=Math.min(this._maximumNumberOfEditOVerrides,h.length);u<h.length&&(this._warnMaximumChangedObjectsExceeded=!0);const m=h.sort(((e,t)=>e-t));for(let e=0;e<u;++e){const t=m[e];this._attributeChangedObjectIds.add(t)}for(const e of l)this._geometryChangedObjectIds.add(e);if(this.is3DOFL&&(0,_support_featureFlags_js__WEBPACK_IMPORTED_MODULE_20__.i3sPatchingEnabled)()&&this._geometryChangedObjectIds.size>0){const t=await this._queryGeometryOverridesFromAssociatedLayer(Array.from(this._geometryChangedObjectIds),e);if(null!=t)for(const e of t)null!=e.geometry&&this.updateGeometry(e.attributes[s.objectIdField],e.geometry)}}}_getFetchChangedObjectIdsServerGen(){const e=this.layer;if(null!=e.serviceUpdateTimeStamp?.lastUpdate)return e.serviceUpdateTimeStamp.lastUpdate;const t=e.associatedLayer;return null!=t?.serverGens?.minServerGen?t.serverGens.minServerGen:null}async _lockFeatureIds(e){const t=this._featureIdLocks;let r=!0;for(;r;){const s=new Array;for(const r of e){const e=t.get(r);e&&s.push(e)}0===s.length?r=!1:await Promise.all(s)}const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_10__.createResolver)(),i=s.promise;for(const o of e)t.set(o,i);return (0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeHandle)((()=>{for(const r of e)t.delete(r);s.resolve()}))}get test(){const e=Array.from(this._attributeChangedObjectIds),t=this._pendingFetchChangedObjectIds,r=this;return{changedObjectIds:e,pendingFetchChangedObjectIds:t,get maximumNumberOfEditOVerrides(){return r._maximumNumberOfEditOVerrides},set maximumNumberOfEditOVerrides(e){r._maximumNumberOfEditOVerrides=e}}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({constructOnly:!0})],S.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({constructOnly:!0})],S.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({readOnly:!0})],S.prototype,"is3DOFL",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_interactiveEditingSessions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({readOnly:!0})],S.prototype,"sortedGeometryChangedObjectIds",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({readOnly:!0})],S.prototype,"geometryOverrides",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_clientGeometryCache",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_associatedLayer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_associatedLayerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)({constructOnly:!0})],S.prototype,"memoryController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_attributeChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_geometryChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"hasGeometryChanges",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_pendingFetchChangedObjectIds",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_pendingFetchAbortController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"_definitionExpression",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_13__.property)()],S.prototype,"isEmpty",null),S=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__.subclass)(E)],S);class D{constructor(e,t){this.objectId=e,this._remove=t,this._updates=new Map,this._isActive=!0}getAttribute(e){return this._updates.get(e)}setAttribute(e,t){this.isActive&&this._updates.set(e,t)}remove(){this.isActive&&(this._isActive=!1,this._remove())}get isActive(){return this._isActive}}const G=1e4,V=5e4;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SStreamDataController.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SStreamDataController: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(e,t){this._requester=e,this._apiKey=t,this._activeRequests=new Set}get busy(){return this._requester.busy}request(r,s,o){const l=new AbortController,a=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(o,(()=>l.abort())),n={signal:l.signal,query:{token:this._apiKey}},i=this._requester.request(r,s,n),u={response:i,abortController:l,abortHandle:a};return this._activeRequests.add(u),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.always)(i,(()=>{u.abortController=null,u.abortHandle?.remove(),u.abortHandle=null,this._activeRequests.delete(u)})),i}cancelAll(){this._activeRequests.forEach((e=>{e.abortController?.abort(),e.abortController=null,e.abortHandle?.remove()})),this._activeRequests.clear()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SViewportQueries.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ I)
/* harmony export */ });
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../chunks/vec4.js */ "./node_modules/@arcgis/core/chunks/vec4.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../geometry/spatialReferenceEllipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/spatialReferenceEllipsoidUtils.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../geometry/support/frustum.js */ "./node_modules/@arcgis/core/geometry/support/frustum.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../graphics/elevationAlignmentUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js");
/* harmony import */ var _graphics_ElevationContext_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../graphics/ElevationContext.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js");
/* harmony import */ var _graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../graphics/featureExpressionInfoUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");
/* harmony import */ var _ElevationRange_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ElevationRange.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/ElevationRange.js");
/* harmony import */ var _I3SNode_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./I3SNode.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SNode.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const y=1e5;class I{constructor(e,t,i,s,r,n,o,a,c={}){this._indexSR=e,this._renderCoordsHelper=t,this._clippingArea=r,this._elevationProvider=n,this._viewingMode=o,this._options=c,this._frustum=(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_6__.create)(),this._useFrustumCulling=!1,this._poi=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._elevationContext=null,this.minDistance=1/0,this.maxDistance=0,this.maxLodLevel=2,this._tmpObb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__.create)(),this._tmp1=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._tmp2=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._tmp3=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._tmp0=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_1__.c)(),this._screenspaceErrorBias=c.screenspaceErrorBias||1,this._progressiveLoadFactor=c.progressiveLoadFactor||1,this.updateCamera(i,s),this.engineSR=this._renderCoordsHelper.spatialReference,this.updateElevationInfo(a),this._tmpPoint=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_9__.makeDehydratedPoint)(0,0,0,e),this._isECEFOBBInLocalMode=this._indexSR.isWGS84&&(this.engineSR.isWebMercator||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_7__.isPlateCarree)(this.engineSR)),this._indexSREllipsoidRadius=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_3__.getReferenceEllipsoid)(this._indexSR).radius}updateElevationInfo(e){null!=e?(this._elevationContext=_graphics_ElevationContext_js__WEBPACK_IMPORTED_MODULE_11__.ElevationContext.fromElevationInfo(e),this._elevationContext.updateFeatureExpressionInfoContext((0,_graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_12__.createContextWithoutExpressionSupport)((0,_graphics_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_12__.extractExpressionInfo)(e,!1)))):this._elevationContext=null}updateCamera(e,t){this._useFrustumCulling=t,t&&(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_6__.fromMatrix)(e.viewMatrix,e.projectionMatrix,this._frustum),this._screenSizeFactor=1/(e.perScreenPixelRatio/2),this._camPos=e.eye,this.minDistance=1/0,this.maxDistance=0}setPointOfInterest(e){this._poi=e}updateScreenSpaceErrorBias(e){const t=this._screenspaceErrorBias;return this._screenspaceErrorBias=e,t}updateClippingArea(e){this._clippingArea=e}expandElevationRange(e,t,i){if(null==this._elevationContext)return;const s=e.mbs;if(!s)return;if(this._elevationProvider.getSphereElevationBounds){const e=this._elevationProvider.getSphereElevationBounds(s,this._indexSR);return void(e&&(0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_13__.expandElevationRange)(i,e.min,e.max))}const r=s[0],n=s[1],o=s[2],a="relative-to-scene"===this._elevationContext.mode?"scene":"ground",h=this._elevationProvider.getElevation(r,n,o,this._indexSR,a);h&&(0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_13__.expandElevationRange)(i,h,h);const c=t?null:this._elevationProvider.getRootElevationBounds?.();c&&(0,_ElevationRange_js__WEBPACK_IMPORTED_MODULE_13__.expandElevationRange)(i,c.min,c.max)}getRenderMbs(e){const t=e.renderMbs;if((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.isValidMbs)(t))return t;e.mbs&&(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_2__.c)(t,e.mbs);const i=e.elevationRangeMin;if(this._elevationContext&&Number.isFinite(i)){let s=0,r=0;const n=e.elevationRangeMax;switch(this._elevationContext.mode){case"relative-to-ground":s=this._elevationContext.geometryZWithOffset(t[2],this._renderCoordsHelper)+i-t[2],r=n-i;break;case"on-the-ground":s=i-t[2],r=n-i}t[2]+=s+.5*r,t[3]+=.5*r}else this._elevationContext&&t[3]<y&&(this._tmpPoint.x=t[0],this._tmpPoint.y=t[1],this._tmpPoint.z=t[2],t[2]=(0,_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_10__.evaluateElevationAlignmentAtPoint)(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper));return (0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_5__.projectBoundingSphere)(t,this._indexSR,t,this.engineSR),t}_getVisibilityObb(e){if(null!=e.visibilityObb)return e.visibilityObb;const t=e.serviceObb,i=.01*this._indexSREllipsoidRadius;return null==t||!e.mbs||!(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.isValidObb)(t)||this._isECEFOBBInLocalMode&&t.halfSize.some((e=>e>i))?null:(e.serviceObbInRenderSR=this._computeRenderObb(t,e.serviceObbInRenderSR,e.mbs[3],e.elevationRangeMin,e.elevationRangeMax),e.serviceObbInRenderSR)}_computeRenderObb(e,t,i,s,r){if(null==t)t=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__.create)();else if((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.isValidObb)(t))return t;let n=0,o=0;if(this._elevationContext&&!Number.isNaN(s)&&Number.isFinite(s))switch(this._elevationContext.mode){case"relative-to-ground":n=this._elevationContext.geometryZWithOffset(e.center[2],this._renderCoordsHelper)+s-e.center[2],o=r-s;break;case"on-the-ground":n=s-e.center[2],o=r-s}else this._elevationContext&&i<y&&(this._tmpPoint.x=e.center[0],this._tmpPoint.y=e.center[1],this._tmpPoint.z=e.center[2],n=(0,_graphics_elevationAlignmentUtils_js__WEBPACK_IMPORTED_MODULE_10__.evaluateElevationAlignmentAtPoint)(this._tmpPoint,this._elevationProvider,this._elevationContext,this._renderCoordsHelper)-e.center[2]);return o>0?((0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.transformObb)(e,this._indexSR,this._tmpObb,this.engineSR,n),(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__.computeOffsetObb)(this._tmpObb,0,o,this._viewingMode,t)):(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.transformObb)(e,this._indexSR,t,this.engineSR,n),t}isNodeVisible(e){const t=this.getRenderMbs(e);if(!this._isMBSinClippingArea(t))return!1;if(!this._useFrustumCulling)return!0;const i=this._getVisibilityObb(e);return i?(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__.isVisible)(i,this._frustum):(0,_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_6__.intersectsSphere)(this._frustum,(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_8__.w)(t))}isGeometryVisible(e){if(!this._useFrustumCulling)return!0;const t=e.geometryObb;return null!=t?(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_16__.isVisible)(t,this._frustum):this.isNodeVisible(e)}_isMBSinClippingArea(e){return null==this._clippingArea||(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.intersectBoundingRectWithMbs)(this._clippingArea,e)!==_I3SUtil_js__WEBPACK_IMPORTED_MODULE_15__.MbsIntersectResult.OUTSIDE}_screenSpaceDiameterMbs(t,i){const s=this.getRenderMbs(t),r=Math.sqrt((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.a)(s,this._camPos)),n=r-s[3];return this._updateMinMaxDistance(r),n<0?.5*Number.MAX_VALUE:i/n*this._screenSizeFactor}calcCameraDistance(e){return this.calcCameraDistanceToCenter(e)-this.getRenderMbs(e)[3]}calcCameraDistanceToCenter(e){const i=this.getRenderMbs(e),s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(i,this._camPos);return this._updateMinMaxDistance(s),s}calcAngleDependentLoD(e){const s=this.getRenderMbs(e),r=s[3],n=(Math.abs(s[0]*(s[0]-this._camPos[0])+s[1]*(s[1]-this._camPos[1])+s[2]*(s[2]-this._camPos[2]))/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(s)+r)/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(s,this._camPos);return Math.min(1,n)}hasLOD(e){return e.lodMetric!==_I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.None}_getDistancePlanarMode(e,t){const i=e[0]-t[0],s=e[1]-t[1],r=e[2]-t[2],n=i*i+s*s,o=t[3];if(n<=o*o)return Math.abs(r);const a=Math.sqrt(n)-o;return Math.sqrt(r*r+a*a)}_getDistanceGlobeMode(h,c){const l=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(c),m=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(h)-l;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(this._tmp0,h,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.j)(h,c)/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.m)(h));const p=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.a)(c,this._tmp0),_=c[3];if(p<=_*_)return Math.abs(m);{const e=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(this._tmp0,c,1/l),n=l,p=_*_/2/n,u=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(this._tmp1,e,n-p),d=h,g=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(this._tmp2,d,u),v=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(this._tmp2,g,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(this._tmp3,e,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.j)(e,g))),b=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.g)(this._tmp2,u,(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.i)(this._tmp2,v,_/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(v)));let x=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(d,b);if(m>=2e5){const t=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.f)(this._tmp1,d,b);let s=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.j)(t,e)/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.l)(t);s<.08&&(s=1e-4),x/=s}return x}}_getDistance(e,t){return this.engineSR===(0,_geometry_spatialReferenceEllipsoidUtils_js__WEBPACK_IMPORTED_MODULE_4__.getSphericalPCPF)(this.engineSR)?this._getDistanceGlobeMode(e,t):this._getDistancePlanarMode(e,t)}_updateMinMaxDistance(e){e>0?(this.minDistance=Math.min(this.minDistance,e),this.maxDistance=Math.max(this.maxDistance,e)):(this.minDistance=0,this.maxDistance=Math.max(this.maxDistance,-e))}getLodLevel(e){if(e.lodMetric===_I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.None)return 0;if(0===e.childCount)return this.maxLodLevel;if(this._useFrustumCulling&&this._progressiveLoadFactor<1){const t=this._progressiveLoadFactor*this._screenspaceErrorBias,i=this._screenspaceErrorBias;return this.evaluateLODmetric(e,t)?this.evaluateLODmetric(e,i)?2:1:0}return this.evaluateLODmetric(e,this._screenspaceErrorBias)?this.maxLodLevel:0}evaluateLODmetric(e,t){switch(e.lodMetric){case _I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.ScreenSpaceRelative:{const i=this.getRenderMbs(e),s=this._getDistance(this._camPos,i),r=2*s/this._screenSizeFactor,n=s+i[3];return this._updateMinMaxDistance(n),e.maxError*t<=r}case _I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.MaxScreenThreshold:{let i=this._screenSpaceDiameterMbs(e,e.mbs[3]*t);return this._options.angleDependentLoD&&(i*=this.calcAngleDependentLoD(e)),i<e.maxError}case _I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.RemovedFeatureDiameter:return this._screenSpaceDiameterMbs(e,e.maxError)*t<10;case _I3SNode_js__WEBPACK_IMPORTED_MODULE_14__.LodMetric.DistanceRangeFromDefaultCamera:return this.calcCameraDistance(e)>e.maxError*t}return!1}distToPOI(e){const i=this.getRenderMbs(e);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(i,this._poi)-i[3]}distCameraToPOI(){return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.o)(this._camPos,this._poi)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/enums.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TextureEncoding: () => (/* binding */ e),
/* harmony export */   TextureUsage: () => (/* binding */ s)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,s;!function(e){e[e.KTX2=1]="KTX2",e[e.Basis=2]="Basis",e[e.DDS_S3TC=4]="DDS_S3TC",e[e.PNG=8]="PNG",e[e.JPG=16]="JPG",e[e.KTX_ETC2=32]="KTX_ETC2"}(e||(e={})),function(e){e[e.None=0]="None",e[e.Color=1]="Color",e[e.MetallicRoughness=2]="MetallicRoughness",e[e.Normal=4]="Normal",e[e.Occlusion=8]="Occlusion",e[e.Emissive=16]="Emissive",e[e.AlphaMask=32]="AlphaMask",e[e.ColorTextures=19]="ColorTextures",e[e.GeometryTextures=36]="GeometryTextures",e[e.GeometryTexturesPBR=44]="GeometryTexturesPBR",e[e.AllTextures=37]="AllTextures",e[e.AllTexturesPBR=63]="AllTexturesPBR"}(s||(s={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/I3SLayerView.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FadeDirection: () => (/* binding */ a)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var a;!function(a){a[a.FadeIn=0]="FadeIn",a[a.FadeOut=1]="FadeOut"}(a||(a={}));


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/core/material/RenderTexture.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RenderTexture: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(s,r){this._textureRep=s,this.loadPromise=null,this._disposed=!1;const i=this._textureRep.acquire(r);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.isPromiseLike)(i)?(i.then((t=>{this._disposed?(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.releaseMaybe)(t):this._textureRef=t})),this.loadPromise=i):this._textureRef=i}dispose(){this._textureRef=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.releaseMaybe)(this._textureRef),this._disposed=!0}get glTexture(){return null!=this._textureRef?this._textureRef.glTexture:null}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19jb250cm9sbGVyc19JM1NPbkRlbWFuZENvbnRyb2xsZXJfanMtLTllMjUxOS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDOEksUUFBUSxjQUFjLHVDQUF1QywyRkFBQyxDQUFDLFdBQVcsT0FBTyx5RUFBQyxrQ0FBa0MsT0FBTyx1QkFBdUIsMkVBQTJFLFFBQVEsZ0VBQWdFLFVBQVUsNEJBQTRCLHNDQUFzQyxVQUFVLE9BQU8seUVBQUMsdUNBQXVDLGFBQWEseUVBQUMsb0VBQW9FLE9BQU8sT0FBTyx5RUFBQyxvQ0FBb0MsT0FBTyxPQUFPLHlFQUFDLG9DQUFvQyxTQUFTLE9BQU8seUVBQUMsc0NBQXNDLG9CQUFvQixPQUFPLHlFQUFDLGdEQUFnRCwwQkFBMEIsc0NBQTJEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSng4QjtBQUNBO0FBQ0E7QUFDQTtBQUNnVCxvQkFBb0IsNkJBQTZCLFFBQVEsc0VBQUMsUUFBUSxpQkFBaUIsaURBQUMsbURBQW1ELDhCQUE4QixNQUFNLGdCQUFnQixHQUFHLDBCQUEwQix3REFBQyxlQUFlLFFBQVEsMkRBQUMsdUJBQXVCLHdEQUFDLFFBQVEsNEJBQTRCLGtFQUFDLGdDQUFnQyx3REFBQyxhQUFhLDBCQUEwQix3REFBQywrQkFBK0Isd0RBQUMsa0NBQWtDLHdEQUFDLGVBQWUscUJBQXFCLGdEQUFnRCxjQUFjLEtBQUssUUFBUSwyREFBQyx1QkFBdUIsd0RBQUMsbUJBQW1CLDJEQUFDLENBQUMsd0RBQUMsaUJBQWlCLHdEQUFDLGVBQWUsV0FBVyxzQ0FBc0Msd0RBQUMsc0NBQXNDLFNBQVMsb0JBQW9CLFlBQVksc0NBQXNDLHFDQUFxQyxtREFBbUQsUUFBUSxxREFBQyxLQUFLLHlFQUFDLEtBQUssMkRBQUMsSUFBdUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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dUdBQXVHLHFEQUFxRCxLQUFLLG1EQUFDLHFCQUFxQixpREFBaUQsd0ZBQXdGLEtBQUssbURBQUMsK0VBQStFLEtBQUssbURBQUMsK0VBQStFLFNBQVMsYUFBYSw2QkFBNkIsT0FBTyxrREFBQyxtQkFBbUIsa0JBQWtCLE9BQU8sa0RBQUMsMEJBQStDOzs7Ozs7Ozs7Ozs7Ozs7O0FDSnAzUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsYUFBYSxrSUFBa0ksU0FBUyxlQUFlLGlaQUFpWixTQUFTLEdBQWtEOzs7Ozs7Ozs7Ozs7Ozs7QUNKM25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTSxhQUFhLGdEQUFnRCxTQUFTLEdBQThCOzs7Ozs7Ozs7Ozs7Ozs7OztBQ0oxRztBQUNBO0FBQ0E7QUFDQTtBQUNnSSxRQUFRLGlCQUFpQiwyREFBMkQsb0NBQW9DLG9FQUFDLGlCQUFpQixlQUFlLDREQUFDLHVCQUF1QiwwQ0FBMEMsVUFBVSxpQkFBaUIsNERBQUMscUNBQXFDLGdCQUFnQiwrREFBMEYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9SZWFjdGl2ZVNldC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9jb250cm9sbGVycy9JM1NPbkRlbWFuZENvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9GZWF0dXJlTGF5ZXJWaWV3M0QuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvRWxldmF0aW9uUmFuZ2UuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTQ2xpZW50TWF0ZXJpYWxVdGlsLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0NsaWVudE5vZGVMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTRnJhbWVUYXNrLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0luZGV4LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0xvZEhhbmRsaW5nLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU01hdGVyaWFsVXRpbC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NOb2RlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU05vZGVMb2FkZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTT3ZlcnJpZGVzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU1N0cmVhbURhdGFDb250cm9sbGVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU1ZpZXdwb3J0UXVlcmllcy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9lbnVtcy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL3N1cHBvcnQvSTNTTGF5ZXJWaWV3LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC93ZWJnbC1lbmdpbmUvY29yZS9tYXRlcmlhbC9SZW5kZXJUZXh0dXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7dHJhY2tBY2Nlc3MgYXMgdH1mcm9tXCIuL2FjY2Vzc29yU3VwcG9ydC90cmFja2luZy5qc1wiO2ltcG9ydHtTaW1wbGVPYnNlcnZhYmxlIGFzIGV9ZnJvbVwiLi9hY2Nlc3NvclN1cHBvcnQvdHJhY2tpbmcvU2ltcGxlT2JzZXJ2YWJsZS5qc1wiO2NsYXNzIHN7Y29uc3RydWN0b3IoKXt0aGlzLl9zZXQ9bmV3IFNldCx0aGlzLl9vYnNlcnZhYmxlPW5ldyBlfWdldCBzaXplKCl7cmV0dXJuIHQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fc2V0LnNpemV9YWRkKHQpe2NvbnN0IGU9dGhpcy5fc2V0LnNpemU7cmV0dXJuIHRoaXMuX3NldC5hZGQodCksdGhpcy5fc2V0LnNpemUhPT1lJiZ0aGlzLl9vYnNlcnZhYmxlLm5vdGlmeSgpLHRoaXN9Y2xlYXIoKXt0aGlzLl9zZXQuc2l6ZT4wJiYodGhpcy5fc2V0LmNsZWFyKCksdGhpcy5fb2JzZXJ2YWJsZS5ub3RpZnkoKSl9ZGVsZXRlKHQpe2NvbnN0IGU9dGhpcy5fc2V0LmRlbGV0ZSh0KTtyZXR1cm4gZSYmdGhpcy5fb2JzZXJ2YWJsZS5ub3RpZnkoKSxlfWVudHJpZXMoKXtyZXR1cm4gdCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXQuZW50cmllcygpfWZvckVhY2goZSxzKXt0KHRoaXMuX29ic2VydmFibGUpLHRoaXMuX3NldC5mb3JFYWNoKCgodCxyKT0+ZS5jYWxsKHMsdCxyLHRoaXMpKSxzKX1oYXMoZSl7cmV0dXJuIHQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fc2V0LmhhcyhlKX1rZXlzKCl7cmV0dXJuIHQodGhpcy5fb2JzZXJ2YWJsZSksdGhpcy5fc2V0LmtleXMoKX12YWx1ZXMoKXtyZXR1cm4gdCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXQudmFsdWVzKCl9W1N5bWJvbC5pdGVyYXRvcl0oKXtyZXR1cm4gdCh0aGlzLl9vYnNlcnZhYmxlKSx0aGlzLl9zZXRbU3ltYm9sLml0ZXJhdG9yXSgpfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIHRoaXMuX3NldFtTeW1ib2wudG9TdHJpbmdUYWddfX1leHBvcnR7cyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZGVnMnJhZCBhcyBlfWZyb21cIi4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e2MgYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdmVjM2Y2NC5qc1wiO2ltcG9ydHtjcmVhdGVFbXB0eVByb2plY3RvckNhY2hlIGFzIHQscG9wdWxhdGVQcm9qZWN0b3JDYWNoZSBhcyBuLGNvcHkzIGFzIG8sUHJvamVjdGlvbklEIGFzIHMscHJvamVjdGlvblRhYmxlIGFzIGMsd2dzODRUb1dlYk1lcmNhdG9yIGFzIGl9ZnJvbVwiLi9wcm9qZWN0b3JzLmpzXCI7aW1wb3J0e2VhcnRoIGFzIGx9ZnJvbVwiLi4vc3VwcG9ydC9FbGxpcHNvaWQuanNcIjtmdW5jdGlvbiBhKGUscix0LGEpe2lmKG51bGw9PXJ8fG51bGw9PWEpcmV0dXJuITE7Y29uc3QgRT1uKHIsYSxwKTtpZihFLnByb2plY3Rvcj09PW8pcmV0dXJuIHRbMF09ZVswXSx0WzFdPWVbMV0sdFsyXT1lWzJdLHRbM109ZVszXSwhMDtpZihudWxsPT1FLnByb2plY3RvcilyZXR1cm4hMTtjb25zdHtzb3VyY2U6UixkZXN0Om19PUU7aWYobS5zcGF0aWFsUmVmZXJlbmNlSWQ9PT1zLldFQl9NRVJDQVRPUil7Y29uc3Qgcj1jW1Iuc3BhdGlhbFJlZmVyZW5jZUlkXVtzLldHUzg0XTtyZXR1cm4gbnVsbCE9ciYmKHIoZSwwLGYsMCksaShmLDAsdCwwKSx0WzNdPXUoZlsxXSxlWzJdLGVbM10sbC5yYWRpdXMpLCEwKX1pZihSLnNwYXRpYWxSZWZlcmVuY2VJZCE9PXMuV0dTODQmJlIuc3BhdGlhbFJlZmVyZW5jZUlkIT09cy5DR0NTMjAwMHx8bS5zcGF0aWFsUmVmZXJlbmNlSWQhPT1zLlBMQVRFX0NBUlJFRSl7RS5wcm9qZWN0b3IoZSwwLHQsMCk7Y29uc3Qgcj1SLm1ldGVyc1BlclVuaXQ/PzEsbj1tLm1ldGVyc1BlclVuaXQ/PzE7dFszXT1lWzNdKnIvbn1lbHNle2NvbnN0IHI9Y1tSLnNwYXRpYWxSZWZlcmVuY2VJZF1bcy5TUEhFUklDQUxfRUNFRl0sbj1jW3MuU1BIRVJJQ0FMX0VDRUZdW3MuUExBVEVfQ0FSUkVFXTtsZXQgbz1lWzNdO251bGwhPXImJm51bGwhPW4mJihvPXUoZVsxXSxlWzJdLGVbM10sbC5yYWRpdXMpKSxFLnByb2plY3RvcihlLDAsdCwwKSx0WzNdPW99cmV0dXJuITB9ZnVuY3Rpb24gdShlLHIsdCxuKXtjb25zdCBvPW4rcjtpZihvPG4vMnx8dD5vKXJldHVybiBOdW1iZXIuTUFYX1ZBTFVFO2NvbnN0IHM9TWF0aC5hYnMoRSplKStNYXRoLmFzaW4odC9vKTtyZXR1cm4gcz49TWF0aC5QSS8yP051bWJlci5NQVhfVkFMVUU6dC9NYXRoLmNvcyhzKX1jb25zdCBmPXIoKSxwPXQoKSxFPWUoMSk7ZXhwb3J0e2EgYXMgcHJvamVjdEJvdW5kaW5nU3BoZXJlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHtFc3JpUHJvbWlzZU1peGluIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9Qcm9taXNlLmpzXCI7aW1wb3J0e2lzQWJvcnRFcnJvciBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3dhdGNoIGFzIGQsaW5pdGlhbCBhcyBvLHN5bmMgYXMgbn1mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1JlY3QgYXMgdX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIF8saW50ZXJzZWN0c1NwaGVyZSBhcyBjfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7bWFrZURlaHlkcmF0ZWRQb2ludCBhcyBwfWZyb21cIi4uL2RlaHlkcmF0ZWRQb2ludC5qc1wiO2ltcG9ydHtQcm9taXNlUXVldWUgYXMgZ31mcm9tXCIuLi8uLi9zdXBwb3J0L1Byb21pc2VRdWV1ZS5qc1wiO2ltcG9ydHt2aWV3aW5nTW9kZUZyb21TdHJpbmcgYXMgbX1mcm9tXCIuLi8uLi8uLi92aWV3cy9WaWV3aW5nTW9kZS5qc1wiO2ltcG9ydHtJM1NDbGllbnROb2RlTG9hZGVyIGFzIHl9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NDbGllbnROb2RlTG9hZGVyLmpzXCI7aW1wb3J0e2FkZENhbGxiYWNrIGFzIHh9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NGcmFtZVRhc2suanNcIjtpbXBvcnR7STNTSW5kZXggYXMgZn1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0luZGV4LmpzXCI7aW1wb3J0IGIgZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NMb2RIYW5kbGluZy5qc1wiO2ltcG9ydHtOb2RlU3RhdGUgYXMgTixDYWNoZVN0YXRlIGFzIHd9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NOb2RlLmpzXCI7aW1wb3J0IHYgZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NOb2RlTG9hZGVyLmpzXCI7aW1wb3J0e0kzU1N0cmVhbURhdGFDb250cm9sbGVyIGFzIEN9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NTdHJlYW1EYXRhQ29udHJvbGxlci5qc1wiO2ltcG9ydHtnZXRWZXJ0ZXhDcnMgYXMgRCxnZXRJbmRleENycyBhcyBMLGZpbmRJbnRlcnNlY3RpbmdOb2RlcyBhcyBTfWZyb21cIi4uLy4uLy4uL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVXRpbC5qc1wiO2ltcG9ydCBWIGZyb21cIi4uLy4uLy4uL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTVmlld3BvcnRRdWVyaWVzLmpzXCI7aW1wb3J0e0ZhZGVEaXJlY3Rpb24gYXMgSX1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9sYXllcnMvc3VwcG9ydC9JM1NMYXllclZpZXcuanNcIjtpbXBvcnR7dG9Cb3VuZGluZ1JlY3QgYXMgQX1mcm9tXCIuLi8uLi8uLi92aWV3cy8zZC9zdXBwb3J0L2V4dGVudFV0aWxzLmpzXCI7aW1wb3J0e0NsaWVudFR5cGUgYXMgTSxtYXhEb3dubG9hZFNsb3RzIGFzIE99ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2Qvc3VwcG9ydC9pbmRleC5qc1wiO2ltcG9ydHttaW5RdWFsaXR5IGFzIEZ9ZnJvbVwiLi4vLi4vLi4vdmlld3MvM2Qvc3VwcG9ydC9NZW1vcnlDb250cm9sbGVyLmpzXCI7aW1wb3J0e2V4dHJhY3RTYWZlU2NhbGVCb3VuZHMgYXMgUCxzY2FsZUJvdW5kc1ByZWRpY2F0ZSBhcyBVfWZyb21cIi4uLy4uLy4uL3ZpZXdzL3N1cHBvcnQvbGF5ZXJWaWV3VXRpbHMuanNcIjtpbXBvcnR7bm9CdWRnZXQgYXMgcX1mcm9tXCIuLi8uLi8uLi92aWV3cy9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2NvbnN0IEc9XCJlc3JpLmxheWVycy5ncmFwaGljcy5jb250cm9sbGVycy5JM1NPbkRlbWFuZENvbnRyb2xsZXJcIixqPWkuZ2V0TG9nZ2VyKEcpLFQ9MTAwLFE9MixFPTFlNCxIPTFlLTQsUj0xLjIsaz01MDAsQj0xLjU7bGV0IHo9Y2xhc3MgZXh0ZW5kcyhhKHQpKXtnZXQgaXNNZXNoUHlyYW1pZCgpe3JldHVyblwibWVzaC1weXJhbWlkc1wiPT09dGhpcy5sYXllci5wcm9maWxlfHxcIk1lc2hQeXJhbWlkXCI9PT10aGlzLmxheWVyLnN0b3JlPy5sb2RUeXBlfWdldCBpc0dyYXBoaWNzM0QoKXtyZXR1cm5cInBvaW50c1wiPT09dGhpcy5sYXllci5wcm9maWxlfWdldCB1c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcygpe3JldHVybiF0aGlzLmlzTWVzaFB5cmFtaWQmJihudWxsPT10aGlzLmxheWVyLnByaW9yaXR5fHxcIkhpZ2hcIj09PXRoaXMubGF5ZXIucHJpb3JpdHkpfWdldCBpbmRleFN0cmVhbUNvbnRyb2xsZXIoKXtjb25zdCBlPXRoaXMubGF5ZXJWaWV3LnZpZXcucmVzb3VyY2VDb250cm9sbGVyLmNyZWF0ZVN0cmVhbURhdGFSZXF1ZXN0ZXIoTS5JM1NfSU5ERVgpO3JldHVybiBuZXcgQyhlLHRoaXMubGF5ZXIuYXBpS2V5KX1nZXQgZGF0YVN0cmVhbUNvbnRyb2xsZXIoKXtjb25zdCBlPXRoaXMubGF5ZXJWaWV3LnZpZXcucmVzb3VyY2VDb250cm9sbGVyLmNyZWF0ZVN0cmVhbURhdGFSZXF1ZXN0ZXIoTS5JM1NfREFUQSk7cmV0dXJuIG5ldyBDKGUsdGhpcy5sYXllci5hcGlLZXkpfWdldCBjcnNWZXJ0ZXgoKXtyZXR1cm4gRCh0aGlzLmxheWVyKX1nZXQgY3JzSW5kZXgoKXtyZXR1cm4gTCh0aGlzLmxheWVyKX1nZXQgbGF5ZXIoKXtyZXR1cm4gdGhpcy5sYXllclZpZXcuaTNzbGF5ZXJ9Z2V0IHJ1bm5pbmcoKXtyZXR1cm4gdGhpcy51cGRhdGluZ31nZXQgcm9vdE5vZGVWaXNpYmxlKCl7aWYodGhpcy5faW5kZXgpe2NvbnN0IGU9dGhpcy5faW5kZXgucm9vdE5vZGU7aWYoZSlyZXR1cm4gdGhpcy5fdXBkYXRlVmlld0RhdGEoKSx0aGlzLl9pbmRleC5pc05vZGVWaXNpYmxlKGUuaW5kZXgpfXJldHVybiEwfWdldCBpbmRleCgpe3JldHVybiB0aGlzLl9pbmRleH1nZXQgcmVxdWlyZWRBdHRyaWJ1dGVzKCl7cmV0dXJuIHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc31jb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnNjcmVlblNpemVGYWN0b3I9MCx0aGlzLmZlYXR1cmVUYXJnZXQ9NWU0LHRoaXMuZml4ZWRGZWF0dXJlVGFyZ2V0PSExLHRoaXMudXBkYXRpbmc9ITAsdGhpcy51cGRhdGluZ1Byb2dyZXNzPTEsdGhpcy5sZWF2ZXNSZWFjaGVkPSExLHRoaXMuc2NhbGVWaXNpYmlsaXR5RW5hYmxlZD0hMCx0aGlzLndvcmtlcj1udWxsLHRoaXMuX2ZlYXR1cmVMT0Q9MSx0aGlzLl9zdGFibGVGZWF0dXJlTE9EPSExLHRoaXMuX2lzSWRsZT0hMSx0aGlzLl9jYW1lcmFEaXJ0eT0hMCx0aGlzLl9pbnZpc2libGVEaXJ0eT0hMSx0aGlzLl9pZGxlU3RhdGVDYWxsYmFja3M9bnVsbCx0aGlzLl9uZXdMb2FkaW5nTm9kZXM9bmV3IHMoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLl9sb2FkZWROb2RlU2NhbGVzPW5ldyBNYXAsdGhpcy5fbW9kaWZpY2F0aW9uc05vZGVGaWx0ZXJpbmdBcnJheT1uZXcgcyx0aGlzLl9kb3dubG9hZGluZ0NvdW50PTAsdGhpcy5fbG9hZGluZ05vZGVzPW5ldyBNYXAsdGhpcy5fdXBkYXRpbmdOb2Rlcz1uZXcgTWFwLHRoaXMuX3Byb2dyZXNzTWF4TnVtTm9kZXM9MSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXM9bmV3IEFycmF5LHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlc0RpcnR5PSEwLHRoaXMuX3VwZGF0ZXNEaXNhYmxlZD0hMSx0aGlzLmRpc2FibGVJREJDYWNoZT0hMSx0aGlzLl9kaXNhYmxlTWVtQ2FjaGU9ITEsdGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nPSExLHRoaXMuX2ZpZWxkcz1udWxsLHRoaXMuX2F0dHJpYnV0ZVN0b3JhZ2VJbmZvPW51bGwsdGhpcy5faWRsZVF1ZXVlPW5ldyBnLHRoaXMuX2VsZXZhdGlvblVwZGF0ZU5vZGVzPW5ldyBzKHtkZWFsbG9jYXRvcjpudWxsfSksdGhpcy5fZXJyb3JDb3VudD0wfWluaXRpYWxpemUoKXtjb25zdHtsYXllclZpZXc6ZSxsYXllcjp0fT10aGlzO3RoaXMuX2Rpc2FibGVNZW1DYWNoZT0hZS5sb2FkQ2FjaGVkR1BVRGF0YXx8IWUuYWRkQ2FjaGVkR1BVRGF0YSx0aGlzLl9sb2RIYW5kbGluZz1uZXcgYihlKSx0aGlzLl9kZWZhdWx0R2VvbWV0cnlTY2hlbWE9dC5zdG9yZS5kZWZhdWx0R2VvbWV0cnlTY2hlbWEsdGhpcy5kaXNhYmxlSURCQ2FjaGU9aGFzKFwiZGlzYWJsZS1mZWF0dXJlOmlkYi1jYWNoZVwiKSxcImZpZWxkc1wiaW4gdCYmKHRoaXMuX2ZpZWxkcz10LmZpZWxkcyx0aGlzLl9hdHRyaWJ1dGVTdG9yYWdlSW5mbz10LmF0dHJpYnV0ZVN0b3JhZ2VJbmZvKSx0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UoUHJvbWlzZS5hbGwoW3QuaW5kZXhJbmZvLHQud2hlbigpLGUud2hlbigpXSkudGhlbigoKFtpXSk9PntpZih0aGlzLmRlc3Ryb3llZHx8IWV8fGUuZGVzdHJveWVkfHwhaSlyZXR1cm47Y29uc3R7dmlldzpzLGNsaWVudEdlb21ldHJ5OmF9PWUse3Jlc291cmNlQ29udHJvbGxlcjpyfT1zO2lmKHRoaXMuX3NldENsaXBwaW5nQXJlYShzLmNsaXBwaW5nQXJlYSksdGhpcy5hZGRIYW5kbGVzKFtkKCgoKT0+cz8ucG9pbnRzT2ZJbnRlcmVzdD8uZm9jdXM/LnJlbmRlckxvY2F0aW9uKSwoZT0+dGhpcy5fcG9pbnRPZkludGVyZXN0Q2hhbmdlZChlKSksbyksZCgoKCk9PnMucXVhbGl0eSksKCgpPT50aGlzLl9zZXRDYW1lcmFEaXJ0eSgpKSxuKSxkKCgoKT0+ZS5jb250ZW50VmlzaWJsZSksKGU9Pntjb25zdCB0PWU/KCk9PnRoaXMuX3VwZGF0ZUlkbGVTdGF0ZSghMCk6KCk9PnRoaXMuX3VwZGF0ZVZpZXdEYXRhKCksaT1lPygpPT50aGlzLl91cGRhdGVJZGxlU3RhdGUoITEpOigpPT57fTtlJiZudWxsIT10aGlzLl9pbmRleCYmdGhpcy5faW5kZXguaW52YWxpZGF0ZUFsbEVsZXZhdGlvblJhbmdlcygpLHRoaXMuX2lkbGVTdGF0ZUNhbGxiYWNrcz8oZXx8dGhpcy5jYW5jZWxOb2RlTG9hZGluZygpLHRoaXMucmVzdGFydE5vZGVMb2FkaW5nKCksdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzLmlkbGVCZWdpbj10LHRoaXMuX2lkbGVTdGF0ZUNhbGxiYWNrcy5pZGxlRW5kPWkpOnRoaXMuX2lkbGVTdGF0ZUNhbGxiYWNrcz1yLnNjaGVkdWxlci5yZWdpc3RlcklkbGVTdGF0ZUNhbGxiYWNrcyh0LGkpfSksbykseChlLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLnNjaGVkdWxlcix0aGlzKSxkKCgoKT0+ZS51bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZCksKCgpPT50aGlzLnJlc3RhcnROb2RlTG9hZGluZygpKSksZCgoKCk9Plt0aGlzLmZlYXR1cmVUYXJnZXQsdGhpcy5maXhlZEZlYXR1cmVUYXJnZXRdKSwoKCk9Pnt0aGlzLl9zZXRDYW1lcmFEaXJ0eSgpLHRoaXMuX3N0YWJsZUZlYXR1cmVMT0Q9ITF9KSksZCgoKCk9PnMuc3RhdGU/LmNvbnRlbnRDYW1lcmEpLCgoKT0+dGhpcy5fc2V0Q2FtZXJhRGlydHkoKSkpLGQoKCgpPT50LmVsZXZhdGlvbkluZm8pLChlPT50aGlzLl9lbGV2YXRpb25JbmZvQ2hhbmdlZChlKSkpLGQoKCgpPT50LmVmZmVjdGl2ZVNjYWxlUmFuZ2UpLCgoKT0+dGhpcy5fc2NhbGVCb3VuZHNDaGFuZ2VkKCkpKSxkKCgoKT0+ZS5sb2RGYWN0b3IpLCgoKT0+dGhpcy5fc2V0Q2FtZXJhRGlydHkoKSkpLGQoKCgpPT5lLmF2YWlsYWJsZUZpZWxkcyksKCgpPT50aGlzLl9yZXF1aXJlZEZpZWxkc0NoYW5nZSgpKSksZCgoKCk9PmUuaG9sZUZpbGxpbmcpLChlPT5udWxsIT10aGlzLl9pbmRleCYmKHRoaXMuX2luZGV4LmhvbGVGaWxsaW5nPWUpKSldKSx0aGlzLl91cGRhdGVTY2FsZUhhbmRsZXMoKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXM9bmV3IFYodGhpcy5jcnNJbmRleCxzLnJlbmRlckNvb3Jkc0hlbHBlcixzLnN0YXRlLmNvbnRlbnRDYW1lcmEsIXMuc3RhdGUuZml4ZWRDb250ZW50Q2FtZXJhfHx0aGlzLmlzR3JhcGhpY3MzRCx0aGlzLl9jbGlwcGluZ0FyZWEsdGhpcy5pc01lc2hQeXJhbWlkP3MuYmFzZW1hcFRlcnJhaW46cy5lbGV2YXRpb25Qcm92aWRlcixtKHMudmlld2luZ01vZGUpLHRoaXMubGF5ZXIuZWxldmF0aW9uSW5mbyx7cHJvZ3Jlc3NpdmVMb2FkRmFjdG9yOnRoaXMuX2dldFByb2dyZXNzaXZlTG9hZEZhY3RvcigpLHNjcmVlbnNwYWNlRXJyb3JCaWFzOnRoaXMuX2xvZCxhbmdsZURlcGVuZGVudExvRDp0aGlzLl9sb2Q8LjV9KSx0aGlzLl9jbGllbnROb2RlTG9hZGVyPW5ldyB5KHRoaXMubGF5ZXIudWlkLHtpbmRleFNSOnRoaXMuY3JzSW5kZXgsdmVydGV4U1I6dGhpcy5jcnNWZXJ0ZXgscmVuZGVyU1I6cy5yZW5kZXJDb29yZHNIZWxwZXIuc3BhdGlhbFJlZmVyZW5jZSxsb2NhbE1vZGU6XCJsb2NhbFwiPT09cy52aWV3aW5nTW9kZX0scy5yZXNvdXJjZUNvbnRyb2xsZXIubWVtb3J5Q29udHJvbGxlcix0aGlzLndvcmtlciksdGhpcy5faW5kZXg9bmV3IGYodCxpLHRoaXMuaW5kZXhTdHJlYW1Db250cm9sbGVyLHRoaXMuX2NsaWVudE5vZGVMb2FkZXIsdGhpcy5fdmlld3BvcnRRdWVyaWVzLGosZS5ob2xlRmlsbGluZywodD0+ZS5pc05vZGVMb2FkZWQodCkpLCh0PT5lLmlzTm9kZVJlbG9hZGluZyh0KSksKGU9PnRoaXMuX3Nob3VsZExvYWROb2RlKGUpKSwoZT0+dGhpcy5fZW5hYmxlRnJvbUdQVUNhY2hlKGUsTi5MZWFmKSksKGU9PnRoaXMuX25lZWRzVXBkYXRlKGUpKSwoKCk9PiF0aGlzLmluZGV4U3RyZWFtQ29udHJvbGxlci5idXN5KSwodD0+ZS5jb21wdXRlVmlzaWJpbGl0eU9iYj9lLmNvbXB1dGVWaXNpYmlsaXR5T2JiKHQpOm51bGwpLGU/LmNvbXB1dGVOb2RlRmlsdGVyaW5nP3Q9PmUuY29tcHV0ZU5vZGVGaWx0ZXJpbmcodCk6dm9pZCAwKSx0aGlzLl9pbmRleC51cGRhdGVFbGV2YXRpb25JbmZvKHRoaXMubGF5ZXIuZWxldmF0aW9uSW5mbyx0aGlzLmlzTWVzaFB5cmFtaWR8fHRoaXMuaXNHcmFwaGljczNEKSx0aGlzLl9pbmRleC5pbU1vZGlmaWNhdGlvbnNDaGFuZ2VkKCEhZS5oYXNNb2RpZmljYXRpb25zKSx0aGlzLl9pbmRleC5sYXllckZpbHRlckNoYW5nZWQoISFlLmhhc0dlb21ldHJ5RmlsdGVyKSxudWxsIT1hKXtmb3IoY29uc3QgZSBvZiBhKXRoaXMuX2FkZE1lc2goZS5tZXNoLGUub2lkKTt0aGlzLmFkZEhhbmRsZXMoYS5vbihcImNoYW5nZVwiLChlPT57Zm9yKGNvbnN0IHQgb2YgZS5yZW1vdmVkKXRoaXMuX3JlbW92ZU1lc2godC5vaWQpO2Zvcihjb25zdCB0IG9mIGUuYWRkZWQpdGhpcy5fYWRkTWVzaCh0Lm1lc2gsdC5vaWQpfSkpKX10aGlzLl9zdGFydE5vZGVMb2FkaW5nKCl9KSkpLHRoaXMuX3RtcFBvaW50PXAoMCwwLDAsdGhpcy5jcnNJbmRleCl9dXBkYXRlTm9kZU1vZGlmaWNhdGlvblN0YXR1cyhlKXtjb25zdCB0PXRoaXMuX2luZGV4LGk9dGhpcy5sYXllclZpZXc7bnVsbCE9dCYmaT8udXBkYXRlTm9kZU1vZGlmaWNhdGlvblN0YXR1cyYmKHRoaXMuX21vZGlmaWNhdGlvbnNOb2RlRmlsdGVyaW5nQXJyYXkuY2xlYXIoKSxlLmZvckFsbCgoZT0+e2NvbnN0IGk9dC5nZXROb2RlKGUpO251bGwhPWkmJnRoaXMuX21vZGlmaWNhdGlvbnNOb2RlRmlsdGVyaW5nQXJyYXkucHVzaChpKX0pKSxpLnVwZGF0ZU5vZGVNb2RpZmljYXRpb25TdGF0dXModGhpcy5fbW9kaWZpY2F0aW9uc05vZGVGaWx0ZXJpbmdBcnJheSksdGhpcy5faW52aXNpYmxlRGlydHk9ITApfWRlc3Ryb3koKXt0aGlzLmNhbmNlbE5vZGVMb2FkaW5nKCksdGhpcy5faWRsZVN0YXRlQ2FsbGJhY2tzJiYodGhpcy5faXNJZGxlPSExLHRoaXMuX2lkbGVTdGF0ZUNhbGxiYWNrcy5yZW1vdmUoKSx0aGlzLl9pZGxlU3RhdGVDYWxsYmFja3M9bnVsbCksdGhpcy5fbm9kZUxvYWRlcj1udWxsLEsucHJ1bmUoKSxudWxsIT1XJiYoVy5oaWRlKCksVz1udWxsKX1fZ2V0UmVxdWlyZWRBdHRyaWJ1dGVzKCl7aWYobnVsbD09dGhpcy5fYXR0cmlidXRlU3RvcmFnZUluZm98fCF0aGlzLl9maWVsZHN8fCF0aGlzLmxheWVyVmlldy5hdmFpbGFibGVGaWVsZHMpcmV0dXJuW107Y29uc3QgZT10aGlzLl9hdHRyaWJ1dGVTdG9yYWdlSW5mbyx0PXRoaXMuX2ZpZWxkcyxpPXRoaXMubGF5ZXIub2JqZWN0SWRGaWVsZDtyZXR1cm4gdGhpcy5sYXllclZpZXcuYXZhaWxhYmxlRmllbGRzLm1hcCgoaT0+e2NvbnN0IHM9JChlLGkpLGE9JCh0LGkpO3JldHVybiBzPj0wJiZhPj0wP3tpbmRleDpzLG5hbWU6dFthXS5uYW1lLGZpZWxkOnRbYV0sYXR0cmlidXRlU3RvcmFnZUluZm86ZVtzXX06bnVsbH0pKS5maWx0ZXIoKGU9Pm51bGwhPWUmJmUubmFtZSE9PWkpKX1fcmVxdWlyZWRGaWVsZHNDaGFuZ2UoKXtjb25zdCBlPXRoaXMuX2dldFJlcXVpcmVkQXR0cmlidXRlcygpO1godGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzLGUpfHwodGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzPWUsdGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzRGlydHk9ITEsdGhpcy5yZXN0YXJ0Tm9kZUxvYWRpbmcoKSl9cmVxdWVzdFVwZGF0ZSgpe3RoaXMuX3JlcXVpcmVkQXR0cmlidXRlc0RpcnR5PSEwLHRoaXMucmVzdGFydE5vZGVMb2FkaW5nKCl9X3NldENsaXBwaW5nQXJlYShlKXtjb25zdCB0PV8oKTtBKGUsdCx0aGlzLmxheWVyVmlldy52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UpP3RoaXMuX2NsaXBwaW5nQXJlYT10OnRoaXMuX2NsaXBwaW5nQXJlYT1udWxsfV9wb2ludE9mSW50ZXJlc3RDaGFuZ2VkKGUpe251bGwhPXRoaXMuX3ZpZXdwb3J0UXVlcmllcyYmKHRoaXMuX3ZpZXdwb3J0UXVlcmllcy5zZXRQb2ludE9mSW50ZXJlc3QoZSksbnVsbCE9dGhpcy5faW5kZXgmJih0aGlzLl9pbmRleC5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5PUouZGlzdGFuY2VQZW5hbHR5KnRoaXMuX3ZpZXdwb3J0UXVlcmllcy5kaXN0Q2FtZXJhVG9QT0koKSx0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCkpKX11cGRhdGVDbGlwcGluZ0FyZWEoZSl7dGhpcy5fc2V0Q2xpcHBpbmdBcmVhKGUpLG51bGwhPXRoaXMuX3ZpZXdwb3J0UXVlcmllcyYmbnVsbCE9dGhpcy5faW5kZXgmJih0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlQ2xpcHBpbmdBcmVhKHRoaXMuX2NsaXBwaW5nQXJlYSksdGhpcy5faW5kZXguaW52YWxpZGF0ZVZpc2liaWxpdHlDYWNoZSgpKSx0aGlzLl9zZXRDYW1lcmFEaXJ0eSgpfV9zZXRDYW1lcmFEaXJ0eSgpe3RoaXMuX2NhbWVyYURpcnR5PSEwLHRoaXMuX2xvZEhhbmRsaW5nLnNldExvZEdsb2JhbERpcnR5KCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpfV9hZGRNZXNoKGUsdCl7aWYobnVsbD09dGhpcy5faW5kZXgpcmV0dXJuO2NvbnN0IGk9dGhpcy5fY2xpZW50Tm9kZUxvYWRlci5jcmVhdGVNZXNoTm9kZUluZm8oZSx0KSxzPXRoaXMuX2luZGV4LmFkZENsaWVudE5vZGVUb0luZGV4KGkuaWQsaS5tYnMpO3RoaXMuX2NsaWVudE5vZGVMb2FkZXIuYWRkTWVzaE5vZGUocyxpKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJyb290Tm9kZVZpc2libGVcIil9X3JlbW92ZU1lc2goZSl7Y29uc3QgdD10aGlzLl9jbGllbnROb2RlTG9hZGVyLmdldE1lc2hOb2RlSW5kZXgoZSk7aWYobnVsbCE9dCl7aWYobnVsbD09dGhpcy5faW5kZXgpdGhyb3cgbmV3IEVycm9yKFwiZGVsYXllZCByZW1vdmFsIG9mIGNsaWVudCBzaWRlIGkzcyBub2RlIGdlb21ldHJ5IG5vdCBzdXBwb3J0ZWQgeWV0LlwiKTt7Y29uc3QgZT0oZSx0KT0+e3RoaXMubGF5ZXJWaWV3LnJlbW92ZU5vZGUodCksdGhpcy5fbG9hZGVkTm9kZVNjYWxlcy5kZWxldGUodCksdGhpcy5fY2xpZW50Tm9kZUxvYWRlci5yZW1vdmVOb2RlKGUpLHRoaXMubGF5ZXJWaWV3LmRlbGV0ZUNhY2hlZE5vZGVEYXRhJiZudWxsIT1lJiZ0aGlzLmxheWVyVmlldy5kZWxldGVDYWNoZWROb2RlRGF0YShlKSx0aGlzLmxheWVyVmlldy5kZWxldGVDYWNoZWRHUFVEYXRhPy4odGhpcy5sYXllclZpZXcubG9hZENhY2hlZEdQVURhdGE/Lih0KSl9LGk9KGUsdCxpKT0+e3RoaXMuX2NsaWVudE5vZGVMb2FkZXIudXBkYXRlTm9kZUluZGV4KGUsdCxpKSx0aGlzLmxheWVyVmlldy51cGRhdGVOb2RlSW5kZXgmJnRoaXMubGF5ZXJWaWV3LnVwZGF0ZU5vZGVJbmRleCh0LGkpfTt0aGlzLl9pbmRleC5yZW1vdmVDbGllbnROb2RlRnJvbUluZGV4KHQsZSxpKSx0aGlzLm5vdGlmeUNoYW5nZShcInJvb3ROb2RlVmlzaWJsZVwiKX19fXVwZGF0ZUVsZXZhdGlvbkNoYW5nZWQoZSx0KXtjb25zdCBpPXRoaXMuX2luZGV4O2lmKG51bGw9PWk/LnJvb3ROb2RlfHxudWxsPT10KXJldHVybiBudWxsO3RoaXMuY3JzSW5kZXguZXF1YWxzKHQpfHwodShlLHQsWSx0aGlzLmNyc0luZGV4KSxlPVkpO2NvbnN0IHM9dGhpcy5fZWxldmF0aW9uVXBkYXRlTm9kZXM7cmV0dXJuIHMuY2xlYXIoKSxTKGUsaS5yb290Tm9kZSxpLChlPT5zLnB1c2goZS5pbmRleCkpKSxzLmxlbmd0aCYmKHMuZm9yQWxsKChlPT5pLnVwZGF0ZUVsZXZhdGlvbkNoYW5nZWQoZSkpKSx0aGlzLl9zZXRDYW1lcmFEaXJ0eSgpKSxzfXJlbW92ZUFsbEdlb21ldHJ5T2Jicygpe251bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZW1vdmVBbGxHZW9tZXRyeU9iYnMoKX1nZXRSZW5kZXJNYnMoZSl7cmV0dXJuIG51bGwhPXRoaXMuX3ZpZXdwb3J0UXVlcmllcz90aGlzLl92aWV3cG9ydFF1ZXJpZXMuZ2V0UmVuZGVyTWJzKGUpOm51bGx9X2VsZXZhdGlvbkluZm9DaGFuZ2VkKGUpe251bGwhPXRoaXMuX2luZGV4JiYodGhpcy5faW5kZXgudXBkYXRlRWxldmF0aW9uSW5mbyhlLHRoaXMuaXNNZXNoUHlyYW1pZHx8dGhpcy5pc0dyYXBoaWNzM0QpLHRoaXMuX3NldENhbWVyYURpcnR5KCkpfV91cGRhdGVTY2FsZUhhbmRsZXMoKXtjb25zdCBlPVwic2NhbGUtYm91bmRzXCI7dGhpcy5yZW1vdmVIYW5kbGVzKGUpLHRoaXMuX2FyZVNjYWxlQm91bmRzQWN0aXZlJiZ0aGlzLmFkZEhhbmRsZXModGhpcy5sYXllclZpZXcudmlldy5iYXNlbWFwVGVycmFpbi5vbihcInNjYWxlLWNoYW5nZVwiLChlPT50aGlzLl9zY2FsZVVwZGF0ZUhhbmRsZXIoZSkpKSxlKX1fc2NhbGVCb3VuZHNDaGFuZ2VkKCl7dGhpcy5fYXJlU2NhbGVCb3VuZHNBY3RpdmV8fHRoaXMuX2xvYWRlZE5vZGVTY2FsZXMuY2xlYXIoKSx0aGlzLl91cGRhdGVTY2FsZUhhbmRsZXMoKSx0aGlzLl9zZXRDYW1lcmFEaXJ0eSgpfV9zY2FsZVVwZGF0ZUhhbmRsZXIoZSl7dGhpcy5fdXBkYXRlU2NhbGVJbkJvdW5kaW5nUmVjdChlLmV4dGVudCxlLnNwYXRpYWxSZWZlcmVuY2UpLHRoaXMuX3NldENhbWVyYURpcnR5KCl9X3VwZGF0ZVNjYWxlSW5Cb3VuZGluZ1JlY3QoZSx0KXtjb25zdCBpPXRoaXMuX2luZGV4O2lmKG51bGw9PWkpcmV0dXJuO251bGwhPWkucm9vdE5vZGUmJnUoZSx0LFksdGhpcy5jcnNJbmRleCkmJnRoaXMuX2xvYWRlZE5vZGVTY2FsZXMuZm9yRWFjaCgoKGUsdCk9Pntjb25zdCBzPWkuZ2V0Tm9kZSh0KTtudWxsIT1zJiZjKFkscy5tYnMpJiZ0aGlzLl9sb2FkZWROb2RlU2NhbGVzLnNldCh0LHRoaXMuX2NvbXB1dGVTY2FsZShzKSl9KSl9cmVzdGFydE5vZGVMb2FkaW5nKCl7dGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nPSEwLHRoaXMuY2FuY2VsTm9kZUxvYWRpbmcoKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCl9c2NoZWR1bGUoZSx0KXtyZXR1cm4gdGhpcy5faWRsZVF1ZXVlLnB1c2goZSx0KX1yZXNjaGVkdWxlKGUsdCl7cmV0dXJuIHRoaXMuX2lkbGVRdWV1ZS51bnNoaWZ0KGUsdCl9Z2V0IF9pc0ludGVncmF0ZWRNZXNoKCl7cmV0dXJuXCJpbnRlZ3JhdGVkLW1lc2hcIj09PXRoaXMubGF5ZXIudHlwZX1nZXQgX2FyZVNjYWxlQm91bmRzQWN0aXZlKCl7Y29uc3R7bWluU2NhbGU6ZSxtYXhTY2FsZTp0fT1QKHRoaXMubGF5ZXIpO3JldHVybiB0aGlzLnNjYWxlVmlzaWJpbGl0eUVuYWJsZWQmJihlPjB8fHQ+MCl9Z2V0IHVubG9hZGVkTWVtb3J5RXN0aW1hdGUoKXtyZXR1cm4gbnVsbCE9dGhpcy5faW5kZXgmJnRoaXMubGF5ZXJWaWV3LmNvbnRlbnRWaXNpYmxlP3RoaXMuX2luZGV4LnVubG9hZGVkTWVtb3J5RXN0aW1hdGUqdGhpcy5fbG9kRHJvcEZhY3RvcjowfWFzeW5jIF9sb2FkTm9kZURhdGEoZSx0KXtyZXR1cm4gZS5pbmRleDwwP3RoaXMuX2NsaWVudE5vZGVMb2FkZXIubG9hZE5vZGVEYXRhKGUuaWQsdCk6dGhpcy5fbm9kZUxvYWRlci5sb2FkTm9kZURhdGEoZSx0KX1hc3luYyBfbG9hZEF0dHJpYnV0ZXMoZSx0LGkpe3JldHVybihlLmluZGV4PDA/dGhpcy5fY2xpZW50Tm9kZUxvYWRlcjp0aGlzLl9ub2RlTG9hZGVyKS5sb2FkQXR0cmlidXRlcyhlLHQsaSl9Z2V0IGluZGV4RGVwdGgoKXtyZXR1cm4gbnVsbCE9dGhpcy5faW5kZXg/dGhpcy5faW5kZXgubWF4TGV2ZWw6MH1zZXQgZGlzYWJsZU1lbUNhY2hlKGUpe3RoaXMubGF5ZXJWaWV3LmxvYWRDYWNoZWRHUFVEYXRhJiZ0aGlzLmxheWVyVmlldy5hZGRDYWNoZWRHUFVEYXRhfHwodGhpcy5fZGlzYWJsZU1lbUNhY2hlPSEwKSx0aGlzLl9kaXNhYmxlTWVtQ2FjaGU9ZX1ydW5UYXNrKGUsdCl7cmV0dXJuIHRoaXMubGF5ZXJWaWV3LmNvbnRlbnRWaXNpYmxlP3RoaXMubGF5ZXJWaWV3LnZpc2libGUmJm51bGwhPXRoaXMuX2luZGV4Pyh0aGlzLl9wcm9jZXNzV2l0aEVycm9yTG9nZ2luZyhlLHQpLHRoaXMuX2luZGV4Lm1heFByaW9yaXR5KTotMS8wOih0aGlzLl91cGRhdGVWaWV3RGF0YSgpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKSwtMS8wKX1fcHJvY2Vzc1dpdGhFcnJvckxvZ2dpbmcoZSx0KXt0cnl7dGhpcy5fcHJvY2VzcyhlLHQpfWNhdGNoKGkpe3RoaXMuX2Vycm9yQ291bnQ8NTA/ai5lcnJvcihcIkVycm9yIGR1cmluZyBwcm9jZXNzaW5nOiBcIitpKTo1MD09PXRoaXMuX2Vycm9yQ291bnQmJmouZXJyb3IoXCJUb28gbWFueSBlcnJvcnMgZm9yIHRoaXMgbGF5ZXIuIEZ1cnRoZXIgZXJyb3JzIHdpbGwgbm90IGJlIGRpc3BsYXllZC5cIiksdGhpcy5fZXJyb3JDb3VudCsrfX1fcHJvY2VzcyhlLHQpe3RoaXMuX3Jlc3RhcnROb2RlTG9hZGluZyYmdGhpcy5fc3RhcnROb2RlTG9hZGluZygpLG51bGwhPXRoaXMuX25vZGVMb2FkZXImJm51bGwhPXRoaXMuX2luZGV4JiYodGhpcy5fdXBkYXRlVmlld0RhdGEoKSx0aGlzLl9pbnZpc2libGVEaXJ0eSYmdGhpcy5fcmVtb3ZlSW52aXNpYmxlTm9kZXMoZSkmJih0aGlzLl9pbnZpc2libGVEaXJ0eT0hMSksdGhpcy5faXNJbnRlZ3JhdGVkTWVzaCYmKGUuZW5hYmxlZD0hMSksZS5ydW4oKCgpPT50aGlzLl9wcm9jZXNzSW5kZXgoZSkpKSx0aGlzLl91cGRhdGVGZWF0dXJlTE9EKCksZS5ydW4oKCgpPT50aGlzLl9wcm9jZXNzQ2FjaGUoZSkpKSx0aGlzLl9pc0ludGVncmF0ZWRNZXNoJiYoZS5lbmFibGVkPSEwKSxlLnJ1bigoKCk9PnRoaXMuX3Byb2Nlc3NOb2RlcyhlLHQpKSksdGhpcy5faWRsZVF1ZXVlLnJ1blRhc2soZSksZS5ydW4oKCgpPT50aGlzLl9wcmVmZXRjaEluZGV4KCkpKSx0Lm51bUluZGV4TG9hZGluZys9dGhpcy5faW5kZXguaW5kZXhMb2FkaW5nLHQubnVtTm9kZXNMb2FkaW5nKz10aGlzLl9kb3dubG9hZGluZ0NvdW50LGUucnVuKCgoKT0+dGhpcy5fbG9kSGFuZGxpbmcubG9kR2xvYmFsSGFuZGxpbmcoZSkpKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCkpfV9wcm9jZXNzSW5kZXgoZSl7aWYobnVsbD09dGhpcy5faW5kZXgpcmV0dXJuITE7aWYodGhpcy5faW5kZXguZGlydHkpe3RoaXMuX25ld0xvYWRpbmdOb2Rlcy5jbGVhcigpLHRoaXMuX2luZGV4LnVwZGF0ZShBcnJheS5mcm9tKHRoaXMuX2xvYWRpbmdOb2Rlcy5rZXlzKCkpLGUsKGU9PnRoaXMudXBkYXRlTm9kZU1vZGlmaWNhdGlvblN0YXR1cyhlKSkpLHRoaXMuX2Rpc2FibGVNZW1DYWNoZXx8KHRoaXMuX25ld0xvYWRpbmdOb2Rlcy5wdXNoQXJyYXkodGhpcy5faW5kZXgudXBkYXRlcy5hZGQuZGF0YSx0aGlzLl9pbmRleC51cGRhdGVzLmFkZC5sZW5ndGgpLHRoaXMuX25ld0xvYWRpbmdOb2Rlcy5wdXNoQXJyYXkodGhpcy5faW5kZXgudXBkYXRlcy5taXNzaW5nLmRhdGEsdGhpcy5faW5kZXgudXBkYXRlcy5taXNzaW5nLmxlbmd0aCkpO2NvbnN0IHQ9dGhpcy5faW5kZXguZmVhdHVyZUVzdGltYXRlLmxlYXZlc1JlYWNoZWQ7dGhpcy5faW5kZXguaXNMb2FkaW5nfHx0PT09dGhpcy5fZ2V0KFwibGVhdmVzUmVhY2hlZFwiKXx8dGhpcy5fc2V0KFwibGVhdmVzUmVhY2hlZFwiLHQpfXJldHVybiB0aGlzLl9pbmRleC5sb2FkKCl9X3ByZWZldGNoSW5kZXgoKXtyZXR1cm4hKG51bGw9PXRoaXMuX2luZGV4fHx0aGlzLl9sb2FkaW5nTm9kZXMuc2l6ZT4wfHx0aGlzLl9pbmRleC51cGRhdGVzLmFkZC5sZW5ndGg+MCkmJnRoaXMuX2luZGV4LnByZWZldGNoKCl9X3VwZGF0ZUZlYXR1cmVMT0QoKXtpZighdGhpcy51c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc3x8bnVsbD09dGhpcy5faW5kZXh8fG51bGw9PXRoaXMuX3ZpZXdwb3J0UXVlcmllcylyZXR1cm47Y29uc3QgZT0hdGhpcy5faW5kZXguaXNMb2FkaW5nLHQ9dGhpcy5mZWF0dXJlVGFyZ2V0KnRoaXMuX2Jhc2VMT0QsaT10aGlzLl9pbmRleC5mZWF0dXJlRXN0aW1hdGU7aWYoaS5lc3RpbWF0ZT1pLmVzdGltYXRlfHx0LzIsdGhpcy5faW5kZXguaW5kZXhNaXNzaW5nPmspe2lmKHRoaXMuX2ZlYXR1cmVMT0Q8PUgpcmV0dXJuO3RoaXMuX2ZlYXR1cmVMT0QvPUIsdGhpcy5fc3RhYmxlRmVhdHVyZUxPRD0hMX1lbHNlIGlmKGUmJmkuZXN0aW1hdGU8dCl7aWYoaS5sZWF2ZXNSZWFjaGVkfHx0aGlzLl9mZWF0dXJlTE9EPj1FfHx0aGlzLl9zdGFibGVGZWF0dXJlTE9EKXJldHVybjtjb25zdCBlPU1hdGgubWluKDEwLE1hdGgubWF4KHQvaS5lc3RpbWF0ZSwxLjAwMSkpO3RoaXMuX2ZlYXR1cmVMT0QqPWU7Y29uc3Qgcz10aGlzLl9sb2QsYT10aGlzLl9pbmRleC5jaGVja0ZlYXR1cmVUYXJnZXQodCxzKTthIT09cyYmKHRoaXMuX2ZlYXR1cmVMT0Q9YS90aGlzLl9iYXNlTE9ELHRoaXMuX3N0YWJsZUZlYXR1cmVMT0Q9ITApfWVsc2V7aWYoIShpLmVzdGltYXRlPnQqUnx8ZSYmaS5lc3RpbWF0ZT50KSlyZXR1cm47aWYodGhpcy5fZmVhdHVyZUxPRDw9SClyZXR1cm47dGhpcy5fZmVhdHVyZUxPRC89MSsuMjUqKGkuZXN0aW1hdGUvdC0xKSx0aGlzLl9zdGFibGVGZWF0dXJlTE9EPSExfXRoaXMuX2ZlYXR1cmVMT0Q9TWF0aC5taW4oRSxNYXRoLm1heChILHRoaXMuX2ZlYXR1cmVMT0QpKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXModGhpcy5fbG9kKSx0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCl9X3Byb2Nlc3NDYWNoZShlKXtjb25zdCB0PXRoaXMuX2luZGV4O2lmKG51bGw9PXQpcmV0dXJuITE7Zm9yKDt0aGlzLl9uZXdMb2FkaW5nTm9kZXMubGVuZ3RoPjAmJiFlLmRvbmU7KXtjb25zdCBpPXRoaXMuX25ld0xvYWRpbmdOb2Rlcy5wb3AoKTtmb3IobGV0IHM9dC5nZXRQYXJlbnQoaSk7bnVsbCE9cyYmKCF0aGlzLmxheWVyVmlldy5pc05vZGVMb2FkZWQocy5pbmRleCkmJnRoaXMuX2lzTm9kZUluU2NhbGVCb3VuZHMocykpO3M9dC5nZXRQYXJlbnQocy5pbmRleCkpaWYodGhpcy5fZW5hYmxlRnJvbUdQVUNhY2hlKHMsTi5Ib2xlKSl7ZS5tYWRlUHJvZ3Jlc3MoKTticmVha319cmV0dXJuIGUuaGFzUHJvZ3Jlc3NlZH1fcHJvY2Vzc05vZGVzKGUsdCl7aWYobnVsbD09dGhpcy5faW5kZXgpcmV0dXJuITE7bGV0IGk9KHRoaXMuX2lzSWRsZT9UOlEpLXRoaXMuX2xvYWRpbmdOb2Rlcy5zaXplO2NvbnN0IHM9dGhpcy5faW5kZXgudXBkYXRlcztmb3Iocy5jYW5jZWwuZm9yRWFjaCh0aGlzLl9jYW5jZWxOb2RlLHRoaXMpLHMuY2FuY2VsPVtdO3MucmVtb3ZlLmxlbmd0aD4wJiYhZS5kb25lOyl0aGlzLmxheWVyVmlldy5yZW1vdmVOb2RlKHMucmVtb3ZlLnBvcCgpKSxlLm1hZGVQcm9ncmVzcygpO2Zvcig7cy51cGRhdGUubGVuZ3RoPjAmJiFlLmRvbmU7KXtjb25zdCB0PXRoaXMuX2luZGV4LmdldE5vZGUocy51cGRhdGUucG9wKCkpO251bGwhPXQmJih0aGlzLl91cGRhdGVMb2FkZWROb2RlKHQpLGUubWFkZVByb2dyZXNzKCkpfWZvcig7cy5hZGQubGVuZ3RoPjAmJiFlLmRvbmUmJmk+MDspey0taTtjb25zdCBhPXRoaXMuX2luZGV4LmdldE5vZGUocy5hZGQuYmFjaygpKTtpZihudWxsPT1hfHxhLmNhY2hlU3RhdGUhPT13LkNhY2hlZCYmIXRoaXMuX2hhc05vZGVMb2FkVG9rZW4odCkpYnJlYWs7cy5hZGQucG9wKCksdGhpcy5fbG9hZE5vZGUoYSksZS5tYWRlUHJvZ3Jlc3MoKX1yZXR1cm4gZS5oYXNQcm9ncmVzc2VkfV9jYW5jZWxBbGxOb2Rlcygpe3RoaXMuX2xvYWRpbmdOb2Rlcy5mb3JFYWNoKChlPT5lLmFib3J0KCkpKSx0aGlzLl9sb2FkaW5nTm9kZXMuY2xlYXIoKSx0aGlzLl91cGRhdGluZ05vZGVzLmZvckVhY2goKGU9PmUuYWJvcnQoKSkpLHRoaXMuX3VwZGF0aW5nTm9kZXMuY2xlYXIoKX1fY2FuY2VsTm9kZShlKXtjb25zdCB0PXRoaXMuX2xvYWRpbmdOb2Rlcy5nZXQoZSk7dCYmKHQuYWJvcnQoKSx0aGlzLl9sb2FkaW5nTm9kZXMuZGVsZXRlKGUpKX1faGFzTm9kZUxvYWRUb2tlbihlKXtyZXR1cm4hKCF0aGlzLl9pc0lkbGUmJmUubnVtTm9kZXNMb2FkaW5nK3RoaXMuX2xvYWRpbmdOb2Rlcy5zaXplPj1RKSYmKHRoaXMuX2Rvd25sb2FkaW5nQ291bnQ8TyYmIXRoaXMuZGF0YVN0cmVhbUNvbnRyb2xsZXIuYnVzeSl9X2V2YWx1YXRlVXBkYXRpbmcoKXtsZXQgZT0hMSx0PTA7aWYodGhpcy5sYXllclZpZXcpe2lmKHRoaXMubGF5ZXJWaWV3LmNvbnRlbnRWaXNpYmxlKXtjb25zdCBpPShudWxsIT10aGlzLl9pbmRleD90aGlzLl9pbmRleC5pbmRleE1pc3Npbmc6MCkrMyoobnVsbCE9dGhpcy5faW5kZXg/dGhpcy5faW5kZXgudXBkYXRlcy5hZGQubGVuZ3RoOjApKzIqdGhpcy5fbG9hZGluZ05vZGVzLnNpemU7ZT0hIShpPjB8fHRoaXMuX3VwZGF0aW5nTm9kZXMuc2l6ZT4wfHx0aGlzLl9yZXN0YXJ0Tm9kZUxvYWRpbmd8fHRoaXMuX2NhbWVyYURpcnR5fHx0aGlzLl9pZGxlUXVldWUucnVubmluZ3x8dGhpcy5fbG9kSGFuZGxpbmcmJnRoaXMuX2xvZEhhbmRsaW5nLnJlcXVpcmVzTE9ER2xvYmFsSGFuZGxpbmd8fG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5pc1ByZWZldGNoaW5nKSwwPT09aSYmKHRoaXMuX3Byb2dyZXNzTWF4TnVtTm9kZXM9MSksdGhpcy5fcHJvZ3Jlc3NNYXhOdW1Ob2Rlcz1NYXRoLm1heChpLHRoaXMuX3Byb2dyZXNzTWF4TnVtTm9kZXMpLHQ9MS1pL3RoaXMuX3Byb2dyZXNzTWF4TnVtTm9kZXN9ZWxzZSBlPXRoaXMuX2NhbWVyYURpcnR5LHQ9ZT8wOjE7dGhpcy51cGRhdGluZz1lLHRoaXMudXBkYXRpbmdQcm9ncmVzcz10fX1fdXBkYXRlVmlld0RhdGEoKXtpZighdGhpcy5fY2FtZXJhRGlydHl8fG51bGw9PXRoaXMuX2luZGV4fHxudWxsPT10aGlzLl92aWV3cG9ydFF1ZXJpZXMpcmV0dXJuO2NvbnN0IGU9dGhpcy5sYXllclZpZXcudmlldyx7Y29udGVudENhbWVyYTp0LGZpeGVkQ29udGVudENhbWVyYTppfT1lLnN0YXRlO3RoaXMuc2NyZWVuU2l6ZUZhY3Rvcj0xLyh0LnBlclNjcmVlblBpeGVsUmF0aW8vMiksdGhpcy5fdmlld3BvcnRRdWVyaWVzLnVwZGF0ZUNhbWVyYSh0LCFpfHx0aGlzLmlzR3JhcGhpY3MzRCksdGhpcy5fdmlld3BvcnRRdWVyaWVzLnNldFBvaW50T2ZJbnRlcmVzdChlLnBvaW50c09mSW50ZXJlc3QuZm9jdXMucmVuZGVyTG9jYXRpb24pLHRoaXMuX3ZpZXdwb3J0UXVlcmllcy51cGRhdGVTY3JlZW5TcGFjZUVycm9yQmlhcyh0aGlzLl9sb2QpLHRoaXMuX2luZGV4LmludmFsaWRhdGVWaXNpYmlsaXR5Q2FjaGUoKSx0aGlzLl9pbmRleC5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5PUouZGlzdGFuY2VQZW5hbHR5KnRoaXMuX3ZpZXdwb3J0UXVlcmllcy5kaXN0Q2FtZXJhVG9QT0koKSx0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCksdGhpcy5fc3RhYmxlRmVhdHVyZUxPRD0hMSx0aGlzLl9pbnZpc2libGVEaXJ0eT0hMCx0aGlzLl9jYW1lcmFEaXJ0eT0hMSx0aGlzLm5vdGlmeUNoYW5nZShcInJvb3ROb2RlVmlzaWJsZVwiKX1fZ2V0UHJvZ3Jlc3NpdmVMb2FkRmFjdG9yKCl7cmV0dXJuIHRoaXMubGF5ZXJWaWV3LnZpZXcucXVhbGl0eTwxPzE6dGhpcy5sYXllclZpZXcucHJvZ3Jlc3NpdmVMb2FkRmFjdG9yfWdldCBfbG9kKCl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVMT0QqdGhpcy5fYmFzZUxPRH1nZXQgX2Jhc2VMT0QoKXtjb25zdCBlPXRoaXMubGF5ZXJWaWV3LmxvZEZhY3RvcjtyZXR1cm4gdGhpcy5maXhlZEZlYXR1cmVUYXJnZXQ/MTooZT4wP2U6MSkqdGhpcy5sYXllclZpZXcudmlldy5xdWFsaXR5fWdldCBfbG9kRHJvcEZhY3Rvcigpe2lmKHRoaXMuZml4ZWRGZWF0dXJlVGFyZ2V0KXJldHVybiAxO3JldHVybihNYXRoLm1pbih0aGlzLmxheWVyVmlldy52aWV3LnF1YWxpdHksLjUpLUYpLyguNS1GKX1pc0dlb21ldHJ5VmlzaWJsZShlKXtyZXR1cm4hIXRoaXMuX2luZGV4Py5pc0dlb21ldHJ5VmlzaWJsZShlLmluZGV4KX11cGRhdGVWaXNpYmlsaXR5KGUpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKX1pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpfWludmFsaWRhdGVWaXNpYmlsaXR5T2Jicygpe3RoaXMuX2luZGV4Py5pbnZhbGlkYXRlVmlzaWJpbGl0eU9iYnMoKX1tb2RpZmljYXRpb25zQ2hhbmdlZCgpe3RoaXMuX2luZGV4Py5pbU1vZGlmaWNhdGlvbnNDaGFuZ2VkKCEhdGhpcy5sYXllclZpZXcuaGFzTW9kaWZpY2F0aW9ucyksdGhpcy5faW52aXNpYmxlRGlydHk9ITB9X3Nob3VsZExvYWROb2RlKGUpe3JldHVybiEoIXRoaXMuX2xvZEhhbmRsaW5nLnNob3VsZExvYWROb2RlKGUpfHx0aGlzLl9zaG91bGREcm9wTm9kZShlKSkmJighKG51bGw9PXRoaXMuX2luZGV4fHwhdGhpcy5faW5kZXguaXNHZW9tZXRyeVZpc2libGUoZS5pbmRleCkpJiZ0aGlzLl9pc05vZGVJblNjYWxlQm91bmRzKGUpKX1fc2hvdWxkRHJvcE5vZGUoZSl7aWYobnVsbD09dGhpcy5fdmlld3BvcnRRdWVyaWVzKXJldHVybiExO2NvbnN0IHQ9dGhpcy5fbG9kRHJvcEZhY3RvcjtpZih0Pj0xfHwhdGhpcy5fbG9kSGFuZGxpbmcuaGFzTm9WaXNpYmxlQ2hpbGRyZW4oZSkpcmV0dXJuITE7cmV0dXJuIE1hdGguYWJzKHRoaXMuX3ZpZXdwb3J0UXVlcmllcy5jYWxjQ2FtZXJhRGlzdGFuY2VUb0NlbnRlcihlKSktdGhpcy5fdmlld3BvcnRRdWVyaWVzLm1pbkRpc3RhbmNlPih0aGlzLl92aWV3cG9ydFF1ZXJpZXMubWF4RGlzdGFuY2UtdGhpcy5fdmlld3BvcnRRdWVyaWVzLm1pbkRpc3RhbmNlKSp0fV9zdGFydE5vZGVMb2FkaW5nKCl7dGhpcy5fcmVzdGFydE5vZGVMb2FkaW5nPSExO2NvbnN0IGU9dGhpcy5faW5kZXg7aWYodGhpcy5fdXBkYXRlc0Rpc2FibGVkfHxudWxsPT1lfHxudWxsPT10aGlzLl92aWV3cG9ydFF1ZXJpZXMpcmV0dXJuO3RoaXMuX3VwZGF0ZVZpZXdEYXRhKCksdGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzRGlydHkmJih0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXM9dGhpcy5fZ2V0UmVxdWlyZWRBdHRyaWJ1dGVzKCksdGhpcy5fcmVxdWlyZWRBdHRyaWJ1dGVzRGlydHk9ITEpO2NvbnN0IHQ9e3RleHR1cmVFbmNvZGluZ3M6dGhpcy5sYXllclZpZXcuc3VwcG9ydGVkVGV4dHVyZUVuY29kaW5ncyx1bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZDp0aGlzLmxheWVyVmlldy51bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZCx0ZXh0dXJlVXNhZ2VNYXNrOnRoaXMubGF5ZXJWaWV3LnJlbmRlcmVyVGV4dHVyZVVzYWdlLGxvYWRGZWF0dXJlRGF0YTp0aGlzLnVzZU1heGltdW1OdW1iZXJPZkZlYXR1cmVzfTt0aGlzLl9ub2RlTG9hZGVyPW5ldyB2KHRoaXMubGF5ZXIsdGhpcy5kYXRhU3RyZWFtQ29udHJvbGxlcixqLHRoaXMuX2RlZmF1bHRHZW9tZXRyeVNjaGVtYSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsdCksZS5yZXF1ZXN0VXBkYXRlKCksdGhpcy5fbG9kSGFuZGxpbmcuc3RhcnROb2RlTG9hZGluZygoZT0+dGhpcy5faXNOb2RlSW5TY2FsZUJvdW5kcyhlKSksKChlLHQpPT50aGlzLl9yZW1vdmVOb2RlcyhlLHQsWi5mYWRlb3V0KSksZSx7bWF4TG9kTGV2ZWw6dGhpcy5fdmlld3BvcnRRdWVyaWVzLm1heExvZExldmVsfSksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpfWlzTm9kZUxvYWRpbmcoKXtyZXR1cm4gbnVsbCE9dGhpcy5fbm9kZUxvYWRlciYmbnVsbCE9dGhpcy5faW5kZXh9Y2FuY2VsTm9kZUxvYWRpbmcoKXt0aGlzLmlzTm9kZUxvYWRpbmcoKSYmKHRoaXMuaW5kZXhTdHJlYW1Db250cm9sbGVyLmNhbmNlbEFsbCgpLHRoaXMuZGF0YVN0cmVhbUNvbnRyb2xsZXIuY2FuY2VsQWxsKCksdGhpcy5faWRsZVF1ZXVlLmNhbmNlbEFsbCgpLHRoaXMuX2NhbmNlbEFsbE5vZGVzKCksdGhpcy5fbm9kZUxvYWRlcj1udWxsLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKSl9X3JlbW92ZUludmlzaWJsZU5vZGVzKGUpe2NvbnN0IHQ9dGhpcy5faW5kZXg7aWYobnVsbD09dHx8bnVsbD09dGhpcy5fdmlld3BvcnRRdWVyaWVzKXJldHVybiExO0suY2xlYXIoKSx0aGlzLmxheWVyVmlldy5nZXRMb2FkZWROb2RlSW5kaWNlcyhLKTtjb25zdCBpPTA9PT10aGlzLl92aWV3cG9ydFF1ZXJpZXMubWF4RGlzdGFuY2Uscz1pPygpPT4hMTplPT50aGlzLl9zaG91bGREcm9wTm9kZShlKTtyZXR1cm4gSy5maWx0ZXJJblBsYWNlKChlPT57Y29uc3QgaT10LmdldE5vZGUoZSk7cmV0dXJuIG51bGw9PWl8fCF0LmlzR2VvbWV0cnlWaXNpYmxlKGUpfHxzKGkpfHwhdGhpcy5faXNOb2RlSW5TY2FsZUJvdW5kcyhpKX0pKSxLLmxlbmd0aD4wJiZ0aGlzLl9sb2RIYW5kbGluZy5zZXRMb2RHbG9iYWxEaXJ0eSgpLHRoaXMuX3JlbW92ZU5vZGVzKEssZSxaLnBvcCksIShpJiZ0aGlzLl9sb2REcm9wRmFjdG9yPDEpJiYoMD09PUsubGVuZ3RofHwoSy5jbGVhcigpLCExKSl9bWFya05vZGVUb1JlbW92ZShlKXtLLnB1c2goZSl9cmVtb3ZlTWFya2VkTm9kZXMoKXt0aGlzLl9yZW1vdmVOb2RlcyhLLHEsWi5wb3ApfV9yZW1vdmVOb2RlcyhlLHQsaSl7Y29uc3Qgcz1lLmxlbmd0aDtpZigwIT09cyYmIXQuZG9uZSl7Zm9yKG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCk7ZS5sZW5ndGg+MCYmIXQuZG9uZTspe2NvbnN0IHM9ZS5wb3AoKSxhPXRoaXMuX2luZGV4O2k9PT1aLmZhZGVvdXQmJnRoaXMubGF5ZXJWaWV3Lm5vZGVGYWRlb3V0RW5hYmxlZCYmbnVsbCE9YSYmYS5pc0dlb21ldHJ5VmlzaWJsZShzKT90aGlzLmxheWVyVmlldy5mYWRlTm9kZShzLEkuRmFkZU91dCwhMCk6dGhpcy5sYXllclZpZXcucmVtb3ZlTm9kZShzKSx0Lm1hZGVQcm9ncmVzcygpfWlmKHRoaXMuX2xvYWRlZE5vZGVTY2FsZXMuc2l6ZT4wKWZvcihsZXQgdD1lLmxlbmd0aDt0PHM7dCsrKXtjb25zdCBpPWUuZGF0YVt0XTt0aGlzLl9sb2FkZWROb2RlU2NhbGVzLmRlbGV0ZShpKX19fV9uZWVkc1VwZGF0ZShlKXtpZihlLnJlc291cmNlcy5pc0VtcHR5fHx0aGlzLl91cGRhdGluZ05vZGVzLmhhcyhlLmluZGV4KSlyZXR1cm4hMTtjb25zdCB0PXRoaXMubGF5ZXJWaWV3LmdldExvYWRlZEF0dHJpYnV0ZXMoZS5pbmRleCk7cmV0dXJuIG51bGwhPXQmJnQhPT10aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXN9YXN5bmMgX3VwZGF0ZUxvYWRlZE5vZGUoZSl7Y29uc3QgdD1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuX3VwZGF0aW5nTm9kZXMuc2V0KGUuaW5kZXgsdCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpO3RyeXtjb25zdCBpPVgodGhpcy5sYXllclZpZXcuZ2V0TG9hZGVkQXR0cmlidXRlcyhlLmluZGV4KSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMpO2xldCBzPW51bGw7cz1pP2F3YWl0IFByb21pc2UucmVzb2x2ZSh0aGlzLmxheWVyVmlldy5nZXRBdHRyaWJ1dGVEYXRhKGUuaW5kZXgpKTphd2FpdCB0aGlzLl9sb2FkQXR0cmlidXRlcyhlLHRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyx0LnNpZ25hbCksYXdhaXQgdGhpcy5zY2hlZHVsZSgoKCk9PnRoaXMubGF5ZXJWaWV3LnVwZGF0ZUF0dHJpYnV0ZXMoZS5pbmRleCx7bG9hZGVkQXR0cmlidXRlczp0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsYXR0cmlidXRlRGF0YTpzfSx0LnNpZ25hbCkpLHQuc2lnbmFsKX1jYXRjaChpKXtpZighcihpKSlyZXR1cm4gdGhpcy5sYXllclZpZXcudXBkYXRlQXR0cmlidXRlcyhlLmluZGV4LHtsb2FkZWRBdHRyaWJ1dGVzOnRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyxhdHRyaWJ1dGVEYXRhOnt9fSx0LnNpZ25hbCl9dGhpcy5fdXBkYXRpbmdOb2Rlcy5kZWxldGUoZS5pbmRleCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpfV9sb2FkTm9kZShlKXtpZih0aGlzLl9sb2FkaW5nTm9kZXMuaGFzKGUuaW5kZXgpKXJldHVybiB2b2lkIGouZXJyb3IoXCJhbHJlYWR5IGxvYWRpbmcgbm9kZSBcIitlLmluZGV4KTtjb25zdCB0PW5ldyBBYm9ydENvbnRyb2xsZXI7dGhpcy5fbG9hZGluZ05vZGVzLnNldChlLmluZGV4LHQpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKSx0aGlzLl9sb2FkQW5kQWRkTm9kZShlLHQuc2lnbmFsKS50aGVuKChpPT57aSYmbnVsbCE9dGhpcy5faW5kZXgmJnRoaXMuX2xvYWRpbmdOb2Rlcy5nZXQoZS5pbmRleCk9PT10JiYodGhpcy5fbG9hZGluZ05vZGVzLmRlbGV0ZShlLmluZGV4KSx0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCkpfSkpLmNhdGNoKChlPT57aWYoIXIoZSkpdGhyb3cgZX0pKS5maW5hbGx5KCgoKT0+e3RoaXMuX2xvYWRpbmdOb2Rlcy5nZXQoZS5pbmRleCk9PT10JiZ0aGlzLl9sb2FkaW5nTm9kZXMuZGVsZXRlKGUuaW5kZXgpLHRoaXMuX2V2YWx1YXRlVXBkYXRpbmcoKX0pKX1fbG9hZEFuZEFkZE5vZGUoZSx0KXtyZXR1cm4gZS5jYWNoZVN0YXRlPT09dy5VbmNhY2hlZD90aGlzLl9sb2FkVW5jYWNoZWQoZSx0KS50aGVuKCgoKT0+ITEpKTp0aGlzLl9sb2FkQ2FjaGVkKGUsdCkudGhlbigodD0+IXQmJihlLmNhY2hlU3RhdGU9dy5VbmNhY2hlZCwhMCkpKS5jYXRjaCgodD0+IXIodCkmJihlLmNhY2hlU3RhdGU9dy5VbmNhY2hlZCwhMCkpKX1fZW5hYmxlRnJvbUdQVUNhY2hlKGUsdCl7aWYodGhpcy5fZGlzYWJsZU1lbUNhY2hlfHxudWxsPT10aGlzLl9pbmRleClyZXR1cm4hMTtpZih0PT09Ti5Ib2xlJiYhdGhpcy5faW5kZXgudXNlTm9kZUFzSG9sZShlLmluZGV4KSlyZXR1cm4hMDtjb25zdCBpPXRoaXMuX2xvYWRDYWNoZWRHUFVEYXRhKGUpO3JldHVybiEhaSYmKHRoaXMubGF5ZXJWaWV3LmFkZENhY2hlZEdQVURhdGEoZSxpLHQpLHRoaXMuX25vZGVBZGRlZCgpLCEwKX1fbG9hZENhY2hlZEdQVURhdGEoZSl7Y29uc3QgdD10aGlzLmxheWVyVmlldy5sb2FkQ2FjaGVkR1BVRGF0YShlLmluZGV4KTtyZXR1cm4gbnVsbCE9dD8uYXR0cmlidXRlSW5mbyYmWCh0LmF0dHJpYnV0ZUluZm8ubG9hZGVkQXR0cmlidXRlcyx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMpP3Q6KHRoaXMubGF5ZXJWaWV3LmRlbGV0ZUNhY2hlZEdQVURhdGEodCksbnVsbCl9X25vZGVBZGRlZCgpe251bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCksdGhpcy5fbG9kSGFuZGxpbmcuc2V0TG9kR2xvYmFsRGlydHkoKSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCl9dXBkYXRlTG9hZFN0YXR1cyhlLHQpe2NvbnN0IGk9dGhpcy5faW5kZXg7bnVsbCE9aSYmaS51cGRhdGVDaGlsZHJlbkxvYWRlZChlLHQ/MTotMSl9YXN5bmMgX2xvYWRDYWNoZWQoZSx0KXtpZih0aGlzLl9lbmFibGVGcm9tR1BVQ2FjaGUoZSxOLkxlYWYpKXJldHVybiEwO2NvbnN0IGk9dGhpcy5sYXllclZpZXc7aWYodGhpcy5kaXNhYmxlSURCQ2FjaGV8fCFpLmxvYWRDYWNoZWROb2RlRGF0YXx8IWkuYWRkQ2FjaGVkTm9kZURhdGEpcmV0dXJuITE7Y29uc3Qgcz0odCxpKT0+dGhpcy5fbm9kZUxvYWRlci5sb2FkVGV4dHVyZXMoZSx0LGkpLGE9KHQsaSk9PnRoaXMuX2NsaWVudE5vZGVMb2FkZXIubG9hZFRleHR1cmVzKGUsdCxpKSxyPWUuaW5kZXg+PTA/czphLGQ9YXdhaXQgdGhpcy5zY2hlZHVsZSgoKCk9PmkubG9hZENhY2hlZE5vZGVEYXRhKGUsdCxyKSksdCk7aWYobnVsbD09ZClyZXR1cm4hMTtjb25zdCBvPXRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyxuPWF3YWl0IHRoaXMucmVzY2hlZHVsZSgoKCk9PnRoaXMuX2xvYWRBdHRyaWJ1dGVzKGUsbyx0KSksdCk7cmV0dXJuIGF3YWl0IHRoaXMucmVzY2hlZHVsZSgoKCk9PmkuYWRkQ2FjaGVkTm9kZURhdGEoZSxkLHtsb2FkZWRBdHRyaWJ1dGVzOm8sYXR0cmlidXRlRGF0YTpufSx0KSksdCksdGhpcy5fbm9kZUFkZGVkKCksITB9X2xvYWRVbmNhY2hlZChlLHQpe3JldHVybiB0aGlzLl9kb3dubG9hZGluZ0NvdW50KyssdGhpcy5fbG9hZE5vZGVEYXRhKGUsdCkuY2F0Y2goKGU9Pnt0aHJvdyB0aGlzLl9kb3dubG9hZGluZ0NvdW50LS0sZX0pKS50aGVuKChpPT4odGhpcy5fZG93bmxvYWRpbmdDb3VudC0tLHRoaXMuc2NoZWR1bGUoKCgpPT50aGlzLmxheWVyVmlldy5hZGROb2RlKGUsaSx0KSksdCkpKSkudGhlbigoKCk9Pnt0aGlzLl9ub2RlQWRkZWQoKSxlLmNhY2hlU3RhdGU9dy5DYWNoZWR9KSkuY2F0Y2goKHQ9PntpZighcih0KSl0aHJvdyBqLmVycm9yKFwiI2xvYWROb2RlRGF0YSgpXCIsdGhpcy5sYXllcixgRmFpbGVkIHRvIGxvYWQgbm9kZSAnJHtlLmlkfSdgLHQpLGUuZmFpbGVkPSEwLG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCksdH0pKX1fdXBkYXRlSWRsZVN0YXRlKGUpe2UhPT10aGlzLl9pc0lkbGUmJih0aGlzLl9pc0lkbGU9ZSx0aGlzLl9ldmFsdWF0ZVVwZGF0aW5nKCksZSYmdGhpcy5faW5kZXgmJm51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXNldEZhaWxlZE5vZGVzKCkpfV9nZXRTY2FsZShlKXtpZih0aGlzLl9sb2FkZWROb2RlU2NhbGVzLmhhcyhlLmluZGV4KSlyZXR1cm4gdGhpcy5fbG9hZGVkTm9kZVNjYWxlcy5nZXQoZS5pbmRleCk7Y29uc3QgdD10aGlzLl9jb21wdXRlU2NhbGUoZSk7cmV0dXJuIHRoaXMubGF5ZXJWaWV3LmlzTm9kZUxvYWRlZChlLmluZGV4KSYmdGhpcy5fbG9hZGVkTm9kZVNjYWxlcy5zZXQoZS5pbmRleCx0KSx0fV9jb21wdXRlU2NhbGUoZSl7dGhpcy5fdG1wUG9pbnQueD1lLm1ic1swXSx0aGlzLl90bXBQb2ludC55PWUubWJzWzFdLHRoaXMuX3RtcFBvaW50Lno9ZS5tYnNbMl07Y29uc3QgdD1lLm1ic1szXTtyZXR1cm4gdGhpcy5sYXllclZpZXcudmlldy5iYXNlbWFwVGVycmFpbi5nZXRTcGhlcmVTY2FsZSh0aGlzLl90bXBQb2ludCx0KX1faXNOb2RlSW5TY2FsZUJvdW5kcyhlKXtpZighdGhpcy5fYXJlU2NhbGVCb3VuZHNBY3RpdmUpcmV0dXJuITA7Y29uc3QgdD10aGlzLl9nZXRTY2FsZShlKSx7bWluU2NhbGU6aSxtYXhTY2FsZTpzfT1QKHRoaXMubGF5ZXIpO3JldHVybiBVKHQsaSxzKX11cGRhdGVTdGF0cyhlKXt0aGlzLmlzR3JhcGhpY3MzRCYmKGUuZGV0YWlsPXRoaXMuX2ZlYXR1cmVMT0QsZS50YXJnZXQ9dGhpcy5mZWF0dXJlVGFyZ2V0KnRoaXMuX2Jhc2VMT0QpLHRoaXMuX2luZGV4Py51cGRhdGVTdGF0cyhlKX1nZXQgdGVzdCgpe2NvbnN0IGU9dGhpcztyZXR1cm57aW5kZXg6dGhpcy5faW5kZXgsc2V0IGRpc2FibGVVcGRhdGVzKHQpe2UuX3VwZGF0ZXNEaXNhYmxlZD10LHQ/ZS5jYW5jZWxOb2RlTG9hZGluZygpOmUucmVxdWVzdFVwZGF0ZSgpfSxzZXQgZGlzYWJsZUlEQkNhY2hlKHQpe2UuZGlzYWJsZUlEQkNhY2hlPXR9LHNldCBpZ25vcmVTZXJ2aWNlT2JiKHQpe251bGwhPWUuX2luZGV4JiYoZS5faW5kZXguaWdub3JlU2VydmljZU9iYj10KX0sc2hvdWxkTG9hZE5vZGU6dD0+ZS5fc2hvdWxkTG9hZE5vZGUodCl9fW5vdGlmeUxPRFVwZGF0ZSgpe3RoaXMuX2xvZEhhbmRsaW5nLnNldExvZEdsb2JhbERpcnR5KCksdGhpcy5fZXZhbHVhdGVVcGRhdGluZygpLG51bGwhPXRoaXMuX2luZGV4JiZ0aGlzLl9pbmRleC5yZXF1ZXN0VXBkYXRlKCl9Z2VvbWV0cnlGaWx0ZXJDaGFuZ2VkKGUpe2NvbnN0IHQ9dGhpcy5faW5kZXg7bnVsbCE9dCYmdC5sYXllckZpbHRlckNoYW5nZWQoZSksdGhpcy5fc2V0Q2FtZXJhRGlydHkoKX19O2UoW2woe3JlYWRPbmx5OiEwfSldLHoucHJvdG90eXBlLFwiaXNNZXNoUHlyYW1pZFwiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLHoucHJvdG90eXBlLFwiaXNHcmFwaGljczNEXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sei5wcm90b3R5cGUsXCJ1c2VNYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc1wiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLHoucHJvdG90eXBlLFwiaW5kZXhTdHJlYW1Db250cm9sbGVyXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sei5wcm90b3R5cGUsXCJkYXRhU3RyZWFtQ29udHJvbGxlclwiLG51bGwpLGUoW2woe3JlYWRPbmx5OiEwfSldLHoucHJvdG90eXBlLFwiY3JzVmVydGV4XCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sei5wcm90b3R5cGUsXCJjcnNJbmRleFwiLG51bGwpLGUoW2woKV0sei5wcm90b3R5cGUsXCJzY3JlZW5TaXplRmFjdG9yXCIsdm9pZCAwKSxlKFtsKCldLHoucHJvdG90eXBlLFwiZmVhdHVyZVRhcmdldFwiLHZvaWQgMCksZShbbCgpXSx6LnByb3RvdHlwZSxcImZpeGVkRmVhdHVyZVRhcmdldFwiLHZvaWQgMCksZShbbCgpXSx6LnByb3RvdHlwZSxcImxheWVyVmlld1wiLHZvaWQgMCksZShbbCgpXSx6LnByb3RvdHlwZSxcImxheWVyXCIsbnVsbCksZShbbCgpXSx6LnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSxlKFtsKHtyZWFkT25seTohMH0pXSx6LnByb3RvdHlwZSxcInJ1bm5pbmdcIixudWxsKSxlKFtsKCldLHoucHJvdG90eXBlLFwidXBkYXRpbmdQcm9ncmVzc1wiLHZvaWQgMCksZShbbCh7cmVhZE9ubHk6ITB9KV0sei5wcm90b3R5cGUsXCJsZWF2ZXNSZWFjaGVkXCIsdm9pZCAwKSxlKFtsKHtjb25zdHJ1Y3RPbmx5OiEwfSldLHoucHJvdG90eXBlLFwic2NhbGVWaXNpYmlsaXR5RW5hYmxlZFwiLHZvaWQgMCksZShbbCh7Y29uc3RydWN0T25seTohMH0pXSx6LnByb3RvdHlwZSxcIndvcmtlclwiLHZvaWQgMCksZShbbCh7cmVhZE9ubHk6ITAsZGVwZW5kc09uOltdfSldLHoucHJvdG90eXBlLFwicm9vdE5vZGVWaXNpYmxlXCIsbnVsbCksej1lKFtoKEcpXSx6KTtjb25zdCBLPW5ldyBzKHtkZWFsbG9jYXRvcjpudWxsfSk7bGV0IFc7ZnVuY3Rpb24gWChlLHQpe3JldHVybiBudWxsIT1lJiZlLmxlbmd0aD09PXQubGVuZ3RoJiZlLmV2ZXJ5KChlPT4kKHQsZS5uYW1lKT49MCkpfWZ1bmN0aW9uICQoZSx0KXtjb25zdCBpPXQudG9Mb3dlckNhc2UoKTtmb3IobGV0IHM9MDtzPGUubGVuZ3RoO3MrKylpZihlW3NdLm5hbWUudG9Mb3dlckNhc2UoKT09PWkpcmV0dXJuIHM7cmV0dXJuLTF9Y29uc3QgSj17ZmFjdG9ySU06LjIsZmFjdG9yM2RPYmplY3Q6LjA1LGRpc3RhbmNlUGVuYWx0eToxMH0sWT1fKCk7dmFyIFo7IWZ1bmN0aW9uKGUpe2VbZS5wb3A9MF09XCJwb3BcIixlW2UuZmFkZW91dD0xXT1cImZhZGVvdXRcIn0oWnx8KFo9e30pKTtjb25zdCBlZT16O2V4cG9ydHtlZSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHR9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Y2FuUHJvamVjdFdpdGhvdXRFbmdpbmUgYXMgb31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCI7aW1wb3J0e2dldEVmZmVjdGl2ZUxheWVyQ2FwYWJpbGl0aWVzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvbGF5ZXJVdGlscy5qc1wiO2ltcG9ydHtkaXJlY3QzRE9iamVjdEZlYXR1cmVMYXllckRpc3BsYXlFbmFibGVkIGFzIGF9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9mZWF0dXJlRmxhZ3MuanNcIjtpbXBvcnQgcCBmcm9tXCIuL0ZlYXR1cmVMYXllclZpZXdCYXNlM0QuanNcIjtsZXQgYz1jbGFzcyBleHRlbmRzIHB7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT1cImZlYXR1cmUtM2RcIix0aGlzLmRpcmVjdDNET2JqZWN0RmVhdHVyZUxheWVyRGlzcGxheUVuYWJsZWQ9YSgpfWluaXRpYWxpemUoKXtjb25zdHtsYXllcjplLHZpZXc6dH09dGhpcztpKGUpPy5vcGVyYXRpb25zLnN1cHBvcnRzUXVlcnl8fHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZShQcm9taXNlLnJlamVjdChuZXcgcihcImZlYXR1cmVsYXllcnZpZXc6cXVlcnktbm90LXN1cHBvcnRlZFwiLFwibGF5ZXIgdmlldyByZXF1aXJlcyBhIGxheWVyIHdpdGggcXVlcnkgY2FwYWJpbGl0eVwiLHtsYXllcjplfSkpKSxudWxsIT1lLmluZm9Gb3IzRCYmKHRoaXMuZGlyZWN0M0RPYmplY3RGZWF0dXJlTGF5ZXJEaXNwbGF5RW5hYmxlZD90aGlzLl9zZXQoXCJzdXNwZW5kUmVzdW1lRXh0ZW50TW9kZVwiLFwiY29tcHV0ZWRcIik6dGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKFByb21pc2UucmVqZWN0KG5ldyByKFwiZmVhdHVyZWxheWVydmlldzNkOnVuc3VwcG9ydGVkLWdlb21ldHJ5LXR5cGVcIixgVW5zdXBwb3J0ZWQgZ2VvbWV0cnkgdHlwZSAke2UuZ2VvbWV0cnlUeXBlfWApKSkpLFwibWVzaFwiIT09ZS5nZW9tZXRyeVR5cGV8fG8oZS5zcGF0aWFsUmVmZXJlbmNlLHQuc3BhdGlhbFJlZmVyZW5jZSl8fHRoaXMuYWRkUmVzb2x2aW5nUHJvbWlzZShQcm9taXNlLnJlamVjdChuZXcgcihcImxheWVydmlldzpzcGF0aWFsLXJlZmVyZW5jZS1pbmNvbXBhdGlibGVcIixcIlRoZSBzcGF0aWFsIHJlZmVyZW5jZXMgb2YgdGhlIGZlYXR1cmUgbGF5ZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIHNwYXRpYWwgcmVmZXJlbmNlIG9mIHRoZSB2aWV3XCIpKSl9Z2V0IGZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlKCl7cmV0dXJuIHRoaXMudmlldy5mZWF0dXJlVGlsZXM/LnRpbGluZ1NjaGVtZT8uc3BhdGlhbFJlZmVyZW5jZX19O2UoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0sYy5wcm90b3R5cGUsXCJkaXJlY3QzRE9iamVjdEZlYXR1cmVMYXllckRpc3BsYXlFbmFibGVkXCIsdm9pZCAwKSxlKFt0KCldLGMucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGM9ZShbcyhcImVzcmkudmlld3MuM2QubGF5ZXJzLkZlYXR1cmVMYXllclZpZXczRFwiKV0sYyk7Y29uc3QgbD1jO2V4cG9ydHtsIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIGUoZSxhLG4pe2UmJihcIm51bWJlclwiPT10eXBlb2YgYT8oZS5lbGV2YXRpb25SYW5nZU1pbj1NYXRoLm1pbihlLmVsZXZhdGlvblJhbmdlTWluLGEpLGUuZWxldmF0aW9uUmFuZ2VNYXg9TWF0aC5tYXgoZS5lbGV2YXRpb25SYW5nZU1heCxuKSk6KGUuZWxldmF0aW9uUmFuZ2VNaW49TWF0aC5taW4oZS5lbGV2YXRpb25SYW5nZU1pbixhLmVsZXZhdGlvblJhbmdlTWluKSxlLmVsZXZhdGlvblJhbmdlTWF4PU1hdGgubWF4KGUuZWxldmF0aW9uUmFuZ2VNYXgsYS5lbGV2YXRpb25SYW5nZU1heCkpKX1leHBvcnR7ZSBhcyBleHBhbmRFbGV2YXRpb25SYW5nZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vQ29sb3IuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2xvYWRJbWFnZUFzeW5jIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9yZXF1ZXN0VXRpbHMuanNcIjtpbXBvcnR7RW5jb2RlZE1lc2hUZXh0dXJlIGFzIHJ9ZnJvbVwiLi4vLi4vZ2xURi9pbnRlcm5hbC9yZXNvdXJjZVV0aWxzLmpzXCI7aW1wb3J0e1RleHR1cmVVc2FnZSBhcyBzLFRleHR1cmVFbmNvZGluZyBhcyBhfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnR7Q3VsbEZhY2VPcHRpb25zIGFzIGx9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9iYXNpY0ludGVyZmFjZXMuanNcIjtpbXBvcnR7ZG93bnNhbXBsZUltYWdlIGFzIG59ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi90ZXh0dXJlVXRpbHMuanNcIjtpbXBvcnR7dXNlU2NoZW1hdGljUEJSIGFzIGksZGVmYXVsdFNjaGVtYXRpY01SUkZhY3RvcnMgYXMgdX1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbWF0ZXJpYWxzL3BiclV0aWxzLmpzXCI7YXN5bmMgZnVuY3Rpb24gYyhvKXtjb25zdCB0PVtdLHI9W107aWYobnVsbD09byl7cmV0dXJue21hdGVyaWFsOnthbHBoYU1vZGU6XCJvcGFxdWVcIixhbHBoYUN1dG9mZjouMSxkb3VibGVTaWRlZDohMCxjdWxsRmFjZTowLG5vcm1hbFRleHR1cmVJZDotMSxlbWlzc2l2ZVRleHR1cmVJZDotMSxvY2NsdXNpb25UZXh0dXJlSWQ6LTEsZW1pc3NpdmVGYWN0b3I6WzAsMCwwXSxtZXRhbGxpY1JvdWdobmVzczp7YmFzZUNvbG9yRmFjdG9yOlsxLDEsMSwxXSxiYXNlQ29sb3JUZXh0dXJlSWQ6LTEsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlSWQ6LTEsbWV0YWxsaWNGYWN0b3I6MCxyb3VnaG5lc3NGYWN0b3I6LjYwMDAwMDAyMzg0MTg1Nzl9LHdyYXBUZXh0dXJlczohMSxoYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZTohMH0scmVxdWlyZWRUZXh0dXJlczp0LHRleHR1cmVEYXRhOnJ9fWNvbnN0IGE9ZChvKTtcImF1dG9cIj09PW8uYWxwaGFNb2RlJiZjb25zb2xlLndhcm4oJ2FscGhhTW9kZSBcImF1dG9cIiBub3Qgc3VwcG9ydGVkIGJ5IEkzUyBQQlJNYXRlcmlhbCAtIGRlZmF1bHRpbmcgdG8gXCJibGVuZFwiLicpO2NvbnN0IG49aSh7bm9ybWFsVGV4dHVyZTpvLm5vcm1hbFRleHR1cmUsZW1pc3NpdmVUZXh0dXJlOmE/by5lbWlzc2l2ZVRleHR1cmU6bnVsbCxlbWlzc2l2ZUZhY3RvcjphP2UudG9Vbml0UkdCKG8uZW1pc3NpdmVDb2xvcik6bnVsbCxvY2NsdXNpb25UZXh0dXJlOmE/by5vY2NsdXNpb25UZXh0dXJlOm51bGwsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlOmE/by5tZXRhbGxpY1JvdWdobmVzc1RleHR1cmU6bnVsbCxtZXRhbGxpY0ZhY3RvcjphP28ubWV0YWxsaWM6bnVsbCxyb3VnaG5lc3NGYWN0b3I6YT9vLnJvdWdobmVzczpudWxsfSksYz1uP3VbMF06YT9vLm1ldGFsbGljOjAsZz1uP3VbMV06YT9vLnJvdWdobmVzczowO3JldHVybnttYXRlcmlhbDp7YWxwaGFNb2RlOlwiYXV0b1wiPT09by5hbHBoYU1vZGU/XCJibGVuZFwiOm8uYWxwaGFNb2RlLGFscGhhQ3V0b2ZmOm8uYWxwaGFDdXRvZmYsZG91YmxlU2lkZWQ6by5kb3VibGVTaWRlZCxjdWxsRmFjZTpvLmRvdWJsZVNpZGVkP2wuTm9uZTpsLkJhY2ssbm9ybWFsVGV4dHVyZUlkOmF3YWl0IG0oby5ub3JtYWxUZXh0dXJlLHQscixzLk5vcm1hbCksZW1pc3NpdmVUZXh0dXJlSWQ6YT9hd2FpdCBtKG8uZW1pc3NpdmVUZXh0dXJlLHQscixzLkVtaXNzaXZlKTotMSxvY2NsdXNpb25UZXh0dXJlSWQ6YT9hd2FpdCBtKG8ub2NjbHVzaW9uVGV4dHVyZSx0LHIscy5PY2NsdXNpb24pOi0xLGVtaXNzaXZlRmFjdG9yOmEmJm51bGwhPW8uZW1pc3NpdmVDb2xvcj9lLnRvVW5pdFJHQihvLmVtaXNzaXZlQ29sb3IpOlswLDAsMF0sbWV0YWxsaWNSb3VnaG5lc3M6e2Jhc2VDb2xvckZhY3RvcjpudWxsIT1vLmNvbG9yP2UudG9Vbml0UkdCQShvLmNvbG9yKTpbMSwxLDEsMV0sYmFzZUNvbG9yVGV4dHVyZUlkOmF3YWl0IG0oby5jb2xvclRleHR1cmUsdCxyLHMuQ29sb3IpLG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkOmE/YXdhaXQgbShvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSx0LHIscy5NZXRhbGxpY1JvdWdobmVzcyk6LTEsbWV0YWxsaWNGYWN0b3I6Yyxyb3VnaG5lc3NGYWN0b3I6Z30sd3JhcFRleHR1cmVzOiEwLGhhc1BhcmFtZXRlcnNGcm9tU291cmNlOm59LHJlcXVpcmVkVGV4dHVyZXM6dCx0ZXh0dXJlRGF0YTpyfX1hc3luYyBmdW5jdGlvbiBtKGUscyxsLGkpe2lmKG51bGw9PWUpcmV0dXJuLTE7Y29uc3QgdT1sLmxlbmd0aCxjPWUuZGF0YSxtPWUudXJsO2lmKG51bGwhPWMpe2lmKGMgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50fHxjIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpe2NvbnN0IGU9bihjKTtyZXR1cm4gbC5wdXNoKHtpZDp1LHVzYWdlOmksZGF0YTplLGVuY29kaW5nOmEuUE5HLGRvd25zYW1wbGVkOiExfSkscy5wdXNoKHtpZDp1LHVzYWdlOmksZW5jb2RpbmdzOlt7bmFtZTp2b2lkIDAsZW5jb2Rpbmc6YS5QTkd9XX0pLHV9aWYoYyBpbnN0YW5jZW9mIEhUTUxWaWRlb0VsZW1lbnQpcmV0dXJuLTE7aWYoYyBpbnN0YW5jZW9mIEltYWdlRGF0YSl0aHJvdyBuZXcgbyhcIkltYWdlRGF0YSB0ZXh0dXJlcyBub3Qgc3VwcG9ydGVkIHlldCBmb3IgY2xpZW50IHNpZGUgSTNTIG5vZGVzXCIpO2lmKGMgaW5zdGFuY2VvZiByKXRocm93IG5ldyBvKFwiRW5jb2RlZE1lc2hUZXh0dXJlIHRleHR1cmVzIG5vdCBzdXBwb3J0ZWQgeWV0IGZvciBjbGllbnQgc2lkZSBJM1Mgbm9kZXNcIil9ZWxzZSBpZihudWxsIT1tKXtjb25zdCBlPW5ldyBJbWFnZTtlLnNyYz1tO2NvbnN0IG89YXdhaXQgdChlLGUuc3JjLCExLHZvaWQgMCkscj1uKG8pO3JldHVybiBsLnB1c2goe2lkOnUsdXNhZ2U6aSxkYXRhOnIsZW5jb2Rpbmc6YS5QTkcsZG93bnNhbXBsZWQ6ITF9KSxzLnB1c2goe2lkOnUsdXNhZ2U6aSxlbmNvZGluZ3M6W3tuYW1lOnZvaWQgMCxlbmNvZGluZzphLlBOR31dfSksdX1yZXR1cm4tMX1mdW5jdGlvbiBkKGUpe3JldHVybiBlLmhhc093blByb3BlcnR5KFwibWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlXCIpfWV4cG9ydHtjIGFzIGNvbnZlcnRNZXNoTWF0ZXJpYWxUb1BCUk1hdGVyaWFsfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2Fzc2VydElzU29tZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7bWluUHJpb3JpdHkgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL01lbUNhY2hlLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7Z2VuZXJhdGVVVUlEIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91dWlkLmpzXCI7aW1wb3J0e24gYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvbWF0My5qc1wiO2ltcG9ydHthfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9tYXQzZjY0LmpzXCI7aW1wb3J0e2ggYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtPIGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnR7cHJvamVjdEJvdW5kaW5nU3BoZXJlIGFzIGR9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0Qm91bmRpbmdTcGhlcmUuanNcIjtpbXBvcnR7ayBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7Y29udmVydE1lc2hNYXRlcmlhbFRvUEJSTWF0ZXJpYWwgYXMgY31mcm9tXCIuL0kzU0NsaWVudE1hdGVyaWFsVXRpbC5qc1wiO2NsYXNzIG17Y29uc3RydWN0b3IoZSx0LG8scil7dGhpcy5fdWlkPWUsdGhpcy5fd29ya2VyPXIsdGhpcy5faWQyTWV0YT1uZXcgTWFwLHRoaXMuX29pZDJNZXRhPW5ldyBNYXAsdGhpcy5faW5kZXhTUj10LmluZGV4U1IsdGhpcy5fdmVydGV4U1I9dC52ZXJ0ZXhTUix0aGlzLl9yZW5kZXJTUj10LnJlbmRlclNSLHRoaXMuX2xvY2FsTW9kZT10LmxvY2FsTW9kZSx0aGlzLl9tZW1DYWNoZT1vLm5ld0NhY2hlKGBzbC1jbGllbnQtbWVzaC1kYXRhLSR7dGhpcy5fdWlkfWApfWdldCB1aWQoKXtyZXR1cm4gdGhpcy5fdWlkfWdldCB3b3JrZXIoKXtyZXR1cm4gdGhpcy5fd29ya2VyfWdldCBpbmRleFNSKCl7cmV0dXJuIHRoaXMuX2luZGV4U1J9Z2V0IHJlbmRlclNSKCl7cmV0dXJuIHRoaXMuX3JlbmRlclNSfWNyZWF0ZU1lc2hOb2RlSW5mbyhlLHQpe2NvbnN0IG89YG1lc2gke3R9YCxyPWUuZXh0ZW50LG49ci5zcGF0aWFsUmVmZXJlbmNlLHM9dGhpcy5faW5kZXhTUixhPWgocixlLm9yaWdpbik7ZChhLG4sYSxzKTtyZXR1cm57dHlwZTpcIm1lc2hcIixpZDpvLHZlcnNpb246eShlKSxvaWQ6dCxtYnM6YSxjb21wb25lbnROb2RlSWRzOltdLHVubG9hZGVkTWVzaDplLG5vZGVJbmRleDpudWxsLGxvYWRNZXNoUHJvbWlzZTpudWxsfX1hZGRNZXNoTm9kZSh0LG8pe2lmKG51bGwhPXRoaXMuZ2V0TWVzaE5vZGVJbmRleChvLm9pZCkpdGhyb3cgbmV3IGUoYEkzU0NsaWVudE5vZGVMb2FkZXI6IGNsaWVudCBzaWRlIG1lc2ggZm9yIGZlYXR1cmUgb2lkPSR7by5vaWR9IGFscmVhZHkgZXhpc3RzYCk7by5ub2RlSW5kZXg9dCx0aGlzLl9pZDJNZXRhLnNldChvLmlkLG8pLHRoaXMuX29pZDJNZXRhLnNldChvLm9pZCxvKX1nZXRNZXNoTm9kZUluZGV4KGUpe2NvbnN0IHQ9dGhpcy5fb2lkMk1ldGEuZ2V0KGUpO3JldHVybiBudWxsPT10fHxcIm1lc2hcIiE9PXQudHlwZT9udWxsOnQubm9kZUluZGV4fXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLl9pZDJNZXRhLmdldChlKTtudWxsIT10JiYodGhpcy5faWQyTWV0YS5kZWxldGUoZSksXCJtZXNoXCI9PT10LnR5cGUmJnRoaXMuX29pZDJNZXRhLmRlbGV0ZSh0Lm9pZCkpfWFzeW5jIGxvYWROb2RlSlNPTih0KXtjb25zdCBvPXRoaXMuX2lkMk1ldGEuZ2V0KHQpO2lmKG51bGw9PW8pdGhyb3cgbmV3IGUoYEkzU0NsaWVudE5vZGVMb2FkZXI6OmxvYWROb2RlSlNPTiB1bmFibGUgdG8gZmluZCBub2RlICR7dH1gKTtzd2l0Y2goby50eXBlKXtjYXNlXCJtZXNoXCI6cmV0dXJuIHRoaXMuX2xvYWRNZXNoTm9kZUpTT04obyk7Y2FzZVwibWVzaC1jb21wb25lbnRcIjpyZXR1cm4gdGhpcy5fbG9hZE1lc2hDb21wb25lbnROb2RlSlNPTihvKTtkZWZhdWx0OnRocm93IG5ldyBlKGBJM1NDbGllbnROb2RlTG9hZGVyOjpsb2FkTm9kZUpTT04gdW5hYmxlIHRvIGhhbmRsZSBub2RlICR7dH1gKX19YXN5bmMgX2xvYWRNZXNoTm9kZUpTT04oZSl7Y29uc3QgdD1lLmlkLG89KGF3YWl0IHRoaXMuX2dldE1lc2hEYXRhKGUpKS5sb2FkZWRNZXNoO2lmKG51bGw9PW8uY29tcG9uZW50c3x8MD09PW8uY29tcG9uZW50cy5sZW5ndGgpcmV0dXJue2lkOnQsdmVyc2lvbjpudWxsLG1iczplLm1icyxvYmI6bnVsbCxzaGFyZWRSZXNvdXJjZTpudWxsLGdlb21ldHJ5RGF0YTpudWxsLGF0dHJpYnV0ZURhdGE6bnVsbCxmZWF0dXJlRGF0YTpudWxsLGNoaWxkcmVuOm51bGx9O2NvbnN0IHI9W10sbj1vLmNvbXBvbmVudHM7Zm9yKGxldCBzPTA7czxuLmxlbmd0aDsrK3Mpe2NvbnN0IG89YCR7dH0tY29tcG9uZW50JHtzfWAsbj17dHlwZTpcIm1lc2gtY29tcG9uZW50XCIsaWQ6byxtYnM6ZS5tYnMsY29tcG9uZW50SW5kZXg6cyxtZXNoTm9kZUluZm86ZSx0ZXh0dXJlRGF0YTpuZXcgTWFwfTt0aGlzLl9pZDJNZXRhLnNldChuLmlkLG4pLGUuY29tcG9uZW50Tm9kZUlkcy5wdXNoKG8pLHIucHVzaCh7aWQ6bi5pZCxocmVmOm51bGwsbWJzOm4ubWJzLG9iYjpudWxsfSl9cmV0dXJue2lkOnQsdmVyc2lvbjpudWxsLG1iczplLm1icyxvYmI6bnVsbCxzaGFyZWRSZXNvdXJjZTpudWxsLGdlb21ldHJ5RGF0YTpudWxsLGF0dHJpYnV0ZURhdGE6bnVsbCxmZWF0dXJlRGF0YTpudWxsLGNoaWxkcmVuOnJ9fXVwZGF0ZU5vZGVJbmRleChlLHQsbyl7Y29uc3Qgcj10aGlzLl9pZDJNZXRhLmdldChlKTtyJiZcIm1lc2hcIj09PXIudHlwZSYmKHIubm9kZUluZGV4PW8pfWFzeW5jIF9sb2FkTWVzaENvbXBvbmVudE5vZGVKU09OKGUpe3JldHVybntpZDplLmlkLHZlcnNpb246ZS5tZXNoTm9kZUluZm8udmVyc2lvbixtYnM6ZS5tYnMsb2JiOm51bGwsc2hhcmVkUmVzb3VyY2U6bnVsbCxnZW9tZXRyeURhdGE6bnVsbCxhdHRyaWJ1dGVEYXRhOm51bGwsZmVhdHVyZURhdGE6bnVsbCxjaGlsZHJlbjpudWxsLGlzRW1wdHk6ITF9fWFzeW5jIGxvYWROb2RlRGF0YShvLG4pe2NvbnN0IHM9dGhpcy5faWQyTWV0YS5nZXQobyk7aWYobnVsbD09c3x8XCJtZXNoLWNvbXBvbmVudFwiIT09cy50eXBlKXRocm93IG5ldyBlKGBGYWlsZWQgdG8gbG9hZCBjbGllbnQgbm9kZSBkYXRhIGZvciBub2RlICR7b30gKHVuZXhwZWN0ZWQgbm9kZSBpbmZvKWApO2NvbnN0IGE9cy5tZXNoTm9kZUluZm8saT1hd2FpdCB0aGlzLl9nZXRNZXNoRGF0YShhKSxsPWkubG9hZGVkTWVzaCxkPWEub2lkO2lmKG51bGw9PWwuY29tcG9uZW50cyl0aHJvdyBuZXcgZShgRmFpbGVkIHRvIGxvYWQgY2xpZW50IG5vZGUgZGF0YSBmb3Igbm9kZSAke299ICh1bmV4cGVjdGVkIG51bGwgcmVmZXJlbmNlKWApO2NvbnN0IHU9bC5jb21wb25lbnRzW3MuY29tcG9uZW50SW5kZXhdLHttYXRlcmlhbDptLHJlcXVpcmVkVGV4dHVyZXM6aCx0ZXh0dXJlRGF0YTp4fT1hd2FpdCBjKHUubWF0ZXJpYWwpO2lmKG51bGwhPXgpZm9yKGNvbnN0IGUgb2YgeCludWxsIT1lJiZzLnRleHR1cmVEYXRhLnNldChlLmlkLGUpO2NvbnN0IHk9e3BhcmFtczp7bWF0ZXJpYWw6bX0sdHlwZTpcIkFycmF5QnVmZmVyVmlld1wifSx7dmVydGV4U3BhY2U6TSxvcmlnaW46Zyx0cmFuc2Zvcm06X309bCxTPVtnLngsZy55LGcuej8/MF0sdz17ZmVhdHVyZURhdGFQb3NpdGlvbjpTLGZlYXR1cmVJZHM6W10sZ2VvbWV0cmllczpbeV19LE49e2F0dHJpYnV0ZURhdGE6e30sbG9hZGVkQXR0cmlidXRlczpbXX07aS5wcm9qZWN0aW9uUHJvbWlzZXx8KHQodGhpcy5fd29ya2VyLFwiU2NlbmVMYXllcldvcmtlciBpcyBuZWVkZWQgdG8gcHJvamVjdCBtZXNoXCIpLGkucHJvamVjdGlvblByb21pc2U9dGhpcy5fd29ya2VyLnByb2plY3Qoe3Bvc2l0aW9uczpsLnZlcnRleEF0dHJpYnV0ZXMucG9zaXRpb24sbG9jYWxNYXRyaXg6Xz8ubG9jYWxNYXRyaXgsdmVydGV4U3BhY2U6TS50b0pTT04oKSxvcmlnaW46UyxpblNwYXRpYWxSZWZlcmVuY2U6bC5zcGF0aWFsUmVmZXJlbmNlLnRvSlNPTigpLG91dFNwYXRpYWxSZWZlcmVuY2U6dGhpcy5fdmVydGV4U1IudG9KU09OKCksbG9jYWxNb2RlOnRoaXMuX2xvY2FsTW9kZX0sbikpO2NvbnN0e3Byb2plY3RlZDpiLG9yaWdpbmFsOnZ9PWF3YWl0IGkucHJvamVjdGlvblByb21pc2U7bC52ZXJ0ZXhBdHRyaWJ1dGVzLnBvc2l0aW9uPXY7Y29uc3R7dHJhbnNmb3JtZWQ6RCxvcmlnaW5hbDpSfT1hd2FpdCBmKHUsaSx0aGlzLl93b3JrZXIsbik7bC52ZXJ0ZXhBdHRyaWJ1dGVzLm5vcm1hbD1SLHIobik7Y29uc3R7Z2VvbWV0cnlCdWZmZXI6SSxnZW9tZXRyeURlc2NyaXB0b3I6an09cChiLHUuZmFjZXMsRCxsLnZlcnRleEF0dHJpYnV0ZXMudXYsbC52ZXJ0ZXhBdHRyaWJ1dGVzLmNvbG9yLGQpO3JldHVybntnZW9tZXRyeURhdGE6dyxhdHRyaWJ1dGVEYXRhSW5mbzpOLGdlb21ldHJ5QnVmZmVyOkksZ2VvbWV0cnlEZXNjcmlwdG9yOmoscmVxdWlyZWRUZXh0dXJlczpoLHRleHR1cmVEYXRhOngsbm9ybWFsUmVmZXJlbmNlRnJhbWU6dGhpcy5fdmVydGV4U1IuaXNHZW9ncmFwaGljP1wiZWFzdC1ub3J0aC11cFwiOlwidmVydGV4LXJlZmVyZW5jZS1mcmFtZVwifX1hc3luYyBsb2FkQXR0cmlidXRlcyhlLHQsbyl7Y29uc3Qgcj1lLm51bUZlYXR1cmVzLG49e307Zm9yKGNvbnN0e2ZpZWxkOntuYW1lOnN9fW9mIHQpbltzXT1uZXcgQXJyYXkocik7cmV0dXJuIG59YXN5bmMgbG9hZFRleHR1cmVzKGUsdCxvKXtjb25zdCByPWUuaWQsbj10aGlzLl9pZDJNZXRhLmdldChyKTtpZihudWxsPT1ufHxcIm1lc2gtY29tcG9uZW50XCIhPT1uLnR5cGUpdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gbG9hZCB0ZXh0dXJlcyBmb3Igbm9kZSAke2UuaWR9ICh1bmV4cGVjdGVkIG5vZGUgaW5mbylgKTtjb25zdCBzPVtdO2Zvcihjb25zdCBhIG9mIHQpcy5wdXNoKG4udGV4dHVyZURhdGEuZ2V0KGEuaWQpfHxudWxsKTtyZXR1cm4gc31hc3luYyBfZ2V0TWVzaERhdGEoZSl7Y29uc3QgdD1lLnZlcnNpb24scj10aGlzLl9tZW1DYWNoZS5nZXQodCk7aWYobnVsbD09cil7aWYobnVsbCE9ZS5sb2FkTWVzaFByb21pc2UpcmV0dXJuIGUubG9hZE1lc2hQcm9taXNlO2NvbnN0IHI9YXN5bmMocixuKT0+e2NvbnN0IHM9ZS51bmxvYWRlZE1lc2guY2xvbmUoKTt0cnl7YXdhaXQgcy5sb2FkKCl9Y2F0Y2gobCl7bihsKX1jb25zdCBhPXMubWVtb3J5VXNhZ2UsaT17bG9hZGVkTWVzaDpzLHByb2plY3Rpb25Qcm9taXNlOm51bGwsbm9ybWFsc1RyYW5zZm9ybVByb21pc2U6bnVsbCx1c2VkTWVtb3J5SW5CeXRlczphfTt0aGlzLl9tZW1DYWNoZS5wdXQodCxpLGEsbyksZS5sb2FkTWVzaFByb21pc2U9bnVsbCxyKGkpfTtyZXR1cm4gZS5sb2FkTWVzaFByb21pc2U9bmV3IFByb21pc2UoKChlLHQpPT5yKGUsdCkpKSxlLmxvYWRNZXNoUHJvbWlzZX1yZXR1cm4gcn19ZnVuY3Rpb24gaChlLHQpe2NvbnN0e3NwYXRpYWxSZWZlcmVuY2U6b309ZSxyPVsxLC0xXSxuPVsuNSplLndpZHRoLC41KmUuaGVpZ2h0LGUuaGFzWj8uNSooZS56bWF4LWUuem1pbik6MF0scz1vLmlzR2VvZ3JhcGhpYz9vLm1ldGVyc1BlclVuaXQ6MSxhPWUuY2VudGVyO2xldCBpPTA7aWYoZS5oYXNaKWZvcihsZXQgbD0wO2w8MjsrK2wpZm9yKGxldCBlPTA7ZTwyOysrZSlmb3IobGV0IG89MDtvPDI7KytvKXtjb25zdCBkPShhLngrcltsXSpuWzBdLXQueCkqcyx1PShhLnkrcltlXSpuWzFdLXQueSkqcyxjPWEueityW29dKm5bMl0tdC56O2k9TWF0aC5tYXgoZCpkK3UqdStjKmMsaSl9ZWxzZSBmb3IobGV0IGw9MDtsPDI7KytsKWZvcihsZXQgZT0wO2U8MjsrK2Upe2NvbnN0IG89KGEueCtyW2xdKm5bMF0tdC54KSpzLGQ9KGEueStyW2VdKm5bMV0tdC55KSpzO2k9TWF0aC5tYXgobypvK2QqZCxpKX1yZXR1cm4gdShbdC54LHQueSx0LnpdLE1hdGguc3FydChpKSl9YXN5bmMgZnVuY3Rpb24gZihlLG8scixuKXtjb25zdHt0cmFuc2Zvcm06ZCx2ZXJ0ZXhBdHRyaWJ1dGVzOnV9PW8ubG9hZGVkTWVzaCxjPVwic291cmNlXCI9PT1lLnNoYWRpbmc/dS5ub3JtYWw6bnVsbDtpZighKG51bGwhPWMmJm51bGwhPWQmJigwIT09ZC5yb3RhdGlvbkFuZ2xlfHwhaShkLnNjYWxlLGwpKSkpcmV0dXJue3RyYW5zZm9ybWVkOmMsb3JpZ2luYWw6dS5ub3JtYWx9O2lmKCFvLm5vcm1hbHNUcmFuc2Zvcm1Qcm9taXNlKXt0KHIsXCJTY2VuZUxheWVyV29ya2VyIGlzIG5lZWRlZCB0byB0cmFuc2Zvcm0gbWVzaCBub3JtYWxzXCIpO2NvbnN0IGU9YSgpO3MoZSxkLmxvY2FsTWF0cml4KSxvLm5vcm1hbHNUcmFuc2Zvcm1Qcm9taXNlPXIudHJhbnNmb3JtTm9ybWFscyh7bm9ybWFsTWF0cml4OmUsbm9ybWFsczpjfSxuKX1yZXR1cm4gby5ub3JtYWxzVHJhbnNmb3JtUHJvbWlzZX1mdW5jdGlvbiBwKGUsdCxvLHIsbixzKXtjb25zdCBhPTEsaT10Lmxlbmd0aC8zLGw9MyppO2xldCBkPTAsdT0wLGM9ITEsbT0wLGg9ITEsZj0wLHA9ITEseT0wLHc9MCxOPTA7ZCs9TSxkKz1NLHU9ZCxkKz0zKmwqZyxudWxsIT1vJiYoYz0hMCxtPWQsZCs9MypsKmcpLG51bGwhPXImJihoPSEwLGY9ZCxkKz0yKmwqZyksbnVsbCE9biYmKHA9ITAseT1kLGQrPTQqbCpfKSx3PWQsZCs9YSpTLE49ZCxkKz0yKmEqTTtjb25zdCBiPW5ldyBBcnJheUJ1ZmZlcihkKSx2PW5ldyBVaW50OEFycmF5KGIpO3godiwwLGwpLHgodixNLGEpO2NvbnN0IEQ9bmV3IEZsb2F0MzJBcnJheShiLHUpLFI9bnVsbCE9bz9uZXcgRmxvYXQzMkFycmF5KGIsbSk6bnVsbCxJPW51bGwhPXI/bmV3IEZsb2F0MzJBcnJheShiLGYpOm51bGwsaj1udWxsIT1uP25ldyBVaW50OEFycmF5KGIseSk6bnVsbDtmb3IobGV0IHg9MDt4PGk7Kyt4KXtjb25zdCBzPTMqeDtmb3IobGV0IGE9MDthPDM7KythKXtjb25zdCBpPXRbcythXSxsPTMqaSxkPTkqeCszKmE7aWYoRFtkXT1lW2xdLERbZCsxXT1lW2wrMV0sRFtkKzJdPWVbbCsyXSxudWxsIT1SJiYoUltkXT1vW2xdLFJbZCsxXT1vW2wrMV0sUltkKzJdPW9bbCsyXSksbnVsbCE9SSl7Y29uc3QgZT0yKmksdD02KngrMiphO0lbdF09cltlXSxJW3QrMV09cltlKzFdfWlmKG51bGwhPWope2NvbnN0IGU9NCppLHQ9MTIqeCs0KmE7alt0XT1uW2VdLGpbdCsxXT1uW2UrMV0salt0KzJdPW5bZSsyXSxqW3QrM109bltlKzNdfX19eCh2LHcscykseCh2LHcrTSxzLzIqKjMyKSx4KHYsTiwwKSx4KHYsTitNLGktMSk7cmV0dXJue2dlb21ldHJ5QnVmZmVyOmIsZ2VvbWV0cnlEZXNjcmlwdG9yOntpc0RyYWNvOiExLGlzTGVnYWN5OiEwLGNvbG9yOnAsbm9ybWFsOmMsdXYwOmgsdXZSZWdpb246ITEsZmVhdHVyZUluZGV4OiEwfX19ZnVuY3Rpb24geChlLHQsbyl7ZVt0XT0yNTUmbyxlW3QrMV09MjU1Jm8+PjgsZVt0KzJdPTI1NSZvPj4xNixlW3QrM109MjU1Jm8+PjI0fWZ1bmN0aW9uIHkoZSl7Y29uc3QgdD1lLm1ldGFkYXRhLmRpc3BsYXlTb3VyY2U/LnNvdXJjZTtpZihudWxsPT10fHwhQXJyYXkuaXNBcnJheSh0KXx8IXQubGVuZ3RofHx0WzBdaW5zdGFuY2VvZiBGaWxlKXJldHVybiBuKCk7Y29uc3Qgbz10O2xldCByPVwiXCI7Zm9yKGNvbnN0IG4gb2YgbylyKz1uLm1ha2VIYXNoKCk7cmV0dXJuIHIrSlNPTi5zdHJpbmdpZnkobnVsbCE9ZS50cmFuc2Zvcm0/ZS50cmFuc2Zvcm0udG9KU09OKCk6XCJcIikrKGUudmVydGV4U3BhY2UuaXNSZWxhdGl2ZT9KU09OLnN0cmluZ2lmeShlLnZlcnRleFNwYWNlLm9yaWdpbik6XCJcIil9Y29uc3QgTT00LGc9NCxfPTEsUz04O2V4cG9ydHttIGFzIEkzU0NsaWVudE5vZGVMb2FkZXIsaCBhcyBjcmVhdGVTcGhlcmVGcm9tRXh0ZW50LGcgYXMgc2l6ZU9mRmxvYXQzMixNIGFzIHNpemVPZkludDMyLFMgYXMgc2l6ZU9mVUludDY0LF8gYXMgc2l6ZU9mVUludDgsZiBhcyB0cmFuc2Zvcm1Ob3JtYWxzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3JlbW92ZVVub3JkZXJlZCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHttYWtlSGFuZGxlIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYW5kbGVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtUYXNrUHJpb3JpdHkgYXMgaX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2xldCBhPWNsYXNzIGV4dGVuZHMgc3tjb25zdHJ1Y3Rvcigpe3N1cGVyKCksdGhpcy5yZWZlcmVuY2VDb3VudD0wLHRoaXMuY2FsbGJhY2tzPW5ldyBBcnJheSx0aGlzLnJ1bkluZGV4PTB9Z2V0IHJ1bm5pbmcoKXtyZXR1cm4gdGhpcy5jYWxsYmFja3Muc29tZSgocj0+ci5ydW5uaW5nKSl9cnVuVGFzayhyKXt0aGlzLl9zb3J0KCk7Y29uc3Qgcz10aGlzLmNhbGxiYWNrcyx0PXtudW1JbmRleExvYWRpbmc6MCxudW1Ob2Rlc0xvYWRpbmc6MH07Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aCYmIXIuZG9uZTsrK2Upc1tlXS5wcmlvcml0eT1zW2VdLnJ1blRhc2socix0KSx0aGlzLnJ1bkluZGV4PWV9X3NvcnQoKXtjb25zdCByPXRoaXMuY2FsbGJhY2tzO2xldCBzPXIubGVuZ3RoO2ZvcihsZXQgdD10aGlzLnJ1bkluZGV4O3Q+MDt0LS0pe2NvbnN0IGU9clt0LTFdO2xldCBvPXQ7Zm9yKDtvPHIubGVuZ3RoJiZlLnByaW9yaXR5PD1yW29dLnByaW9yaXR5JiYobyE9PXN8fGUucHJpb3JpdHk8cltvXS5wcmlvcml0eSk7KXJbby0xXT1yW29dLG8rKztyW28tMV09ZSxzPW8tMX10aGlzLnJ1bkluZGV4PTB9YWRkKHIpe3RoaXMuX3NvcnQoKSxyLnByaW9yaXR5PTEvMCx0aGlzLmNhbGxiYWNrcy51bnNoaWZ0KHIpLHRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKX1yZW1vdmUocil7dCh0aGlzLmNhbGxiYWNrcyxyKSx0aGlzLnJ1bkluZGV4PXRoaXMuY2FsbGJhY2tzLmxlbmd0aCx0aGlzLl9zb3J0KCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJydW5uaW5nXCIpfX07cihbbyh7cmVhZE9ubHk6ITB9KV0sYS5wcm90b3R5cGUsXCJydW5uaW5nXCIsbnVsbCksYT1yKFtuKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU0ZyYW1lVGFza1wiKV0sYSk7Y2xhc3MgY3tjb25zdHJ1Y3RvcihyLHMpe3RoaXMudGFzaz1yLHRoaXMuaGFuZGxlPXN9fWNvbnN0IGw9bmV3IE1hcDtmdW5jdGlvbiB1KHIscyl7bGV0IHQ9bC5nZXQocik7aWYobnVsbD09dCl7Y29uc3Qgcz1uZXcgYSxlPXIucmVnaXN0ZXJUYXNrKGkuSTNTX0NPTlRST0xMRVIscyk7dD1uZXcgYyhzLGUpLGwuc2V0KHIsdCl9cmV0dXJuIHQudGFzay5hZGQocyksZSgoKCk9PntpZihudWxsPT10KXJldHVybjt0LnRhc2sucmVtb3ZlKHMpO3QudGFzay5jYWxsYmFja3MubGVuZ3RoPjB8fChsLmRlbGV0ZShyKSx0LmhhbmRsZS5yZW1vdmUoKSx0LnRhc2suZGVzdHJveSgpKSx0PW51bGx9KSl9ZXhwb3J0e3UgYXMgYWRkQ2FsbGJhY2t9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvUG9vbGVkQXJyYXkuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7bCBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzLmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1NwaGVyZSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJvdW5kaW5nU3BoZXJlLmpzXCI7aW1wb3J0e2YgYXMgbixoIGFzIG8sdSBhcyByLGMgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3Mvc3BoZXJlLmpzXCI7aW1wb3J0e2kzc1BhdGNoaW5nRW5hYmxlZCBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL3N1cHBvcnQvZmVhdHVyZUZsYWdzLmpzXCI7aW1wb3J0e2V4cGFuZEVsZXZhdGlvblJhbmdlIGFzIGR9ZnJvbVwiLi9FbGV2YXRpb25SYW5nZS5qc1wiO2ltcG9ydHtMb2RNZXRyaWMgYXMgaCxOb2RlQmFzZSBhcyB1LE5vZGUgYXMgYyxOb2RlRmlsdGVySW1wYWN0IGFzIGcsTm9kZUlNTW9kaWZpY2F0aW9uSW1wYWN0IGFzIF8sTm9kZVRyYXZlcnNhbFN0YXRlIGFzIGZ9ZnJvbVwiLi9JM1NOb2RlLmpzXCI7aW1wb3J0e2ludmFsaWRhdGVNYnMgYXMgbSxpbnZhbGlkYXRlT2JiIGFzIHYsYWRkV3JhcGFyb3VuZCBhcyBOfWZyb21cIi4vSTNTVXRpbC5qc1wiO2ltcG9ydHtjbG9uZSBhcyBwfWZyb21cIi4uLy4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2NsYXNzIGJ7Y29uc3RydWN0b3IoZSx0LGkscyxuKXt0aGlzLmNoaWxkT2Zmc2V0PWUsdGhpcy5jaGlsZENvdW50PXQsdGhpcy52aXNpYmlsaXR5Q2FjaGU9aSx0aGlzLnJlZj1zLHRoaXMubm9kZT1uLHRoaXMudXNlQXNIb2xlPTAsdGhpcy5maWx0ZXJJbXBhY3Q9Zy5Ob3RDaGVja2VkLHRoaXMudHJhdmVyc2FsU3RhdGU9bnVsbCx0aGlzLnBhcmVudD0tMX19Y2xhc3MgeXtjb25zdHJ1Y3RvcihlPVtdLHQ9W10pe3RoaXMubm9kZXM9ZSx0aGlzLmNoaWxkcmVuPXQsdGhpcy5sYXN0VHJhdmVyc2VkPTAsdGhpcy5udW1Ob2Rlc1dpdGhMb2FkZWRDaGlsZHJlbj0wfX1jbGFzcyBQe2dldCBfdXNlTm9kZVBhZ2VzKCl7cmV0dXJuIHRoaXMuX3BhZ2VTaXplPjB9Y29uc3RydWN0b3IodCxpLHMsbixvLHIsYSxkLHUsYyxnLF8sZixtLHYpe3RoaXMuX2xheWVyPXQsdGhpcy5fc3RyZWFtRGF0YUNvbnRyb2xsZXI9cyx0aGlzLl9jbGllbnROb2RlTG9hZGVyPW4sdGhpcy5fdmlld3BvcnRRdWVyaWVzPW8sdGhpcy5fbG9nZ2VyPXIsdGhpcy5ob2xlRmlsbGluZz1hLHRoaXMuX2lzTG9hZGVkPWQsdGhpcy5faXNSZWxvYWRpbmc9dSx0aGlzLl9pc1NlbGVjdGVkPWMsdGhpcy5fZW5hYmxlPWcsdGhpcy5fbmVlZHNVcGRhdGU9Xyx0aGlzLl9jYW5SZXF1ZXN0PWYsdGhpcy5fY29tcHV0ZVZpc2liaWxpdHlPYmI9bSx0aGlzLl9jb21wdXRlTm9kZUZpbHRlcmluZz12LHRoaXMuX2RpcnR5PSEwLHRoaXMuX25vZGVQYWdlcz1uZXcgTWFwLHRoaXMuX2NsaWVudE5vZGVQYWdlPW51bGwsdGhpcy5fcGFnZVNpemU9MCx0aGlzLl9yb290SW5kZXg9MCx0aGlzLl9sb2RNZXRyaWM9aC5Ob25lLHRoaXMuX2xvZENvbnZlcnNpb249ZT0+ZSx0aGlzLl9pc0VkaXRhYmxlPSExLHRoaXMuX3VybFByZWZpeD1cIlwiLHRoaXMuX2xvYWRpbmdOb2Rlcz1uZXcgU2V0LHRoaXMuX2xvYWRpbmdQYWdlcz1uZXcgU2V0LHRoaXMuX2ZhaWxlZE5vZGVzPW5ldyBTZXQsdGhpcy5fZmFpbGVkUGFnZXM9bmV3IFNldCx0aGlzLl9pbmRleE1pc3Npbmc9MSx0aGlzLl9tYXhVbmxvYWRlZFByaW89TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSx0aGlzLl92ZXJzaW9uPVMoMCksdGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbj1TKDApLHRoaXMuX21heExldmVsPTEsdGhpcy5fZmVhdHVyZUVzdGltYXRlPXtlc3RpbWF0ZTowLGxlYXZlc1JlYWNoZWQ6ITF9LHRoaXMuX3VubG9hZGVkTWVtb3J5RXN0aW1hdGU9MCx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcz1uZXcgZSh7ZGVhbGxvY2F0b3I6bnVsbH0pLHRoaXMuX3ByZWZldGNoTm9kZXM9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLl91cGRhdGVzPW5ldyBJKHRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzKSx0aGlzLl9pbU1vZGlmaWNhdGlvblVuY2F0ZWdvcml6ZWQ9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLmlnbm9yZVNlcnZpY2VPYmI9ITEsdGhpcy5wcm9ncmVzc2l2ZUxvYWRQZW5hbHR5PTAsdGhpcy5fcGFnZVF1ZXVlPW5ldyBBcnJheSx0aGlzLl9uZXdQYWdlcz1uZXcgQXJyYXksdGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlPSExLHRoaXMubGF5ZXJIYXNNb2RpZmljYXRpb25zPSExLHRoaXMuX2xheWVySGFzRmlsdGVyPSExLHRoaXMuX2ZyYW1lTnVtYmVyPTAsdGhpcy5faXNFZGl0YWJsZT1sKCkmJm51bGwhPXQuYXNzb2NpYXRlZExheWVyPy5pbmZvRm9yM0QsdC5zZXJ2aWNlVXBkYXRlVGltZVN0YW1wPy5sYXN0VXBkYXRlJiYodGhpcy5fbGFzdFVwZGF0ZT1gJHt0LnNlcnZpY2VVcGRhdGVUaW1lU3RhbXAubGFzdFVwZGF0ZX1gKSx0aGlzLl9tYXhMb2RMZXZlbD10aGlzLl92aWV3cG9ydFF1ZXJpZXM/dGhpcy5fdmlld3BvcnRRdWVyaWVzLm1heExvZExldmVsOjEsdGhpcy5faW5pdChpKX1faW5pdChlKXtpZihcInBhZ2VcIj09PWUudHlwZSl7Y29uc3QgdD1lLnJvb3RQYWdlO3N3aXRjaCh0aGlzLl91cmxQcmVmaXg9ZS51cmxQcmVmaXgsdGhpcy5fcGFnZVNpemU9ZS5wYWdlU2l6ZSxlLmxvZE1ldHJpYyl7Y2FzZVwibWF4U2NyZWVuVGhyZXNob2xkXCI6dGhpcy5fbG9kTWV0cmljPWguTWF4U2NyZWVuVGhyZXNob2xkO2JyZWFrO2Nhc2VcIm1heFNjcmVlblRocmVzaG9sZFNRXCI6dGhpcy5fbG9kTWV0cmljPWguTWF4U2NyZWVuVGhyZXNob2xkLHRoaXMuX2xvZENvbnZlcnNpb249en1pZih0aGlzLl9pc0VkaXRhYmxlKXt0aGlzLl9yb290SW5kZXg9LTE7Y29uc3QgaT1BKGUucm9vdEluZGV4LGUucGFnZVNpemUpLHM9dC5ub2Rlc1tpXSxuPXtub2Rlczpbe2luZGV4OnRoaXMuX3Jvb3RJbmRleCxjaGlsZHJlbjpbZS5yb290SW5kZXhdLG1lc2g6dm9pZCAwLG9iYjpzLm9iYixsb2RUaHJlc2hvbGQ6cy5sb2RUaHJlc2hvbGR9XX07dGhpcy5fYWRkUGFnZShPKHRoaXMuX3Jvb3RJbmRleCx0aGlzLl9wYWdlU2l6ZSksbiksdGhpcy5nZXROb2RlKC0xKS5zZXJ2aWNlT2JiPXZvaWQgMH1lbHNlIHRoaXMuX3Jvb3RJbmRleD1lLnJvb3RJbmRleDt0aGlzLl9hZGRQYWdlKE8oZS5yb290SW5kZXgsdGhpcy5fcGFnZVNpemUpLHQpLHRoaXMuX3VwZGF0ZVBhcmVudHNBbmRMZXZlbCgpfWVsc2UgaWYoXCJub2RlXCI9PT1lLnR5cGUpe3RoaXMuX3VybFByZWZpeD1lLnVybFByZWZpeDtjb25zdCB0PW5ldyB5O2lmKHRoaXMuX25vZGVQYWdlcy5zZXQoMCx0KSx0aGlzLl9pc0VkaXRhYmxlKXt0aGlzLl9jbGllbnROb2RlUGFnZT1uZXcgeTtjb25zdCB0PXtpZDpcIi0xXCIsdmVyc2lvbjpudWxsLG1iczplLnJvb3ROb2RlLm1icyxvYmI6ZS5yb290Tm9kZS5vYmIsc2hhcmVkUmVzb3VyY2U6bnVsbCxnZW9tZXRyeURhdGE6bnVsbCxhdHRyaWJ1dGVEYXRhOm51bGwsZmVhdHVyZURhdGE6bnVsbCxjaGlsZHJlbjpbe2lkOlwicm9vdFwiLGhyZWY6XCIuLi9yb290XCIsbWJzOmUucm9vdE5vZGUubWJzLG9iYjplLnJvb3ROb2RlLm9iYn1dfTt0aGlzLl9yb290SW5kZXg9dGhpcy5fbWFrZUNsaWVudFJlZk5vZGUobmV3IHUodC5pZCxudWxsKSwtMSk7Y29uc3QgaT10aGlzLl92YWxpZGF0ZU5vZGUodC5pZCx0KTtpJiZ0aGlzLl9hZGROb2RlKGksdGhpcy5fcm9vdEluZGV4KX1lbHNlIHRoaXMuX3Jvb3RJbmRleD10aGlzLl9tYWtlUmVmTm9kZShuZXcgdShlLnJvb3ROb2RlLmlkLG51bGwpLC0xKTtjb25zdCBpPXRoaXMuX3ZhbGlkYXRlTm9kZShlLnJvb3ROb2RlLmlkLGUucm9vdE5vZGUpO2kmJnRoaXMuX2FkZE5vZGUoaSwwKX19YWRkQ2xpZW50Tm9kZVRvSW5kZXgoZSx0KXtjb25zdCBpPS0xLHM9bmV3IHUoZSx0KSxuPXRoaXMuX21ha2VDbGllbnRSZWZOb2RlKHMsaSk7cmV0dXJuIHRoaXMuX2xpbmtDaGlsZFRvUGFyZW50Tm9kZShpLG4pLHRoaXMucmVxdWVzdFVwZGF0ZSgpLG59cmVtb3ZlQ2xpZW50Tm9kZUZyb21JbmRleChlLHQsaSl7dGhpcy5fZGVzdHJveUNsaWVudFJlZk5vZGUoZSx0LGkpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfV9sb2FkUGFnZShlKXt0aGlzLl9sb2FkaW5nUGFnZXMuYWRkKGUpO2NvbnN0IGk9dGhpcy5fdXJsUHJlZml4K2U7dGhpcy5fc3RyZWFtRGF0YUNvbnRyb2xsZXIucmVxdWVzdChpLFwianNvblwiKS50aGVuKCh0PT57dGhpcy5fcGFnZVF1ZXVlLnB1c2goe3BhZ2VJbmRleDplLHBhZ2U6dH0pfSkpLmNhdGNoKChpPT57dGhpcy5fbG9hZGluZ1BhZ2VzLmRlbGV0ZShlKSx0KGkpfHwodGhpcy5fZmFpbGVkUGFnZXMuYWRkKGUpLHRoaXMuX2xvZ2dlci5lcnJvcihcIiNsb2FkUGFnZSgpXCIsdGhpcy5fbGF5ZXIsYEVycm9yIHdoZW4gbG9hZGluZyBwYWdlICR7ZX1gLGkpKX0pKX1fYWRkUXVldWVkUGFnZXMoZSl7Zm9yKDt0aGlzLl9wYWdlUXVldWUubGVuZ3RoPjAmJiFlLmRvbmU7KXtjb25zdHtwYWdlSW5kZXg6dCxwYWdlOml9PXRoaXMuX3BhZ2VRdWV1ZS5zaGlmdCgpO3RoaXMuX2FkZFBhZ2UodCxpKSx0aGlzLl9sb2FkaW5nUGFnZXMuZGVsZXRlKHQpLGUubWFkZVByb2dyZXNzKCksdGhpcy5uZWVkTm9kZUVsZXZhdGlvblJhbmdlJiZ0aGlzLl9uZXdQYWdlcy5wdXNoKHQpfXRoaXMuX3VwZGF0ZVBhcmVudHNBbmRMZXZlbCgpfV9pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2VGb3JOZXdQYWdlcyhlKXtpZih0aGlzLm5lZWROb2RlRWxldmF0aW9uUmFuZ2UpZm9yKDt0aGlzLl9uZXdQYWdlcy5sZW5ndGg+MCYmIWUuZG9uZTspe2NvbnN0IGU9dGhpcy5fbm9kZVBhZ2VzLmdldCh0aGlzLl9uZXdQYWdlcy5zaGlmdCgpKTtpZihudWxsPT1lKWNvbnRpbnVlO2NvbnN0IHQ9ZS5ub2Rlcztmb3IobGV0IGk9MDtpPHRoaXMuX3BhZ2VTaXplO2krKyl7bGV0IGU9dFtpXS5wYXJlbnQ7Zm9yKDtudWxsIT1lJiZlIT09dGhpcy5fcm9vdEluZGV4Oyl7Y29uc3QgdD10aGlzLmdldE5vZGUoZSk7dCYmIU51bWJlci5pc05hTih0Py5lbGV2YXRpb25SYW5nZU1pbikmJih0LmludmFsaWRhdGVFbGV2YXRpb25SYW5nZSgpLHRoaXMuaW52YWxpZGF0ZUJvdW5kaW5nVm9sdW1lQ2FjaGUoZSkpLGU9dGhpcy5nZXRQYXJlbnRJbmRleChlKX19fX1fYWRkUGFnZShlLHQpe2NvbnN0IHM9W10sbz1bXSxyPXQubm9kZXMubWFwKCgodCxyKT0+e2NvbnN0IGE9cy5sZW5ndGgsbD10LmNoaWxkcmVuP3QuY2hpbGRyZW4ubGVuZ3RoOjA7by5wdXNoKHRoaXMuX3Jvb3RJbmRleCk7Zm9yKGxldCBlPTA7ZTxsO2UrKylzLnB1c2godC5jaGlsZHJlbltlXSk7Y29uc3QgZD1gJHt0LmluZGV4fWAsaD1wKHQub2JiKSx1PW4oaC5jZW50ZXJbMF0saC5jZW50ZXJbMV0saC5jZW50ZXJbMl0saShoLmhhbGZTaXplKSksZz10Lm1lc2g/LmF0dHJpYnV0ZSxfPXQubWVzaD8uZ2VvbWV0cnksZj10Lm1lc2g/Lm1hdGVyaWFsLG09e2hhc1NoYXJlZFJlc291cmNlOiExLGlzRW1wdHk6bnVsbD09XyxhdHRyaWJ1dGVzOm51bGwhPWc/LnJlc291cmNlP2Ake2cucmVzb3VyY2V9YDp2b2lkIDAsZ2VvbWV0cnk6bnVsbCE9Xz8ucmVzb3VyY2U/YCR7Xy5yZXNvdXJjZX1gOnZvaWQgMCx0ZXh0dXJlOm51bGwhPWY/LnJlc291cmNlP2Ake2YucmVzb3VyY2V9YDp2b2lkIDAsZ2VvbWV0cnlEZWZpbml0aW9uOl8/Xy5kZWZpbml0aW9uOi0xLG1hdGVyaWFsRGVmaW5pdGlvbjpmP2YuZGVmaW5pdGlvbjotMX0sdj1uZXcgYyhkLFYocixlLHRoaXMuX3BhZ2VTaXplKSx1LGwsMCxtLHRoaXMuX2xhc3RVcGRhdGUsdGhpcy5fbG9kTWV0cmljLHRoaXMuX2xvZENvbnZlcnNpb24odC5sb2RUaHJlc2hvbGQpLF8/Xy5mZWF0dXJlQ291bnQ6bnVsbCk7cmV0dXJuIHYuc2VydmljZU9iYj1oLHYudmlzaWJpbGl0eU9iYj10aGlzLl9jb21wdXRlVmlzaWJpbGl0eU9iYih2KSx2LnZlcnRleENvdW50PV8/Xy52ZXJ0ZXhDb3VudDowLG5ldyBiKGEsbCx3KHRoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb24pLG51bGwsdil9KSksYT1uZXcgeShyLHMpOy0xPT09ZT90aGlzLl9jbGllbnROb2RlUGFnZT1hOnRoaXMuX25vZGVQYWdlcy5zZXQoZSxhKX1fdXBkYXRlUGFyZW50c0FuZExldmVsKCl7Y29uc3QgZT1uZXcgQXJyYXksdD0odCxpLHMpPT57Y29uc3Qgbj10aGlzLl9nZXRQYWdlKHQpO2lmKG51bGwhPW4pe2NvbnN0IG89QSh0LHRoaXMuX3BhZ2VTaXplKSxyPW4ubm9kZXNbb107ci5wYXJlbnQ9bnVsbCE9aT9pOi0xO2NvbnN0IGE9ci5ub2RlO251bGwhPWEmJihhLmxldmVsPXMsZS5wdXNoKHQpKX19O2Zvcih0KHRoaXMuX3Jvb3RJbmRleCxudWxsLDApO2UubGVuZ3RoOyl7Y29uc3QgaT1lLnBvcCgpLHM9dGhpcy5nZXROb2RlKGkpO2lmKG51bGwhPXMpZm9yKGxldCBlPTA7ZTxzLmNoaWxkQ291bnQ7ZSsrKXt0KHRoaXMuZ2V0Q2hpbGRJbmRleChzLmluZGV4LGUpLGkscy5sZXZlbCsxKSx0aGlzLl9tYXhMZXZlbD1NYXRoLm1heCh0aGlzLl9tYXhMZXZlbCxzLmxldmVsKzEpfX19X2dldFBhZ2UoZSl7Y29uc3QgdD1PKGUsdGhpcy5fcGFnZVNpemUpO3JldHVybiB0PDA/dGhpcy5fY2xpZW50Tm9kZVBhZ2U6dGhpcy5fbm9kZVBhZ2VzLmdldCh0KX1fZ2V0Tm9kZUludGVybmFsKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0UGFnZShlKTtyZXR1cm4gbnVsbD09dD9udWxsOih0Lmxhc3RUcmF2ZXJzZWQ9dGhpcy5fZnJhbWVOdW1iZXIsdC5ub2Rlc1tBKGUsdGhpcy5fcGFnZVNpemUpXSl9X2FkZE5vZGUoZSx0KXtudWxsIT1lLmNoaWxkcmVuJiZ0aGlzLnBvcHVsYXRlQ2hpbGRyZW4odCxlLmNoaWxkcmVuKTtjb25zdCBpPXRoaXMuZ2V0UGFyZW50KHQpLHM9bnVsbCE9aT9pLmxldmVsKzE6MDt0aGlzLl9tYXhMZXZlbD1NYXRoLm1heCh0aGlzLl9tYXhMZXZlbCxlLmNoaWxkcmVuP3MrMTpzKTtjb25zdHtsb2RNZXRyaWM6bixtYXhFcnJvcjpvfT1rKGUubG9kU2VsZWN0aW9uKSxyPXRoaXMuX2dldE5vZGVJbnRlcm5hbCh0KTtyZXR1cm4gci5ub2RlPW5ldyBjKGUuaWQsdCxlLm1icyxyLmNoaWxkQ291bnQscyxlLnJlc291cmNlcyxlLnZlcnNpb24sbixvLGUubnVtRmVhdHVyZXMpLGUub2JiJiYoci5ub2RlLnNlcnZpY2VPYmI9cChlLm9iYikpLHIubm9kZS52aXNpYmlsaXR5T2JiPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKHIubm9kZSksbnVsbCE9ci5yZWYmJihudWxsPT1yLnJlZi5tYnMmJihyLnJlZi5tYnM9ZS5tYnMpLHIubm9kZS5yZW5kZXJNYnM9ci5yZWYucmVuZGVyTWJzLHIubm9kZS5zZXJ2aWNlT2JiSW5SZW5kZXJTUj1yLnJlZi5zZXJ2aWNlT2JiSW5SZW5kZXJTUixyLnJlZi52aXNpYmlsaXR5T2JiPXIubm9kZS52aXNpYmlsaXR5T2JiKSxyLm5vZGV9X21ha2VSZWZOb2RlKGUsdCl7Y29uc3QgaT10aGlzLl9ub2RlUGFnZXMuZ2V0KDApO2lmKHQ8LTEpcmV0dXJuIHRoaXMuX21ha2VDbGllbnRSZWZOb2RlKGUsdCk7aWYobnVsbD09aSlyZXR1cm4tMTtjb25zdCBzPWkubm9kZXMubGVuZ3RoLG49bmV3IGIoMCwwLHcodGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbiksZSxudWxsKTtyZXR1cm4gaS5ub2Rlcy5wdXNoKG4pLG4ucGFyZW50PXQsbShlLnJlbmRlck1icyksdihlLnNlcnZpY2VPYmJJblJlbmRlclNSKSxzfV9tYWtlQ2xpZW50UmVmTm9kZShlLHQpe2NvbnN0IGk9dGhpcy5fY2xpZW50Tm9kZVBhZ2U7aWYobnVsbD09aSlyZXR1cm4tMTtpZih0Pj0wKXRocm93IG5ldyBFcnJvcihcIkkzU0luZGV4OjpjbGllbnQgc2lkZSBub2RlcyBjYW4gbm90IGJlIG1hZGUgY2hpbGRyZW4gb2Ygc2VydmljZSBzaWRlIG5vZGVzLlwiKTtjb25zdCBzPS0oaS5ub2Rlcy5sZW5ndGgrMSksbj1uZXcgYigwLDAsdyh0aGlzLl92aXNpYmlsaXR5Q2FjaGVWZXJzaW9uKSxlLG51bGwpO3JldHVybiBpLm5vZGVzLnB1c2gobiksbi5wYXJlbnQ9dCxtKGUucmVuZGVyTWJzKSx2KGUuc2VydmljZU9iYkluUmVuZGVyU1IpLHN9X2xpbmtDaGlsZFRvUGFyZW50Tm9kZShlLHQpe2NvbnN0IGk9dGhpcy5fY2xpZW50Tm9kZVBhZ2U7aWYobnVsbD09aXx8ZT49MClyZXR1cm47Y29uc3Qgcz1BKGUsdGhpcy5fcGFnZVNpemUpLG49QSh0LHRoaXMuX3BhZ2VTaXplKSxvPWkubm9kZXNbc10scj1vLmNoaWxkT2Zmc2V0O2kuY2hpbGRyZW4uc3BsaWNlKG8uY2hpbGRPZmZzZXQrby5jaGlsZENvdW50LDAsdCk7Y29uc3QgYT0xO28uY2hpbGRDb3VudCs9YSxudWxsIT1vLm5vZGUmJihvLm5vZGUuY2hpbGRDb3VudCs9YSk7Zm9yKGNvbnN0IGwgb2YgaS5ub2RlcylsLmNoaWxkT2Zmc2V0PnImJihsLmNoaWxkT2Zmc2V0Kz1hKTtpLm5vZGVzW25dLnBhcmVudD1lLHRoaXMuX3VwZGF0ZVBhcmVudEJvdW5kaW5nSW5mb3JtYXRpb24oZSl9X2Rlc3Ryb3lDbGllbnRSZWZOb2RlKGUsdCxpKXtjb25zdCBzPXRoaXMuX2NsaWVudE5vZGVQYWdlO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IG49dGhpcy5nZXRQYXJlbnRJbmRleChlKTtpZihudWxsPT1uKXJldHVybjtjb25zdCBvPW5ldyBTZXQscj1uZXcgTWFwLGE9ZT0+e2NvbnN0IGk9QShlLHRoaXMuX3BhZ2VTaXplKSxuPXMubm9kZXNbaV07aWYobi5jaGlsZENvdW50PjApZm9yKGxldCB0PW4uY2hpbGRPZmZzZXQ7dDxuLmNoaWxkT2Zmc2V0K24uY2hpbGRDb3VudDsrK3QpYShzLmNoaWxkcmVuW3RdKTtjb25zdCByPW4ubm9kZT8uaWQ/P24ucmVmPy5pZDtpZihudWxsPT1yKXRocm93IG5ldyBFcnJvcihcIk5vZGUgaGFzIG5vIGlkXCIpO3QocixlKSxvLmFkZChuKX07YShlKTtjb25zdCBsPXMubm9kZXMsZD1zLmNoaWxkcmVuLGg9cy5ub2Rlcy5tYXAoKCgpPT4tMSkpLHU9W10sYz1bXTtmb3IobGV0IGc9MDtnPGwubGVuZ3RoOysrZyl7Y29uc3QgZT1sW2ddO2lmKG8uaGFzKGUpKWNvbnRpbnVlO2NvbnN0IHQ9dS5sZW5ndGgscz1WKGcsLTEsdGhpcy5fcGFnZVNpemUpLG49Vih0LC0xLHRoaXMuX3BhZ2VTaXplKTtpZihlLm5vZGUmJihlLm5vZGUuaW5kZXg9biksaFtnXT1uLHUucHVzaChlKSxzIT09bil7Y29uc3QgdD1lLm5vZGU/LmlkPz9lLnJlZj8uaWQ7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoXCJOb2RlIGhhcyBubyBpZFwiKTtpKHQscyxuKSxyLnNldChzLG4pfX1mb3IobGV0IGc9MDtnPHUubGVuZ3RoOysrZyl7Y29uc3QgZT1WKGcsLTEsdGhpcy5fcGFnZVNpemUpLHQ9dVtnXSxpPWMubGVuZ3RoO2ZvcihsZXQgcz10LmNoaWxkT2Zmc2V0O3M8dC5jaGlsZE9mZnNldCt0LmNoaWxkQ291bnQ7KytzKXtjb25zdCB0PWRbc107aWYodD49MCljLnB1c2godCk7ZWxzZXtjb25zdCBpPUEodCx0aGlzLl9wYWdlU2l6ZSkscz1sW2ldO2lmKG8uaGFzKHMpKWNvbnRpbnVlO2NvbnN0IG49aFtpXTtjLnB1c2gobikscy5wYXJlbnQ9ZX19dC5jaGlsZE9mZnNldD1pLHQuY2hpbGRDb3VudD1jLmxlbmd0aC1pLHQubm9kZSYmKHQubm9kZS5jaGlsZENvdW50PXQuY2hpbGRDb3VudCl9cy5ub2Rlcz11LHMuY2hpbGRyZW49Yyx0aGlzLl91cGRhdGVQYXJlbnRCb3VuZGluZ0luZm9ybWF0aW9uKGhbQShuLHRoaXMuX3BhZ2VTaXplKV0pfV91cGRhdGVQYXJlbnRCb3VuZGluZ0luZm9ybWF0aW9uKGUpe2xldCB0PWU7ZG97bGV0IGU9bnVsbDtjb25zdCBpPXRoaXMuX2NsaWVudE5vZGVMb2FkZXIuaW5kZXhTUixuPXRoaXMuX2NsaWVudE5vZGVMb2FkZXIucmVuZGVyU1IsbD10aGlzLl9nZXROb2RlSW50ZXJuYWwodCk7aWYobnVsbD09bClyZXR1cm47Zm9yKGxldCBhPTA7YTxsLmNoaWxkQ291bnQ7YSsrKXtjb25zdCBsPXRoaXMuZ2V0Q2hpbGRJbmRleCh0LGEpLGQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGwpLGg9bnVsbCE9ZD9kLnJlZnx8ZC5ub2RlOm51bGw7aWYobnVsbCE9aCYmaC5tYnNbM10+MClpZihudWxsPT1lKWU9byhoLm1icyxEKTtlbHNle2NvbnN0IHQ9VCxvPVEsYT1VO3MoaC5tYnMsaSx0LG4pLHMoZSxpLG8sbikscih0LG8sYSkscyhhLG4sZSxpKX19Y29uc3QgZD1sLnJlZnx8bC5ub2RlO251bGwhPWQmJihudWxsIT1lP2QubWJzPW8oZSxudWxsIT1kLm1icz9kLm1iczphKCkpOm0oZC5tYnMpLG0oZC5yZW5kZXJNYnMpLHYoZC5zZXJ2aWNlT2JiSW5SZW5kZXJTUiksZC5nZW9tZXRyeU9iYj1udWxsKSx0aGlzLmludmFsaWRhdGVOb2RlVmlzaWJpbGl0eUNhY2hlSW50ZXJuYWwobCksdD10aGlzLmdldFBhcmVudEluZGV4KHQpfXdoaWxlKG51bGwhPXQpfXBvcHVsYXRlQ2hpbGRyZW4oZSx0KXtjb25zdCBpPXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKSxzPXRoaXMuX2dldFBhZ2UoZSk7aS5jaGlsZE9mZnNldD1zLmNoaWxkcmVuLmxlbmd0aCxpLmNoaWxkQ291bnQ9dC5sZW5ndGg7Zm9yKGxldCBuPTA7bjx0Lmxlbmd0aDtuKyspe2NvbnN0IGk9dGhpcy5fbWFrZVJlZk5vZGUodFtuXSxlKTtzLmNoaWxkcmVuLnB1c2goaSl9fWdldE5vZGUoZSl7Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSk7cmV0dXJuIG51bGwhPXQ/dC5ub2RlOm51bGx9Z2V0SW5kZXhCeUlkKGUpe2xldCB0O3JldHVybiB0aGlzLl9mb3JBbGxOb2RlcygoKGkscyk9PnsobnVsbCE9aS5ub2RlJiZpLm5vZGUuaWQ9PT1lfHxudWxsIT1pLnJlZiYmaS5yZWYuaWQ9PT1lKSYmKHQ9cyl9KSksdH1nZXROb2RlQnlJZChlKXtjb25zdCB0PXRoaXMuZ2V0SW5kZXhCeUlkKGUpO3JldHVybiBudWxsIT10JiZ0Pj0wP3RoaXMuZ2V0Tm9kZSh0KTpudWxsfWdldENoaWxkSW5kZXgoZSx0KXtjb25zdCBpPXRoaXMuX2dldFBhZ2UoZSk7aWYobnVsbD09aSlyZXR1cm4tMTtjb25zdCBzPWkubm9kZXNbQShlLHRoaXMuX3BhZ2VTaXplKV07cmV0dXJuIGkuY2hpbGRyZW5bcy5jaGlsZE9mZnNldCt0XX1nZXRQYXJlbnRJbmRleChlKXtjb25zdCB0PXRoaXMuX2dldFBhZ2UoZSk7cmV0dXJuIG51bGwhPXQmJmUhPT10aGlzLl9yb290SW5kZXg/dC5ub2Rlc1tBKGUsdGhpcy5fcGFnZVNpemUpXS5wYXJlbnQ6bnVsbH1nZXRQYXJlbnQoZSl7Y29uc3QgdD10aGlzLmdldFBhcmVudEluZGV4KGUpO3JldHVybiBudWxsIT10P3RoaXMuZ2V0Tm9kZSh0KTpudWxsfWlzTGVhZihlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtyZXR1cm4gbnVsbCE9dCYmMD09PXQuY2hpbGRDb3VudH1nZXQgcm9vdE5vZGUoKXtyZXR1cm4gdGhpcy5nZXROb2RlKHRoaXMuX3Jvb3RJbmRleCl9Z2V0IGlzRWRpdGFibGUoKXtyZXR1cm4gdGhpcy5faXNFZGl0YWJsZX1yZW1vdmVBbGxHZW9tZXRyeU9iYnMoKXt0aGlzLl9mb3JBbGxOb2RlcygoZT0+e251bGwhPWUubm9kZSYmKGUubm9kZS5nZW9tZXRyeU9iYj1udWxsKX0pKX1pbnZhbGlkYXRlVmlzaWJpbGl0eUNhY2hlKCl7dGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbj1TKHRoaXMuX3Zpc2liaWxpdHlDYWNoZVZlcnNpb24pfWludmFsaWRhdGVOb2RlVmlzaWJpbGl0eUNhY2hlKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO251bGwhPXQmJnRoaXMuaW52YWxpZGF0ZU5vZGVWaXNpYmlsaXR5Q2FjaGVJbnRlcm5hbCh0KX1pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZUludGVybmFsKGUpe2UudmlzaWJpbGl0eUNhY2hlPXcodGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbil9aW52YWxpZGF0ZUJvdW5kaW5nVm9sdW1lQ2FjaGUoZSl7Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSk7bnVsbCE9dCYmKEModCksdGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZUludGVybmFsKHQpKX11cGRhdGVFbGV2YXRpb25DaGFuZ2VkKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO2lmKG51bGw9PXQpcmV0dXJuO2lmKCF0aGlzLm5lZWROb2RlRWxldmF0aW9uUmFuZ2UpcmV0dXJuIHZvaWQgdGhpcy5pbnZhbGlkYXRlQm91bmRpbmdWb2x1bWVDYWNoZShlKTtjb25zdCBpPW51bGwhPXQubm9kZT90Lm5vZGU6dC5yZWY7bnVsbCE9aSYmaS5pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2UoKX1pbnZhbGlkYXRlR2VvbWV0cnlWaXNpYmlsaXR5KGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO251bGwhPXQ/Lm5vZGUmJih0Lm5vZGUuZ2VvbWV0cnlPYmI9bnVsbCxtKHQubm9kZS5yZW5kZXJNYnMpLHYodC5ub2RlLnNlcnZpY2VPYmJJblJlbmRlclNSKSl9aW52YWxpZGF0ZVZpc2liaWxpdHlPYmJzKCl7bnVsbCE9dGhpcy5yb290Tm9kZSYmdGhpcy50cmF2ZXJzZSh0aGlzLnJvb3ROb2RlLChlPT4oZS52aXNpYmlsaXR5T2JiPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKGUpLGUuZ2VvbWV0cnlPYmI9bnVsbCwhMCkpKX1fdXBkYXRlRWxldmF0aW9uUmFuZ2UoZSl7dGhpcy5fdXBkYXRlRWxldmF0aW9uUmFuZ2VJbnRlcm5hbChlLG51bGwpfV91cGRhdGVFbGV2YXRpb25SYW5nZUludGVybmFsKGUsdCl7Y29uc3QgaT10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSk7aWYoIWkpcmV0dXJuITE7Y29uc3Qgcz1pPy5ub2RlPz9pPy5yZWY7aWYoIXMpcmV0dXJuITE7Y29uc3Qgbj1zLmVsZXZhdGlvblJhbmdlTWluO2lmKCFOdW1iZXIuaXNOYU4obikpcmV0dXJuIGQodCxzKSwhMDtjb25zdCBvPXtlbGV2YXRpb25SYW5nZU1pbjoxLzAsZWxldmF0aW9uUmFuZ2VNYXg6LTEvMH07bGV0IHI9ITE7Zm9yKGxldCBsPTA7bDxpLmNoaWxkQ291bnQ7bCsrKXtjb25zdCB0PXRoaXMuZ2V0Q2hpbGRJbmRleChlLGwpO3RoaXMuX3VwZGF0ZUVsZXZhdGlvblJhbmdlSW50ZXJuYWwodCxvKXx8KHI9ITApfWlmKDA9PT1pLmNoaWxkQ291bnR8fHIpe2NvbnN0IGU9IWkubm9kZT8ucmVzb3VyY2VzLmlzRW1wdHk7dGhpcy5fdmlld3BvcnRRdWVyaWVzLmV4cGFuZEVsZXZhdGlvblJhbmdlKHMsZSxvKX1jb25zdCBhPXMuZWxldmF0aW9uUmFuZ2VNYXg7cmV0dXJuIE51bWJlci5pc05hTihuKXx8biE9PW8uZWxldmF0aW9uUmFuZ2VNaW58fGEhPT1vLmVsZXZhdGlvblJhbmdlTWF4PyhpLm5vZGUmJihpLm5vZGUuZWxldmF0aW9uUmFuZ2VNaW49by5lbGV2YXRpb25SYW5nZU1pbixpLm5vZGUuZWxldmF0aW9uUmFuZ2VNYXg9by5lbGV2YXRpb25SYW5nZU1heCksaS5yZWYmJihpLnJlZi5lbGV2YXRpb25SYW5nZU1pbj1vLmVsZXZhdGlvblJhbmdlTWluLGkucmVmLmVsZXZhdGlvblJhbmdlTWF4PW8uZWxldmF0aW9uUmFuZ2VNYXgpLHRoaXMuaW52YWxpZGF0ZUJvdW5kaW5nVm9sdW1lQ2FjaGUoZSksZCh0LHMpLCEwKTooZCh0LHMpLCEwKX1pc05vZGVWaXNpYmxlKGUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO2lmKG51bGw9PXR8fG51bGwhPXQucmVmJiYhdC5yZWYubWJzKXJldHVybiEwO2lmKHRoaXMubmVlZE5vZGVFbGV2YXRpb25SYW5nZSYmdGhpcy5fdXBkYXRlRWxldmF0aW9uUmFuZ2UoZSksIU0odC52aXNpYmlsaXR5Q2FjaGUsdGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbikpe2NvbnN0IGU9dC5ub2RlLGk9IWV8fHQucmVmJiYhZS52aXNpYmlsaXR5T2JiP3QucmVmPz9udWxsOmU7aWYodGhpcy5fbGF5ZXJIYXNGaWx0ZXImJnRoaXMuX2NvbXB1dGVOb2RlRmlsdGVyaW5nJiYobnVsbCE9ZXx8bnVsbCE9dC5yZWYpJiZ0LmZpbHRlckltcGFjdD09PWcuTm90Q2hlY2tlZCl7Y29uc3QgaT1udWxsIT1lP2UubWJzOm51bGwhPXQucmVmP3QucmVmLm1iczpudWxsO3QuZmlsdGVySW1wYWN0PW51bGwhPWk/dGhpcy5fY29tcHV0ZU5vZGVGaWx0ZXJpbmcoaSk6Zy5Vbm1vZGlmaWVkfWNvbnN0IHM9bnVsbCE9ZSYmdC5maWx0ZXJJbXBhY3Q9PT1nLkN1bGxlZCxuPSEobnVsbCE9ZSYmZS5pbU1vZGlmaWNhdGlvbkltcGFjdD09PV8uQ3VsbGVkKSYmKCFpfHx0aGlzLl92aWV3cG9ydFF1ZXJpZXMuaXNOb2RlVmlzaWJsZShpKSkmJiFzO3JldHVybiB0LnZpc2liaWxpdHlDYWNoZT1SKG4sdGhpcy5fdmlzaWJpbGl0eUNhY2hlVmVyc2lvbiksbn1yZXR1cm4gRSh0LnZpc2liaWxpdHlDYWNoZSl9aXNHZW9tZXRyeVZpc2libGUoZSl7aWYoIXRoaXMuaXNOb2RlVmlzaWJsZShlKSlyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtyZXR1cm4hIShudWxsPT10Py5ub2RlPy5nZW9tZXRyeU9iYnx8dGhpcy5sYXllckhhc01vZGlmaWNhdGlvbnMmJnQubm9kZS5pbU1vZGlmaWNhdGlvbkltcGFjdD09PV8uTm90Q2hlY2tlZCl8fHRoaXMuX3ZpZXdwb3J0UXVlcmllcy5pc0dlb21ldHJ5VmlzaWJsZSh0Lm5vZGUpfV90cmF2ZXJzZUNvdmVyYWdlKGUsdCxpLHMsbil7Y29uc3Qgbz10aGlzLl9nZXRQYWdlKGUpO2lmKG51bGw9PW98fDA9PT10LmNoaWxkQ291bnQpcmV0dXJuO2NvbnN0IHI9dC5jaGlsZE9mZnNldCt0LmNoaWxkQ291bnQsYT1uZXcgQXJyYXk7Zm9yKGxldCBsPXQuY2hpbGRPZmZzZXQ7bDxyOysrbCl7Y29uc3QgZT1vLmNoaWxkcmVuW2xdLHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO251bGwhPXQ/Lm5vZGUmJnRoaXMuaXNHZW9tZXRyeVZpc2libGUoZSkmJmEucHVzaCh0KX1zLz1hLmxlbmd0aDtmb3IoY29uc3QgbCBvZiBhKXtjb25zdCBlPWwubm9kZS5pbmRleDt0aGlzLl9pc0xvYWRlZChlKXx8dGhpcy5faXNSZWxvYWRpbmcoZSk/KG4uZGVsdGE9TWF0aC5tYXgobi5kZWx0YSxpKSxuLmNvdmVyYWdlKz1zKTp0aGlzLl90cmF2ZXJzZUNvdmVyYWdlKGUsbCxpKzEscyxuKX19dXNlTm9kZUFzSG9sZShlKXtpZihcIm9mZlwiPT09dGhpcy5ob2xlRmlsbGluZylyZXR1cm4hMTtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKTtpZihudWxsPT10KXJldHVybiExO2lmKFwiYWx3YXlzXCI9PT10aGlzLmhvbGVGaWxsaW5nKXJldHVybiEwO2lmKE0odC51c2VBc0hvbGUsdGhpcy5fdmVyc2lvbikpcmV0dXJuIEUodC51c2VBc0hvbGUpO2NvbnN0IGk9e2RlbHRhOjAsY292ZXJhZ2U6MH07dGhpcy5fdHJhdmVyc2VDb3ZlcmFnZShlLHQsMCwxLGkpO2NvbnN0IHM9aS5kZWx0YSppLmNvdmVyYWdlPD0uNTtyZXR1cm4gdC51c2VBc0hvbGU9UihzLHRoaXMuX3ZlcnNpb24pLHN9Z2V0IG1heExldmVsKCl7cmV0dXJuIHRoaXMuX21heExldmVsfWdldCBkaXJ0eSgpe3JldHVybiB0aGlzLl9kaXJ0eX1kZXN0cm95KCl7dGhpcy5fdXBkYXRlcy5hZGQucHJ1bmUoKSx0aGlzLl91cGRhdGVzLnVwZGF0ZS5wcnVuZSgpfXJlcXVlc3RVcGRhdGUoKXt0aGlzLl9kaXJ0eT0hMCx0aGlzLl9pbmRleE1pc3Npbmc9MSx0aGlzLl92ZXJzaW9uPVModGhpcy5fdmVyc2lvbil9aW1Nb2RpZmljYXRpb25zQ2hhbmdlZChlKXt0aGlzLmxheWVySGFzTW9kaWZpY2F0aW9ucz1lLHRoaXMuX2ZvckFsbE5vZGVzKCgoe25vZGU6ZX0pPT57bnVsbCE9ZSYmKGUuaW1Nb2RpZmljYXRpb25JbXBhY3Q9Xy5Ob3RDaGVja2VkLGUudmlzaWJpbGl0eU9iYj10aGlzLl9jb21wdXRlVmlzaWJpbGl0eU9iYihlKSxlLmhhc01vZGlmaWNhdGlvbnMmJnRoaXMuaW52YWxpZGF0ZUdlb21ldHJ5VmlzaWJpbGl0eShlLmluZGV4KSl9KSksdGhpcy5pbnZhbGlkYXRlVmlzaWJpbGl0eUNhY2hlKCl9bGF5ZXJGaWx0ZXJDaGFuZ2VkKGUpe3RoaXMuX2xheWVySGFzRmlsdGVyPWUsdGhpcy5fZm9yQWxsTm9kZXMoKGU9PntpZihudWxsIT1lKXtlLmZpbHRlckltcGFjdD1nLk5vdENoZWNrZWQ7Y29uc3QgdD1lLm5vZGU7bnVsbCE9dCYmdGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZSh0LmluZGV4KX19KSksdGhpcy5pbnZhbGlkYXRlVmlzaWJpbGl0eUNhY2hlKCl9dXBkYXRlKGUsdCxpKXtpZighdGhpcy5fZGlydHkpcmV0dXJuO3RoaXMuX3BhZ2VRdWV1ZS5sZW5ndGg+MCYmdGhpcy5fYWRkUXVldWVkUGFnZXModCksdGhpcy5faW52YWxpZGF0ZUVsZXZhdGlvblJhbmdlRm9yTmV3UGFnZXModCksdGhpcy5fbWF4VW5sb2FkZWRQcmlvPU51bWJlci5ORUdBVElWRV9JTkZJTklUWSx0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbz1OdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksdGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMuY2xlYXIoKSx0aGlzLl9wcmVmZXRjaE5vZGVzLmNsZWFyKCksdGhpcy5fdXBkYXRlcy5yZXNldChlKSx4LmNsZWFyKCk7bGV0IHM9ITA7Y29uc3Qgbj1uZXcgRixvPW5ldyBGLHI9dGhpcy5faW1Nb2RpZmljYXRpb25VbmNhdGVnb3JpemVkO3IuY2xlYXIoKTtjb25zdCBhPW5ldyBTZXQsbD0obCxkLGgpPT57Y29uc3QgdT1PKGwsdGhpcy5fcGFnZVNpemUpO2lmKGEuYWRkKHUpLG51bGw9PWQpe2xldCBlPXRoaXMuX2VudHJ5UHJpb3JpdHkobCk7cmV0dXJuIGU9PT0xLzAmJihlPXRoaXMuX2VudHJ5UHJpb3JpdHkoaCkpLHguc2V0KHUsTWF0aC5tYXgoZSx4LmdldCh1KXx8MCkpLHRoaXMuX2xvYWRpbmdQYWdlcy5oYXModSl8fHRoaXMuX2ZhaWxlZFBhZ2VzLmhhcyh1KXx8dGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMucHVzaCh1KSx2b2lkKHRoaXMuX21heFByb2Nlc3NpbmdQcmlvPU1hdGgubWF4KHRoaXMuX21heFByb2Nlc3NpbmdQcmlvLGUpKX1jb25zdCBjPWQubm9kZTtpZih0aGlzLl91cGRhdGVOb2RlRmVhdHVyZUVzdGltYXRlKGMsbyksbnVsbD09Yyl7Y29uc3QgZT10aGlzLl9lbnRyeVByaW9yaXR5KGwpO3JldHVybiB0aGlzLl9sb2FkaW5nTm9kZXMuaGFzKGwpfHx0aGlzLl9mYWlsZWROb2Rlcy5oYXMobCl8fCh0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5wdXNoKGwpLHguc2V0KGwsZSkpLHZvaWQodGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW89TWF0aC5tYXgodGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW8sZSkpfWNvbnN0IGc9dGhpcy5fZ2V0UGFnZShsKTtpZigwPT09dGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMubGVuZ3RoJiYhdGhpcy5fdXNlTm9kZVBhZ2VzKWZvcihsZXQgZT0wO2U8ZC5jaGlsZENvdW50O2UrKyl7Y29uc3QgdD1nLmNoaWxkcmVuW2QuY2hpbGRPZmZzZXQrZV0saT10aGlzLl9nZXROb2RlSW50ZXJuYWwodCk7bnVsbD09aXx8aS5ub2RlfHx0aGlzLl9sb2FkaW5nTm9kZXMuaGFzKHQpfHx0aGlzLl9mYWlsZWROb2Rlcy5oYXModCl8fCh4LnNldCh0LHRoaXMuX2VudHJ5UHJpb3JpdHkodCkpLHRoaXMuX3ByZWZldGNoTm9kZXMucHVzaCh0KSl9aWYoYy5mYWlsZWR8fGMucmVzb3VyY2VzLmlzRW1wdHkpcmV0dXJuIHZvaWQocyYmZC5jaGlsZENvdW50PjAmJnRoaXMuX2lzU2VsZWN0ZWQoYykmJihzPSExKSk7aWYodGhpcy5faXNMb2FkZWQobCkpe2lmKG4ua25vd24rPWMubWVtb3J5LCsrbi5rbm93bk5vZGVzLHRoaXMuX2lzU2VsZWN0ZWQoYyk/ZC5jaGlsZENvdW50PjAmJihzPSExKToobi51bnJlbW92ZWQrPWMubWVtb3J5LHM9ITEpLHRoaXMuX25lZWRzVXBkYXRlKGMpKXtjb25zdCBlPXRoaXMuX2VudHJ5UHJpb3JpdHkobCk7eC5zZXQobCxlKSx0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbz1NYXRoLm1heCh0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbyxlKSx0aGlzLl91cGRhdGVzLnVwZGF0ZS5wdXNoKGwpfXJldHVybn1pZihjLm1lbW9yeSYmKG4ua25vd24rPWMubWVtb3J5LCsrbi5rbm93bk5vZGVzKSwhdGhpcy5faXNTZWxlY3RlZChjKSlyZXR1cm4gdm9pZCh0aGlzLl9pc1JlbG9hZGluZyhsKSYmdGhpcy5fdXBkYXRlcy5yZW1vdmUucHVzaChsKSk7aWYoZC5jaGlsZENvdW50PjAmJihzPSExKSxjLm1lbW9yeT8obi5taXNzaW5nKz1jLm1lbW9yeSxuLmtub3duKz1jLm1lbW9yeSwrK24ua25vd25Ob2Rlcyk6KytuLm1pc3NpbmdOb2RlcyxlLmluY2x1ZGVzKGMuaW5kZXgpKXJldHVybiB0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbz1NYXRoLm1heCh0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbyx0aGlzLl9lbnRyeVByaW9yaXR5KGwpKSx2b2lkKHRoaXMuX3VwZGF0ZXMuY2FuY2VsPXRoaXMuX3VwZGF0ZXMuY2FuY2VsLmZpbHRlcigoZT0+ZSE9PWMuaW5kZXgpKSk7aWYoIXQuZG9uZSYmdGhpcy5fZW5hYmxlKGMpKXJldHVybiB2b2lkIHQubWFkZVByb2dyZXNzKCk7Y29uc3QgZj10aGlzLl9lbnRyeVByaW9yaXR5KGwpO3guc2V0KGwsZiksdGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW89TWF0aC5tYXgodGhpcy5fbWF4UHJvY2Vzc2luZ1ByaW8sZiksdGhpcy5fdXBkYXRlcy5hZGQucHVzaChsKSx0aGlzLmxheWVySGFzTW9kaWZpY2F0aW9ucyYmaSYmbnVsbCE9YyYmYy5pbU1vZGlmaWNhdGlvbkltcGFjdD09PV8uTm90Q2hlY2tlZCYmci5wdXNoKGwpfTt0aGlzLnRyYXZlcnNlVmlzaWJsZShsKSx0aGlzLl9mcmFtZU51bWJlcisrLHRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLnNvcnQoKChlLHQpPT5lLXQpKSx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5maWx0ZXJJblBsYWNlKCgoZSx0KT0+dDwxfHx0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcy5kYXRhW3QtMV0hPT1lKSksdGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMuc29ydCgoKGUsdCk9PnguZ2V0KGUpLXguZ2V0KHQpKSksdGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMubGVuZ3RoPjAmJih0aGlzLl9tYXhVbmxvYWRlZFByaW89eC5nZXQodGhpcy5fbWlzc2luZ1BhZ2VzQW5kTm9kZXMuYmFjaygpKSx0aGlzLl9wcmVmZXRjaE5vZGVzLmNsZWFyKCkpO2NvbnN0IGQ9dGhpcy5fdXBkYXRlcy5hZGQ7ZC5sZW5ndGg+MCYmdGhpcy5sYXllckhhc01vZGlmaWNhdGlvbnMmJihyLmxlbmd0aD4wJiZpPy4ociksZC5maWx0ZXJJblBsYWNlKChlPT57Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwoZSksaT1udWxsPT10Py5ub2RlfHx0Lm5vZGUuaW1Nb2RpZmljYXRpb25JbXBhY3QhPT1fLkN1bGxlZDtyZXR1cm4gaXx8dGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKSxpfSkpKSx0aGlzLl91bmxvYWRlZE1lbW9yeUVzdGltYXRlPW4ubWlzc2luZy1uLnVucmVtb3ZlZCxuLmtub3duTm9kZXM+MyYmbi5taXNzaW5nTm9kZXM+MCYmKHRoaXMuX3VubG9hZGVkTWVtb3J5RXN0aW1hdGUrPW4ua25vd24vbi5rbm93bk5vZGVzKm4ubWlzc2luZ05vZGVzKSx0aGlzLl91bmxvYWRlZE1lbW9yeUVzdGltYXRlPS44Kk1hdGgubWF4KDAsdGhpcy5fdW5sb2FkZWRNZW1vcnlFc3RpbWF0ZSksdGhpcy5fZmVhdHVyZUVzdGltYXRlLmVzdGltYXRlPXRoaXMuX2NvbXB1dGVGZWF0dXJlRXN0aW1hdGUobyksdGhpcy5fZmVhdHVyZUVzdGltYXRlLmxlYXZlc1JlYWNoZWQ9cyx0aGlzLl91cGRhdGVzLmFkZC5maWx0ZXJJblBsYWNlKChlPT54LmdldChlKT49dGhpcy5fbWF4VW5sb2FkZWRQcmlvKSkuc29ydCgoKGUsdCk9PnguZ2V0KGUpLXguZ2V0KHQpKSksdGhpcy5fdXBkYXRlcy51cGRhdGUuc29ydCgoKGUsdCk9PnguZ2V0KGUpLXguZ2V0KHQpKSksdGhpcy5faW5kZXhNaXNzaW5nPXRoaXMuX2xvYWRpbmdQYWdlcy5zaXplK3RoaXMuX2xvYWRpbmdOb2Rlcy5zaXplK3RoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLmxlbmd0aCx0aGlzLl9kaXJ0eT10aGlzLl9pbmRleE1pc3Npbmc+MCx4LmNsZWFyKCl9Y2hlY2tGZWF0dXJlVGFyZ2V0KGUsdCl7Y29uc3QgaT10aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXModCk7bGV0IHM9dCxuPXQsbz1pLHI9MTA7Zm9yKDtyLS07KXtjb25zdCBpPW5ldyBGO3RoaXMuX3VwZGF0ZUZlYXR1cmVFc3RpbWF0ZShzLGkpO2lmKHRoaXMuX2NvbXB1dGVGZWF0dXJlRXN0aW1hdGUoaSk8PWUpe2lmKHM+PXR8fGkubWlzc2luZ05vZGVzPjB8fDA9PT1yKWJyZWFrO289cyxzPS41KihzK24pfWVsc2Ugbj1zLHM9LjUqKHMrbyl9cmV0dXJuIHRoaXMuX3ZlcnNpb249Uyh0aGlzLl92ZXJzaW9uKSx0aGlzLl92aWV3cG9ydFF1ZXJpZXMudXBkYXRlU2NyZWVuU3BhY2VFcnJvckJpYXMoaSksTWF0aC5taW4odCxzKX1fdXBkYXRlRmVhdHVyZUVzdGltYXRlKGUsdCl7dGhpcy5fdmVyc2lvbj1TKHRoaXMuX3ZlcnNpb24pLHRoaXMuX3ZpZXdwb3J0UXVlcmllcy51cGRhdGVTY3JlZW5TcGFjZUVycm9yQmlhcyhlKSx0aGlzLnRyYXZlcnNlVmlzaWJsZSgoKGUsaSk9PnRoaXMuX3VwZGF0ZU5vZGVGZWF0dXJlRXN0aW1hdGUobnVsbCE9aT9pLm5vZGU6dm9pZCAwLHQpKSl9X3VwZGF0ZU5vZGVGZWF0dXJlRXN0aW1hdGUoZSx0KXtudWxsPT1lfHxlLmZhaWxlZHx8bnVsbD09ZS5udW1GZWF0dXJlc3x8dGhpcy5faXNTZWxlY3RlZChlKSYmKG51bGwhPWUubnVtRmVhdHVyZXM/KHQubWlzc2luZys9ZS5udW1GZWF0dXJlcyx0Lmtub3duKz1lLm51bUZlYXR1cmVzLCsrdC5rbm93bk5vZGVzKTorK3QubWlzc2luZ05vZGVzKX1fY29tcHV0ZUZlYXR1cmVFc3RpbWF0ZShlKXtsZXQgdD1lLmtub3duLWUudW5yZW1vdmVkO3JldHVybiBlLmtub3duTm9kZXM+MyYmZS5taXNzaW5nTm9kZXM+MCYmKHQrPWUua25vd24vZS5rbm93bk5vZGVzKmUubWlzc2luZ05vZGVzKSxNYXRoLm1heCgwLHQpfWxvYWQoKXtyZXR1cm4gdGhpcy5fbG9hZCh0aGlzLl9taXNzaW5nUGFnZXNBbmROb2Rlcyl9cHJlZmV0Y2goKXtyZXR1cm4gdGhpcy5fcHJlZmV0Y2hOb2Rlcy5zb3J0KCgoZSx0KT0+eC5nZXQoZSkteC5nZXQodCkpKSx0aGlzLl9sb2FkKHRoaXMuX3ByZWZldGNoTm9kZXMpfV9sb2FkKGUpe2lmKDA9PT1lLmxlbmd0aHx8IXRoaXMuX2NhblJlcXVlc3QoKSlyZXR1cm4hMTtmb3IoO2UubGVuZ3RoPjAmJnRoaXMuX2NhblJlcXVlc3QoKTspe2NvbnN0IHQ9ZS5wb3AoKTt0aGlzLl91c2VOb2RlUGFnZXMmJnQ+PTA/dGhpcy5fbG9hZFBhZ2UodCk6dGhpcy5fbG9hZE5vZGUodCl9cmV0dXJuITB9Z2V0IGlzTG9hZGluZygpe3JldHVybiB0aGlzLl9pbmRleE1pc3Npbmc+MH1nZXQgaXNQcmVmZXRjaGluZygpe3JldHVybiB0aGlzLl9wcmVmZXRjaE5vZGVzLmxlbmd0aD4wfWdldCBpbmRleExvYWRpbmcoKXtyZXR1cm4gdGhpcy5fbG9hZGluZ1BhZ2VzLnNpemUrdGhpcy5fbG9hZGluZ05vZGVzLnNpemV9Z2V0IGluZGV4TWlzc2luZygpe3JldHVybiB0aGlzLl9pbmRleE1pc3Npbmd9Z2V0IHVubG9hZGVkTWVtb3J5RXN0aW1hdGUoKXtyZXR1cm4gdGhpcy5fdW5sb2FkZWRNZW1vcnlFc3RpbWF0ZX1nZXQgdXBkYXRlcygpe3JldHVybiB0aGlzLl91cGRhdGVzfWdldCBmZWF0dXJlRXN0aW1hdGUoKXtyZXR1cm4gdGhpcy5fZmVhdHVyZUVzdGltYXRlfWdldCBtYXhQcmlvcml0eSgpe3JldHVybiBNYXRoLm1heCh0aGlzLl9tYXhQcm9jZXNzaW5nUHJpbyx0aGlzLl9tYXhVbmxvYWRlZFByaW8pfW5vZGVUcmF2ZXJzYWxTdGF0ZShlKXtpZihudWxsPT1lKXJldHVybiBudWxsO2NvbnN0IHQ9ZS5pbmRleCxpPXRoaXMuX2dldE5vZGVJbnRlcm5hbCh0KTtpZighaSlyZXR1cm4gbnVsbDtsZXQgcz1pPy50cmF2ZXJzYWxTdGF0ZTtpZihzJiZNKHMudmVyc2lvbix0aGlzLl92ZXJzaW9uKSlyZXR1cm4gcztjb25zdCBuPXRoaXMuX3ZpZXdwb3J0UXVlcmllcy5nZXRMb2RMZXZlbChlKSxvPXRoaXMuX3ZpZXdwb3J0UXVlcmllcy5oYXNMT0QoZSk7bGV0IHI9ITA7aWYobyl7Y29uc3QgZT10aGlzLmdldFBhcmVudEluZGV4KHQpO2lmKG51bGwhPWUpe2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLGk9dD8udHJhdmVyc2FsU3RhdGU7cj0hIWkmJm4+aS5sb2RMZXZlbH1lbHNlIHI9bj4wfWVsc2Ugcj0wPT09ZS5jaGlsZENvdW50O3JldHVybiBzPyhzLmxvZExldmVsPW4scy5pc0Nob3Nlbj1yLHMudmVyc2lvbj1SKCEwLHRoaXMuX3ZlcnNpb24pLHMpOihzPW5ldyBmKG8scixuLFIoITAsdGhpcy5fdmVyc2lvbikpLGkudHJhdmVyc2FsU3RhdGU9cyxzKX1hc3luYyBfbG9hZE5vZGUoZSl7dGhpcy5fbG9hZGluZ05vZGVzLmFkZChlKTtjb25zdCBpPXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKS5yZWY7aWYobnVsbD09aSlyZXR1cm4gdm9pZCB0aGlzLl9mYWlsZWROb2Rlcy5hZGQoZSk7Y29uc3Qgcz1pLmlkLG49dGhpcy5fdXJsUHJlZml4K3Msbz0oKT0+e3RoaXMuX2xvYWRpbmdOb2Rlcy5kZWxldGUoZSksMD09PXRoaXMuX21pc3NpbmdQYWdlc0FuZE5vZGVzLmxlbmd0aCYmMD09PXRoaXMuX2xvYWRpbmdOb2Rlcy5zaXplJiZ0aGlzLnJlcXVlc3RVcGRhdGUoKX07bGV0IHI9bnVsbDt0cnl7cj1lPj0wP2F3YWl0IHRoaXMuX3N0cmVhbURhdGFDb250cm9sbGVyLnJlcXVlc3QobixcImpzb25cIik6YXdhaXQgdGhpcy5fY2xpZW50Tm9kZUxvYWRlci5sb2FkTm9kZUpTT04ocyl9Y2F0Y2goZCl7cmV0dXJuIG8oKSx2b2lkKHQoZCl8fCh0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZE5vZGUoKVwiLHRoaXMuX2xheWVyLFwiRXJyb3IgbG9hZGluZyBub2RlOiBcIituKSx0aGlzLl9mYWlsZWROb2Rlcy5hZGQoZSkpKX1vKCk7Y29uc3QgYT10aGlzLl92YWxpZGF0ZU5vZGUocyxyKTtpZihudWxsPT1hKXJldHVybjthLm9iYiYmdGhpcy5pbnZhbGlkYXRlTm9kZVZpc2liaWxpdHlDYWNoZShlKTtjb25zdCBsPXRoaXMuX2FkZE5vZGUoYSxlKTt0aGlzLm5vZGVUcmF2ZXJzYWxTdGF0ZShsKX1fdmFsaWRhdGVOb2RlKGUsdCl7aWYobnVsbD09dHx8XCJvYmplY3RcIiE9dHlwZW9mIHR8fHQuaWQhPT1lKXJldHVybiB0aGlzLl9sb2dnZXIuZXJyb3IoXCIjdmFsaWRhdGVOb2RlKClcIix0aGlzLl9sYXllcixgSW52YWxpZCBub2RlLiBXcm9uZyB0eXBlIG9yIHdyb25nIGlkIFwiJHtlfVwiYCksbnVsbDtpZighQXJyYXkuaXNBcnJheSh0Lm1icykpcmV0dXJuIHRoaXMuX2xvZ2dlci5lcnJvcihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBJbnZhbGlkIGJvdW5kaW5nIHZvbHVtZSBvbiBub2RlICR7ZX0uYCksbnVsbDt0LnNoYXJlZFJlc291cmNlJiZcIi4vc2hhcmVkXCIhPT10LnNoYXJlZFJlc291cmNlLmhyZWYmJlwiLi9zaGFyZWQvXCIhPT10LnNoYXJlZFJlc291cmNlLmhyZWYmJnRoaXMuX2xvZ2dlci53YXJuKFwiI3ZhbGlkYXRlTm9kZSgpXCIsdGhpcy5fbGF5ZXIsYEludmFsaWQgc2hhcmVkIHJlc291cmNlIGhyZWYgb24gbm9kZSBcIiR7ZX1cImApO2NvbnN0IGk9dC5nZW9tZXRyeURhdGE7bnVsbD09aXx8QXJyYXkuaXNBcnJheShpKSYmMD09PWkubGVuZ3RofHxBcnJheS5pc0FycmF5KGkpJiYxPT09aS5sZW5ndGgmJlwiLi9nZW9tZXRyaWVzLzBcIj09PWlbMF0uaHJlZnx8dGhpcy5fbG9nZ2VyLndhcm4oXCIjdmFsaWRhdGVOb2RlKClcIix0aGlzLl9sYXllcixgSW52YWxpZCBnZW9tZXRyeSBkYXRhIG9uIG5vZGUgXCIke2V9XCJgKTtjb25zdCBzPXQuYXR0cmlidXRlRGF0YSxuPXRoaXMuX2xheWVyLmF0dHJpYnV0ZVN0b3JhZ2VJbmZvO251bGw9PXN8fEFycmF5LmlzQXJyYXkocykmJiFzLnNvbWUoKChlLHQpPT5lLmhyZWYhPT1gLi9hdHRyaWJ1dGVzLyR7bj8uW3RdPy5rZXk/P2BmXyR7dH1gfS8wYCkpfHx0aGlzLl9sb2dnZXIud2FybihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBJbnZhbGlkIGF0dHJpYnV0ZSBkYXRhIG9uIG5vZGUgXCIke2V9XCJgKSx0LmZlYXR1cmVEYXRhJiZ0LmZlYXR1cmVEYXRhLmxlbmd0aD4xJiZ0aGlzLl9sb2dnZXIud2FybihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBOb2RlICR7ZX0gaGFzICR7dC5mZWF0dXJlRGF0YS5sZW5ndGh9IGJ1bmRsZXMuIE9ubHkgdGhlIGZpcnN0IGJ1bmRsZSB3aWxsIGJlIGxvYWRlZC5gKTtjb25zdCBvPXQuaGFzT3duUHJvcGVydHkoXCJvYmJcIikmJiF0aGlzLmlnbm9yZVNlcnZpY2VPYmI/dC5vYmI6bnVsbCxyPXQuZmVhdHVyZURhdGEmJjE9PT10LmZlYXR1cmVEYXRhLmxlbmd0aCYmdC5mZWF0dXJlRGF0YVswXS5mZWF0dXJlUmFuZ2U/dC5mZWF0dXJlRGF0YVswXS5mZWF0dXJlUmFuZ2VbMV0tdC5mZWF0dXJlRGF0YVswXS5mZWF0dXJlUmFuZ2VbMF0rMTp2b2lkIDAsYT10PT57aWYobnVsbD09dClyZXR1cm4gbnVsbDtjb25zdCBpPXQ9PnRoaXMuX2xvZ2dlci5lcnJvcihcIiN2YWxpZGF0ZU5vZGUoKVwiLHRoaXMuX2xheWVyLGBJbnZhbGlkIG5vZGUgcmVmZXJlbmNlIG9uIG5vZGUgJHtlfTogJHt0fWApO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0LmlkKWkoYGlkICR7dC5pZH0gaXMgYSBudW1iZXIgaW5zdGVhZCBvZiBhIHN0cmluZy5gKTtlbHNlIGlmKFwic3RyaW5nXCIhPXR5cGVvZiB0LmlkfHwhQXJyYXkuaXNBcnJheSh0Lm1icykpcmV0dXJuIGkoXCJNaXNzaW5nIG9yIGludmFsaWQgaWQuXCIpLG51bGw7aWYoIUFycmF5LmlzQXJyYXkodC5tYnMpKXJldHVybiBpKGBJbnZhbGlkIGJvdW5kaW5nIHZvbHVtZSBvbiByZWZlcmVuY2UgJHt0LmlkfS5gKSxudWxsO3QuaHJlZiYmdC5ocmVmIT09XCIuLi9cIit0LmlkJiZ0aGlzLl9sb2dnZXIuZXJyb3IoXCIjdmFsaWRhdGVOb2RlKClcIix0aGlzLl9sYXllcixgSW52YWxpZCBub2RlIGhyZWYgb24gbm9kZSBcIiR7ZX1cImApO2NvbnN0IHM9dC5oYXNPd25Qcm9wZXJ0eShcIm9iYlwiKSYmIXRoaXMuaWdub3JlU2VydmljZU9iYj90Lm9iYjpudWxsLG49bmV3IHUoYCR7dC5pZH1gLHQubWJzKTtyZXR1cm4gbi5zZXJ2aWNlT2JiPXMsbi52aXNpYmlsaXR5T2JiPXRoaXMuX2NvbXB1dGVWaXNpYmlsaXR5T2JiKG4pLG59LGw9QXJyYXkuaXNBcnJheSh0LmNoaWxkcmVuKT90LmNoaWxkcmVuLm1hcChhKS5maWx0ZXIoKGU9Pm51bGwhPWUpKTpudWxsLGQ9dC5mZWF0dXJlRGF0YT8ubGVuZ3RoPz8hMSxoPSEwPT09dC5pc0VtcHR5O3JldHVybntpZDplLG1iczp0Lm1icyxvYmI6byxjaGlsZHJlbjpsLHJlc291cmNlczp7aXNFbXB0eTohZCYmaCxoYXNTaGFyZWRSZXNvdXJjZTpudWxsIT10LnNoYXJlZFJlc291cmNlLGF0dHJpYnV0ZXM6dC5hdHRyaWJ1dGVEYXRhP2U6dm9pZCAwLHRleHR1cmU6dC50ZXh0dXJlRGF0YSYmdC50ZXh0dXJlRGF0YS5sZW5ndGg+MD9lOnZvaWQgMCxnZW9tZXRyeTpudWxsIT10Lmdlb21ldHJ5RGF0YT9lOnZvaWQgMH0sdmVyc2lvbjpcInN0cmluZ1wiPT10eXBlb2YgdC52ZXJzaW9uP3QudmVyc2lvbjpudWxsLGxvZFNlbGVjdGlvbjpBcnJheS5pc0FycmF5KHQubG9kU2VsZWN0aW9uKT90LmxvZFNlbGVjdGlvbjpudWxsLG51bUZlYXR1cmVzOnJ9fXJlc2V0RmFpbGVkTm9kZXMoKXt0aGlzLl9mYWlsZWROb2Rlcy5jbGVhcigpLHRoaXMuX2ZhaWxlZFBhZ2VzLmNsZWFyKCksdGhpcy5fZm9yQWxsTm9kZXMoKGU9PntudWxsIT1lLm5vZGUmJihlLm5vZGUuZmFpbGVkPSExKX0pKX1fZW50cnlQcmlvcml0eShlKXtjb25zdCB0PXRoaXMuX2dldE5vZGVJbnRlcm5hbChlKSxpPXRoaXMuZ2V0UGFyZW50SW5kZXgoZSk7aWYobnVsbD09dHx8bnVsbD09aSYmbnVsbD09dC5ub2RlKXJldHVybiBudWxsPT1pPzEvMDp0aGlzLl9lbnRyeVByaW9yaXR5KGkpO2xldCBzPTA7aWYodC5ub2RlJiZudWxsIT1pKXtjb25zdCBlPXRoaXMuX2dldE5vZGVJbnRlcm5hbChpKS50cmF2ZXJzYWxTdGF0ZTtudWxsIT1lJiYocz1lLmxvZExldmVsKX1sZXQgbj10aGlzLnByb2dyZXNzaXZlTG9hZFBlbmFsdHk7Zm9yKGxldCByPWU7bnVsbCE9cjtyPXRoaXMuZ2V0UGFyZW50SW5kZXgocikpaWYodGhpcy5faXNMb2FkZWQocikpe249MDticmVha31jb25zdCBvPW51bGwhPXQucmVmP3RoaXMuX3ZpZXdwb3J0UXVlcmllcy5kaXN0VG9QT0kodC5yZWYpOm51bGwhPXQubm9kZT90aGlzLl92aWV3cG9ydFF1ZXJpZXMuZGlzdFRvUE9JKHQubm9kZSk6MDtyZXR1cm4tby1zKihvK3RoaXMucHJvZ3Jlc3NpdmVMb2FkUGVuYWx0eSkrbn10cmF2ZXJzZVZpc2libGUoZSl7Y29uc3QgdD10aGlzLl9nZXROb2RlSW50ZXJuYWwodGhpcy5fcm9vdEluZGV4KTtudWxsIT10P3RoaXMuX3RyYXZlcnNlVmlzaWJsZSh0aGlzLl9yb290SW5kZXgsbnVsbCx0LGUpOmUodGhpcy5fcm9vdEluZGV4LG51bGwsbnVsbCl9X3RyYXZlcnNlVmlzaWJsZShlLHQsaSxzKXtpZihpLm5vZGUmJjA9PT1pLmNoaWxkQ291bnQpcmV0dXJuIHZvaWQodGhpcy5pc0dlb21ldHJ5VmlzaWJsZShlKSYmcyhlLGksdCkpO2lmKCF0aGlzLmlzTm9kZVZpc2libGUoZSkpcmV0dXJuO2lmKHMoZSxpLHQpLG51bGw9PWkubm9kZSlyZXR1cm47Y29uc3Qgbj10aGlzLm5vZGVUcmF2ZXJzYWxTdGF0ZShpLm5vZGUpO2lmKG4/Lm5vZGVIYXNMT0QmJm4ubG9kTGV2ZWw9PT10aGlzLl9tYXhMb2RMZXZlbClyZXR1cm47Y29uc3Qgbz10aGlzLl9nZXRQYWdlKGUpO2ZvcihsZXQgcj0wO3I8aS5jaGlsZENvdW50O3IrKyl7Y29uc3QgdD1vLmNoaWxkcmVuW2kuY2hpbGRPZmZzZXQrcl0sbj10aGlzLl9nZXROb2RlSW50ZXJuYWwodCk7bj90aGlzLl90cmF2ZXJzZVZpc2libGUodCxlLG4scyk6cyh0LG51bGwsZSl9fXRyYXZlcnNlKGUsdCl7dChlKSYmdGhpcy50cmF2ZXJzZUNoaWxkcmVuKGUsdCl9dHJhdmVyc2VDaGlsZHJlbihlLHQpe2NvbnN0IGk9ZS5pbmRleCxzPXRoaXMuX2dldE5vZGVJbnRlcm5hbChpKTtudWxsIT1zJiZ0aGlzLl90cmF2ZXJzZUNoaWxkcmVuKGkscyx0KX1fdHJhdmVyc2VDaGlsZHJlbihlLHQsaSl7Y29uc3Qgcz10aGlzLl9nZXRQYWdlKGUpO2lmKG51bGw9PXMpcmV0dXJuO2NvbnN0IG49dC5jaGlsZE9mZnNldCt0LmNoaWxkQ291bnQ7Zm9yKGxldCBvPXQuY2hpbGRPZmZzZXQ7bzxuOysrbyl7Y29uc3QgZT1zLmNoaWxkcmVuW29dLHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpO251bGwhPXQ/Lm5vZGUmJmkodC5ub2RlKSYmdGhpcy5fdHJhdmVyc2VDaGlsZHJlbihlLHQsaSl9fXVwZGF0ZUNoaWxkcmVuTG9hZGVkKGUsdCl7bGV0IGk9dGhpcy5nZXROb2RlKGUpO2Zvcig7bnVsbCE9aTspe2NvbnN0IGU9aS5jaGlsZHJlbkxvYWRlZCxzPWUrdDtpLmNoaWxkcmVuTG9hZGVkPXM7Y29uc3Qgbj0wPT09ZT8xOjA9PT1zPy0xOjAsbz1pLmluZGV4O2lmKDAhPT1uKXt0aGlzLl9nZXRQYWdlKG8pLm51bU5vZGVzV2l0aExvYWRlZENoaWxkcmVuKz1ufWk9dGhpcy5nZXRQYXJlbnQobyl9fWNoZWNrQ2hpbGRyZW5Mb2FkZWRJbnZhcmlhbnQoKXtpZihudWxsPT10aGlzLnJvb3ROb2RlKXJldHVybiEwO2NvbnN0IGU9W10sdD1pPT57bGV0IHM9dGhpcy5faXNMb2FkZWQoaS5pbmRleCl8fHRoaXMuX2lzUmVsb2FkaW5nKGkuaW5kZXgpPzE6MDtyZXR1cm4gdGhpcy50cmF2ZXJzZUNoaWxkcmVuKGksKGU9PihzKz10KGUpLCExKSkpLGkuY2hpbGRyZW5Mb2FkZWQhPT1zJiZlLnB1c2goaS5pbmRleCksc307cmV0dXJuIHQodGhpcy5yb290Tm9kZSksZS5sZW5ndGgmJnRoaXMuX2xvZ2dlci5lcnJvcihcImNoaWxkcmVuTG9hZGVkIGludmFyaWFudCBicm9rZW4gYXQgZm9sbG93aW5nIG5vZGVzOiBcIitlLmpvaW4oXCIsXCIpKSxlLmxlbmd0aD4wfXVwZGF0ZVN0YXRzKGUpe2lmKHRoaXMuX3VwZGF0ZXMuYWRkLmxlbmd0aD4wJiYoZS5ub2Rlcys9XCIgKyBcIit0aGlzLl91cGRhdGVzLmFkZC5sZW5ndGgpLGUuaW5kZXg9dGhpcy5fbm9kZVBhZ2VzLnNpemUqKHRoaXMuX3BhZ2VTaXplfHwxKSsodGhpcy5fY2xpZW50Tm9kZVBhZ2U/Lm5vZGVzLmxlbmd0aD8/MCksZS5wcmlvPXRoaXMuX21heFByb2Nlc3NpbmdQcmlvLCh0aGlzLl9pbmRleE1pc3Npbmd8fHRoaXMuX3ByZWZldGNoTm9kZXMubGVuZ3RoPjApJiYoZS5pbmRleCs9XCIgKyBcIit0aGlzLl9pbmRleE1pc3Npbmd8fHRoaXMuX3ByZWZldGNoTm9kZXMubGVuZ3RoKSx0aGlzLl9mZWF0dXJlRXN0aW1hdGUuZXN0aW1hdGUpe2NvbnN0IHQ9dGhpcy5fZmVhdHVyZUVzdGltYXRlLmVzdGltYXRlLWUuZmVhdHVyZXM7dD4wP2UuZmVhdHVyZXMrPVwiICsgXCIrdDp0PDAmJihlLmZlYXR1cmVzKz1cIiAtIFwiKy10KX19dXBkYXRlRWxldmF0aW9uSW5mbyhlLHQpe3RoaXMubmVlZE5vZGVFbGV2YXRpb25SYW5nZT10JiYhIWUmJihcInJlbGF0aXZlLXRvLWdyb3VuZFwiPT09ZS5tb2RlfHxcIm9uLXRoZS1ncm91bmRcIj09PWUubW9kZSksdGhpcy5fdmlld3BvcnRRdWVyaWVzLnVwZGF0ZUVsZXZhdGlvbkluZm8oZSksdGhpcy5pbnZhbGlkYXRlQWxsRWxldmF0aW9uUmFuZ2VzKCl9aW52YWxpZGF0ZUFsbEVsZXZhdGlvblJhbmdlcygpe3RoaXMuX2ZvckFsbE5vZGVzKChlPT57QyhlKSxudWxsIT1lLm5vZGUmJmUubm9kZS5pbnZhbGlkYXRlRWxldmF0aW9uUmFuZ2UoKSxudWxsIT1lLnJlZiYmZS5yZWYuaW52YWxpZGF0ZUVsZXZhdGlvblJhbmdlKCl9KSl9X2ZvckFsbE5vZGVzKGUpe2lmKG51bGwhPXRoaXMuX2NsaWVudE5vZGVQYWdlKXtjb25zdCB0PXRoaXMuX2NsaWVudE5vZGVQYWdlO2ZvcihsZXQgaT0wO2k8dC5ub2Rlcy5sZW5ndGg7aSsrKWUodC5ub2Rlc1tpXSwtKGkrMSkpfWZvcihjb25zdFt0LGldb2YgdGhpcy5fbm9kZVBhZ2VzKXtjb25zdCBzPXQqdGhpcy5fcGFnZVNpemU7Zm9yKGxldCB0PTA7dDxpLm5vZGVzLmxlbmd0aDt0KyspZShpLm5vZGVzW3RdLHMrdCl9fWNsZWFyQ2FjaGVzKCl7aWYodGhpcy5fdXNlTm9kZVBhZ2VzKXtjb25zdCBlPXRoaXMuX25vZGVQYWdlcyx0PW5ldyBTZXQ7dGhpcy50cmF2ZXJzZVZpc2libGUoKGU9PnQuYWRkKE8oZSx0aGlzLl9wYWdlU2l6ZSkpKSk7Zm9yKGNvbnN0W2ksc11vZiBlKWlmKDAhPT1zLm51bU5vZGVzV2l0aExvYWRlZENoaWxkcmVufHx0LmhhcyhpKSlmb3IoY29uc3QgZSBvZiBzLm5vZGVzKWUudHJhdmVyc2FsU3RhdGU9bnVsbDtlbHNlIHRoaXMuX2RlbGV0ZU5vZGVQYWdlKGkpfX1fZGVsZXRlTm9kZVBhZ2UoZSl7dGhpcy5fbm9kZVBhZ2VzLmRlbGV0ZShlKX1nZXQgdGVzdCgpe3JldHVybnthZGROb2RlOihlLHQpPT50aGlzLl9hZGROb2RlKGUsdCksZ2V0Tm9kZUludGVybmFsOmU9PnRoaXMuX2dldE5vZGVJbnRlcm5hbChlKSxnZXRQYWdlSW5kZXg6ZT0+TyhlLHRoaXMuX3BhZ2VTaXplKSxnZXRJbmRleFdpdGhpblBhZ2U6ZT0+QShlLHRoaXMuX3BhZ2VTaXplKSxnZXROb2RlUGFnZTplPT5lPDA/dGhpcy5fY2xpZW50Tm9kZVBhZ2U6dGhpcy5fbm9kZVBhZ2VzLmdldChlKSxnZXRDaGlsZEluZGljZXM6ZT0+e2NvbnN0IHQ9dGhpcy5fZ2V0Tm9kZUludGVybmFsKGUpLGk9dGhpcy5fZ2V0UGFnZShlKTtpZihudWxsPT10fHxudWxsPT1pKXJldHVybltdO2NvbnN0IHM9W107Zm9yKGxldCBuPXQuY2hpbGRPZmZzZXQ7bjx0LmNoaWxkT2Zmc2V0K3QuY2hpbGRDb3VudDsrK24pcy5wdXNoKGkuY2hpbGRyZW5bbl0pO3JldHVybiBzfSxyb290SW5kZXg6dGhpcy5fcm9vdEluZGV4LGNsaWVudE5vZGVQYWdlOnRoaXMuX2NsaWVudE5vZGVQYWdlLG5vZGVQYWdlczp0aGlzLl9ub2RlUGFnZXN9fX1jb25zdCB4PW5ldyBNYXA7Y2xhc3MgSXtjb25zdHJ1Y3Rvcih0KXt0aGlzLm1pc3Npbmc9dCx0aGlzLnVwZGF0ZT1uZXcgZSh7ZGVhbGxvY2F0b3I6bnVsbH0pLHRoaXMuYWRkPW5ldyBlKHtkZWFsbG9jYXRvcjpudWxsfSksdGhpcy5yZW1vdmU9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KSx0aGlzLmNhbmNlbD1bXX1yZXNldChlKXt0aGlzLmFkZC5jbGVhcigpLHRoaXMudXBkYXRlLmNsZWFyKCksdGhpcy5jYW5jZWw9ZX19ZnVuY3Rpb24gQyhlKXtudWxsIT1lLm5vZGUmJihtKGUubm9kZS5yZW5kZXJNYnMpLHYoZS5ub2RlLnNlcnZpY2VPYmJJblJlbmRlclNSKSksbnVsbCE9ZS5yZWYmJihtKGUucmVmLnJlbmRlck1icyksdihlLnJlZi5zZXJ2aWNlT2JiSW5SZW5kZXJTUikpfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIE4oZSwtMil9ZnVuY3Rpb24gUyhlKXtyZXR1cm4gTihlLDIpfWZ1bmN0aW9uIFIoZSx0KXtyZXR1cm4gdCsoZT8xOjApfWZ1bmN0aW9uIE0oZSx0KXtyZXR1cm4oLTImZSk9PT10fWZ1bmN0aW9uIEUoZSl7cmV0dXJuIDE9PSgxJmUpfWZ1bmN0aW9uIE8oZSx0KXtyZXR1cm4gZTwwPy0xOnQ+MD9lL3R8MDowfWZ1bmN0aW9uIEEoZSx0KXtyZXR1cm4gZTwwPy1lLTE6MD09PXQ/ZTplJXR9ZnVuY3Rpb24gVihlLHQsaSl7cmV0dXJuLTE9PT10Py0oZSsxKTowPT09aT9lOnQqaStlfWNvbnN0IEw9W1tcIm1heFNjcmVlblRocmVzaG9sZFwiLGguTWF4U2NyZWVuVGhyZXNob2xkXSxbXCJzY3JlZW5TcGFjZVJlbGF0aXZlXCIsaC5TY3JlZW5TcGFjZVJlbGF0aXZlXSxbXCJyZW1vdmVkRmVhdHVyZURpYW1ldGVyXCIsaC5SZW1vdmVkRmVhdHVyZURpYW1ldGVyXSxbXCJkaXN0YW5jZVJhbmdlRnJvbURlZmF1bHRDYW1lcmFcIixoLkRpc3RhbmNlUmFuZ2VGcm9tRGVmYXVsdENhbWVyYV1dO2Z1bmN0aW9uIGsoZSl7aWYoZSlmb3IobGV0IHQ9MDt0PGUubGVuZ3RoO3QrKylmb3IoY29uc3QgaSBvZiBMKWlmKGlbMF09PT1lW3RdLm1ldHJpY1R5cGUpcmV0dXJue2xvZE1ldHJpYzppWzFdLG1heEVycm9yOmVbdF0ubWF4RXJyb3J9O3JldHVybntsb2RNZXRyaWM6aC5Ob25lLG1heEVycm9yOjB9fWNsYXNzIEZ7Y29uc3RydWN0b3IoKXt0aGlzLmtub3duPTAsdGhpcy5rbm93bk5vZGVzPTAsdGhpcy5taXNzaW5nPTAsdGhpcy5taXNzaW5nTm9kZXM9MCx0aGlzLnVucmVtb3ZlZD0wfX1mdW5jdGlvbiB6KGUpe3JldHVybiBNYXRoLnNxcnQoZSooNC9NYXRoLlBJKSl9Y29uc3QgRD1hKCksVD1hKCksUT1hKCksVT1hKCk7ZXhwb3J0e1AgYXMgSTNTSW5kZXgsayBhcyBzZWxlY3RFcnJvck1ldHJpY307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHtOb2RlU3RhdGUgYXMgaX1mcm9tXCIuL0kzU05vZGUuanNcIjtpbXBvcnR7RmFkZURpcmVjdGlvbiBhcyBvfWZyb21cIi4uL3N1cHBvcnQvSTNTTGF5ZXJWaWV3LmpzXCI7Y2xhc3Mgc3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9sYXllclZpZXc9ZSx0aGlzLl9sb2RHbG9iYWxEaXJ0eT0hMX1zdGFydE5vZGVMb2FkaW5nKGUsaSxvLHMpe3RoaXMuX21heExvZExldmVsPXMubWF4TG9kTGV2ZWwsdGhpcy5faW5kZXg9byx0aGlzLl9pc05vZGVJblNjYWxlQm91bmRzPWUsdGhpcy5fcmVtb3ZlTm9kZXM9aX1zaG91bGRMb2FkTm9kZShlKXtpZihudWxsPT1lKXJldHVybiExO2NvbnN0IGk9dGhpcy5faW5kZXgubm9kZVRyYXZlcnNhbFN0YXRlKGUpO3JldHVybiEhdGhpcy5faXNDaG9zZW5NYXhMT0QoaSl8fCEhaS5pc0Nob3NlbiYmdGhpcy5fY2hpbGRyZW5SZXF1aXJlTG9hZGluZyhlKX1zZXRMb2RHbG9iYWxEaXJ0eSgpe3RoaXMuX2xvZEdsb2JhbERpcnR5PSEwfWdldCByZXF1aXJlc0xPREdsb2JhbEhhbmRsaW5nKCl7cmV0dXJuIG51bGwhPXRoaXMuX2luZGV4JiYhMD09PXRoaXMuX2xvZEdsb2JhbERpcnR5fWxvZEdsb2JhbEhhbmRsaW5nKGUpe2lmKCF0aGlzLnJlcXVpcmVzTE9ER2xvYmFsSGFuZGxpbmcpcmV0dXJuITE7dGhpcy5fbG9kR2xvYmFsRGlydHk9ITE7Y29uc3QgaT10aGlzLl9sYXllclZpZXcudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIubWVtb3J5Q29udHJvbGxlci51c2VkTWVtb3J5LG89TWF0aC5tYXgoMCxNYXRoLmZsb29yKDEwKihpLTEpKSk7ZC5jbGVhcigpLHRoaXMuX2xvZEdsb2JhbEhhbmRsaW5nKHRoaXMuX2luZGV4LnJvb3ROb2RlLG8sITEsISF0aGlzLl9sYXllclZpZXcubm9kZUNyb3NzZmFkaW5nRW5hYmxlZCk7Y29uc3Qgcz1kLmxlbmd0aDt0aGlzLl9yZW1vdmVOb2RlcyhkLGUpO2NvbnN0IHQ9ZC5sZW5ndGg8cztyZXR1cm4gMCE9PWQubGVuZ3RoJiYodGhpcy5fbG9kR2xvYmFsRGlydHk9ITApLGQuY2xlYXIoKSx0fV9sb2RHbG9iYWxIYW5kbGluZyhlLHMsdCxsKXtpZihudWxsPT1lKXJldHVybiExO2NvbnN0IHI9ZS5pbmRleCxuPXRoaXMuX2luZGV4LGE9dGhpcy5fbGF5ZXJWaWV3LGg9bi5ub2RlVHJhdmVyc2FsU3RhdGUoZSksdT10aGlzLl9pc0Nob3Nlbk1heExPRChoKSxfPWUucmVzb3VyY2VzLmlzRW1wdHk7aWYodSYmXylyZXR1cm4gZS5jaGlsZHJlbkxvYWRlZD4wJiZ0aGlzLl9yZW1vdmVDaGlsZHJlblJlY3Vyc2l2ZShlKSwhMDtjb25zdCBjPWEuaXNOb2RlTG9hZGVkKHIpO2lmKGwmJmMmJnUpe2NvbnN0IGk9IXQmJnRoaXMuaGFzTm9WaXNpYmxlQ2hpbGRyZW4oZSk7YS5mYWRlTm9kZShyLG8uRmFkZUluLCFpKX1jb25zdCB4PWMmJighYS5pc05vZGVGdWxseUZhZGVkSW58fGEuaXNOb2RlRnVsbHlGYWRlZEluKHIpKTtpZihjJiYoYS51cGRhdGVOb2RlU3RhdGUocix1P2kuTGVhZjppLkhvbGUpLHUpKXJldHVybiB4JiZ0aGlzLl9yZW1vdmVDaGlsZHJlblJlY3Vyc2l2ZShlKSx4O2NvbnN0IEw9ZS5jaGlsZENvdW50PjA7bGV0IHk9TDtpZihMKWZvcihsZXQgaT0wO2k8ZS5jaGlsZENvdW50O2krKyl7Y29uc3QgZT1uLmdldENoaWxkSW5kZXgocixpKSxvPW4uZ2V0Tm9kZShlKTtpZihudWxsIT1vKXshKCFuLmlzR2VvbWV0cnlWaXNpYmxlKGUpfHx0aGlzLl9sb2RHbG9iYWxIYW5kbGluZyhvLHMsdHx8eCxsKSkmJnRoaXMuX2lzTm9kZUluU2NhbGVCb3VuZHMobykmJih5PSExKX1lbHNlIG4uaXNOb2RlVmlzaWJsZShlKSYmKHk9ITEpfWNvbnN0IE49YyYmIXUmJih5fHxkLmxlbmd0aDxzKTtOJiZkLnB1c2gociksIWx8fE58fCFjfHx0fHx5fHxhLmZhZGVOb2RlKHIsby5GYWRlSW4sITEpO2NvbnN0IG09ZS5yZXNvdXJjZXMuaXNFbXB0eTtyZXR1cm4geXx8eCYmIU58fG19X3JlbW92ZUNoaWxkcmVuUmVjdXJzaXZlKGUpe3RoaXMuX2luZGV4LnRyYXZlcnNlQ2hpbGRyZW4oZSwoZT0+KCh0aGlzLl9sYXllclZpZXcuaXNOb2RlTG9hZGVkKGUuaW5kZXgpfHx0aGlzLl9sYXllclZpZXcuaXNOb2RlUmVsb2FkaW5nKGUuaW5kZXgpKSYmZC5wdXNoKGUuaW5kZXgpLGUuY2hpbGRyZW5Mb2FkZWQ+MCkpKX1oYXNOb1Zpc2libGVDaGlsZHJlbihlKXtsZXQgaT0hMDtyZXR1cm4gdGhpcy5faW5kZXgudHJhdmVyc2VDaGlsZHJlbihlLChlPT4hKCFpfHwhdGhpcy5faW5kZXguaXNOb2RlVmlzaWJsZShlLmluZGV4KSkmJih0aGlzLl9sYXllclZpZXcuaXNOb2RlTG9hZGVkKGUuaW5kZXgpPyhpPSExLCExKTplLmNoaWxkcmVuTG9hZGVkPjApKSksaX1fY2hpbGRyZW5SZXF1aXJlTG9hZGluZyhlKXtsZXQgaT0hMSxvPSEwO3JldHVybiB0aGlzLl9pbmRleC50cmF2ZXJzZUNoaWxkcmVuKGUsKGU9PntpZighb3x8IXRoaXMuX2luZGV4LmlzTm9kZVZpc2libGUoZS5pbmRleCkpcmV0dXJuITE7Y29uc3Qgcz10aGlzLl9pbmRleC5ub2RlVHJhdmVyc2FsU3RhdGUoZSk7cmV0dXJuIHRoaXMuX2lzQ2hvc2VuTWF4TE9EKHMpJiZ0aGlzLl9pbmRleC5pc0dlb21ldHJ5VmlzaWJsZShlLmluZGV4KSYmKGk9ITApLHRoaXMuX2xheWVyVmlldy5pc05vZGVMb2FkZWQoZS5pbmRleCk/KG89ITEsITEpOmUuY2hpbGRyZW5Mb2FkZWQ+MH0pKSxvJiZpfV9pc0Nob3Nlbk1heExPRChlKXtyZXR1cm4gZS5pc0Nob3NlbiYmKCFlLm5vZGVIYXNMT0R8fGUubG9kTGV2ZWw9PT10aGlzLl9tYXhMb2RMZXZlbCl9fWNvbnN0IGQ9bmV3IGUoe2RlYWxsb2NhdG9yOm51bGx9KTtleHBvcnR7cyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2NsYW1wIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tYXRoVXRpbHMuanNcIjtpbXBvcnR7VGV4dHVyZUVuY29kaW5nIGFzIG8sVGV4dHVyZVVzYWdlIGFzIGF9ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtSZW5kZXJUZXh0dXJlIGFzIHJ9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2NvcmUvbWF0ZXJpYWwvUmVuZGVyVGV4dHVyZS5qc1wiO2ltcG9ydHtkZWZhdWx0TWFza0FscGhhQ3V0b2ZmIGFzIHN9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2NvcmUvc2hhZGVyTGlicmFyeS91dGlsL0FscGhhQ3V0b2ZmLmpzXCI7aW1wb3J0e2dldEVsbGlwc29pZE1vZGUgYXMgdH1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvY29yZS9zaGFkZXJMaWJyYXJ5L3V0aWwvRWxsaXBzb2lkTW9kZS5qc1wiO2ltcG9ydHtUZXh0dXJlRW5jb2RpbmdNaW1lVHlwZSBhcyBsLEN1bGxGYWNlT3B0aW9ucyBhcyBuLEFscGhhRGlzY2FyZE1vZGUgYXMgaX1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL2Jhc2ljSW50ZXJmYWNlcy5qc1wiO2ltcG9ydHtUZXh0dXJlIGFzIHV9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9UZXh0dXJlLmpzXCI7aW1wb3J0e3VzZVNjaGVtYXRpY1BCUiBhcyBjLGRlZmF1bHRTY2hlbWF0aWNNUlJGYWN0b3JzIGFzIG0sZGVmYXVsdEFkdmFuY2VkTVJSRmFjdG9ycyBhcyBkfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9tYXRlcmlhbHMvcGJyVXRpbHMuanNcIjtpbXBvcnR7VGV4dHVyZVdyYXBNb2RlIGFzIHB9ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtmdW5jdGlvbiBnKGUsbyl7Y29uc3Qgcj1uZXcgTWFwLHM9KGUsbyk9PntpZihudWxsPT1lKXJldHVybi0xO2NvbnN0IGE9ci5nZXQoZS5pZCk7aWYoYSlyZXR1cm4gYS51c2FnZXw9byxhLmlkO2NvbnN0IHM9ci5zaXplO3JldHVybiByLnNldChlLmlkLHtpZDpzLHVzYWdlOm99KSxzfSx0PW8ucGJyTWV0YWxsaWNSb3VnaG5lc3MsbD10Py5iYXNlQ29sb3JGYWN0b3IsaT1vLmVtaXNzaXZlRmFjdG9yLHU9Yyh7bm9ybWFsVGV4dHVyZTpvLm5vcm1hbFRleHR1cmUsZW1pc3NpdmVUZXh0dXJlOm8uZW1pc3NpdmVUZXh0dXJlLGVtaXNzaXZlRmFjdG9yOm8uZW1pc3NpdmVGYWN0b3Isb2NjbHVzaW9uVGV4dHVyZTpvLm9jY2x1c2lvblRleHR1cmUsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlOnQ/Lm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSxtZXRhbGxpY0ZhY3Rvcjp0Py5tZXRhbGxpY0ZhY3Rvcixyb3VnaG5lc3NGYWN0b3I6dD8ucm91Z2huZXNzRmFjdG9yfSkscD11P21bMF06dD8ubWV0YWxsaWNGYWN0b3I/P2RbMF0sZz11P21bMV06dD8ucm91Z2huZXNzRmFjdG9yPz9kWzFdLFQ9XCJtYXNrXCI9PT1vLmFscGhhTW9kZT9hLkNvbG9yfGEuQWxwaGFNYXNrOmEuQ29sb3IseD17YmFzZUNvbG9yRmFjdG9yOmw/W2xbMF0sbFsxXSxsWzJdLGxbM11dOlsxLDEsMSwxXSxiYXNlQ29sb3JUZXh0dXJlSWQ6cyh0Py5iYXNlQ29sb3JUZXh0dXJlLFQpLG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZUlkOnModD8ubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLGEuTWV0YWxsaWNSb3VnaG5lc3MpLG1ldGFsbGljRmFjdG9yOnAscm91Z2huZXNzRmFjdG9yOmd9LGI9e2FscGhhTW9kZTpvLmFscGhhTW9kZSxhbHBoYUN1dG9mZjpvLmFscGhhQ3V0b2ZmLGRvdWJsZVNpZGVkOm8uZG91YmxlU2lkZWQsY3VsbEZhY2U6XCJub25lXCI9PT1vLmN1bGxGYWNlP24uTm9uZTpcImJhY2tcIj09PW8uY3VsbEZhY2U/bi5CYWNrOlwiZnJvbnRcIj09PW8uY3VsbEZhY2U/bi5Gcm9udDpuLk5vbmUsbm9ybWFsVGV4dHVyZUlkOnMoby5ub3JtYWxUZXh0dXJlLGEuTm9ybWFsKSxlbWlzc2l2ZVRleHR1cmVJZDpzKG8uZW1pc3NpdmVUZXh0dXJlLGEuRW1pc3NpdmUpLG9jY2x1c2lvblRleHR1cmVJZDpzKG8ub2NjbHVzaW9uVGV4dHVyZSxhLk9jY2x1c2lvbiksZW1pc3NpdmVGYWN0b3I6aT9baVswXSxpWzFdLGlbMl1dOlswLDAsMF0sbWV0YWxsaWNSb3VnaG5lc3M6eCx3cmFwVGV4dHVyZXM6ITEsaGFzUGFyYW1ldGVyc0Zyb21Tb3VyY2U6dX0sRj1bXTtyZXR1cm4gci5mb3JFYWNoKCgoe3VzYWdlOm99LGEpPT57Y29uc3Qgcj1udWxsIT1lJiZlW2FdJiZlW2FdLmZvcm1hdHMscz1yP2goci5tYXAoKCh7bmFtZTplLGZvcm1hdDpvfSk9Pih7bmFtZTplLGVuY29kaW5nOmZbb119KSkpKTpbXTtGLnB1c2goe2lkOmEsdXNhZ2U6byxlbmNvZGluZ3M6c30pfSkpLHttYXRlcmlhbDpiLHRleHR1cmVzOkZ9fWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGUuc29ydCgoKGUsbyk9PmUuZW5jb2Rpbmctby5lbmNvZGluZykpfWNvbnN0IGY9e2t0eDI6by5LVFgyLGJhc2lzOm8uQmFzaXMsZGRzOm8uRERTX1MzVEMscG5nOm8uUE5HLGpwZzpvLkpQRyxcImt0eC1ldGMyXCI6by5LVFhfRVRDMn0sVD17W2wuS1RYMl9FTkNPRElOR106by5CYXNpcyxbbC5CQVNJU19FTkNPRElOR106by5CYXNpcyxbbC5ERFNfRU5DT0RJTkddOm8uRERTX1MzVEMsXCJpbWFnZS9wbmdcIjpvLlBORyxcImltYWdlL2pwZ1wiOm8uSlBHLFwiaW1hZ2UvanBlZ1wiOm8uSlBHLFwiaW1hZ2Uva3R4XCI6by5LVFhfRVRDMn07ZnVuY3Rpb24geChvKXtjb25zdCByPW8/Lm1hdGVyaWFsRGVmaW5pdGlvbnM/T2JqZWN0LmtleXMoby5tYXRlcmlhbERlZmluaXRpb25zKVswXTpudWxsLHM9bz8udGV4dHVyZURlZmluaXRpb25zP09iamVjdC5rZXlzKG8udGV4dHVyZURlZmluaXRpb25zKVswXTpudWxsLHQ9cj9vLm1hdGVyaWFsRGVmaW5pdGlvbnM/LltyXTpudWxsLGw9cz9vLnRleHR1cmVEZWZpbml0aW9ucz8uW3NdOm51bGwsaT1iKCk7aWYobnVsbCE9dCl7Y29uc3Qgbz10LnBhcmFtcztvLmRpZmZ1c2UmJihpLm1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3Rvcj1bby5kaWZmdXNlWzBdLG8uZGlmZnVzZVsxXSxvLmRpZmZ1c2VbMl0sMV0pLG51bGwhPW8uZG91YmxlU2lkZWQmJihpLmRvdWJsZVNpZGVkPW8uZG91YmxlU2lkZWQsaS5jdWxsRmFjZT1vLmRvdWJsZVNpZGVkP24uTm9uZTpuLkJhY2spLFwibm9uZVwiIT09by5jdWxsRmFjZSYmXCJmcm9udFwiIT09by5jdWxsRmFjZSYmXCJiYWNrXCIhPT1vLmN1bGxGYWNlfHwoaS5jdWxsRmFjZT1cIm5vbmVcIj09PW8uY3VsbEZhY2U/bi5Ob25lOlwiYmFja1wiPT09by5jdWxsRmFjZT9uLkJhY2s6bi5Gcm9udCksby50cmFuc3BhcmVuY3kmJihpLm1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvclszXT1lKDEtby50cmFuc3BhcmVuY3ksMCwxKSksKG8udXNlVmVydGV4Q29sb3JBbHBoYXx8aS5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JGYWN0b3JbM108MSkmJihpLmFscGhhTW9kZT1cImJsZW5kXCIpfWNvbnN0IHU9W107aWYobnVsbCE9bCl7Y29uc3QgZT0wOyFsLndyYXB8fFwicmVwZWF0XCIhPT1sLndyYXBbMF0mJlwicmVwZWF0XCIhPT1sLndyYXBbMV18fChpLndyYXBUZXh0dXJlcz0hMCk7bGV0IG89YS5Db2xvcjtcInJnYmFcIj09PWwuY2hhbm5lbHMmJihpLmFscGhhTW9kZT1cImJsZW5kXCIsb3w9YS5BbHBoYU1hc2spO2NvbnN0IHI9bC5pbWFnZXMubGVuZ3RoLTEscz1sLmltYWdlc1tyXSx0PWU9PmU/LnNwbGl0KFwiL1wiKS5wb3AoKSxuPUFycmF5LmlzQXJyYXkobC5lbmNvZGluZyk/aChsLmVuY29kaW5nLm1hcCgoKGUsbyk9Pih7bmFtZTp0KHMuaHJlZltvXSksZW5jb2Rpbmc6VFtlXXx8MH0pKSkpOlt7bmFtZTp0KHMuaHJlZiksZW5jb2Rpbmc6VFtsLmVuY29kaW5nXXx8MH1dO3UucHVzaCh7aWQ6ZSx1c2FnZTpvLGVuY29kaW5nczpufSksaS5tZXRhbGxpY1JvdWdobmVzcy5iYXNlQ29sb3JUZXh0dXJlSWQ9ZX1yZXR1cm57bWF0ZXJpYWw6aSx0ZXh0dXJlczp1fX1jb25zdCBiPSgpPT4oe2FscGhhTW9kZTpcIm9wYXF1ZVwiLGFscGhhQ3V0b2ZmOnMsZG91YmxlU2lkZWQ6ITAsY3VsbEZhY2U6bi5Ob25lLG5vcm1hbFRleHR1cmVJZDotMSxlbWlzc2l2ZVRleHR1cmVJZDotMSxvY2NsdXNpb25UZXh0dXJlSWQ6LTEsZW1pc3NpdmVGYWN0b3I6WzAsMCwwXSxtZXRhbGxpY1JvdWdobmVzczp7YmFzZUNvbG9yRmFjdG9yOlsuOCwuOCwuOCwxXSxiYXNlQ29sb3JUZXh0dXJlSWQ6LTEsbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlSWQ6LTEsbWV0YWxsaWNGYWN0b3I6MCxyb3VnaG5lc3NGYWN0b3I6LjZ9LHdyYXBUZXh0dXJlczohMSxoYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZTohMH0pO2Z1bmN0aW9uIEYoZSxvLHIscyl7aWYobnVsbD09ZT8uZGF0YSlyZXR1cm4gbnVsbDtjb25zdCB0PWUuZGF0YSxsPXMucmVuZGVyaW5nQ29udGV4dC5wYXJhbWV0ZXJzLm1heE1heEFuaXNvdHJvcHksbj1sPjEsaT1yfHwhby53cmFwVGV4dHVyZXM/QzpQLGM9dyhlLmVuY29kaW5nKSxtPWUudXNhZ2UmYS5Db2xvcj9cIm9wYXF1ZVwiPT09by5hbHBoYU1vZGU/Mzo0OjM7cmV0dXJuIG5ldyB1KHQse21pcG1hcDpuLG1heEFuaXNvdHJvcHk6bCxlbmNvZGluZzpjLHdyYXA6aSxjb21wb25lbnRzOm0sbm9VbnBhY2tGbGlwOiEwfSl9Y29uc3QgQz17czpwLkNMQU1QX1RPX0VER0UsdDpwLkNMQU1QX1RPX0VER0V9LFA9e3M6cC5SRVBFQVQsdDpwLlJFUEVBVH07ZnVuY3Rpb24gUyhvLGwsbix1LGMscCl7Y29uc3QgZz1wLnJlbmRlcmVyVGV4dHVyZVVzYWdlLGg9ZT0+Uih1LG4sZSZnKSxmPWwubWV0YWxsaWNSb3VnaG5lc3MuYmFzZUNvbG9yRmFjdG9yLFQ9ZShsLm1ldGFsbGljUm91Z2huZXNzLmJhc2VDb2xvckZhY3RvclszXSwwLDEpO28uYmFzZUNvbG9yPVtmWzBdLGZbMV0sZlsyXSxUXSxvLmhhc1BhcmFtZXRlcnNGcm9tU291cmNlPSEhbC5oYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZSxvLnVzZVBCUj1wLnVzZVBCUixvLm1yckZhY3RvcnM9W2wubWV0YWxsaWNSb3VnaG5lc3MubWV0YWxsaWNGYWN0b3IsbC5tZXRhbGxpY1JvdWdobmVzcy5yb3VnaG5lc3NGYWN0b3IsbC5oYXNQYXJhbWV0ZXJzRnJvbVNvdXJjZT9tWzJdOmRbMl1dLG8uZW1pc3NpdmVGYWN0b3I9bC5lbWlzc2l2ZUZhY3RvcixvLmlzSW50ZWdyYXRlZE1lc2g9cC5pc0ludGVncmF0ZWRNZXNoLG8udGV4dHVyZUFscGhhQ3V0b2ZmPVwibWFza1wiPT09bC5hbHBoYU1vZGU/bC5hbHBoYUN1dG9mZjpzLG8uYWxwaGFEaXNjYXJkTW9kZT1cIm9wYXF1ZVwiPT09bC5hbHBoYU1vZGU/aS5PcGFxdWU6XCJtYXNrXCI9PT1sLmFscGhhTW9kZT9pLk1hc2s6aS5NYXNrQmxlbmQ7Y29uc3QgeD1bXSxiPWgoYS5Db2xvcnxhLkFscGhhTWFzayk7bnVsbCE9YiYmKG8uYmFzZUNvbG9yVGV4dHVyZT1uZXcgcihjLGIpLHgucHVzaChvLmJhc2VDb2xvclRleHR1cmUubG9hZFByb21pc2UpKTtjb25zdCBGPWgoYS5NZXRhbGxpY1JvdWdobmVzcyk7bnVsbCE9RiYmKG8ubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlPW5ldyByKGMsRikseC5wdXNoKG8ubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLmxvYWRQcm9taXNlKSk7Y29uc3QgQz1oKGEuRW1pc3NpdmUpO251bGwhPUMmJihvLmVtaXNzaW9uVGV4dHVyZT1uZXcgcihjLEMpLHgucHVzaChvLmVtaXNzaW9uVGV4dHVyZS5sb2FkUHJvbWlzZSkpO2NvbnN0IFA9aChhLk9jY2x1c2lvbik7bnVsbCE9UCYmKG8ub2NjbHVzaW9uVGV4dHVyZT1uZXcgcihjLFApLHgucHVzaChvLm9jY2x1c2lvblRleHR1cmUubG9hZFByb21pc2UpKTtjb25zdCBTPWgoYS5Ob3JtYWwpO3JldHVybiBudWxsIT1TJiYoby5ub3JtYWxUZXh0dXJlPW5ldyByKGMsUykseC5wdXNoKG8ubm9ybWFsVGV4dHVyZS5sb2FkUHJvbWlzZSkpLG8uY29tbW9uTWF0ZXJpYWxQYXJhbWV0ZXJzLmhhc1NsaWNlUGxhbmU9cC5zbGljZVBsYW5lRW5hYmxlZCxvLmNvbW1vbk1hdGVyaWFsUGFyYW1ldGVycy5kb3VibGVTaWRlZD1sLmRvdWJsZVNpZGVkLG8uY29tbW9uTWF0ZXJpYWxQYXJhbWV0ZXJzLmN1bGxGYWNlPWwuY3VsbEZhY2Usby5lbGxpcHNvaWRNb2RlPXQocC52aWV3U3BhdGlhbFJlZmVyZW5jZSksUHJvbWlzZS5hbGwoeCl9ZnVuY3Rpb24gTShlKXtjb25zdCBhPSEhZS5jb21wcmVzc2VkVGV4dHVyZVMzVEMscj0hIWUuY29tcHJlc3NlZFRleHR1cmVFVEMscz1oYXMoXCJkaXNhYmxlLWZlYXR1cmU6aTNzLWJhc2lzXCIpPzA6by5CYXNpc3xvLktUWDIsdD1vLkpQR3xvLlBORyxsPXN8by5ERFNfUzNUQztyZXR1cm4gdHwoYT9sOjApfChyP3M6MCl9ZnVuY3Rpb24gRChlLG8pe2lmKG51bGwhPW8pcmV0dXJuIGUuZmluZCgoZT0+MCE9KGUuZW5jb2RpbmcmbykpKX1mdW5jdGlvbiBSKGUsbyxyKXtpZihudWxsPT1lfHxyPT09YS5Ob25lKXJldHVybiBudWxsO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCBzPWVbYV07aWYobnVsbCE9cyYmMCE9KHMudXNhZ2Umcikpe2NvbnN0IGU9b1thXTtyZXR1cm4gbnVsbCE9ZT9lLmlkOm51bGx9fXJldHVybiBudWxsfWZ1bmN0aW9uIHcoZSl7c3dpdGNoKGUpe2Nhc2Ugby5LVFgyOnJldHVybiBsLktUWDJfRU5DT0RJTkc7Y2FzZSBvLkJhc2lzOnJldHVybiBsLkJBU0lTX0VOQ09ESU5HO2Nhc2Ugby5ERFNfUzNUQzpyZXR1cm4gbC5ERFNfRU5DT0RJTkc7Y2FzZSBvLlBORzpyZXR1cm5cImltYWdlL3BuZ1wiO2Nhc2Ugby5KUEc6cmV0dXJuXCJpbWFnZS9qcGVnXCI7Y2FzZSBvLktUWF9FVEMyOnJldHVyblwiaW1hZ2Uva3R4XCI7ZGVmYXVsdDpyZXR1cm5cIlwifX1leHBvcnR7UyBhcyBjb25maWd1cmVNYXRlcmlhbCxGIGFzIGNyZWF0ZVRleHR1cmUsYiBhcyBkZWZhdWx0TWF0ZXJpYWwsZyBhcyBnZXRNYXRlcmlhbEFuZFRleHR1cmVzLHggYXMgZ2V0TWF0ZXJpYWxBbmRUZXh0dXJlc0Zyb21TaGFyZWQsTSBhcyBnZXRTdXBwb3J0ZWRFbmNvZGluZ3MsRCBhcyBzZWxlY3RFbmNvZGluZ307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2YgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3Mvc3BoZXJlLmpzXCI7Y2xhc3MgaXtjb25zdHJ1Y3RvcihpLHQpe3RoaXMuaWQ9aSx0aGlzLm1icz10LHRoaXMucmVuZGVyTWJzPWUoMCwwLDAsLTEpLHRoaXMuZWxldmF0aW9uUmFuZ2VNaW49TmFOLHRoaXMuZWxldmF0aW9uUmFuZ2VNYXg9TmFOfWludmFsaWRhdGVFbGV2YXRpb25SYW5nZSgpe3RoaXMuZWxldmF0aW9uUmFuZ2VNaW49TmFOfX12YXIgdCxuLG8sYSxzOyFmdW5jdGlvbihlKXtlW2UuVW5tb2RpZmllZD0wXT1cIlVubW9kaWZpZWRcIixlW2UuQ3VsbGVkPTFdPVwiQ3VsbGVkXCIsZVtlLk5vdENoZWNrZWQ9Ml09XCJOb3RDaGVja2VkXCJ9KHR8fCh0PXt9KSksZnVuY3Rpb24oZSl7ZVtlLlVubW9kaWZpZWQ9MF09XCJVbm1vZGlmaWVkXCIsZVtlLlBvdGVudGlhbGx5TW9kaWZpZWQ9MV09XCJQb3RlbnRpYWxseU1vZGlmaWVkXCIsZVtlLkN1bGxlZD0yXT1cIkN1bGxlZFwiLGVbZS5Vbmtub3duPTNdPVwiVW5rbm93blwiLGVbZS5Ob3RDaGVja2VkPTRdPVwiTm90Q2hlY2tlZFwifShufHwobj17fSkpO2NsYXNzIGggZXh0ZW5kcyBpe2NvbnN0cnVjdG9yKGUsaSx0LGEscyxoLGQsYyxyLGwpe3N1cGVyKGUsdCksdGhpcy5pbmRleD1pLHRoaXMuY2hpbGRDb3VudD1hLHRoaXMubGV2ZWw9cyx0aGlzLnJlc291cmNlcz1oLHRoaXMudmVyc2lvbj1kLHRoaXMubG9kTWV0cmljPWMsdGhpcy5tYXhFcnJvcj1yLHRoaXMubnVtRmVhdHVyZXM9bCx0aGlzLmZhaWxlZD0hMSx0aGlzLmNhY2hlU3RhdGU9by5Vbmtub3duLHRoaXMudmVydGV4Q291bnQ9MCx0aGlzLm1lbW9yeT0wLHRoaXMuY2hpbGRyZW5Mb2FkZWQ9MCx0aGlzLmhhc01vZGlmaWNhdGlvbnM9ITEsdGhpcy5pbU1vZGlmaWNhdGlvbkltcGFjdD1uLk5vdENoZWNrZWR9fSFmdW5jdGlvbihlKXtlW2UuVW5rbm93bj0wXT1cIlVua25vd25cIixlW2UuVW5jYWNoZWQ9MV09XCJVbmNhY2hlZFwiLGVbZS5DYWNoZWQ9Ml09XCJDYWNoZWRcIn0ob3x8KG89e30pKSxmdW5jdGlvbihlKXtlW2UuTm9uZT0wXT1cIk5vbmVcIixlW2UuTWF4U2NyZWVuVGhyZXNob2xkPTFdPVwiTWF4U2NyZWVuVGhyZXNob2xkXCIsZVtlLlNjcmVlblNwYWNlUmVsYXRpdmU9Ml09XCJTY3JlZW5TcGFjZVJlbGF0aXZlXCIsZVtlLlJlbW92ZWRGZWF0dXJlRGlhbWV0ZXI9M109XCJSZW1vdmVkRmVhdHVyZURpYW1ldGVyXCIsZVtlLkRpc3RhbmNlUmFuZ2VGcm9tRGVmYXVsdENhbWVyYT00XT1cIkRpc3RhbmNlUmFuZ2VGcm9tRGVmYXVsdENhbWVyYVwifShhfHwoYT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Ib2xlPTBdPVwiSG9sZVwiLGVbZS5MZWFmPTFdPVwiTGVhZlwifShzfHwocz17fSkpO2NsYXNzIGR7Y29uc3RydWN0b3IoZSxpLHQsbil7dGhpcy5ub2RlSGFzTE9EPWUsdGhpcy5pc0Nob3Nlbj1pLHRoaXMubG9kTGV2ZWw9dCx0aGlzLnZlcnNpb249bn19ZXhwb3J0e28gYXMgQ2FjaGVTdGF0ZSxhIGFzIExvZE1ldHJpYyxoIGFzIE5vZGUsaSBhcyBOb2RlQmFzZSx0IGFzIE5vZGVGaWx0ZXJJbXBhY3QsbiBhcyBOb2RlSU1Nb2RpZmljYXRpb25JbXBhY3QscyBhcyBOb2RlU3RhdGUsZCBhcyBOb2RlVHJhdmVyc2FsU3RhdGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtyZXN1bHQgYXMgZSxhc3NlcnRSZXN1bHQgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FzeW5jVXRpbHMuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2Nsb25lIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydEVycm9yIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7bWFrZUFic29sdXRlIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtUZXh0dXJlRW5jb2RpbmcgYXMgbn1mcm9tXCIuL2VudW1zLmpzXCI7aW1wb3J0e3JlYWRCaW5hcnlBdHRyaWJ1dGUgYXMgcyxjcmVhdGVHZW9tZXRyeURlc2NyaXB0b3IgYXMgYX1mcm9tXCIuL0kzU0JpbmFyeVJlYWRlci5qc1wiO2ltcG9ydHtnZXRNYXRlcmlhbEFuZFRleHR1cmVzIGFzIHUsZ2V0TWF0ZXJpYWxBbmRUZXh0dXJlc0Zyb21TaGFyZWQgYXMgbCxzZWxlY3RFbmNvZGluZyBhcyBmfWZyb21cIi4vSTNTTWF0ZXJpYWxVdGlsLmpzXCI7Y2xhc3MgZHtjb25zdHJ1Y3RvcihlLHQscixpLG8sbil7aWYodGhpcy5fc3RyZWFtRGF0YUNvbnRyb2xsZXI9dCx0aGlzLl9sb2dnZXI9cix0aGlzLl9kZWZhdWx0R2VvbWV0cnlTY2hlbWE9aSx0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXM9byx0aGlzLl9vcHRpb25zPW4sdGhpcy5fbG9nTGF5ZXI9ZSx0aGlzLl9sYXllclVybD1lLnBhcnNlZFVybC5wYXRoLHRoaXMuX2dlb21ldHJ5RGVmaW5pdGlvbnM9ZS5nZW9tZXRyeURlZmluaXRpb25zLGUubWF0ZXJpYWxEZWZpbml0aW9ucyl7Y29uc3QgdD1lLnRleHR1cmVTZXREZWZpbml0aW9uczt0aGlzLl9tYXRlcmlhbEFuZFRleHR1cmVzPWUubWF0ZXJpYWxEZWZpbml0aW9ucy5tYXAoKGU9PnUodCxlKSkpfX1fbG9hZChlLHQscil7cmV0dXJuIHRoaXMuX3N0cmVhbURhdGFDb250cm9sbGVyLnJlcXVlc3QoZSx0LHIpfV9sb2FkQXR0cmlidXRlKGUsdCxyKXtjb25zdCBpPWAke3RoaXMuX2xheWVyVXJsfS9ub2Rlcy8ke2UucmVzb3VyY2VzLmF0dHJpYnV0ZXN9L2F0dHJpYnV0ZXMvJHt0LmtleX0vMGA7cmV0dXJuIHRoaXMuX2xvYWQoaSxcImJpbmFyeVwiLHIpLnRoZW4oKGU9PnModCxlKSkpfWFzeW5jIGxvYWRBdHRyaWJ1dGVzKGUsdCxyKXtjb25zdCBvPWF3YWl0IFByb21pc2UuYWxsU2V0dGxlZCh0Lm1hcCgodD0+dGhpcy5fbG9hZEF0dHJpYnV0ZShlLHQuYXR0cmlidXRlU3RvcmFnZUluZm8scikpKSksbj17fTtmb3IobGV0IHM9MDtzPHQubGVuZ3RoOysrcyl7Y29uc3Qgcj1vW3NdLGE9dFtzXTtpZihcImZ1bGZpbGxlZFwiPT09ci5zdGF0dXMpe2NvbnN0IGU9ci52YWx1ZTtuW2EubmFtZV09ZX1lbHNle2NvbnN0IHQ9ci5yZWFzb247aSh0KSx0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZEF0dHJpYnV0ZXNcIix0aGlzLl9sb2dMYXllcixgRmFpbGVkIHRvIGxvYWQgYXR0cmlidXRlRGF0YSBmb3IgJyR7YS5uYW1lfScgb24gbm9kZSAnJHtlLmlkfSdgLHQpfX1yZXR1cm4gbn1hc3luYyBsb2FkTm9kZURhdGEocixpKXtjb25zdCBvPW51bGwhPXRoaXMuX3JlcXVpcmVkQXR0cmlidXRlcyYmci5yZXNvdXJjZXMuYXR0cmlidXRlcz9lKHRoaXMubG9hZEF0dHJpYnV0ZXMocix0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXMsaSkpOm51bGwse2J1ZmZlckRlZmluaXRpb246bixidWZmZXJJbmRleDpzfT1fKHRoaXMuX2dlb21ldHJ5RGVmaW5pdGlvbnMsciksdT0hIXIucmVzb3VyY2VzLmdlb21ldHJ5LGY9dT9lKHRoaXMuX2xvYWRHZW9tZXRyeShyLnJlc291cmNlcy5nZW9tZXRyeSxzLGkpKTpudWxsLGQ9ci5yZXNvdXJjZXMuaGFzU2hhcmVkUmVzb3VyY2U/YXdhaXQgdGhpcy5fbG9hZFNoYXJlZChyLGkpOm51bGwsYj1yLnJlc291cmNlcy5tYXRlcmlhbERlZmluaXRpb24seT10aGlzLl9tYXRlcmlhbEFuZFRleHR1cmVzJiZudWxsIT1iJiZiPj0wP3RoaXMuX21hdGVyaWFsQW5kVGV4dHVyZXNbYl06bnVsbCE9ZD9sKGQpOm51bGwsRD15Py5tYXRlcmlhbCxwPXk/LnRleHR1cmVzPz9bXSx4PWAke3IuaWR9YCxBPSF1JiZ0aGlzLl9vcHRpb25zLmxvYWRGZWF0dXJlRGF0YSx3PUE/YXdhaXQgdGhpcy5fbG9hZEZlYXR1cmVEYXRhKHgsaSk6bnVsbCxUPUE/aCh3KTpjKEQpLCQ9bnVsbD09VD9tKHcpOm51bGwsaj1wLmxlbmd0aD4wP2UodGhpcy5sb2FkVGV4dHVyZXMocixwLGkpKTpudWxsO2xldCBJPW51bGwsUz1udWxsO2lmKGYpe0k9dChhd2FpdCBmKTtjb25zdCBlPWcodGhpcy5fZGVmYXVsdEdlb21ldHJ5U2NoZW1hLGQpO1M9YShuLGUpfWNvbnN0IFU9aj90KGF3YWl0IGopOm51bGwscT1vP3QoYXdhaXQgbyk6e30sQj1xP3thdHRyaWJ1dGVEYXRhOnEsbG9hZGVkQXR0cmlidXRlczp0aGlzLl9yZXF1aXJlZEF0dHJpYnV0ZXN9Om51bGw7aWYobnVsbCE9VClyZXR1cm57Z2VvbWV0cnlEYXRhOlQsYXR0cmlidXRlRGF0YUluZm86QixnZW9tZXRyeUJ1ZmZlcjpJLGdlb21ldHJ5RGVzY3JpcHRvcjpTLHJlcXVpcmVkVGV4dHVyZXM6cCx0ZXh0dXJlRGF0YTpVfTtpZihudWxsIT0kKXJldHVybntwb2ludERhdGE6JCxhdHRyaWJ1dGVEYXRhSW5mbzpCLGdlb21ldHJ5QnVmZmVyOkksZ2VvbWV0cnlEZXNjcmlwdG9yOlMscmVxdWlyZWRUZXh0dXJlczpwLHRleHR1cmVEYXRhOlV9O3Rocm93IG5ldyBFcnJvcn1zdGF0aWMgX2FkZEFic29sdXRlSHJlZlRleHR1cmUoZSx0KXtjb25zdCByPWUudGV4dHVyZURlZmluaXRpb25zO2lmKG51bGwhPXIpZm9yKGNvbnN0IGkgb2YgT2JqZWN0LmtleXMocikpZm9yKGNvbnN0IGUgb2YgcltpXS5pbWFnZXMpQXJyYXkuaXNBcnJheShlLmhyZWYpP2UuaHJlZkNvbmNhdD1lLmhyZWYubWFwKChlPT5vKGUsdCkpKTplLmhyZWZDb25jYXQ9byhlLmhyZWYsdCl9c3RhdGljIF9maXhUZXh0dXJlRW5jb2RpbmdzKGUpe2NvbnN0IHQ9ZS50ZXh0dXJlRGVmaW5pdGlvbnM7aWYobnVsbCE9dClmb3IoY29uc3QgciBpbiB0KXtjb25zdCBlPXRbcl07aWYoQXJyYXkuaXNBcnJheShlLmVuY29kaW5nKSlmb3IobGV0IHQ9MDt0PGUuZW5jb2RpbmcubGVuZ3RoO3QrKyl7Y29uc3Qgcj1lLmVuY29kaW5nW3RdO1wiZGF0YTpcIj09PXIuc3Vic3RyaW5nKDAsNSkmJihlLmVuY29kaW5nW3RdPXIuc3Vic3RyaW5nKDUpKX1lbHNle2NvbnN0IHQ9ZS5lbmNvZGluZztcImRhdGE6XCI9PT10LnN1YnN0cmluZygwLDUpJiYoZS5lbmNvZGluZz10LnN1YnN0cmluZyg1KSl9fX1fbG9hZFNoYXJlZChlLHQpe2NvbnN0IHI9YCR7dGhpcy5fbGF5ZXJVcmx9L25vZGVzLyR7ZS5yZXNvdXJjZXMuZ2VvbWV0cnl9L3NoYXJlZGA7cmV0dXJuIHRoaXMuX2xvYWQocixcImpzb25cIix0KS50aGVuKChlPT4oZC5fZml4VGV4dHVyZUVuY29kaW5ncyhlKSxkLl9hZGRBYnNvbHV0ZUhyZWZUZXh0dXJlKGUsciksZSkpKX1fbG9hZFRleHR1cmUoZSx0LHIsaSxvLHMpe2xldCBhPSExO3JldHVybiBvPT09bi5ERFNfUzNUQ3x8bz09PW4uS1RYMnx8bz09PW4uQmFzaXM/dGhpcy5fbG9hZChlLFwiYmluYXJ5XCIscykudGhlbigoZT0+KHtpZDp0LHVzYWdlOnIsZGF0YTplLGVuY29kaW5nOm8sZG93bnNhbXBsZWQ6YX0pKSk6dGhpcy5fbG9hZChlLFwiaW1hZ2VcIixzKS50aGVuKChlPT57bGV0IG49ZTtjb25zdCBzPTQwOTYsdT0yO2lmKGkmJmUud2lkdGgqZS5oZWlnaHQ+PXMpe2NvbnN0IHQ9TWF0aC5jZWlsKGUud2lkdGgvdSkscj1NYXRoLmNlaWwoZS5oZWlnaHQvdSksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO2kud2lkdGg9dCxpLmhlaWdodD1yO2kuZ2V0Q29udGV4dChcIjJkXCIpLmRyYXdJbWFnZShlLDAsMCx0LHIpLG49aSxhPSEwfXJldHVybntpZDp0LHVzYWdlOnIsZGF0YTpuLGVuY29kaW5nOm8sZG93bnNhbXBsZWQ6YX19KSl9bG9hZFRleHR1cmVzKGUsdCxyKXtjb25zdCBpPSEhdGhpcy5fb3B0aW9ucy51bmNvbXByZXNzZWRUZXh0dXJlRG93bnNhbXBsaW5nRW5hYmxlZCxvPXRoaXMuX29wdGlvbnMudGV4dHVyZVVzYWdlTWFzaztyZXR1cm4gUHJvbWlzZS5hbGwodC5tYXAoKHQ9PntpZigwPT0odC51c2FnZSZvKSlyZXR1cm4gbnVsbDtjb25zdCBuPWYodC5lbmNvZGluZ3MsdGhpcy5fb3B0aW9ucy50ZXh0dXJlRW5jb2RpbmdzKTtpZihudWxsPT1uKXJldHVybiB0aGlzLl9sb2dnZXIuZXJyb3IoXCIjbG9hZFRleHR1cmVzXCIsdGhpcy5fbG9nTGF5ZXIsYE5vIGtub3duIGVuY29kaW5nIGZvciB0ZXh0dXJlIGZvdW5kIG9uIG5vZGUgJHtlLmlkfWApLFByb21pc2UucmVqZWN0KCk7Y29uc3Qgcz1lLnJlc291cmNlcy50ZXh0dXJlfHxlLmlkLGE9YCR7dGhpcy5fbGF5ZXJVcmx9L25vZGVzLyR7c30vdGV4dHVyZXMvJHtuLm5hbWV9YDtyZXR1cm4gdGhpcy5fbG9hZFRleHR1cmUoYSx0LmlkLHQudXNhZ2UsaSxuLmVuY29kaW5nLHIpfSkpKX1fbG9hZEZlYXR1cmVEYXRhKGUsdCl7Y29uc3Qgcj1gJHt0aGlzLl9sYXllclVybH0vbm9kZXMvJHtlfS9mZWF0dXJlcy8wYDtyZXR1cm4gdGhpcy5fbG9hZChyLFwianNvblwiLHQpfV9sb2FkR2VvbWV0cnkoZSx0LHIpe2NvbnN0IGk9YCR7dGhpcy5fbGF5ZXJVcmx9L25vZGVzLyR7ZX0vZ2VvbWV0cmllcy8ke3R9YDtyZXR1cm4gdGhpcy5fbG9hZChpLFwiYmluYXJ5XCIscil9fWZ1bmN0aW9uIGMoZSl7cmV0dXJue2ZlYXR1cmVJZHM6W10sZ2VvbWV0cmllczpbe3R5cGU6XCJBcnJheUJ1ZmZlclZpZXdcIixwYXJhbXM6e21hdGVyaWFsOmV9fV0sZmVhdHVyZURhdGFQb3NpdGlvbjpbMCwwLDBdfX1mdW5jdGlvbiBoKGUpe2lmKCFlKXJldHVybiBudWxsO2Zvcihjb25zdCB0IG9mIGUuZmVhdHVyZURhdGEpe2NvbnN0IGU9dC5nZW9tZXRyaWVzO2lmKG51bGwhPWUpZm9yKGNvbnN0IHIgb2YgZSlyZXR1cm57ZmVhdHVyZUlkczpbdC5pZF0sZmVhdHVyZURhdGFQb3NpdGlvbjp0LnBvc2l0aW9uLGdlb21ldHJpZXM6W3JdfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBtKGUpe2lmKCFlKXJldHVybiBudWxsO2NvbnN0IHQ9bmV3IEFycmF5O2Zvcihjb25zdCByIG9mIGUuZmVhdHVyZURhdGEpbnVsbCE9ci5wb3NpdGlvbiYmdC5wdXNoKHtmZWF0dXJlSWRzOltyLmlkXSxmZWF0dXJlRGF0YVBvc2l0aW9uOnIucG9zaXRpb24sZ2VvbWV0cmllczpbXX0pO3JldHVybiB0fWZ1bmN0aW9uIGcoZSx0KXtpZighZXx8IXQ/Lm1hdGVyaWFsRGVmaW5pdGlvbnMpcmV0dXJuIGU7Y29uc3QgaT1PYmplY3Qua2V5cyh0Lm1hdGVyaWFsRGVmaW5pdGlvbnMpWzBdO3JldHVybiF0Lm1hdGVyaWFsRGVmaW5pdGlvbnNbaV0ucGFyYW1zLnZlcnRleFJlZ2lvbnMmJmUudmVydGV4QXR0cmlidXRlcy5yZWdpb24mJmRlbGV0ZShlPXIoZSkpLnZlcnRleEF0dHJpYnV0ZXMucmVnaW9uLGV9ZnVuY3Rpb24gXyhlLHQpe2NvbnN0IHI9e2J1ZmZlckRlZmluaXRpb246bnVsbCxidWZmZXJJbmRleDowfSxpPXQucmVzb3VyY2VzLmdlb21ldHJ5RGVmaW5pdGlvbjtpZihudWxsPT1lfHxudWxsPT1pfHxpPDApcmV0dXJuIHI7Y29uc3Qgbz1pPj0wP2VbaV0uZ2VvbWV0cnlCdWZmZXJzOm51bGw7aWYobnVsbD09bylyZXR1cm4gcjtmb3IobGV0IG49MDtuPG8ubGVuZ3RoO24rKyl7Y29uc3QgZT1vW25dO2lmKG51bGw9PWUuY29tcHJlc3NlZEF0dHJpYnV0ZXMpci5idWZmZXJJbmRleD1uLHIuYnVmZmVyRGVmaW5pdGlvbj1vW25dO2Vsc2UgaWYoXCJkcmFjb1wiPT09ZS5jb21wcmVzc2VkQXR0cmlidXRlcy5lbmNvZGluZyYmIWhhcyhcImRpc2FibGUtZmVhdHVyZTppM3MtZHJhY29cIikpcmV0dXJuIHIuYnVmZmVySW5kZXg9bixyLmJ1ZmZlckRlZmluaXRpb249ZSxyfXJldHVybiByfWV4cG9ydHtkIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3NwbGl0SW50b0NodW5rcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydHtyZXN1bHRPckFib3J0IGFzIGkscmVzdWx0IGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0e2VzdGltYXRlU3RyaW5nQnl0ZVNpemUgYXMgbixlc3RpbWF0ZU51bWJlckJ5dGVTaXplIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9ieXRlU2l6ZUVzdGltYXRpb25zLmpzXCI7aW1wb3J0IGQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0e21ha2VIYW5kbGUgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhbmRsZVV0aWxzLmpzXCI7aW1wb3J0IGggZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIGwsYWJvcnRNYXliZSBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7d2hlbk9yQWJvcnQgYXMgbSxjcmVhdGVSZXNvbHZlciBhcyBnfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0IHkgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9SZWFjdGl2ZVNldC5qc1wiO2ltcG9ydHt3YXRjaCBhcyBwLGluaXRpYWwgYXMgZn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgYn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBffWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Zm9ybWF0TnVtYmVyIGFzIE99ZnJvbVwiLi4vLi4vLi4vLi4vaW50bC9udW1iZXIuanNcIjtpbXBvcnR7Z2V0TWF4aW11bVF1ZXJ5U2l6ZSBhcyBqLHF1ZXJ5QWxsSlNPTiBhcyBDfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ZlYXR1cmVRdWVyeUFsbC5qc1wiO2ltcG9ydHthc3NldE1hcEZyb21Bc3NldE1hcHNKU09OIGFzIHYsZXh0cmFjdE1lc2ggYXMgSX1mcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvbWVzaEZlYXR1cmVTZXQuanNcIjtpbXBvcnR7ZGlyZWN0M0RPYmplY3RGZWF0dXJlTGF5ZXJEaXNwbGF5RW5hYmxlZCBhcyBGLGkzc1BhdGNoaW5nRW5hYmxlZCBhcyBBLHNjZW5lTGF5ZXJFZGl0aW5nRW5hYmxlZCBhcyB3fWZyb21cIi4uLy4uLy4uLy4uL3N1cHBvcnQvZmVhdHVyZUZsYWdzLmpzXCI7aW1wb3J0e2lzVGltZW91dEVycm9yIGFzIEx9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9yZXF1ZXN0VXRpbHMuanNcIjtpbXBvcnQgeCBmcm9tXCIuLi9GZWF0dXJlTGF5ZXJWaWV3M0QuanNcIjtjb25zdCBFPVwiZXNyaS52aWV3cy4zZC5sYXllcnMuaTNzLkkzU092ZXJyaWRlc1wiO2xldCBTPWNsYXNzIGV4dGVuZHMgcntjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl93YXJuTWF4aW11bUNoYW5nZWRPYmplY3RzRXhjZWVkZWQ9ITEsdGhpcy5fbWF4aW11bU51bWJlck9mRWRpdE9WZXJyaWRlcz1WLHRoaXMuX29yaWdpbmFsM0RPRkxEZWZpbml0aW9uRXhwcmVzc2lvbj1udWxsLHRoaXMuX2ludGVyYWN0aXZlRWRpdGluZ1Nlc3Npb25zPW5ldyBkLHRoaXMuZ2VvbWV0cnlPdmVycmlkZXM9bmV3IGQsdGhpcy5fY2xpZW50R2VvbWV0cnlDYWNoZT1uZXcgTWFwLHRoaXMuX2Fzc29jaWF0ZWRMYXllclZpZXc9bnVsbCx0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzPW5ldyB5LHRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcz1uZXcgeSx0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzPW51bGwsdGhpcy5fcGVuZGluZ0ZldGNoQWJvcnRDb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXIsdGhpcy5fZmVhdHVyZUlkTG9ja3M9bmV3IE1hcH1pbml0aWFsaXplKCl7dGhpcy5fbWVtQ2FjaGU9dGhpcy5tZW1vcnlDb250cm9sbGVyLm5ld0NhY2hlKGBpM3MtYXR0cmlidXRlLW92ZXJyaWRlcy0ke3RoaXMubGF5ZXIudWlkfWApLHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHM9dGhpcy5fZmV0Y2hDaGFuZ2VkT2JqZWN0SWRzKHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlcj8uc2lnbmFsKSx0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzLmZpbmFsbHkoKCgpPT57dGhpcy5fcGVuZGluZ0ZldGNoQWJvcnRDb250cm9sbGVyPW51bGwsdGhpcy5fcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkcz1udWxsfSkpLHRoaXMuaXMzRE9GTCYmbnVsbCE9dGhpcy5fYXNzb2NpYXRlZExheWVyJiYoRigpP3RoaXMuX2Fzc29jaWF0ZWRMYXllci5sb2FkKCkudGhlbigoZT0+e3RoaXMuZGVzdHJveWVkfHwodGhpcy5fb3JpZ2luYWwzRE9GTERlZmluaXRpb25FeHByZXNzaW9uPWUuZGVmaW5pdGlvbkV4cHJlc3Npb24sdGhpcy5hZGRIYW5kbGVzKHAoKCgpPT50aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbiksKHQ9PmUuZGVmaW5pdGlvbkV4cHJlc3Npb249dCksZikpLHRoaXMuX2Fzc29jaWF0ZWRMYXllclZpZXc9bmV3IHgoe2xheWVyOnRoaXMuX2Fzc29jaWF0ZWRMYXllcix2aWV3OnRoaXMudmlld30pKX0pKTpBKCkpfWRlc3Ryb3koKXt0aGlzLmlzM0RPRkwmJm51bGwhPXRoaXMuX2Fzc29jaWF0ZWRMYXllciYmKEYoKT9udWxsIT10aGlzLl9hc3NvY2lhdGVkTGF5ZXJWaWV3JiYodGhpcy5fYXNzb2NpYXRlZExheWVyLmRlZmluaXRpb25FeHByZXNzaW9uPXRoaXMuX29yaWdpbmFsM0RPRkxEZWZpbml0aW9uRXhwcmVzc2lvbik6QSgpKSx0aGlzLl9zZXQoXCJsYXllclwiLG51bGwpLHRoaXMuX21lbUNhY2hlPWwodGhpcy5fbWVtQ2FjaGUpLHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlcj11KHRoaXMuX3BlbmRpbmdGZXRjaEFib3J0Q29udHJvbGxlciksdGhpcy5fcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkcz1udWxsLHRoaXMuX2ZlYXR1cmVJZExvY2tzLmNsZWFyKCl9Z2V0IGlzM0RPRkwoKXtyZXR1cm4gdygpJiZudWxsIT10aGlzLl9hc3NvY2lhdGVkTGF5ZXI/LmluZm9Gb3IzRH1nZXQgc29ydGVkR2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzKCl7cmV0dXJuIHRoaXMuaXMzRE9GTD9bLi4udGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzXS5zb3J0KCgoZSx0KT0+ZS10KSk6W119Z2V0IF9hc3NvY2lhdGVkTGF5ZXIoKXtyZXR1cm4gbnVsbD09dGhpcy5sYXllcj9udWxsOnRoaXMubGF5ZXIuYXNzb2NpYXRlZExheWVyfWdldCBoYXNHZW9tZXRyeUNoYW5nZXMoKXtyZXR1cm4gdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzLnNpemU+MH1nZXQgX2RlZmluaXRpb25FeHByZXNzaW9uKCl7Y29uc3QgZT10aGlzLnNvcnRlZEdlb21ldHJ5Q2hhbmdlZE9iamVjdElkcztyZXR1cm4gMD09PWUubGVuZ3RoP1wiMSA9IDBcIjpgT0JKRUNUSUQgSU4gKCR7ZS5qb2luKFwiLFwiKX0pYH1nZXQgdXBkYXRpbmcoKXtpZighdGhpcy5pczNET0ZMKXJldHVybiExO2lmKHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMpcmV0dXJuITA7aWYoRigpKXtyZXR1cm4hKG51bGwhPXRoaXMuX2Fzc29jaWF0ZWRMYXllclZpZXcpfHxudWxsIT10aGlzLl9hc3NvY2lhdGVkTGF5ZXJWaWV3JiZ0aGlzLl9hc3NvY2lhdGVkTGF5ZXJWaWV3LnVwZGF0aW5nfXJldHVybiExfWdldCBpc0VtcHR5KCl7cmV0dXJuIG51bGw9PXRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMmJjA9PT10aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLnNpemUmJjA9PT10aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuc2l6ZX1mZWF0dXJlSGFzR2VvbWV0cnlDaGFuZ2VzKGUpe3JldHVybiB0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuaGFzKGUpfWZlYXR1cmVIYXNBdHRyaWJ1dGVDaGFuZ2VzKGUpe3JldHVybiB0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLmhhcyhlKX1jcmVhdGVJbnRlcmFjdGl2ZUVkaXRTZXNzaW9uKGUpe3RoaXMuX2F0dHJpYnV0ZUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpO2NvbnN0IHQ9dGhpcy5faW50ZXJhY3RpdmVFZGl0aW5nU2Vzc2lvbnMscj1uZXcgRChlLCgoKT0+e3QucmVtb3ZlKHIpfSkpO3JldHVybiB0LnVuc2hpZnQocikscn1hc3luYyBhcHBseUF0dHJpYnV0ZU92ZXJyaWRlcyhlLHQscixzPVtdKXtpZih0aGlzLl9wZW5kaW5nRmV0Y2hDaGFuZ2VkT2JqZWN0SWRzJiZhd2FpdCBtKHRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMsciksbnVsbD09dClyZXR1cm47Y29uc3R7YXR0cmlidXRlRGF0YTppLGxvYWRlZEF0dHJpYnV0ZXM6b309dDtpZihudWxsPT1vfHxudWxsPT1pfHwwPT09dGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcy5zaXplKXJldHVybjtjb25zdCBuPW5ldyBTZXQ7Zm9yKGNvbnN0IGQgb2YgbyluLmFkZChkLmluZGV4KTtmb3IoY29uc3QgZCBvZiBzKW4uaGFzKGQuaW5kZXgpfHwoby5wdXNoKGQpLGlbZC5uYW1lXT1uZXcgQXJyYXkoZS5sZW5ndGgpKTtjb25zdCBhPWF3YWl0IHRoaXMuX2xvY2tGZWF0dXJlSWRzKGUpO3RyeXtjb25zdCB0PXthdHRyaWJ1dGVEYXRhOmksbG9hZGVkQXR0cmlidXRlczpvfSxzPXRoaXMuX2dldE92ZXJyaWRlc0Zyb21DYWNoZShlLHQsdGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcykse29iamVjdElkczpuLGZpZWxkTmFtZXM6YX09cztpZigwPT09bi5sZW5ndGh8fDA9PT1hLmxlbmd0aClyZXR1cm47Y29uc3QgZD1hd2FpdCB0aGlzLl9xdWVyeUF0dHJpYnV0ZU92ZXJyaWRlc0Zyb21Bc3NvY2lhdGVkTGF5ZXIobixhLHIpO2lmKG51bGw9PWQpcmV0dXJuO3RoaXMuX3Byb2Nlc3NPdmVycmlkZXNGcm9tQXNzb2NpYXRlZExheWVyKGUsZCxhLHQpfWZpbmFsbHl7YS5yZW1vdmUoKX19dXBkYXRlR2VvbWV0cnkoZSx0KXt0aGlzLl9nZW9tZXRyeUNoYW5nZWRPYmplY3RJZHMuYWRkKGUpO2NvbnN0IHI9dGhpcy5fY2xpZW50R2VvbWV0cnlDYWNoZS5nZXQoZSk7aWYobnVsbCE9ciYmKHRoaXMuZ2VvbWV0cnlPdmVycmlkZXMucmVtb3ZlKHIpLHRoaXMuX2NsaWVudEdlb21ldHJ5Q2FjaGUuZGVsZXRlKGUpKSxudWxsIT10KXtjb25zdCByPXtvaWQ6ZSxtZXNoOnR9O3RoaXMuZ2VvbWV0cnlPdmVycmlkZXMuYWRkKHIpLHRoaXMuX2NsaWVudEdlb21ldHJ5Q2FjaGUuc2V0KGUscil9fXVwZGF0ZUF0dHJpYnV0ZVZhbHVlKGUsdCxyKXt0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzLmFkZChlKSx0aGlzLl9jYWNoZUF0dHJpYnV0ZVZhbHVlKGUsdCxyKX1mZWF0dXJlQWRkZWQoZSl7dGhpcy5pczNET0ZMJiZBKCkmJnRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcy5hZGQoZSksdGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcy5hZGQoZSl9X2NhY2hlQXR0cmlidXRlVmFsdWUoZSx0LHIpe3RoaXMuX21lbUNhY2hlLnB1dCh0aGlzLl9nZXRBdHRyaWJ1dGVDYWNoZUtleShlLHQpLHIsdGhpcy5fbWVtQ2FjaGVBdHRyaWJ1dGVWYWx1ZVNpemUocikpfV9nZXRPdmVycmlkZXNGcm9tQ2FjaGUoZSx7bG9hZGVkQXR0cmlidXRlczp0LGF0dHJpYnV0ZURhdGE6cn0scyl7Y29uc3QgaT1uZXcgU2V0LG89bmV3IEFycmF5O2Zvcihjb25zdCBhIG9mIHQpb1thLmluZGV4XT1yW2EubmFtZV07Y29uc3Qgbj1uZXcgU2V0O2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCByPWVbYV07aWYocy5oYXMocikpZm9yKGNvbnN0IGUgb2YgdCl7Y29uc3QgdD10aGlzLl9hdHRyaWJ1dGVGcm9tQ2FjaGUocixlLmluZGV4KTt2b2lkIDA9PT10PyhpLmFkZChyKSxuLmFkZChlLm5hbWUpKTpvW2UuaW5kZXhdW2FdPXR9fXJldHVybntvYmplY3RJZHM6QXJyYXkuZnJvbShpKSxmaWVsZE5hbWVzOkFycmF5LmZyb20obil9fV9hdHRyaWJ1dGVGcm9tQ2FjaGUoZSx0KXtjb25zdCByPXRoaXMuX2Zyb21JbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9uKGUsdCk7aWYodm9pZCAwIT09cilyZXR1cm4gcjtjb25zdCBzPXRoaXMuX2dldEF0dHJpYnV0ZUNhY2hlS2V5KGUsdCk7cmV0dXJuIHRoaXMuX21lbUNhY2hlLmdldChzKX1fZnJvbUludGVyYWN0aXZlRWRpdGluZ1Nlc3Npb24oZSx0KXtpZihudWxsIT10aGlzLl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9ucylmb3IoY29uc3QgciBvZiB0aGlzLl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9ucyl7aWYoci5vYmplY3RJZCE9PWUpY29udGludWU7Y29uc3Qgcz1yLmdldEF0dHJpYnV0ZSh0KTtpZih2b2lkIDAhPT1zKXJldHVybiBzfX1fZ2V0QXR0cmlidXRlQ2FjaGVLZXkoZSx0KXtyZXR1cm5gJHtlfS0ke3R9YH1hc3luYyBfcXVlcnlBdHRyaWJ1dGVPdmVycmlkZXNGcm9tQXNzb2NpYXRlZExheWVyKGUsdCxyKXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIG51bGw7dGhpcy5fbG9nV2FybmluZ0lmTWF4aW11bU9iamVjdHNFeGNlZWRlZCgpO2NvbnN0e2Fzc29jaWF0ZWRMYXllcjpzfT10aGlzLmxheWVyO2lmKG51bGw9PXMpcmV0dXJuIG51bGw7Y29uc3QgaT1zLmNyZWF0ZVF1ZXJ5KCkse29iamVjdElkRmllbGQ6b309cyxuPVtvLC4uLnRdO2kud2hlcmU9XCIxPTFcIixpLnJldHVybkdlb21ldHJ5PSExLGkub3V0RmllbGRzPW4saS5jYWNoZUhpbnQ9ITA7Y29uc3QgYT1hd2FpdCB0aGlzLl9leGVjdXRlQmF0Y2hRdWVyeShzLGUsaSxyKSxkPVtdO2Zvcihjb25zdCBjIG9mIGEpaWYoYy5vaylmb3IoY29uc3QgZSBvZiBjLnZhbHVlLmZlYXR1cmVzKWQucHVzaChlKTtyZXR1cm4gZH1hc3luYyBfcXVlcnlHZW9tZXRyeU92ZXJyaWRlc0Zyb21Bc3NvY2lhdGVkTGF5ZXIoZSx0KXtpZigwPT09ZS5sZW5ndGh8fCF0aGlzLmlzM0RPRkx8fCFBKCkpcmV0dXJuIG51bGw7dGhpcy5fbG9nV2FybmluZ0lmTWF4aW11bU9iamVjdHNFeGNlZWRlZCgpO2NvbnN0IHI9dGhpcy5sYXllci5hc3NvY2lhdGVkTGF5ZXIse29iamVjdElkRmllbGQ6cyxnbG9iYWxJZEZpZWxkOml9PXIsbz1bcywuLi5udWxsIT1pP1tpXTpbXV0sbj1yLmNyZWF0ZVF1ZXJ5KCk7bi53aGVyZT1cIjE9MVwiLG4ucmV0dXJuR2VvbWV0cnk9ITAsbi5vdXRGaWVsZHM9byxuLmNhY2hlSGludD0hMCxuLnJldHVyblo9ci5oYXNaLG4ucmV0dXJuTT1yLmhhc007Y29uc3QgYT1hd2FpdCB0aGlzLl9leGVjdXRlQmF0Y2hRdWVyeShyLGUsbix0KSxkPXIuaW5mb0ZvcjNELHtzcGF0aWFsUmVmZXJlbmNlOmN9PXIsaD1bXTtmb3IoY29uc3QgbCBvZiBhKXtpZighbC5vayljb250aW51ZTtjb25zdCBlPWwudmFsdWUse2Fzc2V0TWFwczp0LGZlYXR1cmVzOnIsZ2xvYmFsSWRGaWVsZE5hbWU6c309ZTtpZihudWxsPT10KWNvbnRpbnVlO2NvbnN0IGk9dihkLHQpO2Zvcihjb25zdCBvIG9mIHIpe2NvbnN0IGU9SShvLHMsYyxkLGkpLHQ9bztudWxsIT1lPyh0Lmdlb21ldHJ5PWUsaC5wdXNoKHQpKTp0Lmdlb21ldHJ5PW51bGx9fXJldHVybiBofV9sb2dXYXJuaW5nSWZNYXhpbXVtT2JqZWN0c0V4Y2VlZGVkKCl7aWYoIXRoaXMuX3dhcm5NYXhpbXVtQ2hhbmdlZE9iamVjdHNFeGNlZWRlZClyZXR1cm47dGhpcy5fd2Fybk1heGltdW1DaGFuZ2VkT2JqZWN0c0V4Y2VlZGVkPSExO2xldCBlPWBUaGUgbnVtYmVyIG9mIGVkaXRlZCBvYmplY3RzIHRoYXQgYXJlIG5vdCB5ZXQgY2FjaGVkIGluIHRoZSBzY2VuZSBzZXJ2aWNlIGV4Y2VlZHMgdGhlIG1heGltdW0gbGltaXQuIEF0dHJpYnV0ZSBjaGFuZ2VzIHdpbGwgb25seSBiZSBhdmFpbGFibGUgZm9yIHRoZSBmaXJzdCAke08odGhpcy5fbWF4aW11bU51bWJlck9mRWRpdE9WZXJyaWRlcyl9IG9iamVjdHMuIFBsZWFzZSBjb25zaWRlciByZS1jYWNoaW5nIHRoZSBzY2VuZSBzZXJ2aWNlYDtjb25zdCB0PXRoaXMubGF5ZXIucG9ydGFsSXRlbTt0JiZ0LmxvYWRlZD9lKz1gICgke3QucG9ydGFsLnVybH0vaG9tZS9pdGVtLmh0bWw/aWQ9JHt0LmlkfSNzZXR0aW5ncylgOmUrPWAgKCR7dGhpcy5sYXllci5wYXJzZWRVcmwucGF0aH0pYCxoLmdldExvZ2dlcihFKS53YXJuKFwiI3F1ZXJ5T3ZlcnJpZGVzKClcIix0aGlzLmxheWVyLnRpdGxlLGAke2V9LmApfWFzeW5jIF9leGVjdXRlQmF0Y2hRdWVyeShlLHQscixvKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuW107Y29uc3Qgbj1qKGUpO3Q9Wy4uLnRdLnNvcnQoKChlLHQpPT5lLXQpKTtjb25zdCBhPXModCxuKS5tYXAoKHQ9Pntjb25zdCBzPXIuY2xvbmUoKTtyZXR1cm4gcy5vYmplY3RJZHM9dCxpKEMoZSxzLHtzaWduYWw6b30pKX0pKTtyZXR1cm4gUHJvbWlzZS5hbGwoYSl9X3Byb2Nlc3NPdmVycmlkZXNGcm9tQXNzb2NpYXRlZExheWVyKGUsdCxyLHtsb2FkZWRBdHRyaWJ1dGVzOnMsYXR0cmlidXRlRGF0YTppfSl7Y29uc3Qgbz10aGlzLl9hc3NvY2lhdGVkTGF5ZXI7aWYobnVsbD09bylyZXR1cm47Y29uc3Qgbj1vLm9iamVjdElkRmllbGQsYT1yLm1hcCgodD0+KHQgaW4gaXx8KGlbdF09bmV3IEFycmF5KGUubGVuZ3RoKSksaVt0XSkpKSxkPW5ldyBNYXAocy5tYXAoKGU9PltlLm5hbWUsZS5pbmRleF0pKSksYz1yLm1hcCgoZT0+ZC5nZXQoZSkpKSxoPW5ldyBNYXAoQXJyYXkuZnJvbShlLCgoZSx0KT0+W2UsdF0pKSk7Zm9yKGNvbnN0IGwgb2YgdCl7Y29uc3QgZT1sLmF0dHJpYnV0ZXNbbl07Zm9yKGxldCB0PTA7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IHM9Y1t0XSxpPWguZ2V0KGUpLG89bC5hdHRyaWJ1dGVzW3JbdF1dO2FbdF1baV09byx0aGlzLl9jYWNoZUF0dHJpYnV0ZVZhbHVlKGUscyxvKX19fV9tZW1DYWNoZUF0dHJpYnV0ZVZhbHVlU2l6ZShlKXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9uKGUpOmEoKX1hc3luYyBfZmV0Y2hDaGFuZ2VkT2JqZWN0SWRzKGUpe2NvbnN0IHI9dGhpcy5sYXllcjthd2FpdCByLmxvYWQoe3NpZ25hbDplfSksdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzLmNsZWFyKCksdGhpcy5fYXR0cmlidXRlQ2hhbmdlZE9iamVjdElkcy5jbGVhcigpO2NvbnN0e2Fzc29jaWF0ZWRMYXllcjpzfT1yO2lmKG51bGw9PXN8fCFzLmNhcGFiaWxpdGllcz8ub3BlcmF0aW9ucz8uc3VwcG9ydHNDaGFuZ2VUcmFja2luZylyZXR1cm47Y29uc3QgaT10aGlzLl9nZXRGZXRjaENoYW5nZWRPYmplY3RJZHNTZXJ2ZXJHZW4oKTtpZihudWxsPT1pKXJldHVybjtjb25zdCBuPXMubGF5ZXJJZCxhPXRoaXMuaXMzRE9GTCxkPXtmOlwianNvblwiLHJldHVybklkc09ubHk6ITAsbGF5ZXJzOmBbJHtufV1gLHJldHVyblVwZGF0ZXM6ITAscmV0dXJuRGVsZXRlczphLHJldHVybkluc2VydHM6YSxsYXllclNlcnZlckdlbnM6SlNPTi5zdHJpbmdpZnkoW3tpZDpuLHNlcnZlckdlbjppfV0pfTtpZihhKXtjb25zdCBlPXMuaW5mb0ZvcjNEO2QuZmllbGRzVG9Db21wYXJlPUpTT04uc3RyaW5naWZ5KHtmaWVsZHM6Wy4uLk9iamVjdC52YWx1ZXMoZS50cmFuc2Zvcm1GaWVsZFJvbGVzKSxlLnNvdXJjZUhhc2hGaWVsZF19KX1jb25zdCBjPWF3YWl0IG8odChgJHtzLnVybH0vZXh0cmFjdENoYW5nZXNgLHttZXRob2Q6XCJwb3N0XCIscXVlcnk6ZCx0aW1lb3V0Okcsc2lnbmFsOmV9KSk7aWYoIWMub2smJkwoYy5lcnJvcikpe2NvbnN0IGU9dGhpcy5sYXllci50aXRsZTtoLmdldExvZ2dlcihFKS53YXJuKFwiZXh0cmFjdENoYW5nZXM6dGltZW91dFwiLGUsYCR7ZX0gY291bGQgbm90IG9idGFpbiBlZGl0ZWQgZmVhdHVyZXMgdGhhdCBhcmUgbm90IGNhY2hlZCBpbiB0aGUgc2NlbmUgc2VydmljZS4gRGlzcGxheSBvZiBmZWF0dXJlcyBtYXkgbm90IGJlIHVwIHRvIGRhdGUgd2l0aCB0aGUgbGF0ZXN0IGVkaXRzLiBDb25zaWRlciByZS1jYWNoaW5nIHRoZSBzY2VuZSBzZXJ2aWNlLmApfWlmKGMub2smJjE9PT1jLnZhbHVlLmRhdGE/LmVkaXRzPy5sZW5ndGgpe2NvbnN0IHQ9Yy52YWx1ZS5kYXRhLmVkaXRzWzBdLHI9dD8ub2JqZWN0SWRzLGk9dD8uZmllbGRVcGRhdGVzLG89cj8uYWRkcz8/W10sbj1yPy51cGRhdGVzPz9bXSxkPXI/LmRlbGV0ZXM/P1tdLGg9Wy4uLm8sLi4ubiwuLi5kXSxsPWE/Wy4uLm8sLi4uaT8/biwuLi5kXTpbXSx1PU1hdGgubWluKHRoaXMuX21heGltdW1OdW1iZXJPZkVkaXRPVmVycmlkZXMsaC5sZW5ndGgpO3U8aC5sZW5ndGgmJih0aGlzLl93YXJuTWF4aW11bUNoYW5nZWRPYmplY3RzRXhjZWVkZWQ9ITApO2NvbnN0IG09aC5zb3J0KCgoZSx0KT0+ZS10KSk7Zm9yKGxldCBlPTA7ZTx1OysrZSl7Y29uc3QgdD1tW2VdO3RoaXMuX2F0dHJpYnV0ZUNoYW5nZWRPYmplY3RJZHMuYWRkKHQpfWZvcihjb25zdCBlIG9mIGwpdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzLmFkZChlKTtpZih0aGlzLmlzM0RPRkwmJkEoKSYmdGhpcy5fZ2VvbWV0cnlDaGFuZ2VkT2JqZWN0SWRzLnNpemU+MCl7Y29uc3QgdD1hd2FpdCB0aGlzLl9xdWVyeUdlb21ldHJ5T3ZlcnJpZGVzRnJvbUFzc29jaWF0ZWRMYXllcihBcnJheS5mcm9tKHRoaXMuX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkcyksZSk7aWYobnVsbCE9dClmb3IoY29uc3QgZSBvZiB0KW51bGwhPWUuZ2VvbWV0cnkmJnRoaXMudXBkYXRlR2VvbWV0cnkoZS5hdHRyaWJ1dGVzW3Mub2JqZWN0SWRGaWVsZF0sZS5nZW9tZXRyeSl9fX1fZ2V0RmV0Y2hDaGFuZ2VkT2JqZWN0SWRzU2VydmVyR2VuKCl7Y29uc3QgZT10aGlzLmxheWVyO2lmKG51bGwhPWUuc2VydmljZVVwZGF0ZVRpbWVTdGFtcD8ubGFzdFVwZGF0ZSlyZXR1cm4gZS5zZXJ2aWNlVXBkYXRlVGltZVN0YW1wLmxhc3RVcGRhdGU7Y29uc3QgdD1lLmFzc29jaWF0ZWRMYXllcjtyZXR1cm4gbnVsbCE9dD8uc2VydmVyR2Vucz8ubWluU2VydmVyR2VuP3Quc2VydmVyR2Vucy5taW5TZXJ2ZXJHZW46bnVsbH1hc3luYyBfbG9ja0ZlYXR1cmVJZHMoZSl7Y29uc3QgdD10aGlzLl9mZWF0dXJlSWRMb2NrcztsZXQgcj0hMDtmb3IoO3I7KXtjb25zdCBzPW5ldyBBcnJheTtmb3IoY29uc3QgciBvZiBlKXtjb25zdCBlPXQuZ2V0KHIpO2UmJnMucHVzaChlKX0wPT09cy5sZW5ndGg/cj0hMTphd2FpdCBQcm9taXNlLmFsbChzKX1jb25zdCBzPWcoKSxpPXMucHJvbWlzZTtmb3IoY29uc3QgbyBvZiBlKXQuc2V0KG8saSk7cmV0dXJuIGMoKCgpPT57Zm9yKGNvbnN0IHIgb2YgZSl0LmRlbGV0ZShyKTtzLnJlc29sdmUoKX0pKX1nZXQgdGVzdCgpe2NvbnN0IGU9QXJyYXkuZnJvbSh0aGlzLl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzKSx0PXRoaXMuX3BlbmRpbmdGZXRjaENoYW5nZWRPYmplY3RJZHMscj10aGlzO3JldHVybntjaGFuZ2VkT2JqZWN0SWRzOmUscGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkczp0LGdldCBtYXhpbXVtTnVtYmVyT2ZFZGl0T1ZlcnJpZGVzKCl7cmV0dXJuIHIuX21heGltdW1OdW1iZXJPZkVkaXRPVmVycmlkZXN9LHNldCBtYXhpbXVtTnVtYmVyT2ZFZGl0T1ZlcnJpZGVzKGUpe3IuX21heGltdW1OdW1iZXJPZkVkaXRPVmVycmlkZXM9ZX19fX07ZShbYih7Y29uc3RydWN0T25seTohMH0pXSxTLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLGUoW2Ioe2NvbnN0cnVjdE9ubHk6ITB9KV0sUy5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbYih7cmVhZE9ubHk6ITB9KV0sUy5wcm90b3R5cGUsXCJpczNET0ZMXCIsbnVsbCksZShbYigpXSxTLnByb3RvdHlwZSxcIl9pbnRlcmFjdGl2ZUVkaXRpbmdTZXNzaW9uc1wiLHZvaWQgMCksZShbYih7cmVhZE9ubHk6ITB9KV0sUy5wcm90b3R5cGUsXCJzb3J0ZWRHZW9tZXRyeUNoYW5nZWRPYmplY3RJZHNcIixudWxsKSxlKFtiKHtyZWFkT25seTohMH0pXSxTLnByb3RvdHlwZSxcImdlb21ldHJ5T3ZlcnJpZGVzXCIsdm9pZCAwKSxlKFtiKCldLFMucHJvdG90eXBlLFwiX2NsaWVudEdlb21ldHJ5Q2FjaGVcIix2b2lkIDApLGUoW2IoKV0sUy5wcm90b3R5cGUsXCJfYXNzb2NpYXRlZExheWVyXCIsbnVsbCksZShbYigpXSxTLnByb3RvdHlwZSxcIl9hc3NvY2lhdGVkTGF5ZXJWaWV3XCIsdm9pZCAwKSxlKFtiKHtjb25zdHJ1Y3RPbmx5OiEwfSldLFMucHJvdG90eXBlLFwibWVtb3J5Q29udHJvbGxlclwiLHZvaWQgMCksZShbYigpXSxTLnByb3RvdHlwZSxcIl9hdHRyaWJ1dGVDaGFuZ2VkT2JqZWN0SWRzXCIsdm9pZCAwKSxlKFtiKCldLFMucHJvdG90eXBlLFwiX2dlb21ldHJ5Q2hhbmdlZE9iamVjdElkc1wiLHZvaWQgMCksZShbYigpXSxTLnByb3RvdHlwZSxcImhhc0dlb21ldHJ5Q2hhbmdlc1wiLG51bGwpLGUoW2IoKV0sUy5wcm90b3R5cGUsXCJfcGVuZGluZ0ZldGNoQ2hhbmdlZE9iamVjdElkc1wiLHZvaWQgMCksZShbYigpXSxTLnByb3RvdHlwZSxcIl9wZW5kaW5nRmV0Y2hBYm9ydENvbnRyb2xsZXJcIix2b2lkIDApLGUoW2IoKV0sUy5wcm90b3R5cGUsXCJfZGVmaW5pdGlvbkV4cHJlc3Npb25cIixudWxsKSxlKFtiKCldLFMucHJvdG90eXBlLFwidXBkYXRpbmdcIixudWxsKSxlKFtiKCldLFMucHJvdG90eXBlLFwiaXNFbXB0eVwiLG51bGwpLFM9ZShbXyhFKV0sUyk7Y2xhc3MgRHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMub2JqZWN0SWQ9ZSx0aGlzLl9yZW1vdmU9dCx0aGlzLl91cGRhdGVzPW5ldyBNYXAsdGhpcy5faXNBY3RpdmU9ITB9Z2V0QXR0cmlidXRlKGUpe3JldHVybiB0aGlzLl91cGRhdGVzLmdldChlKX1zZXRBdHRyaWJ1dGUoZSx0KXt0aGlzLmlzQWN0aXZlJiZ0aGlzLl91cGRhdGVzLnNldChlLHQpfXJlbW92ZSgpe3RoaXMuaXNBY3RpdmUmJih0aGlzLl9pc0FjdGl2ZT0hMSx0aGlzLl9yZW1vdmUoKSl9Z2V0IGlzQWN0aXZlKCl7cmV0dXJuIHRoaXMuX2lzQWN0aXZlfX1jb25zdCBHPTFlNCxWPTVlNDtleHBvcnR7UyBhcyBJM1NPdmVycmlkZXN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtvbkFib3J0T3JUaHJvdyBhcyBlLGFsd2F5cyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7Y2xhc3Mgcntjb25zdHJ1Y3RvcihlLHQpe3RoaXMuX3JlcXVlc3Rlcj1lLHRoaXMuX2FwaUtleT10LHRoaXMuX2FjdGl2ZVJlcXVlc3RzPW5ldyBTZXR9Z2V0IGJ1c3koKXtyZXR1cm4gdGhpcy5fcmVxdWVzdGVyLmJ1c3l9cmVxdWVzdChyLHMsbyl7Y29uc3QgbD1uZXcgQWJvcnRDb250cm9sbGVyLGE9ZShvLCgoKT0+bC5hYm9ydCgpKSksbj17c2lnbmFsOmwuc2lnbmFsLHF1ZXJ5Ont0b2tlbjp0aGlzLl9hcGlLZXl9fSxpPXRoaXMuX3JlcXVlc3Rlci5yZXF1ZXN0KHIscyxuKSx1PXtyZXNwb25zZTppLGFib3J0Q29udHJvbGxlcjpsLGFib3J0SGFuZGxlOmF9O3JldHVybiB0aGlzLl9hY3RpdmVSZXF1ZXN0cy5hZGQodSksdChpLCgoKT0+e3UuYWJvcnRDb250cm9sbGVyPW51bGwsdS5hYm9ydEhhbmRsZT8ucmVtb3ZlKCksdS5hYm9ydEhhbmRsZT1udWxsLHRoaXMuX2FjdGl2ZVJlcXVlc3RzLmRlbGV0ZSh1KX0pKSxpfWNhbmNlbEFsbCgpe3RoaXMuX2FjdGl2ZVJlcXVlc3RzLmZvckVhY2goKGU9PntlLmFib3J0Q29udHJvbGxlcj8uYWJvcnQoKSxlLmFib3J0Q29udHJvbGxlcj1udWxsLGUuYWJvcnRIYW5kbGU/LnJlbW92ZSgpfSkpLHRoaXMuX2FjdGl2ZVJlcXVlc3RzLmNsZWFyKCl9fWV4cG9ydHtyIGFzIEkzU1N0cmVhbURhdGFDb250cm9sbGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7YSBhcyBlLG8gYXMgdCxsIGFzIGksaSBhcyBzLGogYXMgcixtIGFzIG4sZiBhcyBvLGcgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtjIGFzIGh9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnR7Y31mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjNC5qc1wiO2ltcG9ydHtnZXRSZWZlcmVuY2VFbGxpcHNvaWQgYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9lbGxpcHNvaWRVdGlscy5qc1wiO2ltcG9ydHtnZXRTcGhlcmljYWxQQ1BGIGFzIG19ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3BhdGlhbFJlZmVyZW5jZUVsbGlwc29pZFV0aWxzLmpzXCI7aW1wb3J0e3Byb2plY3RCb3VuZGluZ1NwaGVyZSBhcyBwfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJvdW5kaW5nU3BoZXJlLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBfLGZyb21NYXRyaXggYXMgdSxpbnRlcnNlY3RzU3BoZXJlIGFzIGR9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9mcnVzdHVtLmpzXCI7aW1wb3J0e2lzUGxhdGVDYXJyZWUgYXMgZ31mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydHt3IGFzIHZ9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3NwaGVyZS5qc1wiO2ltcG9ydHttYWtlRGVoeWRyYXRlZFBvaW50IGFzIGJ9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRQb2ludC5qc1wiO2ltcG9ydHtldmFsdWF0ZUVsZXZhdGlvbkFsaWdubWVudEF0UG9pbnQgYXMgeH1mcm9tXCIuLi9ncmFwaGljcy9lbGV2YXRpb25BbGlnbm1lbnRVdGlscy5qc1wiO2ltcG9ydHtFbGV2YXRpb25Db250ZXh0IGFzIGZ9ZnJvbVwiLi4vZ3JhcGhpY3MvRWxldmF0aW9uQ29udGV4dC5qc1wiO2ltcG9ydHtjcmVhdGVDb250ZXh0V2l0aG91dEV4cHJlc3Npb25TdXBwb3J0IGFzIE0sZXh0cmFjdEV4cHJlc3Npb25JbmZvIGFzIFJ9ZnJvbVwiLi4vZ3JhcGhpY3MvZmVhdHVyZUV4cHJlc3Npb25JbmZvVXRpbHMuanNcIjtpbXBvcnR7ZXhwYW5kRWxldmF0aW9uUmFuZ2UgYXMgQ31mcm9tXCIuL0VsZXZhdGlvblJhbmdlLmpzXCI7aW1wb3J0e0xvZE1ldHJpYyBhcyBEfWZyb21cIi4vSTNTTm9kZS5qc1wiO2ltcG9ydHtpc1ZhbGlkTWJzIGFzIFMsaXNWYWxpZE9iYiBhcyBFLHRyYW5zZm9ybU9iYiBhcyBQLGludGVyc2VjdEJvdW5kaW5nUmVjdFdpdGhNYnMgYXMgTyxNYnNJbnRlcnNlY3RSZXN1bHQgYXMgTH1mcm9tXCIuL0kzU1V0aWwuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGosY29tcHV0ZU9mZnNldE9iYiBhcyBCLGlzVmlzaWJsZSBhcyBGfWZyb21cIi4uLy4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2NvbnN0IHk9MWU1O2NsYXNzIEl7Y29uc3RydWN0b3IoZSx0LGkscyxyLG4sbyxhLGM9e30pe3RoaXMuX2luZGV4U1I9ZSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXI9dCx0aGlzLl9jbGlwcGluZ0FyZWE9cix0aGlzLl9lbGV2YXRpb25Qcm92aWRlcj1uLHRoaXMuX3ZpZXdpbmdNb2RlPW8sdGhpcy5fb3B0aW9ucz1jLHRoaXMuX2ZydXN0dW09XygpLHRoaXMuX3VzZUZydXN0dW1DdWxsaW5nPSExLHRoaXMuX3BvaT1oKCksdGhpcy5fZWxldmF0aW9uQ29udGV4dD1udWxsLHRoaXMubWluRGlzdGFuY2U9MS8wLHRoaXMubWF4RGlzdGFuY2U9MCx0aGlzLm1heExvZExldmVsPTIsdGhpcy5fdG1wT2JiPWooKSx0aGlzLl90bXAxPWgoKSx0aGlzLl90bXAyPWgoKSx0aGlzLl90bXAzPWgoKSx0aGlzLl90bXAwPWgoKSx0aGlzLl9zY3JlZW5zcGFjZUVycm9yQmlhcz1jLnNjcmVlbnNwYWNlRXJyb3JCaWFzfHwxLHRoaXMuX3Byb2dyZXNzaXZlTG9hZEZhY3Rvcj1jLnByb2dyZXNzaXZlTG9hZEZhY3Rvcnx8MSx0aGlzLnVwZGF0ZUNhbWVyYShpLHMpLHRoaXMuZW5naW5lU1I9dGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy51cGRhdGVFbGV2YXRpb25JbmZvKGEpLHRoaXMuX3RtcFBvaW50PWIoMCwwLDAsZSksdGhpcy5faXNFQ0VGT0JCSW5Mb2NhbE1vZGU9dGhpcy5faW5kZXhTUi5pc1dHUzg0JiYodGhpcy5lbmdpbmVTUi5pc1dlYk1lcmNhdG9yfHxnKHRoaXMuZW5naW5lU1IpKSx0aGlzLl9pbmRleFNSRWxsaXBzb2lkUmFkaXVzPWwodGhpcy5faW5kZXhTUikucmFkaXVzfXVwZGF0ZUVsZXZhdGlvbkluZm8oZSl7bnVsbCE9ZT8odGhpcy5fZWxldmF0aW9uQ29udGV4dD1mLmZyb21FbGV2YXRpb25JbmZvKGUpLHRoaXMuX2VsZXZhdGlvbkNvbnRleHQudXBkYXRlRmVhdHVyZUV4cHJlc3Npb25JbmZvQ29udGV4dChNKFIoZSwhMSkpKSk6dGhpcy5fZWxldmF0aW9uQ29udGV4dD1udWxsfXVwZGF0ZUNhbWVyYShlLHQpe3RoaXMuX3VzZUZydXN0dW1DdWxsaW5nPXQsdCYmdShlLnZpZXdNYXRyaXgsZS5wcm9qZWN0aW9uTWF0cml4LHRoaXMuX2ZydXN0dW0pLHRoaXMuX3NjcmVlblNpemVGYWN0b3I9MS8oZS5wZXJTY3JlZW5QaXhlbFJhdGlvLzIpLHRoaXMuX2NhbVBvcz1lLmV5ZSx0aGlzLm1pbkRpc3RhbmNlPTEvMCx0aGlzLm1heERpc3RhbmNlPTB9c2V0UG9pbnRPZkludGVyZXN0KGUpe3RoaXMuX3BvaT1lfXVwZGF0ZVNjcmVlblNwYWNlRXJyb3JCaWFzKGUpe2NvbnN0IHQ9dGhpcy5fc2NyZWVuc3BhY2VFcnJvckJpYXM7cmV0dXJuIHRoaXMuX3NjcmVlbnNwYWNlRXJyb3JCaWFzPWUsdH11cGRhdGVDbGlwcGluZ0FyZWEoZSl7dGhpcy5fY2xpcHBpbmdBcmVhPWV9ZXhwYW5kRWxldmF0aW9uUmFuZ2UoZSx0LGkpe2lmKG51bGw9PXRoaXMuX2VsZXZhdGlvbkNvbnRleHQpcmV0dXJuO2NvbnN0IHM9ZS5tYnM7aWYoIXMpcmV0dXJuO2lmKHRoaXMuX2VsZXZhdGlvblByb3ZpZGVyLmdldFNwaGVyZUVsZXZhdGlvbkJvdW5kcyl7Y29uc3QgZT10aGlzLl9lbGV2YXRpb25Qcm92aWRlci5nZXRTcGhlcmVFbGV2YXRpb25Cb3VuZHMocyx0aGlzLl9pbmRleFNSKTtyZXR1cm4gdm9pZChlJiZDKGksZS5taW4sZS5tYXgpKX1jb25zdCByPXNbMF0sbj1zWzFdLG89c1syXSxhPVwicmVsYXRpdmUtdG8tc2NlbmVcIj09PXRoaXMuX2VsZXZhdGlvbkNvbnRleHQubW9kZT9cInNjZW5lXCI6XCJncm91bmRcIixoPXRoaXMuX2VsZXZhdGlvblByb3ZpZGVyLmdldEVsZXZhdGlvbihyLG4sbyx0aGlzLl9pbmRleFNSLGEpO2gmJkMoaSxoLGgpO2NvbnN0IGM9dD9udWxsOnRoaXMuX2VsZXZhdGlvblByb3ZpZGVyLmdldFJvb3RFbGV2YXRpb25Cb3VuZHM/LigpO2MmJkMoaSxjLm1pbixjLm1heCl9Z2V0UmVuZGVyTWJzKGUpe2NvbnN0IHQ9ZS5yZW5kZXJNYnM7aWYoUyh0KSlyZXR1cm4gdDtlLm1icyYmYyh0LGUubWJzKTtjb25zdCBpPWUuZWxldmF0aW9uUmFuZ2VNaW47aWYodGhpcy5fZWxldmF0aW9uQ29udGV4dCYmTnVtYmVyLmlzRmluaXRlKGkpKXtsZXQgcz0wLHI9MDtjb25zdCBuPWUuZWxldmF0aW9uUmFuZ2VNYXg7c3dpdGNoKHRoaXMuX2VsZXZhdGlvbkNvbnRleHQubW9kZSl7Y2FzZVwicmVsYXRpdmUtdG8tZ3JvdW5kXCI6cz10aGlzLl9lbGV2YXRpb25Db250ZXh0Lmdlb21ldHJ5WldpdGhPZmZzZXQodFsyXSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIpK2ktdFsyXSxyPW4taTticmVhaztjYXNlXCJvbi10aGUtZ3JvdW5kXCI6cz1pLXRbMl0scj1uLWl9dFsyXSs9cysuNSpyLHRbM10rPS41KnJ9ZWxzZSB0aGlzLl9lbGV2YXRpb25Db250ZXh0JiZ0WzNdPHkmJih0aGlzLl90bXBQb2ludC54PXRbMF0sdGhpcy5fdG1wUG9pbnQueT10WzFdLHRoaXMuX3RtcFBvaW50Lno9dFsyXSx0WzJdPXgodGhpcy5fdG1wUG9pbnQsdGhpcy5fZWxldmF0aW9uUHJvdmlkZXIsdGhpcy5fZWxldmF0aW9uQ29udGV4dCx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIpKTtyZXR1cm4gcCh0LHRoaXMuX2luZGV4U1IsdCx0aGlzLmVuZ2luZVNSKSx0fV9nZXRWaXNpYmlsaXR5T2JiKGUpe2lmKG51bGwhPWUudmlzaWJpbGl0eU9iYilyZXR1cm4gZS52aXNpYmlsaXR5T2JiO2NvbnN0IHQ9ZS5zZXJ2aWNlT2JiLGk9LjAxKnRoaXMuX2luZGV4U1JFbGxpcHNvaWRSYWRpdXM7cmV0dXJuIG51bGw9PXR8fCFlLm1ic3x8IUUodCl8fHRoaXMuX2lzRUNFRk9CQkluTG9jYWxNb2RlJiZ0LmhhbGZTaXplLnNvbWUoKGU9PmU+aSkpP251bGw6KGUuc2VydmljZU9iYkluUmVuZGVyU1I9dGhpcy5fY29tcHV0ZVJlbmRlck9iYih0LGUuc2VydmljZU9iYkluUmVuZGVyU1IsZS5tYnNbM10sZS5lbGV2YXRpb25SYW5nZU1pbixlLmVsZXZhdGlvblJhbmdlTWF4KSxlLnNlcnZpY2VPYmJJblJlbmRlclNSKX1fY29tcHV0ZVJlbmRlck9iYihlLHQsaSxzLHIpe2lmKG51bGw9PXQpdD1qKCk7ZWxzZSBpZihFKHQpKXJldHVybiB0O2xldCBuPTAsbz0wO2lmKHRoaXMuX2VsZXZhdGlvbkNvbnRleHQmJiFOdW1iZXIuaXNOYU4ocykmJk51bWJlci5pc0Zpbml0ZShzKSlzd2l0Y2godGhpcy5fZWxldmF0aW9uQ29udGV4dC5tb2RlKXtjYXNlXCJyZWxhdGl2ZS10by1ncm91bmRcIjpuPXRoaXMuX2VsZXZhdGlvbkNvbnRleHQuZ2VvbWV0cnlaV2l0aE9mZnNldChlLmNlbnRlclsyXSx0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIpK3MtZS5jZW50ZXJbMl0sbz1yLXM7YnJlYWs7Y2FzZVwib24tdGhlLWdyb3VuZFwiOm49cy1lLmNlbnRlclsyXSxvPXItc31lbHNlIHRoaXMuX2VsZXZhdGlvbkNvbnRleHQmJmk8eSYmKHRoaXMuX3RtcFBvaW50Lng9ZS5jZW50ZXJbMF0sdGhpcy5fdG1wUG9pbnQueT1lLmNlbnRlclsxXSx0aGlzLl90bXBQb2ludC56PWUuY2VudGVyWzJdLG49eCh0aGlzLl90bXBQb2ludCx0aGlzLl9lbGV2YXRpb25Qcm92aWRlcix0aGlzLl9lbGV2YXRpb25Db250ZXh0LHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlciktZS5jZW50ZXJbMl0pO3JldHVybiBvPjA/KFAoZSx0aGlzLl9pbmRleFNSLHRoaXMuX3RtcE9iYix0aGlzLmVuZ2luZVNSLG4pLEIodGhpcy5fdG1wT2JiLDAsbyx0aGlzLl92aWV3aW5nTW9kZSx0KSk6UChlLHRoaXMuX2luZGV4U1IsdCx0aGlzLmVuZ2luZVNSLG4pLHR9aXNOb2RlVmlzaWJsZShlKXtjb25zdCB0PXRoaXMuZ2V0UmVuZGVyTWJzKGUpO2lmKCF0aGlzLl9pc01CU2luQ2xpcHBpbmdBcmVhKHQpKXJldHVybiExO2lmKCF0aGlzLl91c2VGcnVzdHVtQ3VsbGluZylyZXR1cm4hMDtjb25zdCBpPXRoaXMuX2dldFZpc2liaWxpdHlPYmIoZSk7cmV0dXJuIGk/RihpLHRoaXMuX2ZydXN0dW0pOmQodGhpcy5fZnJ1c3R1bSx2KHQpKX1pc0dlb21ldHJ5VmlzaWJsZShlKXtpZighdGhpcy5fdXNlRnJ1c3R1bUN1bGxpbmcpcmV0dXJuITA7Y29uc3QgdD1lLmdlb21ldHJ5T2JiO3JldHVybiBudWxsIT10P0YodCx0aGlzLl9mcnVzdHVtKTp0aGlzLmlzTm9kZVZpc2libGUoZSl9X2lzTUJTaW5DbGlwcGluZ0FyZWEoZSl7cmV0dXJuIG51bGw9PXRoaXMuX2NsaXBwaW5nQXJlYXx8Tyh0aGlzLl9jbGlwcGluZ0FyZWEsZSkhPT1MLk9VVFNJREV9X3NjcmVlblNwYWNlRGlhbWV0ZXJNYnModCxpKXtjb25zdCBzPXRoaXMuZ2V0UmVuZGVyTWJzKHQpLHI9TWF0aC5zcXJ0KGUocyx0aGlzLl9jYW1Qb3MpKSxuPXItc1szXTtyZXR1cm4gdGhpcy5fdXBkYXRlTWluTWF4RGlzdGFuY2UociksbjwwPy41Kk51bWJlci5NQVhfVkFMVUU6aS9uKnRoaXMuX3NjcmVlblNpemVGYWN0b3J9Y2FsY0NhbWVyYURpc3RhbmNlKGUpe3JldHVybiB0aGlzLmNhbGNDYW1lcmFEaXN0YW5jZVRvQ2VudGVyKGUpLXRoaXMuZ2V0UmVuZGVyTWJzKGUpWzNdfWNhbGNDYW1lcmFEaXN0YW5jZVRvQ2VudGVyKGUpe2NvbnN0IGk9dGhpcy5nZXRSZW5kZXJNYnMoZSkscz10KGksdGhpcy5fY2FtUG9zKTtyZXR1cm4gdGhpcy5fdXBkYXRlTWluTWF4RGlzdGFuY2Uocyksc31jYWxjQW5nbGVEZXBlbmRlbnRMb0QoZSl7Y29uc3Qgcz10aGlzLmdldFJlbmRlck1icyhlKSxyPXNbM10sbj0oTWF0aC5hYnMoc1swXSooc1swXS10aGlzLl9jYW1Qb3NbMF0pK3NbMV0qKHNbMV0tdGhpcy5fY2FtUG9zWzFdKStzWzJdKihzWzJdLXRoaXMuX2NhbVBvc1syXSkpL2kocykrcikvdChzLHRoaXMuX2NhbVBvcyk7cmV0dXJuIE1hdGgubWluKDEsbil9aGFzTE9EKGUpe3JldHVybiBlLmxvZE1ldHJpYyE9PUQuTm9uZX1fZ2V0RGlzdGFuY2VQbGFuYXJNb2RlKGUsdCl7Y29uc3QgaT1lWzBdLXRbMF0scz1lWzFdLXRbMV0scj1lWzJdLXRbMl0sbj1pKmkrcypzLG89dFszXTtpZihuPD1vKm8pcmV0dXJuIE1hdGguYWJzKHIpO2NvbnN0IGE9TWF0aC5zcXJ0KG4pLW87cmV0dXJuIE1hdGguc3FydChyKnIrYSphKX1fZ2V0RGlzdGFuY2VHbG9iZU1vZGUoaCxjKXtjb25zdCBsPWkoYyksbT1pKGgpLWw7cyh0aGlzLl90bXAwLGgscihoLGMpL24oaCkpO2NvbnN0IHA9ZShjLHRoaXMuX3RtcDApLF89Y1szXTtpZihwPD1fKl8pcmV0dXJuIE1hdGguYWJzKG0pO3tjb25zdCBlPXModGhpcy5fdG1wMCxjLDEvbCksbj1sLHA9XypfLzIvbix1PXModGhpcy5fdG1wMSxlLG4tcCksZD1oLGc9byh0aGlzLl90bXAyLGQsdSksdj1vKHRoaXMuX3RtcDIsZyxzKHRoaXMuX3RtcDMsZSxyKGUsZykpKSxiPWEodGhpcy5fdG1wMix1LHModGhpcy5fdG1wMix2LF8vaSh2KSkpO2xldCB4PXQoZCxiKTtpZihtPj0yZTUpe2NvbnN0IHQ9byh0aGlzLl90bXAxLGQsYik7bGV0IHM9cih0LGUpL2kodCk7czwuMDgmJihzPTFlLTQpLHgvPXN9cmV0dXJuIHh9fV9nZXREaXN0YW5jZShlLHQpe3JldHVybiB0aGlzLmVuZ2luZVNSPT09bSh0aGlzLmVuZ2luZVNSKT90aGlzLl9nZXREaXN0YW5jZUdsb2JlTW9kZShlLHQpOnRoaXMuX2dldERpc3RhbmNlUGxhbmFyTW9kZShlLHQpfV91cGRhdGVNaW5NYXhEaXN0YW5jZShlKXtlPjA/KHRoaXMubWluRGlzdGFuY2U9TWF0aC5taW4odGhpcy5taW5EaXN0YW5jZSxlKSx0aGlzLm1heERpc3RhbmNlPU1hdGgubWF4KHRoaXMubWF4RGlzdGFuY2UsZSkpOih0aGlzLm1pbkRpc3RhbmNlPTAsdGhpcy5tYXhEaXN0YW5jZT1NYXRoLm1heCh0aGlzLm1heERpc3RhbmNlLC1lKSl9Z2V0TG9kTGV2ZWwoZSl7aWYoZS5sb2RNZXRyaWM9PT1ELk5vbmUpcmV0dXJuIDA7aWYoMD09PWUuY2hpbGRDb3VudClyZXR1cm4gdGhpcy5tYXhMb2RMZXZlbDtpZih0aGlzLl91c2VGcnVzdHVtQ3VsbGluZyYmdGhpcy5fcHJvZ3Jlc3NpdmVMb2FkRmFjdG9yPDEpe2NvbnN0IHQ9dGhpcy5fcHJvZ3Jlc3NpdmVMb2FkRmFjdG9yKnRoaXMuX3NjcmVlbnNwYWNlRXJyb3JCaWFzLGk9dGhpcy5fc2NyZWVuc3BhY2VFcnJvckJpYXM7cmV0dXJuIHRoaXMuZXZhbHVhdGVMT0RtZXRyaWMoZSx0KT90aGlzLmV2YWx1YXRlTE9EbWV0cmljKGUsaSk/MjoxOjB9cmV0dXJuIHRoaXMuZXZhbHVhdGVMT0RtZXRyaWMoZSx0aGlzLl9zY3JlZW5zcGFjZUVycm9yQmlhcyk/dGhpcy5tYXhMb2RMZXZlbDowfWV2YWx1YXRlTE9EbWV0cmljKGUsdCl7c3dpdGNoKGUubG9kTWV0cmljKXtjYXNlIEQuU2NyZWVuU3BhY2VSZWxhdGl2ZTp7Y29uc3QgaT10aGlzLmdldFJlbmRlck1icyhlKSxzPXRoaXMuX2dldERpc3RhbmNlKHRoaXMuX2NhbVBvcyxpKSxyPTIqcy90aGlzLl9zY3JlZW5TaXplRmFjdG9yLG49cytpWzNdO3JldHVybiB0aGlzLl91cGRhdGVNaW5NYXhEaXN0YW5jZShuKSxlLm1heEVycm9yKnQ8PXJ9Y2FzZSBELk1heFNjcmVlblRocmVzaG9sZDp7bGV0IGk9dGhpcy5fc2NyZWVuU3BhY2VEaWFtZXRlck1icyhlLGUubWJzWzNdKnQpO3JldHVybiB0aGlzLl9vcHRpb25zLmFuZ2xlRGVwZW5kZW50TG9EJiYoaSo9dGhpcy5jYWxjQW5nbGVEZXBlbmRlbnRMb0QoZSkpLGk8ZS5tYXhFcnJvcn1jYXNlIEQuUmVtb3ZlZEZlYXR1cmVEaWFtZXRlcjpyZXR1cm4gdGhpcy5fc2NyZWVuU3BhY2VEaWFtZXRlck1icyhlLGUubWF4RXJyb3IpKnQ8MTA7Y2FzZSBELkRpc3RhbmNlUmFuZ2VGcm9tRGVmYXVsdENhbWVyYTpyZXR1cm4gdGhpcy5jYWxjQ2FtZXJhRGlzdGFuY2UoZSk+ZS5tYXhFcnJvcip0fXJldHVybiExfWRpc3RUb1BPSShlKXtjb25zdCBpPXRoaXMuZ2V0UmVuZGVyTWJzKGUpO3JldHVybiB0KGksdGhpcy5fcG9pKS1pWzNdfWRpc3RDYW1lcmFUb1BPSSgpe3JldHVybiB0KHRoaXMuX2NhbVBvcyx0aGlzLl9wb2kpfX1leHBvcnR7SSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG52YXIgZSxzOyFmdW5jdGlvbihlKXtlW2UuS1RYMj0xXT1cIktUWDJcIixlW2UuQmFzaXM9Ml09XCJCYXNpc1wiLGVbZS5ERFNfUzNUQz00XT1cIkREU19TM1RDXCIsZVtlLlBORz04XT1cIlBOR1wiLGVbZS5KUEc9MTZdPVwiSlBHXCIsZVtlLktUWF9FVEMyPTMyXT1cIktUWF9FVEMyXCJ9KGV8fChlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLkNvbG9yPTFdPVwiQ29sb3JcIixlW2UuTWV0YWxsaWNSb3VnaG5lc3M9Ml09XCJNZXRhbGxpY1JvdWdobmVzc1wiLGVbZS5Ob3JtYWw9NF09XCJOb3JtYWxcIixlW2UuT2NjbHVzaW9uPThdPVwiT2NjbHVzaW9uXCIsZVtlLkVtaXNzaXZlPTE2XT1cIkVtaXNzaXZlXCIsZVtlLkFscGhhTWFzaz0zMl09XCJBbHBoYU1hc2tcIixlW2UuQ29sb3JUZXh0dXJlcz0xOV09XCJDb2xvclRleHR1cmVzXCIsZVtlLkdlb21ldHJ5VGV4dHVyZXM9MzZdPVwiR2VvbWV0cnlUZXh0dXJlc1wiLGVbZS5HZW9tZXRyeVRleHR1cmVzUEJSPTQ0XT1cIkdlb21ldHJ5VGV4dHVyZXNQQlJcIixlW2UuQWxsVGV4dHVyZXM9MzddPVwiQWxsVGV4dHVyZXNcIixlW2UuQWxsVGV4dHVyZXNQQlI9NjNdPVwiQWxsVGV4dHVyZXNQQlJcIn0oc3x8KHM9e30pKTtleHBvcnR7ZSBhcyBUZXh0dXJlRW5jb2RpbmcscyBhcyBUZXh0dXJlVXNhZ2V9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbnZhciBhOyFmdW5jdGlvbihhKXthW2EuRmFkZUluPTBdPVwiRmFkZUluXCIsYVthLkZhZGVPdXQ9MV09XCJGYWRlT3V0XCJ9KGF8fChhPXt9KSk7ZXhwb3J0e2EgYXMgRmFkZURpcmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3JlbGVhc2VNYXliZSBhcyBlfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7aXNQcm9taXNlTGlrZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7Y2xhc3Mgc3tjb25zdHJ1Y3RvcihzLHIpe3RoaXMuX3RleHR1cmVSZXA9cyx0aGlzLmxvYWRQcm9taXNlPW51bGwsdGhpcy5fZGlzcG9zZWQ9ITE7Y29uc3QgaT10aGlzLl90ZXh0dXJlUmVwLmFjcXVpcmUocik7dChpKT8oaS50aGVuKCh0PT57dGhpcy5fZGlzcG9zZWQ/ZSh0KTp0aGlzLl90ZXh0dXJlUmVmPXR9KSksdGhpcy5sb2FkUHJvbWlzZT1pKTp0aGlzLl90ZXh0dXJlUmVmPWl9ZGlzcG9zZSgpe3RoaXMuX3RleHR1cmVSZWY9ZSh0aGlzLl90ZXh0dXJlUmVmKSx0aGlzLl9kaXNwb3NlZD0hMH1nZXQgZ2xUZXh0dXJlKCl7cmV0dXJuIG51bGwhPXRoaXMuX3RleHR1cmVSZWY/dGhpcy5fdGV4dHVyZVJlZi5nbFRleHR1cmU6bnVsbH19ZXhwb3J0e3MgYXMgUmVuZGVyVGV4dHVyZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=