"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_2d_layers_FeatureLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/AggregateGraphic.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/AggregateGraphic.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let p=class extends _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const r=this.sourceLayer?.featureReduction;return r&&"popupTemplate"in r&&r.popupEnabled?r.popupTemplate:null}getObjectId(){return this.attributes.aggregateId}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:Boolean})],p.prototype,"isAggregate",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.AggregateGraphic")],p);const s=p;


/***/ }),

/***/ "./node_modules/@arcgis/core/core/CircularArray.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/CircularArray.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _EffectView_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EffectView.js */ "./node_modules/@arcgis/core/layers/effects/EffectView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._filter=null,this.duration=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("mapview-transitions-duration"),this._excludedEffectView=new _EffectView_js__WEBPACK_IMPORTED_MODULE_7__.EffectView(e),this._includedEffectView=new _EffectView_js__WEBPACK_IMPORTED_MODULE_7__.EffectView(e)}get excludedEffects(){return this._excludedEffectView.effects}set featureEffect(e){this._get("featureEffect")!==e&&this._transitionTo(e)}get filter(){return this._filter||this.featureEffect?.filter||null}get hasEffects(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}get includedEffects(){return this._includedEffectView.effects}set scale(e){this._set("scale",e),this._excludedEffectView.scale=e,this._includedEffectView.scale=e}get transitioning(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}transitionStep(e,t){this._set("scale",t),this.transitioning?(this._includedEffectView.transitionStep(e,t),this._excludedEffectView.transitionStep(e,t),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=t,this._includedEffectView.scale=t)}endTransitions(){this._includedEffectView.endTransitions(),this._excludedEffectView.endTransitions(),this._filter=null}_transitionTo(e){const t=this._get("featureEffect"),i=e,s=i?.includedEffect,f=i?.excludedEffect,c=this._includedEffectView.canTransitionTo(s)&&this._excludedEffectView.canTransitionTo(f);this._includedEffectView.effect=s,this._excludedEffectView.effect=f,this._set("featureEffect",i),this._filter=i?.filter||t?.filter||null,c||this.endTransitions()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_excludedEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_includedEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"duration",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"excludedEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"featureEffect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"filter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"hasEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"includedEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({value:0})],c.prototype,"scale",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"transitioning",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.layers.effects.FeatureEffectView")],c);const r=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/floorFilterUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFloorFilterClause: () => (/* binding */ o),
/* harmony export */   getLayerFloorFilterClause: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o){const n=o.layer;if("floorInfo"in n&&n.floorInfo?.floorField&&"floors"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return"floorInfo"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>""!==o)).map((o=>`'${o}'`));return l.push("''"),`${n} IN (${l.join(",")}) OR ${n} IS NULL`}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../AggregateGraphic.js */ "./node_modules/@arcgis/core/AggregateGraphic.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends _FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__["default"]{constructor(){super(...arguments),this.features=[]}readFeatures(e,t){const o=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(t.spatialReference),s=[];for(let a=0;a<e.length;a++){const t=e[a],p=_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(t),c=t.geometry?.spatialReference;null==p.geometry||c||(p.geometry.spatialReference=o);const i=t.aggregateGeometries,m=p.aggregateGeometries;if(i&&null!=m)for(const e in m){const r=m[e],t=i[e],s=t?.spatialReference;null==r||s||(r.spatialReference=o)}s.push(p)}return s}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({type:[_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]],json:{write:!0}})],c.prototype,"features",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.reader)("features")],c.prototype,"readFeatures",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.rest.support.AggregateFeatureSet")],c);const i=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/Bitmap.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bitmap: () => (/* binding */ b),
/* harmony export */   isImageSource: () => (/* binding */ f),
/* harmony export */   rasterize: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/vec2f32.js */ "./node_modules/@arcgis/core/chunks/vec2f32.js");
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js");
/* harmony import */ var _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ImageryBitmapSource.js */ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js");
/* harmony import */ var _webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl/contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function f(t){return t&&"render"in t}function w(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.render(e.getContext("2d")),e}function v(t){return f(t)?t instanceof _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_5__["default"]?t.getRenderedRasterPixels()?.renderedRasterPixels:w(t):t}class b extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__.DisplayObject{constructor(t=null,e=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(s,i){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createResolver)();return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(i,(()=>r.abort())),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(r,(t=>h.reject(t))),this._uploadStatus={controller:r,resolver:h},this.source=s,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.transforms.dvs),[s,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,l=d*this.width,c=d*this.height,_=Math.PI*this.rotation/180;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(s,a)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(l/2,c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.r)(e,e,-_),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(-l/2,-c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.l)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(l,c)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const i=v(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:s}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:i,texture:u,width:h,height:o},r),s.resolve(),this._uploadStatus=null}else this._texture.setData(i);this.ready()}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.throwIfNotAbortError)(r)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}_createTexture(t){const e=this.immutable&&t.type===_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_6__.ContextType.WEBGL2,s=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__.TextureDescriptor;return s.internalFormat=e?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.SizedPixelFormat.RGBA8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,s.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE,s.isImmutable=e,s.width=this._sourceWidth,s.height=this._sourceHeight,new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__.Texture(t,s)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/BitmapTile.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/BitmapTile.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BitmapTile: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _Bitmap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Bitmap.js */ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js");
/* harmony import */ var _webgl_TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/TiledDisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _webgl_TiledDisplayObject_js__WEBPACK_IMPORTED_MODULE_2__.TiledDisplayObject{constructor(t,s,r,i,a,n,m=null){super(t,s,r,i,a,n),this.bitmap=new _Bitmap_js__WEBPACK_IMPORTED_MODULE_1__.Bitmap(m),this.bitmap.coordScale=[a,n],this.bitmap.once("isReady",(()=>this.ready()))}destroy(){super.destroy(),this.bitmap.destroy()}beforeRender(t){this.bitmap.beforeRender(t),super.beforeRender(t)}afterRender(t){this.bitmap.afterRender(t),super.afterRender(t)}set stencilRef(t){this.bitmap.stencilRef=t}get stencilRef(){return this.bitmap.stencilRef}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)(),tileMat3:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_0__.c)()}}setTransform(t){super.setTransform(t),this.bitmap.transforms.dvs=this.transforms.dvs}onAttach(){this.bitmap.stage=this.stage}onDetach(){this.bitmap&&(this.bitmap.stage=null)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BitmapTileContainer: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _BitmapTile_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BitmapTile.js */ "./node_modules/@arcgis/core/views/2d/engine/BitmapTile.js");
/* harmony import */ var _brushes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./brushes.js */ "./node_modules/@arcgis/core/views/2d/engine/brushes.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webgl/TileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class n extends _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_4__["default"]{get requiresDedicatedFBO(){return this.children.some((e=>"additive"===e.bitmap.blendFunction))}createTile(r){const t=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_0__.create)(),r),s=this._tileInfoView.getTileResolution(r.level),[n,o]=this._tileInfoView.tileInfo.size;return new _BitmapTile_js__WEBPACK_IMPORTED_MODULE_1__.BitmapTile(r,s,t[0],t[3],n,o)}prepareRenderPasses(e){const i=e.registerRenderPass({name:"bitmap (tile)",brushes:[_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.bitmap],target:()=>this.children.map((e=>e.bitmap)),drawPhase:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(e),i]}doRender(e){this.visible&&e.drawPhase===_webgl_enums_js__WEBPACK_IMPORTED_MODULE_3__.WGLDrawPhase.MAP&&super.doRender(e)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureContainer: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_Queue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Queue.js */ "./node_modules/@arcgis/core/core/Queue.js");
/* harmony import */ var _webgl_AttributeStoreView_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/AttributeStoreView.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/AttributeStoreView.js");
/* harmony import */ var _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./webgl/TileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js");
/* harmony import */ var _webgl_WGLRendererInfo_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webgl/WGLRendererInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLRendererInfo.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o extends _webgl_TileContainer_js__WEBPACK_IMPORTED_MODULE_3__["default"]{constructor(e){super(e),this._rendererInfo=new _webgl_WGLRendererInfo_js__WEBPACK_IMPORTED_MODULE_4__.WGLRendererInfo,this._materialItemsRequestQueue=new _core_Queue_js__WEBPACK_IMPORTED_MODULE_1__["default"],this.attributeView=new _webgl_AttributeStoreView_js__WEBPACK_IMPORTED_MODULE_2__.AttributeStoreView((()=>this.onAttributeStoreUpdate()))}destroy(){this.children.forEach((e=>e.destroy())),this.removeAllChildren(),this.attributeView.destroy(),this._materialItemsRequestQueue.clear()}setRendererInfo(e,t,r){this._rendererInfo.setInfo(e,t,r),this.requestRender()}async getMaterialItems(t,r){if(!t||0===t.length)return[];const s=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createResolver)();return this._materialItemsRequestQueue.push({items:t,abortOptions:r,resolver:s}),this.requestRender(),s.promise}doRender(e){if(e.context.capabilities.enable("textureFloat"),e.context.capabilities.enable("vao"),this._materialItemsRequestQueue.length>0){let t=this._materialItemsRequestQueue.pop();for(;t;)this._processMaterialItemRequest(e,t),t=this._materialItemsRequestQueue.pop()}super.doRender(e)}renderChildren(e){for(const t of this.children)t.commit(e);this._rendererInfo.update(e.state),super.renderChildren(e)}createRenderParams(e){const t=super.createRenderParams(e);return t.rendererInfo=this._rendererInfo,t.attributeView=this.attributeView,t}onAttributeStoreUpdate(){}_processMaterialItemRequest(e,{items:t,abortOptions:r,resolver:s}){const{painter:i,pixelRatio:o}=e,n=t.map((e=>i.textureManager.rasterizeItem(e.symbol,o,e.glyphIds,r)));Promise.all(n).then((e=>{if(!this.stage)return void s.reject();const r=e.map(((e,r)=>({id:t[r].id,mosaicItem:e})));s.resolve(r)}),s.reject)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/BufferPool.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/BufferPool.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferPool: () => (/* binding */ i),
/* harmony export */   TypedBuffer: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./cpuMapped/FreeList.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-log-allocations");class r{constructor(t,e){this._array=t,this._pool=e}get array(){return this._array}get length(){return this._array.length}static create(t,e){const s=e.acquire(t);return new r(s,e)}expand(t){const e=this._pool.acquire(t);e.set(this._array),this._pool.release(this._array),this._array=e}destroy(){this._pool.release(this._array)}set(t,e){this._array.set(t._array,e)}slice(){const t=this._pool.acquire(this._array.byteLength);return t.set(this._array),new r(t,this._pool)}}class a{constructor(){this._data=new ArrayBuffer(a.BYTE_LENGTH),this._freeList=new _cpuMapped_FreeList_js__WEBPACK_IMPORTED_MODULE_2__.FreeList({start:0,end:this._data.byteLength})}static get BYTE_LENGTH(){return 64e6}get buffer(){return this._data}allocate(t){const e=this._freeList.firstFit(t);return null==e?null:new Uint32Array(this._data,e,t/Uint32Array.BYTES_PER_ELEMENT)}free(t){this._freeList.free(t.byteOffset,t.byteLength)}}class i{constructor(){this._bytesAllocated=0,this._pages=[],this._pagesByBuffer=new Map,this._addPage()}destroy(){this._pages=[],this._pagesByBuffer=null}get _bytesTotal(){return this._pages.length*a.BYTE_LENGTH}acquire(e){if(this._bytesAllocated+=e,s&&console.log(`Allocating ${e}, (${this._bytesAllocated} / ${this._bytesTotal})`),e>a.BYTE_LENGTH)return new Uint32Array(e/Uint32Array.BYTES_PER_ELEMENT);for(const t of this._pages){const s=t.allocate(e);if(null!=s)return s}const r=this._addPage().allocate(e);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.assertIsSome)(r,"Expected to allocate page"),r}release(t){this._bytesAllocated-=t.byteLength,s&&console.log(`Freeing ${t.byteLength}, (${this._bytesAllocated} / ${this._bytesTotal})`);const e=this._pagesByBuffer.get(t.buffer);e&&e.free(t)}_addPage(){const t=new a;return this._pages.push(t),this._pagesByBuffer.set(t.buffer,t),t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureTile: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/CircularArray.js */ "./node_modules/@arcgis/core/core/CircularArray.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../chunks/mat2df32.js */ "./node_modules/@arcgis/core/chunks/mat2df32.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Utils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js");
/* harmony import */ var _WGLTile_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./WGLTile.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLTile.js");
/* harmony import */ var _collisions_MetricReader_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./collisions/MetricReader.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/MetricReader.js");
/* harmony import */ var _cpuMapped_Geometry_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./cpuMapped/Geometry.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Geometry.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const h=50,d=4,o=100;let u=0;class c extends _WGLTile_js__WEBPACK_IMPORTED_MODULE_5__.WGLTile{constructor(r,s,i,a,n,h){super(r,s,i,a),this.instanceId=u++,this.patchCount=0,this._renderState={current:{geometry:new Map,metrics:null},next:null,swap:!1,swapFrames:0,locked:!1},this._patches=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_0__["default"](o),this._bufferPatches=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_0__["default"](o),this._lastCommitTime=0,this.transforms.labelMat2d=(0,_chunks_mat2df32_js__WEBPACK_IMPORTED_MODULE_2__.c)(),this._store=n,this._requestLabelUpdate=h}destroy(){super.destroy(),this._renderState.current.geometry.forEach((e=>e.destroy())),null!=this._renderState.next&&this._renderState.next.geometry.forEach((e=>e.destroy())),this._renderState.current=null,this._renderState.next=null}get labelMetrics(){return this._renderState.current.metrics}get hasData(){return!!this._renderState.current.geometry.size}get updateStatus(){return`renderState:${!!this._renderState.current}, ${!!this._renderState.next}, hasData:${this.hasData}, queue:${this._patches.size}`}getGeometry(e){return this._renderState.current.geometry.get(e)}patch(e,t){this.patchCount++,e.clear&&this._patches.size>=h&&this._dropPatches();const r=e,s=r.addOrUpdate&&this.key.id!==r.addOrUpdate.tileKeyOrigin;t&&s?this._bufferPatches.enqueue(r):(r.sort=r.sort&&!t,this._patches.enqueue(r)),this.requestRender()}commit(e){if(this._lastCommitTime!==e.time){this._lastCommitTime=e.time;for(let e=0;e<d;e++)this._updateMesh(),this.isReady&&this._updateBufferMesh();this._renderState.swap&&(this._swapRenderStates(),this.requestRender())}}lock(){this._renderState.locked=!0}unlock(){this._renderState.locked=!1,this._flushUpdates(),this._swap()}_swapRenderStates(){if(this._renderState.next){if(this._renderState.locked)return this._renderState.swap=!0,void this.requestRender();this._renderState.swap=!0,this._swap()}}_swap(){this._renderState.swap&&(this._renderState.swap=!1,null!=this._renderState.next&&(this._renderState.current.geometry.forEach((e=>e.destroy())),this._renderState.current=this._renderState.next,this._renderState.next=null,this._requestLabelUpdate()))}_flushUpdates(){let e=this._patches.maxSize;for(;this._patches.size&&e--;)this._updateMesh(),this._swap()}_updateBufferMesh(){const e=this._bufferPatches.peek();if(null==e||!e.clear||null===this._renderState.next)for(;this._bufferPatches.size;){const e=this._bufferPatches.dequeue();null!=e&&this._patchBuffer(e)}}_updateMesh(){const e=this._patches.dequeue();if(null!=e){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")){const t=e,r=t.addOrUpdate?.tileKeyOrigin,s=this.key.id===r?"SELF":r;let i="";for(let e=0;e<5;e++)i+=t.addOrUpdate?.data[e]?.records?.byteLength?1:0;console.debug(this.key.id,"FeatureTile:patch",`[clear: ${t.clear} origin: ${s}, end:${t.end} data:${i}]`)}!0===e.clear&&(null!=this._renderState.next&&(this._renderState.next.geometry.forEach((e=>e.destroy())),this._renderState.next=null),this._renderState.next={geometry:new Map,metrics:null},(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug(this.key.id,"FeatureTile:_updateMesh - Creating new renderState")),this.requestRender(),this._patch(e),e.end&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug(this.key.id,"FeatureTile:_updateMesh - Encountered end message"),this.ready(),this._swapRenderStates())}}_patch(e){(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.forEachGeometryType)((t=>{this._remove(t,e.remove),this._insert(t,e,!1)}))}_patchBuffer(e){(0,_Utils_js__WEBPACK_IMPORTED_MODULE_4__.forEachGeometryType)((t=>{this._insert(t,e,!0)}))}_insert(e,t,s){try{const i=this._renderState.next??this._renderState.current,a=t.addOrUpdate?.data[e],h=i.geometry;if(null==a)return;h.has(e)||((0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug(this.key.id,`FeatureTile:_insert - Creating geometry buffer ${e}`),h.set(e,new _cpuMapped_Geometry_js__WEBPACK_IMPORTED_MODULE_7__.Geometry(e,this.stage))),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-update-debug")&&console.debug(this.key.id,`FeatureTile:_insert - Inserting into ${e}, version=${t.addOrUpdate?.version} stride=${a.stride}`),h.get(e).insert(a,t.sort,s),e===_enums_js__WEBPACK_IMPORTED_MODULE_3__.WGLGeometryType.LABEL&&this._insertLabelMetrics(t.type,a.metrics,t.clear)}catch(i){}}_insertLabelMetrics(e,t,r){const s=this._renderState.next??this._renderState.current;if(null==t)return;const i=_collisions_MetricReader_js__WEBPACK_IMPORTED_MODULE_6__.MetricReader.from(t);if(null!=s.metrics){if("update"===e){const e=i.getCursor();for(;e.next();)s.metrics.delete(e.id)}s.metrics.link(i)}else s.metrics=i}_remove(e,t){const r=(this._renderState.next??this._renderState.current).geometry.get(e);t&&t.length&&r&&(r.remove(t),this._removeLabelMetrics(t))}_removeLabelMetrics(e){const{metrics:t}=this._renderState.next??this._renderState.current;if(null!=t&&e.length)for(const r of e)for(;t.delete(r););}_dropPatches(){const e=new Array;let t=!1;for(;this._patches.size;){const r=this._patches.dequeue();if(null==r)break;if(r.clear){if(t)break;t=!0}e.push(r)}this._patches.clear(),e.forEach((e=>this._patches.enqueue(e)))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLRendererInfo.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/WGLRendererInfo.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WGLRendererInfo: () => (/* binding */ v)
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/support/lengthUtils.js */ "./node_modules/@arcgis/core/renderers/support/lengthUtils.js");
/* harmony import */ var _Utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Utils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/Utils.js");
/* harmony import */ var _techniques_Technique_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./techniques/Technique.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/techniques/Technique.js");
/* harmony import */ var _techniques_utils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./techniques/utils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/techniques/utils.js");
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../webgl/capabilities.js */ "./node_modules/@arcgis/core/views/webgl/capabilities.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function n(e,t){const i=t.length;if(e<t[0].value||1===i)return t[0].size;for(let s=1;s<i;s++)if(e<t[s].value){const i=(e-t[s-1].value)/(t[s].value-t[s-1].value);return t[s-1].size+i*(t[s].size-t[s-1].size)}return t[i-1].size}class v{constructor(){this.symbolLevels=[],this.vvColorValues=new Float32Array(8),this.vvColors=new Float32Array(32),this.vvOpacityValues=new Float32Array(8),this.vvOpacities=new Float32Array(8),this.vvSizeMinMaxValue=new Float32Array(4),this.outsideLabelsVisible=!1,this._vvMaterialParameters={vvSizeEnabled:!1,vvColorEnabled:!1,vvRotationEnabled:!1,vvRotationType:"geographic",vvOpacityEnabled:!1},this._technique=_techniques_Technique_js__WEBPACK_IMPORTED_MODULE_4__.Technique}getSizeVVFieldStops(e){const t=this._vvSizeFieldStops;if(t)switch(t.type){case"static":return t;case"level-dependent":return t.levels[e]??(()=>{let i=1/0,s=0;for(const o in t.levels){const t=parseFloat(o),a=Math.abs(e-t);a<i&&(i=a,s=t)}if(i===1/0)return{sizes:new Float32Array([0,0,0,0,0,0]),values:new Float32Array([0,0,0,0,0,0])};const a=2**((e-s)/2),l=t.levels[s],r=new Float32Array(l.values);return r[2]*=a,r[3]*=a,{sizes:l.sizes,values:r}})();default:return}}get vvMaterialParameters(){return this._vvMaterialParameters}update(e){null!=this._vvInfo&&this._updateVisualVariables(this._vvInfo.vvRanges,e)}setInfo(e,t,i){this._updateEffects(i),this._vvInfo=t,this._technique=(0,_techniques_utils_js__WEBPACK_IMPORTED_MODULE_5__.getTechniqueFromRenderer)(e),this.rendererSchema=this._technique.createOrUpdateRendererSchema(this.rendererSchema,e)}getVariation(){return{...this._technique.getVariation(this.rendererSchema),outsideLabelsVisible:this.outsideLabelsVisible,supportsTextureFloat:(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_6__.getWebGLCapabilities)("2d").supportsTextureFloat}}getVariationHash(){return this._technique.getVariationHash(this.rendererSchema)<<1|(this.outsideLabelsVisible?1:0)}_updateEffects(e){this.outsideLabelsVisible=null!=e&&e.excludedLabelsVisible}_updateVisualVariables(l,r){const o=this._vvMaterialParameters;if(o.vvOpacityEnabled=!1,o.vvSizeEnabled=!1,o.vvColorEnabled=!1,o.vvRotationEnabled=!1,!l)return;const v=l.size;if(v){if(o.vvSizeEnabled=!0,v.minMaxValue){const t=v.minMaxValue;let i,l;if((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.isDefined)(t.minSize)&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.isDefined)(t.maxSize))if((0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.isNumber)(t.minSize)&&(0,_Utils_js__WEBPACK_IMPORTED_MODULE_3__.isNumber)(t.maxSize))i=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(t.minSize),l=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(t.maxSize);else{const s=r.scale;i=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(n(s,t.minSize.stops)),l=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(n(s,t.maxSize.stops))}this.vvSizeMinMaxValue.set([t.minDataValue,t.maxDataValue,i,l])}if(v.scaleStops&&(this.vvSizeScaleStopsValue=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(n(r.scale,v.scaleStops.stops))),v.unitValue){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_1__.getMetersPerUnitForSR)(r.spatialReference)/_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_2__.meterIn[v.unitValue.unit];this.vvSizeUnitValueToPixelsRatio=e/r.resolution}v.fieldStops&&(this._vvSizeFieldStops=v.fieldStops)}const u=l.color;u&&(o.vvColorEnabled=!0,this.vvColorValues.set(u.values),this.vvColors.set(u.colors));const c=l.opacity;c&&(o.vvOpacityEnabled=!0,this.vvOpacityValues.set(c.values),this.vvOpacities.set(c.opacities));const h=l.rotation;h&&(o.vvRotationEnabled=!0,o.vvRotationType=h.type)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/MetricReader.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/collisions/MetricReader.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MetricReader: () => (/* binding */ e),
/* harmony export */   MetricReaderNode: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=6,s=4294967296;class e{constructor(t){this._savedCursor=null,this._savedOffset=null,this._head=t,this._cursor=t}static from(t){const s=r.from(new Float32Array(t));return new e(s)}get id(){return this._cursor.id}get baseZoom(){return this._cursor.baseZoom}get anchorX(){return this._cursor.anchorX}get anchorY(){return this._cursor.anchorY}get directionX(){return this._cursor.directionX}get directionY(){return this._cursor.directionY}get size(){return this._cursor.size}get materialKey(){return this._cursor.materialKey}get boundsCount(){return this._cursor.boundsCount}computedMinZoom(){return this._cursor.computedMinZoom()}setComputedMinZoom(t){return this._cursor.setComputedMinZoom(t)}boundsComputedAnchorX(t){return this._cursor.boundsComputedAnchorX(t)}boundsComputedAnchorY(t){return this._cursor.boundsComputedAnchorY(t)}setBoundsComputedAnchorX(t,s){return this._cursor.setBoundsComputedAnchorX(t,s)}setBoundsComputedAnchorY(t,s){return this._cursor.setBoundsComputedAnchorY(t,s)}boundsX(t){return this._cursor.boundsX(t)}boundsY(t){return this._cursor.boundsY(t)}boundsWidth(t){return this._cursor.boundsWidth(t)}boundsHeight(t){return this._cursor.boundsHeight(t)}link(t){if(null!=t._head)return this._cursor.link(t._head)}getCursor(){return this.copy()}copy(){const t=new e(this._head?.copy());if(!t._head)return t;let s=t._head,r=t._head._link;for(;r;)s._link=r.copy(),s=r,r=s._link;return t}peekId(){return this._cursor.peekId()??this._cursor._link.peekId()}nextId(){const t=this.id;for(;t===this.id;)if(!this.next())return!1;return!0}save(){this._savedCursor=this._cursor,this._savedOffset=this._cursor._offset}restore(){this._savedCursor&&(this._cursor=this._savedCursor),null!=this._savedOffset&&(this._cursor._offset=this._savedOffset)}next(){if(!this._cursor)return!1;if(!this._cursor.next()){if(!this._cursor._link)return!1;this._cursor=this._cursor._link,this._cursor._offset=0}return!0}lookup(t){for(this._cursor=this._head;this._cursor&&!this._cursor.lookup(t);){if(!this._cursor._link)return!1;this._cursor=this._cursor._link}return!!this._cursor}delete(t){let s=this._head,e=null;for(;s;){if(s.delete(t))return s.isEmpty()&&null!=e&&(e._link=s._link),!0;e=s,s=s._link}return!1}}class r{constructor(t){this._offset=-1,this._link=null,this._count=0,this._deletedCount=0,this._offsets={instance:null},this._buffer=t}static from(t){return new r(new Float32Array(t))}isEmpty(){return this._deletedCount===this.count}get count(){return this._count||(this._count=this._computeCount()),this._count}get id(){return this._buffer[this._offset]}set id(t){this._buffer[this._offset]=t}get baseZoom(){return this._buffer[this._offset+1]}get anchorX(){return this._buffer[this._offset+2]}get anchorY(){return this._buffer[this._offset+3]}get directionX(){return this._buffer[this._offset+4]}get directionY(){return this._buffer[this._offset+5]}get size(){return this._buffer[this._offset+6]}get materialKey(){return this._buffer[this._offset+7]}computedMinZoom(){return this._buffer[this._offset+8]}setComputedMinZoom(t){this._buffer[this._offset+8]=t}get boundsCount(){return this._buffer[this._offset+9]}boundsComputedAnchorX(s){return this._buffer[this._offset+10+s*t]}boundsComputedAnchorY(s){return this._buffer[this._offset+10+s*t+1]}setBoundsComputedAnchorX(s,e){this._buffer[this._offset+10+s*t]=e}setBoundsComputedAnchorY(s,e){this._buffer[this._offset+10+s*t+1]=e}boundsX(s){return this._buffer[this._offset+10+s*t+2]}boundsY(s){return this._buffer[this._offset+10+s*t+3]}boundsWidth(s){return this._buffer[this._offset+10+s*t+4]}boundsHeight(s){return this._buffer[this._offset+10+s*t+5]}link(t){let s=this;for(;s._link;)s=s._link;s._link=t}getCursor(){return this.copy()}copy(){const t=new r(this._buffer);return t._link=this._link,t._offset=this._offset,t._deletedCount=this._deletedCount,t._offsets=this._offsets,t._count=this._count,t}peekId(){const s=this._offset+10+this.boundsCount*t+0;return s>=this._buffer.length?0:this._buffer[s]}next(){let e=0;for(;this._offset<this._buffer.length&&e++<100&&(-1===this._offset?this._offset=0:this._offset+=10+this.boundsCount*t,this.id===s););return this.id!==s&&this._offset<this._buffer.length}delete(t){const s=this._offset,e=this.lookup(t);if(e)for(this.id=4294967295,++this._deletedCount;this.next()&&this.id===t;)this.id=4294967295,++this._deletedCount;return this._offset=s,e}lookup(t){const e=this._offset;if(null==this._offsets.instance){this._offsets.instance=new Map;const t=this.copy();t._offset=-1;let s=0;for(;t.next();)t.id!==s&&(this._offsets.instance.set(t.id,t._offset),s=t.id)}return!!this._offsets.instance.has(t)&&(this._offset=this._offsets.instance.get(t),this.id!==s||(this._offset=e,!1))}_computeCount(){const t=this._offset;let s=0;for(this._offset=-1;this.next();)s++;return this._offset=t,s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Buffer.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Buffer.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Buffer: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _BufferPool_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../BufferPool.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/BufferPool.js");
/* harmony import */ var _FreeList_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./FreeList.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/FreeList.js");
/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../webgl/BufferObject.js */ "./node_modules/@arcgis/core/views/webgl/BufferObject.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const h=1.25,n=32767,u=n<<16|n;class a{constructor(t,e,r,s){const h=_BufferPool_js__WEBPACK_IMPORTED_MODULE_1__.TypedBuffer.create(e*r*Uint32Array.BYTES_PER_ELEMENT,s);this.size=e,this.strideInt=r,this.bufferType=t,this.dirty={start:1/0,end:0},this._gpu=null,this._cpu=h,this.clear()}get elementSize(){return this._cpu.length/this.strideInt}get invalidated(){return this.bufferSize>0&&!this._gpu}get invalidatedComputeBuffer(){return this.bufferSize>0&&!this._gpuComputeTriangles}invalidate(){this._invalidateTriangleBuffer(),this._gpu?.dispose(),this._gpu=null}_invalidateTriangleBuffer(){this._gpuComputeTriangles?.dispose(),this._gpuComputeTriangles=null}destroy(){this._gpu?.dispose(),this._gpuComputeTriangles?.dispose(),this._cpu?.destroy(),this._cpu2?.destroy()}clear(){this.dirty.start=1/0,this.dirty.end=0,this.freeList=new _FreeList_js__WEBPACK_IMPORTED_MODULE_2__.FreeList({start:0,end:this._cpu.length/this.strideInt}),this.fillPointer=0}ensure(t){if(this.maxAvailableSpace()>=t)return;if(t*this.strideInt>this._cpu.length-this.fillPointer){this.invalidate();const i=this._cpu.length/this.strideInt,e=Math.round((i+t)*h),r=e*this.strideInt;this._cpu.expand(r*Uint32Array.BYTES_PER_ELEMENT),this.freeList.free(i,e-i)}}set(t,i){this._cpu.array[t]!==i&&(this._cpu.array[t]=i,this.dirty.start=Math.min(t,this.dirty.start),this.dirty.end=Math.max(t,this.dirty.end))}getGPUBuffer(t,i=!1){if(!this.bufferSize)return null;if(i){if("index"!==this.bufferType)throw new Error("Tired to get triangle buffer, but target is not an index buffer");return null==this._gpuComputeTriangles&&(this._gpuComputeTriangles=this._createComputeBuffer(t)),this._gpuComputeTriangles}return null==this._gpu&&(this._gpu=this._createBuffer(t)),this._gpu}getCPUBuffer(){if(!this._cpu2){const t=this._cpu.slice();this._cpu2=t}return this._cpu2.length!==this._cpu.length&&this._cpu2.expand(this._cpu.length*this._cpu.array.BYTES_PER_ELEMENT),this._cpu2.set(this._cpu),this._cpu2}get bufferSize(){return this._cpu.length/this.strideInt}maxAvailableSpace(){return this.freeList.maxAvailableSpace()}insert(i,e,r,s){const h=r*this.strideInt;if(!h)return 0;const n=e*this.strideInt*Uint32Array.BYTES_PER_ELEMENT,u=new Uint32Array(i,n,h),a=this.freeList.firstFit(r);(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.assertIsSome)(a,"First fit region must be defined");const d=a*this.strideInt,f=h,p=d/this.strideInt-e;if(0!==s)for(let t=0;t<u.length;t++)u[t]+=s;return this._cpu.array.set(u,d),this.dirty.start=Math.min(this.dirty.start,d),this.dirty.end=Math.max(this.dirty.end,d+f),this.fillPointer=Math.max(this.fillPointer,d+f),p}free(t,i,e){const r=t*this.strideInt,s=(t+i)*this.strideInt;if(!0===e)for(let h=t;h!==t+i;h++)this._cpu.array[h*this.strideInt]=u;this.dirty.start=Math.min(this.dirty.start,r),this.dirty.end=Math.max(this.dirty.end,s),this.freeList.free(t,i)}upload(){if(this.dirty.end){if(this._invalidateTriangleBuffer(),null==this._gpu)return this.dirty.start=1/0,void(this.dirty.end=0);this._gpu.setSubData(this._cpu.array,this.dirty.start,this.dirty.start,this.dirty.end),this.dirty.start=1/0,this.dirty.end=0}}_createBuffer(t){const i=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.Usage.DYNAMIC_DRAW;return"index"===this.bufferType?_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__.BufferObject.createIndex(t,i,this._cpu.array):_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__.BufferObject.createVertex(t,i,this._cpu.array)}_createComputeBuffer(t){const i=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.Usage.DYNAMIC_DRAW,e=new Uint32Array(this.fillPointer/3);for(let r=0;r<this.fillPointer;r+=3)e[r/3]=this._cpu.array[r];return _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__.BufferObject.createIndex(t,i,e)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Geometry.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Geometry.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Geometry: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../FeatureDisplayList.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureDisplayList.js");
/* harmony import */ var _Buffer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Buffer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/Buffer.js");
/* harmony import */ var _DisplayRecordReader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./DisplayRecordReader.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/cpuMapped/DisplayRecordReader.js");
/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../webgl/VertexArrayObject.js */ "./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=0,f=1;class o{constructor(e,t){this._vaos=new Map,this._indicesInvalid=!1,this.geometryType=e,this._stage=t}destroy(){for(const[e,t]of this._vaos)t?.disposeVAOOnly();this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.destroyMaybe)(this._indexBuffer),this._vertexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.destroyMaybe)(this._vertexBuffer)}get records(){return this._records}insert(e,t,i){if(!e.records.byteLength)return;const n=e.stride;if(this._vertexBuffer&&this._indexBuffer){const r=e.indices.byteLength/4,i=e.vertices.byteLength/n;this._indexBuffer.ensure(r),this._vertexBuffer.ensure(i);const{vertices:f,indices:o}=e,d=_DisplayRecordReader_js__WEBPACK_IMPORTED_MODULE_3__.DisplayRecordReader.from(e.records),h=this._vertexBuffer.insert(f,0,f.byteLength/n,0),u=this._indexBuffer.insert(o,0,o.byteLength/4,h);if(d.forEach((e=>{e.indexFrom+=u,e.vertexFrom+=h})),this._records.link(d),t)this._indicesInvalid=!0;else if(this._displayList){const e=d.getCursor();for(;e.next();)this._displayList.addRecord(e)}}else{const i=e.indices.byteLength/4,f=e.vertices.byteLength/n,o=n/Uint32Array.BYTES_PER_ELEMENT,d=this._stage.bufferPool;this._records=_DisplayRecordReader_js__WEBPACK_IMPORTED_MODULE_3__.DisplayRecordReader.from(e.records),this._indexBuffer=new _Buffer_js__WEBPACK_IMPORTED_MODULE_2__.Buffer("index",i,1,d),this._vertexBuffer=new _Buffer_js__WEBPACK_IMPORTED_MODULE_2__.Buffer("vertex",f,o,d),this._indexBuffer.insert(e.indices,0,e.indices.byteLength/4,0),this._vertexBuffer.insert(e.vertices,0,e.vertices.byteLength/n,0),t&&(this._indicesInvalid=!0)}}remove(e){if(null!=this._records)for(const t of e){const e=this._records.getCursor();if(!e.lookup(t))continue;const r=e.indexFrom,s=e.vertexFrom;let i=e.indexCount,n=e.vertexCount;for(;e.next()&&e.id===t;)i+=e.indexCount,n+=e.vertexCount;this._indexBuffer.free(r,i),this._vertexBuffer.free(s,n,!0),this._records.delete(t)}}getVAO(e,t,r,s){if(!this._vertexBuffer||!this._indexBuffer||null==this._records||!this._vertexBuffer.bufferSize)return null;const o=s?f:n;let d=this._vaos.get(o);(this._vertexBuffer.invalidated||this._indexBuffer.invalidated||s&&this._indexBuffer.invalidatedComputeBuffer)&&(d?.disposeVAOOnly(),d=null),this._vertexBuffer.upload(),this._indexBuffer.upload();const h=this._indexBuffer.getGPUBuffer(e,1===o),u=this._vertexBuffer.getGPUBuffer(e);return d||(d=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_4__.VertexArrayObject(e,r,t,{geometry:u},h),this._vaos.set(o,d)),d}forEachCommand(e){if(null!=this._records){if(this._sortIndices(this._records),!this._displayList){const e=this._cursorIndexOrder;this._displayList=_FeatureDisplayList_js__WEBPACK_IMPORTED_MODULE_1__.FeatureDisplayList.from(this,this.geometryType,this._records.getCursor(),e)}this._displayList.forEach(e)}}_sortIndices(e){const t=!!this._indexBuffer.bufferSize;if(!this._indicesInvalid)return;this._indicesInvalid=!1;let r=0;const s=e.getCursor(),i=[],n=[],f=[];for(;s.next();)n.push(s.index),f.push(s.sortKey),i.push(s.id);n.sort(((e,t)=>{const r=f[t],s=f[e];return s===r?i[t]-i[e]:r-s}));const o=e.getCursor(),d=t?this._indexBuffer.getCPUBuffer():this._vertexBuffer.getCPUBuffer();for(const h of n){if(!o.seekIndex(h))throw new Error("Expected to find index");if(t){const{indexFrom:e,indexCount:t}=o;o.indexFrom=r;for(let s=0;s<t;s++)this._indexBuffer.set(r++,d.array[e+s])}else{const{vertexFrom:e,vertexCount:t}=o,s=this._vertexBuffer.strideInt,i=e*s,n=i+t*s;o.vertexFrom=r/s;for(let f=i;f<n;f++)this._vertexBuffer.set(r++,d.array[f])}}this._cursorIndexOrder=n,this._displayList=null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ W)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../AggregateGraphic.js */ "./node_modules/@arcgis/core/AggregateGraphic.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_effects_FeatureEffectView_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/effects/FeatureEffectView.js */ "./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _rest_support_AggregateFeatureSet_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../rest/support/AggregateFeatureSet.js */ "./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js");
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../rest/support/FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _features_schemaUtils_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./features/schemaUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schemaUtils.js");
/* harmony import */ var _features_tileRenderers_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./features/tileRenderers.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js");
/* harmony import */ var _features_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./features/support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/* harmony import */ var _support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./support/clusterUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/clusterUtils.js");
/* harmony import */ var _support_FeatureCommandQueue_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./support/FeatureCommandQueue.js */ "./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js");
/* harmony import */ var _support_FeatureLayerProxy_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./support/FeatureLayerProxy.js */ "./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js");
/* harmony import */ var _support_visualVariableSimpleUtils_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./support/visualVariableSimpleUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js");
/* harmony import */ var _tiling_TileManager_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../tiling/TileManager.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileManager.js");
/* harmony import */ var _layers_FeatureLayerView_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../layers/FeatureLayerView.js */ "./node_modules/@arcgis/core/views/layers/FeatureLayerView.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../webgl/capabilities.js */ "./node_modules/@arcgis/core/views/webgl/capabilities.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function D(e){return e&&"openPorts"in e}function M(e){for(const t of e){const e="featureReduction"in t&&t.featureReduction&&"labelingInfo"in t.featureReduction?t.featureReduction:void 0,r=[...t.labelingInfo||[],...e?.labelingInfo||[]];if(!t.labelsVisible||!r.length)continue;if(r.some((e=>"none"===e.deconflictionStrategy)))return!0}return!1}function G(e){return t=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_14__.pt2px)((0,_support_visualVariableSimpleUtils_js__WEBPACK_IMPORTED_MODULE_32__.getSizeForValueSimple)(t,e))}function B(e){const t=null!=e&&"visualVariables"in e&&e.visualVariables;if(!t)return null;for(const r of t)if("size"===r.type)return G(r);return null}const $="esri.views.2d.layers.FeatureLayerView2D";function K(e){switch(e.geometryType){case"point":return"esriGeometryPoint";case"polyline":return"esriGeometryPolyline";case"polygon":case"multipatch":return"esriGeometryPolygon";case"multipoint":return"esriGeometryMultipoint";default:return _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger($).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("unsupported-geometry-type",`Geometry type of ${e.geometryType} is not supported`)),null}}let Z=class extends((0,_layers_FeatureLayerView_js__WEBPACK_IMPORTED_MODULE_34__["default"])((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_36__["default"])((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_25__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_35__["default"])))){constructor(){super(...arguments),this._pipelineIsUpdating=!0,this._commandsQueue=new _support_FeatureCommandQueue_js__WEBPACK_IMPORTED_MODULE_30__["default"]({process:e=>{switch(e.type){case"processed-edit":return this._doEdit(e);case"refresh":return this._doRefresh(e.dataChanged);case"update":return this._doUpdate()}}}),this._visibilityOverrides=new Set,this._highlightIds=new Map,this._updateHighlight=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.debounce)((async()=>this._proxy.setHighlight(Array.from(this._highlightIds.keys())))),this._uploadsLocked=!1,this._needsClusterSizeUpdate=!1,this.featureEffectView=new _layers_effects_FeatureEffectView_js__WEBPACK_IMPORTED_MODULE_18__["default"],this._lastDefinitionExpression=null}destroy(){this._updateClusterSizeTask?.remove(),this._proxy?.destroy(),this._commandsQueue.destroy()}initialize(){this.addResolvingPromise(Promise.all([this._initProxy(),this._initServiceOptions()])),this.addHandles([this.on("valueRangesChanged",(e=>{this._set("_aggregateValueRanges",e.valueRanges)})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>this.featureEffect),(e=>{this.featureEffectView.featureEffect=e}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.syncAndInitial)],"constructor"),this.featureEffectView.endTransitions()}async _initProxy(){const e=this.layer;if("isTable"in e&&e.isTable)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:this.layer});if(("feature"===e.type||"subtype-group"===e.type)&&!(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_20__.getEffectiveLayerCapabilities)(e)?.operations.supportsQuery)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("featurelayerview:query-not-supported","layer view requires a layer with query capability",{layer:e});this._proxy&&this._proxy.destroy();const t=this._createClientOptions();return this._set("_proxy",new _support_FeatureLayerProxy_js__WEBPACK_IMPORTED_MODULE_31__["default"]({client:t})),this._proxy.when()}async _initServiceOptions(){return this._set("_serviceOptions",await this._createServiceOptions()),this._serviceOptions}get _effectiveFeatureReduction(){if(!("featureReduction"in this.layer))return null;const e=this.layer.featureReduction;return e&&(!("maxScale"in e)||!e.maxScale||e.maxScale<this.view.scale)?e:null}get orderByFields(){return"stream"!==this._serviceOptions?.type?this._serviceOptions?.orderByFields:void 0}get labelsVisible(){const e="subtype-group"===this.layer.type?this.layer.sublayers.items:[this.layer];return!this.suspended&&e.some((e=>e.labelingInfo&&e.labelsVisible))}get labelingCollisionInfos(){const{tileRenderer:e,layer:t}=this;if(null==e)return null;const r="subtype-group"===this.layer.type?this.layer.sublayers.items:[this.layer],i=t.geometryType,s=!M(r),a={};if("subtype-group"!==t.type){if("heatmap"===e?.type)return null;const r=B(t.renderer);a[0]=r}return[{tileRenderer:e,vvEvaluators:a,deconflictionEnabled:s,geometryType:i,visible:!this.suspended}]}get queryMode(){return this._serviceOptions?.type}get renderingConfigHash(){if(!this.layer)return null;const e=this.availableFields,t=this.layer,r=this.view.floors,{definitionExpression:i}=t,s="subtype-group"!==this.layer.type&&this.layer.labelsVisible&&this.layer.labelingInfo,a="renderer"in t&&t.renderer,n="gdbVersion"in t?t.gdbVersion:void 0,o="historicMoment"in t?t.historicMoment?.getTime():void 0,{timeExtent:l}=this,u="customParameters"in t?JSON.stringify(t.customParameters):void 0,d="apiKey"in t?t.apiKey:void 0,h="stream"===t.type?`${JSON.stringify(t.geometryDefinition)}${t.definitionExpression}`:null,p=JSON.stringify(this.clips),c=this._effectiveFeatureReduction?.toJSON(),y="orderBy"in this.layer&&JSON.stringify(this.layer.orderBy),g="sublayers"in this.layer&&this.layer.sublayers.items.reduce(((e,t)=>e+`${t.visible?1:0}.${JSON.stringify(t.renderer)}.${t.labelsVisible}\n.${JSON.stringify(t.labelingInfo)}`),""),f="subtypeCode"in this.layer&&this.layer.subtypeCode;return JSON.stringify({orderBy:y,sublayerHash:g,subtypeCode:f,filterHash:null!=this.filter&&this.filter.toJSON(),effectHash:null!=this.featureEffect&&this.featureEffect.toJSON(),streamFilter:h,gdbVersion:n,definitionExpression:i,historicMoment:o,availableFields:e,renderer:a,labelingInfo:s,timeExtent:l,floors:r,clipsHash:p,featureReduction:c,customParameters:u,apiKey:d,timeZone:this.view.timeZone})}highlight(e){let t;e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_3__["default"]?t=[e.getObjectId()]:"number"==typeof e||"string"==typeof e?t=[e]:_core_Collection_js__WEBPACK_IMPORTED_MODULE_5__["default"].isCollection(e)&&e.length>0?t=e.map((e=>e?.getObjectId())).toArray():Array.isArray(e)&&e.length>0&&(t="number"==typeof e[0]||"string"==typeof e[0]?e:e.map((e=>e?.getObjectId())));const a=t?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__.isSome);return a?.length?(this._addHighlight(a),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeHandle)((()=>this._removeHighlight(a)))):(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_7__.makeHandle)()}hasHighlight(){return!!this._highlightIds.size}async hitTest(e,i){if(!this.tileRenderer)return null;const s=await this.tileRenderer.hitTest(i);if(0===s.length)return null;(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-force-marker-text-draw-order")&&s.sort(((e,t)=>e-t));const{features:a,aggregates:n}=await this._proxy.getFeatures(s);return[...n.map((r=>this._createGraphicHit(e,_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(r)))),...a.map((t=>this._createGraphicHit(e,_Graphic_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromJSON(t))))]}queryStatistics(){return this._proxy.queryStatistics()}async querySummaryStatistics(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.querySummaryStatistics(this._cleanUpQuery(e),i,r)}async queryAggregateSummaryStatistics(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateSummaryStatistics(this._cleanUpAggregateQuery(e),i,r)}async queryUniqueValues(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryUniqueValues(this._cleanUpQuery(e),i,r)}async queryAggregateUniqueValues(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateUniqueValues(this._cleanUpAggregateQuery(e),i,r)}async queryClassBreaks(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryClassBreaks(this._cleanUpQuery(e),i,r)}async queryAggregateClassBreaks(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateClassBreaks(this._cleanUpAggregateQuery(e),i,r)}async queryHistogram(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryHistogram(this._cleanUpQuery(e),i,r)}async queryAggregateHistogram(e,t,r){const i={...t,scale:this.view.scale};return this._proxy.queryAggregateHistogram(this._cleanUpAggregateQuery(e),i,r)}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_22__["default"].fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}queryVisibleFeatures(e,t){return this._proxy.queryVisibleFeatures(this._cleanUpQuery(e),t).then((e=>{const t=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_22__["default"].fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}async queryAggregates(e,t){const r=await this._proxy.queryAggregates(this._cleanUpAggregateQuery(e),t),i=_rest_support_AggregateFeatureSet_js__WEBPACK_IMPORTED_MODULE_21__["default"].fromJSON(r);return i.features.forEach((e=>this._setLayersForFeature(e))),i}queryAggregateIds(e,t){return this._proxy.queryAggregateIds(this._cleanUpAggregateQuery(e),t)}queryAggregateCount(e,t){return this._proxy.queryAggregateCount(this._cleanUpAggregateQuery(e),t)}queryAggregateJSON(e,t){return this._proxy.queryAggregates(this._cleanUpAggregateQuery(e),t)}queryFeaturesJSON(e,t){return this._proxy.queryFeatures(this._cleanUpQuery(e),t)}queryObjectIds(e,t){return this._proxy.queryObjectIds(this._cleanUpQuery(e),t)}queryFeatureCount(e,t){return this._proxy.queryFeatureCount(this._cleanUpQuery(e),t)}queryExtent(e,t){return this._proxy.queryExtent(this._cleanUpQuery(e),t).then((e=>({count:e.count,extent:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_38__["default"].fromJSON(e.extent)})))}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._tileStrategy||!this.tileRenderer)return;const{hasMissingTiles:t,added:r,removed:i}=this._tileStrategy.update(e);(r.length||i.length)&&this._proxy.updateTiles({added:r,removed:i}),t&&this.requestUpdate(),this.notifyChange("updating")}attach(){this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._tileStrategy=new _tiling_TileManager_js__WEBPACK_IMPORTED_MODULE_33__.TileManager({acquireTile:e=>this._acquireTile(e),releaseTile:e=>this._releaseTile(e),tileInfoView:this.view.featuresTilingScheme,buffer:0}),this.addAttachHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>this.renderingConfigHash),(()=>this._update()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.initial)),"stream"!==this.layer.type&&this.addAttachHandles(this.layer.on("edits",(e=>this._edit(e))))}detach(){this._commandsQueue.clear(),this._proxy?.stop(),this.container.removeAllChildren(),this.tileRenderer?.uninstall(this.container),this.tileRenderer=null,this._tileStrategy=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.destroyMaybe)(this._tileStrategy),this._tileRendererHash=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){const e="renderer"in this.layer&&null!=this.layer.renderer,t=this._commandsQueue.updating,r=null!=this._updatingRequiredFieldsPromise,i=!this._proxy||!this._proxy.isReady,s=this._pipelineIsUpdating,a=null==this.tileRenderer||this.tileRenderer?.updating,n=e&&(t||r||i||s||this.dataUpdating||a);return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-log-updating")&&console.log(`Updating FLV2D (${this.layer.id}): ${n}\n  -> hasRenderer ${e}\n  -> hasPendingCommand ${t}\n  -> updatingRequiredFields ${r}\n  -> updatingProxy ${i}\n  -> updatingPipeline ${s}\n  -> updatingData: ${this.dataUpdating}\n  -> updatingTileRenderer ${a}\n`),n}_createClientOptions(){return{setUpdating:e=>{this._set("_pipelineIsUpdating",e)},setDataUpdating:e=>{this._set("dataUpdating",e)},emitEvent:e=>{this.emit(e.name,e.event)}}}async _detectQueryMode(e){const t="path"in e,{layer:r}=this,i="editingInfo"in r&&r.editingInfo?.lastEditDate,s="refreshInterval"in r&&!!r.refreshInterval,a=!i&&s,n=(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_20__.getEffectiveLayerCapabilities)(r);if(t&&("feature"===r.type||"subtype-group"===r.type)&&"point"===r.geometryType&&n?.query.supportsPagination&&!n?.operations.supportsEditing&&!a&&(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-snapshot-enabled"))try{const e=await r.queryFeatureCount();if(e<=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-snapshot-point-min-threshold"))return{mode:"snapshot",featureCount:e};const t=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-snapshot-point-max-threshold"),i=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("featurelayer-snapshot-point-coverage"),s=this.view.extent,a=r.fullExtent,n=a?.clone().intersection(s),o=null!=n?n.width*n.height:0,l=a?.width*a?.height;if(e<=t&&(0===l?0:o/l)>=i)return{mode:"snapshot",featureCount:e}}catch(o){_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).warn("mapview-feature-layer","Encountered an error when querying for featureCount",{error:o})}return{mode:"on-demand"}}async _createServiceOptions(){const e=this.layer;if("stream"===e.type)return null;const t=(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_20__.getEffectiveLayerCapabilities)(e),{capabilities:r,objectIdField:i}=e,s=e.fieldsIndex.toJSON(),a=s.fields,n=null!=e.fullExtent?e.fullExtent.toJSON():null,l=K(e),u="timeInfo"in e&&e.timeInfo?.toJSON()||null,d=e.spatialReference?e.spatialReference.toJSON():null,h="feature"===e.type?e.globalIdField:null;let p;"ogc-feature"===e.type?p=e.source.getSource():D(e.source)?p=await e.source.openPorts():e.parsedUrl&&(p=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_9__.clone)(e.parsedUrl),"dynamicDataSource"in e&&e.dynamicDataSource&&(p.query={layer:JSON.stringify({source:e.dynamicDataSource})}));const c="datesInUnknownTimezone"in this.layer&&this.layer.datesInUnknownTimezone,y=("subtypeField"in this.layer?this.layer.subtypeField:null)??null,{mode:g,featureCount:f}=await this._detectQueryMode(p);let m=this.layer.objectIdField;if("feature"===this.layer.type&&null!=this.layer.orderBy&&this.layer.orderBy.length){const e=!this.layer.orderBy[0].valueExpression&&this.layer.orderBy[0].field;e&&(m=e)}return{type:g,typeIdField:"typeIdField"in e&&e.typeIdField||void 0,types:"types"in e&&e.types?.map((e=>e.toJSON()))||void 0,timeReferenceUnknownClient:c,subtypeField:y,featureCount:f,globalIdField:h,maxRecordCount:r.query.maxRecordCount,tileMaxRecordCount:r.query.tileMaxRecordCount,capabilities:r,effectiveCapabilities:t,fields:a,fieldsIndex:s,fullExtent:n,geometryType:l,objectIdField:i,source:p,timeInfo:u,spatialReference:d,orderByFields:m}}async _createMemoryServiceOptions(e){const t=await e.openPorts();return{...this._createServiceOptions(),type:"memory",source:t}}_cleanUpQuery(e){const t=_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"].from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}_cleanUpAggregateQuery(e){const t=_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"].from(e)||this.createAggregateQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t}async _update(){return this._commandsQueue.push({type:"update"})}async _edit(e){if(this.suspended)return void this._clearTiles();return this._validateEdit(e)?this._commandsQueue.push({type:"edit",edits:e}):void 0}async doRefresh(e){if(this.attached&&this._tileStrategy.tileKeys().length)return this.suspended&&e?void this._clearTiles():this._commandsQueue.push({type:"refresh",dataChanged:e})}_clearTiles(){this._tileStrategy.tileKeys().length&&(this._proxy.updateTiles({added:[],removed:this._tileStrategy.tileKeys()}),this._tileStrategy.clear(),this.requestUpdate(),this._commandsQueue.clear(),this._update())}_validateEdit(e){const t="globalIdField"in this.layer&&this.layer.globalIdField,r=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),i=t&&this.availableFields.includes(t);return r&&!i?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_6__["default"]("mapview-apply-edits",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null):e}async _doUpdate(){try{if(this.destroyed||!this._hasRequiredSupport(this.layer)||!this._tileStrategy)return;const{featureEffectView:t,filter:r}=this;if(await this._updateRequiredFields(),this.destroyed)return;const{renderer:i}=this._getEffectiveRenderer();this._set("_effectiveRenderer",i);const s=this._createSchemaConfig(),a=this._createConfiguration(s,r,t.filter),n=this._lastDefinitionExpression!==a.schema.source.definitionExpression;this._lastDefinitionExpression=a.schema.source.definitionExpression;const o=a.schema.tileRenderer,u=this._createTileRendererHash(o);if("snapshot"===this._serviceOptions.type&&(a.schema.source.initialFeatureCount=this._serviceOptions.featureCount),u!==this._tileRendererHash){this._initTileRenderer(o,i);const e=this.layer,t="stream"===e.type?await this._initServiceOptions():this._serviceOptions;this.tileRenderer.onConfigUpdate(i),"stream"!==e.type&&D(e.source)&&(t.source=await e.source.openPorts());const r={added:this._tileStrategy.tileKeys(),removed:[]};(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Proxy startup"),await this._proxy.startup(this.view.featuresTilingScheme,a,t,r),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Finished proxy startup"),this.hasHighlight()&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Updating highlight"),await this._proxy.setHighlight(Array.from(this._highlightIds.keys())),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Finished highlight update")),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: onConfigUpdate start"),this.tileRenderer.onConfigUpdate(i),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: onConfigUpdate end")}else{"snapshot"===this._serviceOptions.type&&n&&(a.schema.source.changedFeatureCount=await this.layer.queryFeatureCount()),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Updating proxy");const t=await this._proxy.update(a);(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Finished proxy update"),(t.mesh||t.targets?.aggregate)&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Locking GPU Uploads"),this._lockGPUUploads());try{(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Applying update to proxy"),await this._proxy.applyUpdate(t),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_8__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D: Finished applying update to proxy")}catch(e){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(e)}(t.mesh||t.targets?.aggregate)&&this._unlockGPUUploads(),this.tileRenderer.onConfigUpdate(i),this._updateClusterSizeVariable(),this._forceAttributeTextureUpload()}this._tileRendererHash=u,this.tileRenderer.invalidateLabels(),this.requestUpdate()}catch(e){}}async _doEdit(e){try{await this._proxy.onEdits(e)}catch(t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(t),0}}async _doRefresh(e){this._lockGPUUploads();try{let t;e&&"snapshot"===this.queryMode&&"queryFeatureCount"in this.layer&&(t=await this.layer.queryFeatureCount()),await this._proxy.refresh({dataChanged:e,featureCount:t})}catch(t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(t),0}this._unlockGPUUploads(),this._effectiveFeatureReduction&&this._updateClusterSizeVariable()}_updateClusterSizeVariable(){this._needsClusterSizeUpdate&&(this.tileRenderer.onConfigUpdate(this._effectiveRenderer),this._needsClusterSizeUpdate=!1)}_createUpdateClusterSizeTask(e,t){return (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_13__.watch)((()=>this._aggregateValueRanges),(r=>{this._updateClusterEffectiveRendererSizeVariable(e,t,r),this._needsClusterSizeUpdate=!0,this._uploadsLocked||this._updateClusterSizeVariable()}))}async _updateClusterEffectiveRendererSizeVariable(e,t,r){if(e.dynamicClusterSize&&"visualVariables"in e&&e.visualVariables){const i=(0,_support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__.findSizeVV)(e.visualVariables);if(null!=i&&"cluster_count"===i.field){const s=e.visualVariables.indexOf(i);e.visualVariables[s]=(0,_support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__.createClusterCountSizeVariable)(t,r);const a=e.clone();a.dynamicClusterSize=!0,this._set("_effectiveRenderer",a)}}}_getEffectiveRenderer(){const e=this.layer,t="renderer"in e?e.renderer:null,r=this._effectiveFeatureReduction;if(this._updateClusterSizeTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.removeMaybe)(this._updateClusterSizeTask),r&&"renderer"in r&&r.renderer&&!r.renderer.authoringInfo?.isAutoGenerated){const e=r.fields;if("cluster"===r.type){const{renderer:t,didInject:i}=(0,_support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__.injectDynamicLevelDependentSizeVisualVariable)(r.renderer,r,this._aggregateValueRanges);return i&&(this._updateClusterSizeTask=this._createUpdateClusterSizeTask(t,r)),{renderer:t,aggregateFields:e,featureReduction:r}}return{renderer:r.renderer,aggregateFields:e,featureReduction:r}}if(r&&"cluster"===r.type&&t&&(0,_support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__.isClusterCompatibleRenderer)(t)){const e=r,i=[],s=(0,_support_clusterUtils_js__WEBPACK_IMPORTED_MODULE_29__.createClusterRenderer)(i,t,e,this._aggregateValueRanges,!0);return this._updateClusterSizeTask=this._createUpdateClusterSizeTask(s,e),{renderer:s,aggregateFields:i,featureReduction:r}}return{renderer:t,aggregateFields:[],featureReduction:null}}_acquireTile(e){const t=this.tileRenderer.acquireTile(e);return t.once("attach",(()=>{this.requestUpdate()})),t}_releaseTile(e){this.tileRenderer.releaseTile(e)}_initTileRenderer(e,t){const r=(0,_features_tileRenderers_js__WEBPACK_IMPORTED_MODULE_27__.createOrReuseTileRenderer)(e,{layerView:this,tileInfoView:this.view.featuresTilingScheme,layer:this.layer});return this.tileRenderer&&(this._tileStrategy.clear(),this.tileRenderer.uninstall(this.container),this.tileRenderer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.destroyMaybe)(this.tileRenderer)),this.destroyed?null:(this._proxy.tileRenderer=r,this._set("tileRenderer",r),this.tileRenderer.install(this.container),this.tileRenderer.onConfigUpdate(t),this.requestUpdate(),this.tileRenderer)}_createTileRendererHash(e){return`${e.type}`}get hasFilter(){const e=!!("floorInfo"in this.layer&&this.layer.floorInfo&&this.view.floors&&this.view.floors.length);return!!this.filter||e||!!this._visibilityOverrides.size||!!this.timeExtent}_injectOverrides(e){const t=null!=e?e.timeExtent:null,r=null!=this.timeExtent&&null!=t?this.timeExtent.intersection(t):this.timeExtent||t;let i=null;const s="floorInfo"in this.layer&&this.layer.floorInfo;if(s){const t=null!=e?e.where:null;i=this._addFloorFilterClause(t)}if(!this._visibilityOverrides.size&&!r&&!s)return null!=e?e.toJSON():null;(e=null!=e&&e.clone()||new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_19__["default"]).timeExtent=r,i&&(e.where=i);const a=e.toJSON();return a.hiddenIds=Array.from(this._visibilityOverrides),a}_addFloorFilterClause(e){const t=this.layer;let r=e||"";if("floorInfo"in t&&t.floorInfo){let e=this.view.floors;if(!e?.length)return r;t.floorInfo.viewAllLevelIds?.length&&(e=t.floorInfo.viewAllLevelIds);const i=e.filter((e=>""!==e)).map((e=>"'"+e+"'"));i.push("''");const s=t.floorInfo.floorField;let a="("+s+" IN ({ids}) OR "+s+" IS NULL)";if(a=a.replace("{ids}",i.join(", ")),null!=r&&r.includes(s)){let e=new RegExp("AND \\("+s+".*NULL\\)","g");r=r.replace(e,""),e=new RegExp("\\("+s+".*NULL\\)","g"),r=r.replace(e,""),r=r.replaceAll(/\s+/g," ").trim()}r=""!==r?"("+r+") AND "+a:a}return""!==r?r:null}_createConfiguration(e,t,r){const i="feature"===this.layer.type&&this.layer.historicMoment?this.layer.historicMoment.getTime():void 0,s="feature"===this.layer.type?this.layer.gdbVersion??void 0:void 0,a=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_24__.maxFilters),n=this._injectOverrides(t);a[0]=n,a[1]=null!=r?r.toJSON():null;const o=(0,_features_schemaUtils_js__WEBPACK_IMPORTED_MODULE_26__.createSchema)(e);if(null==o)return null;const l=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_37__.getWebGLCapabilities)("2d");return{availableFields:this.availableFields,gdbVersion:s,historicMoment:i,devicePixelRatio:window.devicePixelRatio||1,filters:a,schema:o,supportsTextureFloat:l.supportsTextureFloat,maxTextureSize:l.maxTextureSize,timeZone:this.view.timeZone}}_hasRequiredSupport(e){return!("renderer"in e)||(0,_features_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_28__.isRendererSupported)(e.renderer)}_lockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!0,this.tileRenderer.lockGPUUploads())}_unlockGPUUploads(){this.tileRenderer&&(this._uploadsLocked=!1,this.tileRenderer.unlockGPUUploads())}_forceAttributeTextureUpload(){this.tileRenderer&&this.tileRenderer.forceAttributeTextureUpload()}_createSchemaConfig(){const e=this.layer;return{renderer:"renderer"in e?e.renderer:null,spatialReference:e.spatialReference,timeExtent:"timeExtent"in e?e.timeExtent:null,definitionExpression:e.definitionExpression,featureReduction:this._effectiveFeatureReduction,fields:e.fields,geometryType:e.geometryType,historicMoment:"historicMoment"in e?e.historicMoment:null,labelsVisible:"labelsVisible"in e&&e.labelsVisible,labelingInfo:"labelingInfo"in e?e.labelingInfo:null,availableFields:this.availableFields,featureEffect:this.featureEffect,filter:this.filter,gdbVersion:"gdbVersion"in e?e.gdbVersion:null,pixelBuffer:0,orderBy:"orderBy"in e&&e.orderBy?e.orderBy:null,customParameters:{..."customParameters"in e?e.customParameters:void 0,token:"apiKey"in e?e.apiKey??void 0:void 0},subtypeCode:"subtypeCode"in e?e.subtypeCode:void 0,subtypeField:"subtypeField"in e?e.subtypeField:void 0}}_addHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t);this._highlightIds.set(t,e+1)}else this._highlightIds.set(t,1);this._updateHighlight().catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(e)}))}_removeHighlight(e){for(const t of e)if(this._highlightIds.has(t)){const e=this._highlightIds.get(t)-1;0===e?this._highlightIds.delete(t):this._highlightIds.set(t,e)}this._updateHighlight().catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_12__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(e)}))}_setLayersForFeature(e){const t=this.layer;e.layer=t,e.sourceLayer=t}_createGraphicHit(e,t){return this._setLayersForFeature(t),null!=t.geometry&&(t.geometry.spatialReference=this.view.spatialReference),{type:"graphic",graphic:t,layer:this.layer,mapPoint:e}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_serviceOptions",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_proxy",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_pipelineIsUpdating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_effectiveRenderer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_effectiveFeatureReduction",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_aggregateValueRanges",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"_commandsQueue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"featureEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"labelsVisible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"labelingCollisionInfos",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],Z.prototype,"queryMode",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"renderingConfigHash",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"tileRenderer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],Z.prototype,"updating",void 0),Z=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_17__.subclass)($)],Z);const W=Z;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createOrReuseTileRenderer: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _tileRenderers_HeatmapTileRenderer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./tileRenderers/HeatmapTileRenderer.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js");
/* harmony import */ var _tileRenderers_SymbolTileRenderer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./tileRenderers/SymbolTileRenderer.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n){if(!t)return null;switch(t.type){case"symbol":return new _tileRenderers_SymbolTileRenderer_js__WEBPACK_IMPORTED_MODULE_1__.SymbolTileRenderer(n);case"heatmap":return new _tileRenderers_HeatmapTileRenderer_js__WEBPACK_IMPORTED_MODULE_0__.HeatmapTileRenderer(n)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let r=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this.tiles=new Map}destroy(){this.tiles.clear(),this.layer=this.layerView=this.tileInfoView=this.tiles=null}get updating(){return this.isUpdating()}acquireTile(e){const t=this.createTile(e);return t.once("isReady",(()=>this.notifyChange("updating"))),this.tiles.set(e.id,t),this.notifyChange("updating"),t}forceAttributeTextureUpload(){}forEachTile(e){this.tiles.forEach(e)}releaseTile(e){this.tiles.delete(e.key.id),this.notifyChange("updating"),this.disposeTile(e)}isUpdating(){let e=!0;this.tiles.forEach((t=>{e=e&&t.isReady}));const t=!e;if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-2d-log-updating")){let s="";this.tiles.forEach((t=>{const i=t.updateStatus;s+=`-> ${t.key.id}: isReady: ${t.isReady} status: ${i}\n`,e=e&&t.isReady})),console.log(`Updating BaseTileRenderer ${t}\n${s}`)}return t}setHighlight(){}invalidateLabels(){}requestUpdate(){this.layerView.requestUpdate()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],r.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],r.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],r.prototype,"tileInfoView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],r.prototype,"updating",null),r=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.features.tileRenderers.BaseTileRenderer")],r);const o=r;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/HeatmapTileRenderer.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HeatmapTileRenderer: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../renderers/support/heatmapUtils.js */ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js");
/* harmony import */ var _engine_BitmapTileContainer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../engine/BitmapTileContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/BitmapTileContainer.js");
/* harmony import */ var _BaseTileRenderer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./BaseTileRenderer.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js");
/* harmony import */ var _support_HeatmapSource_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./support/HeatmapSource.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let o=class extends _BaseTileRenderer_js__WEBPACK_IMPORTED_MODULE_9__["default"]{constructor(e){super(e),this._intensityInfo={minDensity:0,maxDensity:0},this.type="heatmap",this.featuresView={attributeView:{initialize:()=>{},requestUpdate:()=>{}},requestRender:()=>{}},this._container=new _engine_BitmapTileContainer_js__WEBPACK_IMPORTED_MODULE_8__.BitmapTileContainer(e.tileInfoView)}createTile(e){const t=this._container.createTile(e);return this.tileInfoView.getTileCoords(t.bitmap,e),t.bitmap.resolution=this.tileInfoView.getTileResolution(e),t}onConfigUpdate(){const e=this.layer.renderer;if("heatmap"===e.type){const{minDensity:t,maxDensity:r,colorStops:s}=e;this._intensityInfo.minDensity=t,this._intensityInfo.maxDensity=r,this._gradient=(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_7__.generateGradient)(s),this.tiles.forEach((e=>{const i=e.bitmap.source;i&&(i.minDensity=t,i.maxDensity=r,i.gradient=this._gradient,e.bitmap.invalidateTexture(),e.bitmap.requestRender())}))}}hitTest(){return Promise.resolve([])}install(e){e.addChild(this._container)}uninstall(e){this._container.removeAllChildren(),e.removeChild(this._container)}disposeTile(e){this._container.removeChild(e),e.destroy()}supportsRenderer(e){return e&&"heatmap"===e.type}onTileData(e){const t=this.tiles.get(e.tileKey);if(!t)return;const i=e.intensityInfo,{minDensity:r,maxDensity:s}=this._intensityInfo,o=t.bitmap.source||new _support_HeatmapSource_js__WEBPACK_IMPORTED_MODULE_10__.HeatmapSource;o.intensities=i?.matrix||null,o.minDensity=r,o.maxDensity=s,o.gradient=this._gradient,t.bitmap.source=o,this._container.addChild(t),this._container.requestRender(),this.requestUpdate()}onTileError(e){console.error(e)}lockGPUUploads(){}unlockGPUUploads(){}fetchResource(e,t){return console.error(e),Promise.reject()}};o=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.features.tileRenderers.HeatmapTileRenderer")],o);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/SymbolTileRenderer.js ***!
  \************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SymbolTileRenderer: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _engine_webgl_FeatureTile_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../engine/webgl/FeatureTile.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/* harmony import */ var _BaseTileRenderer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./BaseTileRenderer.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/BaseTileRenderer.js");
/* harmony import */ var _support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./support/visualVariablesUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/visualVariablesUtils.js");
/* harmony import */ var _support_WGLFeatureView_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./support/WGLFeatureView.js */ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let p=class extends _BaseTileRenderer_js__WEBPACK_IMPORTED_MODULE_12__["default"]{constructor(){super(...arguments),this.type="symbol"}install(e){const t=()=>this.notifyChange("updating"),i=new _support_WGLFeatureView_js__WEBPACK_IMPORTED_MODULE_14__.WGLFeatureView(this.tileInfoView,this.layerView,this.layer,t);this.featuresView=i,e.addChild(i)}uninstall(e){e.removeChild(this.featuresView),this.featuresView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.destroyMaybe)(this.featuresView)}fetchResource(e,t){const{url:r}=e,s=this.featuresView.stage;try{return s.resourceManager.fetchResource(r,{signal:t.signal})}catch(a){return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(a)?Promise.resolve({width:0,height:0}):Promise.reject(a)}}isUpdating(){const e=super.isUpdating(),t=!this.featuresView||this.featuresView.isUpdating(),i=this.featuresView?.hasEmptyAttributeView(),r=e||t||e&&i;return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_1__["default"])("esri-2d-log-updating")&&console.log(`Updating SymbolTileRenderer ${r}\n  -> updatingTiles ${e}\n  -> hasFeaturesView ${!!this.featuresView}\n  -> updatingFeaturesView ${t}`),r}hitTest(e){return this.featuresView.hitTest(e)}supportsRenderer(e){return null!=e&&["simple","class-breaks","unique-value","dot-density","dictionary","heatmap","pie-chart"].includes(e.type)}onConfigUpdate(e){let t=null;if(e&&"visualVariables"in e){const i=((0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_11__.simplifyVVRenderer)(e).visualVariables||[]).map((e=>{const t=e.clone();return"normalizationField"in e&&(t.normalizationField=null),e.valueExpression&&"$view.scale"!==e.valueExpression&&(t.valueExpression=null,t.field="nop"),t}));t=(0,_support_visualVariablesUtils_js__WEBPACK_IMPORTED_MODULE_13__.convertVisualVariables)(i)}this.featuresView.setRendererInfo(e,t,this.layerView.featureEffect)}onTileData(e){const t=this.tiles.get(e.tileKey);t&&e.data&&this.featuresView.onTileData(t,e.data),this.layerView.view.labelManager.requestUpdate()}onTileError(e){const t=this.tiles.get(e.tileKey);t&&this.featuresView.onTileError(t)}forceAttributeTextureUpload(){this.featuresView.attributeView.forceTextureUpload()}lockGPUUploads(){this.featuresView.attributeView.lockTextureUpload(),this.tiles.forEach((e=>e.lock()))}unlockGPUUploads(){this.featuresView.attributeView.unlockTextureUpload(),this.tiles.forEach((e=>e.unlock()))}async getMaterialItems(e){return this.featuresView.getMaterialItems(e)}invalidateLabels(){this.featuresView.hasLabels&&this.layerView.view.labelManager.requestUpdate()}createTile(e){const t=this.tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.create)(),e),i=()=>this.layerView.view.labelManager.requestUpdate(),r=this.tileInfoView.getTileResolution(e.level),o=this.featuresView.attributeView;return new _engine_webgl_FeatureTile_js__WEBPACK_IMPORTED_MODULE_10__.FeatureTile(e,r,t[0],t[3],o,i)}disposeTile(e){this.featuresView.removeChild(e),e.destroy(),this.layerView.view.labelManager.requestUpdate()}};p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.features.tileRenderers.SymbolTileRenderer")],p);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/HeatmapSource.js ***!
  \***************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HeatmapSource: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../renderers/support/heatmapUtils.js */ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i{constructor(){this.gradient=null,this.height=512,this.intensities=null,this.width=512}render(i){(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_0__.drawHeatmap)(i,512,this.intensities,this.gradient,this.minDensity,this.maxDensity)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/tileRenderers/support/WGLFeatureView.js ***!
  \****************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WGLFeatureView: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/brushes.js */ "./node_modules/@arcgis/core/views/2d/engine/brushes.js");
/* harmony import */ var _engine_FeatureContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../engine/FeatureContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/FeatureContainer.js");
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-order-by-server-enabled");class a extends _engine_FeatureContainer_js__WEBPACK_IMPORTED_MODULE_3__.FeatureContainer{constructor(e,t,s,i){super(e),this._hitTestsRequests=[],this._layer=s,this._layerView=t,this._onUpdate=i}renderChildren(e){if(this.attributeView.update(),this.hasAnimation){e.painter.effects.integrate.draw(e,e.attributeView)}super.renderChildren(e)}hasEmptyAttributeView(){return this.attributeView.isEmpty()}isUpdating(){return this.attributeView.isUpdating()}hitTest(t){let s=this._hitTestsRequests.find((({x:e,y:s})=>e===t.x&&s===t.y));const i=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.createResolver)();return s?s.resolvers.push(i):(s={x:t.x,y:t.y,resolvers:[i]},this._hitTestsRequests.push(s)),this.requestRender(),i.promise}onTileData(e,t){const s=r&&"orderBy"in this._layer&&this._layer.orderBy,i=s&&s?.length&&!s[0].valueExpression&&s[0].field,a=!!s&&this._layerView.orderByFields===i;e.patch(t,a),this.contains(e)||this.addChild(e),this.requestRender()}onTileError(e){this.contains(e)||this.addChild(e)}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._layerView.featureEffectView.transitionStep(e,t),this._layerView.featureEffectView.transitioning&&this.requestRender()}doRender(e){const{minScale:t,maxScale:s}=this._layer.effectiveScaleRange,i=e.state.scale;i<=(t||1/0)&&i>=s&&super.doRender(e)}afterRender(e){super.afterRender(e),this._hitTestsRequests.length&&this.requestRender()}onAttributeStoreUpdate(){this.hasLabels&&this._layerView.view.labelManager.requestUpdate(),this._onUpdate()}get hasAnimation(){return this.hasLabels}setStencilReference(e){const{rendererSchema:t}=e.rendererInfo;if("dot-density"===t?.type&&t?.dotSize>1||"heatmap"===t?.type){const e=1;for(const t of this.children)t.stencilRef=t.key.level+e}else super.setStencilReference(e)}get hasHighlight(){return this._layerView.hasHighlight()}get hasLabels(){if("sublayers"in this._layer)return this._layer.sublayers.some((e=>!!e.labelingInfo?.length&&e.labelsVisible));const e=this._layer.featureReduction,t=e&&"labelingInfo"in e&&e.labelsVisible&&e.labelingInfo&&e.labelingInfo.length;return this._layer.labelingInfo?.length&&this._layer.labelsVisible||!!t}prepareRenderPasses(e){const s=super.prepareRenderPasses(e),r=e.registerRenderPass({name:"label",brushes:[_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.label],target:()=>this.hasLabels?this.children:null,drawPhase:_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.LABEL|_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.LABEL_ALPHA});if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-force-marker-text-draw-order")){const i=e.registerRenderPass({name:"geometry",brushes:[_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.fill,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.dotDensity,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.line,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.heatmap,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.pieChart],target:()=>this.children,forceDrawByDisplayOrder:!0,enableDefaultDraw:()=>!this._layerView.featureEffectView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.excludedEffects},{apply:e.effects.insideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.includedEffects},{apply:e.effects.hittest,enable:()=>!!this._hitTestsRequests.length,args:()=>this._hitTestsRequests}]});s.push(i)}else{const i=e.registerRenderPass({name:"geometry",brushes:[_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.fill,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.dotDensity,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.line,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.marker,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.heatmap,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.pieChart,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.text],target:()=>this.children,enableDefaultDraw:()=>!this._layerView.featureEffectView.hasEffects,effects:[{apply:e.effects.outsideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.excludedEffects},{apply:e.effects.insideEffect,enable:()=>this._layerView.featureEffectView.hasEffects,args:()=>this._layerView.featureEffectView.includedEffects},{apply:e.effects.hittest,enable:()=>!!this._hitTestsRequests.length,args:()=>this._hitTestsRequests}]});s.push(i)}const a=e.registerRenderPass({name:"highlight",brushes:[_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.fill,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.dotDensity,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.line,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.marker,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.pieChart,_engine_brushes_js__WEBPACK_IMPORTED_MODULE_2__.brushes.text],target:()=>this.children,drawPhase:_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HIGHLIGHT,enableDefaultDraw:()=>!1,effects:[{apply:e.effects.highlight,enable:()=>!!this._layerView.hasHighlight()}]});return s.push(a),s.push(r),s}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _support_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../support/QueueProcessor.js */ "./node_modules/@arcgis/core/views/support/QueueProcessor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(e){return e.some((e=>e.globalId))}function n(e){return e.filter((e=>!e.error)).map((e=>e.objectId??e.globalId)).filter((e=>null!=e))}function d(e,t){const s=new Set(e);for(const r of t.values())s.add(r);return s}function a(e,t){const s=new Set(e);for(const r of t.values())s.delete(r);return s}let c=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._hasGlobalIds=!1,this._notifyUpdating=()=>{this.notifyChange("updating")}}normalizeCtorArgs(e){return this._queueProcessor=new _support_QueueProcessor_js__WEBPACK_IMPORTED_MODULE_7__.QueueProcessor({concurrency:1,process:e.process}),{}}destroy(){this.clear()}get updating(){return this._queueProcessor.length>0}clear(){this._queueProcessor.clear()}push(e){const t=this._queueProcessor,s=t.last();switch(e.type){case"update":case"refresh":if(s?.type===e.type)return;t.push(e).then(this._notifyUpdating,this._notifyUpdating);break;case"edit":{const r="processed-edit"===s?.type?s:null;r&&t.popLast();const o=this._mergeEdits(r,e);for(const e of o)e&&t.push(e).then(this._notifyUpdating,this._notifyUpdating);break}}this.notifyChange("updating")}_mergeEdits(e,t){const{addedFeatures:s,deletedFeatures:r,updatedFeatures:o}=t.edits;if(this._hasGlobalIds=this._hasGlobalIds||i(s)||i(o)||i(r),this._hasGlobalIds){return[e,{type:"processed-edit",edits:{addOrModified:[...s,...o],removed:r}}]}const c=new Set(n(e?.edits.addOrModified??[])),p=new Set(n(e?.edits.removed??[])),u=new Set([...n(s),...n(o)]),l=new Set(n(r));return[{type:"processed-edit",edits:{addOrModified:Array.from(d(a(c,l),u)).map((e=>({objectId:e}))),removed:Array.from(d(a(p,u),l)).map((e=>({objectId:e})))}}]}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],c.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],c.prototype,"process",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.support.FeatureCommandQueue")],c);const p=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/FeatureLayerProxy.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Promise_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Promise.js */ "./node_modules/@arcgis/core/core/Promise.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/workers/workers.js */ "./node_modules/@arcgis/core/core/workers/workers.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function c(e){return Array.isArray(e)}let u=class extends _core_Promise_js__WEBPACK_IMPORTED_MODULE_1__.EsriPromise{constructor(e){super(e),this._startupResolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.createResolver)(),this.isReady=!1}initialize(){this._controller=new AbortController,this.addResolvingPromise(this._startWorker(this._controller.signal))}destroy(){this._controller.abort(),this._connection&&this._connection.close()}set tileRenderer(e){this.client.tileRenderer=e}get closed(){return this._connection.closed}async startup(e,t,r,s){await this.when();const o=this._controller.signal,i=c(r.source)?{transferList:r.source,signal:o}:void 0,n={service:r,config:t,tileInfo:e.tileInfo.toJSON(),tiles:s};await this._connection.invoke("startup",n,i),this._startupResolver.resolve(),this._set("isReady",!0)}async updateTiles(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("updateTiles",e))}async update(e){const t={config:e};return await this._startupResolver.promise,this._connection.invoke("update",t)}async applyUpdate(e){return await this._startupResolver.promise,this._connection.invoke("applyUpdate",e)}async setHighlight(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.setHighlight",e))}async stop(){if(await this._startupResolver.promise,!this.closed)return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("stop"))}async refresh(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.refresh",e))}async querySummaryStatistics(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.querySummaryStatistics",{query:e.toJSON(),params:t},r)}async queryAggregateSummaryStatistics(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateSummaryStatistics",{query:e.toJSON(),params:t},r)}async queryUniqueValues(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryUniqueValues",{query:e.toJSON(),params:t},r)}async queryAggregateUniqueValues(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateUniqueValues",{query:e.toJSON(),params:t},r)}async queryClassBreaks(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryClassBreaks",{query:e.toJSON(),params:t},r)}async queryAggregateClassBreaks(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateClassBreaks",{query:e.toJSON(),params:t},r)}async queryHistogram(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryHistogram",{query:e.toJSON(),params:t},r)}async queryAggregateHistogram(e,t,r){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateHistogram",{query:e.toJSON(),params:t},r)}async queryFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryFeatures",e?.toJSON(),t)}async queryVisibleFeatures(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryVisibleFeatures",e?.toJSON(),t)}async queryObjectIds(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryObjectIds",e?.toJSON(),t)}async queryFeatureCount(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryFeatureCount",e?.toJSON(),t)}async queryExtent(e,t){return this._connection.invoke("controller.queryExtent",e.toJSON(),t)}async queryLatestObservations(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryLatestObservations",e.toJSON(),t)}async queryStatistics(e){return await this._startupResolver.promise,this._connection.invoke("controller.queryStatistics",e)}async queryAggregates(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregates",e?.toJSON(),t)}async queryAggregateCount(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateCount",e?.toJSON(),t)}async queryAggregateIds(e,t){return await this._startupResolver.promise,this._connection.invoke("controller.queryAggregateIds",e?.toJSON(),t)}async getObjectId(e){return await this._startupResolver.promise,this._connection.invoke("controller.getObjectId",e)}async getDisplayId(e){return await this._startupResolver.promise,this._connection.invoke("controller.getDisplayId",e)}async getFeatures(e){return await this._startupResolver.promise,this._connection.invoke("controller.getFeatures",e)}async getAggregates(){return await this._startupResolver.promise,this._connection.invoke("controller.getAggregates")}async getAggregateValueRanges(){return await this._startupResolver.promise,this._connection.invoke("controller.getAggregateValueRanges")}async mapValidDisplayIds(e){return await this._startupResolver.promise,this._connection.invoke("controller.mapValidDisplayIds",e)}async onEdits(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.onEdits",e))}async enableEvent(e,t){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.enableEvent",{name:e,value:t}))}async pauseStream(){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.pauseStream"))}async resumeStream(){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.resumeStream"))}async sendMessageToSocket(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.sendMessageToSocket",e))}async sendMessageToClient(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.sendMessageToClient",e))}async updateCustomParameters(e){return await this._startupResolver.promise,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.ignoreAbortErrors)(this._connection.invoke("controller.updateCustomParameters",e))}async _startWorker(e){try{this._connection=await (0,_core_workers_workers_js__WEBPACK_IMPORTED_MODULE_3__.open)("Pipeline",{client:this.client,strategy:"dedicated",signal:e})}catch(t){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfNotAbortError)(t)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],u.prototype,"isReady",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],u.prototype,"client",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],u.prototype,"tileRenderer",null),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.support.FeatureLayerProxy")],u);const l=u;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSizeForValueSimple: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../renderers/support/lengthUtils.js */ "./node_modules/@arcgis/core/renderers/support/lengthUtils.js");
/* harmony import */ var _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/visualVariables/support/sizeVariableUtils.js */ "./node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const r=Math.PI;function i(e,t){switch(t.transformationType){case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Additive:return s(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Constant:return o(t,e);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.ClampedLinear:return u(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Proportional:return l(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Stops:return c(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.RealWorldSize:return m(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Identity:return e;case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Unknown:return null}}function a(e,t){return"number"==typeof e?e:i(t,e)}function s(e,t){return e+(a(t.minSize,e)||t.minDataValue)}function o(e,t){const n=e.stops;let r=n?.length&&n[0].size;return null==r&&(r=e.minSize),a(r,t)}function u(e,t){const n=t.minDataValue,r=t.maxDataValue,i=(e-n)/(r-n),s=a(t.minSize,e),o=a(t.maxSize,e);return e<=n?s:e>=r?o:s+i*(o-s)}function l(t,n){const r=t/n.minDataValue,i=a(n.minSize,t),s=a(n.maxSize,t);let o=null;return o=r*i,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(o,i,s)}function c(e,t){const[n,r,i]=p(e,t.cache.ipData);if(n===r)return a(t.stops[n].size,e);{const s=a(t.stops[n].size,e);return s+(a(t.stops[r].size,e)-s)*i}}function m(n,i){const s=_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_1__.meterIn[i.valueUnit],o=a(i.minSize,n),u=a(i.maxSize,n),{valueRepresentation:l}=i;let c=null;return c="area"===l?2*Math.sqrt(n/r)/s:"radius"===l||"distance"===l?2*n/s:n/s,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(c,o,u)}function p(e,t){if(!t)return;let n=0,r=t.length-1;return t.some(((t,i)=>e<t?(r=i,!0):(n=i,!1))),[n,r,(e-t[n])/(t[r]-t[n])]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/tiling/TileManager.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/tiling/TileManager.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TileManager: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _TileCoverage_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TileCoverage.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileCoverage.js");
/* harmony import */ var _TileKey_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=1e-6;class l{constructor(e){this._tiles=new Map,this.buffer=0,this.acquireTile=e.acquireTile,this.releaseTile=e.releaseTile,this.tileInfoView=e.tileInfoView,this.buffer=e.buffer}destroy(){}clear(){this._tiles.forEach((e=>this._releaseTile(e)))}tileKeys(){const e=[];return this._tiles.forEach(((i,t)=>e.push(t))),e}update(t){const l=this.tileInfoView.getTileCoverage(t.state,this.buffer,!0,"closest"),{spans:s,lodInfo:r}=l,{level:a}=r,o=[],d=[],h=new Set,n=new Set;for(const{row:e,colFrom:c,colTo:f}of s)for(let t=c;t<=f;t++){const l=_TileKey_js__WEBPACK_IMPORTED_MODULE_1__["default"].getId(a,e,r.normalizeCol(t),r.getWorldForColumn(t)),s=this._getOrAcquireTile(o,l);h.add(l),s.isReady?s.visible=!0:n.add(s.key)}n.forEach((e=>this._addPlaceholders(h,e))),this._tiles.forEach((e=>{h.has(e.key.id)||(d.push(e.key.id),this._releaseTile(e))})),_TileCoverage_js__WEBPACK_IMPORTED_MODULE_0__["default"].pool.release(l);return{hasMissingTiles:n.size>0,added:o,removed:d}}_getOrAcquireTile(e,t){if(!this._tiles.has(t)){const l=this.acquireTile(new _TileKey_js__WEBPACK_IMPORTED_MODULE_1__["default"](t));e.push(t),this._tiles.set(t,l),l.visible=!1}return this._tiles.get(t)}_getTile(e){return this._tiles.get(e)}_releaseTile(e){this._tiles.delete(e.key.id),this.releaseTile(e)}_addPlaceholders(e,i){const l=this._addPlaceholderChildren(e,i);if(!(Math.abs(1-l)<t)){if(!this._addPlaceholderParent(e,i)){this._getTile(i.id).visible=!0}}}_addPlaceholderChildren(e,i){let t=0;return this._tiles.forEach((l=>{t+=this._addPlaceholderChild(e,l,i)})),t}_addPlaceholderChild(e,i,t){if(i.key.level<=t.level||!i.hasData||!t.contains(i.key))return 0;i.visible=!0,e.add(i.key.id);return 1/(1<<2*(i.key.level-t.level))}_addPlaceholderParent(e,i){let t=i.getParentKey(),l=0,s=null;for(;null!=t;){if(e.has(t.id))return!0;const i=this._getTile(t.id);if(i?.isReady){for(const i of e){const e=this._getTile(i);e&&t.contains(e.key)&&(e.visible=!1)}return i.visible=!0,e.add(i.key.id),!0}i?.hasData&&i.patchCount>l&&(l=i.patchCount,s=i),t=t.getParentKey()}return!!s&&(s.visible=!0,e.add(s.key.id),!0)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/FeatureLayerView.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/FeatureLayerView.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ P)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../layers/support/commonProperties.js */ "./node_modules/@arcgis/core/layers/support/commonProperties.js");
/* harmony import */ var _layers_support_FeatureEffect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../layers/support/FeatureEffect.js */ "./node_modules/@arcgis/core/layers/support/FeatureEffect.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../layers/support/floorFilterUtils.js */ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_popupUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const j="esri.views.layers.FeatureLayerView",q=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(j),P=r=>{let P=class extends r{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.dataUpdating=!1,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.watch)((()=>{const e=this.layer;return[e?.elevationInfo?.featureExpressionInfo,e&&"displayField"in e?e.displayField:null,e&&"timeInfo"in e&&e.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]}),(()=>this._handleRequiredFieldsChange()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.syncAndInitial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.on)((()=>this.view?.floors),"change",(()=>this._handleRequiredFieldsChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.on)((()=>{const e=this.layer;return e&&"sublayers"in e?e.sublayers:null}),"change",(()=>this._handleRequiredFieldsChange()))])}get availableFields(){const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return"outFields"in e&&e.outFields?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.fixFields)(t,[...(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.unpackFieldNames)(t,e.outFields),...r]):(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.fixFields)(t,r)}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override("featureEffect",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=null!=this.filter?this.filter.createQuery(e):new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__["default"](e);if("feature"===this.layer.type){const e=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_13__.getFloorFilterClause)(this);null!=e&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return null!=this.timeExtent&&(t.timeExtent=null!=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}createAggregateQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__["default"](e)}queryFeatures(e,t){throw new Error("missing implementation")}queryObjectIds(e,t){throw new Error("missing implementation")}queryFeatureCount(e,t){throw new Error("missing implementation")}queryExtent(e,t){throw new Error("missing implementation")}async fetchPopupFeatures(e,t){const r=this.validateFetchPopupFeatures(t);if(r)throw r;return this.fetchClientPopupFeatures(t)}_loadArcadeModules(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>"expression"===e.type))?(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_15__.loadArcade)():Promise.resolve()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set("_updatingRequiredFieldsPromise",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e="3d"===this.view.type,{layer:t,layer:{fieldsIndex:r,objectIdField:i}}=this,s="renderer"in t&&t.renderer,o="orderBy"in t&&t.orderBy,n="featureReduction"in t?t.featureReduction:null,l=new Set,a=await Promise.allSettled([s?s.collectRequiredFields(l,r):null,(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectLabelingFields)(l,t),e?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectElevationFields)(l,t):null,null!=this.filter?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFilterFields)(l,t,this.filter):null,null!=this.featureEffect?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFilterFields)(l,t,this.featureEffect.filter):null,n?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFeatureReductionFields)(l,t,n):null,o?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectOrderByInfos)(l,t,o):null]);if("timeInfo"in t&&t.timeInfo&&this.timeExtent&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFields)(l,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),"feature"===t.type&&(t.floorInfo&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFields)(l,t.fieldsIndex,[t.floorInfo.floorField]),e&&null!=t.infoFor3D&&(null==t.globalIdField&&q.error("globalIdField missing on 3DObjectFeatureLayer"),(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectFields)(l,t.fieldsIndex,[t.globalIdField]))),"subtype-group"===t.type){(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectField)(l,r,t.subtypeField);const e=t.sublayers.map((e=>Promise.all([e.renderer?.collectRequiredFields(l,r),(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectLabelingFields)(l,e)])));await Promise.allSettled(e)}for(const p of a)"rejected"===p.status&&q.error(p.reason);(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectField)(l,r,i),e&&"displayField"in t&&t.displayField&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.collectField)(l,r,t.displayField);const u=Array.from(l).sort();this._set("requiredFields",u)}validateFetchPopupFeatures(e){if(null==e)return null;for(const r of e.clientGraphics??[]){const i=r.layer;if("popupEnabled"in i&&!i.popupEnabled)return new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:i});if(r.isAggregate){const e="featureReduction"in i?i.featureReduction:null;if(!(e&&"popupTemplate"in e&&e.popupEnabled&&e.popupTemplate))return new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:i})}else if("popupTemplate"in i){if(!(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_16__.getFetchPopupTemplate)(i,e))return new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:i})}}}async fetchClientPopupFeatures(e){const t=null!=e?e.clientGraphics:null;if(!t||0===t.length)return[];const r=new Array(t.length),i=new Map,s=await this.createPopupQuery(e);for(let o=0;o<t.length;o++){const n=t[o];if(n.isAggregate){r[o]=n;continue}const l=n.layer;if(!("popupEnabled"in l))continue;const a=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.unpackFieldNames)(this.layer.fieldsIndex,s.outFields),u=(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_16__.getFetchPopupTemplate)(l,e);if(null==u)continue;const p=await this._loadArcadeModules(u);p&&p.arcadeUtils.hasGeometryOperations(u)||!(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_12__.featureHasFields)(a,n)?i.set(n.getObjectId(),{graphic:n,index:o}):r[o]=n}if("stream"===this.layer.type||0===i.size)return r.filter(Boolean);s.objectIds=Array.from(i.keys());try{const e=await this.layer.queryFeatures(s);for(const t of e.features){const{graphic:{geometry:e},index:s}=i.get(t.getObjectId());t.geometry||=e,r[s]=t}}catch{}return r.filter(Boolean)}async createPopupQuery(e){const t=this.layer.createQuery(),r=new Set;let i=!1;const s=e?.clientGraphics?e.clientGraphics.map((e=>e.layer)):[this.layer];for(const o of s){if(!("popupEnabled"in o))continue;const t=(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_16__.getFetchPopupTemplate)(o,e);if(null==t)continue;const s=await this._loadArcadeModules(t),n=s&&s.arcadeUtils.hasGeometryOperations(t);i=!("point"!==this.layer.geometryType&&!n);const l=await (0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_16__.getRequiredFields)(this.layer,t);for(const e of l)r.add(e)}if(t.returnGeometry=i,t.returnZ=i,t.returnM=i,t.outFields=Array.from(r),t.outSpatialReference=this.view.spatialReference,"feature"===this.layer.type){const e=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_13__.getFloorFilterClause)(this);null!=e&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return t}canResume(){return!!super.canResume()&&(null==this.timeExtent||!this.timeExtent.isEmpty)}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],P.prototype,"_updatingRequiredFieldsPromise",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],P.prototype,"availableFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],P.prototype,"dataUpdating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_layers_support_FeatureEffect_js__WEBPACK_IMPORTED_MODULE_10__["default"]})],P.prototype,"featureEffect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:_layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_11__["default"]})],P.prototype,"filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)(_layers_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_9__.combinedViewLayerTimeExtentProperty)],P.prototype,"timeExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],P.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({type:Number})],P.prototype,"maximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0,type:Boolean})],P.prototype,"maximumNumberOfFeaturesExceeded",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],P.prototype,"requiredFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],P.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],P.prototype,"view",void 0),P=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)(j)],P),P};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=a=>{let c=class extends a{initialize(){this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.on)((()=>this.layer),"refresh",(r=>{this.doRefresh(r.dataChanged).catch((r=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(r)}))})),"RefreshableLayerView")}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"layer",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.layers.mixins.RefreshableLayerView")],c),c};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFetchPopupTemplate: () => (/* binding */ p),
/* harmony export */   getRequiredFields: () => (/* binding */ n),
/* harmony export */   hasPopupTemplate: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.getFeatureEditFields)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19GZWF0dXJlTGF5ZXJWaWV3MkRfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDd1Qsb0JBQW9CLG1EQUFDLENBQUMsY0FBYyx3Q0FBd0MsZ0NBQWdDLGdEQUFnRCwyQ0FBMkMsbUVBQW1FLGNBQWMscUNBQXFDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxhQUFhLHVDQUF1Qyx1REFBQyxFQUFFLHNGQUFDLDhCQUE4QixVQUErQjs7Ozs7Ozs7Ozs7Ozs7O0FDSmh2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsZUFBZSxtRUFBbUUsY0FBYyxvQkFBb0IsV0FBVyw2QkFBNkIsa0NBQWtDLDhFQUE4RSxtRUFBbUUsVUFBVSw2QkFBNkIsa0NBQWtDLDZGQUE2RixPQUFPLG9EQUFvRCxRQUFRLDZCQUE2QixzREFBc0QsWUFBWSxTQUFTLHFCQUFxQixLQUFLLFFBQVEsMkJBQWdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0oxdkI7QUFDQTtBQUNBO0FBQ0E7QUFDZ1osb0JBQW9CLHlEQUFDLENBQUMsZUFBZSx5Q0FBeUMsd0RBQUcsOERBQThELHNEQUFDLGlDQUFpQyxzREFBQyxJQUFJLHNCQUFzQix3Q0FBd0MscUJBQXFCLHNEQUFzRCxhQUFhLHNEQUFzRCxpQkFBaUIsZ0ZBQWdGLHNCQUFzQix3Q0FBd0MsYUFBYSx1RkFBdUYsb0JBQW9CLHNGQUFzRixvQkFBb0IsZ1BBQWdQLGlCQUFpQixzR0FBc0csaUJBQWlCLDBLQUEwSyxvS0FBb0ssdURBQUMsRUFBRSxzRkFBQyxrQ0FBa0MsdURBQUMsRUFBRSxzRkFBQyw4Q0FBOEMsdURBQUMsRUFBRSxzRkFBQyw4Q0FBOEMsdURBQUMsRUFBRSxzRkFBQyxtQ0FBbUMsdURBQUMsRUFBRSxzRkFBQyx3Q0FBd0MsdURBQUMsRUFBRSxzRkFBQyxzQ0FBc0Ms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RUFBQyxLQUFLLHVEQUFDLDBCQUEwQixHQUFHLDZCQUE2QixPQUFPLHVEQUFDLEVBQUUsc0ZBQUMsa0NBQWtDLHVEQUFDLEVBQUUsc0ZBQUMsbURBQXdFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdndCO0FBQ0E7QUFDQTtBQUNBO0FBQzRGLHNDQUFzQyxvQkFBb0Isa0RBQWtELHNCQUFzQixJQUFJLDhEQUE4RCxHQUFHLCtCQUErQixVQUFVLG1GQUFDLFNBQVMsd0VBQUMsNEJBQTRCLG9KQUFvSixNQUFNLFdBQVcsR0FBRyx1REFBdUQsS0FBSyxnQkFBZ0Isd0lBQXdJLGdCQUFnQixrQkFBa0IsOEJBQThCLEVBQWtGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL0FnZ3JlZ2F0ZUdyYXBoaWMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvQ2lyY3VsYXJBcnJheS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2VmZmVjdHMvRmVhdHVyZUVmZmVjdFZpZXcuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L2Zsb29yRmlsdGVyVXRpbHMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3Jlc3Qvc3VwcG9ydC9BZ2dyZWdhdGVGZWF0dXJlU2V0LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvQml0bWFwLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvQml0bWFwVGlsZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL0JpdG1hcFRpbGVDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS9GZWF0dXJlQ29udGFpbmVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvSW1hZ2VyeUJpdG1hcFNvdXJjZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL0J1ZmZlclBvb2wuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9GZWF0dXJlVGlsZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL1RpbGVDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9XR0xSZW5kZXJlckluZm8uanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9jb2xsaXNpb25zL01ldHJpY1JlYWRlci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL2NwdU1hcHBlZC9CdWZmZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9jcHVNYXBwZWQvR2VvbWV0cnkuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9GZWF0dXJlTGF5ZXJWaWV3MkQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy90aWxlUmVuZGVyZXJzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvdGlsZVJlbmRlcmVycy9CYXNlVGlsZVJlbmRlcmVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvdGlsZVJlbmRlcmVycy9IZWF0bWFwVGlsZVJlbmRlcmVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvdGlsZVJlbmRlcmVycy9TeW1ib2xUaWxlUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy90aWxlUmVuZGVyZXJzL3N1cHBvcnQvSGVhdG1hcFNvdXJjZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3RpbGVSZW5kZXJlcnMvc3VwcG9ydC9XR0xGZWF0dXJlVmlldy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL3N1cHBvcnQvRmVhdHVyZUNvbW1hbmRRdWV1ZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL3N1cHBvcnQvRmVhdHVyZUxheWVyUHJveHkuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlU2ltcGxlVXRpbHMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL3RpbGluZy9UaWxlTWFuYWdlci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvbGF5ZXJzL0ZlYXR1cmVMYXllclZpZXcuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2xheWVycy9SZWZyZXNoYWJsZUxheWVyVmlldy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvbGF5ZXJzL3N1cHBvcnQvcG9wdXBVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuL0dyYXBoaWMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgdH1mcm9tXCIuL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgb31mcm9tXCIuL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtsZXQgcD1jbGFzcyBleHRlbmRzIHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuaXNBZ2dyZWdhdGU9ITB9Z2V0RWZmZWN0aXZlUG9wdXBUZW1wbGF0ZShlPSExKXtpZih0aGlzLnBvcHVwVGVtcGxhdGUpcmV0dXJuIHRoaXMucG9wdXBUZW1wbGF0ZTtjb25zdCByPXRoaXMuc291cmNlTGF5ZXI/LmZlYXR1cmVSZWR1Y3Rpb247cmV0dXJuIHImJlwicG9wdXBUZW1wbGF0ZVwiaW4gciYmci5wb3B1cEVuYWJsZWQ/ci5wb3B1cFRlbXBsYXRlOm51bGx9Z2V0T2JqZWN0SWQoKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzLmFnZ3JlZ2F0ZUlkfX07ZShbdCh7dHlwZTpCb29sZWFufSldLHAucHJvdG90eXBlLFwiaXNBZ2dyZWdhdGVcIix2b2lkIDApLHA9ZShbbyhcImVzcmkuQWdncmVnYXRlR3JhcGhpY1wiKV0scCk7Y29uc3Qgcz1wO2V4cG9ydHtzIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIHR7Y29uc3RydWN0b3IodCl7dGhpcy5zaXplPTAsdGhpcy5fc3RhcnQ9MCx0aGlzLm1heFNpemU9dCx0aGlzLl9idWZmZXI9bmV3IEFycmF5KHQpfWdldCBlbnRyaWVzKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcn1lbnF1ZXVlKHQpe2lmKHRoaXMuc2l6ZT09PXRoaXMubWF4U2l6ZSl7Y29uc3Qgcz10aGlzLl9idWZmZXJbdGhpcy5fc3RhcnRdO3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fc3RhcnRdPXQsdGhpcy5fc3RhcnQ9KHRoaXMuX3N0YXJ0KzEpJXRoaXMubWF4U2l6ZSxzfXJldHVybiB0aGlzLl9idWZmZXJbKHRoaXMuX3N0YXJ0K3RoaXMuc2l6ZSsrKSV0aGlzLm1heFNpemVdPXQsbnVsbH1kZXF1ZXVlKCl7aWYoMD09PXRoaXMuc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCB0PXRoaXMuX2J1ZmZlclt0aGlzLl9zdGFydF07cmV0dXJuIHRoaXMuX2J1ZmZlclt0aGlzLl9zdGFydF09bnVsbCx0aGlzLnNpemUtLSx0aGlzLl9zdGFydD0odGhpcy5fc3RhcnQrMSkldGhpcy5tYXhTaXplLHR9cGVlaygpe3JldHVybiAwPT09dGhpcy5zaXplP251bGw6dGhpcy5fYnVmZmVyW3RoaXMuX3N0YXJ0XX1maW5kKHQpe2lmKDA9PT10aGlzLnNpemUpcmV0dXJuIG51bGw7Zm9yKGNvbnN0IHMgb2YgdGhpcy5fYnVmZmVyKWlmKG51bGwhPXMmJnQocykpcmV0dXJuIHM7cmV0dXJuIG51bGx9Y2xlYXIodCl7bGV0IHM9dGhpcy5kZXF1ZXVlKCk7Zm9yKDtudWxsIT1zOyl0JiZ0KHMpLHM9dGhpcy5kZXF1ZXVlKCl9fWV4cG9ydHt0IGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtFZmZlY3RWaWV3IGFzIGZ9ZnJvbVwiLi9FZmZlY3RWaWV3LmpzXCI7bGV0IGM9Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2ZpbHRlcj1udWxsLHRoaXMuZHVyYXRpb249aGFzKFwibWFwdmlldy10cmFuc2l0aW9ucy1kdXJhdGlvblwiKSx0aGlzLl9leGNsdWRlZEVmZmVjdFZpZXc9bmV3IGYoZSksdGhpcy5faW5jbHVkZWRFZmZlY3RWaWV3PW5ldyBmKGUpfWdldCBleGNsdWRlZEVmZmVjdHMoKXtyZXR1cm4gdGhpcy5fZXhjbHVkZWRFZmZlY3RWaWV3LmVmZmVjdHN9c2V0IGZlYXR1cmVFZmZlY3QoZSl7dGhpcy5fZ2V0KFwiZmVhdHVyZUVmZmVjdFwiKSE9PWUmJnRoaXMuX3RyYW5zaXRpb25UbyhlKX1nZXQgZmlsdGVyKCl7cmV0dXJuIHRoaXMuX2ZpbHRlcnx8dGhpcy5mZWF0dXJlRWZmZWN0Py5maWx0ZXJ8fG51bGx9Z2V0IGhhc0VmZmVjdHMoKXtyZXR1cm4gdGhpcy5fZXhjbHVkZWRFZmZlY3RWaWV3Lmhhc0VmZmVjdHN8fHRoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy5oYXNFZmZlY3RzfWdldCBpbmNsdWRlZEVmZmVjdHMoKXtyZXR1cm4gdGhpcy5faW5jbHVkZWRFZmZlY3RWaWV3LmVmZmVjdHN9c2V0IHNjYWxlKGUpe3RoaXMuX3NldChcInNjYWxlXCIsZSksdGhpcy5fZXhjbHVkZWRFZmZlY3RWaWV3LnNjYWxlPWUsdGhpcy5faW5jbHVkZWRFZmZlY3RWaWV3LnNjYWxlPWV9Z2V0IHRyYW5zaXRpb25pbmcoKXtyZXR1cm4gdGhpcy5fZXhjbHVkZWRFZmZlY3RWaWV3LnRyYW5zaXRpb25pbmd8fHRoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy50cmFuc2l0aW9uaW5nfXRyYW5zaXRpb25TdGVwKGUsdCl7dGhpcy5fc2V0KFwic2NhbGVcIix0KSx0aGlzLnRyYW5zaXRpb25pbmc/KHRoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy50cmFuc2l0aW9uU3RlcChlLHQpLHRoaXMuX2V4Y2x1ZGVkRWZmZWN0Vmlldy50cmFuc2l0aW9uU3RlcChlLHQpLHRoaXMudHJhbnNpdGlvbmluZ3x8KHRoaXMuX2ZpbHRlcj1udWxsKSk6KHRoaXMuX2V4Y2x1ZGVkRWZmZWN0Vmlldy5zY2FsZT10LHRoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy5zY2FsZT10KX1lbmRUcmFuc2l0aW9ucygpe3RoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy5lbmRUcmFuc2l0aW9ucygpLHRoaXMuX2V4Y2x1ZGVkRWZmZWN0Vmlldy5lbmRUcmFuc2l0aW9ucygpLHRoaXMuX2ZpbHRlcj1udWxsfV90cmFuc2l0aW9uVG8oZSl7Y29uc3QgdD10aGlzLl9nZXQoXCJmZWF0dXJlRWZmZWN0XCIpLGk9ZSxzPWk/LmluY2x1ZGVkRWZmZWN0LGY9aT8uZXhjbHVkZWRFZmZlY3QsYz10aGlzLl9pbmNsdWRlZEVmZmVjdFZpZXcuY2FuVHJhbnNpdGlvblRvKHMpJiZ0aGlzLl9leGNsdWRlZEVmZmVjdFZpZXcuY2FuVHJhbnNpdGlvblRvKGYpO3RoaXMuX2luY2x1ZGVkRWZmZWN0Vmlldy5lZmZlY3Q9cyx0aGlzLl9leGNsdWRlZEVmZmVjdFZpZXcuZWZmZWN0PWYsdGhpcy5fc2V0KFwiZmVhdHVyZUVmZmVjdFwiLGkpLHRoaXMuX2ZpbHRlcj1pPy5maWx0ZXJ8fHQ/LmZpbHRlcnx8bnVsbCxjfHx0aGlzLmVuZFRyYW5zaXRpb25zKCl9fTtlKFtpKCldLGMucHJvdG90eXBlLFwiX2ZpbHRlclwiLHZvaWQgMCksZShbaSgpXSxjLnByb3RvdHlwZSxcIl9leGNsdWRlZEVmZmVjdFZpZXdcIix2b2lkIDApLGUoW2koKV0sYy5wcm90b3R5cGUsXCJfaW5jbHVkZWRFZmZlY3RWaWV3XCIsdm9pZCAwKSxlKFtpKCldLGMucHJvdG90eXBlLFwiZHVyYXRpb25cIix2b2lkIDApLGUoW2koKV0sYy5wcm90b3R5cGUsXCJleGNsdWRlZEVmZmVjdHNcIixudWxsKSxlKFtpKCldLGMucHJvdG90eXBlLFwiZmVhdHVyZUVmZmVjdFwiLG51bGwpLGUoW2koKV0sYy5wcm90b3R5cGUsXCJmaWx0ZXJcIixudWxsKSxlKFtpKCldLGMucHJvdG90eXBlLFwiaGFzRWZmZWN0c1wiLG51bGwpLGUoW2koKV0sYy5wcm90b3R5cGUsXCJpbmNsdWRlZEVmZmVjdHNcIixudWxsKSxlKFtpKHt2YWx1ZTowfSldLGMucHJvdG90eXBlLFwic2NhbGVcIixudWxsKSxlKFtpKCldLGMucHJvdG90eXBlLFwidHJhbnNpdGlvbmluZ1wiLG51bGwpLGM9ZShbcyhcImVzcmkubGF5ZXJzLmVmZmVjdHMuRmVhdHVyZUVmZmVjdFZpZXdcIildLGMpO2NvbnN0IHI9YztleHBvcnR7ciBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBvKG8pe2NvbnN0IG49by5sYXllcjtpZihcImZsb29ySW5mb1wiaW4gbiYmbi5mbG9vckluZm8/LmZsb29yRmllbGQmJlwiZmxvb3JzXCJpbiBvLnZpZXcpe3JldHVybiBsKG8udmlldy5mbG9vcnMsbi5mbG9vckluZm8uZmxvb3JGaWVsZCl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gbihvLG4pe3JldHVyblwiZmxvb3JJbmZvXCJpbiBuJiZuLmZsb29ySW5mbz8uZmxvb3JGaWVsZD9sKG8sbi5mbG9vckluZm8uZmxvb3JGaWVsZCk6bnVsbH1mdW5jdGlvbiBsKG8sbil7aWYoIW8/Lmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBsPW8uZmlsdGVyKChvPT5cIlwiIT09bykpLm1hcCgobz0+YCcke299J2ApKTtyZXR1cm4gbC5wdXNoKFwiJydcIiksYCR7bn0gSU4gKCR7bC5qb2luKFwiLFwiKX0pIE9SICR7bn0gSVMgTlVMTGB9ZXhwb3J0e28gYXMgZ2V0Rmxvb3JGaWx0ZXJDbGF1c2UsbiBhcyBnZXRMYXllckZsb29yRmlsdGVyQ2xhdXNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9BZ2dyZWdhdGVHcmFwaGljLmpzXCI7aW1wb3J0XCIuLi8uLi9nZW9tZXRyeS5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7cmVhZGVyIGFzIG99ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9yZWFkZXIuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgc31mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi9GZWF0dXJlU2V0LmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vLi4vZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZS5qc1wiO2xldCBjPWNsYXNzIGV4dGVuZHMgYXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5mZWF0dXJlcz1bXX1yZWFkRmVhdHVyZXMoZSx0KXtjb25zdCBvPXAuZnJvbUpTT04odC5zcGF0aWFsUmVmZXJlbmNlKSxzPVtdO2ZvcihsZXQgYT0wO2E8ZS5sZW5ndGg7YSsrKXtjb25zdCB0PWVbYV0scD1yLmZyb21KU09OKHQpLGM9dC5nZW9tZXRyeT8uc3BhdGlhbFJlZmVyZW5jZTtudWxsPT1wLmdlb21ldHJ5fHxjfHwocC5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPW8pO2NvbnN0IGk9dC5hZ2dyZWdhdGVHZW9tZXRyaWVzLG09cC5hZ2dyZWdhdGVHZW9tZXRyaWVzO2lmKGkmJm51bGwhPW0pZm9yKGNvbnN0IGUgaW4gbSl7Y29uc3Qgcj1tW2VdLHQ9aVtlXSxzPXQ/LnNwYXRpYWxSZWZlcmVuY2U7bnVsbD09cnx8c3x8KHIuc3BhdGlhbFJlZmVyZW5jZT1vKX1zLnB1c2gocCl9cmV0dXJuIHN9fTtlKFt0KHt0eXBlOltyXSxqc29uOnt3cml0ZTohMH19KV0sYy5wcm90b3R5cGUsXCJmZWF0dXJlc1wiLHZvaWQgMCksZShbbyhcImZlYXR1cmVzXCIpXSxjLnByb3RvdHlwZSxcInJlYWRGZWF0dXJlc1wiLG51bGwpLGM9ZShbcyhcImVzcmkucmVzdC5zdXBwb3J0LkFnZ3JlZ2F0ZUZlYXR1cmVTZXRcIildLGMpO2NvbnN0IGk9YztleHBvcnR7aSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgdCxvbkFib3J0T3JUaHJvdyBhcyBlLHRocm93SWZOb3RBYm9ydEVycm9yIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7ZyBhcyBpLGggYXMgcixyIGFzIGgsbCBhcyBvLG0gYXMgdX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvbWF0My5qc1wiO2ltcG9ydHtjIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL21hdDNmMzIuanNcIjtpbXBvcnR7ZiBhcyBufWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMyZjMyLmpzXCI7aW1wb3J0e0Rpc3BsYXlPYmplY3QgYXMgZH1mcm9tXCIuL0Rpc3BsYXlPYmplY3QuanNcIjtpbXBvcnQgbCBmcm9tXCIuL0ltYWdlcnlCaXRtYXBTb3VyY2UuanNcIjtpbXBvcnR7Q29udGV4dFR5cGUgYXMgY31mcm9tXCIuLi8uLi93ZWJnbC9jb250ZXh0VXRpbHMuanNcIjtpbXBvcnR7U2l6ZWRQaXhlbEZvcm1hdCBhcyBfLFBpeGVsRm9ybWF0IGFzIHAsVGV4dHVyZVdyYXBNb2RlIGFzIG19ZnJvbVwiLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyB4fWZyb21cIi4uLy4uL3dlYmdsL1RleHR1cmUuanNcIjtpbXBvcnR7VGV4dHVyZURlc2NyaXB0b3IgYXMgZ31mcm9tXCIuLi8uLi93ZWJnbC9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2Z1bmN0aW9uIGYodCl7cmV0dXJuIHQmJlwicmVuZGVyXCJpbiB0fWZ1bmN0aW9uIHcodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3JldHVybiBlLndpZHRoPXQud2lkdGgsZS5oZWlnaHQ9dC5oZWlnaHQsdC5yZW5kZXIoZS5nZXRDb250ZXh0KFwiMmRcIikpLGV9ZnVuY3Rpb24gdih0KXtyZXR1cm4gZih0KT90IGluc3RhbmNlb2YgbD90LmdldFJlbmRlcmVkUmFzdGVyUGl4ZWxzKCk/LnJlbmRlcmVkUmFzdGVyUGl4ZWxzOncodCk6dH1jbGFzcyBiIGV4dGVuZHMgZHtjb25zdHJ1Y3Rvcih0PW51bGwsZT0hMSl7c3VwZXIoKSx0aGlzLmJsZW5kRnVuY3Rpb249XCJzdGFuZGFyZFwiLHRoaXMuX3NvdXJjZVdpZHRoPTAsdGhpcy5fc291cmNlSGVpZ2h0PTAsdGhpcy5fdGV4dHVyZUludmFsaWRhdGVkPSExLHRoaXMuX3RleHR1cmU9bnVsbCx0aGlzLnN0ZW5jaWxSZWY9MCx0aGlzLmNvb3JkU2NhbGU9WzEsMV0sdGhpcy5faGVpZ2h0PXZvaWQgMCx0aGlzLnBpeGVsUmF0aW89MSx0aGlzLnJlc29sdXRpb249MCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5fc291cmNlPW51bGwsdGhpcy5fd2lkdGg9dm9pZCAwLHRoaXMueD0wLHRoaXMueT0wLHRoaXMuaW1tdXRhYmxlPWUsdGhpcy5zb3VyY2U9dCx0aGlzLnJlcXVlc3RSZW5kZXI9dGhpcy5yZXF1ZXN0UmVuZGVyLmJpbmQodGhpcyl9ZGVzdHJveSgpe3RoaXMuX3RleHR1cmUmJih0aGlzLl90ZXh0dXJlLmRpc3Bvc2UoKSx0aGlzLl90ZXh0dXJlPW51bGwpLG51bGwhPXRoaXMuX3VwbG9hZFN0YXR1cyYmKHRoaXMuX3VwbG9hZFN0YXR1cy5jb250cm9sbGVyLmFib3J0KCksdGhpcy5fdXBsb2FkU3RhdHVzPW51bGwpfWdldCBpc1NvdXJjZVNjYWxlZCgpe3JldHVybiB0aGlzLndpZHRoIT09dGhpcy5fc291cmNlV2lkdGh8fHRoaXMuaGVpZ2h0IT09dGhpcy5fc291cmNlSGVpZ2h0fWdldCBoZWlnaHQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5faGVpZ2h0P3RoaXMuX2hlaWdodDp0aGlzLl9zb3VyY2VIZWlnaHR9c2V0IGhlaWdodCh0KXt0aGlzLl9oZWlnaHQ9dH1nZXQgc291cmNlKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX1zZXQgc291cmNlKHQpe251bGw9PXQmJm51bGw9PXRoaXMuX3NvdXJjZXx8KHRoaXMuX3NvdXJjZT10LHRoaXMuaW52YWxpZGF0ZVRleHR1cmUoKSx0aGlzLnJlcXVlc3RSZW5kZXIoKSl9Z2V0IHdpZHRoKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuX3dpZHRoP3RoaXMuX3dpZHRoOnRoaXMuX3NvdXJjZVdpZHRofXNldCB3aWR0aCh0KXt0aGlzLl93aWR0aD10fWJlZm9yZVJlbmRlcih0KXtzdXBlci5iZWZvcmVSZW5kZXIodCksdGhpcy51cGRhdGVUZXh0dXJlKHQpfWFzeW5jIHNldFNvdXJjZUFzeW5jKHMsaSl7bnVsbCE9dGhpcy5fdXBsb2FkU3RhdHVzJiZ0aGlzLl91cGxvYWRTdGF0dXMuY29udHJvbGxlci5hYm9ydCgpO2NvbnN0IHI9bmV3IEFib3J0Q29udHJvbGxlcixoPXQoKTtyZXR1cm4gZShpLCgoKT0+ci5hYm9ydCgpKSksZShyLCh0PT5oLnJlamVjdCh0KSkpLHRoaXMuX3VwbG9hZFN0YXR1cz17Y29udHJvbGxlcjpyLHJlc29sdmVyOmh9LHRoaXMuc291cmNlPXMsaC5wcm9taXNlfWludmFsaWRhdGVUZXh0dXJlKCl7dGhpcy5fdGV4dHVyZUludmFsaWRhdGVkfHwodGhpcy5fdGV4dHVyZUludmFsaWRhdGVkPSEwLHRoaXMuX3NvdXJjZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/KHRoaXMuX3NvdXJjZUhlaWdodD10aGlzLl9zb3VyY2UubmF0dXJhbEhlaWdodCx0aGlzLl9zb3VyY2VXaWR0aD10aGlzLl9zb3VyY2UubmF0dXJhbFdpZHRoKTp0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2VIZWlnaHQ9dGhpcy5fc291cmNlLmhlaWdodCx0aGlzLl9zb3VyY2VXaWR0aD10aGlzLl9zb3VyY2Uud2lkdGgpKX11cGRhdGVUcmFuc2l0aW9uUHJvcGVydGllcyh0LGUpe3Q+PTY0JiYodGhpcy5mYWRlVHJhbnNpdGlvbkVuYWJsZWQ9ITEsdGhpcy5pbkZhZGVUcmFuc2l0aW9uPSExKSxzdXBlci51cGRhdGVUcmFuc2l0aW9uUHJvcGVydGllcyh0LGUpfXNldFRyYW5zZm9ybSh0KXtjb25zdCBlPWkodGhpcy50cmFuc2Zvcm1zLmR2cyksW3MsYV09dC50b1NjcmVlbk5vUm90YXRpb24oWzAsMF0sW3RoaXMueCx0aGlzLnldKSxkPXRoaXMucmVzb2x1dGlvbi90aGlzLnBpeGVsUmF0aW8vdC5yZXNvbHV0aW9uLGw9ZCp0aGlzLndpZHRoLGM9ZCp0aGlzLmhlaWdodCxfPU1hdGguUEkqdGhpcy5yb3RhdGlvbi8xODA7cihlLGUsbihzLGEpKSxyKGUsZSxuKGwvMixjLzIpKSxoKGUsZSwtXykscihlLGUsbigtbC8yLC1jLzIpKSxvKGUsZSxuKGwsYykpLHUodGhpcy50cmFuc2Zvcm1zLmR2cyx0LmRpc3BsYXlWaWV3TWF0MyxlKX1zZXRTYW1wbGluZ1Byb2ZpbGUodCl7dGhpcy5fdGV4dHVyZSYmKHQubWlwcyYmIXRoaXMuX3RleHR1cmUuZGVzY3JpcHRvci5oYXNNaXBtYXAmJnRoaXMuX3RleHR1cmUuZ2VuZXJhdGVNaXBtYXAoKSx0aGlzLl90ZXh0dXJlLnNldFNhbXBsaW5nTW9kZSh0LnNhbXBsaW5nTW9kZSkpfWJpbmQodCxlKXt0aGlzLl90ZXh0dXJlJiZ0LmJpbmRUZXh0dXJlKHRoaXMuX3RleHR1cmUsZSl9YXN5bmMgdXBkYXRlVGV4dHVyZSh7Y29udGV4dDp0LHBhaW50ZXI6ZX0pe2lmKCF0aGlzLl90ZXh0dXJlSW52YWxpZGF0ZWQpcmV0dXJuO2lmKHRoaXMuX3RleHR1cmVJbnZhbGlkYXRlZD0hMSx0aGlzLl90ZXh0dXJlfHwodGhpcy5fdGV4dHVyZT10aGlzLl9jcmVhdGVUZXh0dXJlKHQpKSwhdGhpcy5zb3VyY2UpcmV0dXJuIHZvaWQgdGhpcy5fdGV4dHVyZS5zZXREYXRhKG51bGwpO3RoaXMuX3RleHR1cmUucmVzaXplKHRoaXMuX3NvdXJjZVdpZHRoLHRoaXMuX3NvdXJjZUhlaWdodCk7Y29uc3QgaT12KHRoaXMuc291cmNlKTt0cnl7aWYobnVsbCE9dGhpcy5fdXBsb2FkU3RhdHVzKXtjb25zdHtjb250cm9sbGVyOnQscmVzb2x2ZXI6c309dGhpcy5fdXBsb2FkU3RhdHVzLHI9e3NpZ25hbDp0LnNpZ25hbH0se3dpZHRoOmgsaGVpZ2h0Om99PXRoaXMsdT10aGlzLl90ZXh0dXJlLGE9ZS50ZXh0dXJlVXBsb2FkTWFuYWdlcjthd2FpdCBhLmVucXVldWVUZXh0dXJlVXBkYXRlKHtkYXRhOmksdGV4dHVyZTp1LHdpZHRoOmgsaGVpZ2h0Om99LHIpLHMucmVzb2x2ZSgpLHRoaXMuX3VwbG9hZFN0YXR1cz1udWxsfWVsc2UgdGhpcy5fdGV4dHVyZS5zZXREYXRhKGkpO3RoaXMucmVhZHkoKX1jYXRjaChyKXtzKHIpfX1vbkRldGFjaCgpe3RoaXMuZGVzdHJveSgpfV9jcmVhdGVUcmFuc2Zvcm1zKCl7cmV0dXJue2R2czphKCl9fV9jcmVhdGVUZXh0dXJlKHQpe2NvbnN0IGU9dGhpcy5pbW11dGFibGUmJnQudHlwZT09PWMuV0VCR0wyLHM9bmV3IGc7cmV0dXJuIHMuaW50ZXJuYWxGb3JtYXQ9ZT9fLlJHQkE4OnAuUkdCQSxzLndyYXBNb2RlPW0uQ0xBTVBfVE9fRURHRSxzLmlzSW1tdXRhYmxlPWUscy53aWR0aD10aGlzLl9zb3VyY2VXaWR0aCxzLmhlaWdodD10aGlzLl9zb3VyY2VIZWlnaHQsbmV3IHgodCxzKX19ZXhwb3J0e2IgYXMgQml0bWFwLGYgYXMgaXNJbWFnZVNvdXJjZSx3IGFzIHJhc3Rlcml6ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2MgYXMgdH1mcm9tXCIuLi8uLi8uLi9jaHVua3MvbWF0M2YzMi5qc1wiO2ltcG9ydHtCaXRtYXAgYXMgZX1mcm9tXCIuL0JpdG1hcC5qc1wiO2ltcG9ydHtUaWxlZERpc3BsYXlPYmplY3QgYXMgc31mcm9tXCIuL3dlYmdsL1RpbGVkRGlzcGxheU9iamVjdC5qc1wiO2NsYXNzIHIgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKHQscyxyLGksYSxuLG09bnVsbCl7c3VwZXIodCxzLHIsaSxhLG4pLHRoaXMuYml0bWFwPW5ldyBlKG0pLHRoaXMuYml0bWFwLmNvb3JkU2NhbGU9W2Esbl0sdGhpcy5iaXRtYXAub25jZShcImlzUmVhZHlcIiwoKCk9PnRoaXMucmVhZHkoKSkpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5iaXRtYXAuZGVzdHJveSgpfWJlZm9yZVJlbmRlcih0KXt0aGlzLmJpdG1hcC5iZWZvcmVSZW5kZXIodCksc3VwZXIuYmVmb3JlUmVuZGVyKHQpfWFmdGVyUmVuZGVyKHQpe3RoaXMuYml0bWFwLmFmdGVyUmVuZGVyKHQpLHN1cGVyLmFmdGVyUmVuZGVyKHQpfXNldCBzdGVuY2lsUmVmKHQpe3RoaXMuYml0bWFwLnN0ZW5jaWxSZWY9dH1nZXQgc3RlbmNpbFJlZigpe3JldHVybiB0aGlzLmJpdG1hcC5zdGVuY2lsUmVmfV9jcmVhdGVUcmFuc2Zvcm1zKCl7cmV0dXJue2R2czp0KCksdGlsZU1hdDM6dCgpfX1zZXRUcmFuc2Zvcm0odCl7c3VwZXIuc2V0VHJhbnNmb3JtKHQpLHRoaXMuYml0bWFwLnRyYW5zZm9ybXMuZHZzPXRoaXMudHJhbnNmb3Jtcy5kdnN9b25BdHRhY2goKXt0aGlzLmJpdG1hcC5zdGFnZT10aGlzLnN0YWdlfW9uRGV0YWNoKCl7dGhpcy5iaXRtYXAmJih0aGlzLmJpdG1hcC5zdGFnZT1udWxsKX19ZXhwb3J0e3IgYXMgQml0bWFwVGlsZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZSBhcyBlfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7Qml0bWFwVGlsZSBhcyBpfWZyb21cIi4vQml0bWFwVGlsZS5qc1wiO2ltcG9ydHticnVzaGVzIGFzIHJ9ZnJvbVwiLi9icnVzaGVzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyB0fWZyb21cIi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnQgcyBmcm9tXCIuL3dlYmdsL1RpbGVDb250YWluZXIuanNcIjtjbGFzcyBuIGV4dGVuZHMgc3tnZXQgcmVxdWlyZXNEZWRpY2F0ZWRGQk8oKXtyZXR1cm4gdGhpcy5jaGlsZHJlbi5zb21lKChlPT5cImFkZGl0aXZlXCI9PT1lLmJpdG1hcC5ibGVuZEZ1bmN0aW9uKSl9Y3JlYXRlVGlsZShyKXtjb25zdCB0PXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKGUoKSxyKSxzPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbihyLmxldmVsKSxbbixvXT10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2l6ZTtyZXR1cm4gbmV3IGkocixzLHRbMF0sdFszXSxuLG8pfXByZXBhcmVSZW5kZXJQYXNzZXMoZSl7Y29uc3QgaT1lLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcImJpdG1hcCAodGlsZSlcIixicnVzaGVzOltyLmJpdG1hcF0sdGFyZ2V0OigpPT50aGlzLmNoaWxkcmVuLm1hcCgoZT0+ZS5iaXRtYXApKSxkcmF3UGhhc2U6dC5NQVB9KTtyZXR1cm5bLi4uc3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhlKSxpXX1kb1JlbmRlcihlKXt0aGlzLnZpc2libGUmJmUuZHJhd1BoYXNlPT09dC5NQVAmJnN1cGVyLmRvUmVuZGVyKGUpfX1leHBvcnR7biBhcyBCaXRtYXBUaWxlQ29udGFpbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgZX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvUXVldWUuanNcIjtpbXBvcnR7QXR0cmlidXRlU3RvcmVWaWV3IGFzIHJ9ZnJvbVwiLi93ZWJnbC9BdHRyaWJ1dGVTdG9yZVZpZXcuanNcIjtpbXBvcnQgcyBmcm9tXCIuL3dlYmdsL1RpbGVDb250YWluZXIuanNcIjtpbXBvcnR7V0dMUmVuZGVyZXJJbmZvIGFzIGl9ZnJvbVwiLi93ZWJnbC9XR0xSZW5kZXJlckluZm8uanNcIjtjbGFzcyBvIGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9yZW5kZXJlckluZm89bmV3IGksdGhpcy5fbWF0ZXJpYWxJdGVtc1JlcXVlc3RRdWV1ZT1uZXcgdCx0aGlzLmF0dHJpYnV0ZVZpZXc9bmV3IHIoKCgpPT50aGlzLm9uQXR0cmlidXRlU3RvcmVVcGRhdGUoKSkpfWRlc3Ryb3koKXt0aGlzLmNoaWxkcmVuLmZvckVhY2goKGU9PmUuZGVzdHJveSgpKSksdGhpcy5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuYXR0cmlidXRlVmlldy5kZXN0cm95KCksdGhpcy5fbWF0ZXJpYWxJdGVtc1JlcXVlc3RRdWV1ZS5jbGVhcigpfXNldFJlbmRlcmVySW5mbyhlLHQscil7dGhpcy5fcmVuZGVyZXJJbmZvLnNldEluZm8oZSx0LHIpLHRoaXMucmVxdWVzdFJlbmRlcigpfWFzeW5jIGdldE1hdGVyaWFsSXRlbXModCxyKXtpZighdHx8MD09PXQubGVuZ3RoKXJldHVybltdO2NvbnN0IHM9ZSgpO3JldHVybiB0aGlzLl9tYXRlcmlhbEl0ZW1zUmVxdWVzdFF1ZXVlLnB1c2goe2l0ZW1zOnQsYWJvcnRPcHRpb25zOnIscmVzb2x2ZXI6c30pLHRoaXMucmVxdWVzdFJlbmRlcigpLHMucHJvbWlzZX1kb1JlbmRlcihlKXtpZihlLmNvbnRleHQuY2FwYWJpbGl0aWVzLmVuYWJsZShcInRleHR1cmVGbG9hdFwiKSxlLmNvbnRleHQuY2FwYWJpbGl0aWVzLmVuYWJsZShcInZhb1wiKSx0aGlzLl9tYXRlcmlhbEl0ZW1zUmVxdWVzdFF1ZXVlLmxlbmd0aD4wKXtsZXQgdD10aGlzLl9tYXRlcmlhbEl0ZW1zUmVxdWVzdFF1ZXVlLnBvcCgpO2Zvcig7dDspdGhpcy5fcHJvY2Vzc01hdGVyaWFsSXRlbVJlcXVlc3QoZSx0KSx0PXRoaXMuX21hdGVyaWFsSXRlbXNSZXF1ZXN0UXVldWUucG9wKCl9c3VwZXIuZG9SZW5kZXIoZSl9cmVuZGVyQ2hpbGRyZW4oZSl7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jaGlsZHJlbil0LmNvbW1pdChlKTt0aGlzLl9yZW5kZXJlckluZm8udXBkYXRlKGUuc3RhdGUpLHN1cGVyLnJlbmRlckNoaWxkcmVuKGUpfWNyZWF0ZVJlbmRlclBhcmFtcyhlKXtjb25zdCB0PXN1cGVyLmNyZWF0ZVJlbmRlclBhcmFtcyhlKTtyZXR1cm4gdC5yZW5kZXJlckluZm89dGhpcy5fcmVuZGVyZXJJbmZvLHQuYXR0cmlidXRlVmlldz10aGlzLmF0dHJpYnV0ZVZpZXcsdH1vbkF0dHJpYnV0ZVN0b3JlVXBkYXRlKCl7fV9wcm9jZXNzTWF0ZXJpYWxJdGVtUmVxdWVzdChlLHtpdGVtczp0LGFib3J0T3B0aW9uczpyLHJlc29sdmVyOnN9KXtjb25zdHtwYWludGVyOmkscGl4ZWxSYXRpbzpvfT1lLG49dC5tYXAoKGU9PmkudGV4dHVyZU1hbmFnZXIucmFzdGVyaXplSXRlbShlLnN5bWJvbCxvLGUuZ2x5cGhJZHMscikpKTtQcm9taXNlLmFsbChuKS50aGVuKChlPT57aWYoIXRoaXMuc3RhZ2UpcmV0dXJuIHZvaWQgcy5yZWplY3QoKTtjb25zdCByPWUubWFwKCgoZSxyKT0+KHtpZDp0W3JdLmlkLG1vc2FpY0l0ZW06ZX0pKSk7cy5yZXNvbHZlKHIpfSkscy5yZWplY3QpfX1leHBvcnR7byBhcyBGZWF0dXJlQ29udGFpbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBse2NvbnN0cnVjdG9yKGwsZSx0KXt0aGlzLnBpeGVsQmxvY2s9bCx0aGlzLmV4dGVudD1lLHRoaXMub3JpZ2luYWxQaXhlbEJsb2NrPXR9Z2V0IHdpZHRoKCl7cmV0dXJuIG51bGwhPXRoaXMucGl4ZWxCbG9jaz90aGlzLnBpeGVsQmxvY2sud2lkdGg6MH1nZXQgaGVpZ2h0KCl7cmV0dXJuIG51bGwhPXRoaXMucGl4ZWxCbG9jaz90aGlzLnBpeGVsQmxvY2suaGVpZ2h0OjB9cmVuZGVyKGwpe2NvbnN0IGU9dGhpcy5waXhlbEJsb2NrO2lmKG51bGw9PWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5maWx0ZXIoe2V4dGVudDp0aGlzLmV4dGVudCxwaXhlbEJsb2NrOnRoaXMub3JpZ2luYWxQaXhlbEJsb2NrPz9lfSk7aWYobnVsbD09dC5waXhlbEJsb2NrKXJldHVybjt0LnBpeGVsQmxvY2subWFza0lzQWxwaGEmJih0LnBpeGVsQmxvY2sucHJlbXVsdGlwbHlBbHBoYT0hMCk7Y29uc3QgaT10LnBpeGVsQmxvY2suZ2V0QXNSR0JBKCksaD1sLmNyZWF0ZUltYWdlRGF0YSh0LnBpeGVsQmxvY2sud2lkdGgsdC5waXhlbEJsb2NrLmhlaWdodCk7aC5kYXRhLnNldChpKSxsLnB1dEltYWdlRGF0YShoLDAsMCl9Z2V0UmVuZGVyZWRSYXN0ZXJQaXhlbHMoKXtjb25zdCBsPXRoaXMuZmlsdGVyKHtleHRlbnQ6dGhpcy5leHRlbnQscGl4ZWxCbG9jazp0aGlzLnBpeGVsQmxvY2t9KTtyZXR1cm4gbnVsbD09bC5waXhlbEJsb2NrP251bGw6KGwucGl4ZWxCbG9jay5tYXNrSXNBbHBoYSYmKGwucGl4ZWxCbG9jay5wcmVtdWx0aXBseUFscGhhPSEwKSx7d2lkdGg6bC5waXhlbEJsb2NrLndpZHRoLGhlaWdodDpsLnBpeGVsQmxvY2suaGVpZ2h0LHJlbmRlcmVkUmFzdGVyUGl4ZWxzOm5ldyBVaW50OEFycmF5KGwucGl4ZWxCbG9jay5nZXRBc1JHQkEoKS5idWZmZXIpfSl9fWV4cG9ydHtsIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7YXNzZXJ0SXNTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtGcmVlTGlzdCBhcyBlfWZyb21cIi4vY3B1TWFwcGVkL0ZyZWVMaXN0LmpzXCI7Y29uc3Qgcz1oYXMoXCJlc3JpLTJkLWxvZy1hbGxvY2F0aW9uc1wiKTtjbGFzcyBye2NvbnN0cnVjdG9yKHQsZSl7dGhpcy5fYXJyYXk9dCx0aGlzLl9wb29sPWV9Z2V0IGFycmF5KCl7cmV0dXJuIHRoaXMuX2FycmF5fWdldCBsZW5ndGgoKXtyZXR1cm4gdGhpcy5fYXJyYXkubGVuZ3RofXN0YXRpYyBjcmVhdGUodCxlKXtjb25zdCBzPWUuYWNxdWlyZSh0KTtyZXR1cm4gbmV3IHIocyxlKX1leHBhbmQodCl7Y29uc3QgZT10aGlzLl9wb29sLmFjcXVpcmUodCk7ZS5zZXQodGhpcy5fYXJyYXkpLHRoaXMuX3Bvb2wucmVsZWFzZSh0aGlzLl9hcnJheSksdGhpcy5fYXJyYXk9ZX1kZXN0cm95KCl7dGhpcy5fcG9vbC5yZWxlYXNlKHRoaXMuX2FycmF5KX1zZXQodCxlKXt0aGlzLl9hcnJheS5zZXQodC5fYXJyYXksZSl9c2xpY2UoKXtjb25zdCB0PXRoaXMuX3Bvb2wuYWNxdWlyZSh0aGlzLl9hcnJheS5ieXRlTGVuZ3RoKTtyZXR1cm4gdC5zZXQodGhpcy5fYXJyYXkpLG5ldyByKHQsdGhpcy5fcG9vbCl9fWNsYXNzIGF7Y29uc3RydWN0b3IoKXt0aGlzLl9kYXRhPW5ldyBBcnJheUJ1ZmZlcihhLkJZVEVfTEVOR1RIKSx0aGlzLl9mcmVlTGlzdD1uZXcgZSh7c3RhcnQ6MCxlbmQ6dGhpcy5fZGF0YS5ieXRlTGVuZ3RofSl9c3RhdGljIGdldCBCWVRFX0xFTkdUSCgpe3JldHVybiA2NGU2fWdldCBidWZmZXIoKXtyZXR1cm4gdGhpcy5fZGF0YX1hbGxvY2F0ZSh0KXtjb25zdCBlPXRoaXMuX2ZyZWVMaXN0LmZpcnN0Rml0KHQpO3JldHVybiBudWxsPT1lP251bGw6bmV3IFVpbnQzMkFycmF5KHRoaXMuX2RhdGEsZSx0L1VpbnQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKX1mcmVlKHQpe3RoaXMuX2ZyZWVMaXN0LmZyZWUodC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCl9fWNsYXNzIGl7Y29uc3RydWN0b3IoKXt0aGlzLl9ieXRlc0FsbG9jYXRlZD0wLHRoaXMuX3BhZ2VzPVtdLHRoaXMuX3BhZ2VzQnlCdWZmZXI9bmV3IE1hcCx0aGlzLl9hZGRQYWdlKCl9ZGVzdHJveSgpe3RoaXMuX3BhZ2VzPVtdLHRoaXMuX3BhZ2VzQnlCdWZmZXI9bnVsbH1nZXQgX2J5dGVzVG90YWwoKXtyZXR1cm4gdGhpcy5fcGFnZXMubGVuZ3RoKmEuQllURV9MRU5HVEh9YWNxdWlyZShlKXtpZih0aGlzLl9ieXRlc0FsbG9jYXRlZCs9ZSxzJiZjb25zb2xlLmxvZyhgQWxsb2NhdGluZyAke2V9LCAoJHt0aGlzLl9ieXRlc0FsbG9jYXRlZH0gLyAke3RoaXMuX2J5dGVzVG90YWx9KWApLGU+YS5CWVRFX0xFTkdUSClyZXR1cm4gbmV3IFVpbnQzMkFycmF5KGUvVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpO2Zvcihjb25zdCB0IG9mIHRoaXMuX3BhZ2VzKXtjb25zdCBzPXQuYWxsb2NhdGUoZSk7aWYobnVsbCE9cylyZXR1cm4gc31jb25zdCByPXRoaXMuX2FkZFBhZ2UoKS5hbGxvY2F0ZShlKTtyZXR1cm4gdChyLFwiRXhwZWN0ZWQgdG8gYWxsb2NhdGUgcGFnZVwiKSxyfXJlbGVhc2UodCl7dGhpcy5fYnl0ZXNBbGxvY2F0ZWQtPXQuYnl0ZUxlbmd0aCxzJiZjb25zb2xlLmxvZyhgRnJlZWluZyAke3QuYnl0ZUxlbmd0aH0sICgke3RoaXMuX2J5dGVzQWxsb2NhdGVkfSAvICR7dGhpcy5fYnl0ZXNUb3RhbH0pYCk7Y29uc3QgZT10aGlzLl9wYWdlc0J5QnVmZmVyLmdldCh0LmJ1ZmZlcik7ZSYmZS5mcmVlKHQpfV9hZGRQYWdlKCl7Y29uc3QgdD1uZXcgYTtyZXR1cm4gdGhpcy5fcGFnZXMucHVzaCh0KSx0aGlzLl9wYWdlc0J5QnVmZmVyLnNldCh0LmJ1ZmZlcix0KSx0fX1leHBvcnR7aSBhcyBCdWZmZXJQb29sLHIgYXMgVHlwZWRCdWZmZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQ2lyY3VsYXJBcnJheS5qc1wiO2ltcG9ydCBoYXMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7YyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9tYXQyZGYzMi5qc1wiO2ltcG9ydHtXR0xHZW9tZXRyeVR5cGUgYXMgcn1mcm9tXCIuL2VudW1zLmpzXCI7aW1wb3J0e2ZvckVhY2hHZW9tZXRyeVR5cGUgYXMgc31mcm9tXCIuL1V0aWxzLmpzXCI7aW1wb3J0e1dHTFRpbGUgYXMgaX1mcm9tXCIuL1dHTFRpbGUuanNcIjtpbXBvcnR7TWV0cmljUmVhZGVyIGFzIGF9ZnJvbVwiLi9jb2xsaXNpb25zL01ldHJpY1JlYWRlci5qc1wiO2ltcG9ydHtHZW9tZXRyeSBhcyBufWZyb21cIi4vY3B1TWFwcGVkL0dlb21ldHJ5LmpzXCI7Y29uc3QgaD01MCxkPTQsbz0xMDA7bGV0IHU9MDtjbGFzcyBjIGV4dGVuZHMgaXtjb25zdHJ1Y3RvcihyLHMsaSxhLG4saCl7c3VwZXIocixzLGksYSksdGhpcy5pbnN0YW5jZUlkPXUrKyx0aGlzLnBhdGNoQ291bnQ9MCx0aGlzLl9yZW5kZXJTdGF0ZT17Y3VycmVudDp7Z2VvbWV0cnk6bmV3IE1hcCxtZXRyaWNzOm51bGx9LG5leHQ6bnVsbCxzd2FwOiExLHN3YXBGcmFtZXM6MCxsb2NrZWQ6ITF9LHRoaXMuX3BhdGNoZXM9bmV3IGUobyksdGhpcy5fYnVmZmVyUGF0Y2hlcz1uZXcgZShvKSx0aGlzLl9sYXN0Q29tbWl0VGltZT0wLHRoaXMudHJhbnNmb3Jtcy5sYWJlbE1hdDJkPXQoKSx0aGlzLl9zdG9yZT1uLHRoaXMuX3JlcXVlc3RMYWJlbFVwZGF0ZT1ofWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksdGhpcy5fcmVuZGVyU3RhdGUuY3VycmVudC5nZW9tZXRyeS5mb3JFYWNoKChlPT5lLmRlc3Ryb3koKSkpLG51bGwhPXRoaXMuX3JlbmRlclN0YXRlLm5leHQmJnRoaXMuX3JlbmRlclN0YXRlLm5leHQuZ2VvbWV0cnkuZm9yRWFjaCgoZT0+ZS5kZXN0cm95KCkpKSx0aGlzLl9yZW5kZXJTdGF0ZS5jdXJyZW50PW51bGwsdGhpcy5fcmVuZGVyU3RhdGUubmV4dD1udWxsfWdldCBsYWJlbE1ldHJpY3MoKXtyZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGUuY3VycmVudC5tZXRyaWNzfWdldCBoYXNEYXRhKCl7cmV0dXJuISF0aGlzLl9yZW5kZXJTdGF0ZS5jdXJyZW50Lmdlb21ldHJ5LnNpemV9Z2V0IHVwZGF0ZVN0YXR1cygpe3JldHVybmByZW5kZXJTdGF0ZTokeyEhdGhpcy5fcmVuZGVyU3RhdGUuY3VycmVudH0sICR7ISF0aGlzLl9yZW5kZXJTdGF0ZS5uZXh0fSwgaGFzRGF0YToke3RoaXMuaGFzRGF0YX0sIHF1ZXVlOiR7dGhpcy5fcGF0Y2hlcy5zaXplfWB9Z2V0R2VvbWV0cnkoZSl7cmV0dXJuIHRoaXMuX3JlbmRlclN0YXRlLmN1cnJlbnQuZ2VvbWV0cnkuZ2V0KGUpfXBhdGNoKGUsdCl7dGhpcy5wYXRjaENvdW50KyssZS5jbGVhciYmdGhpcy5fcGF0Y2hlcy5zaXplPj1oJiZ0aGlzLl9kcm9wUGF0Y2hlcygpO2NvbnN0IHI9ZSxzPXIuYWRkT3JVcGRhdGUmJnRoaXMua2V5LmlkIT09ci5hZGRPclVwZGF0ZS50aWxlS2V5T3JpZ2luO3QmJnM/dGhpcy5fYnVmZmVyUGF0Y2hlcy5lbnF1ZXVlKHIpOihyLnNvcnQ9ci5zb3J0JiYhdCx0aGlzLl9wYXRjaGVzLmVucXVldWUocikpLHRoaXMucmVxdWVzdFJlbmRlcigpfWNvbW1pdChlKXtpZih0aGlzLl9sYXN0Q29tbWl0VGltZSE9PWUudGltZSl7dGhpcy5fbGFzdENvbW1pdFRpbWU9ZS50aW1lO2ZvcihsZXQgZT0wO2U8ZDtlKyspdGhpcy5fdXBkYXRlTWVzaCgpLHRoaXMuaXNSZWFkeSYmdGhpcy5fdXBkYXRlQnVmZmVyTWVzaCgpO3RoaXMuX3JlbmRlclN0YXRlLnN3YXAmJih0aGlzLl9zd2FwUmVuZGVyU3RhdGVzKCksdGhpcy5yZXF1ZXN0UmVuZGVyKCkpfX1sb2NrKCl7dGhpcy5fcmVuZGVyU3RhdGUubG9ja2VkPSEwfXVubG9jaygpe3RoaXMuX3JlbmRlclN0YXRlLmxvY2tlZD0hMSx0aGlzLl9mbHVzaFVwZGF0ZXMoKSx0aGlzLl9zd2FwKCl9X3N3YXBSZW5kZXJTdGF0ZXMoKXtpZih0aGlzLl9yZW5kZXJTdGF0ZS5uZXh0KXtpZih0aGlzLl9yZW5kZXJTdGF0ZS5sb2NrZWQpcmV0dXJuIHRoaXMuX3JlbmRlclN0YXRlLnN3YXA9ITAsdm9pZCB0aGlzLnJlcXVlc3RSZW5kZXIoKTt0aGlzLl9yZW5kZXJTdGF0ZS5zd2FwPSEwLHRoaXMuX3N3YXAoKX19X3N3YXAoKXt0aGlzLl9yZW5kZXJTdGF0ZS5zd2FwJiYodGhpcy5fcmVuZGVyU3RhdGUuc3dhcD0hMSxudWxsIT10aGlzLl9yZW5kZXJTdGF0ZS5uZXh0JiYodGhpcy5fcmVuZGVyU3RhdGUuY3VycmVudC5nZW9tZXRyeS5mb3JFYWNoKChlPT5lLmRlc3Ryb3koKSkpLHRoaXMuX3JlbmRlclN0YXRlLmN1cnJlbnQ9dGhpcy5fcmVuZGVyU3RhdGUubmV4dCx0aGlzLl9yZW5kZXJTdGF0ZS5uZXh0PW51bGwsdGhpcy5fcmVxdWVzdExhYmVsVXBkYXRlKCkpKX1fZmx1c2hVcGRhdGVzKCl7bGV0IGU9dGhpcy5fcGF0Y2hlcy5tYXhTaXplO2Zvcig7dGhpcy5fcGF0Y2hlcy5zaXplJiZlLS07KXRoaXMuX3VwZGF0ZU1lc2goKSx0aGlzLl9zd2FwKCl9X3VwZGF0ZUJ1ZmZlck1lc2goKXtjb25zdCBlPXRoaXMuX2J1ZmZlclBhdGNoZXMucGVlaygpO2lmKG51bGw9PWV8fCFlLmNsZWFyfHxudWxsPT09dGhpcy5fcmVuZGVyU3RhdGUubmV4dClmb3IoO3RoaXMuX2J1ZmZlclBhdGNoZXMuc2l6ZTspe2NvbnN0IGU9dGhpcy5fYnVmZmVyUGF0Y2hlcy5kZXF1ZXVlKCk7bnVsbCE9ZSYmdGhpcy5fcGF0Y2hCdWZmZXIoZSl9fV91cGRhdGVNZXNoKCl7Y29uc3QgZT10aGlzLl9wYXRjaGVzLmRlcXVldWUoKTtpZihudWxsIT1lKXtpZihoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSl7Y29uc3QgdD1lLHI9dC5hZGRPclVwZGF0ZT8udGlsZUtleU9yaWdpbixzPXRoaXMua2V5LmlkPT09cj9cIlNFTEZcIjpyO2xldCBpPVwiXCI7Zm9yKGxldCBlPTA7ZTw1O2UrKylpKz10LmFkZE9yVXBkYXRlPy5kYXRhW2VdPy5yZWNvcmRzPy5ieXRlTGVuZ3RoPzE6MDtjb25zb2xlLmRlYnVnKHRoaXMua2V5LmlkLFwiRmVhdHVyZVRpbGU6cGF0Y2hcIixgW2NsZWFyOiAke3QuY2xlYXJ9IG9yaWdpbjogJHtzfSwgZW5kOiR7dC5lbmR9IGRhdGE6JHtpfV1gKX0hMD09PWUuY2xlYXImJihudWxsIT10aGlzLl9yZW5kZXJTdGF0ZS5uZXh0JiYodGhpcy5fcmVuZGVyU3RhdGUubmV4dC5nZW9tZXRyeS5mb3JFYWNoKChlPT5lLmRlc3Ryb3koKSkpLHRoaXMuX3JlbmRlclN0YXRlLm5leHQ9bnVsbCksdGhpcy5fcmVuZGVyU3RhdGUubmV4dD17Z2VvbWV0cnk6bmV3IE1hcCxtZXRyaWNzOm51bGx9LGhhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKHRoaXMua2V5LmlkLFwiRmVhdHVyZVRpbGU6X3VwZGF0ZU1lc2ggLSBDcmVhdGluZyBuZXcgcmVuZGVyU3RhdGVcIikpLHRoaXMucmVxdWVzdFJlbmRlcigpLHRoaXMuX3BhdGNoKGUpLGUuZW5kJiYoaGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcodGhpcy5rZXkuaWQsXCJGZWF0dXJlVGlsZTpfdXBkYXRlTWVzaCAtIEVuY291bnRlcmVkIGVuZCBtZXNzYWdlXCIpLHRoaXMucmVhZHkoKSx0aGlzLl9zd2FwUmVuZGVyU3RhdGVzKCkpfX1fcGF0Y2goZSl7cygodD0+e3RoaXMuX3JlbW92ZSh0LGUucmVtb3ZlKSx0aGlzLl9pbnNlcnQodCxlLCExKX0pKX1fcGF0Y2hCdWZmZXIoZSl7cygodD0+e3RoaXMuX2luc2VydCh0LGUsITApfSkpfV9pbnNlcnQoZSx0LHMpe3RyeXtjb25zdCBpPXRoaXMuX3JlbmRlclN0YXRlLm5leHQ/P3RoaXMuX3JlbmRlclN0YXRlLmN1cnJlbnQsYT10LmFkZE9yVXBkYXRlPy5kYXRhW2VdLGg9aS5nZW9tZXRyeTtpZihudWxsPT1hKXJldHVybjtoLmhhcyhlKXx8KGhhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKHRoaXMua2V5LmlkLGBGZWF0dXJlVGlsZTpfaW5zZXJ0IC0gQ3JlYXRpbmcgZ2VvbWV0cnkgYnVmZmVyICR7ZX1gKSxoLnNldChlLG5ldyBuKGUsdGhpcy5zdGFnZSkpKSxoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1Zyh0aGlzLmtleS5pZCxgRmVhdHVyZVRpbGU6X2luc2VydCAtIEluc2VydGluZyBpbnRvICR7ZX0sIHZlcnNpb249JHt0LmFkZE9yVXBkYXRlPy52ZXJzaW9ufSBzdHJpZGU9JHthLnN0cmlkZX1gKSxoLmdldChlKS5pbnNlcnQoYSx0LnNvcnQscyksZT09PXIuTEFCRUwmJnRoaXMuX2luc2VydExhYmVsTWV0cmljcyh0LnR5cGUsYS5tZXRyaWNzLHQuY2xlYXIpfWNhdGNoKGkpe319X2luc2VydExhYmVsTWV0cmljcyhlLHQscil7Y29uc3Qgcz10aGlzLl9yZW5kZXJTdGF0ZS5uZXh0Pz90aGlzLl9yZW5kZXJTdGF0ZS5jdXJyZW50O2lmKG51bGw9PXQpcmV0dXJuO2NvbnN0IGk9YS5mcm9tKHQpO2lmKG51bGwhPXMubWV0cmljcyl7aWYoXCJ1cGRhdGVcIj09PWUpe2NvbnN0IGU9aS5nZXRDdXJzb3IoKTtmb3IoO2UubmV4dCgpOylzLm1ldHJpY3MuZGVsZXRlKGUuaWQpfXMubWV0cmljcy5saW5rKGkpfWVsc2Ugcy5tZXRyaWNzPWl9X3JlbW92ZShlLHQpe2NvbnN0IHI9KHRoaXMuX3JlbmRlclN0YXRlLm5leHQ/P3RoaXMuX3JlbmRlclN0YXRlLmN1cnJlbnQpLmdlb21ldHJ5LmdldChlKTt0JiZ0Lmxlbmd0aCYmciYmKHIucmVtb3ZlKHQpLHRoaXMuX3JlbW92ZUxhYmVsTWV0cmljcyh0KSl9X3JlbW92ZUxhYmVsTWV0cmljcyhlKXtjb25zdHttZXRyaWNzOnR9PXRoaXMuX3JlbmRlclN0YXRlLm5leHQ/P3RoaXMuX3JlbmRlclN0YXRlLmN1cnJlbnQ7aWYobnVsbCE9dCYmZS5sZW5ndGgpZm9yKGNvbnN0IHIgb2YgZSlmb3IoO3QuZGVsZXRlKHIpOyk7fV9kcm9wUGF0Y2hlcygpe2NvbnN0IGU9bmV3IEFycmF5O2xldCB0PSExO2Zvcig7dGhpcy5fcGF0Y2hlcy5zaXplOyl7Y29uc3Qgcj10aGlzLl9wYXRjaGVzLmRlcXVldWUoKTtpZihudWxsPT1yKWJyZWFrO2lmKHIuY2xlYXIpe2lmKHQpYnJlYWs7dD0hMH1lLnB1c2gocil9dGhpcy5fcGF0Y2hlcy5jbGVhcigpLGUuZm9yRWFjaCgoZT0+dGhpcy5fcGF0Y2hlcy5lbnF1ZXVlKGUpKSl9fWV4cG9ydHtjIGFzIEZlYXR1cmVUaWxlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBlfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL1dHTENvbnRhaW5lci5qc1wiO2ltcG9ydCBzIGZyb21cIi4vYnJ1c2hlcy9XR0xCcnVzaEluZm8uanNcIjtpbXBvcnQgdCBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hTdGVuY2lsLmpzXCI7Y29uc3Qgbj0oZSxyKT0+ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWwhPTA/ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWw6ZS5rZXkucm93LXIua2V5LnJvdyE9MD9lLmtleS5yb3ctci5rZXkucm93OmUua2V5LmNvbC1yLmtleS5jb2w7Y2xhc3MgaSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl90aWxlSW5mb1ZpZXc9ZX1yZW5kZXJDaGlsZHJlbihlKXt0aGlzLnNvcnRDaGlsZHJlbihuKSx0aGlzLnNldFN0ZW5jaWxSZWZlcmVuY2UoZSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe2NvbnN0e3N0YXRlOnJ9PWUscz1zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSk7cmV0dXJuIHMucmVxdWlyZWRMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0Q2xvc2VzdEluZm9Gb3JTY2FsZShyLnNjYWxlKS5sZXZlbCxzLmRpc3BsYXlMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2NhbGVUb1pvb20oci5zY2FsZSksc31wcmVwYXJlUmVuZGVyUGFzc2VzKHIpe2NvbnN0IG49c3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhyKTtyZXR1cm4gbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwic3RlbmNpbFwiLGJydXNoZXM6W3RdLGRyYXdQaGFzZTplLkRFQlVHfGUuTUFQfGUuSElHSExJR0hULHRhcmdldDooKT0+dGhpcy5nZXRTdGVuY2lsVGFyZ2V0KCl9KSksaGFzKFwiZXNyaS10aWxlcy1kZWJ1Z1wiKSYmbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwidGlsZUluZm9cIixicnVzaGVzOltzXSxkcmF3UGhhc2U6ZS5ERUJVRyx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW59KSksbn1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW59c2V0U3RlbmNpbFJlZmVyZW5jZShlKXtsZXQgcj0xO2Zvcihjb25zdCBzIG9mIHRoaXMuY2hpbGRyZW4pcy5zdGVuY2lsUmVmPXIrK319ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3B0MnB4IGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zY3JlZW5VdGlscy5qc1wiO2ltcG9ydHtnZXRNZXRlcnNQZXJVbml0Rm9yU1IgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHttZXRlckluIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvbGVuZ3RoVXRpbHMuanNcIjtpbXBvcnR7aXNEZWZpbmVkIGFzIHMsaXNOdW1iZXIgYXMgYX1mcm9tXCIuL1V0aWxzLmpzXCI7aW1wb3J0e1RlY2huaXF1ZSBhcyBsfWZyb21cIi4vdGVjaG5pcXVlcy9UZWNobmlxdWUuanNcIjtpbXBvcnR7Z2V0VGVjaG5pcXVlRnJvbVJlbmRlcmVyIGFzIHJ9ZnJvbVwiLi90ZWNobmlxdWVzL3V0aWxzLmpzXCI7aW1wb3J0e2dldFdlYkdMQ2FwYWJpbGl0aWVzIGFzIG99ZnJvbVwiLi4vLi4vLi4vd2ViZ2wvY2FwYWJpbGl0aWVzLmpzXCI7ZnVuY3Rpb24gbihlLHQpe2NvbnN0IGk9dC5sZW5ndGg7aWYoZTx0WzBdLnZhbHVlfHwxPT09aSlyZXR1cm4gdFswXS5zaXplO2ZvcihsZXQgcz0xO3M8aTtzKyspaWYoZTx0W3NdLnZhbHVlKXtjb25zdCBpPShlLXRbcy0xXS52YWx1ZSkvKHRbc10udmFsdWUtdFtzLTFdLnZhbHVlKTtyZXR1cm4gdFtzLTFdLnNpemUraSoodFtzXS5zaXplLXRbcy0xXS5zaXplKX1yZXR1cm4gdFtpLTFdLnNpemV9Y2xhc3Mgdntjb25zdHJ1Y3Rvcigpe3RoaXMuc3ltYm9sTGV2ZWxzPVtdLHRoaXMudnZDb2xvclZhbHVlcz1uZXcgRmxvYXQzMkFycmF5KDgpLHRoaXMudnZDb2xvcnM9bmV3IEZsb2F0MzJBcnJheSgzMiksdGhpcy52dk9wYWNpdHlWYWx1ZXM9bmV3IEZsb2F0MzJBcnJheSg4KSx0aGlzLnZ2T3BhY2l0aWVzPW5ldyBGbG9hdDMyQXJyYXkoOCksdGhpcy52dlNpemVNaW5NYXhWYWx1ZT1uZXcgRmxvYXQzMkFycmF5KDQpLHRoaXMub3V0c2lkZUxhYmVsc1Zpc2libGU9ITEsdGhpcy5fdnZNYXRlcmlhbFBhcmFtZXRlcnM9e3Z2U2l6ZUVuYWJsZWQ6ITEsdnZDb2xvckVuYWJsZWQ6ITEsdnZSb3RhdGlvbkVuYWJsZWQ6ITEsdnZSb3RhdGlvblR5cGU6XCJnZW9ncmFwaGljXCIsdnZPcGFjaXR5RW5hYmxlZDohMX0sdGhpcy5fdGVjaG5pcXVlPWx9Z2V0U2l6ZVZWRmllbGRTdG9wcyhlKXtjb25zdCB0PXRoaXMuX3Z2U2l6ZUZpZWxkU3RvcHM7aWYodClzd2l0Y2godC50eXBlKXtjYXNlXCJzdGF0aWNcIjpyZXR1cm4gdDtjYXNlXCJsZXZlbC1kZXBlbmRlbnRcIjpyZXR1cm4gdC5sZXZlbHNbZV0/PygoKT0+e2xldCBpPTEvMCxzPTA7Zm9yKGNvbnN0IG8gaW4gdC5sZXZlbHMpe2NvbnN0IHQ9cGFyc2VGbG9hdChvKSxhPU1hdGguYWJzKGUtdCk7YTxpJiYoaT1hLHM9dCl9aWYoaT09PTEvMClyZXR1cm57c2l6ZXM6bmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMCwwLDBdKSx2YWx1ZXM6bmV3IEZsb2F0MzJBcnJheShbMCwwLDAsMCwwLDBdKX07Y29uc3QgYT0yKiooKGUtcykvMiksbD10LmxldmVsc1tzXSxyPW5ldyBGbG9hdDMyQXJyYXkobC52YWx1ZXMpO3JldHVybiByWzJdKj1hLHJbM10qPWEse3NpemVzOmwuc2l6ZXMsdmFsdWVzOnJ9fSkoKTtkZWZhdWx0OnJldHVybn19Z2V0IHZ2TWF0ZXJpYWxQYXJhbWV0ZXJzKCl7cmV0dXJuIHRoaXMuX3Z2TWF0ZXJpYWxQYXJhbWV0ZXJzfXVwZGF0ZShlKXtudWxsIT10aGlzLl92dkluZm8mJnRoaXMuX3VwZGF0ZVZpc3VhbFZhcmlhYmxlcyh0aGlzLl92dkluZm8udnZSYW5nZXMsZSl9c2V0SW5mbyhlLHQsaSl7dGhpcy5fdXBkYXRlRWZmZWN0cyhpKSx0aGlzLl92dkluZm89dCx0aGlzLl90ZWNobmlxdWU9cihlKSx0aGlzLnJlbmRlcmVyU2NoZW1hPXRoaXMuX3RlY2huaXF1ZS5jcmVhdGVPclVwZGF0ZVJlbmRlcmVyU2NoZW1hKHRoaXMucmVuZGVyZXJTY2hlbWEsZSl9Z2V0VmFyaWF0aW9uKCl7cmV0dXJuey4uLnRoaXMuX3RlY2huaXF1ZS5nZXRWYXJpYXRpb24odGhpcy5yZW5kZXJlclNjaGVtYSksb3V0c2lkZUxhYmVsc1Zpc2libGU6dGhpcy5vdXRzaWRlTGFiZWxzVmlzaWJsZSxzdXBwb3J0c1RleHR1cmVGbG9hdDpvKFwiMmRcIikuc3VwcG9ydHNUZXh0dXJlRmxvYXR9fWdldFZhcmlhdGlvbkhhc2goKXtyZXR1cm4gdGhpcy5fdGVjaG5pcXVlLmdldFZhcmlhdGlvbkhhc2godGhpcy5yZW5kZXJlclNjaGVtYSk8PDF8KHRoaXMub3V0c2lkZUxhYmVsc1Zpc2libGU/MTowKX1fdXBkYXRlRWZmZWN0cyhlKXt0aGlzLm91dHNpZGVMYWJlbHNWaXNpYmxlPW51bGwhPWUmJmUuZXhjbHVkZWRMYWJlbHNWaXNpYmxlfV91cGRhdGVWaXN1YWxWYXJpYWJsZXMobCxyKXtjb25zdCBvPXRoaXMuX3Z2TWF0ZXJpYWxQYXJhbWV0ZXJzO2lmKG8udnZPcGFjaXR5RW5hYmxlZD0hMSxvLnZ2U2l6ZUVuYWJsZWQ9ITEsby52dkNvbG9yRW5hYmxlZD0hMSxvLnZ2Um90YXRpb25FbmFibGVkPSExLCFsKXJldHVybjtjb25zdCB2PWwuc2l6ZTtpZih2KXtpZihvLnZ2U2l6ZUVuYWJsZWQ9ITAsdi5taW5NYXhWYWx1ZSl7Y29uc3QgdD12Lm1pbk1heFZhbHVlO2xldCBpLGw7aWYocyh0Lm1pblNpemUpJiZzKHQubWF4U2l6ZSkpaWYoYSh0Lm1pblNpemUpJiZhKHQubWF4U2l6ZSkpaT1lKHQubWluU2l6ZSksbD1lKHQubWF4U2l6ZSk7ZWxzZXtjb25zdCBzPXIuc2NhbGU7aT1lKG4ocyx0Lm1pblNpemUuc3RvcHMpKSxsPWUobihzLHQubWF4U2l6ZS5zdG9wcykpfXRoaXMudnZTaXplTWluTWF4VmFsdWUuc2V0KFt0Lm1pbkRhdGFWYWx1ZSx0Lm1heERhdGFWYWx1ZSxpLGxdKX1pZih2LnNjYWxlU3RvcHMmJih0aGlzLnZ2U2l6ZVNjYWxlU3RvcHNWYWx1ZT1lKG4oci5zY2FsZSx2LnNjYWxlU3RvcHMuc3RvcHMpKSksdi51bml0VmFsdWUpe2NvbnN0IGU9dChyLnNwYXRpYWxSZWZlcmVuY2UpL2lbdi51bml0VmFsdWUudW5pdF07dGhpcy52dlNpemVVbml0VmFsdWVUb1BpeGVsc1JhdGlvPWUvci5yZXNvbHV0aW9ufXYuZmllbGRTdG9wcyYmKHRoaXMuX3Z2U2l6ZUZpZWxkU3RvcHM9di5maWVsZFN0b3BzKX1jb25zdCB1PWwuY29sb3I7dSYmKG8udnZDb2xvckVuYWJsZWQ9ITAsdGhpcy52dkNvbG9yVmFsdWVzLnNldCh1LnZhbHVlcyksdGhpcy52dkNvbG9ycy5zZXQodS5jb2xvcnMpKTtjb25zdCBjPWwub3BhY2l0eTtjJiYoby52dk9wYWNpdHlFbmFibGVkPSEwLHRoaXMudnZPcGFjaXR5VmFsdWVzLnNldChjLnZhbHVlcyksdGhpcy52dk9wYWNpdGllcy5zZXQoYy5vcGFjaXRpZXMpKTtjb25zdCBoPWwucm90YXRpb247aCYmKG8udnZSb3RhdGlvbkVuYWJsZWQ9ITAsby52dlJvdGF0aW9uVHlwZT1oLnR5cGUpfX1leHBvcnR7diBhcyBXR0xSZW5kZXJlckluZm99O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHQ9NixzPTQyOTQ5NjcyOTY7Y2xhc3MgZXtjb25zdHJ1Y3Rvcih0KXt0aGlzLl9zYXZlZEN1cnNvcj1udWxsLHRoaXMuX3NhdmVkT2Zmc2V0PW51bGwsdGhpcy5faGVhZD10LHRoaXMuX2N1cnNvcj10fXN0YXRpYyBmcm9tKHQpe2NvbnN0IHM9ci5mcm9tKG5ldyBGbG9hdDMyQXJyYXkodCkpO3JldHVybiBuZXcgZShzKX1nZXQgaWQoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmlkfWdldCBiYXNlWm9vbSgpe3JldHVybiB0aGlzLl9jdXJzb3IuYmFzZVpvb219Z2V0IGFuY2hvclgoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmFuY2hvclh9Z2V0IGFuY2hvclkoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmFuY2hvcll9Z2V0IGRpcmVjdGlvblgoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmRpcmVjdGlvblh9Z2V0IGRpcmVjdGlvblkoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmRpcmVjdGlvbll9Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLnNpemV9Z2V0IG1hdGVyaWFsS2V5KCl7cmV0dXJuIHRoaXMuX2N1cnNvci5tYXRlcmlhbEtleX1nZXQgYm91bmRzQ291bnQoKXtyZXR1cm4gdGhpcy5fY3Vyc29yLmJvdW5kc0NvdW50fWNvbXB1dGVkTWluWm9vbSgpe3JldHVybiB0aGlzLl9jdXJzb3IuY29tcHV0ZWRNaW5ab29tKCl9c2V0Q29tcHV0ZWRNaW5ab29tKHQpe3JldHVybiB0aGlzLl9jdXJzb3Iuc2V0Q29tcHV0ZWRNaW5ab29tKHQpfWJvdW5kc0NvbXB1dGVkQW5jaG9yWCh0KXtyZXR1cm4gdGhpcy5fY3Vyc29yLmJvdW5kc0NvbXB1dGVkQW5jaG9yWCh0KX1ib3VuZHNDb21wdXRlZEFuY2hvclkodCl7cmV0dXJuIHRoaXMuX2N1cnNvci5ib3VuZHNDb21wdXRlZEFuY2hvclkodCl9c2V0Qm91bmRzQ29tcHV0ZWRBbmNob3JYKHQscyl7cmV0dXJuIHRoaXMuX2N1cnNvci5zZXRCb3VuZHNDb21wdXRlZEFuY2hvclgodCxzKX1zZXRCb3VuZHNDb21wdXRlZEFuY2hvclkodCxzKXtyZXR1cm4gdGhpcy5fY3Vyc29yLnNldEJvdW5kc0NvbXB1dGVkQW5jaG9yWSh0LHMpfWJvdW5kc1godCl7cmV0dXJuIHRoaXMuX2N1cnNvci5ib3VuZHNYKHQpfWJvdW5kc1kodCl7cmV0dXJuIHRoaXMuX2N1cnNvci5ib3VuZHNZKHQpfWJvdW5kc1dpZHRoKHQpe3JldHVybiB0aGlzLl9jdXJzb3IuYm91bmRzV2lkdGgodCl9Ym91bmRzSGVpZ2h0KHQpe3JldHVybiB0aGlzLl9jdXJzb3IuYm91bmRzSGVpZ2h0KHQpfWxpbmsodCl7aWYobnVsbCE9dC5faGVhZClyZXR1cm4gdGhpcy5fY3Vyc29yLmxpbmsodC5faGVhZCl9Z2V0Q3Vyc29yKCl7cmV0dXJuIHRoaXMuY29weSgpfWNvcHkoKXtjb25zdCB0PW5ldyBlKHRoaXMuX2hlYWQ/LmNvcHkoKSk7aWYoIXQuX2hlYWQpcmV0dXJuIHQ7bGV0IHM9dC5faGVhZCxyPXQuX2hlYWQuX2xpbms7Zm9yKDtyOylzLl9saW5rPXIuY29weSgpLHM9cixyPXMuX2xpbms7cmV0dXJuIHR9cGVla0lkKCl7cmV0dXJuIHRoaXMuX2N1cnNvci5wZWVrSWQoKT8/dGhpcy5fY3Vyc29yLl9saW5rLnBlZWtJZCgpfW5leHRJZCgpe2NvbnN0IHQ9dGhpcy5pZDtmb3IoO3Q9PT10aGlzLmlkOylpZighdGhpcy5uZXh0KCkpcmV0dXJuITE7cmV0dXJuITB9c2F2ZSgpe3RoaXMuX3NhdmVkQ3Vyc29yPXRoaXMuX2N1cnNvcix0aGlzLl9zYXZlZE9mZnNldD10aGlzLl9jdXJzb3IuX29mZnNldH1yZXN0b3JlKCl7dGhpcy5fc2F2ZWRDdXJzb3ImJih0aGlzLl9jdXJzb3I9dGhpcy5fc2F2ZWRDdXJzb3IpLG51bGwhPXRoaXMuX3NhdmVkT2Zmc2V0JiYodGhpcy5fY3Vyc29yLl9vZmZzZXQ9dGhpcy5fc2F2ZWRPZmZzZXQpfW5leHQoKXtpZighdGhpcy5fY3Vyc29yKXJldHVybiExO2lmKCF0aGlzLl9jdXJzb3IubmV4dCgpKXtpZighdGhpcy5fY3Vyc29yLl9saW5rKXJldHVybiExO3RoaXMuX2N1cnNvcj10aGlzLl9jdXJzb3IuX2xpbmssdGhpcy5fY3Vyc29yLl9vZmZzZXQ9MH1yZXR1cm4hMH1sb29rdXAodCl7Zm9yKHRoaXMuX2N1cnNvcj10aGlzLl9oZWFkO3RoaXMuX2N1cnNvciYmIXRoaXMuX2N1cnNvci5sb29rdXAodCk7KXtpZighdGhpcy5fY3Vyc29yLl9saW5rKXJldHVybiExO3RoaXMuX2N1cnNvcj10aGlzLl9jdXJzb3IuX2xpbmt9cmV0dXJuISF0aGlzLl9jdXJzb3J9ZGVsZXRlKHQpe2xldCBzPXRoaXMuX2hlYWQsZT1udWxsO2Zvcig7czspe2lmKHMuZGVsZXRlKHQpKXJldHVybiBzLmlzRW1wdHkoKSYmbnVsbCE9ZSYmKGUuX2xpbms9cy5fbGluayksITA7ZT1zLHM9cy5fbGlua31yZXR1cm4hMX19Y2xhc3Mgcntjb25zdHJ1Y3Rvcih0KXt0aGlzLl9vZmZzZXQ9LTEsdGhpcy5fbGluaz1udWxsLHRoaXMuX2NvdW50PTAsdGhpcy5fZGVsZXRlZENvdW50PTAsdGhpcy5fb2Zmc2V0cz17aW5zdGFuY2U6bnVsbH0sdGhpcy5fYnVmZmVyPXR9c3RhdGljIGZyb20odCl7cmV0dXJuIG5ldyByKG5ldyBGbG9hdDMyQXJyYXkodCkpfWlzRW1wdHkoKXtyZXR1cm4gdGhpcy5fZGVsZXRlZENvdW50PT09dGhpcy5jb3VudH1nZXQgY291bnQoKXtyZXR1cm4gdGhpcy5fY291bnR8fCh0aGlzLl9jb3VudD10aGlzLl9jb21wdXRlQ291bnQoKSksdGhpcy5fY291bnR9Z2V0IGlkKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclt0aGlzLl9vZmZzZXRdfXNldCBpZCh0KXt0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0XT10fWdldCBiYXNlWm9vbSgpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzFdfWdldCBhbmNob3JYKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclt0aGlzLl9vZmZzZXQrMl19Z2V0IGFuY2hvclkoKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCszXX1nZXQgZGlyZWN0aW9uWCgpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzRdfWdldCBkaXJlY3Rpb25ZKCl7cmV0dXJuIHRoaXMuX2J1ZmZlclt0aGlzLl9vZmZzZXQrNV19Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCs2XX1nZXQgbWF0ZXJpYWxLZXkoKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCs3XX1jb21wdXRlZE1pblpvb20oKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCs4XX1zZXRDb21wdXRlZE1pblpvb20odCl7dGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCs4XT10fWdldCBib3VuZHNDb3VudCgpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzldfWJvdW5kc0NvbXB1dGVkQW5jaG9yWChzKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCsxMCtzKnRdfWJvdW5kc0NvbXB1dGVkQW5jaG9yWShzKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCsxMCtzKnQrMV19c2V0Qm91bmRzQ29tcHV0ZWRBbmNob3JYKHMsZSl7dGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCsxMCtzKnRdPWV9c2V0Qm91bmRzQ29tcHV0ZWRBbmNob3JZKHMsZSl7dGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCsxMCtzKnQrMV09ZX1ib3VuZHNYKHMpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzEwK3MqdCsyXX1ib3VuZHNZKHMpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzEwK3MqdCszXX1ib3VuZHNXaWR0aChzKXtyZXR1cm4gdGhpcy5fYnVmZmVyW3RoaXMuX29mZnNldCsxMCtzKnQrNF19Ym91bmRzSGVpZ2h0KHMpe3JldHVybiB0aGlzLl9idWZmZXJbdGhpcy5fb2Zmc2V0KzEwK3MqdCs1XX1saW5rKHQpe2xldCBzPXRoaXM7Zm9yKDtzLl9saW5rOylzPXMuX2xpbms7cy5fbGluaz10fWdldEN1cnNvcigpe3JldHVybiB0aGlzLmNvcHkoKX1jb3B5KCl7Y29uc3QgdD1uZXcgcih0aGlzLl9idWZmZXIpO3JldHVybiB0Ll9saW5rPXRoaXMuX2xpbmssdC5fb2Zmc2V0PXRoaXMuX29mZnNldCx0Ll9kZWxldGVkQ291bnQ9dGhpcy5fZGVsZXRlZENvdW50LHQuX29mZnNldHM9dGhpcy5fb2Zmc2V0cyx0Ll9jb3VudD10aGlzLl9jb3VudCx0fXBlZWtJZCgpe2NvbnN0IHM9dGhpcy5fb2Zmc2V0KzEwK3RoaXMuYm91bmRzQ291bnQqdCswO3JldHVybiBzPj10aGlzLl9idWZmZXIubGVuZ3RoPzA6dGhpcy5fYnVmZmVyW3NdfW5leHQoKXtsZXQgZT0wO2Zvcig7dGhpcy5fb2Zmc2V0PHRoaXMuX2J1ZmZlci5sZW5ndGgmJmUrKzwxMDAmJigtMT09PXRoaXMuX29mZnNldD90aGlzLl9vZmZzZXQ9MDp0aGlzLl9vZmZzZXQrPTEwK3RoaXMuYm91bmRzQ291bnQqdCx0aGlzLmlkPT09cyk7KTtyZXR1cm4gdGhpcy5pZCE9PXMmJnRoaXMuX29mZnNldDx0aGlzLl9idWZmZXIubGVuZ3RofWRlbGV0ZSh0KXtjb25zdCBzPXRoaXMuX29mZnNldCxlPXRoaXMubG9va3VwKHQpO2lmKGUpZm9yKHRoaXMuaWQ9NDI5NDk2NzI5NSwrK3RoaXMuX2RlbGV0ZWRDb3VudDt0aGlzLm5leHQoKSYmdGhpcy5pZD09PXQ7KXRoaXMuaWQ9NDI5NDk2NzI5NSwrK3RoaXMuX2RlbGV0ZWRDb3VudDtyZXR1cm4gdGhpcy5fb2Zmc2V0PXMsZX1sb29rdXAodCl7Y29uc3QgZT10aGlzLl9vZmZzZXQ7aWYobnVsbD09dGhpcy5fb2Zmc2V0cy5pbnN0YW5jZSl7dGhpcy5fb2Zmc2V0cy5pbnN0YW5jZT1uZXcgTWFwO2NvbnN0IHQ9dGhpcy5jb3B5KCk7dC5fb2Zmc2V0PS0xO2xldCBzPTA7Zm9yKDt0Lm5leHQoKTspdC5pZCE9PXMmJih0aGlzLl9vZmZzZXRzLmluc3RhbmNlLnNldCh0LmlkLHQuX29mZnNldCkscz10LmlkKX1yZXR1cm4hIXRoaXMuX29mZnNldHMuaW5zdGFuY2UuaGFzKHQpJiYodGhpcy5fb2Zmc2V0PXRoaXMuX29mZnNldHMuaW5zdGFuY2UuZ2V0KHQpLHRoaXMuaWQhPT1zfHwodGhpcy5fb2Zmc2V0PWUsITEpKX1fY29tcHV0ZUNvdW50KCl7Y29uc3QgdD10aGlzLl9vZmZzZXQ7bGV0IHM9MDtmb3IodGhpcy5fb2Zmc2V0PS0xO3RoaXMubmV4dCgpOylzKys7cmV0dXJuIHRoaXMuX29mZnNldD10LHN9fWV4cG9ydHtlIGFzIE1ldHJpY1JlYWRlcixyIGFzIE1ldHJpY1JlYWRlck5vZGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHthc3NlcnRJc1NvbWUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e1R5cGVkQnVmZmVyIGFzIGl9ZnJvbVwiLi4vQnVmZmVyUG9vbC5qc1wiO2ltcG9ydHtGcmVlTGlzdCBhcyBlfWZyb21cIi4vRnJlZUxpc3QuanNcIjtpbXBvcnR7QnVmZmVyT2JqZWN0IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvQnVmZmVyT2JqZWN0LmpzXCI7aW1wb3J0e1VzYWdlIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtjb25zdCBoPTEuMjUsbj0zMjc2Nyx1PW48PDE2fG47Y2xhc3MgYXtjb25zdHJ1Y3Rvcih0LGUscixzKXtjb25zdCBoPWkuY3JlYXRlKGUqcipVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCxzKTt0aGlzLnNpemU9ZSx0aGlzLnN0cmlkZUludD1yLHRoaXMuYnVmZmVyVHlwZT10LHRoaXMuZGlydHk9e3N0YXJ0OjEvMCxlbmQ6MH0sdGhpcy5fZ3B1PW51bGwsdGhpcy5fY3B1PWgsdGhpcy5jbGVhcigpfWdldCBlbGVtZW50U2l6ZSgpe3JldHVybiB0aGlzLl9jcHUubGVuZ3RoL3RoaXMuc3RyaWRlSW50fWdldCBpbnZhbGlkYXRlZCgpe3JldHVybiB0aGlzLmJ1ZmZlclNpemU+MCYmIXRoaXMuX2dwdX1nZXQgaW52YWxpZGF0ZWRDb21wdXRlQnVmZmVyKCl7cmV0dXJuIHRoaXMuYnVmZmVyU2l6ZT4wJiYhdGhpcy5fZ3B1Q29tcHV0ZVRyaWFuZ2xlc31pbnZhbGlkYXRlKCl7dGhpcy5faW52YWxpZGF0ZVRyaWFuZ2xlQnVmZmVyKCksdGhpcy5fZ3B1Py5kaXNwb3NlKCksdGhpcy5fZ3B1PW51bGx9X2ludmFsaWRhdGVUcmlhbmdsZUJ1ZmZlcigpe3RoaXMuX2dwdUNvbXB1dGVUcmlhbmdsZXM/LmRpc3Bvc2UoKSx0aGlzLl9ncHVDb21wdXRlVHJpYW5nbGVzPW51bGx9ZGVzdHJveSgpe3RoaXMuX2dwdT8uZGlzcG9zZSgpLHRoaXMuX2dwdUNvbXB1dGVUcmlhbmdsZXM/LmRpc3Bvc2UoKSx0aGlzLl9jcHU/LmRlc3Ryb3koKSx0aGlzLl9jcHUyPy5kZXN0cm95KCl9Y2xlYXIoKXt0aGlzLmRpcnR5LnN0YXJ0PTEvMCx0aGlzLmRpcnR5LmVuZD0wLHRoaXMuZnJlZUxpc3Q9bmV3IGUoe3N0YXJ0OjAsZW5kOnRoaXMuX2NwdS5sZW5ndGgvdGhpcy5zdHJpZGVJbnR9KSx0aGlzLmZpbGxQb2ludGVyPTB9ZW5zdXJlKHQpe2lmKHRoaXMubWF4QXZhaWxhYmxlU3BhY2UoKT49dClyZXR1cm47aWYodCp0aGlzLnN0cmlkZUludD50aGlzLl9jcHUubGVuZ3RoLXRoaXMuZmlsbFBvaW50ZXIpe3RoaXMuaW52YWxpZGF0ZSgpO2NvbnN0IGk9dGhpcy5fY3B1Lmxlbmd0aC90aGlzLnN0cmlkZUludCxlPU1hdGgucm91bmQoKGkrdCkqaCkscj1lKnRoaXMuc3RyaWRlSW50O3RoaXMuX2NwdS5leHBhbmQocipVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCksdGhpcy5mcmVlTGlzdC5mcmVlKGksZS1pKX19c2V0KHQsaSl7dGhpcy5fY3B1LmFycmF5W3RdIT09aSYmKHRoaXMuX2NwdS5hcnJheVt0XT1pLHRoaXMuZGlydHkuc3RhcnQ9TWF0aC5taW4odCx0aGlzLmRpcnR5LnN0YXJ0KSx0aGlzLmRpcnR5LmVuZD1NYXRoLm1heCh0LHRoaXMuZGlydHkuZW5kKSl9Z2V0R1BVQnVmZmVyKHQsaT0hMSl7aWYoIXRoaXMuYnVmZmVyU2l6ZSlyZXR1cm4gbnVsbDtpZihpKXtpZihcImluZGV4XCIhPT10aGlzLmJ1ZmZlclR5cGUpdGhyb3cgbmV3IEVycm9yKFwiVGlyZWQgdG8gZ2V0IHRyaWFuZ2xlIGJ1ZmZlciwgYnV0IHRhcmdldCBpcyBub3QgYW4gaW5kZXggYnVmZmVyXCIpO3JldHVybiBudWxsPT10aGlzLl9ncHVDb21wdXRlVHJpYW5nbGVzJiYodGhpcy5fZ3B1Q29tcHV0ZVRyaWFuZ2xlcz10aGlzLl9jcmVhdGVDb21wdXRlQnVmZmVyKHQpKSx0aGlzLl9ncHVDb21wdXRlVHJpYW5nbGVzfXJldHVybiBudWxsPT10aGlzLl9ncHUmJih0aGlzLl9ncHU9dGhpcy5fY3JlYXRlQnVmZmVyKHQpKSx0aGlzLl9ncHV9Z2V0Q1BVQnVmZmVyKCl7aWYoIXRoaXMuX2NwdTIpe2NvbnN0IHQ9dGhpcy5fY3B1LnNsaWNlKCk7dGhpcy5fY3B1Mj10fXJldHVybiB0aGlzLl9jcHUyLmxlbmd0aCE9PXRoaXMuX2NwdS5sZW5ndGgmJnRoaXMuX2NwdTIuZXhwYW5kKHRoaXMuX2NwdS5sZW5ndGgqdGhpcy5fY3B1LmFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKSx0aGlzLl9jcHUyLnNldCh0aGlzLl9jcHUpLHRoaXMuX2NwdTJ9Z2V0IGJ1ZmZlclNpemUoKXtyZXR1cm4gdGhpcy5fY3B1Lmxlbmd0aC90aGlzLnN0cmlkZUludH1tYXhBdmFpbGFibGVTcGFjZSgpe3JldHVybiB0aGlzLmZyZWVMaXN0Lm1heEF2YWlsYWJsZVNwYWNlKCl9aW5zZXJ0KGksZSxyLHMpe2NvbnN0IGg9cip0aGlzLnN0cmlkZUludDtpZighaClyZXR1cm4gMDtjb25zdCBuPWUqdGhpcy5zdHJpZGVJbnQqVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQsdT1uZXcgVWludDMyQXJyYXkoaSxuLGgpLGE9dGhpcy5mcmVlTGlzdC5maXJzdEZpdChyKTt0KGEsXCJGaXJzdCBmaXQgcmVnaW9uIG11c3QgYmUgZGVmaW5lZFwiKTtjb25zdCBkPWEqdGhpcy5zdHJpZGVJbnQsZj1oLHA9ZC90aGlzLnN0cmlkZUludC1lO2lmKDAhPT1zKWZvcihsZXQgdD0wO3Q8dS5sZW5ndGg7dCsrKXVbdF0rPXM7cmV0dXJuIHRoaXMuX2NwdS5hcnJheS5zZXQodSxkKSx0aGlzLmRpcnR5LnN0YXJ0PU1hdGgubWluKHRoaXMuZGlydHkuc3RhcnQsZCksdGhpcy5kaXJ0eS5lbmQ9TWF0aC5tYXgodGhpcy5kaXJ0eS5lbmQsZCtmKSx0aGlzLmZpbGxQb2ludGVyPU1hdGgubWF4KHRoaXMuZmlsbFBvaW50ZXIsZCtmKSxwfWZyZWUodCxpLGUpe2NvbnN0IHI9dCp0aGlzLnN0cmlkZUludCxzPSh0K2kpKnRoaXMuc3RyaWRlSW50O2lmKCEwPT09ZSlmb3IobGV0IGg9dDtoIT09dCtpO2grKyl0aGlzLl9jcHUuYXJyYXlbaCp0aGlzLnN0cmlkZUludF09dTt0aGlzLmRpcnR5LnN0YXJ0PU1hdGgubWluKHRoaXMuZGlydHkuc3RhcnQsciksdGhpcy5kaXJ0eS5lbmQ9TWF0aC5tYXgodGhpcy5kaXJ0eS5lbmQscyksdGhpcy5mcmVlTGlzdC5mcmVlKHQsaSl9dXBsb2FkKCl7aWYodGhpcy5kaXJ0eS5lbmQpe2lmKHRoaXMuX2ludmFsaWRhdGVUcmlhbmdsZUJ1ZmZlcigpLG51bGw9PXRoaXMuX2dwdSlyZXR1cm4gdGhpcy5kaXJ0eS5zdGFydD0xLzAsdm9pZCh0aGlzLmRpcnR5LmVuZD0wKTt0aGlzLl9ncHUuc2V0U3ViRGF0YSh0aGlzLl9jcHUuYXJyYXksdGhpcy5kaXJ0eS5zdGFydCx0aGlzLmRpcnR5LnN0YXJ0LHRoaXMuZGlydHkuZW5kKSx0aGlzLmRpcnR5LnN0YXJ0PTEvMCx0aGlzLmRpcnR5LmVuZD0wfX1fY3JlYXRlQnVmZmVyKHQpe2NvbnN0IGk9cy5EWU5BTUlDX0RSQVc7cmV0dXJuXCJpbmRleFwiPT09dGhpcy5idWZmZXJUeXBlP3IuY3JlYXRlSW5kZXgodCxpLHRoaXMuX2NwdS5hcnJheSk6ci5jcmVhdGVWZXJ0ZXgodCxpLHRoaXMuX2NwdS5hcnJheSl9X2NyZWF0ZUNvbXB1dGVCdWZmZXIodCl7Y29uc3QgaT1zLkRZTkFNSUNfRFJBVyxlPW5ldyBVaW50MzJBcnJheSh0aGlzLmZpbGxQb2ludGVyLzMpO2ZvcihsZXQgcj0wO3I8dGhpcy5maWxsUG9pbnRlcjtyKz0zKWVbci8zXT10aGlzLl9jcHUuYXJyYXlbcl07cmV0dXJuIHIuY3JlYXRlSW5kZXgodCxpLGUpfX1leHBvcnR7YSBhcyBCdWZmZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtkZXN0cm95TWF5YmUgYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e0ZlYXR1cmVEaXNwbGF5TGlzdCBhcyB0fWZyb21cIi4uL0ZlYXR1cmVEaXNwbGF5TGlzdC5qc1wiO2ltcG9ydHtCdWZmZXIgYXMgcn1mcm9tXCIuL0J1ZmZlci5qc1wiO2ltcG9ydHtEaXNwbGF5UmVjb3JkUmVhZGVyIGFzIHN9ZnJvbVwiLi9EaXNwbGF5UmVjb3JkUmVhZGVyLmpzXCI7aW1wb3J0e1ZlcnRleEFycmF5T2JqZWN0IGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvVmVydGV4QXJyYXlPYmplY3QuanNcIjtjb25zdCBuPTAsZj0xO2NsYXNzIG97Y29uc3RydWN0b3IoZSx0KXt0aGlzLl92YW9zPW5ldyBNYXAsdGhpcy5faW5kaWNlc0ludmFsaWQ9ITEsdGhpcy5nZW9tZXRyeVR5cGU9ZSx0aGlzLl9zdGFnZT10fWRlc3Ryb3koKXtmb3IoY29uc3RbZSx0XW9mIHRoaXMuX3Zhb3MpdD8uZGlzcG9zZVZBT09ubHkoKTt0aGlzLl9pbmRleEJ1ZmZlcj1lKHRoaXMuX2luZGV4QnVmZmVyKSx0aGlzLl92ZXJ0ZXhCdWZmZXI9ZSh0aGlzLl92ZXJ0ZXhCdWZmZXIpfWdldCByZWNvcmRzKCl7cmV0dXJuIHRoaXMuX3JlY29yZHN9aW5zZXJ0KGUsdCxpKXtpZighZS5yZWNvcmRzLmJ5dGVMZW5ndGgpcmV0dXJuO2NvbnN0IG49ZS5zdHJpZGU7aWYodGhpcy5fdmVydGV4QnVmZmVyJiZ0aGlzLl9pbmRleEJ1ZmZlcil7Y29uc3Qgcj1lLmluZGljZXMuYnl0ZUxlbmd0aC80LGk9ZS52ZXJ0aWNlcy5ieXRlTGVuZ3RoL247dGhpcy5faW5kZXhCdWZmZXIuZW5zdXJlKHIpLHRoaXMuX3ZlcnRleEJ1ZmZlci5lbnN1cmUoaSk7Y29uc3R7dmVydGljZXM6ZixpbmRpY2VzOm99PWUsZD1zLmZyb20oZS5yZWNvcmRzKSxoPXRoaXMuX3ZlcnRleEJ1ZmZlci5pbnNlcnQoZiwwLGYuYnl0ZUxlbmd0aC9uLDApLHU9dGhpcy5faW5kZXhCdWZmZXIuaW5zZXJ0KG8sMCxvLmJ5dGVMZW5ndGgvNCxoKTtpZihkLmZvckVhY2goKGU9PntlLmluZGV4RnJvbSs9dSxlLnZlcnRleEZyb20rPWh9KSksdGhpcy5fcmVjb3Jkcy5saW5rKGQpLHQpdGhpcy5faW5kaWNlc0ludmFsaWQ9ITA7ZWxzZSBpZih0aGlzLl9kaXNwbGF5TGlzdCl7Y29uc3QgZT1kLmdldEN1cnNvcigpO2Zvcig7ZS5uZXh0KCk7KXRoaXMuX2Rpc3BsYXlMaXN0LmFkZFJlY29yZChlKX19ZWxzZXtjb25zdCBpPWUuaW5kaWNlcy5ieXRlTGVuZ3RoLzQsZj1lLnZlcnRpY2VzLmJ5dGVMZW5ndGgvbixvPW4vVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQsZD10aGlzLl9zdGFnZS5idWZmZXJQb29sO3RoaXMuX3JlY29yZHM9cy5mcm9tKGUucmVjb3JkcyksdGhpcy5faW5kZXhCdWZmZXI9bmV3IHIoXCJpbmRleFwiLGksMSxkKSx0aGlzLl92ZXJ0ZXhCdWZmZXI9bmV3IHIoXCJ2ZXJ0ZXhcIixmLG8sZCksdGhpcy5faW5kZXhCdWZmZXIuaW5zZXJ0KGUuaW5kaWNlcywwLGUuaW5kaWNlcy5ieXRlTGVuZ3RoLzQsMCksdGhpcy5fdmVydGV4QnVmZmVyLmluc2VydChlLnZlcnRpY2VzLDAsZS52ZXJ0aWNlcy5ieXRlTGVuZ3RoL24sMCksdCYmKHRoaXMuX2luZGljZXNJbnZhbGlkPSEwKX19cmVtb3ZlKGUpe2lmKG51bGwhPXRoaXMuX3JlY29yZHMpZm9yKGNvbnN0IHQgb2YgZSl7Y29uc3QgZT10aGlzLl9yZWNvcmRzLmdldEN1cnNvcigpO2lmKCFlLmxvb2t1cCh0KSljb250aW51ZTtjb25zdCByPWUuaW5kZXhGcm9tLHM9ZS52ZXJ0ZXhGcm9tO2xldCBpPWUuaW5kZXhDb3VudCxuPWUudmVydGV4Q291bnQ7Zm9yKDtlLm5leHQoKSYmZS5pZD09PXQ7KWkrPWUuaW5kZXhDb3VudCxuKz1lLnZlcnRleENvdW50O3RoaXMuX2luZGV4QnVmZmVyLmZyZWUocixpKSx0aGlzLl92ZXJ0ZXhCdWZmZXIuZnJlZShzLG4sITApLHRoaXMuX3JlY29yZHMuZGVsZXRlKHQpfX1nZXRWQU8oZSx0LHIscyl7aWYoIXRoaXMuX3ZlcnRleEJ1ZmZlcnx8IXRoaXMuX2luZGV4QnVmZmVyfHxudWxsPT10aGlzLl9yZWNvcmRzfHwhdGhpcy5fdmVydGV4QnVmZmVyLmJ1ZmZlclNpemUpcmV0dXJuIG51bGw7Y29uc3Qgbz1zP2Y6bjtsZXQgZD10aGlzLl92YW9zLmdldChvKTsodGhpcy5fdmVydGV4QnVmZmVyLmludmFsaWRhdGVkfHx0aGlzLl9pbmRleEJ1ZmZlci5pbnZhbGlkYXRlZHx8cyYmdGhpcy5faW5kZXhCdWZmZXIuaW52YWxpZGF0ZWRDb21wdXRlQnVmZmVyKSYmKGQ/LmRpc3Bvc2VWQU9Pbmx5KCksZD1udWxsKSx0aGlzLl92ZXJ0ZXhCdWZmZXIudXBsb2FkKCksdGhpcy5faW5kZXhCdWZmZXIudXBsb2FkKCk7Y29uc3QgaD10aGlzLl9pbmRleEJ1ZmZlci5nZXRHUFVCdWZmZXIoZSwxPT09byksdT10aGlzLl92ZXJ0ZXhCdWZmZXIuZ2V0R1BVQnVmZmVyKGUpO3JldHVybiBkfHwoZD1uZXcgaShlLHIsdCx7Z2VvbWV0cnk6dX0saCksdGhpcy5fdmFvcy5zZXQobyxkKSksZH1mb3JFYWNoQ29tbWFuZChlKXtpZihudWxsIT10aGlzLl9yZWNvcmRzKXtpZih0aGlzLl9zb3J0SW5kaWNlcyh0aGlzLl9yZWNvcmRzKSwhdGhpcy5fZGlzcGxheUxpc3Qpe2NvbnN0IGU9dGhpcy5fY3Vyc29ySW5kZXhPcmRlcjt0aGlzLl9kaXNwbGF5TGlzdD10LmZyb20odGhpcyx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLl9yZWNvcmRzLmdldEN1cnNvcigpLGUpfXRoaXMuX2Rpc3BsYXlMaXN0LmZvckVhY2goZSl9fV9zb3J0SW5kaWNlcyhlKXtjb25zdCB0PSEhdGhpcy5faW5kZXhCdWZmZXIuYnVmZmVyU2l6ZTtpZighdGhpcy5faW5kaWNlc0ludmFsaWQpcmV0dXJuO3RoaXMuX2luZGljZXNJbnZhbGlkPSExO2xldCByPTA7Y29uc3Qgcz1lLmdldEN1cnNvcigpLGk9W10sbj1bXSxmPVtdO2Zvcig7cy5uZXh0KCk7KW4ucHVzaChzLmluZGV4KSxmLnB1c2gocy5zb3J0S2V5KSxpLnB1c2gocy5pZCk7bi5zb3J0KCgoZSx0KT0+e2NvbnN0IHI9Zlt0XSxzPWZbZV07cmV0dXJuIHM9PT1yP2lbdF0taVtlXTpyLXN9KSk7Y29uc3Qgbz1lLmdldEN1cnNvcigpLGQ9dD90aGlzLl9pbmRleEJ1ZmZlci5nZXRDUFVCdWZmZXIoKTp0aGlzLl92ZXJ0ZXhCdWZmZXIuZ2V0Q1BVQnVmZmVyKCk7Zm9yKGNvbnN0IGggb2Ygbil7aWYoIW8uc2Vla0luZGV4KGgpKXRocm93IG5ldyBFcnJvcihcIkV4cGVjdGVkIHRvIGZpbmQgaW5kZXhcIik7aWYodCl7Y29uc3R7aW5kZXhGcm9tOmUsaW5kZXhDb3VudDp0fT1vO28uaW5kZXhGcm9tPXI7Zm9yKGxldCBzPTA7czx0O3MrKyl0aGlzLl9pbmRleEJ1ZmZlci5zZXQocisrLGQuYXJyYXlbZStzXSl9ZWxzZXtjb25zdHt2ZXJ0ZXhGcm9tOmUsdmVydGV4Q291bnQ6dH09byxzPXRoaXMuX3ZlcnRleEJ1ZmZlci5zdHJpZGVJbnQsaT1lKnMsbj1pK3QqcztvLnZlcnRleEZyb209ci9zO2ZvcihsZXQgZj1pO2Y8bjtmKyspdGhpcy5fdmVydGV4QnVmZmVyLnNldChyKyssZC5hcnJheVtmXSl9fXRoaXMuX2N1cnNvckluZGV4T3JkZXI9bix0aGlzLl9kaXNwbGF5TGlzdD1udWxsfX1leHBvcnR7byBhcyBHZW9tZXRyeX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vQWdncmVnYXRlR3JhcGhpYy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9HcmFwaGljLmpzXCI7aW1wb3J0e2lzU29tZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uL2NvcmUvQ29sbGVjdGlvbi5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2Nsb25lIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIHUscmVtb3ZlTWF5YmUgYXMgZH1mcm9tXCIuLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2RlYm91bmNlIGFzIGgsaXNBYm9ydEVycm9yIGFzIHB9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgYyxzeW5jQW5kSW5pdGlhbCBhcyB5LGluaXRpYWwgYXMgZ31mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHQycHggYXMgZn1mcm9tXCIuLi8uLi8uLi9jb3JlL3NjcmVlblV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG19ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBffWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnQgYiBmcm9tXCIuLi8uLi8uLi9sYXllcnMvZWZmZWN0cy9GZWF0dXJlRWZmZWN0Vmlldy5qc1wiO2ltcG9ydCB2IGZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L0ZlYXR1cmVGaWx0ZXIuanNcIjtpbXBvcnR7Z2V0RWZmZWN0aXZlTGF5ZXJDYXBhYmlsaXRpZXMgYXMgd31mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9sYXllclV0aWxzLmpzXCI7aW1wb3J0IFIgZnJvbVwiLi4vLi4vLi4vcmVzdC9zdXBwb3J0L0FnZ3JlZ2F0ZUZlYXR1cmVTZXQuanNcIjtpbXBvcnQgeCBmcm9tXCIuLi8uLi8uLi9yZXN0L3N1cHBvcnQvRmVhdHVyZVNldC5qc1wiO2ltcG9ydCBTIGZyb21cIi4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydHttYXhGaWx0ZXJzIGFzIEZ9ZnJvbVwiLi4vZW5naW5lL3dlYmdsL2RlZmluaXRpb25zLmpzXCI7aW1wb3J0e0xheWVyVmlldzJETWl4aW4gYXMgVX1mcm9tXCIuL0xheWVyVmlldzJELmpzXCI7aW1wb3J0e2NyZWF0ZVNjaGVtYSBhcyBDfWZyb21cIi4vZmVhdHVyZXMvc2NoZW1hVXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlT3JSZXVzZVRpbGVSZW5kZXJlciBhcyBJfWZyb21cIi4vZmVhdHVyZXMvdGlsZVJlbmRlcmVycy5qc1wiO2ltcG9ydHtpc1JlbmRlcmVyU3VwcG9ydGVkIGFzIHF9ZnJvbVwiLi9mZWF0dXJlcy9zdXBwb3J0L3JlbmRlcmVyVXRpbHMuanNcIjtpbXBvcnR7ZmluZFNpemVWViBhcyBWLGNyZWF0ZUNsdXN0ZXJDb3VudFNpemVWYXJpYWJsZSBhcyBFLGluamVjdER5bmFtaWNMZXZlbERlcGVuZGVudFNpemVWaXN1YWxWYXJpYWJsZSBhcyBPLGlzQ2x1c3RlckNvbXBhdGlibGVSZW5kZXJlciBhcyBULGNyZWF0ZUNsdXN0ZXJSZW5kZXJlciBhcyBqfWZyb21cIi4vc3VwcG9ydC9jbHVzdGVyVXRpbHMuanNcIjtpbXBvcnQgQSBmcm9tXCIuL3N1cHBvcnQvRmVhdHVyZUNvbW1hbmRRdWV1ZS5qc1wiO2ltcG9ydCBMIGZyb21cIi4vc3VwcG9ydC9GZWF0dXJlTGF5ZXJQcm94eS5qc1wiO2ltcG9ydHtnZXRTaXplRm9yVmFsdWVTaW1wbGUgYXMgUH1mcm9tXCIuL3N1cHBvcnQvdmlzdWFsVmFyaWFibGVTaW1wbGVVdGlscy5qc1wiO2ltcG9ydHtUaWxlTWFuYWdlciBhcyBRfWZyb21cIi4uL3RpbGluZy9UaWxlTWFuYWdlci5qc1wiO2ltcG9ydCBOIGZyb21cIi4uLy4uL2xheWVycy9GZWF0dXJlTGF5ZXJWaWV3LmpzXCI7aW1wb3J0IGsgZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2ltcG9ydCBIIGZyb21cIi4uLy4uL2xheWVycy9SZWZyZXNoYWJsZUxheWVyVmlldy5qc1wiO2ltcG9ydHtnZXRXZWJHTENhcGFiaWxpdGllcyBhcyB6fWZyb21cIi4uLy4uL3dlYmdsL2NhcGFiaWxpdGllcy5qc1wiO2ltcG9ydCBKIGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L0V4dGVudC5qc1wiO2Z1bmN0aW9uIEQoZSl7cmV0dXJuIGUmJlwib3BlblBvcnRzXCJpbiBlfWZ1bmN0aW9uIE0oZSl7Zm9yKGNvbnN0IHQgb2YgZSl7Y29uc3QgZT1cImZlYXR1cmVSZWR1Y3Rpb25cImluIHQmJnQuZmVhdHVyZVJlZHVjdGlvbiYmXCJsYWJlbGluZ0luZm9cImluIHQuZmVhdHVyZVJlZHVjdGlvbj90LmZlYXR1cmVSZWR1Y3Rpb246dm9pZCAwLHI9Wy4uLnQubGFiZWxpbmdJbmZvfHxbXSwuLi5lPy5sYWJlbGluZ0luZm98fFtdXTtpZighdC5sYWJlbHNWaXNpYmxlfHwhci5sZW5ndGgpY29udGludWU7aWYoci5zb21lKChlPT5cIm5vbmVcIj09PWUuZGVjb25mbGljdGlvblN0cmF0ZWd5KSkpcmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gRyhlKXtyZXR1cm4gdD0+ZihQKHQsZSkpfWZ1bmN0aW9uIEIoZSl7Y29uc3QgdD1udWxsIT1lJiZcInZpc3VhbFZhcmlhYmxlc1wiaW4gZSYmZS52aXN1YWxWYXJpYWJsZXM7aWYoIXQpcmV0dXJuIG51bGw7Zm9yKGNvbnN0IHIgb2YgdClpZihcInNpemVcIj09PXIudHlwZSlyZXR1cm4gRyhyKTtyZXR1cm4gbnVsbH1jb25zdCAkPVwiZXNyaS52aWV3cy4yZC5sYXllcnMuRmVhdHVyZUxheWVyVmlldzJEXCI7ZnVuY3Rpb24gSyhlKXtzd2l0Y2goZS5nZW9tZXRyeVR5cGUpe2Nhc2VcInBvaW50XCI6cmV0dXJuXCJlc3JpR2VvbWV0cnlQb2ludFwiO2Nhc2VcInBvbHlsaW5lXCI6cmV0dXJuXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiO2Nhc2VcInBvbHlnb25cIjpjYXNlXCJtdWx0aXBhdGNoXCI6cmV0dXJuXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI7Y2FzZVwibXVsdGlwb2ludFwiOnJldHVyblwiZXNyaUdlb21ldHJ5TXVsdGlwb2ludFwiO2RlZmF1bHQ6cmV0dXJuIGwuZ2V0TG9nZ2VyKCQpLmVycm9yKG5ldyBhKFwidW5zdXBwb3J0ZWQtZ2VvbWV0cnktdHlwZVwiLGBHZW9tZXRyeSB0eXBlIG9mICR7ZS5nZW9tZXRyeVR5cGV9IGlzIG5vdCBzdXBwb3J0ZWRgKSksbnVsbH19bGV0IFo9Y2xhc3MgZXh0ZW5kcyhOKEgoVShrKSkpKXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fcGlwZWxpbmVJc1VwZGF0aW5nPSEwLHRoaXMuX2NvbW1hbmRzUXVldWU9bmV3IEEoe3Byb2Nlc3M6ZT0+e3N3aXRjaChlLnR5cGUpe2Nhc2VcInByb2Nlc3NlZC1lZGl0XCI6cmV0dXJuIHRoaXMuX2RvRWRpdChlKTtjYXNlXCJyZWZyZXNoXCI6cmV0dXJuIHRoaXMuX2RvUmVmcmVzaChlLmRhdGFDaGFuZ2VkKTtjYXNlXCJ1cGRhdGVcIjpyZXR1cm4gdGhpcy5fZG9VcGRhdGUoKX19fSksdGhpcy5fdmlzaWJpbGl0eU92ZXJyaWRlcz1uZXcgU2V0LHRoaXMuX2hpZ2hsaWdodElkcz1uZXcgTWFwLHRoaXMuX3VwZGF0ZUhpZ2hsaWdodD1oKChhc3luYygpPT50aGlzLl9wcm94eS5zZXRIaWdobGlnaHQoQXJyYXkuZnJvbSh0aGlzLl9oaWdobGlnaHRJZHMua2V5cygpKSkpKSx0aGlzLl91cGxvYWRzTG9ja2VkPSExLHRoaXMuX25lZWRzQ2x1c3RlclNpemVVcGRhdGU9ITEsdGhpcy5mZWF0dXJlRWZmZWN0Vmlldz1uZXcgYix0aGlzLl9sYXN0RGVmaW5pdGlvbkV4cHJlc3Npb249bnVsbH1kZXN0cm95KCl7dGhpcy5fdXBkYXRlQ2x1c3RlclNpemVUYXNrPy5yZW1vdmUoKSx0aGlzLl9wcm94eT8uZGVzdHJveSgpLHRoaXMuX2NvbW1hbmRzUXVldWUuZGVzdHJveSgpfWluaXRpYWxpemUoKXt0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UoUHJvbWlzZS5hbGwoW3RoaXMuX2luaXRQcm94eSgpLHRoaXMuX2luaXRTZXJ2aWNlT3B0aW9ucygpXSkpLHRoaXMuYWRkSGFuZGxlcyhbdGhpcy5vbihcInZhbHVlUmFuZ2VzQ2hhbmdlZFwiLChlPT57dGhpcy5fc2V0KFwiX2FnZ3JlZ2F0ZVZhbHVlUmFuZ2VzXCIsZS52YWx1ZVJhbmdlcyl9KSksYygoKCk9PnRoaXMuZmVhdHVyZUVmZmVjdCksKGU9Pnt0aGlzLmZlYXR1cmVFZmZlY3RWaWV3LmZlYXR1cmVFZmZlY3Q9ZX0pLHkpXSxcImNvbnN0cnVjdG9yXCIpLHRoaXMuZmVhdHVyZUVmZmVjdFZpZXcuZW5kVHJhbnNpdGlvbnMoKX1hc3luYyBfaW5pdFByb3h5KCl7Y29uc3QgZT10aGlzLmxheWVyO2lmKFwiaXNUYWJsZVwiaW4gZSYmZS5pc1RhYmxlKXRocm93IG5ldyBhKFwiZmVhdHVyZWxheWVydmlldzp0YWJsZS1ub3Qtc3VwcG9ydGVkXCIsXCJ0YWJsZSBmZWF0dXJlIGxheWVyIGNhbid0IGJlIGRpc3BsYXllZFwiLHtsYXllcjp0aGlzLmxheWVyfSk7aWYoKFwiZmVhdHVyZVwiPT09ZS50eXBlfHxcInN1YnR5cGUtZ3JvdXBcIj09PWUudHlwZSkmJiF3KGUpPy5vcGVyYXRpb25zLnN1cHBvcnRzUXVlcnkpdGhyb3cgbmV3IGEoXCJmZWF0dXJlbGF5ZXJ2aWV3OnF1ZXJ5LW5vdC1zdXBwb3J0ZWRcIixcImxheWVyIHZpZXcgcmVxdWlyZXMgYSBsYXllciB3aXRoIHF1ZXJ5IGNhcGFiaWxpdHlcIix7bGF5ZXI6ZX0pO3RoaXMuX3Byb3h5JiZ0aGlzLl9wcm94eS5kZXN0cm95KCk7Y29uc3QgdD10aGlzLl9jcmVhdGVDbGllbnRPcHRpb25zKCk7cmV0dXJuIHRoaXMuX3NldChcIl9wcm94eVwiLG5ldyBMKHtjbGllbnQ6dH0pKSx0aGlzLl9wcm94eS53aGVuKCl9YXN5bmMgX2luaXRTZXJ2aWNlT3B0aW9ucygpe3JldHVybiB0aGlzLl9zZXQoXCJfc2VydmljZU9wdGlvbnNcIixhd2FpdCB0aGlzLl9jcmVhdGVTZXJ2aWNlT3B0aW9ucygpKSx0aGlzLl9zZXJ2aWNlT3B0aW9uc31nZXQgX2VmZmVjdGl2ZUZlYXR1cmVSZWR1Y3Rpb24oKXtpZighKFwiZmVhdHVyZVJlZHVjdGlvblwiaW4gdGhpcy5sYXllcikpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLmxheWVyLmZlYXR1cmVSZWR1Y3Rpb247cmV0dXJuIGUmJighKFwibWF4U2NhbGVcImluIGUpfHwhZS5tYXhTY2FsZXx8ZS5tYXhTY2FsZTx0aGlzLnZpZXcuc2NhbGUpP2U6bnVsbH1nZXQgb3JkZXJCeUZpZWxkcygpe3JldHVyblwic3RyZWFtXCIhPT10aGlzLl9zZXJ2aWNlT3B0aW9ucz8udHlwZT90aGlzLl9zZXJ2aWNlT3B0aW9ucz8ub3JkZXJCeUZpZWxkczp2b2lkIDB9Z2V0IGxhYmVsc1Zpc2libGUoKXtjb25zdCBlPVwic3VidHlwZS1ncm91cFwiPT09dGhpcy5sYXllci50eXBlP3RoaXMubGF5ZXIuc3VibGF5ZXJzLml0ZW1zOlt0aGlzLmxheWVyXTtyZXR1cm4hdGhpcy5zdXNwZW5kZWQmJmUuc29tZSgoZT0+ZS5sYWJlbGluZ0luZm8mJmUubGFiZWxzVmlzaWJsZSkpfWdldCBsYWJlbGluZ0NvbGxpc2lvbkluZm9zKCl7Y29uc3R7dGlsZVJlbmRlcmVyOmUsbGF5ZXI6dH09dGhpcztpZihudWxsPT1lKXJldHVybiBudWxsO2NvbnN0IHI9XCJzdWJ0eXBlLWdyb3VwXCI9PT10aGlzLmxheWVyLnR5cGU/dGhpcy5sYXllci5zdWJsYXllcnMuaXRlbXM6W3RoaXMubGF5ZXJdLGk9dC5nZW9tZXRyeVR5cGUscz0hTShyKSxhPXt9O2lmKFwic3VidHlwZS1ncm91cFwiIT09dC50eXBlKXtpZihcImhlYXRtYXBcIj09PWU/LnR5cGUpcmV0dXJuIG51bGw7Y29uc3Qgcj1CKHQucmVuZGVyZXIpO2FbMF09cn1yZXR1cm5be3RpbGVSZW5kZXJlcjplLHZ2RXZhbHVhdG9yczphLGRlY29uZmxpY3Rpb25FbmFibGVkOnMsZ2VvbWV0cnlUeXBlOmksdmlzaWJsZTohdGhpcy5zdXNwZW5kZWR9XX1nZXQgcXVlcnlNb2RlKCl7cmV0dXJuIHRoaXMuX3NlcnZpY2VPcHRpb25zPy50eXBlfWdldCByZW5kZXJpbmdDb25maWdIYXNoKCl7aWYoIXRoaXMubGF5ZXIpcmV0dXJuIG51bGw7Y29uc3QgZT10aGlzLmF2YWlsYWJsZUZpZWxkcyx0PXRoaXMubGF5ZXIscj10aGlzLnZpZXcuZmxvb3JzLHtkZWZpbml0aW9uRXhwcmVzc2lvbjppfT10LHM9XCJzdWJ0eXBlLWdyb3VwXCIhPT10aGlzLmxheWVyLnR5cGUmJnRoaXMubGF5ZXIubGFiZWxzVmlzaWJsZSYmdGhpcy5sYXllci5sYWJlbGluZ0luZm8sYT1cInJlbmRlcmVyXCJpbiB0JiZ0LnJlbmRlcmVyLG49XCJnZGJWZXJzaW9uXCJpbiB0P3QuZ2RiVmVyc2lvbjp2b2lkIDAsbz1cImhpc3RvcmljTW9tZW50XCJpbiB0P3QuaGlzdG9yaWNNb21lbnQ/LmdldFRpbWUoKTp2b2lkIDAse3RpbWVFeHRlbnQ6bH09dGhpcyx1PVwiY3VzdG9tUGFyYW1ldGVyc1wiaW4gdD9KU09OLnN0cmluZ2lmeSh0LmN1c3RvbVBhcmFtZXRlcnMpOnZvaWQgMCxkPVwiYXBpS2V5XCJpbiB0P3QuYXBpS2V5OnZvaWQgMCxoPVwic3RyZWFtXCI9PT10LnR5cGU/YCR7SlNPTi5zdHJpbmdpZnkodC5nZW9tZXRyeURlZmluaXRpb24pfSR7dC5kZWZpbml0aW9uRXhwcmVzc2lvbn1gOm51bGwscD1KU09OLnN0cmluZ2lmeSh0aGlzLmNsaXBzKSxjPXRoaXMuX2VmZmVjdGl2ZUZlYXR1cmVSZWR1Y3Rpb24/LnRvSlNPTigpLHk9XCJvcmRlckJ5XCJpbiB0aGlzLmxheWVyJiZKU09OLnN0cmluZ2lmeSh0aGlzLmxheWVyLm9yZGVyQnkpLGc9XCJzdWJsYXllcnNcImluIHRoaXMubGF5ZXImJnRoaXMubGF5ZXIuc3VibGF5ZXJzLml0ZW1zLnJlZHVjZSgoKGUsdCk9PmUrYCR7dC52aXNpYmxlPzE6MH0uJHtKU09OLnN0cmluZ2lmeSh0LnJlbmRlcmVyKX0uJHt0LmxhYmVsc1Zpc2libGV9XFxuLiR7SlNPTi5zdHJpbmdpZnkodC5sYWJlbGluZ0luZm8pfWApLFwiXCIpLGY9XCJzdWJ0eXBlQ29kZVwiaW4gdGhpcy5sYXllciYmdGhpcy5sYXllci5zdWJ0eXBlQ29kZTtyZXR1cm4gSlNPTi5zdHJpbmdpZnkoe29yZGVyQnk6eSxzdWJsYXllckhhc2g6ZyxzdWJ0eXBlQ29kZTpmLGZpbHRlckhhc2g6bnVsbCE9dGhpcy5maWx0ZXImJnRoaXMuZmlsdGVyLnRvSlNPTigpLGVmZmVjdEhhc2g6bnVsbCE9dGhpcy5mZWF0dXJlRWZmZWN0JiZ0aGlzLmZlYXR1cmVFZmZlY3QudG9KU09OKCksc3RyZWFtRmlsdGVyOmgsZ2RiVmVyc2lvbjpuLGRlZmluaXRpb25FeHByZXNzaW9uOmksaGlzdG9yaWNNb21lbnQ6byxhdmFpbGFibGVGaWVsZHM6ZSxyZW5kZXJlcjphLGxhYmVsaW5nSW5mbzpzLHRpbWVFeHRlbnQ6bCxmbG9vcnM6cixjbGlwc0hhc2g6cCxmZWF0dXJlUmVkdWN0aW9uOmMsY3VzdG9tUGFyYW1ldGVyczp1LGFwaUtleTpkLHRpbWVab25lOnRoaXMudmlldy50aW1lWm9uZX0pfWhpZ2hsaWdodChlKXtsZXQgdDtlIGluc3RhbmNlb2Ygcj90PVtlLmdldE9iamVjdElkKCldOlwibnVtYmVyXCI9PXR5cGVvZiBlfHxcInN0cmluZ1wiPT10eXBlb2YgZT90PVtlXTpzLmlzQ29sbGVjdGlvbihlKSYmZS5sZW5ndGg+MD90PWUubWFwKChlPT5lPy5nZXRPYmplY3RJZCgpKSkudG9BcnJheSgpOkFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoPjAmJih0PVwibnVtYmVyXCI9PXR5cGVvZiBlWzBdfHxcInN0cmluZ1wiPT10eXBlb2YgZVswXT9lOmUubWFwKChlPT5lPy5nZXRPYmplY3RJZCgpKSkpO2NvbnN0IGE9dD8uZmlsdGVyKGkpO3JldHVybiBhPy5sZW5ndGg/KHRoaXMuX2FkZEhpZ2hsaWdodChhKSxuKCgoKT0+dGhpcy5fcmVtb3ZlSGlnaGxpZ2h0KGEpKSkpOm4oKX1oYXNIaWdobGlnaHQoKXtyZXR1cm4hIXRoaXMuX2hpZ2hsaWdodElkcy5zaXplfWFzeW5jIGhpdFRlc3QoZSxpKXtpZighdGhpcy50aWxlUmVuZGVyZXIpcmV0dXJuIG51bGw7Y29uc3Qgcz1hd2FpdCB0aGlzLnRpbGVSZW5kZXJlci5oaXRUZXN0KGkpO2lmKDA9PT1zLmxlbmd0aClyZXR1cm4gbnVsbDtoYXMoXCJmZWF0dXJlbGF5ZXItZm9yY2UtbWFya2VyLXRleHQtZHJhdy1vcmRlclwiKSYmcy5zb3J0KCgoZSx0KT0+ZS10KSk7Y29uc3R7ZmVhdHVyZXM6YSxhZ2dyZWdhdGVzOm59PWF3YWl0IHRoaXMuX3Byb3h5LmdldEZlYXR1cmVzKHMpO3JldHVyblsuLi5uLm1hcCgocj0+dGhpcy5fY3JlYXRlR3JhcGhpY0hpdChlLHQuZnJvbUpTT04ocikpKSksLi4uYS5tYXAoKHQ9PnRoaXMuX2NyZWF0ZUdyYXBoaWNIaXQoZSxyLmZyb21KU09OKHQpKSkpXX1xdWVyeVN0YXRpc3RpY3MoKXtyZXR1cm4gdGhpcy5fcHJveHkucXVlcnlTdGF0aXN0aWNzKCl9YXN5bmMgcXVlcnlTdW1tYXJ5U3RhdGlzdGljcyhlLHQscil7Y29uc3QgaT17Li4udCxzY2FsZTp0aGlzLnZpZXcuc2NhbGV9O3JldHVybiB0aGlzLl9wcm94eS5xdWVyeVN1bW1hcnlTdGF0aXN0aWNzKHRoaXMuX2NsZWFuVXBRdWVyeShlKSxpLHIpfWFzeW5jIHF1ZXJ5QWdncmVnYXRlU3VtbWFyeVN0YXRpc3RpY3MoZSx0LHIpe2NvbnN0IGk9ey4uLnQsc2NhbGU6dGhpcy52aWV3LnNjYWxlfTtyZXR1cm4gdGhpcy5fcHJveHkucXVlcnlBZ2dyZWdhdGVTdW1tYXJ5U3RhdGlzdGljcyh0aGlzLl9jbGVhblVwQWdncmVnYXRlUXVlcnkoZSksaSxyKX1hc3luYyBxdWVyeVVuaXF1ZVZhbHVlcyhlLHQscil7Y29uc3QgaT17Li4udCxzY2FsZTp0aGlzLnZpZXcuc2NhbGV9O3JldHVybiB0aGlzLl9wcm94eS5xdWVyeVVuaXF1ZVZhbHVlcyh0aGlzLl9jbGVhblVwUXVlcnkoZSksaSxyKX1hc3luYyBxdWVyeUFnZ3JlZ2F0ZVVuaXF1ZVZhbHVlcyhlLHQscil7Y29uc3QgaT17Li4udCxzY2FsZTp0aGlzLnZpZXcuc2NhbGV9O3JldHVybiB0aGlzLl9wcm94eS5xdWVyeUFnZ3JlZ2F0ZVVuaXF1ZVZhbHVlcyh0aGlzLl9jbGVhblVwQWdncmVnYXRlUXVlcnkoZSksaSxyKX1hc3luYyBxdWVyeUNsYXNzQnJlYWtzKGUsdCxyKXtjb25zdCBpPXsuLi50LHNjYWxlOnRoaXMudmlldy5zY2FsZX07cmV0dXJuIHRoaXMuX3Byb3h5LnF1ZXJ5Q2xhc3NCcmVha3ModGhpcy5fY2xlYW5VcFF1ZXJ5KGUpLGkscil9YXN5bmMgcXVlcnlBZ2dyZWdhdGVDbGFzc0JyZWFrcyhlLHQscil7Y29uc3QgaT17Li4udCxzY2FsZTp0aGlzLnZpZXcuc2NhbGV9O3JldHVybiB0aGlzLl9wcm94eS5xdWVyeUFnZ3JlZ2F0ZUNsYXNzQnJlYWtzKHRoaXMuX2NsZWFuVXBBZ2dyZWdhdGVRdWVyeShlKSxpLHIpfWFzeW5jIHF1ZXJ5SGlzdG9ncmFtKGUsdCxyKXtjb25zdCBpPXsuLi50LHNjYWxlOnRoaXMudmlldy5zY2FsZX07cmV0dXJuIHRoaXMuX3Byb3h5LnF1ZXJ5SGlzdG9ncmFtKHRoaXMuX2NsZWFuVXBRdWVyeShlKSxpLHIpfWFzeW5jIHF1ZXJ5QWdncmVnYXRlSGlzdG9ncmFtKGUsdCxyKXtjb25zdCBpPXsuLi50LHNjYWxlOnRoaXMudmlldy5zY2FsZX07cmV0dXJuIHRoaXMuX3Byb3h5LnF1ZXJ5QWdncmVnYXRlSGlzdG9ncmFtKHRoaXMuX2NsZWFuVXBBZ2dyZWdhdGVRdWVyeShlKSxpLHIpfXF1ZXJ5RmVhdHVyZXMoZSx0KXtyZXR1cm4gdGhpcy5xdWVyeUZlYXR1cmVzSlNPTihlLHQpLnRoZW4oKGU9Pntjb25zdCB0PXguZnJvbUpTT04oZSk7cmV0dXJuIHQuZmVhdHVyZXMuZm9yRWFjaCgoZT0+dGhpcy5fc2V0TGF5ZXJzRm9yRmVhdHVyZShlKSkpLHR9KSl9cXVlcnlWaXNpYmxlRmVhdHVyZXMoZSx0KXtyZXR1cm4gdGhpcy5fcHJveHkucXVlcnlWaXNpYmxlRmVhdHVyZXModGhpcy5fY2xlYW5VcFF1ZXJ5KGUpLHQpLnRoZW4oKGU9Pntjb25zdCB0PXguZnJvbUpTT04oZSk7cmV0dXJuIHQuZmVhdHVyZXMuZm9yRWFjaCgoZT0+dGhpcy5fc2V0TGF5ZXJzRm9yRmVhdHVyZShlKSkpLHR9KSl9YXN5bmMgcXVlcnlBZ2dyZWdhdGVzKGUsdCl7Y29uc3Qgcj1hd2FpdCB0aGlzLl9wcm94eS5xdWVyeUFnZ3JlZ2F0ZXModGhpcy5fY2xlYW5VcEFnZ3JlZ2F0ZVF1ZXJ5KGUpLHQpLGk9Ui5mcm9tSlNPTihyKTtyZXR1cm4gaS5mZWF0dXJlcy5mb3JFYWNoKChlPT50aGlzLl9zZXRMYXllcnNGb3JGZWF0dXJlKGUpKSksaX1xdWVyeUFnZ3JlZ2F0ZUlkcyhlLHQpe3JldHVybiB0aGlzLl9wcm94eS5xdWVyeUFnZ3JlZ2F0ZUlkcyh0aGlzLl9jbGVhblVwQWdncmVnYXRlUXVlcnkoZSksdCl9cXVlcnlBZ2dyZWdhdGVDb3VudChlLHQpe3JldHVybiB0aGlzLl9wcm94eS5xdWVyeUFnZ3JlZ2F0ZUNvdW50KHRoaXMuX2NsZWFuVXBBZ2dyZWdhdGVRdWVyeShlKSx0KX1xdWVyeUFnZ3JlZ2F0ZUpTT04oZSx0KXtyZXR1cm4gdGhpcy5fcHJveHkucXVlcnlBZ2dyZWdhdGVzKHRoaXMuX2NsZWFuVXBBZ2dyZWdhdGVRdWVyeShlKSx0KX1xdWVyeUZlYXR1cmVzSlNPTihlLHQpe3JldHVybiB0aGlzLl9wcm94eS5xdWVyeUZlYXR1cmVzKHRoaXMuX2NsZWFuVXBRdWVyeShlKSx0KX1xdWVyeU9iamVjdElkcyhlLHQpe3JldHVybiB0aGlzLl9wcm94eS5xdWVyeU9iamVjdElkcyh0aGlzLl9jbGVhblVwUXVlcnkoZSksdCl9cXVlcnlGZWF0dXJlQ291bnQoZSx0KXtyZXR1cm4gdGhpcy5fcHJveHkucXVlcnlGZWF0dXJlQ291bnQodGhpcy5fY2xlYW5VcFF1ZXJ5KGUpLHQpfXF1ZXJ5RXh0ZW50KGUsdCl7cmV0dXJuIHRoaXMuX3Byb3h5LnF1ZXJ5RXh0ZW50KHRoaXMuX2NsZWFuVXBRdWVyeShlKSx0KS50aGVuKChlPT4oe2NvdW50OmUuY291bnQsZXh0ZW50OkouZnJvbUpTT04oZS5leHRlbnQpfSkpKX1zZXRWaXNpYmlsaXR5KGUsdCl7dD90aGlzLl92aXNpYmlsaXR5T3ZlcnJpZGVzLmRlbGV0ZShlKTp0aGlzLl92aXNpYmlsaXR5T3ZlcnJpZGVzLmFkZChlKSx0aGlzLl91cGRhdGUoKX11cGRhdGUoZSl7aWYoIXRoaXMuX3RpbGVTdHJhdGVneXx8IXRoaXMudGlsZVJlbmRlcmVyKXJldHVybjtjb25zdHtoYXNNaXNzaW5nVGlsZXM6dCxhZGRlZDpyLHJlbW92ZWQ6aX09dGhpcy5fdGlsZVN0cmF0ZWd5LnVwZGF0ZShlKTsoci5sZW5ndGh8fGkubGVuZ3RoKSYmdGhpcy5fcHJveHkudXBkYXRlVGlsZXMoe2FkZGVkOnIscmVtb3ZlZDppfSksdCYmdGhpcy5yZXF1ZXN0VXBkYXRlKCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKX1hdHRhY2goKXt0aGlzLnZpZXcudGltZWxpbmUucmVjb3JkKGAke3RoaXMubGF5ZXIudGl0bGV9IChGZWF0dXJlTGF5ZXIpIEF0dGFjaGApLHRoaXMuX3RpbGVTdHJhdGVneT1uZXcgUSh7YWNxdWlyZVRpbGU6ZT0+dGhpcy5fYWNxdWlyZVRpbGUoZSkscmVsZWFzZVRpbGU6ZT0+dGhpcy5fcmVsZWFzZVRpbGUoZSksdGlsZUluZm9WaWV3OnRoaXMudmlldy5mZWF0dXJlc1RpbGluZ1NjaGVtZSxidWZmZXI6MH0pLHRoaXMuYWRkQXR0YWNoSGFuZGxlcyhjKCgoKT0+dGhpcy5yZW5kZXJpbmdDb25maWdIYXNoKSwoKCk9PnRoaXMuX3VwZGF0ZSgpKSxnKSksXCJzdHJlYW1cIiE9PXRoaXMubGF5ZXIudHlwZSYmdGhpcy5hZGRBdHRhY2hIYW5kbGVzKHRoaXMubGF5ZXIub24oXCJlZGl0c1wiLChlPT50aGlzLl9lZGl0KGUpKSkpfWRldGFjaCgpe3RoaXMuX2NvbW1hbmRzUXVldWUuY2xlYXIoKSx0aGlzLl9wcm94eT8uc3RvcCgpLHRoaXMuY29udGFpbmVyLnJlbW92ZUFsbENoaWxkcmVuKCksdGhpcy50aWxlUmVuZGVyZXI/LnVuaW5zdGFsbCh0aGlzLmNvbnRhaW5lciksdGhpcy50aWxlUmVuZGVyZXI9bnVsbCx0aGlzLl90aWxlU3RyYXRlZ3k9dSh0aGlzLl90aWxlU3RyYXRlZ3kpLHRoaXMuX3RpbGVSZW5kZXJlckhhc2g9bnVsbH1tb3ZlU3RhcnQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX12aWV3Q2hhbmdlKCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9bW92ZUVuZCgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfWlzVXBkYXRpbmcoKXtjb25zdCBlPVwicmVuZGVyZXJcImluIHRoaXMubGF5ZXImJm51bGwhPXRoaXMubGF5ZXIucmVuZGVyZXIsdD10aGlzLl9jb21tYW5kc1F1ZXVlLnVwZGF0aW5nLHI9bnVsbCE9dGhpcy5fdXBkYXRpbmdSZXF1aXJlZEZpZWxkc1Byb21pc2UsaT0hdGhpcy5fcHJveHl8fCF0aGlzLl9wcm94eS5pc1JlYWR5LHM9dGhpcy5fcGlwZWxpbmVJc1VwZGF0aW5nLGE9bnVsbD09dGhpcy50aWxlUmVuZGVyZXJ8fHRoaXMudGlsZVJlbmRlcmVyPy51cGRhdGluZyxuPWUmJih0fHxyfHxpfHxzfHx0aGlzLmRhdGFVcGRhdGluZ3x8YSk7cmV0dXJuIGhhcyhcImVzcmktMmQtbG9nLXVwZGF0aW5nXCIpJiZjb25zb2xlLmxvZyhgVXBkYXRpbmcgRkxWMkQgKCR7dGhpcy5sYXllci5pZH0pOiAke259XFxuICAtPiBoYXNSZW5kZXJlciAke2V9XFxuICAtPiBoYXNQZW5kaW5nQ29tbWFuZCAke3R9XFxuICAtPiB1cGRhdGluZ1JlcXVpcmVkRmllbGRzICR7cn1cXG4gIC0+IHVwZGF0aW5nUHJveHkgJHtpfVxcbiAgLT4gdXBkYXRpbmdQaXBlbGluZSAke3N9XFxuICAtPiB1cGRhdGluZ0RhdGE6ICR7dGhpcy5kYXRhVXBkYXRpbmd9XFxuICAtPiB1cGRhdGluZ1RpbGVSZW5kZXJlciAke2F9XFxuYCksbn1fY3JlYXRlQ2xpZW50T3B0aW9ucygpe3JldHVybntzZXRVcGRhdGluZzplPT57dGhpcy5fc2V0KFwiX3BpcGVsaW5lSXNVcGRhdGluZ1wiLGUpfSxzZXREYXRhVXBkYXRpbmc6ZT0+e3RoaXMuX3NldChcImRhdGFVcGRhdGluZ1wiLGUpfSxlbWl0RXZlbnQ6ZT0+e3RoaXMuZW1pdChlLm5hbWUsZS5ldmVudCl9fX1hc3luYyBfZGV0ZWN0UXVlcnlNb2RlKGUpe2NvbnN0IHQ9XCJwYXRoXCJpbiBlLHtsYXllcjpyfT10aGlzLGk9XCJlZGl0aW5nSW5mb1wiaW4gciYmci5lZGl0aW5nSW5mbz8ubGFzdEVkaXREYXRlLHM9XCJyZWZyZXNoSW50ZXJ2YWxcImluIHImJiEhci5yZWZyZXNoSW50ZXJ2YWwsYT0haSYmcyxuPXcocik7aWYodCYmKFwiZmVhdHVyZVwiPT09ci50eXBlfHxcInN1YnR5cGUtZ3JvdXBcIj09PXIudHlwZSkmJlwicG9pbnRcIj09PXIuZ2VvbWV0cnlUeXBlJiZuPy5xdWVyeS5zdXBwb3J0c1BhZ2luYXRpb24mJiFuPy5vcGVyYXRpb25zLnN1cHBvcnRzRWRpdGluZyYmIWEmJmhhcyhcImZlYXR1cmVsYXllci1zbmFwc2hvdC1lbmFibGVkXCIpKXRyeXtjb25zdCBlPWF3YWl0IHIucXVlcnlGZWF0dXJlQ291bnQoKTtpZihlPD1oYXMoXCJmZWF0dXJlbGF5ZXItc25hcHNob3QtcG9pbnQtbWluLXRocmVzaG9sZFwiKSlyZXR1cm57bW9kZTpcInNuYXBzaG90XCIsZmVhdHVyZUNvdW50OmV9O2NvbnN0IHQ9aGFzKFwiZmVhdHVyZWxheWVyLXNuYXBzaG90LXBvaW50LW1heC10aHJlc2hvbGRcIiksaT1oYXMoXCJmZWF0dXJlbGF5ZXItc25hcHNob3QtcG9pbnQtY292ZXJhZ2VcIikscz10aGlzLnZpZXcuZXh0ZW50LGE9ci5mdWxsRXh0ZW50LG49YT8uY2xvbmUoKS5pbnRlcnNlY3Rpb24ocyksbz1udWxsIT1uP24ud2lkdGgqbi5oZWlnaHQ6MCxsPWE/LndpZHRoKmE/LmhlaWdodDtpZihlPD10JiYoMD09PWw/MDpvL2wpPj1pKXJldHVybnttb2RlOlwic25hcHNob3RcIixmZWF0dXJlQ291bnQ6ZX19Y2F0Y2gobyl7bC5nZXRMb2dnZXIodGhpcykud2FybihcIm1hcHZpZXctZmVhdHVyZS1sYXllclwiLFwiRW5jb3VudGVyZWQgYW4gZXJyb3Igd2hlbiBxdWVyeWluZyBmb3IgZmVhdHVyZUNvdW50XCIse2Vycm9yOm99KX1yZXR1cm57bW9kZTpcIm9uLWRlbWFuZFwifX1hc3luYyBfY3JlYXRlU2VydmljZU9wdGlvbnMoKXtjb25zdCBlPXRoaXMubGF5ZXI7aWYoXCJzdHJlYW1cIj09PWUudHlwZSlyZXR1cm4gbnVsbDtjb25zdCB0PXcoZSkse2NhcGFiaWxpdGllczpyLG9iamVjdElkRmllbGQ6aX09ZSxzPWUuZmllbGRzSW5kZXgudG9KU09OKCksYT1zLmZpZWxkcyxuPW51bGwhPWUuZnVsbEV4dGVudD9lLmZ1bGxFeHRlbnQudG9KU09OKCk6bnVsbCxsPUsoZSksdT1cInRpbWVJbmZvXCJpbiBlJiZlLnRpbWVJbmZvPy50b0pTT04oKXx8bnVsbCxkPWUuc3BhdGlhbFJlZmVyZW5jZT9lLnNwYXRpYWxSZWZlcmVuY2UudG9KU09OKCk6bnVsbCxoPVwiZmVhdHVyZVwiPT09ZS50eXBlP2UuZ2xvYmFsSWRGaWVsZDpudWxsO2xldCBwO1wib2djLWZlYXR1cmVcIj09PWUudHlwZT9wPWUuc291cmNlLmdldFNvdXJjZSgpOkQoZS5zb3VyY2UpP3A9YXdhaXQgZS5zb3VyY2Uub3BlblBvcnRzKCk6ZS5wYXJzZWRVcmwmJihwPW8oZS5wYXJzZWRVcmwpLFwiZHluYW1pY0RhdGFTb3VyY2VcImluIGUmJmUuZHluYW1pY0RhdGFTb3VyY2UmJihwLnF1ZXJ5PXtsYXllcjpKU09OLnN0cmluZ2lmeSh7c291cmNlOmUuZHluYW1pY0RhdGFTb3VyY2V9KX0pKTtjb25zdCBjPVwiZGF0ZXNJblVua25vd25UaW1lem9uZVwiaW4gdGhpcy5sYXllciYmdGhpcy5sYXllci5kYXRlc0luVW5rbm93blRpbWV6b25lLHk9KFwic3VidHlwZUZpZWxkXCJpbiB0aGlzLmxheWVyP3RoaXMubGF5ZXIuc3VidHlwZUZpZWxkOm51bGwpPz9udWxsLHttb2RlOmcsZmVhdHVyZUNvdW50OmZ9PWF3YWl0IHRoaXMuX2RldGVjdFF1ZXJ5TW9kZShwKTtsZXQgbT10aGlzLmxheWVyLm9iamVjdElkRmllbGQ7aWYoXCJmZWF0dXJlXCI9PT10aGlzLmxheWVyLnR5cGUmJm51bGwhPXRoaXMubGF5ZXIub3JkZXJCeSYmdGhpcy5sYXllci5vcmRlckJ5Lmxlbmd0aCl7Y29uc3QgZT0hdGhpcy5sYXllci5vcmRlckJ5WzBdLnZhbHVlRXhwcmVzc2lvbiYmdGhpcy5sYXllci5vcmRlckJ5WzBdLmZpZWxkO2UmJihtPWUpfXJldHVybnt0eXBlOmcsdHlwZUlkRmllbGQ6XCJ0eXBlSWRGaWVsZFwiaW4gZSYmZS50eXBlSWRGaWVsZHx8dm9pZCAwLHR5cGVzOlwidHlwZXNcImluIGUmJmUudHlwZXM/Lm1hcCgoZT0+ZS50b0pTT04oKSkpfHx2b2lkIDAsdGltZVJlZmVyZW5jZVVua25vd25DbGllbnQ6YyxzdWJ0eXBlRmllbGQ6eSxmZWF0dXJlQ291bnQ6ZixnbG9iYWxJZEZpZWxkOmgsbWF4UmVjb3JkQ291bnQ6ci5xdWVyeS5tYXhSZWNvcmRDb3VudCx0aWxlTWF4UmVjb3JkQ291bnQ6ci5xdWVyeS50aWxlTWF4UmVjb3JkQ291bnQsY2FwYWJpbGl0aWVzOnIsZWZmZWN0aXZlQ2FwYWJpbGl0aWVzOnQsZmllbGRzOmEsZmllbGRzSW5kZXg6cyxmdWxsRXh0ZW50Om4sZ2VvbWV0cnlUeXBlOmwsb2JqZWN0SWRGaWVsZDppLHNvdXJjZTpwLHRpbWVJbmZvOnUsc3BhdGlhbFJlZmVyZW5jZTpkLG9yZGVyQnlGaWVsZHM6bX19YXN5bmMgX2NyZWF0ZU1lbW9yeVNlcnZpY2VPcHRpb25zKGUpe2NvbnN0IHQ9YXdhaXQgZS5vcGVuUG9ydHMoKTtyZXR1cm57Li4udGhpcy5fY3JlYXRlU2VydmljZU9wdGlvbnMoKSx0eXBlOlwibWVtb3J5XCIsc291cmNlOnR9fV9jbGVhblVwUXVlcnkoZSl7Y29uc3QgdD1TLmZyb20oZSl8fHRoaXMuY3JlYXRlUXVlcnkoKTtyZXR1cm4gdC5vdXRTcGF0aWFsUmVmZXJlbmNlfHwodC5vdXRTcGF0aWFsUmVmZXJlbmNlPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlKSx0fV9jbGVhblVwQWdncmVnYXRlUXVlcnkoZSl7Y29uc3QgdD1TLmZyb20oZSl8fHRoaXMuY3JlYXRlQWdncmVnYXRlUXVlcnkoKTtyZXR1cm4gdC5vdXRTcGF0aWFsUmVmZXJlbmNlfHwodC5vdXRTcGF0aWFsUmVmZXJlbmNlPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlKSx0fWFzeW5jIF91cGRhdGUoKXtyZXR1cm4gdGhpcy5fY29tbWFuZHNRdWV1ZS5wdXNoKHt0eXBlOlwidXBkYXRlXCJ9KX1hc3luYyBfZWRpdChlKXtpZih0aGlzLnN1c3BlbmRlZClyZXR1cm4gdm9pZCB0aGlzLl9jbGVhclRpbGVzKCk7cmV0dXJuIHRoaXMuX3ZhbGlkYXRlRWRpdChlKT90aGlzLl9jb21tYW5kc1F1ZXVlLnB1c2goe3R5cGU6XCJlZGl0XCIsZWRpdHM6ZX0pOnZvaWQgMH1hc3luYyBkb1JlZnJlc2goZSl7aWYodGhpcy5hdHRhY2hlZCYmdGhpcy5fdGlsZVN0cmF0ZWd5LnRpbGVLZXlzKCkubGVuZ3RoKXJldHVybiB0aGlzLnN1c3BlbmRlZCYmZT92b2lkIHRoaXMuX2NsZWFyVGlsZXMoKTp0aGlzLl9jb21tYW5kc1F1ZXVlLnB1c2goe3R5cGU6XCJyZWZyZXNoXCIsZGF0YUNoYW5nZWQ6ZX0pfV9jbGVhclRpbGVzKCl7dGhpcy5fdGlsZVN0cmF0ZWd5LnRpbGVLZXlzKCkubGVuZ3RoJiYodGhpcy5fcHJveHkudXBkYXRlVGlsZXMoe2FkZGVkOltdLHJlbW92ZWQ6dGhpcy5fdGlsZVN0cmF0ZWd5LnRpbGVLZXlzKCl9KSx0aGlzLl90aWxlU3RyYXRlZ3kuY2xlYXIoKSx0aGlzLnJlcXVlc3RVcGRhdGUoKSx0aGlzLl9jb21tYW5kc1F1ZXVlLmNsZWFyKCksdGhpcy5fdXBkYXRlKCkpfV92YWxpZGF0ZUVkaXQoZSl7Y29uc3QgdD1cImdsb2JhbElkRmllbGRcImluIHRoaXMubGF5ZXImJnRoaXMubGF5ZXIuZ2xvYmFsSWRGaWVsZCxyPWUuZGVsZXRlZEZlYXR1cmVzLnNvbWUoKGU9Pi0xPT09ZS5vYmplY3RJZHx8IWUub2JqZWN0SWQpKSxpPXQmJnRoaXMuYXZhaWxhYmxlRmllbGRzLmluY2x1ZGVzKHQpO3JldHVybiByJiYhaT8obC5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IGEoXCJtYXB2aWV3LWFwcGx5LWVkaXRzXCIsYEVkaXRpbmcgdGhlIHNwZWNpZmllZCBzZXJ2aWNlIHJlcXVpcmVzIHRoZSBsYXllcidzIGdsb2JhbElkRmllbGQsICR7dH0gdG8gYmUgaW5jbHVkZWQgdGhlIGxheWVyJ3Mgb3V0RmllbGRzIGZvciB1cGRhdGVzIHRvIGJlIHJlZmxlY3RlZCBvbiB0aGUgbWFwYCkpLG51bGwpOmV9YXN5bmMgX2RvVXBkYXRlKCl7dHJ5e2lmKHRoaXMuZGVzdHJveWVkfHwhdGhpcy5faGFzUmVxdWlyZWRTdXBwb3J0KHRoaXMubGF5ZXIpfHwhdGhpcy5fdGlsZVN0cmF0ZWd5KXJldHVybjtjb25zdHtmZWF0dXJlRWZmZWN0Vmlldzp0LGZpbHRlcjpyfT10aGlzO2lmKGF3YWl0IHRoaXMuX3VwZGF0ZVJlcXVpcmVkRmllbGRzKCksdGhpcy5kZXN0cm95ZWQpcmV0dXJuO2NvbnN0e3JlbmRlcmVyOml9PXRoaXMuX2dldEVmZmVjdGl2ZVJlbmRlcmVyKCk7dGhpcy5fc2V0KFwiX2VmZmVjdGl2ZVJlbmRlcmVyXCIsaSk7Y29uc3Qgcz10aGlzLl9jcmVhdGVTY2hlbWFDb25maWcoKSxhPXRoaXMuX2NyZWF0ZUNvbmZpZ3VyYXRpb24ocyxyLHQuZmlsdGVyKSxuPXRoaXMuX2xhc3REZWZpbml0aW9uRXhwcmVzc2lvbiE9PWEuc2NoZW1hLnNvdXJjZS5kZWZpbml0aW9uRXhwcmVzc2lvbjt0aGlzLl9sYXN0RGVmaW5pdGlvbkV4cHJlc3Npb249YS5zY2hlbWEuc291cmNlLmRlZmluaXRpb25FeHByZXNzaW9uO2NvbnN0IG89YS5zY2hlbWEudGlsZVJlbmRlcmVyLHU9dGhpcy5fY3JlYXRlVGlsZVJlbmRlcmVySGFzaChvKTtpZihcInNuYXBzaG90XCI9PT10aGlzLl9zZXJ2aWNlT3B0aW9ucy50eXBlJiYoYS5zY2hlbWEuc291cmNlLmluaXRpYWxGZWF0dXJlQ291bnQ9dGhpcy5fc2VydmljZU9wdGlvbnMuZmVhdHVyZUNvdW50KSx1IT09dGhpcy5fdGlsZVJlbmRlcmVySGFzaCl7dGhpcy5faW5pdFRpbGVSZW5kZXJlcihvLGkpO2NvbnN0IGU9dGhpcy5sYXllcix0PVwic3RyZWFtXCI9PT1lLnR5cGU/YXdhaXQgdGhpcy5faW5pdFNlcnZpY2VPcHRpb25zKCk6dGhpcy5fc2VydmljZU9wdGlvbnM7dGhpcy50aWxlUmVuZGVyZXIub25Db25maWdVcGRhdGUoaSksXCJzdHJlYW1cIiE9PWUudHlwZSYmRChlLnNvdXJjZSkmJih0LnNvdXJjZT1hd2FpdCBlLnNvdXJjZS5vcGVuUG9ydHMoKSk7Y29uc3Qgcj17YWRkZWQ6dGhpcy5fdGlsZVN0cmF0ZWd5LnRpbGVLZXlzKCkscmVtb3ZlZDpbXX07aGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJGZWF0dXJlTGF5ZXJWaWV3MkQ6IFByb3h5IHN0YXJ0dXBcIiksYXdhaXQgdGhpcy5fcHJveHkuc3RhcnR1cCh0aGlzLnZpZXcuZmVhdHVyZXNUaWxpbmdTY2hlbWUsYSx0LHIpLGhhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKFwiRmVhdHVyZUxheWVyVmlldzJEOiBGaW5pc2hlZCBwcm94eSBzdGFydHVwXCIpLHRoaXMuaGFzSGlnaGxpZ2h0KCkmJihoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkZlYXR1cmVMYXllclZpZXcyRDogVXBkYXRpbmcgaGlnaGxpZ2h0XCIpLGF3YWl0IHRoaXMuX3Byb3h5LnNldEhpZ2hsaWdodChBcnJheS5mcm9tKHRoaXMuX2hpZ2hsaWdodElkcy5rZXlzKCkpKSxoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkZlYXR1cmVMYXllclZpZXcyRDogRmluaXNoZWQgaGlnaGxpZ2h0IHVwZGF0ZVwiKSksaGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJGZWF0dXJlTGF5ZXJWaWV3MkQ6IG9uQ29uZmlnVXBkYXRlIHN0YXJ0XCIpLHRoaXMudGlsZVJlbmRlcmVyLm9uQ29uZmlnVXBkYXRlKGkpLGhhcyhcImVzcmktMmQtdXBkYXRlLWRlYnVnXCIpJiZjb25zb2xlLmRlYnVnKFwiRmVhdHVyZUxheWVyVmlldzJEOiBvbkNvbmZpZ1VwZGF0ZSBlbmRcIil9ZWxzZXtcInNuYXBzaG90XCI9PT10aGlzLl9zZXJ2aWNlT3B0aW9ucy50eXBlJiZuJiYoYS5zY2hlbWEuc291cmNlLmNoYW5nZWRGZWF0dXJlQ291bnQ9YXdhaXQgdGhpcy5sYXllci5xdWVyeUZlYXR1cmVDb3VudCgpKSxoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkZlYXR1cmVMYXllclZpZXcyRDogVXBkYXRpbmcgcHJveHlcIik7Y29uc3QgdD1hd2FpdCB0aGlzLl9wcm94eS51cGRhdGUoYSk7aGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJGZWF0dXJlTGF5ZXJWaWV3MkQ6IEZpbmlzaGVkIHByb3h5IHVwZGF0ZVwiKSwodC5tZXNofHx0LnRhcmdldHM/LmFnZ3JlZ2F0ZSkmJihoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkZlYXR1cmVMYXllclZpZXcyRDogTG9ja2luZyBHUFUgVXBsb2Fkc1wiKSx0aGlzLl9sb2NrR1BVVXBsb2FkcygpKTt0cnl7aGFzKFwiZXNyaS0yZC11cGRhdGUtZGVidWdcIikmJmNvbnNvbGUuZGVidWcoXCJGZWF0dXJlTGF5ZXJWaWV3MkQ6IEFwcGx5aW5nIHVwZGF0ZSB0byBwcm94eVwiKSxhd2FpdCB0aGlzLl9wcm94eS5hcHBseVVwZGF0ZSh0KSxoYXMoXCJlc3JpLTJkLXVwZGF0ZS1kZWJ1Z1wiKSYmY29uc29sZS5kZWJ1ZyhcIkZlYXR1cmVMYXllclZpZXcyRDogRmluaXNoZWQgYXBwbHlpbmcgdXBkYXRlIHRvIHByb3h5XCIpfWNhdGNoKGUpe3AoZSl8fGwuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKGUpfSh0Lm1lc2h8fHQudGFyZ2V0cz8uYWdncmVnYXRlKSYmdGhpcy5fdW5sb2NrR1BVVXBsb2FkcygpLHRoaXMudGlsZVJlbmRlcmVyLm9uQ29uZmlnVXBkYXRlKGkpLHRoaXMuX3VwZGF0ZUNsdXN0ZXJTaXplVmFyaWFibGUoKSx0aGlzLl9mb3JjZUF0dHJpYnV0ZVRleHR1cmVVcGxvYWQoKX10aGlzLl90aWxlUmVuZGVyZXJIYXNoPXUsdGhpcy50aWxlUmVuZGVyZXIuaW52YWxpZGF0ZUxhYmVscygpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfWNhdGNoKGUpe319YXN5bmMgX2RvRWRpdChlKXt0cnl7YXdhaXQgdGhpcy5fcHJveHkub25FZGl0cyhlKX1jYXRjaCh0KXtwKHQpLDB9fWFzeW5jIF9kb1JlZnJlc2goZSl7dGhpcy5fbG9ja0dQVVVwbG9hZHMoKTt0cnl7bGV0IHQ7ZSYmXCJzbmFwc2hvdFwiPT09dGhpcy5xdWVyeU1vZGUmJlwicXVlcnlGZWF0dXJlQ291bnRcImluIHRoaXMubGF5ZXImJih0PWF3YWl0IHRoaXMubGF5ZXIucXVlcnlGZWF0dXJlQ291bnQoKSksYXdhaXQgdGhpcy5fcHJveHkucmVmcmVzaCh7ZGF0YUNoYW5nZWQ6ZSxmZWF0dXJlQ291bnQ6dH0pfWNhdGNoKHQpe3AodCksMH10aGlzLl91bmxvY2tHUFVVcGxvYWRzKCksdGhpcy5fZWZmZWN0aXZlRmVhdHVyZVJlZHVjdGlvbiYmdGhpcy5fdXBkYXRlQ2x1c3RlclNpemVWYXJpYWJsZSgpfV91cGRhdGVDbHVzdGVyU2l6ZVZhcmlhYmxlKCl7dGhpcy5fbmVlZHNDbHVzdGVyU2l6ZVVwZGF0ZSYmKHRoaXMudGlsZVJlbmRlcmVyLm9uQ29uZmlnVXBkYXRlKHRoaXMuX2VmZmVjdGl2ZVJlbmRlcmVyKSx0aGlzLl9uZWVkc0NsdXN0ZXJTaXplVXBkYXRlPSExKX1fY3JlYXRlVXBkYXRlQ2x1c3RlclNpemVUYXNrKGUsdCl7cmV0dXJuIGMoKCgpPT50aGlzLl9hZ2dyZWdhdGVWYWx1ZVJhbmdlcyksKHI9Pnt0aGlzLl91cGRhdGVDbHVzdGVyRWZmZWN0aXZlUmVuZGVyZXJTaXplVmFyaWFibGUoZSx0LHIpLHRoaXMuX25lZWRzQ2x1c3RlclNpemVVcGRhdGU9ITAsdGhpcy5fdXBsb2Fkc0xvY2tlZHx8dGhpcy5fdXBkYXRlQ2x1c3RlclNpemVWYXJpYWJsZSgpfSkpfWFzeW5jIF91cGRhdGVDbHVzdGVyRWZmZWN0aXZlUmVuZGVyZXJTaXplVmFyaWFibGUoZSx0LHIpe2lmKGUuZHluYW1pY0NsdXN0ZXJTaXplJiZcInZpc3VhbFZhcmlhYmxlc1wiaW4gZSYmZS52aXN1YWxWYXJpYWJsZXMpe2NvbnN0IGk9VihlLnZpc3VhbFZhcmlhYmxlcyk7aWYobnVsbCE9aSYmXCJjbHVzdGVyX2NvdW50XCI9PT1pLmZpZWxkKXtjb25zdCBzPWUudmlzdWFsVmFyaWFibGVzLmluZGV4T2YoaSk7ZS52aXN1YWxWYXJpYWJsZXNbc109RSh0LHIpO2NvbnN0IGE9ZS5jbG9uZSgpO2EuZHluYW1pY0NsdXN0ZXJTaXplPSEwLHRoaXMuX3NldChcIl9lZmZlY3RpdmVSZW5kZXJlclwiLGEpfX19X2dldEVmZmVjdGl2ZVJlbmRlcmVyKCl7Y29uc3QgZT10aGlzLmxheWVyLHQ9XCJyZW5kZXJlclwiaW4gZT9lLnJlbmRlcmVyOm51bGwscj10aGlzLl9lZmZlY3RpdmVGZWF0dXJlUmVkdWN0aW9uO2lmKHRoaXMuX3VwZGF0ZUNsdXN0ZXJTaXplVGFzaz1kKHRoaXMuX3VwZGF0ZUNsdXN0ZXJTaXplVGFzayksciYmXCJyZW5kZXJlclwiaW4gciYmci5yZW5kZXJlciYmIXIucmVuZGVyZXIuYXV0aG9yaW5nSW5mbz8uaXNBdXRvR2VuZXJhdGVkKXtjb25zdCBlPXIuZmllbGRzO2lmKFwiY2x1c3RlclwiPT09ci50eXBlKXtjb25zdHtyZW5kZXJlcjp0LGRpZEluamVjdDppfT1PKHIucmVuZGVyZXIscix0aGlzLl9hZ2dyZWdhdGVWYWx1ZVJhbmdlcyk7cmV0dXJuIGkmJih0aGlzLl91cGRhdGVDbHVzdGVyU2l6ZVRhc2s9dGhpcy5fY3JlYXRlVXBkYXRlQ2x1c3RlclNpemVUYXNrKHQscikpLHtyZW5kZXJlcjp0LGFnZ3JlZ2F0ZUZpZWxkczplLGZlYXR1cmVSZWR1Y3Rpb246cn19cmV0dXJue3JlbmRlcmVyOnIucmVuZGVyZXIsYWdncmVnYXRlRmllbGRzOmUsZmVhdHVyZVJlZHVjdGlvbjpyfX1pZihyJiZcImNsdXN0ZXJcIj09PXIudHlwZSYmdCYmVCh0KSl7Y29uc3QgZT1yLGk9W10scz1qKGksdCxlLHRoaXMuX2FnZ3JlZ2F0ZVZhbHVlUmFuZ2VzLCEwKTtyZXR1cm4gdGhpcy5fdXBkYXRlQ2x1c3RlclNpemVUYXNrPXRoaXMuX2NyZWF0ZVVwZGF0ZUNsdXN0ZXJTaXplVGFzayhzLGUpLHtyZW5kZXJlcjpzLGFnZ3JlZ2F0ZUZpZWxkczppLGZlYXR1cmVSZWR1Y3Rpb246cn19cmV0dXJue3JlbmRlcmVyOnQsYWdncmVnYXRlRmllbGRzOltdLGZlYXR1cmVSZWR1Y3Rpb246bnVsbH19X2FjcXVpcmVUaWxlKGUpe2NvbnN0IHQ9dGhpcy50aWxlUmVuZGVyZXIuYWNxdWlyZVRpbGUoZSk7cmV0dXJuIHQub25jZShcImF0dGFjaFwiLCgoKT0+e3RoaXMucmVxdWVzdFVwZGF0ZSgpfSkpLHR9X3JlbGVhc2VUaWxlKGUpe3RoaXMudGlsZVJlbmRlcmVyLnJlbGVhc2VUaWxlKGUpfV9pbml0VGlsZVJlbmRlcmVyKGUsdCl7Y29uc3Qgcj1JKGUse2xheWVyVmlldzp0aGlzLHRpbGVJbmZvVmlldzp0aGlzLnZpZXcuZmVhdHVyZXNUaWxpbmdTY2hlbWUsbGF5ZXI6dGhpcy5sYXllcn0pO3JldHVybiB0aGlzLnRpbGVSZW5kZXJlciYmKHRoaXMuX3RpbGVTdHJhdGVneS5jbGVhcigpLHRoaXMudGlsZVJlbmRlcmVyLnVuaW5zdGFsbCh0aGlzLmNvbnRhaW5lciksdGhpcy50aWxlUmVuZGVyZXI9dSh0aGlzLnRpbGVSZW5kZXJlcikpLHRoaXMuZGVzdHJveWVkP251bGw6KHRoaXMuX3Byb3h5LnRpbGVSZW5kZXJlcj1yLHRoaXMuX3NldChcInRpbGVSZW5kZXJlclwiLHIpLHRoaXMudGlsZVJlbmRlcmVyLmluc3RhbGwodGhpcy5jb250YWluZXIpLHRoaXMudGlsZVJlbmRlcmVyLm9uQ29uZmlnVXBkYXRlKHQpLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHRoaXMudGlsZVJlbmRlcmVyKX1fY3JlYXRlVGlsZVJlbmRlcmVySGFzaChlKXtyZXR1cm5gJHtlLnR5cGV9YH1nZXQgaGFzRmlsdGVyKCl7Y29uc3QgZT0hIShcImZsb29ySW5mb1wiaW4gdGhpcy5sYXllciYmdGhpcy5sYXllci5mbG9vckluZm8mJnRoaXMudmlldy5mbG9vcnMmJnRoaXMudmlldy5mbG9vcnMubGVuZ3RoKTtyZXR1cm4hIXRoaXMuZmlsdGVyfHxlfHwhIXRoaXMuX3Zpc2liaWxpdHlPdmVycmlkZXMuc2l6ZXx8ISF0aGlzLnRpbWVFeHRlbnR9X2luamVjdE92ZXJyaWRlcyhlKXtjb25zdCB0PW51bGwhPWU/ZS50aW1lRXh0ZW50Om51bGwscj1udWxsIT10aGlzLnRpbWVFeHRlbnQmJm51bGwhPXQ/dGhpcy50aW1lRXh0ZW50LmludGVyc2VjdGlvbih0KTp0aGlzLnRpbWVFeHRlbnR8fHQ7bGV0IGk9bnVsbDtjb25zdCBzPVwiZmxvb3JJbmZvXCJpbiB0aGlzLmxheWVyJiZ0aGlzLmxheWVyLmZsb29ySW5mbztpZihzKXtjb25zdCB0PW51bGwhPWU/ZS53aGVyZTpudWxsO2k9dGhpcy5fYWRkRmxvb3JGaWx0ZXJDbGF1c2UodCl9aWYoIXRoaXMuX3Zpc2liaWxpdHlPdmVycmlkZXMuc2l6ZSYmIXImJiFzKXJldHVybiBudWxsIT1lP2UudG9KU09OKCk6bnVsbDsoZT1udWxsIT1lJiZlLmNsb25lKCl8fG5ldyB2KS50aW1lRXh0ZW50PXIsaSYmKGUud2hlcmU9aSk7Y29uc3QgYT1lLnRvSlNPTigpO3JldHVybiBhLmhpZGRlbklkcz1BcnJheS5mcm9tKHRoaXMuX3Zpc2liaWxpdHlPdmVycmlkZXMpLGF9X2FkZEZsb29yRmlsdGVyQ2xhdXNlKGUpe2NvbnN0IHQ9dGhpcy5sYXllcjtsZXQgcj1lfHxcIlwiO2lmKFwiZmxvb3JJbmZvXCJpbiB0JiZ0LmZsb29ySW5mbyl7bGV0IGU9dGhpcy52aWV3LmZsb29ycztpZighZT8ubGVuZ3RoKXJldHVybiByO3QuZmxvb3JJbmZvLnZpZXdBbGxMZXZlbElkcz8ubGVuZ3RoJiYoZT10LmZsb29ySW5mby52aWV3QWxsTGV2ZWxJZHMpO2NvbnN0IGk9ZS5maWx0ZXIoKGU9PlwiXCIhPT1lKSkubWFwKChlPT5cIidcIitlK1wiJ1wiKSk7aS5wdXNoKFwiJydcIik7Y29uc3Qgcz10LmZsb29ySW5mby5mbG9vckZpZWxkO2xldCBhPVwiKFwiK3MrXCIgSU4gKHtpZHN9KSBPUiBcIitzK1wiIElTIE5VTEwpXCI7aWYoYT1hLnJlcGxhY2UoXCJ7aWRzfVwiLGkuam9pbihcIiwgXCIpKSxudWxsIT1yJiZyLmluY2x1ZGVzKHMpKXtsZXQgZT1uZXcgUmVnRXhwKFwiQU5EIFxcXFwoXCIrcytcIi4qTlVMTFxcXFwpXCIsXCJnXCIpO3I9ci5yZXBsYWNlKGUsXCJcIiksZT1uZXcgUmVnRXhwKFwiXFxcXChcIitzK1wiLipOVUxMXFxcXClcIixcImdcIikscj1yLnJlcGxhY2UoZSxcIlwiKSxyPXIucmVwbGFjZUFsbCgvXFxzKy9nLFwiIFwiKS50cmltKCl9cj1cIlwiIT09cj9cIihcIityK1wiKSBBTkQgXCIrYTphfXJldHVyblwiXCIhPT1yP3I6bnVsbH1fY3JlYXRlQ29uZmlndXJhdGlvbihlLHQscil7Y29uc3QgaT1cImZlYXR1cmVcIj09PXRoaXMubGF5ZXIudHlwZSYmdGhpcy5sYXllci5oaXN0b3JpY01vbWVudD90aGlzLmxheWVyLmhpc3RvcmljTW9tZW50LmdldFRpbWUoKTp2b2lkIDAscz1cImZlYXR1cmVcIj09PXRoaXMubGF5ZXIudHlwZT90aGlzLmxheWVyLmdkYlZlcnNpb24/P3ZvaWQgMDp2b2lkIDAsYT1uZXcgQXJyYXkoRiksbj10aGlzLl9pbmplY3RPdmVycmlkZXModCk7YVswXT1uLGFbMV09bnVsbCE9cj9yLnRvSlNPTigpOm51bGw7Y29uc3Qgbz1DKGUpO2lmKG51bGw9PW8pcmV0dXJuIG51bGw7Y29uc3QgbD16KFwiMmRcIik7cmV0dXJue2F2YWlsYWJsZUZpZWxkczp0aGlzLmF2YWlsYWJsZUZpZWxkcyxnZGJWZXJzaW9uOnMsaGlzdG9yaWNNb21lbnQ6aSxkZXZpY2VQaXhlbFJhdGlvOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxLGZpbHRlcnM6YSxzY2hlbWE6byxzdXBwb3J0c1RleHR1cmVGbG9hdDpsLnN1cHBvcnRzVGV4dHVyZUZsb2F0LG1heFRleHR1cmVTaXplOmwubWF4VGV4dHVyZVNpemUsdGltZVpvbmU6dGhpcy52aWV3LnRpbWVab25lfX1faGFzUmVxdWlyZWRTdXBwb3J0KGUpe3JldHVybiEoXCJyZW5kZXJlclwiaW4gZSl8fHEoZS5yZW5kZXJlcil9X2xvY2tHUFVVcGxvYWRzKCl7dGhpcy50aWxlUmVuZGVyZXImJih0aGlzLl91cGxvYWRzTG9ja2VkPSEwLHRoaXMudGlsZVJlbmRlcmVyLmxvY2tHUFVVcGxvYWRzKCkpfV91bmxvY2tHUFVVcGxvYWRzKCl7dGhpcy50aWxlUmVuZGVyZXImJih0aGlzLl91cGxvYWRzTG9ja2VkPSExLHRoaXMudGlsZVJlbmRlcmVyLnVubG9ja0dQVVVwbG9hZHMoKSl9X2ZvcmNlQXR0cmlidXRlVGV4dHVyZVVwbG9hZCgpe3RoaXMudGlsZVJlbmRlcmVyJiZ0aGlzLnRpbGVSZW5kZXJlci5mb3JjZUF0dHJpYnV0ZVRleHR1cmVVcGxvYWQoKX1fY3JlYXRlU2NoZW1hQ29uZmlnKCl7Y29uc3QgZT10aGlzLmxheWVyO3JldHVybntyZW5kZXJlcjpcInJlbmRlcmVyXCJpbiBlP2UucmVuZGVyZXI6bnVsbCxzcGF0aWFsUmVmZXJlbmNlOmUuc3BhdGlhbFJlZmVyZW5jZSx0aW1lRXh0ZW50OlwidGltZUV4dGVudFwiaW4gZT9lLnRpbWVFeHRlbnQ6bnVsbCxkZWZpbml0aW9uRXhwcmVzc2lvbjplLmRlZmluaXRpb25FeHByZXNzaW9uLGZlYXR1cmVSZWR1Y3Rpb246dGhpcy5fZWZmZWN0aXZlRmVhdHVyZVJlZHVjdGlvbixmaWVsZHM6ZS5maWVsZHMsZ2VvbWV0cnlUeXBlOmUuZ2VvbWV0cnlUeXBlLGhpc3RvcmljTW9tZW50OlwiaGlzdG9yaWNNb21lbnRcImluIGU/ZS5oaXN0b3JpY01vbWVudDpudWxsLGxhYmVsc1Zpc2libGU6XCJsYWJlbHNWaXNpYmxlXCJpbiBlJiZlLmxhYmVsc1Zpc2libGUsbGFiZWxpbmdJbmZvOlwibGFiZWxpbmdJbmZvXCJpbiBlP2UubGFiZWxpbmdJbmZvOm51bGwsYXZhaWxhYmxlRmllbGRzOnRoaXMuYXZhaWxhYmxlRmllbGRzLGZlYXR1cmVFZmZlY3Q6dGhpcy5mZWF0dXJlRWZmZWN0LGZpbHRlcjp0aGlzLmZpbHRlcixnZGJWZXJzaW9uOlwiZ2RiVmVyc2lvblwiaW4gZT9lLmdkYlZlcnNpb246bnVsbCxwaXhlbEJ1ZmZlcjowLG9yZGVyQnk6XCJvcmRlckJ5XCJpbiBlJiZlLm9yZGVyQnk/ZS5vcmRlckJ5Om51bGwsY3VzdG9tUGFyYW1ldGVyczp7Li4uXCJjdXN0b21QYXJhbWV0ZXJzXCJpbiBlP2UuY3VzdG9tUGFyYW1ldGVyczp2b2lkIDAsdG9rZW46XCJhcGlLZXlcImluIGU/ZS5hcGlLZXk/P3ZvaWQgMDp2b2lkIDB9LHN1YnR5cGVDb2RlOlwic3VidHlwZUNvZGVcImluIGU/ZS5zdWJ0eXBlQ29kZTp2b2lkIDAsc3VidHlwZUZpZWxkOlwic3VidHlwZUZpZWxkXCJpbiBlP2Uuc3VidHlwZUZpZWxkOnZvaWQgMH19X2FkZEhpZ2hsaWdodChlKXtmb3IoY29uc3QgdCBvZiBlKWlmKHRoaXMuX2hpZ2hsaWdodElkcy5oYXModCkpe2NvbnN0IGU9dGhpcy5faGlnaGxpZ2h0SWRzLmdldCh0KTt0aGlzLl9oaWdobGlnaHRJZHMuc2V0KHQsZSsxKX1lbHNlIHRoaXMuX2hpZ2hsaWdodElkcy5zZXQodCwxKTt0aGlzLl91cGRhdGVIaWdobGlnaHQoKS5jYXRjaCgoZT0+e3AoZSl8fGwuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKGUpfSkpfV9yZW1vdmVIaWdobGlnaHQoZSl7Zm9yKGNvbnN0IHQgb2YgZSlpZih0aGlzLl9oaWdobGlnaHRJZHMuaGFzKHQpKXtjb25zdCBlPXRoaXMuX2hpZ2hsaWdodElkcy5nZXQodCktMTswPT09ZT90aGlzLl9oaWdobGlnaHRJZHMuZGVsZXRlKHQpOnRoaXMuX2hpZ2hsaWdodElkcy5zZXQodCxlKX10aGlzLl91cGRhdGVIaWdobGlnaHQoKS5jYXRjaCgoZT0+e3AoZSl8fGwuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKGUpfSkpfV9zZXRMYXllcnNGb3JGZWF0dXJlKGUpe2NvbnN0IHQ9dGhpcy5sYXllcjtlLmxheWVyPXQsZS5zb3VyY2VMYXllcj10fV9jcmVhdGVHcmFwaGljSGl0KGUsdCl7cmV0dXJuIHRoaXMuX3NldExheWVyc0ZvckZlYXR1cmUodCksbnVsbCE9dC5nZW9tZXRyeSYmKHQuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSkse3R5cGU6XCJncmFwaGljXCIsZ3JhcGhpYzp0LGxheWVyOnRoaXMubGF5ZXIsbWFwUG9pbnQ6ZX19fTtlKFttKCldLFoucHJvdG90eXBlLFwiX3NlcnZpY2VPcHRpb25zXCIsdm9pZCAwKSxlKFttKCldLFoucHJvdG90eXBlLFwiX3Byb3h5XCIsdm9pZCAwKSxlKFttKCldLFoucHJvdG90eXBlLFwiX3BpcGVsaW5lSXNVcGRhdGluZ1wiLHZvaWQgMCksZShbbSgpXSxaLnByb3RvdHlwZSxcIl9lZmZlY3RpdmVSZW5kZXJlclwiLHZvaWQgMCksZShbbSgpXSxaLnByb3RvdHlwZSxcIl9lZmZlY3RpdmVGZWF0dXJlUmVkdWN0aW9uXCIsbnVsbCksZShbbSgpXSxaLnByb3RvdHlwZSxcIl9hZ2dyZWdhdGVWYWx1ZVJhbmdlc1wiLHZvaWQgMCksZShbbSgpXSxaLnByb3RvdHlwZSxcIl9jb21tYW5kc1F1ZXVlXCIsdm9pZCAwKSxlKFttKCldLFoucHJvdG90eXBlLFwiZmVhdHVyZUVmZmVjdFZpZXdcIix2b2lkIDApLGUoW20oKV0sWi5wcm90b3R5cGUsXCJsYWJlbHNWaXNpYmxlXCIsbnVsbCksZShbbSgpXSxaLnByb3RvdHlwZSxcImxhYmVsaW5nQ29sbGlzaW9uSW5mb3NcIixudWxsKSxlKFttKHtyZWFkT25seTohMH0pXSxaLnByb3RvdHlwZSxcInF1ZXJ5TW9kZVwiLG51bGwpLGUoW20oKV0sWi5wcm90b3R5cGUsXCJyZW5kZXJpbmdDb25maWdIYXNoXCIsbnVsbCksZShbbSgpXSxaLnByb3RvdHlwZSxcInRpbGVSZW5kZXJlclwiLHZvaWQgMCksZShbbSgpXSxaLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSxaPWUoW18oJCldLFopO2NvbnN0IFc9WjtleHBvcnR7VyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7SGVhdG1hcFRpbGVSZW5kZXJlciBhcyBlfWZyb21cIi4vdGlsZVJlbmRlcmVycy9IZWF0bWFwVGlsZVJlbmRlcmVyLmpzXCI7aW1wb3J0e1N5bWJvbFRpbGVSZW5kZXJlciBhcyByfWZyb21cIi4vdGlsZVJlbmRlcmVycy9TeW1ib2xUaWxlUmVuZGVyZXIuanNcIjtmdW5jdGlvbiB0KHQsbil7aWYoIXQpcmV0dXJuIG51bGw7c3dpdGNoKHQudHlwZSl7Y2FzZVwic3ltYm9sXCI6cmV0dXJuIG5ldyByKG4pO2Nhc2VcImhlYXRtYXBcIjpyZXR1cm4gbmV3IGUobil9fWV4cG9ydHt0IGFzIGNyZWF0ZU9yUmV1c2VUaWxlUmVuZGVyZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2xldCByPWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnRpbGVzPW5ldyBNYXB9ZGVzdHJveSgpe3RoaXMudGlsZXMuY2xlYXIoKSx0aGlzLmxheWVyPXRoaXMubGF5ZXJWaWV3PXRoaXMudGlsZUluZm9WaWV3PXRoaXMudGlsZXM9bnVsbH1nZXQgdXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5pc1VwZGF0aW5nKCl9YWNxdWlyZVRpbGUoZSl7Y29uc3QgdD10aGlzLmNyZWF0ZVRpbGUoZSk7cmV0dXJuIHQub25jZShcImlzUmVhZHlcIiwoKCk9PnRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIikpKSx0aGlzLnRpbGVzLnNldChlLmlkLHQpLHRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIiksdH1mb3JjZUF0dHJpYnV0ZVRleHR1cmVVcGxvYWQoKXt9Zm9yRWFjaFRpbGUoZSl7dGhpcy50aWxlcy5mb3JFYWNoKGUpfXJlbGVhc2VUaWxlKGUpe3RoaXMudGlsZXMuZGVsZXRlKGUua2V5LmlkKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpLHRoaXMuZGlzcG9zZVRpbGUoZSl9aXNVcGRhdGluZygpe2xldCBlPSEwO3RoaXMudGlsZXMuZm9yRWFjaCgodD0+e2U9ZSYmdC5pc1JlYWR5fSkpO2NvbnN0IHQ9IWU7aWYoaGFzKFwiZXNyaS0yZC1sb2ctdXBkYXRpbmdcIikpe2xldCBzPVwiXCI7dGhpcy50aWxlcy5mb3JFYWNoKCh0PT57Y29uc3QgaT10LnVwZGF0ZVN0YXR1cztzKz1gLT4gJHt0LmtleS5pZH06IGlzUmVhZHk6ICR7dC5pc1JlYWR5fSBzdGF0dXM6ICR7aX1cXG5gLGU9ZSYmdC5pc1JlYWR5fSkpLGNvbnNvbGUubG9nKGBVcGRhdGluZyBCYXNlVGlsZVJlbmRlcmVyICR7dH1cXG4ke3N9YCl9cmV0dXJuIHR9c2V0SGlnaGxpZ2h0KCl7fWludmFsaWRhdGVMYWJlbHMoKXt9cmVxdWVzdFVwZGF0ZSgpe3RoaXMubGF5ZXJWaWV3LnJlcXVlc3RVcGRhdGUoKX19O2UoW3MoKV0sci5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbcygpXSxyLnByb3RvdHlwZSxcImxheWVyVmlld1wiLHZvaWQgMCksZShbcygpXSxyLnByb3RvdHlwZSxcInRpbGVJbmZvVmlld1wiLHZvaWQgMCksZShbcygpXSxyLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCkscj1lKFtpKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuZmVhdHVyZXMudGlsZVJlbmRlcmVycy5CYXNlVGlsZVJlbmRlcmVyXCIpXSxyKTtjb25zdCBvPXI7ZXhwb3J0e28gYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2VuZXJhdGVHcmFkaWVudCBhcyBpfWZyb21cIi4uLy4uLy4uLy4uLy4uL3JlbmRlcmVycy9zdXBwb3J0L2hlYXRtYXBVdGlscy5qc1wiO2ltcG9ydHtCaXRtYXBUaWxlQ29udGFpbmVyIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vZW5naW5lL0JpdG1hcFRpbGVDb250YWluZXIuanNcIjtpbXBvcnQgcyBmcm9tXCIuL0Jhc2VUaWxlUmVuZGVyZXIuanNcIjtpbXBvcnR7SGVhdG1hcFNvdXJjZSBhcyBufWZyb21cIi4vc3VwcG9ydC9IZWF0bWFwU291cmNlLmpzXCI7bGV0IG89Y2xhc3MgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2ludGVuc2l0eUluZm89e21pbkRlbnNpdHk6MCxtYXhEZW5zaXR5OjB9LHRoaXMudHlwZT1cImhlYXRtYXBcIix0aGlzLmZlYXR1cmVzVmlldz17YXR0cmlidXRlVmlldzp7aW5pdGlhbGl6ZTooKT0+e30scmVxdWVzdFVwZGF0ZTooKT0+e319LHJlcXVlc3RSZW5kZXI6KCk9Pnt9fSx0aGlzLl9jb250YWluZXI9bmV3IHIoZS50aWxlSW5mb1ZpZXcpfWNyZWF0ZVRpbGUoZSl7Y29uc3QgdD10aGlzLl9jb250YWluZXIuY3JlYXRlVGlsZShlKTtyZXR1cm4gdGhpcy50aWxlSW5mb1ZpZXcuZ2V0VGlsZUNvb3Jkcyh0LmJpdG1hcCxlKSx0LmJpdG1hcC5yZXNvbHV0aW9uPXRoaXMudGlsZUluZm9WaWV3LmdldFRpbGVSZXNvbHV0aW9uKGUpLHR9b25Db25maWdVcGRhdGUoKXtjb25zdCBlPXRoaXMubGF5ZXIucmVuZGVyZXI7aWYoXCJoZWF0bWFwXCI9PT1lLnR5cGUpe2NvbnN0e21pbkRlbnNpdHk6dCxtYXhEZW5zaXR5OnIsY29sb3JTdG9wczpzfT1lO3RoaXMuX2ludGVuc2l0eUluZm8ubWluRGVuc2l0eT10LHRoaXMuX2ludGVuc2l0eUluZm8ubWF4RGVuc2l0eT1yLHRoaXMuX2dyYWRpZW50PWkocyksdGhpcy50aWxlcy5mb3JFYWNoKChlPT57Y29uc3QgaT1lLmJpdG1hcC5zb3VyY2U7aSYmKGkubWluRGVuc2l0eT10LGkubWF4RGVuc2l0eT1yLGkuZ3JhZGllbnQ9dGhpcy5fZ3JhZGllbnQsZS5iaXRtYXAuaW52YWxpZGF0ZVRleHR1cmUoKSxlLmJpdG1hcC5yZXF1ZXN0UmVuZGVyKCkpfSkpfX1oaXRUZXN0KCl7cmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSl9aW5zdGFsbChlKXtlLmFkZENoaWxkKHRoaXMuX2NvbnRhaW5lcil9dW5pbnN0YWxsKGUpe3RoaXMuX2NvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLGUucmVtb3ZlQ2hpbGQodGhpcy5fY29udGFpbmVyKX1kaXNwb3NlVGlsZShlKXt0aGlzLl9jb250YWluZXIucmVtb3ZlQ2hpbGQoZSksZS5kZXN0cm95KCl9c3VwcG9ydHNSZW5kZXJlcihlKXtyZXR1cm4gZSYmXCJoZWF0bWFwXCI9PT1lLnR5cGV9b25UaWxlRGF0YShlKXtjb25zdCB0PXRoaXMudGlsZXMuZ2V0KGUudGlsZUtleSk7aWYoIXQpcmV0dXJuO2NvbnN0IGk9ZS5pbnRlbnNpdHlJbmZvLHttaW5EZW5zaXR5OnIsbWF4RGVuc2l0eTpzfT10aGlzLl9pbnRlbnNpdHlJbmZvLG89dC5iaXRtYXAuc291cmNlfHxuZXcgbjtvLmludGVuc2l0aWVzPWk/Lm1hdHJpeHx8bnVsbCxvLm1pbkRlbnNpdHk9cixvLm1heERlbnNpdHk9cyxvLmdyYWRpZW50PXRoaXMuX2dyYWRpZW50LHQuYml0bWFwLnNvdXJjZT1vLHRoaXMuX2NvbnRhaW5lci5hZGRDaGlsZCh0KSx0aGlzLl9jb250YWluZXIucmVxdWVzdFJlbmRlcigpLHRoaXMucmVxdWVzdFVwZGF0ZSgpfW9uVGlsZUVycm9yKGUpe2NvbnNvbGUuZXJyb3IoZSl9bG9ja0dQVVVwbG9hZHMoKXt9dW5sb2NrR1BVVXBsb2Fkcygpe31mZXRjaFJlc291cmNlKGUsdCl7cmV0dXJuIGNvbnNvbGUuZXJyb3IoZSksUHJvbWlzZS5yZWplY3QoKX19O289ZShbdChcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLnRpbGVSZW5kZXJlcnMuSGVhdG1hcFRpbGVSZW5kZXJlclwiKV0sbyk7ZXhwb3J0e28gYXMgSGVhdG1hcFRpbGVSZW5kZXJlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtkZXN0cm95TWF5YmUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2lzQWJvcnRFcnJvciBhcyBpfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e0ZlYXR1cmVUaWxlIGFzIGF9ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL0ZlYXR1cmVUaWxlLmpzXCI7aW1wb3J0e3NpbXBsaWZ5VlZSZW5kZXJlciBhcyBvfWZyb21cIi4uL3N1cHBvcnQvcmVuZGVyZXJVdGlscy5qc1wiO2ltcG9ydCBsIGZyb21cIi4vQmFzZVRpbGVSZW5kZXJlci5qc1wiO2ltcG9ydHtjb252ZXJ0VmlzdWFsVmFyaWFibGVzIGFzIG59ZnJvbVwiLi9zdXBwb3J0L3Zpc3VhbFZhcmlhYmxlc1V0aWxzLmpzXCI7aW1wb3J0e1dHTEZlYXR1cmVWaWV3IGFzIHV9ZnJvbVwiLi9zdXBwb3J0L1dHTEZlYXR1cmVWaWV3LmpzXCI7bGV0IHA9Y2xhc3MgZXh0ZW5kcyBse2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJzeW1ib2xcIn1pbnN0YWxsKGUpe2NvbnN0IHQ9KCk9PnRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIiksaT1uZXcgdSh0aGlzLnRpbGVJbmZvVmlldyx0aGlzLmxheWVyVmlldyx0aGlzLmxheWVyLHQpO3RoaXMuZmVhdHVyZXNWaWV3PWksZS5hZGRDaGlsZChpKX11bmluc3RhbGwoZSl7ZS5yZW1vdmVDaGlsZCh0aGlzLmZlYXR1cmVzVmlldyksdGhpcy5mZWF0dXJlc1ZpZXc9dCh0aGlzLmZlYXR1cmVzVmlldyl9ZmV0Y2hSZXNvdXJjZShlLHQpe2NvbnN0e3VybDpyfT1lLHM9dGhpcy5mZWF0dXJlc1ZpZXcuc3RhZ2U7dHJ5e3JldHVybiBzLnJlc291cmNlTWFuYWdlci5mZXRjaFJlc291cmNlKHIse3NpZ25hbDp0LnNpZ25hbH0pfWNhdGNoKGEpe3JldHVybiBpKGEpP1Byb21pc2UucmVzb2x2ZSh7d2lkdGg6MCxoZWlnaHQ6MH0pOlByb21pc2UucmVqZWN0KGEpfX1pc1VwZGF0aW5nKCl7Y29uc3QgZT1zdXBlci5pc1VwZGF0aW5nKCksdD0hdGhpcy5mZWF0dXJlc1ZpZXd8fHRoaXMuZmVhdHVyZXNWaWV3LmlzVXBkYXRpbmcoKSxpPXRoaXMuZmVhdHVyZXNWaWV3Py5oYXNFbXB0eUF0dHJpYnV0ZVZpZXcoKSxyPWV8fHR8fGUmJmk7cmV0dXJuIGhhcyhcImVzcmktMmQtbG9nLXVwZGF0aW5nXCIpJiZjb25zb2xlLmxvZyhgVXBkYXRpbmcgU3ltYm9sVGlsZVJlbmRlcmVyICR7cn1cXG4gIC0+IHVwZGF0aW5nVGlsZXMgJHtlfVxcbiAgLT4gaGFzRmVhdHVyZXNWaWV3ICR7ISF0aGlzLmZlYXR1cmVzVmlld31cXG4gIC0+IHVwZGF0aW5nRmVhdHVyZXNWaWV3ICR7dH1gKSxyfWhpdFRlc3QoZSl7cmV0dXJuIHRoaXMuZmVhdHVyZXNWaWV3LmhpdFRlc3QoZSl9c3VwcG9ydHNSZW5kZXJlcihlKXtyZXR1cm4gbnVsbCE9ZSYmW1wic2ltcGxlXCIsXCJjbGFzcy1icmVha3NcIixcInVuaXF1ZS12YWx1ZVwiLFwiZG90LWRlbnNpdHlcIixcImRpY3Rpb25hcnlcIixcImhlYXRtYXBcIixcInBpZS1jaGFydFwiXS5pbmNsdWRlcyhlLnR5cGUpfW9uQ29uZmlnVXBkYXRlKGUpe2xldCB0PW51bGw7aWYoZSYmXCJ2aXN1YWxWYXJpYWJsZXNcImluIGUpe2NvbnN0IGk9KG8oZSkudmlzdWFsVmFyaWFibGVzfHxbXSkubWFwKChlPT57Y29uc3QgdD1lLmNsb25lKCk7cmV0dXJuXCJub3JtYWxpemF0aW9uRmllbGRcImluIGUmJih0Lm5vcm1hbGl6YXRpb25GaWVsZD1udWxsKSxlLnZhbHVlRXhwcmVzc2lvbiYmXCIkdmlldy5zY2FsZVwiIT09ZS52YWx1ZUV4cHJlc3Npb24mJih0LnZhbHVlRXhwcmVzc2lvbj1udWxsLHQuZmllbGQ9XCJub3BcIiksdH0pKTt0PW4oaSl9dGhpcy5mZWF0dXJlc1ZpZXcuc2V0UmVuZGVyZXJJbmZvKGUsdCx0aGlzLmxheWVyVmlldy5mZWF0dXJlRWZmZWN0KX1vblRpbGVEYXRhKGUpe2NvbnN0IHQ9dGhpcy50aWxlcy5nZXQoZS50aWxlS2V5KTt0JiZlLmRhdGEmJnRoaXMuZmVhdHVyZXNWaWV3Lm9uVGlsZURhdGEodCxlLmRhdGEpLHRoaXMubGF5ZXJWaWV3LnZpZXcubGFiZWxNYW5hZ2VyLnJlcXVlc3RVcGRhdGUoKX1vblRpbGVFcnJvcihlKXtjb25zdCB0PXRoaXMudGlsZXMuZ2V0KGUudGlsZUtleSk7dCYmdGhpcy5mZWF0dXJlc1ZpZXcub25UaWxlRXJyb3IodCl9Zm9yY2VBdHRyaWJ1dGVUZXh0dXJlVXBsb2FkKCl7dGhpcy5mZWF0dXJlc1ZpZXcuYXR0cmlidXRlVmlldy5mb3JjZVRleHR1cmVVcGxvYWQoKX1sb2NrR1BVVXBsb2Fkcygpe3RoaXMuZmVhdHVyZXNWaWV3LmF0dHJpYnV0ZVZpZXcubG9ja1RleHR1cmVVcGxvYWQoKSx0aGlzLnRpbGVzLmZvckVhY2goKGU9PmUubG9jaygpKSl9dW5sb2NrR1BVVXBsb2Fkcygpe3RoaXMuZmVhdHVyZXNWaWV3LmF0dHJpYnV0ZVZpZXcudW5sb2NrVGV4dHVyZVVwbG9hZCgpLHRoaXMudGlsZXMuZm9yRWFjaCgoZT0+ZS51bmxvY2soKSkpfWFzeW5jIGdldE1hdGVyaWFsSXRlbXMoZSl7cmV0dXJuIHRoaXMuZmVhdHVyZXNWaWV3LmdldE1hdGVyaWFsSXRlbXMoZSl9aW52YWxpZGF0ZUxhYmVscygpe3RoaXMuZmVhdHVyZXNWaWV3Lmhhc0xhYmVscyYmdGhpcy5sYXllclZpZXcudmlldy5sYWJlbE1hbmFnZXIucmVxdWVzdFVwZGF0ZSgpfWNyZWF0ZVRpbGUoZSl7Y29uc3QgdD10aGlzLnRpbGVJbmZvVmlldy5nZXRUaWxlQm91bmRzKHMoKSxlKSxpPSgpPT50aGlzLmxheWVyVmlldy52aWV3LmxhYmVsTWFuYWdlci5yZXF1ZXN0VXBkYXRlKCkscj10aGlzLnRpbGVJbmZvVmlldy5nZXRUaWxlUmVzb2x1dGlvbihlLmxldmVsKSxvPXRoaXMuZmVhdHVyZXNWaWV3LmF0dHJpYnV0ZVZpZXc7cmV0dXJuIG5ldyBhKGUscix0WzBdLHRbM10sbyxpKX1kaXNwb3NlVGlsZShlKXt0aGlzLmZlYXR1cmVzVmlldy5yZW1vdmVDaGlsZChlKSxlLmRlc3Ryb3koKSx0aGlzLmxheWVyVmlldy52aWV3LmxhYmVsTWFuYWdlci5yZXF1ZXN0VXBkYXRlKCl9fTtwPWUoW3IoXCJlc3JpLnZpZXdzLjJkLmxheWVycy5mZWF0dXJlcy50aWxlUmVuZGVyZXJzLlN5bWJvbFRpbGVSZW5kZXJlclwiKV0scCk7ZXhwb3J0e3AgYXMgU3ltYm9sVGlsZVJlbmRlcmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZHJhd0hlYXRtYXAgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9oZWF0bWFwVXRpbHMuanNcIjtjbGFzcyBpe2NvbnN0cnVjdG9yKCl7dGhpcy5ncmFkaWVudD1udWxsLHRoaXMuaGVpZ2h0PTUxMix0aGlzLmludGVuc2l0aWVzPW51bGwsdGhpcy53aWR0aD01MTJ9cmVuZGVyKGkpe3QoaSw1MTIsdGhpcy5pbnRlbnNpdGllcyx0aGlzLmdyYWRpZW50LHRoaXMubWluRGVuc2l0eSx0aGlzLm1heERlbnNpdHkpfX1leHBvcnR7aSBhcyBIZWF0bWFwU291cmNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7YnJ1c2hlcyBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2VuZ2luZS9icnVzaGVzLmpzXCI7aW1wb3J0e0ZlYXR1cmVDb250YWluZXIgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9lbmdpbmUvRmVhdHVyZUNvbnRhaW5lci5qc1wiO2ltcG9ydHtXR0xEcmF3UGhhc2UgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9lbmdpbmUvd2ViZ2wvZW51bXMuanNcIjtjb25zdCByPWhhcyhcImZlYXR1cmVsYXllci1vcmRlci1ieS1zZXJ2ZXItZW5hYmxlZFwiKTtjbGFzcyBhIGV4dGVuZHMgc3tjb25zdHJ1Y3RvcihlLHQscyxpKXtzdXBlcihlKSx0aGlzLl9oaXRUZXN0c1JlcXVlc3RzPVtdLHRoaXMuX2xheWVyPXMsdGhpcy5fbGF5ZXJWaWV3PXQsdGhpcy5fb25VcGRhdGU9aX1yZW5kZXJDaGlsZHJlbihlKXtpZih0aGlzLmF0dHJpYnV0ZVZpZXcudXBkYXRlKCksdGhpcy5oYXNBbmltYXRpb24pe2UucGFpbnRlci5lZmZlY3RzLmludGVncmF0ZS5kcmF3KGUsZS5hdHRyaWJ1dGVWaWV3KX1zdXBlci5yZW5kZXJDaGlsZHJlbihlKX1oYXNFbXB0eUF0dHJpYnV0ZVZpZXcoKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVWaWV3LmlzRW1wdHkoKX1pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuYXR0cmlidXRlVmlldy5pc1VwZGF0aW5nKCl9aGl0VGVzdCh0KXtsZXQgcz10aGlzLl9oaXRUZXN0c1JlcXVlc3RzLmZpbmQoKCh7eDplLHk6c30pPT5lPT09dC54JiZzPT09dC55KSk7Y29uc3QgaT1lKCk7cmV0dXJuIHM/cy5yZXNvbHZlcnMucHVzaChpKToocz17eDp0LngseTp0LnkscmVzb2x2ZXJzOltpXX0sdGhpcy5faGl0VGVzdHNSZXF1ZXN0cy5wdXNoKHMpKSx0aGlzLnJlcXVlc3RSZW5kZXIoKSxpLnByb21pc2V9b25UaWxlRGF0YShlLHQpe2NvbnN0IHM9ciYmXCJvcmRlckJ5XCJpbiB0aGlzLl9sYXllciYmdGhpcy5fbGF5ZXIub3JkZXJCeSxpPXMmJnM/Lmxlbmd0aCYmIXNbMF0udmFsdWVFeHByZXNzaW9uJiZzWzBdLmZpZWxkLGE9ISFzJiZ0aGlzLl9sYXllclZpZXcub3JkZXJCeUZpZWxkcz09PWk7ZS5wYXRjaCh0LGEpLHRoaXMuY29udGFpbnMoZSl8fHRoaXMuYWRkQ2hpbGQoZSksdGhpcy5yZXF1ZXN0UmVuZGVyKCl9b25UaWxlRXJyb3IoZSl7dGhpcy5jb250YWlucyhlKXx8dGhpcy5hZGRDaGlsZChlKX11cGRhdGVUcmFuc2l0aW9uUHJvcGVydGllcyhlLHQpe3N1cGVyLnVwZGF0ZVRyYW5zaXRpb25Qcm9wZXJ0aWVzKGUsdCksdGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3LnRyYW5zaXRpb25TdGVwKGUsdCksdGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3LnRyYW5zaXRpb25pbmcmJnRoaXMucmVxdWVzdFJlbmRlcigpfWRvUmVuZGVyKGUpe2NvbnN0e21pblNjYWxlOnQsbWF4U2NhbGU6c309dGhpcy5fbGF5ZXIuZWZmZWN0aXZlU2NhbGVSYW5nZSxpPWUuc3RhdGUuc2NhbGU7aTw9KHR8fDEvMCkmJmk+PXMmJnN1cGVyLmRvUmVuZGVyKGUpfWFmdGVyUmVuZGVyKGUpe3N1cGVyLmFmdGVyUmVuZGVyKGUpLHRoaXMuX2hpdFRlc3RzUmVxdWVzdHMubGVuZ3RoJiZ0aGlzLnJlcXVlc3RSZW5kZXIoKX1vbkF0dHJpYnV0ZVN0b3JlVXBkYXRlKCl7dGhpcy5oYXNMYWJlbHMmJnRoaXMuX2xheWVyVmlldy52aWV3LmxhYmVsTWFuYWdlci5yZXF1ZXN0VXBkYXRlKCksdGhpcy5fb25VcGRhdGUoKX1nZXQgaGFzQW5pbWF0aW9uKCl7cmV0dXJuIHRoaXMuaGFzTGFiZWxzfXNldFN0ZW5jaWxSZWZlcmVuY2UoZSl7Y29uc3R7cmVuZGVyZXJTY2hlbWE6dH09ZS5yZW5kZXJlckluZm87aWYoXCJkb3QtZGVuc2l0eVwiPT09dD8udHlwZSYmdD8uZG90U2l6ZT4xfHxcImhlYXRtYXBcIj09PXQ/LnR5cGUpe2NvbnN0IGU9MTtmb3IoY29uc3QgdCBvZiB0aGlzLmNoaWxkcmVuKXQuc3RlbmNpbFJlZj10LmtleS5sZXZlbCtlfWVsc2Ugc3VwZXIuc2V0U3RlbmNpbFJlZmVyZW5jZShlKX1nZXQgaGFzSGlnaGxpZ2h0KCl7cmV0dXJuIHRoaXMuX2xheWVyVmlldy5oYXNIaWdobGlnaHQoKX1nZXQgaGFzTGFiZWxzKCl7aWYoXCJzdWJsYXllcnNcImluIHRoaXMuX2xheWVyKXJldHVybiB0aGlzLl9sYXllci5zdWJsYXllcnMuc29tZSgoZT0+ISFlLmxhYmVsaW5nSW5mbz8ubGVuZ3RoJiZlLmxhYmVsc1Zpc2libGUpKTtjb25zdCBlPXRoaXMuX2xheWVyLmZlYXR1cmVSZWR1Y3Rpb24sdD1lJiZcImxhYmVsaW5nSW5mb1wiaW4gZSYmZS5sYWJlbHNWaXNpYmxlJiZlLmxhYmVsaW5nSW5mbyYmZS5sYWJlbGluZ0luZm8ubGVuZ3RoO3JldHVybiB0aGlzLl9sYXllci5sYWJlbGluZ0luZm8/Lmxlbmd0aCYmdGhpcy5fbGF5ZXIubGFiZWxzVmlzaWJsZXx8ISF0fXByZXBhcmVSZW5kZXJQYXNzZXMoZSl7Y29uc3Qgcz1zdXBlci5wcmVwYXJlUmVuZGVyUGFzc2VzKGUpLHI9ZS5yZWdpc3RlclJlbmRlclBhc3Moe25hbWU6XCJsYWJlbFwiLGJydXNoZXM6W3QubGFiZWxdLHRhcmdldDooKT0+dGhpcy5oYXNMYWJlbHM/dGhpcy5jaGlsZHJlbjpudWxsLGRyYXdQaGFzZTppLkxBQkVMfGkuTEFCRUxfQUxQSEF9KTtpZihoYXMoXCJmZWF0dXJlbGF5ZXItZm9yY2UtbWFya2VyLXRleHQtZHJhdy1vcmRlclwiKSl7Y29uc3QgaT1lLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcImdlb21ldHJ5XCIsYnJ1c2hlczpbdC5maWxsLHQuZG90RGVuc2l0eSx0LmxpbmUsdC5oZWF0bWFwLHQucGllQ2hhcnRdLHRhcmdldDooKT0+dGhpcy5jaGlsZHJlbixmb3JjZURyYXdCeURpc3BsYXlPcmRlcjohMCxlbmFibGVEZWZhdWx0RHJhdzooKT0+IXRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5oYXNFZmZlY3RzLGVmZmVjdHM6W3thcHBseTplLmVmZmVjdHMub3V0c2lkZUVmZmVjdCxlbmFibGU6KCk9PnRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5oYXNFZmZlY3RzLGFyZ3M6KCk9PnRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5leGNsdWRlZEVmZmVjdHN9LHthcHBseTplLmVmZmVjdHMuaW5zaWRlRWZmZWN0LGVuYWJsZTooKT0+dGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3Lmhhc0VmZmVjdHMsYXJnczooKT0+dGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3LmluY2x1ZGVkRWZmZWN0c30se2FwcGx5OmUuZWZmZWN0cy5oaXR0ZXN0LGVuYWJsZTooKT0+ISF0aGlzLl9oaXRUZXN0c1JlcXVlc3RzLmxlbmd0aCxhcmdzOigpPT50aGlzLl9oaXRUZXN0c1JlcXVlc3RzfV19KTtzLnB1c2goaSl9ZWxzZXtjb25zdCBpPWUucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwiZ2VvbWV0cnlcIixicnVzaGVzOlt0LmZpbGwsdC5kb3REZW5zaXR5LHQubGluZSx0Lm1hcmtlcix0LmhlYXRtYXAsdC5waWVDaGFydCx0LnRleHRdLHRhcmdldDooKT0+dGhpcy5jaGlsZHJlbixlbmFibGVEZWZhdWx0RHJhdzooKT0+IXRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5oYXNFZmZlY3RzLGVmZmVjdHM6W3thcHBseTplLmVmZmVjdHMub3V0c2lkZUVmZmVjdCxlbmFibGU6KCk9PnRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5oYXNFZmZlY3RzLGFyZ3M6KCk9PnRoaXMuX2xheWVyVmlldy5mZWF0dXJlRWZmZWN0Vmlldy5leGNsdWRlZEVmZmVjdHN9LHthcHBseTplLmVmZmVjdHMuaW5zaWRlRWZmZWN0LGVuYWJsZTooKT0+dGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3Lmhhc0VmZmVjdHMsYXJnczooKT0+dGhpcy5fbGF5ZXJWaWV3LmZlYXR1cmVFZmZlY3RWaWV3LmluY2x1ZGVkRWZmZWN0c30se2FwcGx5OmUuZWZmZWN0cy5oaXR0ZXN0LGVuYWJsZTooKT0+ISF0aGlzLl9oaXRUZXN0c1JlcXVlc3RzLmxlbmd0aCxhcmdzOigpPT50aGlzLl9oaXRUZXN0c1JlcXVlc3RzfV19KTtzLnB1c2goaSl9Y29uc3QgYT1lLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcImhpZ2hsaWdodFwiLGJydXNoZXM6W3QuZmlsbCx0LmRvdERlbnNpdHksdC5saW5lLHQubWFya2VyLHQucGllQ2hhcnQsdC50ZXh0XSx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW4sZHJhd1BoYXNlOmkuSElHSExJR0hULGVuYWJsZURlZmF1bHREcmF3OigpPT4hMSxlZmZlY3RzOlt7YXBwbHk6ZS5lZmZlY3RzLmhpZ2hsaWdodCxlbmFibGU6KCk9PiEhdGhpcy5fbGF5ZXJWaWV3Lmhhc0hpZ2hsaWdodCgpfV19KTtyZXR1cm4gcy5wdXNoKGEpLHMucHVzaChyKSxzfX1leHBvcnR7YSBhcyBXR0xGZWF0dXJlVmlld307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e1F1ZXVlUHJvY2Vzc29yIGFzIG99ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9RdWV1ZVByb2Nlc3Nvci5qc1wiO2Z1bmN0aW9uIGkoZSl7cmV0dXJuIGUuc29tZSgoZT0+ZS5nbG9iYWxJZCkpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUuZmlsdGVyKChlPT4hZS5lcnJvcikpLm1hcCgoZT0+ZS5vYmplY3RJZD8/ZS5nbG9iYWxJZCkpLmZpbHRlcigoZT0+bnVsbCE9ZSkpfWZ1bmN0aW9uIGQoZSx0KXtjb25zdCBzPW5ldyBTZXQoZSk7Zm9yKGNvbnN0IHIgb2YgdC52YWx1ZXMoKSlzLmFkZChyKTtyZXR1cm4gc31mdW5jdGlvbiBhKGUsdCl7Y29uc3Qgcz1uZXcgU2V0KGUpO2Zvcihjb25zdCByIG9mIHQudmFsdWVzKCkpcy5kZWxldGUocik7cmV0dXJuIHN9bGV0IGM9Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2hhc0dsb2JhbElkcz0hMSx0aGlzLl9ub3RpZnlVcGRhdGluZz0oKT0+e3RoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIil9fW5vcm1hbGl6ZUN0b3JBcmdzKGUpe3JldHVybiB0aGlzLl9xdWV1ZVByb2Nlc3Nvcj1uZXcgbyh7Y29uY3VycmVuY3k6MSxwcm9jZXNzOmUucHJvY2Vzc30pLHt9fWRlc3Ryb3koKXt0aGlzLmNsZWFyKCl9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX3F1ZXVlUHJvY2Vzc29yLmxlbmd0aD4wfWNsZWFyKCl7dGhpcy5fcXVldWVQcm9jZXNzb3IuY2xlYXIoKX1wdXNoKGUpe2NvbnN0IHQ9dGhpcy5fcXVldWVQcm9jZXNzb3Iscz10Lmxhc3QoKTtzd2l0Y2goZS50eXBlKXtjYXNlXCJ1cGRhdGVcIjpjYXNlXCJyZWZyZXNoXCI6aWYocz8udHlwZT09PWUudHlwZSlyZXR1cm47dC5wdXNoKGUpLnRoZW4odGhpcy5fbm90aWZ5VXBkYXRpbmcsdGhpcy5fbm90aWZ5VXBkYXRpbmcpO2JyZWFrO2Nhc2VcImVkaXRcIjp7Y29uc3Qgcj1cInByb2Nlc3NlZC1lZGl0XCI9PT1zPy50eXBlP3M6bnVsbDtyJiZ0LnBvcExhc3QoKTtjb25zdCBvPXRoaXMuX21lcmdlRWRpdHMocixlKTtmb3IoY29uc3QgZSBvZiBvKWUmJnQucHVzaChlKS50aGVuKHRoaXMuX25vdGlmeVVwZGF0aW5nLHRoaXMuX25vdGlmeVVwZGF0aW5nKTticmVha319dGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKX1fbWVyZ2VFZGl0cyhlLHQpe2NvbnN0e2FkZGVkRmVhdHVyZXM6cyxkZWxldGVkRmVhdHVyZXM6cix1cGRhdGVkRmVhdHVyZXM6b309dC5lZGl0cztpZih0aGlzLl9oYXNHbG9iYWxJZHM9dGhpcy5faGFzR2xvYmFsSWRzfHxpKHMpfHxpKG8pfHxpKHIpLHRoaXMuX2hhc0dsb2JhbElkcyl7cmV0dXJuW2Use3R5cGU6XCJwcm9jZXNzZWQtZWRpdFwiLGVkaXRzOnthZGRPck1vZGlmaWVkOlsuLi5zLC4uLm9dLHJlbW92ZWQ6cn19XX1jb25zdCBjPW5ldyBTZXQobihlPy5lZGl0cy5hZGRPck1vZGlmaWVkPz9bXSkpLHA9bmV3IFNldChuKGU/LmVkaXRzLnJlbW92ZWQ/P1tdKSksdT1uZXcgU2V0KFsuLi5uKHMpLC4uLm4obyldKSxsPW5ldyBTZXQobihyKSk7cmV0dXJuW3t0eXBlOlwicHJvY2Vzc2VkLWVkaXRcIixlZGl0czp7YWRkT3JNb2RpZmllZDpBcnJheS5mcm9tKGQoYShjLGwpLHUpKS5tYXAoKGU9Pih7b2JqZWN0SWQ6ZX0pKSkscmVtb3ZlZDpBcnJheS5mcm9tKGQoYShwLHUpLGwpKS5tYXAoKGU9Pih7b2JqZWN0SWQ6ZX0pKSl9fV19fTtlKFtzKHtyZWFkT25seTohMH0pXSxjLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbcygpXSxjLnByb3RvdHlwZSxcInByb2Nlc3NcIix2b2lkIDApLGM9ZShbcihcImVzcmkudmlld3MuMmQubGF5ZXJzLnN1cHBvcnQuRmVhdHVyZUNvbW1hbmRRdWV1ZVwiKV0sYyk7Y29uc3QgcD1jO2V4cG9ydHtwIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHtFc3JpUHJvbWlzZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvUHJvbWlzZS5qc1wiO2ltcG9ydHtjcmVhdGVSZXNvbHZlciBhcyByLGlnbm9yZUFib3J0RXJyb3JzIGFzIHMsdGhyb3dJZk5vdEFib3J0RXJyb3IgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtvcGVuIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS93b3JrZXJzL3dvcmtlcnMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2Z1bmN0aW9uIGMoZSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoZSl9bGV0IHU9Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX3N0YXJ0dXBSZXNvbHZlcj1yKCksdGhpcy5pc1JlYWR5PSExfWluaXRpYWxpemUoKXt0aGlzLl9jb250cm9sbGVyPW5ldyBBYm9ydENvbnRyb2xsZXIsdGhpcy5hZGRSZXNvbHZpbmdQcm9taXNlKHRoaXMuX3N0YXJ0V29ya2VyKHRoaXMuX2NvbnRyb2xsZXIuc2lnbmFsKSl9ZGVzdHJveSgpe3RoaXMuX2NvbnRyb2xsZXIuYWJvcnQoKSx0aGlzLl9jb25uZWN0aW9uJiZ0aGlzLl9jb25uZWN0aW9uLmNsb3NlKCl9c2V0IHRpbGVSZW5kZXJlcihlKXt0aGlzLmNsaWVudC50aWxlUmVuZGVyZXI9ZX1nZXQgY2xvc2VkKCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb24uY2xvc2VkfWFzeW5jIHN0YXJ0dXAoZSx0LHIscyl7YXdhaXQgdGhpcy53aGVuKCk7Y29uc3Qgbz10aGlzLl9jb250cm9sbGVyLnNpZ25hbCxpPWMoci5zb3VyY2UpP3t0cmFuc2Zlckxpc3Q6ci5zb3VyY2Usc2lnbmFsOm99OnZvaWQgMCxuPXtzZXJ2aWNlOnIsY29uZmlnOnQsdGlsZUluZm86ZS50aWxlSW5mby50b0pTT04oKSx0aWxlczpzfTthd2FpdCB0aGlzLl9jb25uZWN0aW9uLmludm9rZShcInN0YXJ0dXBcIixuLGkpLHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5yZXNvbHZlKCksdGhpcy5fc2V0KFwiaXNSZWFkeVwiLCEwKX1hc3luYyB1cGRhdGVUaWxlcyhlKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2Uscyh0aGlzLl9jb25uZWN0aW9uLmludm9rZShcInVwZGF0ZVRpbGVzXCIsZSkpfWFzeW5jIHVwZGF0ZShlKXtjb25zdCB0PXtjb25maWc6ZX07cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwidXBkYXRlXCIsdCl9YXN5bmMgYXBwbHlVcGRhdGUoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiYXBwbHlVcGRhdGVcIixlKX1hc3luYyBzZXRIaWdobGlnaHQoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHModGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnNldEhpZ2hsaWdodFwiLGUpKX1hc3luYyBzdG9wKCl7aWYoYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsIXRoaXMuY2xvc2VkKXJldHVybiBzKHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwic3RvcFwiKSl9YXN5bmMgcmVmcmVzaChlKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2Uscyh0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucmVmcmVzaFwiLGUpKX1hc3luYyBxdWVyeVN1bW1hcnlTdGF0aXN0aWNzKGUsdCxyKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5U3VtbWFyeVN0YXRpc3RpY3NcIix7cXVlcnk6ZS50b0pTT04oKSxwYXJhbXM6dH0scil9YXN5bmMgcXVlcnlBZ2dyZWdhdGVTdW1tYXJ5U3RhdGlzdGljcyhlLHQscil7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeUFnZ3JlZ2F0ZVN1bW1hcnlTdGF0aXN0aWNzXCIse3F1ZXJ5OmUudG9KU09OKCkscGFyYW1zOnR9LHIpfWFzeW5jIHF1ZXJ5VW5pcXVlVmFsdWVzKGUsdCxyKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5VW5pcXVlVmFsdWVzXCIse3F1ZXJ5OmUudG9KU09OKCkscGFyYW1zOnR9LHIpfWFzeW5jIHF1ZXJ5QWdncmVnYXRlVW5pcXVlVmFsdWVzKGUsdCxyKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5QWdncmVnYXRlVW5pcXVlVmFsdWVzXCIse3F1ZXJ5OmUudG9KU09OKCkscGFyYW1zOnR9LHIpfWFzeW5jIHF1ZXJ5Q2xhc3NCcmVha3MoZSx0LHIpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucXVlcnlDbGFzc0JyZWFrc1wiLHtxdWVyeTplLnRvSlNPTigpLHBhcmFtczp0fSxyKX1hc3luYyBxdWVyeUFnZ3JlZ2F0ZUNsYXNzQnJlYWtzKGUsdCxyKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5QWdncmVnYXRlQ2xhc3NCcmVha3NcIix7cXVlcnk6ZS50b0pTT04oKSxwYXJhbXM6dH0scil9YXN5bmMgcXVlcnlIaXN0b2dyYW0oZSx0LHIpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucXVlcnlIaXN0b2dyYW1cIix7cXVlcnk6ZS50b0pTT04oKSxwYXJhbXM6dH0scil9YXN5bmMgcXVlcnlBZ2dyZWdhdGVIaXN0b2dyYW0oZSx0LHIpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucXVlcnlBZ2dyZWdhdGVIaXN0b2dyYW1cIix7cXVlcnk6ZS50b0pTT04oKSxwYXJhbXM6dH0scil9YXN5bmMgcXVlcnlGZWF0dXJlcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucXVlcnlGZWF0dXJlc1wiLGU/LnRvSlNPTigpLHQpfWFzeW5jIHF1ZXJ5VmlzaWJsZUZlYXR1cmVzKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeVZpc2libGVGZWF0dXJlc1wiLGU/LnRvSlNPTigpLHQpfWFzeW5jIHF1ZXJ5T2JqZWN0SWRzKGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeU9iamVjdElkc1wiLGU/LnRvSlNPTigpLHQpfWFzeW5jIHF1ZXJ5RmVhdHVyZUNvdW50KGUsdCl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeUZlYXR1cmVDb3VudFwiLGU/LnRvSlNPTigpLHQpfWFzeW5jIHF1ZXJ5RXh0ZW50KGUsdCl7cmV0dXJuIHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeUV4dGVudFwiLGUudG9KU09OKCksdCl9YXN5bmMgcXVlcnlMYXRlc3RPYnNlcnZhdGlvbnMoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5TGF0ZXN0T2JzZXJ2YXRpb25zXCIsZS50b0pTT04oKSx0KX1hc3luYyBxdWVyeVN0YXRpc3RpY3MoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5xdWVyeVN0YXRpc3RpY3NcIixlKX1hc3luYyBxdWVyeUFnZ3JlZ2F0ZXMoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5QWdncmVnYXRlc1wiLGU/LnRvSlNPTigpLHQpfWFzeW5jIHF1ZXJ5QWdncmVnYXRlQ291bnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnF1ZXJ5QWdncmVnYXRlQ291bnRcIixlPy50b0pTT04oKSx0KX1hc3luYyBxdWVyeUFnZ3JlZ2F0ZUlkcyhlLHQpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucXVlcnlBZ2dyZWdhdGVJZHNcIixlPy50b0pTT04oKSx0KX1hc3luYyBnZXRPYmplY3RJZChlKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLmdldE9iamVjdElkXCIsZSl9YXN5bmMgZ2V0RGlzcGxheUlkKGUpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSx0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIuZ2V0RGlzcGxheUlkXCIsZSl9YXN5bmMgZ2V0RmVhdHVyZXMoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5nZXRGZWF0dXJlc1wiLGUpfWFzeW5jIGdldEFnZ3JlZ2F0ZXMoKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLmdldEFnZ3JlZ2F0ZXNcIil9YXN5bmMgZ2V0QWdncmVnYXRlVmFsdWVSYW5nZXMoKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLmdldEFnZ3JlZ2F0ZVZhbHVlUmFuZ2VzXCIpfWFzeW5jIG1hcFZhbGlkRGlzcGxheUlkcyhlKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2UsdGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLm1hcFZhbGlkRGlzcGxheUlkc1wiLGUpfWFzeW5jIG9uRWRpdHMoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHModGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLm9uRWRpdHNcIixlKSl9YXN5bmMgZW5hYmxlRXZlbnQoZSx0KXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2Uscyh0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIuZW5hYmxlRXZlbnRcIix7bmFtZTplLHZhbHVlOnR9KSl9YXN5bmMgcGF1c2VTdHJlYW0oKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2Uscyh0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIucGF1c2VTdHJlYW1cIikpfWFzeW5jIHJlc3VtZVN0cmVhbSgpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSxzKHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci5yZXN1bWVTdHJlYW1cIikpfWFzeW5jIHNlbmRNZXNzYWdlVG9Tb2NrZXQoZSl7cmV0dXJuIGF3YWl0IHRoaXMuX3N0YXJ0dXBSZXNvbHZlci5wcm9taXNlLHModGhpcy5fY29ubmVjdGlvbi5pbnZva2UoXCJjb250cm9sbGVyLnNlbmRNZXNzYWdlVG9Tb2NrZXRcIixlKSl9YXN5bmMgc2VuZE1lc3NhZ2VUb0NsaWVudChlKXtyZXR1cm4gYXdhaXQgdGhpcy5fc3RhcnR1cFJlc29sdmVyLnByb21pc2Uscyh0aGlzLl9jb25uZWN0aW9uLmludm9rZShcImNvbnRyb2xsZXIuc2VuZE1lc3NhZ2VUb0NsaWVudFwiLGUpKX1hc3luYyB1cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe3JldHVybiBhd2FpdCB0aGlzLl9zdGFydHVwUmVzb2x2ZXIucHJvbWlzZSxzKHRoaXMuX2Nvbm5lY3Rpb24uaW52b2tlKFwiY29udHJvbGxlci51cGRhdGVDdXN0b21QYXJhbWV0ZXJzXCIsZSkpfWFzeW5jIF9zdGFydFdvcmtlcihlKXt0cnl7dGhpcy5fY29ubmVjdGlvbj1hd2FpdCBpKFwiUGlwZWxpbmVcIix7Y2xpZW50OnRoaXMuY2xpZW50LHN0cmF0ZWd5OlwiZGVkaWNhdGVkXCIsc2lnbmFsOmV9KX1jYXRjaCh0KXtvKHQpfX19O2UoW24oKV0sdS5wcm90b3R5cGUsXCJpc1JlYWR5XCIsdm9pZCAwKSxlKFtuKHtjb25zdHJ1Y3RPbmx5OiEwfSldLHUucHJvdG90eXBlLFwiY2xpZW50XCIsdm9pZCAwKSxlKFtuKCldLHUucHJvdG90eXBlLFwidGlsZVJlbmRlcmVyXCIsbnVsbCksdT1lKFthKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuc3VwcG9ydC5GZWF0dXJlTGF5ZXJQcm94eVwiKV0sdSk7Y29uc3QgbD11O2V4cG9ydHtsIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjbGFtcCBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e21ldGVySW4gYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9sZW5ndGhVdGlscy5qc1wiO2ltcG9ydHtUcmFuc2Zvcm1hdGlvblR5cGUgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9yZW5kZXJlcnMvdmlzdWFsVmFyaWFibGVzL3N1cHBvcnQvc2l6ZVZhcmlhYmxlVXRpbHMuanNcIjtjb25zdCByPU1hdGguUEk7ZnVuY3Rpb24gaShlLHQpe3N3aXRjaCh0LnRyYW5zZm9ybWF0aW9uVHlwZSl7Y2FzZSBuLkFkZGl0aXZlOnJldHVybiBzKGUsdCk7Y2FzZSBuLkNvbnN0YW50OnJldHVybiBvKHQsZSk7Y2FzZSBuLkNsYW1wZWRMaW5lYXI6cmV0dXJuIHUoZSx0KTtjYXNlIG4uUHJvcG9ydGlvbmFsOnJldHVybiBsKGUsdCk7Y2FzZSBuLlN0b3BzOnJldHVybiBjKGUsdCk7Y2FzZSBuLlJlYWxXb3JsZFNpemU6cmV0dXJuIG0oZSx0KTtjYXNlIG4uSWRlbnRpdHk6cmV0dXJuIGU7Y2FzZSBuLlVua25vd246cmV0dXJuIG51bGx9fWZ1bmN0aW9uIGEoZSx0KXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZT9lOmkodCxlKX1mdW5jdGlvbiBzKGUsdCl7cmV0dXJuIGUrKGEodC5taW5TaXplLGUpfHx0Lm1pbkRhdGFWYWx1ZSl9ZnVuY3Rpb24gbyhlLHQpe2NvbnN0IG49ZS5zdG9wcztsZXQgcj1uPy5sZW5ndGgmJm5bMF0uc2l6ZTtyZXR1cm4gbnVsbD09ciYmKHI9ZS5taW5TaXplKSxhKHIsdCl9ZnVuY3Rpb24gdShlLHQpe2NvbnN0IG49dC5taW5EYXRhVmFsdWUscj10Lm1heERhdGFWYWx1ZSxpPShlLW4pLyhyLW4pLHM9YSh0Lm1pblNpemUsZSksbz1hKHQubWF4U2l6ZSxlKTtyZXR1cm4gZTw9bj9zOmU+PXI/bzpzK2kqKG8tcyl9ZnVuY3Rpb24gbCh0LG4pe2NvbnN0IHI9dC9uLm1pbkRhdGFWYWx1ZSxpPWEobi5taW5TaXplLHQpLHM9YShuLm1heFNpemUsdCk7bGV0IG89bnVsbDtyZXR1cm4gbz1yKmksZShvLGkscyl9ZnVuY3Rpb24gYyhlLHQpe2NvbnN0W24scixpXT1wKGUsdC5jYWNoZS5pcERhdGEpO2lmKG49PT1yKXJldHVybiBhKHQuc3RvcHNbbl0uc2l6ZSxlKTt7Y29uc3Qgcz1hKHQuc3RvcHNbbl0uc2l6ZSxlKTtyZXR1cm4gcysoYSh0LnN0b3BzW3JdLnNpemUsZSktcykqaX19ZnVuY3Rpb24gbShuLGkpe2NvbnN0IHM9dFtpLnZhbHVlVW5pdF0sbz1hKGkubWluU2l6ZSxuKSx1PWEoaS5tYXhTaXplLG4pLHt2YWx1ZVJlcHJlc2VudGF0aW9uOmx9PWk7bGV0IGM9bnVsbDtyZXR1cm4gYz1cImFyZWFcIj09PWw/MipNYXRoLnNxcnQobi9yKS9zOlwicmFkaXVzXCI9PT1sfHxcImRpc3RhbmNlXCI9PT1sPzIqbi9zOm4vcyxlKGMsbyx1KX1mdW5jdGlvbiBwKGUsdCl7aWYoIXQpcmV0dXJuO2xldCBuPTAscj10Lmxlbmd0aC0xO3JldHVybiB0LnNvbWUoKCh0LGkpPT5lPHQ/KHI9aSwhMCk6KG49aSwhMSkpKSxbbixyLChlLXRbbl0pLyh0W3JdLXRbbl0pXX1leHBvcnR7aSBhcyBnZXRTaXplRm9yVmFsdWVTaW1wbGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4vVGlsZUNvdmVyYWdlLmpzXCI7aW1wb3J0IGkgZnJvbVwiLi9UaWxlS2V5LmpzXCI7Y29uc3QgdD0xZS02O2NsYXNzIGx7Y29uc3RydWN0b3IoZSl7dGhpcy5fdGlsZXM9bmV3IE1hcCx0aGlzLmJ1ZmZlcj0wLHRoaXMuYWNxdWlyZVRpbGU9ZS5hY3F1aXJlVGlsZSx0aGlzLnJlbGVhc2VUaWxlPWUucmVsZWFzZVRpbGUsdGhpcy50aWxlSW5mb1ZpZXc9ZS50aWxlSW5mb1ZpZXcsdGhpcy5idWZmZXI9ZS5idWZmZXJ9ZGVzdHJveSgpe31jbGVhcigpe3RoaXMuX3RpbGVzLmZvckVhY2goKGU9PnRoaXMuX3JlbGVhc2VUaWxlKGUpKSl9dGlsZUtleXMoKXtjb25zdCBlPVtdO3JldHVybiB0aGlzLl90aWxlcy5mb3JFYWNoKCgoaSx0KT0+ZS5wdXNoKHQpKSksZX11cGRhdGUodCl7Y29uc3QgbD10aGlzLnRpbGVJbmZvVmlldy5nZXRUaWxlQ292ZXJhZ2UodC5zdGF0ZSx0aGlzLmJ1ZmZlciwhMCxcImNsb3Nlc3RcIikse3NwYW5zOnMsbG9kSW5mbzpyfT1sLHtsZXZlbDphfT1yLG89W10sZD1bXSxoPW5ldyBTZXQsbj1uZXcgU2V0O2Zvcihjb25zdHtyb3c6ZSxjb2xGcm9tOmMsY29sVG86Zn1vZiBzKWZvcihsZXQgdD1jO3Q8PWY7dCsrKXtjb25zdCBsPWkuZ2V0SWQoYSxlLHIubm9ybWFsaXplQ29sKHQpLHIuZ2V0V29ybGRGb3JDb2x1bW4odCkpLHM9dGhpcy5fZ2V0T3JBY3F1aXJlVGlsZShvLGwpO2guYWRkKGwpLHMuaXNSZWFkeT9zLnZpc2libGU9ITA6bi5hZGQocy5rZXkpfW4uZm9yRWFjaCgoZT0+dGhpcy5fYWRkUGxhY2Vob2xkZXJzKGgsZSkpKSx0aGlzLl90aWxlcy5mb3JFYWNoKChlPT57aC5oYXMoZS5rZXkuaWQpfHwoZC5wdXNoKGUua2V5LmlkKSx0aGlzLl9yZWxlYXNlVGlsZShlKSl9KSksZS5wb29sLnJlbGVhc2UobCk7cmV0dXJue2hhc01pc3NpbmdUaWxlczpuLnNpemU+MCxhZGRlZDpvLHJlbW92ZWQ6ZH19X2dldE9yQWNxdWlyZVRpbGUoZSx0KXtpZighdGhpcy5fdGlsZXMuaGFzKHQpKXtjb25zdCBsPXRoaXMuYWNxdWlyZVRpbGUobmV3IGkodCkpO2UucHVzaCh0KSx0aGlzLl90aWxlcy5zZXQodCxsKSxsLnZpc2libGU9ITF9cmV0dXJuIHRoaXMuX3RpbGVzLmdldCh0KX1fZ2V0VGlsZShlKXtyZXR1cm4gdGhpcy5fdGlsZXMuZ2V0KGUpfV9yZWxlYXNlVGlsZShlKXt0aGlzLl90aWxlcy5kZWxldGUoZS5rZXkuaWQpLHRoaXMucmVsZWFzZVRpbGUoZSl9X2FkZFBsYWNlaG9sZGVycyhlLGkpe2NvbnN0IGw9dGhpcy5fYWRkUGxhY2Vob2xkZXJDaGlsZHJlbihlLGkpO2lmKCEoTWF0aC5hYnMoMS1sKTx0KSl7aWYoIXRoaXMuX2FkZFBsYWNlaG9sZGVyUGFyZW50KGUsaSkpe3RoaXMuX2dldFRpbGUoaS5pZCkudmlzaWJsZT0hMH19fV9hZGRQbGFjZWhvbGRlckNoaWxkcmVuKGUsaSl7bGV0IHQ9MDtyZXR1cm4gdGhpcy5fdGlsZXMuZm9yRWFjaCgobD0+e3QrPXRoaXMuX2FkZFBsYWNlaG9sZGVyQ2hpbGQoZSxsLGkpfSkpLHR9X2FkZFBsYWNlaG9sZGVyQ2hpbGQoZSxpLHQpe2lmKGkua2V5LmxldmVsPD10LmxldmVsfHwhaS5oYXNEYXRhfHwhdC5jb250YWlucyhpLmtleSkpcmV0dXJuIDA7aS52aXNpYmxlPSEwLGUuYWRkKGkua2V5LmlkKTtyZXR1cm4gMS8oMTw8MiooaS5rZXkubGV2ZWwtdC5sZXZlbCkpfV9hZGRQbGFjZWhvbGRlclBhcmVudChlLGkpe2xldCB0PWkuZ2V0UGFyZW50S2V5KCksbD0wLHM9bnVsbDtmb3IoO251bGwhPXQ7KXtpZihlLmhhcyh0LmlkKSlyZXR1cm4hMDtjb25zdCBpPXRoaXMuX2dldFRpbGUodC5pZCk7aWYoaT8uaXNSZWFkeSl7Zm9yKGNvbnN0IGkgb2YgZSl7Y29uc3QgZT10aGlzLl9nZXRUaWxlKGkpO2UmJnQuY29udGFpbnMoZS5rZXkpJiYoZS52aXNpYmxlPSExKX1yZXR1cm4gaS52aXNpYmxlPSEwLGUuYWRkKGkua2V5LmlkKSwhMH1pPy5oYXNEYXRhJiZpLnBhdGNoQ291bnQ+bCYmKGw9aS5wYXRjaENvdW50LHM9aSksdD10LmdldFBhcmVudEtleSgpfXJldHVybiEhcyYmKHMudmlzaWJsZT0hMCxlLmFkZChzLmtleS5pZCksITApfX1leHBvcnR7bCBhcyBUaWxlTWFuYWdlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3dhdGNoIGFzIGksc3luY0FuZEluaXRpYWwgYXMgcyxvbiBhcyBvfWZyb21cIi4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBufWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgbH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2NvbWJpbmVkVmlld0xheWVyVGltZUV4dGVudFByb3BlcnR5IGFzIGF9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvY29tbW9uUHJvcGVydGllcy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L0ZlYXR1cmVFZmZlY3QuanNcIjtpbXBvcnQgcCBmcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9GZWF0dXJlRmlsdGVyLmpzXCI7aW1wb3J0e2ZpeEZpZWxkcyBhcyBkLHVucGFja0ZpZWxkTmFtZXMgYXMgZixjb2xsZWN0TGFiZWxpbmdGaWVsZHMgYXMgYyxjb2xsZWN0RWxldmF0aW9uRmllbGRzIGFzIG0sY29sbGVjdEZpbHRlckZpZWxkcyBhcyB5LGNvbGxlY3RGZWF0dXJlUmVkdWN0aW9uRmllbGRzIGFzIGgsY29sbGVjdE9yZGVyQnlJbmZvcyBhcyBGLGNvbGxlY3RGaWVsZHMgYXMgZyxjb2xsZWN0RmllbGQgYXMgdyxmZWF0dXJlSGFzRmllbGRzIGFzIEV9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2ltcG9ydHtnZXRGbG9vckZpbHRlckNsYXVzZSBhcyBifWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2Zsb29yRmlsdGVyVXRpbHMuanNcIjtpbXBvcnQgeCBmcm9tXCIuLi8uLi9yZXN0L3N1cHBvcnQvUXVlcnkuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBJfWZyb21cIi4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtpbXBvcnR7Z2V0RmV0Y2hQb3B1cFRlbXBsYXRlIGFzIHYsZ2V0UmVxdWlyZWRGaWVsZHMgYXMgUn1mcm9tXCIuL3N1cHBvcnQvcG9wdXBVdGlscy5qc1wiO2NvbnN0IGo9XCJlc3JpLnZpZXdzLmxheWVycy5GZWF0dXJlTGF5ZXJWaWV3XCIscT1yLmdldExvZ2dlcihqKSxQPXI9PntsZXQgUD1jbGFzcyBleHRlbmRzIHJ7Y29uc3RydWN0b3IoLi4uZSl7c3VwZXIoLi4uZSksdGhpcy5fdXBkYXRpbmdSZXF1aXJlZEZpZWxkc1Byb21pc2U9bnVsbCx0aGlzLmRhdGFVcGRhdGluZz0hMSx0aGlzLmZpbHRlcj1udWxsLHRoaXMudGltZUV4dGVudD1udWxsLHRoaXMubGF5ZXI9bnVsbCx0aGlzLnJlcXVpcmVkRmllbGRzPVtdLHRoaXMudmlldz1udWxsfWluaXRpYWxpemUoKXt0aGlzLmFkZEhhbmRsZXMoW2koKCgpPT57Y29uc3QgZT10aGlzLmxheWVyO3JldHVybltlPy5lbGV2YXRpb25JbmZvPy5mZWF0dXJlRXhwcmVzc2lvbkluZm8sZSYmXCJkaXNwbGF5RmllbGRcImluIGU/ZS5kaXNwbGF5RmllbGQ6bnVsbCxlJiZcInRpbWVJbmZvXCJpbiBlJiZlLnRpbWVJbmZvLGUmJlwicmVuZGVyZXJcImluIGUmJmUucmVuZGVyZXIsZSYmXCJsYWJlbGluZ0luZm9cImluIGUmJmUubGFiZWxpbmdJbmZvLGUmJlwiZmxvb3JJbmZvXCJpbiBlJiZlLmZsb29ySW5mbyx0aGlzLmZpbHRlcix0aGlzLmZlYXR1cmVFZmZlY3QsdGhpcy50aW1lRXh0ZW50XX0pLCgoKT0+dGhpcy5faGFuZGxlUmVxdWlyZWRGaWVsZHNDaGFuZ2UoKSkscyksbygoKCk9PnRoaXMudmlldz8uZmxvb3JzKSxcImNoYW5nZVwiLCgoKT0+dGhpcy5faGFuZGxlUmVxdWlyZWRGaWVsZHNDaGFuZ2UoKSkpLG8oKCgpPT57Y29uc3QgZT10aGlzLmxheWVyO3JldHVybiBlJiZcInN1YmxheWVyc1wiaW4gZT9lLnN1YmxheWVyczpudWxsfSksXCJjaGFuZ2VcIiwoKCk9PnRoaXMuX2hhbmRsZVJlcXVpcmVkRmllbGRzQ2hhbmdlKCkpKV0pfWdldCBhdmFpbGFibGVGaWVsZHMoKXtjb25zdHtsYXllcjplLGxheWVyOntmaWVsZHNJbmRleDp0fSxyZXF1aXJlZEZpZWxkczpyfT10aGlzO3JldHVyblwib3V0RmllbGRzXCJpbiBlJiZlLm91dEZpZWxkcz9kKHQsWy4uLmYodCxlLm91dEZpZWxkcyksLi4ucl0pOmQodCxyKX1nZXQgZmVhdHVyZUVmZmVjdCgpe3JldHVybiB0aGlzLmxheWVyJiZcImZlYXR1cmVFZmZlY3RcImluIHRoaXMubGF5ZXI/dGhpcy5sYXllci5mZWF0dXJlRWZmZWN0Om51bGx9c2V0IGZlYXR1cmVFZmZlY3QoZSl7dGhpcy5fb3ZlcnJpZGUoXCJmZWF0dXJlRWZmZWN0XCIsZSl9Z2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzKCl7cmV0dXJuIDB9c2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzKGUpe3EuZXJyb3IoXCIjbWF4aW11bU51bWJlck9mRmVhdHVyZXM9XCIsXCJTZXR0aW5nIG1heGltdW0gbnVtYmVyIG9mIGZlYXR1cmVzIGlzIG5vdCBzdXBwb3J0ZWRcIil9Z2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzRXhjZWVkZWQoKXtyZXR1cm4hMX1oaWdobGlnaHQoZSl7dGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBpbXBsZW1lbnRhdGlvblwiKX1jcmVhdGVRdWVyeSgpe2NvbnN0IGU9e291dEZpZWxkczpbXCIqXCJdLHJldHVybkdlb21ldHJ5OiEwLG91dFNwYXRpYWxSZWZlcmVuY2U6dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2V9LHQ9bnVsbCE9dGhpcy5maWx0ZXI/dGhpcy5maWx0ZXIuY3JlYXRlUXVlcnkoZSk6bmV3IHgoZSk7aWYoXCJmZWF0dXJlXCI9PT10aGlzLmxheWVyLnR5cGUpe2NvbnN0IGU9Yih0aGlzKTtudWxsIT1lJiYodC53aGVyZT10LndoZXJlP2AoJHt0LndoZXJlfSkgQU5EICgke2V9KWA6ZSl9cmV0dXJuIG51bGwhPXRoaXMudGltZUV4dGVudCYmKHQudGltZUV4dGVudD1udWxsIT10LnRpbWVFeHRlbnQ/dC50aW1lRXh0ZW50LmludGVyc2VjdGlvbih0aGlzLnRpbWVFeHRlbnQpOnRoaXMudGltZUV4dGVudC5jbG9uZSgpKSx0fWNyZWF0ZUFnZ3JlZ2F0ZVF1ZXJ5KCl7Y29uc3QgZT17b3V0RmllbGRzOltcIipcIl0scmV0dXJuR2VvbWV0cnk6ITAsb3V0U3BhdGlhbFJlZmVyZW5jZTp0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZX07cmV0dXJuIG5ldyB4KGUpfXF1ZXJ5RmVhdHVyZXMoZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGltcGxlbWVudGF0aW9uXCIpfXF1ZXJ5T2JqZWN0SWRzKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBpbXBsZW1lbnRhdGlvblwiKX1xdWVyeUZlYXR1cmVDb3VudChlLHQpe3Rocm93IG5ldyBFcnJvcihcIm1pc3NpbmcgaW1wbGVtZW50YXRpb25cIil9cXVlcnlFeHRlbnQoZSx0KXt0aHJvdyBuZXcgRXJyb3IoXCJtaXNzaW5nIGltcGxlbWVudGF0aW9uXCIpfWFzeW5jIGZldGNoUG9wdXBGZWF0dXJlcyhlLHQpe2NvbnN0IHI9dGhpcy52YWxpZGF0ZUZldGNoUG9wdXBGZWF0dXJlcyh0KTtpZihyKXRocm93IHI7cmV0dXJuIHRoaXMuZmV0Y2hDbGllbnRQb3B1cEZlYXR1cmVzKHQpfV9sb2FkQXJjYWRlTW9kdWxlcyhlKXtyZXR1cm4gZS5leHByZXNzaW9uSW5mb3M/Lmxlbmd0aHx8QXJyYXkuaXNBcnJheShlLmNvbnRlbnQpJiZlLmNvbnRlbnQuc29tZSgoZT0+XCJleHByZXNzaW9uXCI9PT1lLnR5cGUpKT9JKCk6UHJvbWlzZS5yZXNvbHZlKCl9X2hhbmRsZVJlcXVpcmVkRmllbGRzQ2hhbmdlKCl7Y29uc3QgZT10aGlzLl91cGRhdGVSZXF1aXJlZEZpZWxkcygpO3RoaXMuX3NldChcIl91cGRhdGluZ1JlcXVpcmVkRmllbGRzUHJvbWlzZVwiLGUpLGUudGhlbigoKCk9Pnt0aGlzLl91cGRhdGluZ1JlcXVpcmVkRmllbGRzUHJvbWlzZT09PWUmJnRoaXMuX3NldChcIl91cGRhdGluZ1JlcXVpcmVkRmllbGRzUHJvbWlzZVwiLG51bGwpfSkpfWFzeW5jIF91cGRhdGVSZXF1aXJlZEZpZWxkcygpe2lmKCF0aGlzLmxheWVyfHwhdGhpcy52aWV3KXJldHVybjtjb25zdCBlPVwiM2RcIj09PXRoaXMudmlldy50eXBlLHtsYXllcjp0LGxheWVyOntmaWVsZHNJbmRleDpyLG9iamVjdElkRmllbGQ6aX19PXRoaXMscz1cInJlbmRlcmVyXCJpbiB0JiZ0LnJlbmRlcmVyLG89XCJvcmRlckJ5XCJpbiB0JiZ0Lm9yZGVyQnksbj1cImZlYXR1cmVSZWR1Y3Rpb25cImluIHQ/dC5mZWF0dXJlUmVkdWN0aW9uOm51bGwsbD1uZXcgU2V0LGE9YXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKFtzP3MuY29sbGVjdFJlcXVpcmVkRmllbGRzKGwscik6bnVsbCxjKGwsdCksZT9tKGwsdCk6bnVsbCxudWxsIT10aGlzLmZpbHRlcj95KGwsdCx0aGlzLmZpbHRlcik6bnVsbCxudWxsIT10aGlzLmZlYXR1cmVFZmZlY3Q/eShsLHQsdGhpcy5mZWF0dXJlRWZmZWN0LmZpbHRlcik6bnVsbCxuP2gobCx0LG4pOm51bGwsbz9GKGwsdCxvKTpudWxsXSk7aWYoXCJ0aW1lSW5mb1wiaW4gdCYmdC50aW1lSW5mbyYmdGhpcy50aW1lRXh0ZW50JiZnKGwsdC5maWVsZHNJbmRleCxbdC50aW1lSW5mby5zdGFydEZpZWxkLHQudGltZUluZm8uZW5kRmllbGRdKSxcImZlYXR1cmVcIj09PXQudHlwZSYmKHQuZmxvb3JJbmZvJiZnKGwsdC5maWVsZHNJbmRleCxbdC5mbG9vckluZm8uZmxvb3JGaWVsZF0pLGUmJm51bGwhPXQuaW5mb0ZvcjNEJiYobnVsbD09dC5nbG9iYWxJZEZpZWxkJiZxLmVycm9yKFwiZ2xvYmFsSWRGaWVsZCBtaXNzaW5nIG9uIDNET2JqZWN0RmVhdHVyZUxheWVyXCIpLGcobCx0LmZpZWxkc0luZGV4LFt0Lmdsb2JhbElkRmllbGRdKSkpLFwic3VidHlwZS1ncm91cFwiPT09dC50eXBlKXt3KGwscix0LnN1YnR5cGVGaWVsZCk7Y29uc3QgZT10LnN1YmxheWVycy5tYXAoKGU9PlByb21pc2UuYWxsKFtlLnJlbmRlcmVyPy5jb2xsZWN0UmVxdWlyZWRGaWVsZHMobCxyKSxjKGwsZSldKSkpO2F3YWl0IFByb21pc2UuYWxsU2V0dGxlZChlKX1mb3IoY29uc3QgcCBvZiBhKVwicmVqZWN0ZWRcIj09PXAuc3RhdHVzJiZxLmVycm9yKHAucmVhc29uKTt3KGwscixpKSxlJiZcImRpc3BsYXlGaWVsZFwiaW4gdCYmdC5kaXNwbGF5RmllbGQmJncobCxyLHQuZGlzcGxheUZpZWxkKTtjb25zdCB1PUFycmF5LmZyb20obCkuc29ydCgpO3RoaXMuX3NldChcInJlcXVpcmVkRmllbGRzXCIsdSl9dmFsaWRhdGVGZXRjaFBvcHVwRmVhdHVyZXMoZSl7aWYobnVsbD09ZSlyZXR1cm4gbnVsbDtmb3IoY29uc3QgciBvZiBlLmNsaWVudEdyYXBoaWNzPz9bXSl7Y29uc3QgaT1yLmxheWVyO2lmKFwicG9wdXBFbmFibGVkXCJpbiBpJiYhaS5wb3B1cEVuYWJsZWQpcmV0dXJuIG5ldyB0KFwiZmVhdHVyZWxheWVydmlldzpmZXRjaFBvcHVwRmVhdHVyZXNcIixcIlBvcHVwcyBhcmUgZGlzYWJsZWRcIix7bGF5ZXI6aX0pO2lmKHIuaXNBZ2dyZWdhdGUpe2NvbnN0IGU9XCJmZWF0dXJlUmVkdWN0aW9uXCJpbiBpP2kuZmVhdHVyZVJlZHVjdGlvbjpudWxsO2lmKCEoZSYmXCJwb3B1cFRlbXBsYXRlXCJpbiBlJiZlLnBvcHVwRW5hYmxlZCYmZS5wb3B1cFRlbXBsYXRlKSlyZXR1cm4gbmV3IHQoXCJmZWF0dXJlbGF5ZXJ2aWV3OmZldGNoUG9wdXBGZWF0dXJlc1wiLFwiUG9wdXBzIGFyZSBkaXNhYmxlZFwiLHtsYXllcjppfSl9ZWxzZSBpZihcInBvcHVwVGVtcGxhdGVcImluIGkpe2lmKCF2KGksZSkpcmV0dXJuIG5ldyB0KFwiZmVhdHVyZWxheWVydmlldzpmZXRjaFBvcHVwRmVhdHVyZXNcIixcIkxheWVyIGRvZXMgbm90IGRlZmluZSBhIHBvcHVwIHRlbXBsYXRlXCIse2xheWVyOml9KX19fWFzeW5jIGZldGNoQ2xpZW50UG9wdXBGZWF0dXJlcyhlKXtjb25zdCB0PW51bGwhPWU/ZS5jbGllbnRHcmFwaGljczpudWxsO2lmKCF0fHwwPT09dC5sZW5ndGgpcmV0dXJuW107Y29uc3Qgcj1uZXcgQXJyYXkodC5sZW5ndGgpLGk9bmV3IE1hcCxzPWF3YWl0IHRoaXMuY3JlYXRlUG9wdXBRdWVyeShlKTtmb3IobGV0IG89MDtvPHQubGVuZ3RoO28rKyl7Y29uc3Qgbj10W29dO2lmKG4uaXNBZ2dyZWdhdGUpe3Jbb109bjtjb250aW51ZX1jb25zdCBsPW4ubGF5ZXI7aWYoIShcInBvcHVwRW5hYmxlZFwiaW4gbCkpY29udGludWU7Y29uc3QgYT1mKHRoaXMubGF5ZXIuZmllbGRzSW5kZXgscy5vdXRGaWVsZHMpLHU9dihsLGUpO2lmKG51bGw9PXUpY29udGludWU7Y29uc3QgcD1hd2FpdCB0aGlzLl9sb2FkQXJjYWRlTW9kdWxlcyh1KTtwJiZwLmFyY2FkZVV0aWxzLmhhc0dlb21ldHJ5T3BlcmF0aW9ucyh1KXx8IUUoYSxuKT9pLnNldChuLmdldE9iamVjdElkKCkse2dyYXBoaWM6bixpbmRleDpvfSk6cltvXT1ufWlmKFwic3RyZWFtXCI9PT10aGlzLmxheWVyLnR5cGV8fDA9PT1pLnNpemUpcmV0dXJuIHIuZmlsdGVyKEJvb2xlYW4pO3Mub2JqZWN0SWRzPUFycmF5LmZyb20oaS5rZXlzKCkpO3RyeXtjb25zdCBlPWF3YWl0IHRoaXMubGF5ZXIucXVlcnlGZWF0dXJlcyhzKTtmb3IoY29uc3QgdCBvZiBlLmZlYXR1cmVzKXtjb25zdHtncmFwaGljOntnZW9tZXRyeTplfSxpbmRleDpzfT1pLmdldCh0LmdldE9iamVjdElkKCkpO3QuZ2VvbWV0cnl8fD1lLHJbc109dH19Y2F0Y2h7fXJldHVybiByLmZpbHRlcihCb29sZWFuKX1hc3luYyBjcmVhdGVQb3B1cFF1ZXJ5KGUpe2NvbnN0IHQ9dGhpcy5sYXllci5jcmVhdGVRdWVyeSgpLHI9bmV3IFNldDtsZXQgaT0hMTtjb25zdCBzPWU/LmNsaWVudEdyYXBoaWNzP2UuY2xpZW50R3JhcGhpY3MubWFwKChlPT5lLmxheWVyKSk6W3RoaXMubGF5ZXJdO2Zvcihjb25zdCBvIG9mIHMpe2lmKCEoXCJwb3B1cEVuYWJsZWRcImluIG8pKWNvbnRpbnVlO2NvbnN0IHQ9dihvLGUpO2lmKG51bGw9PXQpY29udGludWU7Y29uc3Qgcz1hd2FpdCB0aGlzLl9sb2FkQXJjYWRlTW9kdWxlcyh0KSxuPXMmJnMuYXJjYWRlVXRpbHMuaGFzR2VvbWV0cnlPcGVyYXRpb25zKHQpO2k9IShcInBvaW50XCIhPT10aGlzLmxheWVyLmdlb21ldHJ5VHlwZSYmIW4pO2NvbnN0IGw9YXdhaXQgUih0aGlzLmxheWVyLHQpO2Zvcihjb25zdCBlIG9mIGwpci5hZGQoZSl9aWYodC5yZXR1cm5HZW9tZXRyeT1pLHQucmV0dXJuWj1pLHQucmV0dXJuTT1pLHQub3V0RmllbGRzPUFycmF5LmZyb20ociksdC5vdXRTcGF0aWFsUmVmZXJlbmNlPXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlLFwiZmVhdHVyZVwiPT09dGhpcy5sYXllci50eXBlKXtjb25zdCBlPWIodGhpcyk7bnVsbCE9ZSYmKHQud2hlcmU9dC53aGVyZT9gKCR7dC53aGVyZX0pIEFORCAoJHtlfSlgOmUpfXJldHVybiB0fWNhblJlc3VtZSgpe3JldHVybiEhc3VwZXIuY2FuUmVzdW1lKCkmJihudWxsPT10aGlzLnRpbWVFeHRlbnR8fCF0aGlzLnRpbWVFeHRlbnQuaXNFbXB0eSl9fTtyZXR1cm4gZShbbigpXSxQLnByb3RvdHlwZSxcIl91cGRhdGluZ1JlcXVpcmVkRmllbGRzUHJvbWlzZVwiLHZvaWQgMCksZShbbih7cmVhZE9ubHk6ITB9KV0sUC5wcm90b3R5cGUsXCJhdmFpbGFibGVGaWVsZHNcIixudWxsKSxlKFtuKHtyZWFkT25seTohMH0pXSxQLnByb3RvdHlwZSxcImRhdGFVcGRhdGluZ1wiLHZvaWQgMCksZShbbih7dHlwZTp1fSldLFAucHJvdG90eXBlLFwiZmVhdHVyZUVmZmVjdFwiLG51bGwpLGUoW24oe3R5cGU6cH0pXSxQLnByb3RvdHlwZSxcImZpbHRlclwiLHZvaWQgMCksZShbbihhKV0sUC5wcm90b3R5cGUsXCJ0aW1lRXh0ZW50XCIsdm9pZCAwKSxlKFtuKCldLFAucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGUoW24oe3R5cGU6TnVtYmVyfSldLFAucHJvdG90eXBlLFwibWF4aW11bU51bWJlck9mRmVhdHVyZXNcIixudWxsKSxlKFtuKHtyZWFkT25seTohMCx0eXBlOkJvb2xlYW59KV0sUC5wcm90b3R5cGUsXCJtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc0V4Y2VlZGVkXCIsbnVsbCksZShbbih7cmVhZE9ubHk6ITB9KV0sUC5wcm90b3R5cGUsXCJyZXF1aXJlZEZpZWxkc1wiLHZvaWQgMCksZShbbigpXSxQLnByb3RvdHlwZSxcInN1c3BlbmRlZFwiLHZvaWQgMCksZShbbigpXSxQLnByb3RvdHlwZSxcInZpZXdcIix2b2lkIDApLFA9ZShbbChqKV0sUCksUH07ZXhwb3J0e1AgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7b24gYXMgb31mcm9tXCIuLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2NvbnN0IGE9YT0+e2xldCBjPWNsYXNzIGV4dGVuZHMgYXtpbml0aWFsaXplKCl7dGhpcy5hZGRIYW5kbGVzKG8oKCgpPT50aGlzLmxheWVyKSxcInJlZnJlc2hcIiwocj0+e3RoaXMuZG9SZWZyZXNoKHIuZGF0YUNoYW5nZWQpLmNhdGNoKChyPT57cyhyKXx8ZS5nZXRMb2dnZXIodGhpcykuZXJyb3Iocil9KSl9KSksXCJSZWZyZXNoYWJsZUxheWVyVmlld1wiKX19O3JldHVybiByKFt0KCldLGMucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGM9cihbaShcImVzcmkubGF5ZXJzLm1peGlucy5SZWZyZXNoYWJsZUxheWVyVmlld1wiKV0sYyksY307ZXhwb3J0e2EgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldEZlYXR1cmVFZGl0RmllbGRzIGFzIGUsZml4RmllbGRzIGFzIGx9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2FzeW5jIGZ1bmN0aW9uIG4obixwPW4ucG9wdXBUZW1wbGF0ZSl7aWYobnVsbD09cClyZXR1cm5bXTtjb25zdCB1PWF3YWl0IHAuZ2V0UmVxdWlyZWRGaWVsZHMobi5maWVsZHNJbmRleCkse2xhc3RFZGl0SW5mb0VuYWJsZWQ6dH09cCx7b2JqZWN0SWRGaWVsZDpkLHR5cGVJZEZpZWxkOnMsZ2xvYmFsSWRGaWVsZDppLHJlbGF0aW9uc2hpcHM6YX09bjtpZih1LmluY2x1ZGVzKFwiKlwiKSlyZXR1cm5bXCIqXCJdO2NvbnN0IG89dD9lKG4pOltdLGY9bChuLmZpZWxkc0luZGV4LFsuLi51LC4uLm9dKTtyZXR1cm4gcyYmZi5wdXNoKHMpLGYmJmQmJm4uZmllbGRzSW5kZXg/LmhhcyhkKSYmIWYuaW5jbHVkZXMoZCkmJmYucHVzaChkKSxmJiZpJiZuLmZpZWxkc0luZGV4Py5oYXMoaSkmJiFmLmluY2x1ZGVzKGkpJiZmLnB1c2goaSksYSYmYS5mb3JFYWNoKChlPT57Y29uc3R7a2V5RmllbGQ6bH09ZTtmJiZsJiZuLmZpZWxkc0luZGV4Py5oYXMobCkmJiFmLmluY2x1ZGVzKGwpJiZmLnB1c2gobCl9KSksZn1mdW5jdGlvbiBwKGUsbCl7cmV0dXJuIGUucG9wdXBUZW1wbGF0ZT9lLnBvcHVwVGVtcGxhdGU6bnVsbCE9bCYmbC5kZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQmJm51bGwhPWUuZGVmYXVsdFBvcHVwVGVtcGxhdGU/ZS5kZWZhdWx0UG9wdXBUZW1wbGF0ZTpudWxsfWZ1bmN0aW9uIHUoZSxsKXtyZXR1cm4gbnVsbCE9cChlLHtkZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQ6bH0pfWV4cG9ydHtwIGFzIGdldEZldGNoUG9wdXBUZW1wbGF0ZSxuIGFzIGdldFJlcXVpcmVkRmllbGRzLHUgYXMgaGFzUG9wdXBUZW1wbGF0ZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=