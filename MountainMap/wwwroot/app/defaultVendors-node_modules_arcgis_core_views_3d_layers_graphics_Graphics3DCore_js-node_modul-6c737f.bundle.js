"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_3d_layers_graphics_Graphics3DCore_js-node_modul-6c737f"],{

/***/ "./node_modules/@arcgis/core/renderers/support/rendererConversion.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/renderers/support/rendererConversion.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isSupportedRenderer3D: () => (/* binding */ t),
/* harmony export */   validateTo3D: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../symbols/support/symbolConversion.js */ "./node_modules/@arcgis/core/symbols/support/symbolConversion.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(r){return null==r||"simple"===r.type||"unique-value"===r.type||"class-breaks"===r.type||"dictionary"===r.type||"heatmap"===r.type}function s(r,n){if(null==r)return null;if(!t(r))return new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("renderer-conversion-3d:unsupported-renderer",`Unsupported renderer of type '${r.type||r.declaredClass}'`,{renderer:r});switch(r.type){case"simple":return u(r);case"unique-value":return i(r,n);case"class-breaks":return a(r);case"dictionary":case"heatmap":return null}return null}function l(r,n){if(!n)return null;let o;if(o=Array.isArray(n)?n:[n],o.length>0){const n=o.map((r=>r.details.symbol.type||r.details.symbol.declaredClass)).filter((r=>!!r));n.sort();const t=[];return n.forEach(((r,e)=>{0!==e&&r===n[e-1]||t.push(r)})),new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("renderer-conversion-3d:unsupported-symbols",`Renderer contains symbols (${t.join(", ")}) which are not supported in 3D`,{renderer:r,symbolErrors:o})}return null}function u(r){return l(r,(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.to3D)(r.symbol).error)}function i(e,t){const s={..._symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.defaultTo3DOptions,...t},u=e.uniqueValueInfos?.map((r=>(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.to3D)(r.symbol,s).error)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome),i=(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.to3D)(e.defaultSymbol,s);return i.error&&u?.unshift(i.error),l(e,u)}function a(e){const o=e.classBreakInfos.map((r=>(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.to3D)(r.symbol).error)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome),t=(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_3__.to3D)(e.defaultSymbol);return t.error&&o.unshift(t.error),l(e,o)}


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/support/defaults3D.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/support/defaults3D.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getDefaultSymbol3D: () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _FillSymbol3DLayer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../FillSymbol3DLayer.js */ "./node_modules/@arcgis/core/symbols/FillSymbol3DLayer.js");
/* harmony import */ var _LineSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../LineSymbol3D.js */ "./node_modules/@arcgis/core/symbols/LineSymbol3D.js");
/* harmony import */ var _MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../MeshSymbol3D.js */ "./node_modules/@arcgis/core/symbols/MeshSymbol3D.js");
/* harmony import */ var _PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../PointSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PointSymbol3D.js");
/* harmony import */ var _PolygonSymbol3D_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../PolygonSymbol3D.js */ "./node_modules/@arcgis/core/symbols/PolygonSymbol3D.js");
/* harmony import */ var _edges_SolidEdges3D_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../edges/SolidEdges3D.js */ "./node_modules/@arcgis/core/symbols/edges/SolidEdges3D.js");
/* harmony import */ var _defaults_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./defaults.js */ "./node_modules/@arcgis/core/symbols/support/defaults.js");
/* harmony import */ var _defaultsJSON_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./defaultsJSON.js */ "./node_modules/@arcgis/core/symbols/support/defaultsJSON.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=_PointSymbol3D_js__WEBPACK_IMPORTED_MODULE_5__["default"].fromSimpleMarkerSymbol(_defaults_js__WEBPACK_IMPORTED_MODULE_8__.defaultPointSymbol2D),c=_LineSymbol3D_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromSimpleLineSymbol(_defaults_js__WEBPACK_IMPORTED_MODULE_8__.defaultPolylineSymbol2D),u=_PolygonSymbol3D_js__WEBPACK_IMPORTED_MODULE_6__["default"].fromSimpleFillSymbol(_defaults_js__WEBPACK_IMPORTED_MODULE_8__.defaultPolygonSymbol2D),S=new _MeshSymbol3D_js__WEBPACK_IMPORTED_MODULE_4__["default"]({symbolLayers:new _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__["default"]([new _FillSymbol3DLayer_js__WEBPACK_IMPORTED_MODULE_2__["default"]({material:{color:_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_9__.defaultColor},edges:new _edges_SolidEdges3D_js__WEBPACK_IMPORTED_MODULE_7__["default"]({size:"1px",color:_defaultsJSON_js__WEBPACK_IMPORTED_MODULE_9__.defaultOutlineColor})})])});function j(o){if(null==o)return null;switch(o.type){case"mesh":return S;case"point":case"multipoint":return a;case"polyline":return c;case"polygon":case"extent":return u}return null}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/DisplayFeatureLimit.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/DisplayFeatureLimit.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DisplayFeatureLimit: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e,m,t){this.maximumTotalNumberOfVertices=e,this.maximumNumberOfFeatures=m,this.averageSymbolComplexity=t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ExtentSet: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const a=.05;class l{constructor(){this._extents=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_0__["default"]({allocator:t=>t||(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)()}),this._tmpExtent=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.create)(),this._dirty=!1}get empty(){return 0===this._extents.length}get size(){return this._extents.length}clear(){this._extents.clear()}add(t){this._contains(t)||(this._removeContained(t),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.copy)(this._extents.pushNew(),t),this._dirty=!0)}pop(){return this._dirty&&this._mergeTight(),this._extents.pop()}merge(t){return this._mergeTight(t),t.hasProgressed}_mergeTight(t=_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_2__.noBudget){const e=this._extents,o=new Set;let i=0;for(;i!==e.length;){e.sort(((t,e)=>t[0]-e[0])),i=e.length,o.clear();for(let i=0;i<e.length;++i){if(t.done)return;const h=e.at(i);if(h){for(let t=i+1;t<e.length;++t){const r=e.at(t);if(null==r||r[0]>=h[2])break;o.add(r)}o.forEach((i=>{if(h===i)return;if(i[2]<=h[0])return void o.delete(i);const l=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.area)(h),_=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.area)(i),c=this._tmpExtent;(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.expand)(h,i,c);const d=l+_;((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.area)(c)-d)/d<a&&((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.copy)(h,c),o.delete(i),e.remove(i),t.madeProgress())})),o.add(h)}}}this._dirty=!1}_contains(t){return this._extents.some((e=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.contains)(e,t)))}_removeContained(t){this._extents.filterInPlace((e=>!(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.contains)(t,e)))}get test(){const t=this;return{containsPoint:e=>t._extents.some((t=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_1__.containsPoint)(t,e)))}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js":
/*!************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js ***!
  \************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicStateTracking: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(t){this._graphicsCore=t,this._idToState=new Map,this._states=new Set;const i=t.owner.layer?.objectIdField;i?(this._getGraphicId=t=>(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_2__.getObjectId)(t,i),this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicByObjectId(t)):(this._getGraphicId=t=>t.uid,this._getGraphics3DGraphicById=t=>this._graphicsCore.getGraphics3DGraphicById(t))}destroy(){this._idToState.clear(),this._states.forEach(((t,i)=>this.remove(i)))}add(t){const s=(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_1__.makeHandle)((()=>this.remove(t)));if(this._states.has(t))return s;const e=this._getGraphicId(t.graphic),a=this._getGraphics3DGraphicById(e);this._states.has(t)||this._states.add(t);return this._ensureStateList(e).push(t),t.displaying=null!=a&&a.isVisible(),t.isDraped=null!=a&&a.isDraped,t.tracking=!0,null!=a&&t.emit("changed"),s}remove(i){if(this._states.has(i)){if(this._idToState.size){const s=this._getGraphicId(i.graphic),e=this._idToState.get(s);e&&((0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.remove)(e,i),0===e.length&&this._idToState.delete(s))}this._states.delete(i),i.tracking=!1,i.displaying=!1}}addGraphic(t){this._forEachState(t,(i=>{i.displaying=t.isVisible(),i.isDraped=t.isDraped,i.emit("changed")}))}removeGraphic(t){this._forEachState(t,(t=>{t.displaying=!1,t.isDraped=!1}))}updateGraphicGeometry(t){this._forEachState(t,(t=>t.emit("changed")))}updateGraphicVisibility(t){this._forEachState(t,(i=>i.displaying=t.isVisible()))}allGraphicsDeleted(){this._states.forEach((t=>{t.displaying=!1}))}_ensureStateList(t){const i=this._idToState.get(t);if(i)return i;const s=new Array;return this._idToState.set(t,s),s}_forEachState(t,i){if(0===this._states.size||0===this._idToState.size)return;const s=this._getGraphicId(t.graphic),e=this._idToState.get(s);null!=e&&e.forEach(i)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DCore: () => (/* binding */ Fe)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _renderers_ClassBreaksRenderer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/ClassBreaksRenderer.js */ "./node_modules/@arcgis/core/renderers/ClassBreaksRenderer.js");
/* harmony import */ var _renderers_DictionaryRenderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../renderers/DictionaryRenderer.js */ "./node_modules/@arcgis/core/renderers/DictionaryRenderer.js");
/* harmony import */ var _renderers_DotDensityRenderer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../renderers/DotDensityRenderer.js */ "./node_modules/@arcgis/core/renderers/DotDensityRenderer.js");
/* harmony import */ var _renderers_HeatmapRenderer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../renderers/HeatmapRenderer.js */ "./node_modules/@arcgis/core/renderers/HeatmapRenderer.js");
/* harmony import */ var _renderers_PieChartRenderer_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../renderers/PieChartRenderer.js */ "./node_modules/@arcgis/core/renderers/PieChartRenderer.js");
/* harmony import */ var _renderers_Renderer_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../renderers/Renderer.js */ "./node_modules/@arcgis/core/renderers/Renderer.js");
/* harmony import */ var _renderers_SimpleRenderer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../renderers/SimpleRenderer.js */ "./node_modules/@arcgis/core/renderers/SimpleRenderer.js");
/* harmony import */ var _renderers_UniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../renderers/UniqueValueRenderer.js */ "./node_modules/@arcgis/core/renderers/UniqueValueRenderer.js");
/* harmony import */ var _renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../renderers/support/jsonUtils.js */ "./node_modules/@arcgis/core/renderers/support/jsonUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../symbols.js */ "./node_modules/@arcgis/core/symbols.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_scheduling_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../core/scheduling.js */ "./node_modules/@arcgis/core/core/scheduling.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_projection_projectXYZToVector_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../../../../geometry/projection/projectXYZToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectXYZToVector.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _layers_Layer_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../../../../layers/Layer.js */ "./node_modules/@arcgis/core/layers/Layer.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../../../../layers/graphics/hydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js");
/* harmony import */ var _renderers_support_rendererConversion_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../../../../renderers/support/rendererConversion.js */ "./node_modules/@arcgis/core/renderers/support/rendererConversion.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _symbols_support_defaults3D_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../../../symbols/support/defaults3D.js */ "./node_modules/@arcgis/core/symbols/support/defaults3D.js");
/* harmony import */ var _symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../../../../symbols/support/symbolConversion.js */ "./node_modules/@arcgis/core/symbols/support/symbolConversion.js");
/* harmony import */ var _defaultSymbolComplexity_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ./defaultSymbolComplexity.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/defaultSymbolComplexity.js");
/* harmony import */ var _DisplayFeatureLimit_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ./DisplayFeatureLimit.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/DisplayFeatureLimit.js");
/* harmony import */ var _ElevationQuery_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ./ElevationQuery.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationQuery.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/enums.js");
/* harmony import */ var _featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ./featureExpressionInfoUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js");
/* harmony import */ var _Graphics3DFeatureStore_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ./Graphics3DFeatureStore.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js");
/* harmony import */ var _Graphics3DGraphicCreationContext_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ./Graphics3DGraphicCreationContext.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DGraphicCreationContext.js");
/* harmony import */ var _Graphics3DSymbolCreationContext_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ./Graphics3DSymbolCreationContext.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolCreationContext.js");
/* harmony import */ var _Graphics3DSymbolFactory_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ./Graphics3DSymbolFactory.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js");
/* harmony import */ var _Graphics3DWebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ./Graphics3DWebStyleSymbol.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DWebStyleSymbol.js");
/* harmony import */ var _GraphicStateTracking_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ./GraphicStateTracking.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicStateTracking.js");
/* harmony import */ var _graphicUtils_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ./graphicUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js");
/* harmony import */ var _interfaces_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ./interfaces.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/interfaces.js");
/* harmony import */ var _Loadable_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ./Loadable.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Loadable.js");
/* harmony import */ var _SpatialIndex2D_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ./SpatialIndex2D.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js");
/* harmony import */ var _support_StageLayerElevationProvider_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ../support/StageLayerElevationProvider.js */ "./node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js");
/* harmony import */ var _support_extentUtils_js__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ../../support/extentUtils.js */ "./node_modules/@arcgis/core/views/3d/support/extentUtils.js");
/* harmony import */ var _support_PropertiesPool_js__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ../../support/PropertiesPool.js */ "./node_modules/@arcgis/core/views/3d/support/PropertiesPool.js");
/* harmony import */ var _webgl_engine_lib_GridLocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ../../webgl-engine/lib/GridLocalOriginFactory.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ../../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ../../webgl-engine/lib/VertexAttribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");
/* harmony import */ var _webgl_engine_lib_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ../../webgl-engine/lib/WebGLLayer.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js");
/* harmony import */ var _layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ../../../layers/support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ../../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ../../../../geometry/Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/* harmony import */ var _symbols_LabelSymbol3D_js__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ../../../../symbols/LabelSymbol3D.js */ "./node_modules/@arcgis/core/symbols/LabelSymbol3D.js");
/* harmony import */ var _symbols_TextSymbol_js__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ../../../../symbols/TextSymbol.js */ "./node_modules/@arcgis/core/symbols/TextSymbol.js");
/* harmony import */ var _symbols_WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ../../../../symbols/WebStyleSymbol.js */ "./node_modules/@arcgis/core/symbols/WebStyleSymbol.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var Ae;const je=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_29__.c)(),Le=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__.create)(),Oe="esri.views.3d.layers.graphics.Graphics3DCore",Ve=_core_Logger_js__WEBPACK_IMPORTED_MODULE_11__["default"].getLogger(Oe);let Fe=Ae=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_13__["default"]{get _viewSpatialReference(){return this.owner.view.spatialReference}get spatialIndex(){return this._spatialIndex||(this._spatialIndex=new _SpatialIndex2D_js__WEBPACK_IMPORTED_MODULE_59__.SpatialIndex2D({objectIdField:this.owner.layer?.objectIdField,spatialReference:this._viewSpatialReference,hasZ:!!this.hasZ,hasM:!!this.hasM}),this._spatialIndex.setup(Array.from(this.graphics3DGraphics.values()))),this._spatialIndex.update(),this._spatialIndex}get numberOfGraphics(){return this._numberOfGraphics}get effectiveUpdatePolicy(){return null!=this.currentRenderer&&"dictionary"===this.currentRenderer.type?_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC:this._forcedUpdatePolicy??this.preferredUpdatePolicy}get featureStore(){return this._featureStore}get initializePromise(){return this._initializePromise}get scaleVisibility(){return this._scaleVisibility}get elevationAlignment(){return this._elevationAlignment}get objectStates(){return this._objectStates}get filterVisibility(){return this._filterVisibility}get updating(){return!!(this._graphicsWaitingForSymbol.size>0||this.running||this._elevationAlignment?.updating||this._scaleVisibility?.updating||this._filterVisibility?.updating||this._rendererChangeAbortController||this._elevationInfoChangeAbortController||this._updatingPendingLoadedGraphicsChange||this._frameTask.updating||this._loadingSymbols>0)}get running(){return this._pendingUpdates.size>0||!!this._spatialIndex?.updating}get suspendedOrOutsideOfView(){return this.owner.suspended||!!this.owner.suspendInfo?.outsideOfView}get updatingRemaining(){return this.updating?this._pendingUpdates.size+.1*(this._spatialIndex?.updatingRemaining||0)+.1*(this._elevationAlignment?.updatingRemaining||0):0}get displayFeatureLimit(){const e=this.owner&&this.owner.view&&this.owner.view.qualitySettings,t=e?.graphics3D.minTotalNumberOfFeatures??0,i=e?.graphics3D.maxTotalNumberOfFeatures??0,r=e?.graphics3D.maxNumberOfDrawCalls??0,s=e?.graphics3D.maxTotalNumberOfVertices??0,a=this.averageSymbolComplexity,n=Math.max(1,a?.verticesPerFeature??1),o=a&&a.drawCallsPerFeature>0&&r>0?r/a.drawCallsPerFeature:i,l=Math.ceil(s/n),h=Math.max(t,Math.min(i,l,o)),d=this._get("displayFeatureLimit");return d&&d.maximumTotalNumberOfVertices===s&&d.averageSymbolComplexity===a&&d.maximumNumberOfFeatures===h?d:new _DisplayFeatureLimit_js__WEBPACK_IMPORTED_MODULE_46__.DisplayFeatureLimit(s,h,a)}get averageSymbolComplexity(){const e=(0,_defaultSymbolComplexity_js__WEBPACK_IMPORTED_MODULE_45__.averageSymbolComplexities)(this._symbolComplexities),t=this._get("averageSymbolComplexity");return 0===e.numComplexities||null!=t&&(e.estimated&&(t.verticesPerFeature>=e.verticesPerFeature||t.verticesPerCoordinate>=e.verticesPerCoordinate||t.drawCallsPerFeature>=e.drawCallsPerFeature)||t.verticesPerFeature===e.verticesPerFeature&&t.verticesPerCoordinate===e.verticesPerCoordinate&&t.drawCallsPerFeature===e.drawCallsPerFeature)?t:e}get usedMemory(){const e=null!=this.averageSymbolComplexity&&this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel*this._numberOfGraphics:0,t=this._getSymbolComplexitiesUsed().reduce(((e,t)=>e+t.memory.resourceBytes),0),i=this.owner.view._stage.renderer,r=this.owner.view.basemapTerrain.overlayManager.renderer,s=Array.from(this._symbols.values()).reduce(((e,t)=>e+(t?.symbolLayers.reduce(((e,t)=>e+(t?.materials.reduce(((e,t)=>e+i.getMemoryForMaterial(t)+r.getMemoryForMaterial(t)),0)??0)),0)??0)),0);return this._usedMemory+e+t+s}get usedMemoryPerGraphic(){if(this._usedMemory&&this._numberOfGraphics){const e=this._numberOfGraphics/(this._numberOfGraphics+Math.max(this._pendingAdds,this._pendingRemoves));return this._usedMemory/this._numberOfGraphics*e}if(null!=this.averageSymbolComplexity){const e=this.labelsEnabled?this.averageSymbolComplexity.memory.bytesPerFeatureLabel:0;return this.averageSymbolComplexity.memory.bytesPerFeature+e}return 0}get unprocessedMemoryEstimate(){return(this._pendingAdds-this._pendingRemoves)*this.usedMemoryPerGraphic}get _symbolComplexities(){return this.currentRenderer?this._getSymbolComplexitiesUsedOrRenderer(this.currentRenderer):this._getSymbolComplexitiesUsed()}get visible(){return this._visible}_getConvertedSymbol(e){if("web-style"===e.type)return e.clone();const t=this._symbolConversionCache.get(e.id);if(null!=t)return t;const i=(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_44__.to3D)(e,{geometryType:this.layer?.geometryType??void 0,retainId:!0,hasLabelingContext:this._hasLabelingContext(e)}),r=i.symbol||null;return null==r&&i.error&&Ve.error(i.error.message),this._symbolConversionCache.set(e.id,r),r}_getSymbolComplexitiesUsedOrRenderer(e){if(null==e)return[];const t=e.getSymbols(),i="backgroundFillSymbol"in e?e.backgroundFillSymbol:null;if(!i&&!t?.length)return[];const r=[],s=this._getSymbolComplexityUsedOrRenderer(i);null!=s&&r.push(s);for(const a of t){const e=this._getSymbolComplexityUsedOrRenderer(a);null!=e&&r.push(e)}return r}_getSymbolComplexityUsedOrRenderer(e){if(null==e)return null;const t=this._symbols.get(e.id);if(null!=t)return t.complexity;const i=this._getConvertedSymbol(e);return null!=i?(0,_defaultSymbolComplexity_js__WEBPACK_IMPORTED_MODULE_45__.defaultSymbolComplexity)(i):null}_getSymbolComplexitiesUsed(){const e=[];return this._symbols.forEach((t=>{null!=t&&e.push(t.complexity)})),e}get _objectIdField(){return this.layer.objectIdField}constructor(e){super(e),this._propertiesPool=new _support_PropertiesPool_js__WEBPACK_IMPORTED_MODULE_62__.PropertiesPool({computedExtent:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_69__["default"]},this),this.computedExtent=null,this.currentRenderer=null,this.rendererHasGeometryOperations=!1,this._graphicStateTracking=null,this.graphics3DGraphics=new Map,this.stageLayer=null,this.stage=null,this._graphicsDrapedUids=new Set,this._graphicsBySymbol=new Map,this._symbolConversionCache=new Map,this._symbols=new Map,this._graphicsWithoutSymbol=new Map,this._graphicsWaitingForSymbol=new Map,this._graphicsUpdateId=0,this._frameTask=_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__.ImmediateTask,this._suspendSymbolCleanup=!1,this._arcadeOnDemand=null,this._rendererChangeAbortController=null,this._elevationInfoChangeAbortController=null,this._initializeAbortController=null,this._scaleVisibility=null,this._filterVisibility=null,this._spatialIndex=null,this.extentPadding=0,this._updatingPendingLoadedGraphicsChange=null,this._featureStore=null,this._deconflictor=null,this._labeler=null,this._objectStates=null,this._viewElevationProvider=null,this._stageLayerElevationProvider=null,this._sharedSymbolResourcesOwnerHandle=null,this._whenGraphics3DGraphicRequests={},this._pendingUpdates=new Map,this._numberOfGraphics=0,this._numberOfGraphicsProvidingElevation=0,this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this._loadingSymbols=0,this._pendingUpdatesPool=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_20__["default"]({allocator:e=>e||new ke,deallocator:e=>(e.clear(),e)}),this._symbolWarningLogged=!1,this._geometryWarningLogged=!1,this._objectIdInvisibleSet=new Set,this._whenSymbolRemoved=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_20__["default"],this.preferredUpdatePolicy=_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC,this._forcedUpdatePolicy=null,this.elevationFeatureExpressionEnabled=!0,this.owner=null,this.layer=null,this.graphicSymbolSupported=!0,this.getRenderingInfoWithoutRenderer=!1,this.setUidToIdOnAdd=!0,this.hasZ=null,this.hasM=null,this._usedMemory=0,this._visible=!1,this._startCreateGraphics=!1,this.symbolCreationContext=new _Graphics3DSymbolCreationContext_js__WEBPACK_IMPORTED_MODULE_52__.Graphics3DSymbolCreationContext(e.owner.view.resourceController.scheduler,((e,t)=>this._frameTask.schedule(e,t)))}initialize(){this._featureStore=new _Graphics3DFeatureStore_js__WEBPACK_IMPORTED_MODULE_50__.Graphics3DFeatureStore({objectIdField:this.owner.layer?.objectIdField,hasZ:!!this.hasZ,hasM:!!this.hasM,viewSpatialReference:this._viewSpatialReference,featureSpatialReference:this.owner.featureSpatialReference,getSpatialIndex:()=>this.spatialIndex,forEach:e=>this.graphics3DGraphics.forEach(e)});const e=(e,t,i)=>this.spatialIndex.queryGraphicUIDsInExtent(e,t,i),{componentFactories:t}=this;if(null!=t.elevationAlignment){const i=t.elevationAlignment(this,e);this._elevationAlignment=i}if(null!=t.scaleVisibility){const i=t.scaleVisibility(this,e);this._scaleVisibility=i}if(null!=t.filterVisibility){const e=t.filterVisibility({featureStore:this._featureStore,getFeatureCount:()=>this.graphics3DGraphics.size,updateFeatureVisibilities:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.FILTER,e((0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_38__.getObjectId)(t.graphic,this._objectIdField))))),setAllFeaturesVisibility:e=>this.modifyGraphics3DGraphicVisibilities((t=>t.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.FILTER,e))),clearFeaturesVisibility:()=>this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.FILTER,!0)))});this._filterVisibility=e}if(null!=t.deconflictor){const e=t.deconflictor(this);this._deconflictor=e}if(null!=t.labeler&&null!=this._scaleVisibility){const e=t.labeler(this,this._scaleVisibility);this._labeler=e}if(null!=t.objectStates){const e=t.objectStates(this);this._objectStates=e}this._initializeAbortController=new AbortController,this._initializePromise=this._initializeAsync()}async _initializeAsync(){const e=this._initializeAbortController?.signal,t=this.owner.view;this._viewElevationProvider=new _ElevationQuery_js__WEBPACK_IMPORTED_MODULE_47__.ViewElevationProvider(this._viewSpatialReference,t),this._initializeStage(t,this.layer.uid);const i=t.sharedSymbolResources;this.symbolCreationContext.sharedResources=i,this._sharedSymbolResourcesOwnerHandle=i.addGraphicsOwner(this.owner),null!=this.currentRenderer&&(this.symbolCreationContext.renderer=this.currentRenderer),this.symbolCreationContext.stage=this.stage,this.symbolCreationContext.streamDataRequester=i.streamDataRequester,this.symbolCreationContext.renderCoordsHelper=t.renderCoordsHelper,this.symbolCreationContext.layer=this.layer,this.symbolCreationContext.graphicsCoreOwner=this.owner,this.symbolCreationContext.localOriginFactory=new _webgl_engine_lib_GridLocalOriginFactory_js__WEBPACK_IMPORTED_MODULE_63__.GridLocalOriginFactory(t.renderSpatialReference),this.symbolCreationContext.elevationProvider=t.elevationProvider,this.symbolCreationContext.notifyGraphicGeometryChanged=e=>this.notifyGraphicGeometryChanged(e),this.symbolCreationContext.notifyGraphicVisibilityChanged=e=>this.notifyGraphicVisibilityChanged(e);const r=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_49__.extractExpressionInfo)(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);if(this.symbolCreationContext.featureExpressionInfoContext=await (0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_49__.createContext)(r,this._viewSpatialReference,e,Ve),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.throwIfAborted)(e),this.symbolCreationContext.screenSizePerspectiveEnabled=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this.symbolCreationContext.physicalBasedRenderingEnabled=!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled,this.symbolCreationContext.skipHighSymbolLods=!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods,"drapeSourceType"in this.owner){const{owner:e}=this;this.symbolCreationContext.drapeSourceRenderer=t.basemapTerrain.overlayManager.registerGeometryDrapeSource(e),this.addHandles((0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_17__.makeHandle)((()=>t.basemapTerrain.overlayManager.unregisterDrapeSource(e))))}this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>this.suspendedOrOutsideOfView),(()=>this._frameTask.reschedule((()=>this._updateLayerVisibility())))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>[this.layer?.screenSizePerspectiveEnabled,this.owner.view?.screenSizePerspectiveEnabled]),(()=>{const e=t.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled;e!==this.symbolCreationContext.screenSizePerspectiveEnabled&&(this.symbolCreationContext.screenSizePerspectiveEnabled=e,this._labeler?.reset(),this.recreateAllGraphicsAndSymbols())})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>this.owner.slicePlaneEnabled),(e=>this._slicePlaneEnabledChange(!!e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>this.owner.view.state?.rasterPixelRatio),(()=>this._pixelRatioChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>!!this.owner.view.qualitySettings?.physicallyBasedRenderingEnabled),(e=>this._physicalBasedRenderingChange(e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>!!this.owner.view.qualitySettings?.graphics3D?.skipHighSymbolLods),(e=>this._skipHighSymbolLoDsChange(e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.when)((()=>t.basemapTerrain?.tilingScheme),(e=>{if(e.spatialReference.equals(this.symbolCreationContext.overlaySR)||null==t.basemapTerrain.spatialReference||(this.symbolCreationContext.overlaySR=t.basemapTerrain.spatialReference),this.hasHandles("loaded-graphics"))this.recreateAllGraphics();else{const e=()=>this.owner?.loadedGraphics;this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.on)(e,"change",(e=>{this._graphicsCollectionChanged(e),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}),{onListenerAdd:()=>{this.recreateAllGraphics(),this._signalUpdatingDuringAsyncLoadedGraphicsChange()}})],"loaded-graphics")}}),{initial:!0}),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>this.effectiveUpdatePolicy),(e=>{null!=this.stageLayer&&(this.stageLayer.updatePolicy=e),this.symbolCreationContext.isAsync=this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC,e===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC&&this.runTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__.noBudget)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.syncAndInitial)]),this._frameTask=t.resourceController.scheduler.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__.TaskPriority.GRAPHICS_CORE,this),this.layer&&"featureReduction"in this.layer&&this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.watch)((()=>this.layer.featureReduction),(()=>this._deconflictor.featureReductionChange()))),this.notifyChange("averageSymbolComplexity"),this.rendererChange(this.owner.renderer).catch((()=>{})),this._initializeAbortController=null}_abortInitialize(){this._initializeAbortController&&(this._initializeAbortController.abort(),this._initializeAbortController=null)}destroy(){this._abortInitialize(),this._abortRendererChange(),this._abortElevationInfoChange(),this._frameTask.remove(),this._frameTask=_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__.ImmediateTask,this.owner.view?.deconflictor?.removeGraphicsOwner(this),this.owner.view?.labeler?.removeGraphicsOwner(this),this._elevationAlignment=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._elevationAlignment),this._scaleVisibility=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._scaleVisibility),this._filterVisibility=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._filterVisibility),this._deconflictor=null,this._labeler=null,this._objectStates=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._objectStates),this.clear(),this._featureStore=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._featureStore),this._updatingPendingLoadedGraphicsChange=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.removeMaybe)(this._updatingPendingLoadedGraphicsChange),this._graphicStateTracking=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._graphicStateTracking),this.stage&&(this.stageLayer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this.stageLayer),this.stage=null),this._set("owner",null);for(const e in this._whenGraphics3DGraphicRequests)this._whenGraphics3DGraphicRequests[e].reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_16__["default"]("graphic:layer-destroyed","Layer has been destroyed"));this._whenGraphics3DGraphicRequests=null,this._sharedSymbolResourcesOwnerHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.removeMaybe)(this._sharedSymbolResourcesOwnerHandle),this._propertiesPool=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._propertiesPool),this._pendingUpdatesPool=null,this._symbolConversionCache.clear(),this._objectIdInvisibleSet.clear(),this._spatialIndex=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(this._spatialIndex)}clear(){this._objectStates?.allGraphicsDeleted(),null!=this._graphicStateTracking&&this._graphicStateTracking.allGraphicsDeleted(),this.graphics3DGraphics.forEach((e=>e.destroy())),this._spatialIndex?.clear(),this.graphics3DGraphics.clear(),this._numberOfGraphics=0,this._usedMemory=0,this._updateLayerVisibility(),this._symbols.forEach(_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe),this._symbols.clear(),this._graphicsBySymbol.clear(),this._graphicsWithoutSymbol.clear(),this._graphicsWaitingForSymbol.clear(),this._pendingUpdates.clear(),this._pendingUpdatesPool.clear(),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1,this.notifyChange("updating"),this.notifyChange("running"),this.notifyChange("updatingRemaining"),this._featureStore.events.emit("changed")}_initializeStage(e,t){this.stage=e._stage,this.stageLayer=new _webgl_engine_lib_WebGLLayer_js__WEBPACK_IMPORTED_MODULE_66__.WebGLLayer(this.stage,{pickable:!this.suspendedOrOutsideOfView,updatePolicy:this.effectiveUpdatePolicy},t);const i=this.stageLayer.events;i.on("transformationChanged",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on("shaderTransformationChanged",(e=>this.notifyGraphicGeometryChanged(e.graphicUid))),i.on("visibilityChanged",(e=>this.notifyGraphicVisibilityChanged(e.graphicUid))),i.on("geometryAdded",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on("geometryRemoved",(e=>this.notifyGraphicGeometryChanged(e.object.graphicUid))),i.on("attributesChanged",(e=>(0,_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_65__.affectsGeometry)(e.attribute)&&this.notifyGraphicGeometryChanged(e.object.graphicUid)))}notifyGraphicGeometryChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicGeometry(t)}notifyGraphicVisibilityChanged(e){if(null==this._graphicStateTracking||null==e)return;const t=this.graphics3DGraphics.get(e);t&&this._graphicStateTracking.updateGraphicVisibility(t)}_updateLayerVisibility(){const e=this.displayFeatureLimit.maximumNumberOfFeatures,t=this._numberOfGraphics>e*ze,i=!this.suspendedOrOutsideOfView&&!t;i!==this._visible&&(this._visible=i,i?(this.stageLayer.pickable=!0,this.updateAllGraphicsVisibility()):(this.stageLayer.pickable=!1,this._hideAllGraphics()),this._updateStageLayerVisibility())}_updateStageLayerVisibility(){this.stageLayer.visible=this._visible&&(null==this.layer.opacity||this.layer.opacity>0)}getGraphics3DGraphicById(e){return null!=e?this.graphics3DGraphics.get(e):void 0}getGraphics3DGraphicByObjectId(e){return this.owner.layer?.objectIdField?this._findGraphics3DGraphicByObjectId(e):null}_getGraphicObjectID(e,t=this.owner.layer?.objectIdField){return (0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_38__.getObjectId)(e,t)}get graphics3DGraphicsByObjectID(){const e=this.owner.layer?.objectIdField;if(!e)return;const t=new Map;return this.graphics3DGraphics.forEach((i=>{if(!i)return;const r=i.graphic,s=this._getGraphicObjectID(r,e);null!=s&&t.set(s,i)})),t}get labelsEnabled(){return!(!this._labeler||!this._labeler.layerLabelsEnabled())}async updateLabelingInfo(e){const t=this._deconflictor&&this._deconflictor.labelingInfoChange(e),i=this._labeler&&this._labeler.labelingInfoChange(e);await Promise.allSettled([t,i])}updateVisibilityInfo(){this._deconflictor&&this._deconflictor.labelingInfoChange(),this._labeler&&this._labeler.visibilityInfoChange()}get symbolUpdateType(){if(this._pendingUpdates.size>0)return"unknown";let e=0,t=0;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_18__.someMap)(this._symbols,((i,r)=>{if(null!=i){const s=i.getFastUpdateStatus();if(s.loading>0)return!0;this._graphicsBySymbol.has(r)&&(t+=s.fast,e+=s.slow)}return!1}))?"unknown":t>=0&&0===e?"fast":e>=0&&0===t?"slow":"mixed"}runTask(e){if(this._frameTask.processQueue(e),this._applyPendingUpdates(e),this.notifyChange("running"),this.running||this.notifyChange("updating"),this.notifyChange("updatingRemaining"),!e.hasProgressed)return _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_68__.Task.YIELD}setObjectIdVisibility(e,t){t?this._objectIdInvisibleSet.delete(e):this._objectIdInvisibleSet.add(e);const i=this._findGraphics3DGraphicByObjectId(e);null!=i&&this._updateUserVisibility(i)}_findGraphics3DGraphicByObjectId(e){return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_18__.findInMap)(this.graphics3DGraphics,(t=>this._getGraphicObjectID(t.graphic)===e))}_updateUserVisibility(e){if(null==e)return!1;const t=e.graphic,i=this._getGraphicObjectID(t),r=t.visible&&!this.owner.suspended&&(null==i||!this._objectIdInvisibleSet.has(i));return e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.USER,r)}_whenGraphics3DGraphic(e){const t=this.graphics3DGraphics.get(e.uid);if(t)return Promise.resolve(t);const i=this._whenGraphics3DGraphicRequests[e.uid];if(i)return i.promise;const r=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.createResolver)();return this._whenGraphics3DGraphicRequests[e.uid]=r,r.promise}async _boundsForGraphics3DGraphic(e,t){const i=this._viewSpatialReference,r=this.owner.view.renderSpatialReference,s=this.owner.view.basemapTerrain.spatialReference,a=(e,t,s)=>(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_31__.projectBuffer)(e,r,t,e,i,t,s),n=(e,t,r)=>(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_31__.projectBuffer)(e,s,t,e,i,t,r),o=this._viewElevationProvider?{service:this._viewElevationProvider,useViewElevation:null!=t&&!!t.useViewElevation,minDemResolution:null!=t?t.minDemResolution:null,minDemResolutionForPoints:this.owner.view.resolution}:null,l=await e.getProjectedBoundingBox(a,n,o,t?.signal);if(!l)return null;const h=l.boundingBox;if(l.requiresDrapedElevation){const e=this.symbolCreationContext.elevationProvider;if(e){(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__.center)(h,je);const t=e.getElevation(je[0],je[1],0,i,"ground")??0;h[2]=Math.min(h[2],t),h[5]=Math.max(h[5],t)}}return{boundingBox:h,screenSpaceObjects:l.screenSpaceObjects}}async whenGraphicBounds(e,t){await (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_22__.whenOnce)((()=>this.owner?.loadedGraphics));const i=this.owner.layer?.objectIdField,r=this.owner.loadedGraphics.find((t=>t===e||null!=i&&null!=t.attributes&&e.attributes&&t.attributes[i]===e.attributes[i]));if(!r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_16__["default"]("internal:graphic-not-part-of-view","Graphic is not part of this view");const s=await this._whenGraphics3DGraphic(r);return this._boundsForGraphics3DGraphic(s,t)}computeAttachmentOrigin(e,t){const i=this.graphics3DGraphics.get(e.uid);if(!i)return null;const r=i.computeAttachmentOrigin();if(0===r.render.num&&0===r.draped.num)return null;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__.s)(Me,0,0,0);let s=0;if(r.render.num>0){if(!(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__.projectVectorToVector)(r.render.origin,this.symbolCreationContext.renderCoordsHelper.spatialReference,We,t))return null;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__.g)(Me,Me,We),s++}if(r.draped.num>0){const[e,i]=r.draped.origin,a=this._viewElevationProvider.getElevation(e,i,"ground")??0;if((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__.s)(We,e,i,a),!(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_32__.projectVectorToVector)(We,this._viewElevationProvider.spatialReference,We,t))return null;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__.g)(Me,Me,We),s++}return s>1&&(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_28__.i)(Me,Me,1/s),new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_70__["default"]({x:Me[0],y:Me[1],z:Me[2],spatialReference:t})}getSymbolLayerSize(e,t){const i=this._symbols.get(e.id);if(null==i)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_16__["default"]("internal:symbol-not-part-of-view","Symbol is not part of this view");const r=e.symbolLayers.indexOf(t);if(-1===r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_16__["default"]("internal:missing-symbol-layer","Symbol layer is not in symbol");const s=i.getSymbolLayerSize(r);if(null==s)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_16__["default"]("internal:missing-size","Symbol layer has no valid size");return s}_graphicsCollectionChanged(e){this._startCreateGraphics&&(this.add(e.added),this.remove(e.removed))}graphicUpdateHandler(e){const t=e.graphic.uid,i=this.graphics3DGraphics.get(t);if(null!=i||null!=this._graphicsWithoutSymbol.get(t))switch(e.property){case"visible":this._graphicUpdateVisibleHandler(i);break;case"geometry":this._graphicUpdateGeometryHandler(i,e);break;case"symbol":this._graphicUpdateSymbolHandler(i,e);break;case"attributes":break;case"origin-transform":this._graphicUpdateTransformHandler(i,e)}}_graphicUpdateGeometryHandler(e,t){this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>null!=t.newValue&&null!=e&&e.graphics3DSymbol.updateGeometry(e,t.newValue)));const i=t.graphic.geometry;null!=i&&this._expandComputedExtent(i)}_graphicUpdateTransformHandler(e,t){const i=t.graphic.geometry;this._graphicUpdateGeometryOrTransformHandler(e,t,(()=>null!=t.newValue&&null!=e&&null!=i&&e.graphics3DSymbol.updateTransform(e,i.spatialReference,t.newValue,t.action)))}_graphicUpdateGeometryOrTransformHandler(e,t,i){if(null!=t.graphic.geometry)if(null!=e)i()||this._recreateGraphic(e.graphic);else{const e=t.graphic.symbol?.id;if(e){const t=this._symbols.get(e);if(null!=t&&t.loadStatus===_Loadable_js__WEBPACK_IMPORTED_MODULE_58__.LoadStatus.LOADING)return}this._recreateGraphic(t.graphic)}else this._recreateGraphic(t.graphic)}_graphicUpdateSymbolHandler(e,t){const i=t.graphic,r=null!=e?e.graphics3DSymbol:null!=t.oldValue?this._symbols.get(t.oldValue.id):null;if(null==r||null==t.newValue)return void this._recreateGraphic(i);const s=r.symbol,a=this._getConvertedSymbol(t.newValue);if(null!=a&&(a.type!==s.type||"web-style"===a.type)||"web-style"===s.type)return void this._recreateGraphic(i);const n=this._graphicsBySymbol.get(s.id);if(n&&1!==n.size)return void this._recreateGraphic(i);const o=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_27__.diff)(s,a);if(null==o)return void this._updateSymbolMapping(s.id,a);const l={diff:o,graphics3DGraphicPatches:[],symbolStatePatches:[]};if(r.prepareSymbolPatch(l),!(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_27__.isEmpty)(l.diff))return void this._recreateGraphic(i);const h=this._getRenderingInfo(i);if(null==h)return void this._recreateGraphic(i);const d=r.extentPadding;for(const p of l.symbolStatePatches)p();if(d!==r.extentPadding&&this._recomputeExtentPadding(),null!=e)for(const p of l.graphics3DGraphicPatches)p(e,h);this._updateSymbolMapping(s.id,a)}_graphicUpdateVisibleHandler(e){this._updateUserVisibility(e)&&(this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty())}recreateGraphics(e){this._suspendSymbolCleanup=!0,this.remove(e),this.add(e),this._suspendSymbolCleanup=!1,this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC&&this._cleanupSymbols()}_recreateGraphic(e){this.recreateGraphics([e])}_beginGraphicUpdate(e){const t=this._graphicsUpdateId;return this._graphicsUpdateId++,this._graphicsWaitingForSymbol.set(e.uid,t),1===this._graphicsWaitingForSymbol.size&&this.notifyChange("updating"),t}_endGraphicUpdate(e){e&&(this._graphicsWaitingForSymbol.delete(e.uid),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange("updating")))}_recomputeExtentPadding(){let e=0;this._symbols.forEach((t=>{null!=t&&(e=Math.max(e,t.extentPadding))})),this._set("extentPadding",e)}_expandComputedExtent(e){const t=Le,i=e.spatialReference;(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_38__.computeAABB)(e,t);const r=this._viewSpatialReference,s=Ae.tmpVec;if((0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_36__.equals)(i,r)||(0,_geometry_projection_projectXYZToVector_js__WEBPACK_IMPORTED_MODULE_33__.projectXYZToVector)(t[0],t[1],0,i,s,r)&&(t[0]=s[0],t[1]=s[1],(0,_geometry_projection_projectXYZToVector_js__WEBPACK_IMPORTED_MODULE_33__.projectXYZToVector)(t[3],t[4],0,i,s,r),t[3]=s[0],t[4]=s[1]),!(isFinite(t[0])&&isFinite(t[3])&&isFinite(t[1])&&isFinite(t[4])))return;const a=this.computedExtent;let n=null;const o=isFinite(t[2])&&isFinite(t[5]),l=o&&(null==a?.zmin||t[2]<a.zmin),h=o&&(null==a?.zmax||t[5]>a.zmax);if(a){(t[0]<a.xmin||t[1]<a.ymin||t[3]>a.xmax||t[4]>a.ymax||l||h)&&(n=this._propertiesPool.get("computedExtent"),n.xmin=Math.min(t[0],a.xmin),n.ymin=Math.min(t[1],a.ymin),n.xmax=Math.max(t[3],a.xmax),n.ymax=Math.max(t[4],a.ymax),n.spatialReference=r)}else n=this._propertiesPool.get("computedExtent"),n.xmin=t[0],n.ymin=t[1],n.xmax=t[3],n.ymax=t[4],n.spatialReference=r;n&&(l&&(n.zmin=t[2]),h&&(n.zmax=t[5]),this._set("computedExtent",n))}_abortElevationInfoChange(){this._elevationInfoChangeAbortController&&(this._elevationInfoChangeAbortController.abort(),this._elevationInfoChangeAbortController=null)}async elevationInfoChange(){this._abortElevationInfoChange();const e=new AbortController;this._elevationInfoChangeAbortController=e;const t=(0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_49__.extractExpressionInfo)(this.layer.elevationInfo,this.elevationFeatureExpressionEnabled);this.symbolCreationContext.featureExpressionInfoContext=await (0,_featureExpressionInfoUtils_js__WEBPACK_IMPORTED_MODULE_49__.createContext)(t,this._viewSpatialReference,e.signal,Ve),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.throwIfAborted)(e.signal),this._elevationInfoChangeAbortController=null,this._labeler?.elevationInfoChange(),this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("elevationInfo",t)?t.forEach((e=>{const t=e.graphic,i=e.labelLayers;for(const r of i){r.graphics3DSymbolLayer.updateGraphicElevationContext(t,r)}})):this._recreateSymbol(i)})),this.updateStageLayerElevationProvider(),this._elevationAlignment?.elevationInfoChange()}updateStageLayerElevationProvider(){this._stageLayerElevationProvider?(this.layer.elevationInfo&&"relative-to-scene"===this.layer.elevationInfo.mode||0===this._numberOfGraphicsProvidingElevation)&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.disposeMaybe)(this._stageLayerElevationProvider)):(!this.layer.elevationInfo||this.layer.elevationInfo&&"relative-to-scene"!==this.layer.elevationInfo.mode)&&this._numberOfGraphicsProvidingElevation>0&&(this._stageLayerElevationProvider=new _support_StageLayerElevationProvider_js__WEBPACK_IMPORTED_MODULE_60__.StageLayerElevationProvider({layer:this.layer,stageLayer:this.stageLayer,view:this.owner.view}),this.owner.view.elevationProvider.register("scene",this._stageLayerElevationProvider))}_clearSymbolsAndGraphics(){this.clear(),null!=this._filterVisibility&&this._filterVisibility.clear(),this._labeler?.reset(),this._deconflictor?.clear(),this._elevationAlignment?.clear(),this.stageLayer?.invalidateSpatialQueryAccelerator(),this._stageLayerElevationProvider&&(this.owner.view.elevationProvider.unregister(this._stageLayerElevationProvider),this._stageLayerElevationProvider=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.disposeMaybe)(this._stageLayerElevationProvider))}startCreateGraphics(){this._startCreateGraphics=!0,this.recreateAllGraphics()}recreateAllGraphics(){this._recreateAllGraphics(!1)}recreateAllGraphicsAndSymbols(){this._recreateAllGraphics(!0)}_recreateAllGraphics(e=!1){if(!this._startCreateGraphics)return;const{loadedGraphics:t,view:i}=this.owner,r=i.basemapTerrain.tilingScheme&&t?.length?t.toArray():null;!e&&r||this._clearSymbolsAndGraphics(),this.symbolCreationContext.screenSizePerspectiveEnabled=this.owner.view.screenSizePerspectiveEnabled&&!!this.layer.screenSizePerspectiveEnabled,this.symbolCreationContext.slicePlaneEnabled=!!this.owner.slicePlaneEnabled,this._set("computedExtent",null),r&&(e?this.add(r):this.recreateGraphics(r))}_recreateSymbol(e){const t=this._graphicsBySymbol.get(e),i=[];t&&(t.forEach(((e,t)=>{const r=e.usedMemory;this._conditionalRemove(e,t),this._spatialIndex?.remove(e),i.push(e.graphic),e.destroy(),this._removeGraphics3DGraphic(t,r),this._updateLayerVisibility(),this._featureStore.events.emit("changed")})),this._graphicsBySymbol.set(e,new Map));const r=this._symbols.get(e);(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(r),this._symbols.delete(e),this.add(i)}_recreateGraphicsForSymbol(e){const t=this._graphicsBySymbol.get(e);if(t){const e=[];t.forEach((t=>e.push(t.graphic))),this.recreateGraphics(e)}}_conditionalRemove(e,t){this._graphicsDrapedUids.delete(t),this._objectStates?.removeGraphic(e),this._labeler?.removeGraphic(e),this._deconflictor?.removeGraphic(e),null!=this._graphicStateTracking&&this._graphicStateTracking.removeGraphic(e)}add(e){e&&0!==e.length&&(this.owner.view.basemapTerrain?.tilingScheme?(this._updatePolicyForGraphics(e)===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC?this._addDelayed(e):this._addImmediate(e),this.notifyChange("updating")):Ve.error("#add()","Cannot add graphics before terrain surface has been initialized"))}_updatePolicyForGraphics(e){if(this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC&&("mesh"===this.layer.geometryType||null==this.layer.geometryType))for(const t of e)if(null!=t.geometry&&"mesh"===t.geometry.type&&!t.geometry.loaded)return _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC;return this.effectiveUpdatePolicy}_addImmediate(e){this._geometryWarningLogged=!1,this._symbolWarningLogged=!1;for(const t of e)this._addGraphic(t,this._getRenderingInfo(t,Ve),_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC);this._cleanupSymbols(),this._labeler&&(this.owner.view.labeler.setDirty(),this._cleanupSymbols()),this.owner.view.deconflictor.setDirty()}_addDelayed(e){for(const t of e){const e=t.uid;let i=this._pendingUpdates.get(e);i?i.add?i.state!==Te.NEW&&i.abortController?.abort():this._pendingAdds++:(i=this._pendingUpdatesPool.pushNew(),this._pendingAdds++,this._pendingUpdates.set(e,i)),i.add=t}this.notifyChange("running"),this.notifyChange("updatingRemaining")}remove(e){this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC?this._removeDelayed(e):this._removeImmediate(e),this.notifyChange("updating")}_removeImmediate(e){for(const t of e)this._removeGraphic(t);this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_removeDelayed(e){for(const t of e){const e=t.uid,i=this._pendingUpdates.get(e);if(i)i.add&&(i.remove?i.add=null:this._pendingUpdates.delete(e),i.state===Te.LOADING&&i.abortController?.abort(),this._pendingAdds--);else{const i=this._pendingUpdatesPool.pushNew();i.remove=t,this._pendingUpdates.set(e,i),this._pendingRemoves++,this._applyPendingRemovesFirst=!0}}0===this._pendingUpdates.size&&this._finishPendingUpdates(),this.notifyChange("running"),this.notifyChange("updatingRemaining")}_finishPendingUpdates(){this._pendingUpdatesPool.clear(),this._cleanupSymbols(),(this._pendingAdds||this._pendingRemoves)&&Ve.warn("pendingAdds/Removes in inconsistent state!"),this._pendingAdds=0,this._pendingRemoves=0,this._applyPendingRemovesFirst=!1}_applyPendingUpdates(e){if(this._geometryWarningLogged=!1,this._symbolWarningLogged=!1,0===this._pendingUpdates.size&&this._spatialIndex?.updating)return this._spatialIndex.update(),void e.madeProgress();if(this._applyPendingRemovesFirst){this._applyPendingRemovesFirst=!1;for(const[t,i]of this._pendingUpdates){if(e.done){this._applyPendingRemovesFirst=!0;break}if(i.remove&&!i.add&&(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,this._pendingUpdates.delete(t),0===this._pendingRemoves))break}}for(const[t,i]of this._pendingUpdates){if(e.done)break;i.add&&i.state===Te.NEW&&this._processPendingUpdateNew(i);let r=this.effectiveUpdatePolicy;if(!i.remove||i.add&&i.state!==Te.READY||(this._pendingRemoves--,e.madeProgress(),this._removeGraphic(i.remove),i.remove=null,r=_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.SYNC),i.add)switch(i.state){case Te.READY:this._addGraphic(i.add,i.renderingInfo,r),i.add=null,this._pendingAdds--,e.madeProgress();break;case Te.REJECTED:i.add=null,this._pendingAdds--;case Te.LOADING:}null==i.remove&&null==i.add&&this._pendingUpdates.delete(t)}0===this._pendingUpdates.size&&(this._finishPendingUpdates(),this.notifyChange("running"))}_processPendingUpdateNew(e){if(!e.add)return void(e.state=Te.READY);const t=e.add.geometry;null==t||"mesh"!==t.type||t.loaded?this._processPendingUpdateNewRenderingInfo(e):this._processPendingUpdateNewMesh(e,t)}async _processPendingUpdateNewMesh(e,t){e.state=Te.LOADING,e.abortController=new AbortController;const i=e.abortController.signal;try{await t.load({signal:i})}catch(r){return this._processPendingUpdateNewError(e,r)}e.abortController=null,this._processPendingUpdateNewRenderingInfo(e)}_processPendingUpdateNewError(e,t){e.abortController=null,(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.isAbortError)(t)?e.state=Te.NEW:e.state=Te.REJECTED}async _processPendingUpdateNewRenderingInfo(e){if(null==this.layer.renderer||"dictionary"!==this.layer.renderer.type)return e.renderingInfo=this._getRenderingInfo(e.add,Ve),void(e.state=Te.READY);e.state=Te.LOADING,e.abortController=new AbortController;let t=null;try{t=await this._getRenderingInfoAsync(e.add,{signal:e.abortController.signal})}catch(i){return e.abortController=null,void((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.isAbortError)(i)?e.state=Te.NEW:e.state=Te.REJECTED)}null==t?.symbol?(Ve&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),e.renderingInfo=null):e.renderingInfo=t,e.state=Te.READY}_addGraphic(e,t,i){if(this._graphicsWithoutSymbol.set(e.uid,e),null==t?.symbol||!(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_38__.hasGeometry)(e))return;if(null!=this.stage.renderView.objectAndLayerIdRenderHelper&&this.setUidToIdOnAdd){const t=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_42__.isBasemapLayer)(this.owner.view.map,this.layer.uid);this.stage.renderView.objectAndLayerIdRenderHelper.setUidToObjectAndLayerId(e.objectId,e.uid,this.layer.id,this.layer.uid,!!this.layer.popupEnabled&&!t&&(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_67__.hasPopupTemplate)(this.layer,this.owner.view.popup?.defaultPopupTemplateEnabled))}const r=t.symbol,s=this.getOrCreateGraphics3DSymbol(r,t.renderer);if(null==s)return;this._expandComputedExtent(e.geometry);const a=this._beginGraphicUpdate(e),n=new _Graphics3DGraphicCreationContext_js__WEBPACK_IMPORTED_MODULE_51__.Graphics3DGraphicCreationContext(e,t,this.layer);let o=!1;const l=e=>{e===s.symbol.id&&(o=!0)};this._whenSymbolRemoved.push(l);const h=()=>{if(--this._loadingSymbols,this.destroyed)return;this._whenSymbolRemoved.removeUnordered(l);if(this._graphicsWaitingForSymbol.get(e.uid)!==a||o||s.destroyed||this.graphicSymbolSupported&&e.symbol&&e.symbol.id!==s.symbol.id)--s.referenced,this._cleanupSymbols();else{const t=this._createGraphics3DGraphic(s,n);this._spatialIndex&&null!=t&&this._spatialIndex.add(t),--s.referenced,this._endGraphicUpdate(e)}this._featureStore.events.emit("changed"),this._labeler&&this.owner.view.labeler.setDirty()},d=t=>{--this._loadingSymbols,this.destroyed||(this._whenSymbolRemoved.removeUnordered(l),o||((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.isAbortError)(t)?this.add([e]):s.destroyed||this._endGraphicUpdate(e)))};++this._loadingSymbols,i===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC?s.load((()=>this._frameTask.schedule(h)),(e=>this._frameTask.schedule((()=>d(e))))):s.load(h,d)}_removeGraphic(e){const t=e.uid,i=this.graphics3DGraphics.get(t);if(i){i.graphics3DSymbol.onRemoveGraphic(i);const e=i.usedMemory,r=i.isElevationSource;this._conditionalRemove(i,t),this._spatialIndex?.remove(i);const s=i.graphics3DSymbol.symbol.id;this._graphicsBySymbol.get(s)?.delete(t),this._graphicsWithoutSymbol.delete(t),this._removeGraphics3DGraphic(t,e,r),i.destroy(),this._featureStore.events.emit("changed")}else this._graphicsWithoutSymbol.delete(t),this._graphicsWaitingForSymbol.delete(t),0===this._graphicsWaitingForSymbol.size&&(this._cleanupSymbols(),this.notifyChange("updating"))}_hasLabelingContext(e){if(e instanceof _symbols_LabelSymbol3D_js__WEBPACK_IMPORTED_MODULE_71__["default"]||e instanceof _symbols_TextSymbol_js__WEBPACK_IMPORTED_MODULE_72__["default"]){const t=this.symbolCreationContext.layer;return!!t.labelingInfo&&t.labelingInfo.some((t=>t.symbol===e))}return!1}_hasValidSymbolCreationContext(e){return!(e instanceof _symbols_LabelSymbol3D_js__WEBPACK_IMPORTED_MODULE_71__["default"]&&!this._hasLabelingContext(e))||(Ve.error("LabelSymbol3D is only valid as part of a LabelClass. Using LabelSymbol3D as a renderer symbol is not supported."),!1)}_getRenderingInfo(e,t){const i=e.geometry;if(null==i)return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_30__.canProjectWithoutEngine)(i.spatialReference,this._viewSpatialReference))return t&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has incompatible spatial reference and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const r=this.rendererHasGeometryOperations?(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_39__.hydrateGraphic)(e,this.layer):e;let s;if(this.owner.getRenderingInfo&&(this.getRenderingInfoWithoutRenderer||null!=this.currentRenderer))s=this.owner.getRenderingInfo(r,this.currentRenderer,this._arcadeOnDemand);else{s={symbol:r.symbol||(0,_symbols_support_defaults3D_js__WEBPACK_IMPORTED_MODULE_43__.getDefaultSymbol3D)(r.geometry)}}return null==s?.symbol?(t&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,t.warn(`Graphic in layer ${this.layer.id} has no symbol and will not render`)),null):s}_getRenderingInfoAsync(e,t){if(null==e.geometry)return Ve&&!this._geometryWarningLogged&&(this._geometryWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} has no geometry and will not render`)),null;if(!this.graphicSymbolSupported&&null!=e.symbol)return Ve&&!this._symbolWarningLogged&&(this._symbolWarningLogged=!0,Ve.warn(`Graphic in layer ${this.layer.id} is not allowed to have a symbol, use a renderer instead`)),null;const i=this.rendererHasGeometryOperations?(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_39__.hydrateGraphic)(e,this.layer):e;return this.owner.getRenderingInfoAsync(i,this.currentRenderer,this._arcadeOnDemand,t)}_createGraphics3DSymbol(e,t){if(!this._hasValidSymbolCreationContext(e))return null;const i=this._getConvertedSymbol(e);if(!i)return null;let r;if(null!=t&&"backgroundFillSymbol"in t&&t.backgroundFillSymbol){const e=(0,_symbols_support_symbolConversion_js__WEBPACK_IMPORTED_MODULE_44__.to3D)(t.backgroundFillSymbol,{ignoreDrivers:!0});null!=e.symbol&&"web-style"!==e.symbol.type&&"cim"!==e.symbol.type&&(r=e.symbol.symbolLayers)}const s=(0,_Graphics3DSymbolFactory_js__WEBPACK_IMPORTED_MODULE_53__.make)(i,this.symbolCreationContext,r);return s.load((()=>{const e=s.extentPadding;e>this.extentPadding&&this._set("extentPadding",e),this.notifyChange("averageSymbolComplexity")}),(()=>{})),s}getOrCreateGraphics3DSymbol(e,t){let i=this._symbols.get(e.id);return void 0===i&&(i=e instanceof _symbols_WebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_73__["default"]?new _Graphics3DWebStyleSymbol_js__WEBPACK_IMPORTED_MODULE_54__.Graphics3DWebStyleSymbol(e,(e=>this._frameTask.schedule(e)),(e=>this._createGraphics3DSymbol(e,t))):this._createGraphics3DSymbol(e,t),this._symbols.set(e.id,i)),null!=i&&++i.referenced,i}trackGraphicState(e){return null==this._graphicStateTracking&&(this._graphicStateTracking=new _GraphicStateTracking_js__WEBPACK_IMPORTED_MODULE_55__.GraphicStateTracking(this)),this._graphicStateTracking.add(e)}_addGraphics3DGraphic(e){this._usedMemory+=e.usedMemory,this.graphics3DGraphics.set(e.graphic.uid,e),this._numberOfGraphics++,e.isElevationSource&&(this._numberOfGraphicsProvidingElevation++,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_removeGraphics3DGraphic(e,t,i=!1){this._usedMemory-=t,this.graphics3DGraphics.delete(e),this._numberOfGraphics--,i&&(this._numberOfGraphicsProvidingElevation--,this.updateStageLayerElevationProvider()),this._updateLayerVisibility()}_createGraphics3DGraphic(e,t){const i=t.graphic;if(this._graphicsWithoutSymbol.delete(i.uid),!this._symbols.has(e.symbol.id))return this.add([i]),null;if(this.graphics3DGraphics.has(i.uid))return null;const r=e.createGraphics3DGraphic(t);if(null==r)return null;this._addGraphics3DGraphic(r);const s=e.symbol.id;this._graphicsBySymbol.has(s)||this._graphicsBySymbol.set(s,new Map),this._graphicsBySymbol.get(s).set(i.uid,r);if(r.isDraped&&this._graphicsDrapedUids.add(i.uid),r.centroid=null,null!=i.geometry&&"point"!==i.geometry.type&&(r.centroid=(0,_graphicUtils_js__WEBPACK_IMPORTED_MODULE_56__.computeCentroid)(i.geometry,this._viewSpatialReference)),this._updateUserVisibility(r),null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(r),null!=this._filterVisibility){const{defaultVisibility:e}=this._filterVisibility;r.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.FILTER,e),e||this._filterVisibility.reapply()}this._deconflictor?.addGraphic(r),this._labeler?.addGraphic(r),this._objectStates?.addGraphic(r),this._deconflictor&&this.owner.view.deconflictor.setInitialIconVisibilityFlag(this,r),r.initialize(this.stageLayer,this.owner),null!=this._graphicStateTracking&&this._graphicStateTracking.addGraphic(r);const a=this._whenGraphics3DGraphicRequests[i.uid];return a&&(delete this._whenGraphics3DGraphicRequests[i.uid],a.resolve(r)),r}_abortRendererChange(){this._rendererChangeAbortController&&(this._rendererChangeAbortController.abort(),this._rendererChangeAbortController=null)}async rendererChange(e){if(this._abortRendererChange(),e!==this.currentRenderer)if(this._validateRenderer(e),null==e&&this._currentRendererChange(null,!1),(0,_renderers_support_rendererConversion_js__WEBPACK_IMPORTED_MODULE_40__.isSupportedRenderer3D)(e))if(null!=e&&e.arcadeRequired){const t=new AbortController;this._rendererChangeAbortController=t;const{arcadeUtils:i}=await this._ensureArcade();(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.throwIfAborted)(t);const r=i.hasGeometryOperations(e);r&&(await i.enableGeometryOperations(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_21__.throwIfAborted)(t)),this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC?await this._frameTask.schedule((()=>this._currentRendererChange(e,r)),t.signal):this._currentRendererChange(e,r),this._rendererChangeAbortController=null}else if(this.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_64__.UpdatePolicy.ASYNC){const t=new AbortController;this._rendererChangeAbortController=t,await this._frameTask.schedule((()=>this._currentRendererChange(e,!1)),t.signal),this._rendererChangeAbortController=null}else this._currentRendererChange(e,!1);else this._currentRendererChange(e,!1)}async _ensureArcade(){return null==this._arcadeOnDemand?(this._arcadeOnDemand=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_41__.loadArcade)(),this._arcadeOnDemand):this._arcadeOnDemand}_currentRendererChange(e,t){this.currentRenderer=e,this.rendererHasGeometryOperations=t,this.symbolCreationContext.arcade=this._arcadeOnDemand;const i=this.symbolCreationContext.renderer;if(e===i)return;if(this._symbolConversionCache.clear(),null==e)return this.symbolCreationContext.renderer=null,void this.recreateAllGraphicsAndSymbols();const r=(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_27__.diff)(i,e);this._updateUnchangedSymbolMappings(r,e,i),this.symbolCreationContext.renderer=e,null!=r&&("complete"===r.type?this.recreateAllGraphicsAndSymbols():"partial"===r.type&&(this._applyRendererDiff(r,e,i)?this._labeler?.reset():this.recreateAllGraphicsAndSymbols()),this.notifyChange("averageSymbolComplexity"))}_diffHasSymbolChange(e){for(const t in e.diff)switch(t){case"visualVariables":case"defaultSymbol":case"uniqueValueInfos":break;case"uniqueValueGroups":case"authoringInfo":case"fieldDelimiter":delete e.diff[t];break;default:return!0}return!1}_applySymbolSetDiff(e,t,i){e=e||[],t=t||[];const r=[];for(const s of t){const t=this._graphicsBySymbol.get(s.id);t&&t.forEach(((a,n)=>{const o=a.graphic,l=this.layer instanceof _layers_Layer_js__WEBPACK_IMPORTED_MODULE_37__["default"]?this.layer:null,h=this._arcadeOnDemand;if(s===i.defaultSymbol&&i.getSymbol((0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_39__.hydrateGraphic)(o,l),{arcade:h})===i.defaultSymbol)return;const d=a.usedMemory;e.length||i.defaultSymbol?r.push(o):this._graphicsWithoutSymbol.set(n,o);const p=this.graphics3DGraphics.get(n);this._conditionalRemove(p,n),a.destroy(),t.delete(n),this._removeGraphics3DGraphic(n,d),this._updateLayerVisibility()})),this._whenSymbolRemoved.forAll((e=>e(s.id)))}(e.length||r.length)&&(this._graphicsWithoutSymbol.forEach((e=>r.push(e))),this._graphicsWithoutSymbol.clear(),this.add(r)),this._cleanupSymbols(),this._labeler&&this.owner.view.labeler.setDirty(),this.owner.view.deconflictor.setDirty()}_applyUniqueValueRendererDiff(e,t,i){const r=e.diff.defaultSymbol,a=e.diff.uniqueValueInfos;if(r||a){const n=a?a.added.map((e=>e.symbol)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_14__.isSome):[],o=a?a.removed.map((e=>e.symbol)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_14__.isSome):[];if(a)for(let e=0;e<a.changed.length;e++)n.push(a.changed[e].newValue.symbol),o.push(a.changed[e].oldValue.symbol);return r?(i.defaultSymbol&&o.push(i.defaultSymbol),t.defaultSymbol&&n.push(t.defaultSymbol)):i.defaultSymbol&&n.length&&o.push(t.defaultSymbol),this._applySymbolSetDiff(n,o,t),delete e.diff.defaultSymbol,delete e.diff.uniqueValueInfos,!0}return!1}_calculateUnchangedSymbolMapping(e,t,i){if("unique-value"!==t?.type||"unique-value"!==i?.type||null!=e&&"partial"!==e.type)return[];const r=e=>null!=e?e.id:null,s=e&&e.diff,a=s?.defaultSymbol,n=s&&s.uniqueValueInfos;let o;if(n)o=n.unchanged.map((e=>({oldId:r(e.oldValue.symbol),newId:r(e.newValue.symbol)})));else{o=[];for(const e of i.uniqueValueInfos??[]){const i=r(e.symbol),s=t.uniqueValueInfos?.find((t=>t.value===e.value));s&&i!==r(s.symbol)&&o.push({oldId:i,newId:r(s.symbol)})}}return!a&&i.defaultSymbol&&o.push({oldId:r(i.defaultSymbol),newId:r(t.defaultSymbol)}),o}_updateSymbolMapping(e,t){const i=null!=t&&t?"string"==typeof t?t:t.id:null;if(null==e||e===i)return;const r=this._graphicsBySymbol.get(e);this._graphicsBySymbol.delete(e),void 0!==r&&this._graphicsBySymbol.set(i,r);const s=this._symbols.get(e);if(void 0!==s&&(this._symbols.delete(e),this._symbols.set(i,s),null!=s)){const e="string"==typeof t?null:t;null!=e?s.symbol=e:s.symbol.id=i}}_updateUnchangedSymbolMappings(e,t,i){const r=this._calculateUnchangedSymbolMapping(e,t,i);for(const{oldId:s,newId:a}of r)this._updateSymbolMapping(s,a)}_applyRendererDiff(e,i,r){if(this._diffHasSymbolChange(e))return!1;if(i instanceof _renderers_UniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_9__["default"]&&r instanceof _renderers_UniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_9__["default"]&&this._applyUniqueValueRendererDiff(e,i,r)&&0===Object.keys(e.diff).length)return!0;for(const[t]of this._graphicsBySymbol){const r=this._symbols.get(t);if(null!=r)switch(r.applyRendererDiff(e,i)){case _interfaces_js__WEBPACK_IMPORTED_MODULE_57__.ApplyRendererDiffResult.RecreateSymbol:this._recreateSymbol(t);break;case _interfaces_js__WEBPACK_IMPORTED_MODULE_57__.ApplyRendererDiffResult.RecreateGraphics:this._recreateGraphicsForSymbol(t);case _interfaces_js__WEBPACK_IMPORTED_MODULE_57__.ApplyRendererDiffResult.FastUpdate:}}return!0}opacityChange(){this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged("opacity",t))),this._updateStageLayerVisibility()}_slicePlaneEnabledChange(e){e!==this.symbolCreationContext.slicePlaneEnabled&&(this.symbolCreationContext.slicePlaneEnabled=e,this.stageLayer.sliceable=e,this.forEachGraphics3DSymbol(((e,t)=>e.globalPropertyChanged("slicePlaneEnabled",t))),this._deconflictor&&this._deconflictor.slicePlaneEnabledChange(),this._labeler&&this._labeler.slicePlaneEnabledChange())}_physicalBasedRenderingChange(e){this.symbolCreationContext.physicalBasedRenderingEnabled=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("physicalBasedRenderingEnabled",t)||this._recreateSymbol(i)}))}_skipHighSymbolLoDsChange(e){this.symbolCreationContext.skipHighSymbolLods=e,this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("skipHighSymbolLods",t)||this._recreateSymbol(i)}))}_pixelRatioChange(){this.forEachGraphics3DSymbol(((e,t,i)=>{e.globalPropertyChanged("pixelRatio",t)||this._recreateSymbol(i)}))}_signalUpdatingDuringAsyncLoadedGraphicsChange(){this._updatingPendingLoadedGraphicsChange&&this._updatingPendingLoadedGraphicsChange.remove(),this._updatingPendingLoadedGraphicsChange=(0,_core_scheduling_js__WEBPACK_IMPORTED_MODULE_23__.schedule)((()=>{this._updatingPendingLoadedGraphicsChange=null}))}setClippingExtent(e,t){const i=this.symbolCreationContext.clippingExtent,r=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_35__.create)();return (0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_61__.toBoundingRect)(e,r,t)?this.symbolCreationContext.clippingExtent=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__.fromRect)((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__.create)(),r):this.symbolCreationContext.clippingExtent=null,!(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_34__.equals)(this.symbolCreationContext.clippingExtent,i)}modifyGraphics3DGraphicVisibilities(e){if(this.destroyed)return;let t=!1;this.graphics3DGraphics.forEach((i=>{e(i)&&(t=!0)})),t&&(this.owner.view.labeler?.setDirty(),this.owner.view.deconflictor?.setDirty())}forEachGraphics3DSymbol(e){for(const[t,i]of this._symbols){if(null==i)return;e(i,this._graphicsBySymbol.get(t)||He,t)}}updateAllGraphicsVisibility(){null!=this._filterVisibility&&this._filterVisibility.reapply(),this.modifyGraphics3DGraphicVisibilities((e=>{const t=this._updateUserVisibility(e),i=null!=this._scaleVisibility&&this._scaleVisibility.updateVisibility(e);return t||i}))}_hideAllGraphics(){this.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_48__.VisibilityFlag.USER,!1)))}_validateRenderer(e){const t=(0,_renderers_support_rendererConversion_js__WEBPACK_IMPORTED_MODULE_40__.validateTo3D)(e,{geometryType:this.layer?.geometryType});if(t){const e=`Renderer for layer '${this.layer.title?`${this.layer.title}, `:""}, id:${this.layer.id}' is not supported in a SceneView`;Ve.warn(e,t.message)}}_cleanupSymbols(){if(this._graphicsWaitingForSymbol.size>0||this._suspendSymbolCleanup)return;let e=!1;this._symbols.forEach(((t,i)=>{if(null==t||t.referenced>0)return;const r=this._graphicsBySymbol.get(i);r&&0!==r.size||(this._graphicsBySymbol.delete(i),this._symbols.delete(i),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_19__.destroyMaybe)(t),e=!0)})),e&&(this._recomputeExtentPadding(),this.notifyChange("averageSymbolComplexity"))}get test(){return{snapshotInternals:()=>({graphics:[...this.graphics3DGraphics.keys()].sort(),symbols:[...this._symbols.keys()].sort(),graphicsBySymbol:[...this._graphicsBySymbol.keys()].sort().map((e=>({symbolId:e,graphics:[...this._graphicsBySymbol.get(e).keys()].sort()}))),graphicsWithoutSymbol:[...this._graphicsWithoutSymbol.keys()].sort(),graphicsDrapedUids:[...this._graphicsDrapedUids].sort(),pendingUpdates:this._pendingUpdates}),symbols:this._symbols,filterVisibility:this._filterVisibility,numPending:this._pendingUpdates.size,forceUpdatePolicy:e=>{this._forcedUpdatePolicy=e}}}get performanceInfo(){return{visible:this.graphics3DGraphics.size,missing:this._graphicsWithoutSymbol.size,pending:this._pendingUpdates.size}}};var Te;Fe.tmpVec=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_29__.c)(),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"computedExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"currentRenderer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"rendererHasGeometryOperations",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_frameTask",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"_viewSpatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_rendererChangeAbortController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_elevationInfoChangeAbortController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_initializeAbortController",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_elevationAlignment",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_scaleVisibility",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_filterVisibility",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_initializePromise",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_spatialIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"extentPadding",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_updatingPendingLoadedGraphicsChange",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_featureStore",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_deconflictor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_labeler",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_objectStates",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_loadingSymbols",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"preferredUpdatePolicy",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_forcedUpdatePolicy",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"effectiveUpdatePolicy",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"elevationFeatureExpressionEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"owner",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"graphicSymbolSupported",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"getRenderingInfoWithoutRenderer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"componentFactories",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"setUidToIdOnAdd",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"featureStore",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"initializePromise",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"scaleVisibility",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"elevationAlignment",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"objectStates",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"filterVisibility",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"running",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"suspendedOrOutsideOfView",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0,dependsOn:[]})],Fe.prototype,"updatingRemaining",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0})],Fe.prototype,"displayFeatureLimit",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({readOnly:!0,dependsOn:[]})],Fe.prototype,"averageSymbolComplexity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"hasZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)({constructOnly:!0})],Fe.prototype,"hasM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_24__.property)()],Fe.prototype,"_objectIdField",null),Fe=Ae=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_26__.subclass)(Oe)],Fe),function(e){e[e.NEW=0]="NEW",e[e.LOADING=1]="LOADING",e[e.READY=2]="READY",e[e.REJECTED=3]="REJECTED"}(Te||(Te={}));class ke{constructor(){this.add=null,this.renderingInfo=null,this.state=Te.NEW,this.abortController=null,this.remove=null}clear(){this.add=null,this.renderingInfo=null,this.state=Te.NEW,this.abortController=null,this.remove=null}}const ze=10,Me=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_29__.c)(),We=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_29__.c)(),He=new Map;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DElevationAlignment: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _ExtentSet_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./ExtentSet.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/ExtentSet.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let p=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._dirtyExtents=new _ExtentSet_js__WEBPACK_IMPORTED_MODULE_9__.ExtentSet,this._globalDirty=!1,this._averageExtentUpdateSize=0,this._dirtyGraphicsSet=new Set,this._updateElevation=!1,this.graphicsCoreOwner=null,this.graphicsCore=null,this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"]}initialize(){const e=this.elevationProvider,t=this.graphicsCoreOwner.view.resourceController.scheduler;this.addHandles([e.on("elevation-change",(e=>this._elevationChanged(e))),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.watch)((()=>this.graphicsCoreOwner.suspended),(()=>this._suspendedChange())),t.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_11__.TaskPriority.ELEVATION_ALIGNMENT,this)])}destroy(){this._dirtyGraphicsSet.clear(),this.graphicsCoreOwner=null,this.graphicsCore=null,this.queryGraphicUIDsInExtent=null,this.elevationProvider=null}clear(){this._dirtyGraphicsSet.clear(),this.notifyChange("updating")}_suspendedChange(){!0===this.graphicsCoreOwner.suspended?this._updateElevation=!1:!1===this.graphicsCoreOwner.suspended&&this._updateElevation&&(this._globalDirty=!0,this.notifyChange("updating"))}elevationInfoChange(){this._globalDirty=!0,this.notifyChange("updating")}get updating(){return this.running}get running(){return this._dirtyGraphicsSet.size>0||this._dirtyExtents&&!this._dirtyExtents.empty||this._globalDirty}get updatingRemaining(){return this._dirtyGraphicsSet.size+this._dirtyExtents.size*this._averageExtentUpdateSize}runTask(e){for(this._globalDirty&&(this._markAllGraphicsElevationDirty(),this._globalDirty=!1,e.madeProgress()),e.run((()=>this._dirtyExtents.merge(e)));this.running&&!e.done;)this._updateDirtyGraphics(e),this._updateDirtyExtents(e);this.notifyChange("updating")}_updateDirtyGraphics(e){const t=this.graphicsCoreOwner.view.renderCoordsHelper,i=this.graphicsCore.effectiveUpdatePolicy===_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_10__.UpdatePolicy.ASYNC;for(const r of this._dirtyGraphicsSet.keys()){const s=this.graphicsCore.getGraphics3DGraphicById(r);if(this._dirtyGraphicsSet.delete(r),null!=s&&(s.alignWithElevation(this.elevationProvider,t,i),this.graphicsCoreOwner.view.deconflictor.setDirty(),e.madeProgress()),e.done)return}}_updateDirtyExtents(e){for(;!this._dirtyExtents.empty&&!e.done;){const t=this._dirtyExtents.pop(),i=this.elevationProvider.spatialReference;this.events.emit("invalidate-elevation",{extent:t,spatialReference:i});const r=this._dirtyGraphicsSet.size;this.queryGraphicUIDsInExtent(t,i,(e=>{const t=this.graphicsCore.getGraphics3DGraphicById(e);null!=t&&t.needsElevationUpdates()&&this._dirtyGraphicsSet.add(e)})),this._averageExtentUpdateSize=.1*(this._dirtyGraphicsSet.size-r)+.9*this._averageExtentUpdateSize,e.madeProgress()}}_markAllGraphicsElevationDirty(){this._dirtyExtents.clear(),this._dirtyGraphicsSet.clear(),this.graphicsCore.graphics3DGraphics.forEach(((e,t)=>this._dirtyGraphicsSet.add(t)))}_elevationChanged(e){if("scene"===e.context&&(!this.graphicsCore.layer.elevationInfo||"relative-to-scene"!==this.graphicsCore.layer.elevationInfo.mode))return;const{extent:t,spatialReference:i}=e;if(this.graphicsCoreOwner.suspended){if(!this._updateElevation){const e=this.graphicsCore.computedExtent;e&&t[2]>e.xmin&&t[0]<e.xmax&&t[3]>e.ymin&&t[1]<e.ymax&&(this._updateElevation=!0)}this.events.emit("invalidate-elevation",{extent:t,spatialReference:i})}else t[0]===-1/0?this._globalDirty=!0:this._dirtyExtents.add(t),this.notifyChange("updating")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],p.prototype,"graphicsCoreOwner",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],p.prototype,"graphicsCore",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],p.prototype,"queryGraphicUIDsInExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],p.prototype,"elevationProvider",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],p.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],p.prototype,"updatingRemaining",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.3d.layers.graphics.Graphics3DElevationAlignment")],p);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureStore.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DFeatureStore: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/* harmony import */ var _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../layers/graphics/OptimizedFeature.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js");
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../layers/graphics/OptimizedGeometry.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js");
/* harmony import */ var _layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../layers/graphics/data/optimizedFeatureQueryEngineAdapter.js */ "./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.create)();let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t){super(t),this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"],this.hasZ=null,this.hasM=null,this.objectIdField=null,this.featureAdapter={getAttribute:(t,e)=>"graphic"in t?t.graphic.attributes[e]:_layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.getAttribute(t,e),getAttributes:t=>"graphic"in t?t.graphic.attributes:_layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.getAttributes(t),getObjectId:t=>"graphic"in t?(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_10__.getObjectId)(t.graphic,this.objectIdField)??void 0:_layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.getObjectId(t),getGeometry:t=>"graphic"in t?t.getAsOptimizedGeometry(this.hasZ,this.hasM):_layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.getGeometry(t),getCentroid:(t,e)=>{if("graphic"in t){let r=null;null!=t.centroid?r=t.centroid:"point"===t.graphic.geometry.type&&(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_8__.projectPoint)(t.graphic.geometry,l,this.viewSpatialReference)&&(r=l);const o=new Array(2+(e.hasZ?1:0)+(e.hasM?1:0));return null==r?(o[0]=0,o[1]=0,o[2]=0,o[3]=0):(o[0]=r.x,o[1]=r.y,e.hasZ&&(o[2]=r.hasZ?r.z:0),e.hasM&&(o[e.hasZ?3:2]=r.hasM?r.m:0)),new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_12__["default"]([],o)}return _layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.getCentroid(t,e)},cloneWithGeometry:(t,e)=>"graphic"in t?new _layers_graphics_OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_11__.OptimizedFeature(e,this.featureAdapter.getAttributes(t),null,this.featureAdapter.getObjectId(t)):_layers_graphics_data_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_13__.optimizedFeatureQueryEngineAdapter.cloneWithGeometry(t,e)}}forEachInBounds(t,e){this.getSpatialIndex().forEachInBounds(t,e)}forEachBounds(t,e){const r=this.getSpatialIndex();for(const o of t){const t=this.featureAdapter.getObjectId(o);null!=r.getBounds(t,u)&&e(u)}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"getSpatialIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"forEach",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"hasZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"hasM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"objectIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"viewSpatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],d.prototype,"featureSpatialReference",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.graphics.Graphics3DFeatureStore")],d);const l={type:"point",x:0,y:0,hasZ:!1,hasM:!1,spatialReference:null};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DFrustumVisibility: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _support_FrustumExtentIntersection_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/FrustumExtentIntersection.js */ "./node_modules/@arcgis/core/views/3d/support/FrustumExtentIntersection.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const h=1.2;let u=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this.suspended=!1,this._extent=null,this._extentIntersectionDirty=!0,this._isVisibleBelowSurfaceInternal=!1,this.graphicsCoreOwner=null,this.updating=!0}initialize(){const{graphicsCoreOwner:e}=this;this._extentIntersection=new _support_FrustumExtentIntersection_js__WEBPACK_IMPORTED_MODULE_9__.FrustumExtentIntersection({renderCoordsHelper:e.view.renderCoordsHelper});const t=e.view,n=t.basemapTerrain,o=t.resourceController.scheduler;this.addHandles([t.on("resize",(()=>this._viewChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)((()=>t.state.camera),(()=>this._viewChange()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.sync),o.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__.TaskPriority.FRUSTUM_VISIBILITY,this),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)((()=>n.visibleElevationBounds),(()=>this._elevationBoundsChange()))]),"local"===t.viewingMode?this._isVisibleBelowSurface=!0:this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.watch)((()=>[n.baseOpacity,n.wireframe,t.map?.ground?.navigationConstraint?.type]),(()=>this._updateIsVisibleBelowSurface()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.initial)])}destroy(){this._set("graphicsCoreOwner",null),this._extent=null,this._extentIntersection=null}_setDirty(){this.updating||this._set("updating",!0)}setExtent(e){this._extent=e,this._extentIntersectionDirty=!0,this._setDirty()}_viewChange(){this._setDirty()}_elevationBoundsChange(){this._setDirty(),this._extentIntersectionDirty=!0}set _isVisibleBelowSurface(e){this._isVisibleBelowSurfaceInternal=e,this._setDirty(),this._extentIntersectionDirty=!0}_updateIsVisibleBelowSurface(){const e=this.graphicsCoreOwner.view,t=e.basemapTerrain,s="local"===e.viewingMode,i="none"===e.map.ground?.navigationConstraint?.type;this._isVisibleBelowSurface=s||!t.opaque||i}_updateExtentIntersection(){if(!this._extentIntersectionDirty)return;this._extentIntersectionDirty=!1;const e=this.graphicsCoreOwner.view;let t;if(this._isVisibleBelowSurfaceInternal)t=-.3*(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__.getReferenceEllipsoid)(e.spatialReference).radius;else{const{min:s,max:i}=e.basemapTerrain.visibleElevationBounds;t=s-Math.max(1,(i-s)*(h-1))}this._extentIntersection.update(this._extent,e.spatialReference,t)}get running(){return this.updating}runTask(e){if(this._set("updating",!1),!this._extent)return this._set("suspended",!1),_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_10__.Task.YIELD;this._updateExtentIntersection();const t=this.graphicsCoreOwner.view.frustum,s=(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_8__.getReferenceEllipsoid)(this.graphicsCoreOwner.view.spatialReference).radius;this._set("suspended",!this._extentIntersection.isVisibleInFrustum(t,s)),e.madeProgress()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],u.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],u.prototype,"graphicsCoreOwner",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],u.prototype,"updating",void 0),u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.graphics.Graphics3DFrustumVisibility")],u);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DObjectStateSet: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _webgl_engine_lib_Object3DStateSet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../webgl-engine/lib/Object3DStateSet.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class e{constructor(e,i){this.stateType=e,this.objectIdField=i,this.objectStateSet=new _webgl_engine_lib_Object3DStateSet_js__WEBPACK_IMPORTED_MODULE_0__.Object3DStateSet,this.ids=new Set,this.paused=!1}hasGraphic(t){if(this.objectIdField){const e=t.graphic.attributes[this.objectIdField];return this.ids.has(e)}return this.ids.has(t.graphic.uid)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js":
/*!**************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DObjectStates: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _Graphics3DObjectStateSet_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graphics3DObjectStateSet.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStateSet.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t){this._graphicsCore=t,this._stateSets=new Array}destroy(){this.reset(),this._stateSets=null}reset(){this._stateSets&&(this._stateSets.forEach((t=>t.objectStateSet.removeAll())),this._stateSets.length=0)}acquireSet(s,a){const i=new _Graphics3DObjectStateSet_js__WEBPACK_IMPORTED_MODULE_1__.Graphics3DObjectStateSet(s,a);this._stateSets.push(i);const h=(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__.makeHandle)((()=>this.releaseSet(i)));return{set:i,handle:h}}releaseSet(t){t.objectStateSet.removeAll();const e=this._stateSets?this._stateSets.indexOf(t):-1;-1!==e&&this._stateSets.splice(e,1)}_addObjectStateSet(t,e){t.addObjectStateSet(e.stateType,e.objectStateSet)}_removeObjectStateSet(t,e){t.removeObjectState(e.objectStateSet)}setUid(t,e){t.ids.add(e);const s=this._graphicsCore.graphics3DGraphics.get(e);s&&this._addObjectStateSet(s,t)}setUids(t,e){e.forEach((e=>this.setUid(t,e)))}setObjectIds(t,e){e.forEach((e=>t.ids.add(e))),this._initializeSet(t)}addGraphic(t){this._stateSets.forEach((e=>{!e.paused&&e.hasGraphic(t)&&this._addObjectStateSet(t,e)}))}removeGraphic(t){this._stateSets.forEach((e=>{e.hasGraphic(t)&&this._removeObjectStateSet(t,e)}))}allGraphicsDeleted(){this._stateSets&&this._stateSets.forEach((t=>t.objectStateSet.removeAll()))}_initializeSet(t){const e=this._graphicsCore.graphics3DGraphics;t.objectIdField?e.forEach((e=>{e&&t.hasGraphic(e)&&this._addObjectStateSet(e,t)})):t.ids.forEach((s=>{const a=e.get(s);a&&this._addObjectStateSet(a,t)}))}get test(){return{states:this._stateSets}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DPointSymbol: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _Graphics3DCalloutSymbolLayerFactory_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Graphics3DCalloutSymbolLayerFactory.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCalloutSymbolLayerFactory.js");
/* harmony import */ var _Graphics3DLineCalloutSymbolLayer_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Graphics3DLineCalloutSymbolLayer.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DLineCalloutSymbolLayer.js");
/* harmony import */ var _Graphics3DSymbol_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Graphics3DSymbol.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbol.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _Graphics3DSymbol_js__WEBPACK_IMPORTED_MODULE_5__.Graphics3DSymbol{constructor(r,o,t){super(r,o,t),this._calloutSymbolLayer=null,this.symbol.hasVisibleCallout()&&(this._calloutSymbolLayer=(0,_Graphics3DCalloutSymbolLayerFactory_js__WEBPACK_IMPORTED_MODULE_3__.make)(this.symbol,o))}async doLoad(o){const a=this._calloutSymbolLayer?(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.result)(this._calloutSymbolLayer.load()):null;try{await super.doLoad(o),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.throwIfAborted)(o)}catch(l){throw this._calloutSymbolLayer?.abortLoad(),l}a&&await a}destroy(){super.destroy(),this._calloutSymbolLayer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.destroyMaybe)(this._calloutSymbolLayer)}createGraphics3DGraphic(r,o){const t=super.createGraphics3DGraphic(r,o);if(null!=this._calloutSymbolLayer&&null!=t){const o=this._createCalloutGraphic(r);o&&t.setCalloutGraphic(o)}return t}globalPropertyChanged(r,o){return!!super.globalPropertyChanged(r,o)&&(!this._calloutSymbolLayer||this._calloutSymbolLayer.globalPropertyChanged(r,o,(r=>r.calloutLayer)))}updateGeometry(r,o){const t=super.updateGeometry(r,o);if(t&&this._calloutSymbolLayer){const t=r.calloutLayer;if(t)return this._calloutSymbolLayer.updateGeometry(t,o)}return t}_createCalloutGraphic(r){const o=r.renderingInfo;return r.renderingInfo=new _Graphics3DLineCalloutSymbolLayer_js__WEBPACK_IMPORTED_MODULE_4__.LineCalloutSymbolLayerRenderingInfo(o.renderer,o.symbol),this._calloutSymbolLayer.createGraphics3DGraphic(r)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js":
/*!*****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js ***!
  \*****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Graphics3DScaleVisibility: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingRect.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingRect.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/enums.js");
/* harmony import */ var _support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../support/layerViewUtils.js */ "./node_modules/@arcgis/core/views/support/layerViewUtils.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.views.3d.layers.graphics.Graphics3DScaleVisibility");let y=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._scaleRangeActive=!1,this._layerScaleRangeVisibilityQuery=!1,this._extent=null,this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_8__.UpdatingHandles,this.graphicsCoreOwner=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null,this.basemapTerrain=null,this.layerScaleEnabled=!0,this.suspended=!1,this._dirty=!0}initialize(){this.updateScaleRangeActive();const e=this.graphicsCoreOwner.view.resourceController.scheduler;this.addHandles(e.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_13__.TaskPriority.SCALE_VISIBILITY,this)),this._updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this.layerMinMaxScaleChangeHandler()))}destroy(){this._updatingHandles.destroy(),this.removeHandles(),this._dirty=!1,this._extent=null,this.graphicsCoreOwner=null,this.layer=null,this.queryGraphicUIDsInExtent=null,this.graphicsCore=null,this.basemapTerrain=null}get updating(){return this._dirty||this._updatingHandles.updating}_setDirty(){this._dirty=!0}setExtent(e){const i=this.graphicsCoreOwner.view.spatialReference,t=this.graphicsCoreOwner.view.basemapTerrain.spatialReference;if(i===t)this._extent=e??null;else{const r=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)();(0,_geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.projectBoundingRect)(e,i,r,t)?this._extent=r:this._extent=null}this._setDirty()}scaleRangeActive(){return this._scaleRangeActive}updateScaleRangeActive(){const e=this.layer,i=e.effectiveScaleRange;let t=this.layerScaleEnabled&&null!=i&&g(i.minScale,i.maxScale);e.labelingInfo&&!t&&(t=e.labelingInfo.some((e=>e&&g(e.minScale??0,e.maxScale??0))));const r=this._scaleRangeActive!==t;return this._scaleRangeActive=t,t&&!this.hasHandles(b)&&this.basemapTerrain?(this.addHandles(this.basemapTerrain.on("scale-change",(e=>this._scaleUpdateHandler(e))),b),this.layerScaleEnabled&&this.addHandles(this.basemapTerrain.on("tiles-visibility-changed",(()=>this._setDirty())),b)):!t&&this.hasHandles(b)&&this.removeHandles(b),r}get running(){return!(!this.graphicsCoreOwner.view.basemapTerrain||!this.updating)}runTask(e){const i=this.graphicsCoreOwner.view.basemapTerrain;if(this._extent&&i&&i.ready&&this._scaleRangeActive&&this.layerScaleEnabled){if(this._layerScaleRangeVisibilityQuery)return _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_13__.Task.YIELD;{this._layerScaleRangeVisibilityQuery=!0;const{minScale:e,maxScale:t}=this.layer.effectiveScaleRange;i.queryVisibleScaleRange(this._extent,e,t,(e=>this._finishUpdate(e)))}}else this._finishUpdate(!0);e.madeProgress()}_finishUpdate(e){this._layerScaleRangeVisibilityQuery=!1,this._set("suspended",!e),this._dirty=!1}_visibleAtLayerScale(e){const i=this.layer.effectiveScaleRange;return!this.layerScaleEnabled||(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_12__.scaleBoundsPredicate)(e,i.minScale||0,i.maxScale||0)}_visibleAtLabelScale(e,i){return (0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_12__.scaleBoundsPredicate)(e,i.minScale||0,i.maxScale||0)}_graphicScale(e){let i;if(null!=e.centroid?i=e.centroid:null!=e.graphic.geometry&&"point"===e.graphic.geometry.type&&(i=e.graphic.geometry),i){return this.graphicsCoreOwner.view.basemapTerrain?this.graphicsCoreOwner.view.basemapTerrain.getScale(i):1}return null}_graphicVisible(e){if(!this.layerScaleEnabled)return!0;const i=this._graphicScale(e);return this._visibleAtLayerScale(i)}updateVisibility(e){if(this._scaleRangeActive){const i=this._graphicVisible(e);return e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityFlag.SCALE_RANGE,i)}return!1}updateGraphicLabelScaleVisibility(e){if(!this._scaleRangeActive)return!1;if(!e.labelLayers||0===e.labelLayers.length)return!1;const i=this._graphicScale(e),t=this._updateLabelScaleVisibility(e,i);return t&&(this.graphicsCoreOwner.view.deconflictor.setDirty(),this.graphicsCoreOwner.view.labeler.setDirty()),t}_updateLabelScaleVisibility(e,i){if(!e.labelLayers||0===e.labelLayers.length)return!1;const t=e.labelLayers[0]._labelClass;if(null!=t?.minScale&&null!=t.maxScale){const r=this._visibleAtLabelScale(i,t);if(e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityGroup.LABEL,_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityFlag.SCALE_RANGE,r))return!0}return!1}_scaleUpdateHandler(e){if(this._setDirty(),!this.graphicsCore.visible)return;const i=e.extent,t=e.scale,r=this._visibleAtLayerScale(t);let s=!1;const a=this.graphicsCoreOwner.view.spatialReference,n=e.spatialReference;if(null==n)return void u.error("scaleUpdate: Internal error, no SpatialReference given for tiles");const h=!n.equals(a);if(h){if(!(0,_geometry_projection_projectBoundingRect_js__WEBPACK_IMPORTED_MODULE_9__.projectBoundingRect)(i,n,_,a))return void u.error("scaleUpdate: Internal error, cannot project AABR from "+n+" to wkid "+a)}const p=h?_:i;this.queryGraphicUIDsInExtent(p,a,(e=>{const a=this.graphicsCore.getGraphics3DGraphicById(e);if(null==a)return;const l=a.centroid;null!=l&&(i[0]>l.x||i[1]>l.y||i[2]<l.x||i[3]<l.y)||(a.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityFlag.SCALE_RANGE,r)&&(s=!0),this._updateLabelScaleVisibility(a,t)&&(s=!0))})),s&&(this.graphicsCoreOwner.view.deconflictor.setDirty(),this.graphicsCoreOwner.view.labeler.setDirty())}layerMinMaxScaleChangeHandler(){this.updateScaleRangeActive()&&!this._scaleRangeActive?this.graphicsCore.modifyGraphics3DGraphicVisibilities((e=>e.setVisibilityFlag(_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityGroup.GRAPHIC,_enums_js__WEBPACK_IMPORTED_MODULE_11__.VisibilityFlag.SCALE_RANGE,!0))):this._scaleRangeActive&&this.graphicsCore.updateAllGraphicsVisibility(),this._setDirty()}};function g(e,i){return e>0||i>0}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"graphicsCoreOwner",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"queryGraphicUIDsInExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"graphicsCore",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"basemapTerrain",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],y.prototype,"layerScaleEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],y.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],y.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],y.prototype,"_dirty",void 0),y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.graphics.Graphics3DScaleVisibility")],y);const b="terrain-events",_=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js":
/*!***************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbolFactory.js ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   make: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _Graphics3DPointSymbol_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Graphics3DPointSymbol.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DPointSymbol.js");
/* harmony import */ var _Graphics3DSymbol_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graphics3DSymbol.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DSymbol.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,i,n){return"point-3d"===t.type?new _Graphics3DPointSymbol_js__WEBPACK_IMPORTED_MODULE_0__.Graphics3DPointSymbol(t,i,n):new _Graphics3DSymbol_js__WEBPACK_IMPORTED_MODULE_1__.Graphics3DSymbol(t,i,n)}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/SpatialIndex2D.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SpatialIndex2D: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/libs/rbush/PooledRBush.js */ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(t){super(t),this._index=new _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_8__.PooledRBush(9,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-csp-restrictions")?t=>({minX:t.extent[0],minY:t.extent[1],maxX:t.extent[2],maxY:t.extent[3]}):[".extent[0]",".extent[1]",".extent[2]",".extent[3]"]),this._missing=new Set,this._boundsByFeature=new Map,this.spatialReference=null,this.hasZ=null,this.hasM=null,this.objectIdField=null,this.updating=!1}setup(t){this._addMany(t)}destroy(){this._missing.clear(),this._index=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._index),this._boundsByFeature.clear(),this._boundsByFeature=null}update(){this._missing.size>0&&(this._addMany(Array.from(this._missing.values())),this.updating=!1,this._missing.clear())}get updatingRemaining(){return this._missing.size}queryGraphicUIDsInExtent(t,e,s){null!=e&&e.equals(this.spatialReference)&&(u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>s(t.graphic.uid))))}add(t){this._missing.add(t),this.updating=!0}remove(t){if(this._missing.delete(t))return void(this.updating=this._missing.size>0);this._index.remove(t);const e=(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_10__.getObjectId)(t.graphic,this._get("objectIdField"));null!=e&&this._boundsByFeature.delete(e)}_addMany(t){if(0===t.length)return;const e=this._get("objectIdField");for(const s of t){s.computeExtent(this.spatialReference);const t=(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_10__.getObjectId)(s.graphic,e);null!=t&&this._boundsByFeature.set(t,s.extent)}this._index.load(t)}clear(){this._index.clear(),this._missing.clear(),this._boundsByFeature.clear(),this.updating=!1}forEachInBounds(t,e){u.minX=t[0],u.minY=t[1],u.maxX=t[2],u.maxY=t[3],this.update(),this._index.search(u,(t=>{e(t)}))}getBounds(t,e){this.update();const s=this._boundsByFeature.get(t);return s?(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.fromRect)(e,s):null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"spatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"hasZ",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"hasM",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"objectIdField",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],d.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],d.prototype,"updatingRemaining",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.graphics.SpatialIndex2D")],d);const u={minX:0,minY:0,maxX:0,maxY:0};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/StageLayerElevationProvider.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StageLayerElevationProvider: () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../symbols/support/unitConversionUtils.js */ "./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js");
/* harmony import */ var _webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../webgl-engine/lib/Intersector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js");
/* harmony import */ var _webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../webgl-engine/lib/VertexAttribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const _=1;let y=class extends(_core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedMixin(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){get spatialReference(){return this.view?.spatialReference}constructor(e){super(e),this._elevationOffset=0,this._layerHandlesKey="layerHandles"}initialize(){this._renderCoordsHelper=this.view.renderCoordsHelper,this._intersectLayers=[this.stageLayer],this._intersector=(0,_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_15__.newIntersector)(this.view.state.viewingMode),this._intersector.options.store=_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_16__.StoreResults.MIN;const e=this._computeLayerExtent(this.spatialReference,this.stageLayer);this._zmin=e[2],this._zmax=e[5];const t=this.stageLayer.events;this.addHandles([t.on("layerObjectAdded",(({object:e})=>this._objectChanged(e))),t.on("layerObjectRemoved",(({object:e})=>this._objectChanged(e))),t.on("geometryAdded",(({object:e})=>this._objectChanged(e))),t.on("geometryRemoved",(({object:e})=>this._objectChanged(e))),t.on("attributesChanged",(({attribute:e,object:t})=>(0,_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_17__.affectsGeometry)(e)&&this._objectChanged(t))),t.on("transformationChanged",(e=>this._objectChanged(e)))],this._layerHandlesKey)}dispose(){this.removeHandles(this._layerHandlesKey)}elevationInfoChanged(){const e=null!=this.layer?this.layer.elevationInfo:null;if(null!=e&&"on-the-ground"!==e.mode){const t=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_4__.getMetersPerVerticalUnitForSR)(this.layer.spatialReference),r=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_14__.getMetersPerUnit)(e.unit??"meters");this._elevationOffset=(e.offset??0)*r/t}else this._elevationOffset=0}getElevation(e,t,r,s){if(x[0]=e,x[1]=t,x[2]=r,!this._renderCoordsHelper.toRenderCoords(x,s,x))return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("could not project point for elevation alignment"),null;const n=this._elevationOffset,i=this._zmin+n,a=this._zmax+n;this._renderCoordsHelper.setAltitude(C,a,x),this._renderCoordsHelper.setAltitude(E,i,x);const l=e=>!!e.lastValidElevationBB;return this._intersector.reset(C,E,null),this._intersector.intersect(this._intersectLayers,null,_,null,l),this._intersector.results.min.getIntersectionPoint(x)?this._renderCoordsHelper.getAltitude(x):null}_objectChanged(e){const t=this.spatialReference;if(!e.lastValidElevationBB||!t)return;(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.empty)(j);const r=e.lastValidElevationBB;r.isEmpty()||this._expandExtent(t,r.min,r.max,j);const{min:o,max:s}=e.boundingVolumeWorldSpace;this._expandExtent(t,o,s,j),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.toRect)(j,v),this._zmin=Math.min(this._zmin,j[2]),this._zmax=Math.max(this._zmax,j[5]),b.extent=v,b.spatialReference=t,this.emit("elevation-change",b),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__.c)(r.min,o),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__.c)(r.max,s)}_computeLayerExtent(e,t){return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.empty)(j),null!=e&&t.objects.forAll((t=>this._expandExtent(e,t.boundingVolumeWorldSpace.min,t.boundingVolumeWorldSpace.max,j))),j}_expandExtent(e,t,r,o){for(let s=0;s<8;++s)x[0]=1&s?t[0]:r[0],x[1]=2&s?t[1]:r[1],x[2]=4&s?t[2]:r[2],this._renderCoordsHelper.fromRenderCoords(x,x,e),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.expandWithVec3)(o,x);return o}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],y.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],y.prototype,"stageLayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({constructOnly:!0})],y.prototype,"view",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],y.prototype,"spatialReference",null),y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.3d.layers.support.StageLayerElevationProvider")],y);const j=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.empty)(),v=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_13__.empty)(),b={spatialReference:null,extent:v,context:"scene"},x=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.c)(),C=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.c)(),E=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.c)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateSet.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Object3DStateSet: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var t;!function(e){e[e.Object=0]="Object",e[e.RenderGeometry=1]="RenderGeometry",e[e.External=2]="External",e[e.COUNT=3]="COUNT"}(t||(t={}));class r{constructor(){this._items=[]}addObject(e,r){this._items.push({type:t.Object,objectStateId:r,object:e})}addRenderGeometry(e,r,o){this._items.push({type:t.RenderGeometry,objectStateId:r,renderGeometry:e,owner:o})}addExternal(e,r){this._items.push({type:t.External,objectStateId:r,remove:e})}remove(e){for(let t=this._items.length-1;t>=0;--t){const r=this._items[t];r.objectStateId===e&&(this._removeObjectStateItem(r),this._items.splice(t,1))}}removeObject(e){for(let r=this._items.length-1;r>=0;--r){const o=this._items[r];o.type===t.Object&&o.object===e&&(this._removeObjectStateItem(o),this._items.splice(r,1))}}removeRenderGeometry(e){for(let r=this._items.length-1;r>=0;--r){const o=this._items[r];o.type===t.RenderGeometry&&o.renderGeometry===e&&(this._removeObjectStateItem(o),this._items.splice(r,1))}}removeAll(){this._items.forEach((e=>{this._removeObjectStateItem(e)})),this._items=[]}_removeObjectStateItem(r){switch(r.type){case t.Object:r.objectStateId.channel===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Object3DState.Highlight?r.object.removeHighlight(r.objectStateId):r.objectStateId.channel===_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_0__.Object3DState.MaskOccludee&&r.object.removeOcclude(r.objectStateId);break;case t.RenderGeometry:r.owner.removeRenderGeometryObjectState(r.renderGeometry,r.objectStateId);break;case t.External:r.remove(r.objectStateId)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFetchPopupTemplate: () => (/* binding */ p),
/* harmony export */   getRequiredFields: () => (/* binding */ n),
/* harmony export */   hasPopupTemplate: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.getFeatureEditFields)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzNkX2xheWVyc19ncmFwaGljc19HcmFwaGljczNEQ29yZV9qcy1ub2RlX21vZHVsLTZjNzM3Zi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDd00sY0FBYywrSEFBK0gsZ0JBQWdCLHVCQUF1QixvQkFBb0Isc0RBQUMsZ0ZBQWdGLHdCQUF3QixJQUFJLFdBQVcsRUFBRSxlQUFlLHlCQUF5QixpQ0FBaUMsK0JBQStCLDJDQUEyQyxZQUFZLGdCQUFnQixrQkFBa0IsTUFBTSx3Q0FBd0MsMkZBQTJGLFNBQVMsV0FBVywwQkFBMEIsNkJBQTZCLE9BQU8sc0RBQUMsNEVBQTRFLGFBQWEsa0NBQWtDLDBCQUEwQixFQUFFLFlBQVksY0FBYyxXQUFXLDBFQUFDLGtCQUFrQixnQkFBZ0IsU0FBUyxHQUFHLG9GQUFDLE1BQU0sK0JBQStCLDBFQUFDLDRCQUE0Qix1REFBQyxJQUFJLDBFQUFDLG9CQUFvQiwyQ0FBMkMsY0FBYyxrQ0FBa0MsMEVBQUMsMEJBQTBCLHVEQUFDLElBQUksMEVBQUMsa0JBQWtCLDBDQUErRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o1OUM7QUFDQTtBQUNBO0FBQ0E7QUFDcWQsUUFBUSx5REFBQyx3QkFBd0IsOERBQUMsSUFBSSx3REFBQyxzQkFBc0IsaUVBQUMsSUFBSSwyREFBQyxzQkFBc0IsZ0VBQUMsUUFBUSx3REFBQyxFQUFFLGlCQUFpQiwyREFBQyxNQUFNLDZEQUFDLEVBQUUsVUFBVSxNQUFNLDBEQUFDLENBQUMsV0FBVyw4REFBQyxFQUFFLGlCQUFpQixpRUFBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLGNBQWMsdUJBQXVCLGVBQWUsb0JBQW9CLHNDQUFzQyx3QkFBd0Isb0NBQW9DLFlBQTRDOzs7Ozs7Ozs7Ozs7Ozs7QUNKdDJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtQkFBbUIs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ZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcmVuZGVyZXJzL3N1cHBvcnQvcmVuZGVyZXJDb252ZXJzaW9uLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9zeW1ib2xzL3N1cHBvcnQvZGVmYXVsdHMzRC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2dyYXBoaWNzL0Rpc3BsYXlGZWF0dXJlTGltaXQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9ncmFwaGljcy9FeHRlbnRTZXQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9ncmFwaGljcy9HcmFwaGljU3RhdGVUcmFja2luZy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2dyYXBoaWNzL0dyYXBoaWNzM0RDb3JlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvZ3JhcGhpY3MvR3JhcGhpY3MzREVsZXZhdGlvbkFsaWdubWVudC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2dyYXBoaWNzL0dyYXBoaWNzM0RGZWF0dXJlU3RvcmUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9ncmFwaGljcy9HcmFwaGljczNERnJ1c3R1bVZpc2liaWxpdHkuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9ncmFwaGljcy9HcmFwaGljczNET2JqZWN0U3RhdGVTZXQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9ncmFwaGljcy9HcmFwaGljczNET2JqZWN0U3RhdGVzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvZ3JhcGhpY3MvR3JhcGhpY3MzRFBvaW50U3ltYm9sLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvZ3JhcGhpY3MvR3JhcGhpY3MzRFNjYWxlVmlzaWJpbGl0eS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2dyYXBoaWNzL0dyYXBoaWNzM0RTeW1ib2xGYWN0b3J5LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvZ3JhcGhpY3MvU3BhdGlhbEluZGV4MkQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9zdXBwb3J0L1N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9PYmplY3QzRFN0YXRlU2V0LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy9sYXllcnMvc3VwcG9ydC9wb3B1cFV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7aXNTb21lIGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7dG8zRCBhcyBuLGRlZmF1bHRUbzNET3B0aW9ucyBhcyBvfWZyb21cIi4uLy4uL3N5bWJvbHMvc3VwcG9ydC9zeW1ib2xDb252ZXJzaW9uLmpzXCI7ZnVuY3Rpb24gdChyKXtyZXR1cm4gbnVsbD09cnx8XCJzaW1wbGVcIj09PXIudHlwZXx8XCJ1bmlxdWUtdmFsdWVcIj09PXIudHlwZXx8XCJjbGFzcy1icmVha3NcIj09PXIudHlwZXx8XCJkaWN0aW9uYXJ5XCI9PT1yLnR5cGV8fFwiaGVhdG1hcFwiPT09ci50eXBlfWZ1bmN0aW9uIHMocixuKXtpZihudWxsPT1yKXJldHVybiBudWxsO2lmKCF0KHIpKXJldHVybiBuZXcgZShcInJlbmRlcmVyLWNvbnZlcnNpb24tM2Q6dW5zdXBwb3J0ZWQtcmVuZGVyZXJcIixgVW5zdXBwb3J0ZWQgcmVuZGVyZXIgb2YgdHlwZSAnJHtyLnR5cGV8fHIuZGVjbGFyZWRDbGFzc30nYCx7cmVuZGVyZXI6cn0pO3N3aXRjaChyLnR5cGUpe2Nhc2VcInNpbXBsZVwiOnJldHVybiB1KHIpO2Nhc2VcInVuaXF1ZS12YWx1ZVwiOnJldHVybiBpKHIsbik7Y2FzZVwiY2xhc3MtYnJlYWtzXCI6cmV0dXJuIGEocik7Y2FzZVwiZGljdGlvbmFyeVwiOmNhc2VcImhlYXRtYXBcIjpyZXR1cm4gbnVsbH1yZXR1cm4gbnVsbH1mdW5jdGlvbiBsKHIsbil7aWYoIW4pcmV0dXJuIG51bGw7bGV0IG87aWYobz1BcnJheS5pc0FycmF5KG4pP246W25dLG8ubGVuZ3RoPjApe2NvbnN0IG49by5tYXAoKHI9PnIuZGV0YWlscy5zeW1ib2wudHlwZXx8ci5kZXRhaWxzLnN5bWJvbC5kZWNsYXJlZENsYXNzKSkuZmlsdGVyKChyPT4hIXIpKTtuLnNvcnQoKTtjb25zdCB0PVtdO3JldHVybiBuLmZvckVhY2goKChyLGUpPT57MCE9PWUmJnI9PT1uW2UtMV18fHQucHVzaChyKX0pKSxuZXcgZShcInJlbmRlcmVyLWNvbnZlcnNpb24tM2Q6dW5zdXBwb3J0ZWQtc3ltYm9sc1wiLGBSZW5kZXJlciBjb250YWlucyBzeW1ib2xzICgke3Quam9pbihcIiwgXCIpfSkgd2hpY2ggYXJlIG5vdCBzdXBwb3J0ZWQgaW4gM0RgLHtyZW5kZXJlcjpyLHN5bWJvbEVycm9yczpvfSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gdShyKXtyZXR1cm4gbChyLG4oci5zeW1ib2wpLmVycm9yKX1mdW5jdGlvbiBpKGUsdCl7Y29uc3Qgcz17Li4ubywuLi50fSx1PWUudW5pcXVlVmFsdWVJbmZvcz8ubWFwKChyPT5uKHIuc3ltYm9sLHMpLmVycm9yKSkuZmlsdGVyKHIpLGk9bihlLmRlZmF1bHRTeW1ib2wscyk7cmV0dXJuIGkuZXJyb3ImJnU/LnVuc2hpZnQoaS5lcnJvciksbChlLHUpfWZ1bmN0aW9uIGEoZSl7Y29uc3Qgbz1lLmNsYXNzQnJlYWtJbmZvcy5tYXAoKHI9Pm4oci5zeW1ib2wpLmVycm9yKSkuZmlsdGVyKHIpLHQ9bihlLmRlZmF1bHRTeW1ib2wpO3JldHVybiB0LmVycm9yJiZvLnVuc2hpZnQodC5lcnJvciksbChlLG8pfWV4cG9ydHt0IGFzIGlzU3VwcG9ydGVkUmVuZGVyZXIzRCxzIGFzIHZhbGlkYXRlVG8zRH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IG8gZnJvbVwiLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCByIGZyb21cIi4uL0ZpbGxTeW1ib2wzRExheWVyLmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vTGluZVN5bWJvbDNELmpzXCI7aW1wb3J0IG0gZnJvbVwiLi4vTWVzaFN5bWJvbDNELmpzXCI7aW1wb3J0IGwgZnJvbVwiLi4vUG9pbnRTeW1ib2wzRC5qc1wiO2ltcG9ydCB0IGZyb21cIi4uL1BvbHlnb25TeW1ib2wzRC5qc1wiO2ltcG9ydCBpIGZyb21cIi4uL2VkZ2VzL1NvbGlkRWRnZXMzRC5qc1wiO2ltcG9ydHtkZWZhdWx0UG9pbnRTeW1ib2wyRCBhcyBzLGRlZmF1bHRQb2x5bGluZVN5bWJvbDJEIGFzIG4sZGVmYXVsdFBvbHlnb25TeW1ib2wyRCBhcyBwfWZyb21cIi4vZGVmYXVsdHMuanNcIjtpbXBvcnR7ZGVmYXVsdENvbG9yIGFzIGYsZGVmYXVsdE91dGxpbmVDb2xvciBhcyB5fWZyb21cIi4vZGVmYXVsdHNKU09OLmpzXCI7Y29uc3QgYT1sLmZyb21TaW1wbGVNYXJrZXJTeW1ib2wocyksYz1lLmZyb21TaW1wbGVMaW5lU3ltYm9sKG4pLHU9dC5mcm9tU2ltcGxlRmlsbFN5bWJvbChwKSxTPW5ldyBtKHtzeW1ib2xMYXllcnM6bmV3IG8oW25ldyByKHttYXRlcmlhbDp7Y29sb3I6Zn0sZWRnZXM6bmV3IGkoe3NpemU6XCIxcHhcIixjb2xvcjp5fSl9KV0pfSk7ZnVuY3Rpb24gaihvKXtpZihudWxsPT1vKXJldHVybiBudWxsO3N3aXRjaChvLnR5cGUpe2Nhc2VcIm1lc2hcIjpyZXR1cm4gUztjYXNlXCJwb2ludFwiOmNhc2VcIm11bHRpcG9pbnRcIjpyZXR1cm4gYTtjYXNlXCJwb2x5bGluZVwiOnJldHVybiBjO2Nhc2VcInBvbHlnb25cIjpjYXNlXCJleHRlbnRcIjpyZXR1cm4gdX1yZXR1cm4gbnVsbH1leHBvcnR7aiBhcyBnZXREZWZhdWx0U3ltYm9sM0R9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGV7Y29uc3RydWN0b3IoZSxtLHQpe3RoaXMubWF4aW11bVRvdGFsTnVtYmVyT2ZWZXJ0aWNlcz1lLHRoaXMubWF4aW11bU51bWJlck9mRmVhdHVyZXM9bSx0aGlzLmF2ZXJhZ2VTeW1ib2xDb21wbGV4aXR5PXR9fWV4cG9ydHtlIGFzIERpc3BsYXlGZWF0dXJlTGltaXR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvUG9vbGVkQXJyYXkuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGUsY29weSBhcyByLGFyZWEgYXMgcyxleHBhbmQgYXMgbixjb250YWlucyBhcyBvLGNvbnRhaW5zUG9pbnQgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e25vQnVkZ2V0IGFzIGh9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtjb25zdCBhPS4wNTtjbGFzcyBse2NvbnN0cnVjdG9yKCl7dGhpcy5fZXh0ZW50cz1uZXcgdCh7YWxsb2NhdG9yOnQ9PnR8fGUoKX0pLHRoaXMuX3RtcEV4dGVudD1lKCksdGhpcy5fZGlydHk9ITF9Z2V0IGVtcHR5KCl7cmV0dXJuIDA9PT10aGlzLl9leHRlbnRzLmxlbmd0aH1nZXQgc2l6ZSgpe3JldHVybiB0aGlzLl9leHRlbnRzLmxlbmd0aH1jbGVhcigpe3RoaXMuX2V4dGVudHMuY2xlYXIoKX1hZGQodCl7dGhpcy5fY29udGFpbnModCl8fCh0aGlzLl9yZW1vdmVDb250YWluZWQodCkscih0aGlzLl9leHRlbnRzLnB1c2hOZXcoKSx0KSx0aGlzLl9kaXJ0eT0hMCl9cG9wKCl7cmV0dXJuIHRoaXMuX2RpcnR5JiZ0aGlzLl9tZXJnZVRpZ2h0KCksdGhpcy5fZXh0ZW50cy5wb3AoKX1tZXJnZSh0KXtyZXR1cm4gdGhpcy5fbWVyZ2VUaWdodCh0KSx0Lmhhc1Byb2dyZXNzZWR9X21lcmdlVGlnaHQodD1oKXtjb25zdCBlPXRoaXMuX2V4dGVudHMsbz1uZXcgU2V0O2xldCBpPTA7Zm9yKDtpIT09ZS5sZW5ndGg7KXtlLnNvcnQoKCh0LGUpPT50WzBdLWVbMF0pKSxpPWUubGVuZ3RoLG8uY2xlYXIoKTtmb3IobGV0IGk9MDtpPGUubGVuZ3RoOysraSl7aWYodC5kb25lKXJldHVybjtjb25zdCBoPWUuYXQoaSk7aWYoaCl7Zm9yKGxldCB0PWkrMTt0PGUubGVuZ3RoOysrdCl7Y29uc3Qgcj1lLmF0KHQpO2lmKG51bGw9PXJ8fHJbMF0+PWhbMl0pYnJlYWs7by5hZGQocil9by5mb3JFYWNoKChpPT57aWYoaD09PWkpcmV0dXJuO2lmKGlbMl08PWhbMF0pcmV0dXJuIHZvaWQgby5kZWxldGUoaSk7Y29uc3QgbD1zKGgpLF89cyhpKSxjPXRoaXMuX3RtcEV4dGVudDtuKGgsaSxjKTtjb25zdCBkPWwrXzsocyhjKS1kKS9kPGEmJihyKGgsYyksby5kZWxldGUoaSksZS5yZW1vdmUoaSksdC5tYWRlUHJvZ3Jlc3MoKSl9KSksby5hZGQoaCl9fX10aGlzLl9kaXJ0eT0hMX1fY29udGFpbnModCl7cmV0dXJuIHRoaXMuX2V4dGVudHMuc29tZSgoZT0+byhlLHQpKSl9X3JlbW92ZUNvbnRhaW5lZCh0KXt0aGlzLl9leHRlbnRzLmZpbHRlckluUGxhY2UoKGU9PiFvKHQsZSkpKX1nZXQgdGVzdCgpe2NvbnN0IHQ9dGhpcztyZXR1cm57Y29udGFpbnNQb2ludDplPT50Ll9leHRlbnRzLnNvbWUoKHQ9PmkodCxlKSkpfX19ZXhwb3J0e2wgYXMgRXh0ZW50U2V0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVtb3ZlIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e21ha2VIYW5kbGUgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhbmRsZVV0aWxzLmpzXCI7aW1wb3J0e2dldE9iamVjdElkIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRGZWF0dXJlcy5qc1wiO2NsYXNzIGV7Y29uc3RydWN0b3IodCl7dGhpcy5fZ3JhcGhpY3NDb3JlPXQsdGhpcy5faWRUb1N0YXRlPW5ldyBNYXAsdGhpcy5fc3RhdGVzPW5ldyBTZXQ7Y29uc3QgaT10Lm93bmVyLmxheWVyPy5vYmplY3RJZEZpZWxkO2k/KHRoaXMuX2dldEdyYXBoaWNJZD10PT5zKHQsaSksdGhpcy5fZ2V0R3JhcGhpY3MzREdyYXBoaWNCeUlkPXQ9PnRoaXMuX2dyYXBoaWNzQ29yZS5nZXRHcmFwaGljczNER3JhcGhpY0J5T2JqZWN0SWQodCkpOih0aGlzLl9nZXRHcmFwaGljSWQ9dD0+dC51aWQsdGhpcy5fZ2V0R3JhcGhpY3MzREdyYXBoaWNCeUlkPXQ9PnRoaXMuX2dyYXBoaWNzQ29yZS5nZXRHcmFwaGljczNER3JhcGhpY0J5SWQodCkpfWRlc3Ryb3koKXt0aGlzLl9pZFRvU3RhdGUuY2xlYXIoKSx0aGlzLl9zdGF0ZXMuZm9yRWFjaCgoKHQsaSk9PnRoaXMucmVtb3ZlKGkpKSl9YWRkKHQpe2NvbnN0IHM9aSgoKCk9PnRoaXMucmVtb3ZlKHQpKSk7aWYodGhpcy5fc3RhdGVzLmhhcyh0KSlyZXR1cm4gcztjb25zdCBlPXRoaXMuX2dldEdyYXBoaWNJZCh0LmdyYXBoaWMpLGE9dGhpcy5fZ2V0R3JhcGhpY3MzREdyYXBoaWNCeUlkKGUpO3RoaXMuX3N0YXRlcy5oYXModCl8fHRoaXMuX3N0YXRlcy5hZGQodCk7cmV0dXJuIHRoaXMuX2Vuc3VyZVN0YXRlTGlzdChlKS5wdXNoKHQpLHQuZGlzcGxheWluZz1udWxsIT1hJiZhLmlzVmlzaWJsZSgpLHQuaXNEcmFwZWQ9bnVsbCE9YSYmYS5pc0RyYXBlZCx0LnRyYWNraW5nPSEwLG51bGwhPWEmJnQuZW1pdChcImNoYW5nZWRcIiksc31yZW1vdmUoaSl7aWYodGhpcy5fc3RhdGVzLmhhcyhpKSl7aWYodGhpcy5faWRUb1N0YXRlLnNpemUpe2NvbnN0IHM9dGhpcy5fZ2V0R3JhcGhpY0lkKGkuZ3JhcGhpYyksZT10aGlzLl9pZFRvU3RhdGUuZ2V0KHMpO2UmJih0KGUsaSksMD09PWUubGVuZ3RoJiZ0aGlzLl9pZFRvU3RhdGUuZGVsZXRlKHMpKX10aGlzLl9zdGF0ZXMuZGVsZXRlKGkpLGkudHJhY2tpbmc9ITEsaS5kaXNwbGF5aW5nPSExfX1hZGRHcmFwaGljKHQpe3RoaXMuX2ZvckVhY2hTdGF0ZSh0LChpPT57aS5kaXNwbGF5aW5nPXQuaXNWaXNpYmxlKCksaS5pc0RyYXBlZD10LmlzRHJhcGVkLGkuZW1pdChcImNoYW5nZWRcIil9KSl9cmVtb3ZlR3JhcGhpYyh0KXt0aGlzLl9mb3JFYWNoU3RhdGUodCwodD0+e3QuZGlzcGxheWluZz0hMSx0LmlzRHJhcGVkPSExfSkpfXVwZGF0ZUdyYXBoaWNHZW9tZXRyeSh0KXt0aGlzLl9mb3JFYWNoU3RhdGUodCwodD0+dC5lbWl0KFwiY2hhbmdlZFwiKSkpfXVwZGF0ZUdyYXBoaWNWaXNpYmlsaXR5KHQpe3RoaXMuX2ZvckVhY2hTdGF0ZSh0LChpPT5pLmRpc3BsYXlpbmc9dC5pc1Zpc2libGUoKSkpfWFsbEdyYXBoaWNzRGVsZXRlZCgpe3RoaXMuX3N0YXRlcy5mb3JFYWNoKCh0PT57dC5kaXNwbGF5aW5nPSExfSkpfV9lbnN1cmVTdGF0ZUxpc3QodCl7Y29uc3QgaT10aGlzLl9pZFRvU3RhdGUuZ2V0KHQpO2lmKGkpcmV0dXJuIGk7Y29uc3Qgcz1uZXcgQXJyYXk7cmV0dXJuIHRoaXMuX2lkVG9TdGF0ZS5zZXQodCxzKSxzfV9mb3JFYWNoU3RhdGUodCxpKXtpZigwPT09dGhpcy5fc3RhdGVzLnNpemV8fDA9PT10aGlzLl9pZFRvU3RhdGUuc2l6ZSlyZXR1cm47Y29uc3Qgcz10aGlzLl9nZXRHcmFwaGljSWQodC5ncmFwaGljKSxlPXRoaXMuX2lkVG9TdGF0ZS5nZXQocyk7bnVsbCE9ZSYmZS5mb3JFYWNoKGkpfX1leHBvcnR7ZSBhcyBHcmFwaGljU3RhdGVUcmFja2luZ307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9nZW9tZXRyeS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vcmVuZGVyZXJzL0NsYXNzQnJlYWtzUmVuZGVyZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9EaWN0aW9uYXJ5UmVuZGVyZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9Eb3REZW5zaXR5UmVuZGVyZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9IZWF0bWFwUmVuZGVyZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9QaWVDaGFydFJlbmRlcmVyLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9yZW5kZXJlcnMvUmVuZGVyZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9TaW1wbGVSZW5kZXJlci5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9VbmlxdWVWYWx1ZVJlbmRlcmVyLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vc3ltYm9scy5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnR7aXNTb21lIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydCBhIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnR7c29tZU1hcCBhcyBvLGZpbmRJbk1hcCBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIGgscmVtb3ZlTWF5YmUgYXMgZCxkaXNwb3NlTWF5YmUgYXMgcH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Qb29sZWRBcnJheS5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRlZCBhcyB5LGNyZWF0ZVJlc29sdmVyIGFzIGcsaXNBYm9ydEVycm9yIGFzIG19ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgdSx3aGVuIGFzIGIsb24gYXMgXyxzeW5jQW5kSW5pdGlhbCBhcyBmLHdoZW5PbmNlIGFzIHZ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3NjaGVkdWxlIGFzIEN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zY2hlZHVsaW5nLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIFN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB3fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7ZGlmZiBhcyBHLGlzRW1wdHkgYXMgUn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kaWZmVXRpbHMuanNcIjtpbXBvcnR7cyBhcyBQLGcgYXMgeCxpIGFzIER9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzMuanNcIjtpbXBvcnR7YyBhcyBFfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy92ZWMzZjY0LmpzXCI7aW1wb3J0e2NhblByb2plY3RXaXRob3V0RW5naW5lIGFzIEl9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtwcm9qZWN0QnVmZmVyIGFzIFV9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0QnVmZmVyLmpzXCI7aW1wb3J0e3Byb2plY3RWZWN0b3JUb1ZlY3RvciBhcyBBfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdFZlY3RvclRvVmVjdG9yLmpzXCI7aW1wb3J0e3Byb2plY3RYWVpUb1ZlY3RvciBhcyBqfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdFhZWlRvVmVjdG9yLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBMLGNlbnRlciBhcyBPLGZyb21SZWN0IGFzIFYsZXF1YWxzIGFzIEZ9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBUfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIGt9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnQgeiBmcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvTGF5ZXIuanNcIjtpbXBvcnR7Z2V0T2JqZWN0SWQgYXMgTSxjb21wdXRlQUFCQiBhcyBXLGhhc0dlb21ldHJ5IGFzIEh9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRGZWF0dXJlcy5qc1wiO2ltcG9ydHtoeWRyYXRlR3JhcGhpYyBhcyBOfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9oeWRyYXRlZEZlYXR1cmVzLmpzXCI7aW1wb3J0e2lzU3VwcG9ydGVkUmVuZGVyZXIzRCBhcyBCLHZhbGlkYXRlVG8zRCBhcyBxfWZyb21cIi4uLy4uLy4uLy4uL3JlbmRlcmVycy9zdXBwb3J0L3JlbmRlcmVyQ29udmVyc2lvbi5qc1wiO2ltcG9ydHtsb2FkQXJjYWRlIGFzIFl9ZnJvbVwiLi4vLi4vLi4vLi4vc3VwcG9ydC9hcmNhZGVPbkRlbWFuZC5qc1wiO2ltcG9ydHtpc0Jhc2VtYXBMYXllciBhcyAkfWZyb21cIi4uLy4uLy4uLy4uL3N1cHBvcnQvYmFzZW1hcFV0aWxzLmpzXCI7aW1wb3J0e2dldERlZmF1bHRTeW1ib2wzRCBhcyBafWZyb21cIi4uLy4uLy4uLy4uL3N5bWJvbHMvc3VwcG9ydC9kZWZhdWx0czNELmpzXCI7aW1wb3J0e3RvM0QgYXMgSn1mcm9tXCIuLi8uLi8uLi8uLi9zeW1ib2xzL3N1cHBvcnQvc3ltYm9sQ29udmVyc2lvbi5qc1wiO2ltcG9ydHthdmVyYWdlU3ltYm9sQ29tcGxleGl0aWVzIGFzIFEsZGVmYXVsdFN5bWJvbENvbXBsZXhpdHkgYXMgWH1mcm9tXCIuL2RlZmF1bHRTeW1ib2xDb21wbGV4aXR5LmpzXCI7aW1wb3J0e0Rpc3BsYXlGZWF0dXJlTGltaXQgYXMgS31mcm9tXCIuL0Rpc3BsYXlGZWF0dXJlTGltaXQuanNcIjtpbXBvcnR7Vmlld0VsZXZhdGlvblByb3ZpZGVyIGFzIGVlfWZyb21cIi4vRWxldmF0aW9uUXVlcnkuanNcIjtpbXBvcnR7VmlzaWJpbGl0eUdyb3VwIGFzIHRlLFZpc2liaWxpdHlGbGFnIGFzIGllfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnR7ZXh0cmFjdEV4cHJlc3Npb25JbmZvIGFzIHJlLGNyZWF0ZUNvbnRleHQgYXMgc2V9ZnJvbVwiLi9mZWF0dXJlRXhwcmVzc2lvbkluZm9VdGlscy5qc1wiO2ltcG9ydHtHcmFwaGljczNERmVhdHVyZVN0b3JlIGFzIGFlfWZyb21cIi4vR3JhcGhpY3MzREZlYXR1cmVTdG9yZS5qc1wiO2ltcG9ydHtHcmFwaGljczNER3JhcGhpY0NyZWF0aW9uQ29udGV4dCBhcyBuZX1mcm9tXCIuL0dyYXBoaWNzM0RHcmFwaGljQ3JlYXRpb25Db250ZXh0LmpzXCI7aW1wb3J0e0dyYXBoaWNzM0RTeW1ib2xDcmVhdGlvbkNvbnRleHQgYXMgb2V9ZnJvbVwiLi9HcmFwaGljczNEU3ltYm9sQ3JlYXRpb25Db250ZXh0LmpzXCI7aW1wb3J0e21ha2UgYXMgbGV9ZnJvbVwiLi9HcmFwaGljczNEU3ltYm9sRmFjdG9yeS5qc1wiO2ltcG9ydHtHcmFwaGljczNEV2ViU3R5bGVTeW1ib2wgYXMgaGV9ZnJvbVwiLi9HcmFwaGljczNEV2ViU3R5bGVTeW1ib2wuanNcIjtpbXBvcnR7R3JhcGhpY1N0YXRlVHJhY2tpbmcgYXMgZGV9ZnJvbVwiLi9HcmFwaGljU3RhdGVUcmFja2luZy5qc1wiO2ltcG9ydHtjb21wdXRlQ2VudHJvaWQgYXMgcGV9ZnJvbVwiLi9ncmFwaGljVXRpbHMuanNcIjtpbXBvcnR7QXBwbHlSZW5kZXJlckRpZmZSZXN1bHQgYXMgY2V9ZnJvbVwiLi9pbnRlcmZhY2VzLmpzXCI7aW1wb3J0e0xvYWRTdGF0dXMgYXMgeWV9ZnJvbVwiLi9Mb2FkYWJsZS5qc1wiO2ltcG9ydHtTcGF0aWFsSW5kZXgyRCBhcyBnZX1mcm9tXCIuL1NwYXRpYWxJbmRleDJELmpzXCI7aW1wb3J0e1N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlciBhcyBtZX1mcm9tXCIuLi9zdXBwb3J0L1N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlci5qc1wiO2ltcG9ydHt0b0JvdW5kaW5nUmVjdCBhcyB1ZX1mcm9tXCIuLi8uLi9zdXBwb3J0L2V4dGVudFV0aWxzLmpzXCI7aW1wb3J0e1Byb3BlcnRpZXNQb29sIGFzIGJlfWZyb21cIi4uLy4uL3N1cHBvcnQvUHJvcGVydGllc1Bvb2wuanNcIjtpbXBvcnR7R3JpZExvY2FsT3JpZ2luRmFjdG9yeSBhcyBfZX1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL0dyaWRMb2NhbE9yaWdpbkZhY3RvcnkuanNcIjtpbXBvcnR7VXBkYXRlUG9saWN5IGFzIGZlfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvVXBkYXRlUG9saWN5LmpzXCI7aW1wb3J0e2FmZmVjdHNHZW9tZXRyeSBhcyB2ZX1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL1ZlcnRleEF0dHJpYnV0ZS5qc1wiO2ltcG9ydHtXZWJHTExheWVyIGFzIENlfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvV2ViR0xMYXllci5qc1wiO2ltcG9ydHtoYXNQb3B1cFRlbXBsYXRlIGFzIFNlfWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L3BvcHVwVXRpbHMuanNcIjtpbXBvcnR7SW1tZWRpYXRlVGFzayBhcyB3ZSxub0J1ZGdldCBhcyBHZSxUYXNrUHJpb3JpdHkgYXMgUmUsVGFzayBhcyBQZX1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2ltcG9ydCB4ZSBmcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnQgRGUgZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvUG9pbnQuanNcIjtpbXBvcnQgRWUgZnJvbVwiLi4vLi4vLi4vLi4vc3ltYm9scy9MYWJlbFN5bWJvbDNELmpzXCI7aW1wb3J0IEllIGZyb21cIi4uLy4uLy4uLy4uL3N5bWJvbHMvVGV4dFN5bWJvbC5qc1wiO2ltcG9ydCBVZSBmcm9tXCIuLi8uLi8uLi8uLi9zeW1ib2xzL1dlYlN0eWxlU3ltYm9sLmpzXCI7dmFyIEFlO2NvbnN0IGplPUUoKSxMZT1MKCksT2U9XCJlc3JpLnZpZXdzLjNkLmxheWVycy5ncmFwaGljcy5HcmFwaGljczNEQ29yZVwiLFZlPWkuZ2V0TG9nZ2VyKE9lKTtsZXQgRmU9QWU9Y2xhc3MgZXh0ZW5kcyBye2dldCBfdmlld1NwYXRpYWxSZWZlcmVuY2UoKXtyZXR1cm4gdGhpcy5vd25lci52aWV3LnNwYXRpYWxSZWZlcmVuY2V9Z2V0IHNwYXRpYWxJbmRleCgpe3JldHVybiB0aGlzLl9zcGF0aWFsSW5kZXh8fCh0aGlzLl9zcGF0aWFsSW5kZXg9bmV3IGdlKHtvYmplY3RJZEZpZWxkOnRoaXMub3duZXIubGF5ZXI/Lm9iamVjdElkRmllbGQsc3BhdGlhbFJlZmVyZW5jZTp0aGlzLl92aWV3U3BhdGlhbFJlZmVyZW5jZSxoYXNaOiEhdGhpcy5oYXNaLGhhc006ISF0aGlzLmhhc019KSx0aGlzLl9zcGF0aWFsSW5kZXguc2V0dXAoQXJyYXkuZnJvbSh0aGlzLmdyYXBoaWNzM0RHcmFwaGljcy52YWx1ZXMoKSkpKSx0aGlzLl9zcGF0aWFsSW5kZXgudXBkYXRlKCksdGhpcy5fc3BhdGlhbEluZGV4fWdldCBudW1iZXJPZkdyYXBoaWNzKCl7cmV0dXJuIHRoaXMuX251bWJlck9mR3JhcGhpY3N9Z2V0IGVmZmVjdGl2ZVVwZGF0ZVBvbGljeSgpe3JldHVybiBudWxsIT10aGlzLmN1cnJlbnRSZW5kZXJlciYmXCJkaWN0aW9uYXJ5XCI9PT10aGlzLmN1cnJlbnRSZW5kZXJlci50eXBlP2ZlLkFTWU5DOnRoaXMuX2ZvcmNlZFVwZGF0ZVBvbGljeT8/dGhpcy5wcmVmZXJyZWRVcGRhdGVQb2xpY3l9Z2V0IGZlYXR1cmVTdG9yZSgpe3JldHVybiB0aGlzLl9mZWF0dXJlU3RvcmV9Z2V0IGluaXRpYWxpemVQcm9taXNlKCl7cmV0dXJuIHRoaXMuX2luaXRpYWxpemVQcm9taXNlfWdldCBzY2FsZVZpc2liaWxpdHkoKXtyZXR1cm4gdGhpcy5fc2NhbGVWaXNpYmlsaXR5fWdldCBlbGV2YXRpb25BbGlnbm1lbnQoKXtyZXR1cm4gdGhpcy5fZWxldmF0aW9uQWxpZ25tZW50fWdldCBvYmplY3RTdGF0ZXMoKXtyZXR1cm4gdGhpcy5fb2JqZWN0U3RhdGVzfWdldCBmaWx0ZXJWaXNpYmlsaXR5KCl7cmV0dXJuIHRoaXMuX2ZpbHRlclZpc2liaWxpdHl9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuISEodGhpcy5fZ3JhcGhpY3NXYWl0aW5nRm9yU3ltYm9sLnNpemU+MHx8dGhpcy5ydW5uaW5nfHx0aGlzLl9lbGV2YXRpb25BbGlnbm1lbnQ/LnVwZGF0aW5nfHx0aGlzLl9zY2FsZVZpc2liaWxpdHk/LnVwZGF0aW5nfHx0aGlzLl9maWx0ZXJWaXNpYmlsaXR5Py51cGRhdGluZ3x8dGhpcy5fcmVuZGVyZXJDaGFuZ2VBYm9ydENvbnRyb2xsZXJ8fHRoaXMuX2VsZXZhdGlvbkluZm9DaGFuZ2VBYm9ydENvbnRyb2xsZXJ8fHRoaXMuX3VwZGF0aW5nUGVuZGluZ0xvYWRlZEdyYXBoaWNzQ2hhbmdlfHx0aGlzLl9mcmFtZVRhc2sudXBkYXRpbmd8fHRoaXMuX2xvYWRpbmdTeW1ib2xzPjApfWdldCBydW5uaW5nKCl7cmV0dXJuIHRoaXMuX3BlbmRpbmdVcGRhdGVzLnNpemU+MHx8ISF0aGlzLl9zcGF0aWFsSW5kZXg/LnVwZGF0aW5nfWdldCBzdXNwZW5kZWRPck91dHNpZGVPZlZpZXcoKXtyZXR1cm4gdGhpcy5vd25lci5zdXNwZW5kZWR8fCEhdGhpcy5vd25lci5zdXNwZW5kSW5mbz8ub3V0c2lkZU9mVmlld31nZXQgdXBkYXRpbmdSZW1haW5pbmcoKXtyZXR1cm4gdGhpcy51cGRhdGluZz90aGlzLl9wZW5kaW5nVXBkYXRlcy5zaXplKy4xKih0aGlzLl9zcGF0aWFsSW5kZXg/LnVwZGF0aW5nUmVtYWluaW5nfHwwKSsuMSoodGhpcy5fZWxldmF0aW9uQWxpZ25tZW50Py51cGRhdGluZ1JlbWFpbmluZ3x8MCk6MH1nZXQgZGlzcGxheUZlYXR1cmVMaW1pdCgpe2NvbnN0IGU9dGhpcy5vd25lciYmdGhpcy5vd25lci52aWV3JiZ0aGlzLm93bmVyLnZpZXcucXVhbGl0eVNldHRpbmdzLHQ9ZT8uZ3JhcGhpY3MzRC5taW5Ub3RhbE51bWJlck9mRmVhdHVyZXM/PzAsaT1lPy5ncmFwaGljczNELm1heFRvdGFsTnVtYmVyT2ZGZWF0dXJlcz8/MCxyPWU/LmdyYXBoaWNzM0QubWF4TnVtYmVyT2ZEcmF3Q2FsbHM/PzAscz1lPy5ncmFwaGljczNELm1heFRvdGFsTnVtYmVyT2ZWZXJ0aWNlcz8/MCxhPXRoaXMuYXZlcmFnZVN5bWJvbENvbXBsZXhpdHksbj1NYXRoLm1heCgxLGE/LnZlcnRpY2VzUGVyRmVhdHVyZT8/MSksbz1hJiZhLmRyYXdDYWxsc1BlckZlYXR1cmU+MCYmcj4wP3IvYS5kcmF3Q2FsbHNQZXJGZWF0dXJlOmksbD1NYXRoLmNlaWwocy9uKSxoPU1hdGgubWF4KHQsTWF0aC5taW4oaSxsLG8pKSxkPXRoaXMuX2dldChcImRpc3BsYXlGZWF0dXJlTGltaXRcIik7cmV0dXJuIGQmJmQubWF4aW11bVRvdGFsTnVtYmVyT2ZWZXJ0aWNlcz09PXMmJmQuYXZlcmFnZVN5bWJvbENvbXBsZXhpdHk9PT1hJiZkLm1heGltdW1OdW1iZXJPZkZlYXR1cmVzPT09aD9kOm5ldyBLKHMsaCxhKX1nZXQgYXZlcmFnZVN5bWJvbENvbXBsZXhpdHkoKXtjb25zdCBlPVEodGhpcy5fc3ltYm9sQ29tcGxleGl0aWVzKSx0PXRoaXMuX2dldChcImF2ZXJhZ2VTeW1ib2xDb21wbGV4aXR5XCIpO3JldHVybiAwPT09ZS5udW1Db21wbGV4aXRpZXN8fG51bGwhPXQmJihlLmVzdGltYXRlZCYmKHQudmVydGljZXNQZXJGZWF0dXJlPj1lLnZlcnRpY2VzUGVyRmVhdHVyZXx8dC52ZXJ0aWNlc1BlckNvb3JkaW5hdGU+PWUudmVydGljZXNQZXJDb29yZGluYXRlfHx0LmRyYXdDYWxsc1BlckZlYXR1cmU+PWUuZHJhd0NhbGxzUGVyRmVhdHVyZSl8fHQudmVydGljZXNQZXJGZWF0dXJlPT09ZS52ZXJ0aWNlc1BlckZlYXR1cmUmJnQudmVydGljZXNQZXJDb29yZGluYXRlPT09ZS52ZXJ0aWNlc1BlckNvb3JkaW5hdGUmJnQuZHJhd0NhbGxzUGVyRmVhdHVyZT09PWUuZHJhd0NhbGxzUGVyRmVhdHVyZSk/dDplfWdldCB1c2VkTWVtb3J5KCl7Y29uc3QgZT1udWxsIT10aGlzLmF2ZXJhZ2VTeW1ib2xDb21wbGV4aXR5JiZ0aGlzLmxhYmVsc0VuYWJsZWQ/dGhpcy5hdmVyYWdlU3ltYm9sQ29tcGxleGl0eS5tZW1vcnkuYnl0ZXNQZXJGZWF0dXJlTGFiZWwqdGhpcy5fbnVtYmVyT2ZHcmFwaGljczowLHQ9dGhpcy5fZ2V0U3ltYm9sQ29tcGxleGl0aWVzVXNlZCgpLnJlZHVjZSgoKGUsdCk9PmUrdC5tZW1vcnkucmVzb3VyY2VCeXRlcyksMCksaT10aGlzLm93bmVyLnZpZXcuX3N0YWdlLnJlbmRlcmVyLHI9dGhpcy5vd25lci52aWV3LmJhc2VtYXBUZXJyYWluLm92ZXJsYXlNYW5hZ2VyLnJlbmRlcmVyLHM9QXJyYXkuZnJvbSh0aGlzLl9zeW1ib2xzLnZhbHVlcygpKS5yZWR1Y2UoKChlLHQpPT5lKyh0Py5zeW1ib2xMYXllcnMucmVkdWNlKCgoZSx0KT0+ZSsodD8ubWF0ZXJpYWxzLnJlZHVjZSgoKGUsdCk9PmUraS5nZXRNZW1vcnlGb3JNYXRlcmlhbCh0KStyLmdldE1lbW9yeUZvck1hdGVyaWFsKHQpKSwwKT8/MCkpLDApPz8wKSksMCk7cmV0dXJuIHRoaXMuX3VzZWRNZW1vcnkrZSt0K3N9Z2V0IHVzZWRNZW1vcnlQZXJHcmFwaGljKCl7aWYodGhpcy5fdXNlZE1lbW9yeSYmdGhpcy5fbnVtYmVyT2ZHcmFwaGljcyl7Y29uc3QgZT10aGlzLl9udW1iZXJPZkdyYXBoaWNzLyh0aGlzLl9udW1iZXJPZkdyYXBoaWNzK01hdGgubWF4KHRoaXMuX3BlbmRpbmdBZGRzLHRoaXMuX3BlbmRpbmdSZW1vdmVzKSk7cmV0dXJuIHRoaXMuX3VzZWRNZW1vcnkvdGhpcy5fbnVtYmVyT2ZHcmFwaGljcyplfWlmKG51bGwhPXRoaXMuYXZlcmFnZVN5bWJvbENvbXBsZXhpdHkpe2NvbnN0IGU9dGhpcy5sYWJlbHNFbmFibGVkP3RoaXMuYXZlcmFnZVN5bWJvbENvbXBsZXhpdHkubWVtb3J5LmJ5dGVzUGVyRmVhdHVyZUxhYmVsOjA7cmV0dXJuIHRoaXMuYXZlcmFnZVN5bWJvbENvbXBsZXhpdHkubWVtb3J5LmJ5dGVzUGVyRmVhdHVyZStlfXJldHVybiAwfWdldCB1bnByb2Nlc3NlZE1lbW9yeUVzdGltYXRlKCl7cmV0dXJuKHRoaXMuX3BlbmRpbmdBZGRzLXRoaXMuX3BlbmRpbmdSZW1vdmVzKSp0aGlzLnVzZWRNZW1vcnlQZXJHcmFwaGljfWdldCBfc3ltYm9sQ29tcGxleGl0aWVzKCl7cmV0dXJuIHRoaXMuY3VycmVudFJlbmRlcmVyP3RoaXMuX2dldFN5bWJvbENvbXBsZXhpdGllc1VzZWRPclJlbmRlcmVyKHRoaXMuY3VycmVudFJlbmRlcmVyKTp0aGlzLl9nZXRTeW1ib2xDb21wbGV4aXRpZXNVc2VkKCl9Z2V0IHZpc2libGUoKXtyZXR1cm4gdGhpcy5fdmlzaWJsZX1fZ2V0Q29udmVydGVkU3ltYm9sKGUpe2lmKFwid2ViLXN0eWxlXCI9PT1lLnR5cGUpcmV0dXJuIGUuY2xvbmUoKTtjb25zdCB0PXRoaXMuX3N5bWJvbENvbnZlcnNpb25DYWNoZS5nZXQoZS5pZCk7aWYobnVsbCE9dClyZXR1cm4gdDtjb25zdCBpPUooZSx7Z2VvbWV0cnlUeXBlOnRoaXMubGF5ZXI/Lmdlb21ldHJ5VHlwZT8/dm9pZCAwLHJldGFpbklkOiEwLGhhc0xhYmVsaW5nQ29udGV4dDp0aGlzLl9oYXNMYWJlbGluZ0NvbnRleHQoZSl9KSxyPWkuc3ltYm9sfHxudWxsO3JldHVybiBudWxsPT1yJiZpLmVycm9yJiZWZS5lcnJvcihpLmVycm9yLm1lc3NhZ2UpLHRoaXMuX3N5bWJvbENvbnZlcnNpb25DYWNoZS5zZXQoZS5pZCxyKSxyfV9nZXRTeW1ib2xDb21wbGV4aXRpZXNVc2VkT3JSZW5kZXJlcihlKXtpZihudWxsPT1lKXJldHVybltdO2NvbnN0IHQ9ZS5nZXRTeW1ib2xzKCksaT1cImJhY2tncm91bmRGaWxsU3ltYm9sXCJpbiBlP2UuYmFja2dyb3VuZEZpbGxTeW1ib2w6bnVsbDtpZighaSYmIXQ/Lmxlbmd0aClyZXR1cm5bXTtjb25zdCByPVtdLHM9dGhpcy5fZ2V0U3ltYm9sQ29tcGxleGl0eVVzZWRPclJlbmRlcmVyKGkpO251bGwhPXMmJnIucHVzaChzKTtmb3IoY29uc3QgYSBvZiB0KXtjb25zdCBlPXRoaXMuX2dldFN5bWJvbENvbXBsZXhpdHlVc2VkT3JSZW5kZXJlcihhKTtudWxsIT1lJiZyLnB1c2goZSl9cmV0dXJuIHJ9X2dldFN5bWJvbENvbXBsZXhpdHlVc2VkT3JSZW5kZXJlcihlKXtpZihudWxsPT1lKXJldHVybiBudWxsO2NvbnN0IHQ9dGhpcy5fc3ltYm9scy5nZXQoZS5pZCk7aWYobnVsbCE9dClyZXR1cm4gdC5jb21wbGV4aXR5O2NvbnN0IGk9dGhpcy5fZ2V0Q29udmVydGVkU3ltYm9sKGUpO3JldHVybiBudWxsIT1pP1goaSk6bnVsbH1fZ2V0U3ltYm9sQ29tcGxleGl0aWVzVXNlZCgpe2NvbnN0IGU9W107cmV0dXJuIHRoaXMuX3N5bWJvbHMuZm9yRWFjaCgodD0+e251bGwhPXQmJmUucHVzaCh0LmNvbXBsZXhpdHkpfSkpLGV9Z2V0IF9vYmplY3RJZEZpZWxkKCl7cmV0dXJuIHRoaXMubGF5ZXIub2JqZWN0SWRGaWVsZH1jb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9wcm9wZXJ0aWVzUG9vbD1uZXcgYmUoe2NvbXB1dGVkRXh0ZW50OnhlfSx0aGlzKSx0aGlzLmNvbXB1dGVkRXh0ZW50PW51bGwsdGhpcy5jdXJyZW50UmVuZGVyZXI9bnVsbCx0aGlzLnJlbmRlcmVySGFzR2VvbWV0cnlPcGVyYXRpb25zPSExLHRoaXMuX2dyYXBoaWNTdGF0ZVRyYWNraW5nPW51bGwsdGhpcy5ncmFwaGljczNER3JhcGhpY3M9bmV3IE1hcCx0aGlzLnN0YWdlTGF5ZXI9bnVsbCx0aGlzLnN0YWdlPW51bGwsdGhpcy5fZ3JhcGhpY3NEcmFwZWRVaWRzPW5ldyBTZXQsdGhpcy5fZ3JhcGhpY3NCeVN5bWJvbD1uZXcgTWFwLHRoaXMuX3N5bWJvbENvbnZlcnNpb25DYWNoZT1uZXcgTWFwLHRoaXMuX3N5bWJvbHM9bmV3IE1hcCx0aGlzLl9ncmFwaGljc1dpdGhvdXRTeW1ib2w9bmV3IE1hcCx0aGlzLl9ncmFwaGljc1dhaXRpbmdGb3JTeW1ib2w9bmV3IE1hcCx0aGlzLl9ncmFwaGljc1VwZGF0ZUlkPTAsdGhpcy5fZnJhbWVUYXNrPXdlLHRoaXMuX3N1c3BlbmRTeW1ib2xDbGVhbnVwPSExLHRoaXMuX2FyY2FkZU9uRGVtYW5kPW51bGwsdGhpcy5fcmVuZGVyZXJDaGFuZ2VBYm9ydENvbnRyb2xsZXI9bnVsbCx0aGlzLl9lbGV2YXRpb25JbmZvQ2hhbmdlQWJvcnRDb250cm9sbGVyPW51bGwsdGhpcy5faW5pdGlhbGl6ZUFib3J0Q29udHJvbGxlcj1udWxsLHRoaXMuX3NjYWxlVmlzaWJpbGl0eT1udWxsLHRoaXMuX2ZpbHRlclZpc2liaWxpdHk9bnVsbCx0aGlzLl9zcGF0aWFsSW5kZXg9bnVsbCx0aGlzLmV4dGVudFBhZGRpbmc9MCx0aGlzLl91cGRhdGluZ1BlbmRpbmdMb2FkZWRHcmFwaGljc0NoYW5nZT1udWxsLHRoaXMuX2ZlYXR1cmVTdG9yZT1udWxsLHRoaXMuX2RlY29uZmxpY3Rvcj1udWxsLHRoaXMuX2xhYmVsZXI9bnVsbCx0aGlzLl9vYmplY3RTdGF0ZXM9bnVsbCx0aGlzLl92aWV3RWxldmF0aW9uUHJvdmlkZXI9bnVsbCx0aGlzLl9zdGFnZUxheWVyRWxldmF0aW9uUHJvdmlkZXI9bnVsbCx0aGlzLl9zaGFyZWRTeW1ib2xSZXNvdXJjZXNPd25lckhhbmRsZT1udWxsLHRoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzPXt9LHRoaXMuX3BlbmRpbmdVcGRhdGVzPW5ldyBNYXAsdGhpcy5fbnVtYmVyT2ZHcmFwaGljcz0wLHRoaXMuX251bWJlck9mR3JhcGhpY3NQcm92aWRpbmdFbGV2YXRpb249MCx0aGlzLl9wZW5kaW5nQWRkcz0wLHRoaXMuX3BlbmRpbmdSZW1vdmVzPTAsdGhpcy5fYXBwbHlQZW5kaW5nUmVtb3Zlc0ZpcnN0PSExLHRoaXMuX2xvYWRpbmdTeW1ib2xzPTAsdGhpcy5fcGVuZGluZ1VwZGF0ZXNQb29sPW5ldyBjKHthbGxvY2F0b3I6ZT0+ZXx8bmV3IGtlLGRlYWxsb2NhdG9yOmU9PihlLmNsZWFyKCksZSl9KSx0aGlzLl9zeW1ib2xXYXJuaW5nTG9nZ2VkPSExLHRoaXMuX2dlb21ldHJ5V2FybmluZ0xvZ2dlZD0hMSx0aGlzLl9vYmplY3RJZEludmlzaWJsZVNldD1uZXcgU2V0LHRoaXMuX3doZW5TeW1ib2xSZW1vdmVkPW5ldyBjLHRoaXMucHJlZmVycmVkVXBkYXRlUG9saWN5PWZlLlNZTkMsdGhpcy5fZm9yY2VkVXBkYXRlUG9saWN5PW51bGwsdGhpcy5lbGV2YXRpb25GZWF0dXJlRXhwcmVzc2lvbkVuYWJsZWQ9ITAsdGhpcy5vd25lcj1udWxsLHRoaXMubGF5ZXI9bnVsbCx0aGlzLmdyYXBoaWNTeW1ib2xTdXBwb3J0ZWQ9ITAsdGhpcy5nZXRSZW5kZXJpbmdJbmZvV2l0aG91dFJlbmRlcmVyPSExLHRoaXMuc2V0VWlkVG9JZE9uQWRkPSEwLHRoaXMuaGFzWj1udWxsLHRoaXMuaGFzTT1udWxsLHRoaXMuX3VzZWRNZW1vcnk9MCx0aGlzLl92aXNpYmxlPSExLHRoaXMuX3N0YXJ0Q3JlYXRlR3JhcGhpY3M9ITEsdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQ9bmV3IG9lKGUub3duZXIudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyLCgoZSx0KT0+dGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKGUsdCkpKX1pbml0aWFsaXplKCl7dGhpcy5fZmVhdHVyZVN0b3JlPW5ldyBhZSh7b2JqZWN0SWRGaWVsZDp0aGlzLm93bmVyLmxheWVyPy5vYmplY3RJZEZpZWxkLGhhc1o6ISF0aGlzLmhhc1osaGFzTTohIXRoaXMuaGFzTSx2aWV3U3BhdGlhbFJlZmVyZW5jZTp0aGlzLl92aWV3U3BhdGlhbFJlZmVyZW5jZSxmZWF0dXJlU3BhdGlhbFJlZmVyZW5jZTp0aGlzLm93bmVyLmZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlLGdldFNwYXRpYWxJbmRleDooKT0+dGhpcy5zcGF0aWFsSW5kZXgsZm9yRWFjaDplPT50aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5mb3JFYWNoKGUpfSk7Y29uc3QgZT0oZSx0LGkpPT50aGlzLnNwYXRpYWxJbmRleC5xdWVyeUdyYXBoaWNVSURzSW5FeHRlbnQoZSx0LGkpLHtjb21wb25lbnRGYWN0b3JpZXM6dH09dGhpcztpZihudWxsIT10LmVsZXZhdGlvbkFsaWdubWVudCl7Y29uc3QgaT10LmVsZXZhdGlvbkFsaWdubWVudCh0aGlzLGUpO3RoaXMuX2VsZXZhdGlvbkFsaWdubWVudD1pfWlmKG51bGwhPXQuc2NhbGVWaXNpYmlsaXR5KXtjb25zdCBpPXQuc2NhbGVWaXNpYmlsaXR5KHRoaXMsZSk7dGhpcy5fc2NhbGVWaXNpYmlsaXR5PWl9aWYobnVsbCE9dC5maWx0ZXJWaXNpYmlsaXR5KXtjb25zdCBlPXQuZmlsdGVyVmlzaWJpbGl0eSh7ZmVhdHVyZVN0b3JlOnRoaXMuX2ZlYXR1cmVTdG9yZSxnZXRGZWF0dXJlQ291bnQ6KCk9PnRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLnNpemUsdXBkYXRlRmVhdHVyZVZpc2liaWxpdGllczplPT50aGlzLm1vZGlmeUdyYXBoaWNzM0RHcmFwaGljVmlzaWJpbGl0aWVzKCh0PT50LnNldFZpc2liaWxpdHlGbGFnKHRlLkdSQVBISUMsaWUuRklMVEVSLGUoTSh0LmdyYXBoaWMsdGhpcy5fb2JqZWN0SWRGaWVsZCkpKSkpLHNldEFsbEZlYXR1cmVzVmlzaWJpbGl0eTplPT50aGlzLm1vZGlmeUdyYXBoaWNzM0RHcmFwaGljVmlzaWJpbGl0aWVzKCh0PT50LnNldFZpc2liaWxpdHlGbGFnKHRlLkdSQVBISUMsaWUuRklMVEVSLGUpKSksY2xlYXJGZWF0dXJlc1Zpc2liaWxpdHk6KCk9PnRoaXMubW9kaWZ5R3JhcGhpY3MzREdyYXBoaWNWaXNpYmlsaXRpZXMoKGU9PmUuc2V0VmlzaWJpbGl0eUZsYWcodGUuR1JBUEhJQyxpZS5GSUxURVIsITApKSl9KTt0aGlzLl9maWx0ZXJWaXNpYmlsaXR5PWV9aWYobnVsbCE9dC5kZWNvbmZsaWN0b3Ipe2NvbnN0IGU9dC5kZWNvbmZsaWN0b3IodGhpcyk7dGhpcy5fZGVjb25mbGljdG9yPWV9aWYobnVsbCE9dC5sYWJlbGVyJiZudWxsIT10aGlzLl9zY2FsZVZpc2liaWxpdHkpe2NvbnN0IGU9dC5sYWJlbGVyKHRoaXMsdGhpcy5fc2NhbGVWaXNpYmlsaXR5KTt0aGlzLl9sYWJlbGVyPWV9aWYobnVsbCE9dC5vYmplY3RTdGF0ZXMpe2NvbnN0IGU9dC5vYmplY3RTdGF0ZXModGhpcyk7dGhpcy5fb2JqZWN0U3RhdGVzPWV9dGhpcy5faW5pdGlhbGl6ZUFib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyLHRoaXMuX2luaXRpYWxpemVQcm9taXNlPXRoaXMuX2luaXRpYWxpemVBc3luYygpfWFzeW5jIF9pbml0aWFsaXplQXN5bmMoKXtjb25zdCBlPXRoaXMuX2luaXRpYWxpemVBYm9ydENvbnRyb2xsZXI/LnNpZ25hbCx0PXRoaXMub3duZXIudmlldzt0aGlzLl92aWV3RWxldmF0aW9uUHJvdmlkZXI9bmV3IGVlKHRoaXMuX3ZpZXdTcGF0aWFsUmVmZXJlbmNlLHQpLHRoaXMuX2luaXRpYWxpemVTdGFnZSh0LHRoaXMubGF5ZXIudWlkKTtjb25zdCBpPXQuc2hhcmVkU3ltYm9sUmVzb3VyY2VzO3RoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnNoYXJlZFJlc291cmNlcz1pLHRoaXMuX3NoYXJlZFN5bWJvbFJlc291cmNlc093bmVySGFuZGxlPWkuYWRkR3JhcGhpY3NPd25lcih0aGlzLm93bmVyKSxudWxsIT10aGlzLmN1cnJlbnRSZW5kZXJlciYmKHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnJlbmRlcmVyPXRoaXMuY3VycmVudFJlbmRlcmVyKSx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5zdGFnZT10aGlzLnN0YWdlLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnN0cmVhbURhdGFSZXF1ZXN0ZXI9aS5zdHJlYW1EYXRhUmVxdWVzdGVyLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnJlbmRlckNvb3Jkc0hlbHBlcj10LnJlbmRlckNvb3Jkc0hlbHBlcix0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5sYXllcj10aGlzLmxheWVyLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmdyYXBoaWNzQ29yZU93bmVyPXRoaXMub3duZXIsdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQubG9jYWxPcmlnaW5GYWN0b3J5PW5ldyBfZSh0LnJlbmRlclNwYXRpYWxSZWZlcmVuY2UpLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmVsZXZhdGlvblByb3ZpZGVyPXQuZWxldmF0aW9uUHJvdmlkZXIsdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQubm90aWZ5R3JhcGhpY0dlb21ldHJ5Q2hhbmdlZD1lPT50aGlzLm5vdGlmeUdyYXBoaWNHZW9tZXRyeUNoYW5nZWQoZSksdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQubm90aWZ5R3JhcGhpY1Zpc2liaWxpdHlDaGFuZ2VkPWU9PnRoaXMubm90aWZ5R3JhcGhpY1Zpc2liaWxpdHlDaGFuZ2VkKGUpO2NvbnN0IHI9cmUodGhpcy5sYXllci5lbGV2YXRpb25JbmZvLHRoaXMuZWxldmF0aW9uRmVhdHVyZUV4cHJlc3Npb25FbmFibGVkKTtpZih0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5mZWF0dXJlRXhwcmVzc2lvbkluZm9Db250ZXh0PWF3YWl0IHNlKHIsdGhpcy5fdmlld1NwYXRpYWxSZWZlcmVuY2UsZSxWZSkseShlKSx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5zY3JlZW5TaXplUGVyc3BlY3RpdmVFbmFibGVkPXQuc2NyZWVuU2l6ZVBlcnNwZWN0aXZlRW5hYmxlZCYmISF0aGlzLmxheWVyLnNjcmVlblNpemVQZXJzcGVjdGl2ZUVuYWJsZWQsdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQuc2xpY2VQbGFuZUVuYWJsZWQ9ISF0aGlzLm93bmVyLnNsaWNlUGxhbmVFbmFibGVkLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnBoeXNpY2FsQmFzZWRSZW5kZXJpbmdFbmFibGVkPSEhdGhpcy5vd25lci52aWV3LnF1YWxpdHlTZXR0aW5ncz8ucGh5c2ljYWxseUJhc2VkUmVuZGVyaW5nRW5hYmxlZCx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5za2lwSGlnaFN5bWJvbExvZHM9ISF0aGlzLm93bmVyLnZpZXcucXVhbGl0eVNldHRpbmdzPy5ncmFwaGljczNEPy5za2lwSGlnaFN5bWJvbExvZHMsXCJkcmFwZVNvdXJjZVR5cGVcImluIHRoaXMub3duZXIpe2NvbnN0e293bmVyOmV9PXRoaXM7dGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQuZHJhcGVTb3VyY2VSZW5kZXJlcj10LmJhc2VtYXBUZXJyYWluLm92ZXJsYXlNYW5hZ2VyLnJlZ2lzdGVyR2VvbWV0cnlEcmFwZVNvdXJjZShlKSx0aGlzLmFkZEhhbmRsZXMobigoKCk9PnQuYmFzZW1hcFRlcnJhaW4ub3ZlcmxheU1hbmFnZXIudW5yZWdpc3RlckRyYXBlU291cmNlKGUpKSkpfXRoaXMuYWRkSGFuZGxlcyhbdSgoKCk9PnRoaXMuc3VzcGVuZGVkT3JPdXRzaWRlT2ZWaWV3KSwoKCk9PnRoaXMuX2ZyYW1lVGFzay5yZXNjaGVkdWxlKCgoKT0+dGhpcy5fdXBkYXRlTGF5ZXJWaXNpYmlsaXR5KCkpKSkpLHUoKCgpPT5bdGhpcy5sYXllcj8uc2NyZWVuU2l6ZVBlcnNwZWN0aXZlRW5hYmxlZCx0aGlzLm93bmVyLnZpZXc/LnNjcmVlblNpemVQZXJzcGVjdGl2ZUVuYWJsZWRdKSwoKCk9Pntjb25zdCBlPXQuc2NyZWVuU2l6ZVBlcnNwZWN0aXZlRW5hYmxlZCYmISF0aGlzLmxheWVyLnNjcmVlblNpemVQZXJzcGVjdGl2ZUVuYWJsZWQ7ZSE9PXRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnNjcmVlblNpemVQZXJzcGVjdGl2ZUVuYWJsZWQmJih0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5zY3JlZW5TaXplUGVyc3BlY3RpdmVFbmFibGVkPWUsdGhpcy5fbGFiZWxlcj8ucmVzZXQoKSx0aGlzLnJlY3JlYXRlQWxsR3JhcGhpY3NBbmRTeW1ib2xzKCkpfSkpLHUoKCgpPT50aGlzLm93bmVyLnNsaWNlUGxhbmVFbmFibGVkKSwoZT0+dGhpcy5fc2xpY2VQbGFuZUVuYWJsZWRDaGFuZ2UoISFlKSkpLHUoKCgpPT50aGlzLm93bmVyLnZpZXcuc3RhdGU/LnJhc3RlclBpeGVsUmF0aW8pLCgoKT0+dGhpcy5fcGl4ZWxSYXRpb0NoYW5nZSgpKSksdSgoKCk9PiEhdGhpcy5vd25lci52aWV3LnF1YWxpdHlTZXR0aW5ncz8ucGh5c2ljYWxseUJhc2VkUmVuZGVyaW5nRW5hYmxlZCksKGU9PnRoaXMuX3BoeXNpY2FsQmFzZWRSZW5kZXJpbmdDaGFuZ2UoZSkpKSx1KCgoKT0+ISF0aGlzLm93bmVyLnZpZXcucXVhbGl0eVNldHRpbmdzPy5ncmFwaGljczNEPy5za2lwSGlnaFN5bWJvbExvZHMpLChlPT50aGlzLl9za2lwSGlnaFN5bWJvbExvRHNDaGFuZ2UoZSkpKSxiKCgoKT0+dC5iYXNlbWFwVGVycmFpbj8udGlsaW5nU2NoZW1lKSwoZT0+e2lmKGUuc3BhdGlhbFJlZmVyZW5jZS5lcXVhbHModGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQub3ZlcmxheVNSKXx8bnVsbD09dC5iYXNlbWFwVGVycmFpbi5zcGF0aWFsUmVmZXJlbmNlfHwodGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQub3ZlcmxheVNSPXQuYmFzZW1hcFRlcnJhaW4uc3BhdGlhbFJlZmVyZW5jZSksdGhpcy5oYXNIYW5kbGVzKFwibG9hZGVkLWdyYXBoaWNzXCIpKXRoaXMucmVjcmVhdGVBbGxHcmFwaGljcygpO2Vsc2V7Y29uc3QgZT0oKT0+dGhpcy5vd25lcj8ubG9hZGVkR3JhcGhpY3M7dGhpcy5hZGRIYW5kbGVzKFtfKGUsXCJjaGFuZ2VcIiwoZT0+e3RoaXMuX2dyYXBoaWNzQ29sbGVjdGlvbkNoYW5nZWQoZSksdGhpcy5fc2lnbmFsVXBkYXRpbmdEdXJpbmdBc3luY0xvYWRlZEdyYXBoaWNzQ2hhbmdlKCl9KSx7b25MaXN0ZW5lckFkZDooKT0+e3RoaXMucmVjcmVhdGVBbGxHcmFwaGljcygpLHRoaXMuX3NpZ25hbFVwZGF0aW5nRHVyaW5nQXN5bmNMb2FkZWRHcmFwaGljc0NoYW5nZSgpfX0pXSxcImxvYWRlZC1ncmFwaGljc1wiKX19KSx7aW5pdGlhbDohMH0pLHUoKCgpPT50aGlzLmVmZmVjdGl2ZVVwZGF0ZVBvbGljeSksKGU9PntudWxsIT10aGlzLnN0YWdlTGF5ZXImJih0aGlzLnN0YWdlTGF5ZXIudXBkYXRlUG9saWN5PWUpLHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmlzQXN5bmM9dGhpcy5lZmZlY3RpdmVVcGRhdGVQb2xpY3k9PT1mZS5BU1lOQyxlPT09ZmUuU1lOQyYmdGhpcy5ydW5UYXNrKEdlKX0pLGYpXSksdGhpcy5fZnJhbWVUYXNrPXQucmVzb3VyY2VDb250cm9sbGVyLnNjaGVkdWxlci5yZWdpc3RlclRhc2soUmUuR1JBUEhJQ1NfQ09SRSx0aGlzKSx0aGlzLmxheWVyJiZcImZlYXR1cmVSZWR1Y3Rpb25cImluIHRoaXMubGF5ZXImJnRoaXMuYWRkSGFuZGxlcyh1KCgoKT0+dGhpcy5sYXllci5mZWF0dXJlUmVkdWN0aW9uKSwoKCk9PnRoaXMuX2RlY29uZmxpY3Rvci5mZWF0dXJlUmVkdWN0aW9uQ2hhbmdlKCkpKSksdGhpcy5ub3RpZnlDaGFuZ2UoXCJhdmVyYWdlU3ltYm9sQ29tcGxleGl0eVwiKSx0aGlzLnJlbmRlcmVyQ2hhbmdlKHRoaXMub3duZXIucmVuZGVyZXIpLmNhdGNoKCgoKT0+e30pKSx0aGlzLl9pbml0aWFsaXplQWJvcnRDb250cm9sbGVyPW51bGx9X2Fib3J0SW5pdGlhbGl6ZSgpe3RoaXMuX2luaXRpYWxpemVBYm9ydENvbnRyb2xsZXImJih0aGlzLl9pbml0aWFsaXplQWJvcnRDb250cm9sbGVyLmFib3J0KCksdGhpcy5faW5pdGlhbGl6ZUFib3J0Q29udHJvbGxlcj1udWxsKX1kZXN0cm95KCl7dGhpcy5fYWJvcnRJbml0aWFsaXplKCksdGhpcy5fYWJvcnRSZW5kZXJlckNoYW5nZSgpLHRoaXMuX2Fib3J0RWxldmF0aW9uSW5mb0NoYW5nZSgpLHRoaXMuX2ZyYW1lVGFzay5yZW1vdmUoKSx0aGlzLl9mcmFtZVRhc2s9d2UsdGhpcy5vd25lci52aWV3Py5kZWNvbmZsaWN0b3I/LnJlbW92ZUdyYXBoaWNzT3duZXIodGhpcyksdGhpcy5vd25lci52aWV3Py5sYWJlbGVyPy5yZW1vdmVHcmFwaGljc093bmVyKHRoaXMpLHRoaXMuX2VsZXZhdGlvbkFsaWdubWVudD1oKHRoaXMuX2VsZXZhdGlvbkFsaWdubWVudCksdGhpcy5fc2NhbGVWaXNpYmlsaXR5PWgodGhpcy5fc2NhbGVWaXNpYmlsaXR5KSx0aGlzLl9maWx0ZXJWaXNpYmlsaXR5PWgodGhpcy5fZmlsdGVyVmlzaWJpbGl0eSksdGhpcy5fZGVjb25mbGljdG9yPW51bGwsdGhpcy5fbGFiZWxlcj1udWxsLHRoaXMuX29iamVjdFN0YXRlcz1oKHRoaXMuX29iamVjdFN0YXRlcyksdGhpcy5jbGVhcigpLHRoaXMuX2ZlYXR1cmVTdG9yZT1oKHRoaXMuX2ZlYXR1cmVTdG9yZSksdGhpcy5fdXBkYXRpbmdQZW5kaW5nTG9hZGVkR3JhcGhpY3NDaGFuZ2U9ZCh0aGlzLl91cGRhdGluZ1BlbmRpbmdMb2FkZWRHcmFwaGljc0NoYW5nZSksdGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmc9aCh0aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZyksdGhpcy5zdGFnZSYmKHRoaXMuc3RhZ2VMYXllcj1oKHRoaXMuc3RhZ2VMYXllciksdGhpcy5zdGFnZT1udWxsKSx0aGlzLl9zZXQoXCJvd25lclwiLG51bGwpO2Zvcihjb25zdCBlIGluIHRoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzKXRoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzW2VdLnJlamVjdChuZXcgYShcImdyYXBoaWM6bGF5ZXItZGVzdHJveWVkXCIsXCJMYXllciBoYXMgYmVlbiBkZXN0cm95ZWRcIikpO3RoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzPW51bGwsdGhpcy5fc2hhcmVkU3ltYm9sUmVzb3VyY2VzT3duZXJIYW5kbGU9ZCh0aGlzLl9zaGFyZWRTeW1ib2xSZXNvdXJjZXNPd25lckhhbmRsZSksdGhpcy5fcHJvcGVydGllc1Bvb2w9aCh0aGlzLl9wcm9wZXJ0aWVzUG9vbCksdGhpcy5fcGVuZGluZ1VwZGF0ZXNQb29sPW51bGwsdGhpcy5fc3ltYm9sQ29udmVyc2lvbkNhY2hlLmNsZWFyKCksdGhpcy5fb2JqZWN0SWRJbnZpc2libGVTZXQuY2xlYXIoKSx0aGlzLl9zcGF0aWFsSW5kZXg9aCh0aGlzLl9zcGF0aWFsSW5kZXgpfWNsZWFyKCl7dGhpcy5fb2JqZWN0U3RhdGVzPy5hbGxHcmFwaGljc0RlbGV0ZWQoKSxudWxsIT10aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZyYmdGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmcuYWxsR3JhcGhpY3NEZWxldGVkKCksdGhpcy5ncmFwaGljczNER3JhcGhpY3MuZm9yRWFjaCgoZT0+ZS5kZXN0cm95KCkpKSx0aGlzLl9zcGF0aWFsSW5kZXg/LmNsZWFyKCksdGhpcy5ncmFwaGljczNER3JhcGhpY3MuY2xlYXIoKSx0aGlzLl9udW1iZXJPZkdyYXBoaWNzPTAsdGhpcy5fdXNlZE1lbW9yeT0wLHRoaXMuX3VwZGF0ZUxheWVyVmlzaWJpbGl0eSgpLHRoaXMuX3N5bWJvbHMuZm9yRWFjaChoKSx0aGlzLl9zeW1ib2xzLmNsZWFyKCksdGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5jbGVhcigpLHRoaXMuX2dyYXBoaWNzV2l0aG91dFN5bWJvbC5jbGVhcigpLHRoaXMuX2dyYXBoaWNzV2FpdGluZ0ZvclN5bWJvbC5jbGVhcigpLHRoaXMuX3BlbmRpbmdVcGRhdGVzLmNsZWFyKCksdGhpcy5fcGVuZGluZ1VwZGF0ZXNQb29sLmNsZWFyKCksdGhpcy5fcGVuZGluZ0FkZHM9MCx0aGlzLl9wZW5kaW5nUmVtb3Zlcz0wLHRoaXMuX2FwcGx5UGVuZGluZ1JlbW92ZXNGaXJzdD0hMSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpLHRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nUmVtYWluaW5nXCIpLHRoaXMuX2ZlYXR1cmVTdG9yZS5ldmVudHMuZW1pdChcImNoYW5nZWRcIil9X2luaXRpYWxpemVTdGFnZShlLHQpe3RoaXMuc3RhZ2U9ZS5fc3RhZ2UsdGhpcy5zdGFnZUxheWVyPW5ldyBDZSh0aGlzLnN0YWdlLHtwaWNrYWJsZTohdGhpcy5zdXNwZW5kZWRPck91dHNpZGVPZlZpZXcsdXBkYXRlUG9saWN5OnRoaXMuZWZmZWN0aXZlVXBkYXRlUG9saWN5fSx0KTtjb25zdCBpPXRoaXMuc3RhZ2VMYXllci5ldmVudHM7aS5vbihcInRyYW5zZm9ybWF0aW9uQ2hhbmdlZFwiLChlPT50aGlzLm5vdGlmeUdyYXBoaWNHZW9tZXRyeUNoYW5nZWQoZS5ncmFwaGljVWlkKSkpLGkub24oXCJzaGFkZXJUcmFuc2Zvcm1hdGlvbkNoYW5nZWRcIiwoZT0+dGhpcy5ub3RpZnlHcmFwaGljR2VvbWV0cnlDaGFuZ2VkKGUuZ3JhcGhpY1VpZCkpKSxpLm9uKFwidmlzaWJpbGl0eUNoYW5nZWRcIiwoZT0+dGhpcy5ub3RpZnlHcmFwaGljVmlzaWJpbGl0eUNoYW5nZWQoZS5ncmFwaGljVWlkKSkpLGkub24oXCJnZW9tZXRyeUFkZGVkXCIsKGU9PnRoaXMubm90aWZ5R3JhcGhpY0dlb21ldHJ5Q2hhbmdlZChlLm9iamVjdC5ncmFwaGljVWlkKSkpLGkub24oXCJnZW9tZXRyeVJlbW92ZWRcIiwoZT0+dGhpcy5ub3RpZnlHcmFwaGljR2VvbWV0cnlDaGFuZ2VkKGUub2JqZWN0LmdyYXBoaWNVaWQpKSksaS5vbihcImF0dHJpYnV0ZXNDaGFuZ2VkXCIsKGU9PnZlKGUuYXR0cmlidXRlKSYmdGhpcy5ub3RpZnlHcmFwaGljR2VvbWV0cnlDaGFuZ2VkKGUub2JqZWN0LmdyYXBoaWNVaWQpKSl9bm90aWZ5R3JhcGhpY0dlb21ldHJ5Q2hhbmdlZChlKXtpZihudWxsPT10aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZ3x8bnVsbD09ZSlyZXR1cm47Y29uc3QgdD10aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQoZSk7dCYmdGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmcudXBkYXRlR3JhcGhpY0dlb21ldHJ5KHQpfW5vdGlmeUdyYXBoaWNWaXNpYmlsaXR5Q2hhbmdlZChlKXtpZihudWxsPT10aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZ3x8bnVsbD09ZSlyZXR1cm47Y29uc3QgdD10aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQoZSk7dCYmdGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmcudXBkYXRlR3JhcGhpY1Zpc2liaWxpdHkodCl9X3VwZGF0ZUxheWVyVmlzaWJpbGl0eSgpe2NvbnN0IGU9dGhpcy5kaXNwbGF5RmVhdHVyZUxpbWl0Lm1heGltdW1OdW1iZXJPZkZlYXR1cmVzLHQ9dGhpcy5fbnVtYmVyT2ZHcmFwaGljcz5lKnplLGk9IXRoaXMuc3VzcGVuZGVkT3JPdXRzaWRlT2ZWaWV3JiYhdDtpIT09dGhpcy5fdmlzaWJsZSYmKHRoaXMuX3Zpc2libGU9aSxpPyh0aGlzLnN0YWdlTGF5ZXIucGlja2FibGU9ITAsdGhpcy51cGRhdGVBbGxHcmFwaGljc1Zpc2liaWxpdHkoKSk6KHRoaXMuc3RhZ2VMYXllci5waWNrYWJsZT0hMSx0aGlzLl9oaWRlQWxsR3JhcGhpY3MoKSksdGhpcy5fdXBkYXRlU3RhZ2VMYXllclZpc2liaWxpdHkoKSl9X3VwZGF0ZVN0YWdlTGF5ZXJWaXNpYmlsaXR5KCl7dGhpcy5zdGFnZUxheWVyLnZpc2libGU9dGhpcy5fdmlzaWJsZSYmKG51bGw9PXRoaXMubGF5ZXIub3BhY2l0eXx8dGhpcy5sYXllci5vcGFjaXR5PjApfWdldEdyYXBoaWNzM0RHcmFwaGljQnlJZChlKXtyZXR1cm4gbnVsbCE9ZT90aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQoZSk6dm9pZCAwfWdldEdyYXBoaWNzM0RHcmFwaGljQnlPYmplY3RJZChlKXtyZXR1cm4gdGhpcy5vd25lci5sYXllcj8ub2JqZWN0SWRGaWVsZD90aGlzLl9maW5kR3JhcGhpY3MzREdyYXBoaWNCeU9iamVjdElkKGUpOm51bGx9X2dldEdyYXBoaWNPYmplY3RJRChlLHQ9dGhpcy5vd25lci5sYXllcj8ub2JqZWN0SWRGaWVsZCl7cmV0dXJuIE0oZSx0KX1nZXQgZ3JhcGhpY3MzREdyYXBoaWNzQnlPYmplY3RJRCgpe2NvbnN0IGU9dGhpcy5vd25lci5sYXllcj8ub2JqZWN0SWRGaWVsZDtpZighZSlyZXR1cm47Y29uc3QgdD1uZXcgTWFwO3JldHVybiB0aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5mb3JFYWNoKChpPT57aWYoIWkpcmV0dXJuO2NvbnN0IHI9aS5ncmFwaGljLHM9dGhpcy5fZ2V0R3JhcGhpY09iamVjdElEKHIsZSk7bnVsbCE9cyYmdC5zZXQocyxpKX0pKSx0fWdldCBsYWJlbHNFbmFibGVkKCl7cmV0dXJuISghdGhpcy5fbGFiZWxlcnx8IXRoaXMuX2xhYmVsZXIubGF5ZXJMYWJlbHNFbmFibGVkKCkpfWFzeW5jIHVwZGF0ZUxhYmVsaW5nSW5mbyhlKXtjb25zdCB0PXRoaXMuX2RlY29uZmxpY3RvciYmdGhpcy5fZGVjb25mbGljdG9yLmxhYmVsaW5nSW5mb0NoYW5nZShlKSxpPXRoaXMuX2xhYmVsZXImJnRoaXMuX2xhYmVsZXIubGFiZWxpbmdJbmZvQ2hhbmdlKGUpO2F3YWl0IFByb21pc2UuYWxsU2V0dGxlZChbdCxpXSl9dXBkYXRlVmlzaWJpbGl0eUluZm8oKXt0aGlzLl9kZWNvbmZsaWN0b3ImJnRoaXMuX2RlY29uZmxpY3Rvci5sYWJlbGluZ0luZm9DaGFuZ2UoKSx0aGlzLl9sYWJlbGVyJiZ0aGlzLl9sYWJlbGVyLnZpc2liaWxpdHlJbmZvQ2hhbmdlKCl9Z2V0IHN5bWJvbFVwZGF0ZVR5cGUoKXtpZih0aGlzLl9wZW5kaW5nVXBkYXRlcy5zaXplPjApcmV0dXJuXCJ1bmtub3duXCI7bGV0IGU9MCx0PTA7cmV0dXJuIG8odGhpcy5fc3ltYm9scywoKGkscik9PntpZihudWxsIT1pKXtjb25zdCBzPWkuZ2V0RmFzdFVwZGF0ZVN0YXR1cygpO2lmKHMubG9hZGluZz4wKXJldHVybiEwO3RoaXMuX2dyYXBoaWNzQnlTeW1ib2wuaGFzKHIpJiYodCs9cy5mYXN0LGUrPXMuc2xvdyl9cmV0dXJuITF9KSk/XCJ1bmtub3duXCI6dD49MCYmMD09PWU/XCJmYXN0XCI6ZT49MCYmMD09PXQ/XCJzbG93XCI6XCJtaXhlZFwifXJ1blRhc2soZSl7aWYodGhpcy5fZnJhbWVUYXNrLnByb2Nlc3NRdWV1ZShlKSx0aGlzLl9hcHBseVBlbmRpbmdVcGRhdGVzKGUpLHRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKSx0aGlzLnJ1bm5pbmd8fHRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIiksdGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1JlbWFpbmluZ1wiKSwhZS5oYXNQcm9ncmVzc2VkKXJldHVybiBQZS5ZSUVMRH1zZXRPYmplY3RJZFZpc2liaWxpdHkoZSx0KXt0P3RoaXMuX29iamVjdElkSW52aXNpYmxlU2V0LmRlbGV0ZShlKTp0aGlzLl9vYmplY3RJZEludmlzaWJsZVNldC5hZGQoZSk7Y29uc3QgaT10aGlzLl9maW5kR3JhcGhpY3MzREdyYXBoaWNCeU9iamVjdElkKGUpO251bGwhPWkmJnRoaXMuX3VwZGF0ZVVzZXJWaXNpYmlsaXR5KGkpfV9maW5kR3JhcGhpY3MzREdyYXBoaWNCeU9iamVjdElkKGUpe3JldHVybiBsKHRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLCh0PT50aGlzLl9nZXRHcmFwaGljT2JqZWN0SUQodC5ncmFwaGljKT09PWUpKX1fdXBkYXRlVXNlclZpc2liaWxpdHkoZSl7aWYobnVsbD09ZSlyZXR1cm4hMTtjb25zdCB0PWUuZ3JhcGhpYyxpPXRoaXMuX2dldEdyYXBoaWNPYmplY3RJRCh0KSxyPXQudmlzaWJsZSYmIXRoaXMub3duZXIuc3VzcGVuZGVkJiYobnVsbD09aXx8IXRoaXMuX29iamVjdElkSW52aXNpYmxlU2V0LmhhcyhpKSk7cmV0dXJuIGUuc2V0VmlzaWJpbGl0eUZsYWcodGUuR1JBUEhJQyxpZS5VU0VSLHIpfV93aGVuR3JhcGhpY3MzREdyYXBoaWMoZSl7Y29uc3QgdD10aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQoZS51aWQpO2lmKHQpcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0KTtjb25zdCBpPXRoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzW2UudWlkXTtpZihpKXJldHVybiBpLnByb21pc2U7Y29uc3Qgcj1nKCk7cmV0dXJuIHRoaXMuX3doZW5HcmFwaGljczNER3JhcGhpY1JlcXVlc3RzW2UudWlkXT1yLHIucHJvbWlzZX1hc3luYyBfYm91bmRzRm9yR3JhcGhpY3MzREdyYXBoaWMoZSx0KXtjb25zdCBpPXRoaXMuX3ZpZXdTcGF0aWFsUmVmZXJlbmNlLHI9dGhpcy5vd25lci52aWV3LnJlbmRlclNwYXRpYWxSZWZlcmVuY2Uscz10aGlzLm93bmVyLnZpZXcuYmFzZW1hcFRlcnJhaW4uc3BhdGlhbFJlZmVyZW5jZSxhPShlLHQscyk9PlUoZSxyLHQsZSxpLHQscyksbj0oZSx0LHIpPT5VKGUscyx0LGUsaSx0LHIpLG89dGhpcy5fdmlld0VsZXZhdGlvblByb3ZpZGVyP3tzZXJ2aWNlOnRoaXMuX3ZpZXdFbGV2YXRpb25Qcm92aWRlcix1c2VWaWV3RWxldmF0aW9uOm51bGwhPXQmJiEhdC51c2VWaWV3RWxldmF0aW9uLG1pbkRlbVJlc29sdXRpb246bnVsbCE9dD90Lm1pbkRlbVJlc29sdXRpb246bnVsbCxtaW5EZW1SZXNvbHV0aW9uRm9yUG9pbnRzOnRoaXMub3duZXIudmlldy5yZXNvbHV0aW9ufTpudWxsLGw9YXdhaXQgZS5nZXRQcm9qZWN0ZWRCb3VuZGluZ0JveChhLG4sbyx0Py5zaWduYWwpO2lmKCFsKXJldHVybiBudWxsO2NvbnN0IGg9bC5ib3VuZGluZ0JveDtpZihsLnJlcXVpcmVzRHJhcGVkRWxldmF0aW9uKXtjb25zdCBlPXRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmVsZXZhdGlvblByb3ZpZGVyO2lmKGUpe08oaCxqZSk7Y29uc3QgdD1lLmdldEVsZXZhdGlvbihqZVswXSxqZVsxXSwwLGksXCJncm91bmRcIik/PzA7aFsyXT1NYXRoLm1pbihoWzJdLHQpLGhbNV09TWF0aC5tYXgoaFs1XSx0KX19cmV0dXJue2JvdW5kaW5nQm94Omgsc2NyZWVuU3BhY2VPYmplY3RzOmwuc2NyZWVuU3BhY2VPYmplY3RzfX1hc3luYyB3aGVuR3JhcGhpY0JvdW5kcyhlLHQpe2F3YWl0IHYoKCgpPT50aGlzLm93bmVyPy5sb2FkZWRHcmFwaGljcykpO2NvbnN0IGk9dGhpcy5vd25lci5sYXllcj8ub2JqZWN0SWRGaWVsZCxyPXRoaXMub3duZXIubG9hZGVkR3JhcGhpY3MuZmluZCgodD0+dD09PWV8fG51bGwhPWkmJm51bGwhPXQuYXR0cmlidXRlcyYmZS5hdHRyaWJ1dGVzJiZ0LmF0dHJpYnV0ZXNbaV09PT1lLmF0dHJpYnV0ZXNbaV0pKTtpZighcil0aHJvdyBuZXcgYShcImludGVybmFsOmdyYXBoaWMtbm90LXBhcnQtb2Ytdmlld1wiLFwiR3JhcGhpYyBpcyBub3QgcGFydCBvZiB0aGlzIHZpZXdcIik7Y29uc3Qgcz1hd2FpdCB0aGlzLl93aGVuR3JhcGhpY3MzREdyYXBoaWMocik7cmV0dXJuIHRoaXMuX2JvdW5kc0ZvckdyYXBoaWNzM0RHcmFwaGljKHMsdCl9Y29tcHV0ZUF0dGFjaG1lbnRPcmlnaW4oZSx0KXtjb25zdCBpPXRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLmdldChlLnVpZCk7aWYoIWkpcmV0dXJuIG51bGw7Y29uc3Qgcj1pLmNvbXB1dGVBdHRhY2htZW50T3JpZ2luKCk7aWYoMD09PXIucmVuZGVyLm51bSYmMD09PXIuZHJhcGVkLm51bSlyZXR1cm4gbnVsbDtQKE1lLDAsMCwwKTtsZXQgcz0wO2lmKHIucmVuZGVyLm51bT4wKXtpZighQShyLnJlbmRlci5vcmlnaW4sdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQucmVuZGVyQ29vcmRzSGVscGVyLnNwYXRpYWxSZWZlcmVuY2UsV2UsdCkpcmV0dXJuIG51bGw7eChNZSxNZSxXZSkscysrfWlmKHIuZHJhcGVkLm51bT4wKXtjb25zdFtlLGldPXIuZHJhcGVkLm9yaWdpbixhPXRoaXMuX3ZpZXdFbGV2YXRpb25Qcm92aWRlci5nZXRFbGV2YXRpb24oZSxpLFwiZ3JvdW5kXCIpPz8wO2lmKFAoV2UsZSxpLGEpLCFBKFdlLHRoaXMuX3ZpZXdFbGV2YXRpb25Qcm92aWRlci5zcGF0aWFsUmVmZXJlbmNlLFdlLHQpKXJldHVybiBudWxsO3goTWUsTWUsV2UpLHMrK31yZXR1cm4gcz4xJiZEKE1lLE1lLDEvcyksbmV3IERlKHt4Ok1lWzBdLHk6TWVbMV0sejpNZVsyXSxzcGF0aWFsUmVmZXJlbmNlOnR9KX1nZXRTeW1ib2xMYXllclNpemUoZSx0KXtjb25zdCBpPXRoaXMuX3N5bWJvbHMuZ2V0KGUuaWQpO2lmKG51bGw9PWkpdGhyb3cgbmV3IGEoXCJpbnRlcm5hbDpzeW1ib2wtbm90LXBhcnQtb2Ytdmlld1wiLFwiU3ltYm9sIGlzIG5vdCBwYXJ0IG9mIHRoaXMgdmlld1wiKTtjb25zdCByPWUuc3ltYm9sTGF5ZXJzLmluZGV4T2YodCk7aWYoLTE9PT1yKXRocm93IG5ldyBhKFwiaW50ZXJuYWw6bWlzc2luZy1zeW1ib2wtbGF5ZXJcIixcIlN5bWJvbCBsYXllciBpcyBub3QgaW4gc3ltYm9sXCIpO2NvbnN0IHM9aS5nZXRTeW1ib2xMYXllclNpemUocik7aWYobnVsbD09cyl0aHJvdyBuZXcgYShcImludGVybmFsOm1pc3Npbmctc2l6ZVwiLFwiU3ltYm9sIGxheWVyIGhhcyBubyB2YWxpZCBzaXplXCIpO3JldHVybiBzfV9ncmFwaGljc0NvbGxlY3Rpb25DaGFuZ2VkKGUpe3RoaXMuX3N0YXJ0Q3JlYXRlR3JhcGhpY3MmJih0aGlzLmFkZChlLmFkZGVkKSx0aGlzLnJlbW92ZShlLnJlbW92ZWQpKX1ncmFwaGljVXBkYXRlSGFuZGxlcihlKXtjb25zdCB0PWUuZ3JhcGhpYy51aWQsaT10aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQodCk7aWYobnVsbCE9aXx8bnVsbCE9dGhpcy5fZ3JhcGhpY3NXaXRob3V0U3ltYm9sLmdldCh0KSlzd2l0Y2goZS5wcm9wZXJ0eSl7Y2FzZVwidmlzaWJsZVwiOnRoaXMuX2dyYXBoaWNVcGRhdGVWaXNpYmxlSGFuZGxlcihpKTticmVhaztjYXNlXCJnZW9tZXRyeVwiOnRoaXMuX2dyYXBoaWNVcGRhdGVHZW9tZXRyeUhhbmRsZXIoaSxlKTticmVhaztjYXNlXCJzeW1ib2xcIjp0aGlzLl9ncmFwaGljVXBkYXRlU3ltYm9sSGFuZGxlcihpLGUpO2JyZWFrO2Nhc2VcImF0dHJpYnV0ZXNcIjpicmVhaztjYXNlXCJvcmlnaW4tdHJhbnNmb3JtXCI6dGhpcy5fZ3JhcGhpY1VwZGF0ZVRyYW5zZm9ybUhhbmRsZXIoaSxlKX19X2dyYXBoaWNVcGRhdGVHZW9tZXRyeUhhbmRsZXIoZSx0KXt0aGlzLl9ncmFwaGljVXBkYXRlR2VvbWV0cnlPclRyYW5zZm9ybUhhbmRsZXIoZSx0LCgoKT0+bnVsbCE9dC5uZXdWYWx1ZSYmbnVsbCE9ZSYmZS5ncmFwaGljczNEU3ltYm9sLnVwZGF0ZUdlb21ldHJ5KGUsdC5uZXdWYWx1ZSkpKTtjb25zdCBpPXQuZ3JhcGhpYy5nZW9tZXRyeTtudWxsIT1pJiZ0aGlzLl9leHBhbmRDb21wdXRlZEV4dGVudChpKX1fZ3JhcGhpY1VwZGF0ZVRyYW5zZm9ybUhhbmRsZXIoZSx0KXtjb25zdCBpPXQuZ3JhcGhpYy5nZW9tZXRyeTt0aGlzLl9ncmFwaGljVXBkYXRlR2VvbWV0cnlPclRyYW5zZm9ybUhhbmRsZXIoZSx0LCgoKT0+bnVsbCE9dC5uZXdWYWx1ZSYmbnVsbCE9ZSYmbnVsbCE9aSYmZS5ncmFwaGljczNEU3ltYm9sLnVwZGF0ZVRyYW5zZm9ybShlLGkuc3BhdGlhbFJlZmVyZW5jZSx0Lm5ld1ZhbHVlLHQuYWN0aW9uKSkpfV9ncmFwaGljVXBkYXRlR2VvbWV0cnlPclRyYW5zZm9ybUhhbmRsZXIoZSx0LGkpe2lmKG51bGwhPXQuZ3JhcGhpYy5nZW9tZXRyeSlpZihudWxsIT1lKWkoKXx8dGhpcy5fcmVjcmVhdGVHcmFwaGljKGUuZ3JhcGhpYyk7ZWxzZXtjb25zdCBlPXQuZ3JhcGhpYy5zeW1ib2w/LmlkO2lmKGUpe2NvbnN0IHQ9dGhpcy5fc3ltYm9scy5nZXQoZSk7aWYobnVsbCE9dCYmdC5sb2FkU3RhdHVzPT09eWUuTE9BRElORylyZXR1cm59dGhpcy5fcmVjcmVhdGVHcmFwaGljKHQuZ3JhcGhpYyl9ZWxzZSB0aGlzLl9yZWNyZWF0ZUdyYXBoaWModC5ncmFwaGljKX1fZ3JhcGhpY1VwZGF0ZVN5bWJvbEhhbmRsZXIoZSx0KXtjb25zdCBpPXQuZ3JhcGhpYyxyPW51bGwhPWU/ZS5ncmFwaGljczNEU3ltYm9sOm51bGwhPXQub2xkVmFsdWU/dGhpcy5fc3ltYm9scy5nZXQodC5vbGRWYWx1ZS5pZCk6bnVsbDtpZihudWxsPT1yfHxudWxsPT10Lm5ld1ZhbHVlKXJldHVybiB2b2lkIHRoaXMuX3JlY3JlYXRlR3JhcGhpYyhpKTtjb25zdCBzPXIuc3ltYm9sLGE9dGhpcy5fZ2V0Q29udmVydGVkU3ltYm9sKHQubmV3VmFsdWUpO2lmKG51bGwhPWEmJihhLnR5cGUhPT1zLnR5cGV8fFwid2ViLXN0eWxlXCI9PT1hLnR5cGUpfHxcIndlYi1zdHlsZVwiPT09cy50eXBlKXJldHVybiB2b2lkIHRoaXMuX3JlY3JlYXRlR3JhcGhpYyhpKTtjb25zdCBuPXRoaXMuX2dyYXBoaWNzQnlTeW1ib2wuZ2V0KHMuaWQpO2lmKG4mJjEhPT1uLnNpemUpcmV0dXJuIHZvaWQgdGhpcy5fcmVjcmVhdGVHcmFwaGljKGkpO2NvbnN0IG89RyhzLGEpO2lmKG51bGw9PW8pcmV0dXJuIHZvaWQgdGhpcy5fdXBkYXRlU3ltYm9sTWFwcGluZyhzLmlkLGEpO2NvbnN0IGw9e2RpZmY6byxncmFwaGljczNER3JhcGhpY1BhdGNoZXM6W10sc3ltYm9sU3RhdGVQYXRjaGVzOltdfTtpZihyLnByZXBhcmVTeW1ib2xQYXRjaChsKSwhUihsLmRpZmYpKXJldHVybiB2b2lkIHRoaXMuX3JlY3JlYXRlR3JhcGhpYyhpKTtjb25zdCBoPXRoaXMuX2dldFJlbmRlcmluZ0luZm8oaSk7aWYobnVsbD09aClyZXR1cm4gdm9pZCB0aGlzLl9yZWNyZWF0ZUdyYXBoaWMoaSk7Y29uc3QgZD1yLmV4dGVudFBhZGRpbmc7Zm9yKGNvbnN0IHAgb2YgbC5zeW1ib2xTdGF0ZVBhdGNoZXMpcCgpO2lmKGQhPT1yLmV4dGVudFBhZGRpbmcmJnRoaXMuX3JlY29tcHV0ZUV4dGVudFBhZGRpbmcoKSxudWxsIT1lKWZvcihjb25zdCBwIG9mIGwuZ3JhcGhpY3MzREdyYXBoaWNQYXRjaGVzKXAoZSxoKTt0aGlzLl91cGRhdGVTeW1ib2xNYXBwaW5nKHMuaWQsYSl9X2dyYXBoaWNVcGRhdGVWaXNpYmxlSGFuZGxlcihlKXt0aGlzLl91cGRhdGVVc2VyVmlzaWJpbGl0eShlKSYmKHRoaXMuX2xhYmVsZXImJnRoaXMub3duZXIudmlldy5sYWJlbGVyLnNldERpcnR5KCksdGhpcy5vd25lci52aWV3LmRlY29uZmxpY3Rvci5zZXREaXJ0eSgpKX1yZWNyZWF0ZUdyYXBoaWNzKGUpe3RoaXMuX3N1c3BlbmRTeW1ib2xDbGVhbnVwPSEwLHRoaXMucmVtb3ZlKGUpLHRoaXMuYWRkKGUpLHRoaXMuX3N1c3BlbmRTeW1ib2xDbGVhbnVwPSExLHRoaXMuZWZmZWN0aXZlVXBkYXRlUG9saWN5PT09ZmUuU1lOQyYmdGhpcy5fY2xlYW51cFN5bWJvbHMoKX1fcmVjcmVhdGVHcmFwaGljKGUpe3RoaXMucmVjcmVhdGVHcmFwaGljcyhbZV0pfV9iZWdpbkdyYXBoaWNVcGRhdGUoZSl7Y29uc3QgdD10aGlzLl9ncmFwaGljc1VwZGF0ZUlkO3JldHVybiB0aGlzLl9ncmFwaGljc1VwZGF0ZUlkKyssdGhpcy5fZ3JhcGhpY3NXYWl0aW5nRm9yU3ltYm9sLnNldChlLnVpZCx0KSwxPT09dGhpcy5fZ3JhcGhpY3NXYWl0aW5nRm9yU3ltYm9sLnNpemUmJnRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIiksdH1fZW5kR3JhcGhpY1VwZGF0ZShlKXtlJiYodGhpcy5fZ3JhcGhpY3NXYWl0aW5nRm9yU3ltYm9sLmRlbGV0ZShlLnVpZCksMD09PXRoaXMuX2dyYXBoaWNzV2FpdGluZ0ZvclN5bWJvbC5zaXplJiYodGhpcy5fY2xlYW51cFN5bWJvbHMoKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpKSl9X3JlY29tcHV0ZUV4dGVudFBhZGRpbmcoKXtsZXQgZT0wO3RoaXMuX3N5bWJvbHMuZm9yRWFjaCgodD0+e251bGwhPXQmJihlPU1hdGgubWF4KGUsdC5leHRlbnRQYWRkaW5nKSl9KSksdGhpcy5fc2V0KFwiZXh0ZW50UGFkZGluZ1wiLGUpfV9leHBhbmRDb21wdXRlZEV4dGVudChlKXtjb25zdCB0PUxlLGk9ZS5zcGF0aWFsUmVmZXJlbmNlO1coZSx0KTtjb25zdCByPXRoaXMuX3ZpZXdTcGF0aWFsUmVmZXJlbmNlLHM9QWUudG1wVmVjO2lmKGsoaSxyKXx8aih0WzBdLHRbMV0sMCxpLHMscikmJih0WzBdPXNbMF0sdFsxXT1zWzFdLGoodFszXSx0WzRdLDAsaSxzLHIpLHRbM109c1swXSx0WzRdPXNbMV0pLCEoaXNGaW5pdGUodFswXSkmJmlzRmluaXRlKHRbM10pJiZpc0Zpbml0ZSh0WzFdKSYmaXNGaW5pdGUodFs0XSkpKXJldHVybjtjb25zdCBhPXRoaXMuY29tcHV0ZWRFeHRlbnQ7bGV0IG49bnVsbDtjb25zdCBvPWlzRmluaXRlKHRbMl0pJiZpc0Zpbml0ZSh0WzVdKSxsPW8mJihudWxsPT1hPy56bWlufHx0WzJdPGEuem1pbiksaD1vJiYobnVsbD09YT8uem1heHx8dFs1XT5hLnptYXgpO2lmKGEpeyh0WzBdPGEueG1pbnx8dFsxXTxhLnltaW58fHRbM10+YS54bWF4fHx0WzRdPmEueW1heHx8bHx8aCkmJihuPXRoaXMuX3Byb3BlcnRpZXNQb29sLmdldChcImNvbXB1dGVkRXh0ZW50XCIpLG4ueG1pbj1NYXRoLm1pbih0WzBdLGEueG1pbiksbi55bWluPU1hdGgubWluKHRbMV0sYS55bWluKSxuLnhtYXg9TWF0aC5tYXgodFszXSxhLnhtYXgpLG4ueW1heD1NYXRoLm1heCh0WzRdLGEueW1heCksbi5zcGF0aWFsUmVmZXJlbmNlPXIpfWVsc2Ugbj10aGlzLl9wcm9wZXJ0aWVzUG9vbC5nZXQoXCJjb21wdXRlZEV4dGVudFwiKSxuLnhtaW49dFswXSxuLnltaW49dFsxXSxuLnhtYXg9dFszXSxuLnltYXg9dFs0XSxuLnNwYXRpYWxSZWZlcmVuY2U9cjtuJiYobCYmKG4uem1pbj10WzJdKSxoJiYobi56bWF4PXRbNV0pLHRoaXMuX3NldChcImNvbXB1dGVkRXh0ZW50XCIsbikpfV9hYm9ydEVsZXZhdGlvbkluZm9DaGFuZ2UoKXt0aGlzLl9lbGV2YXRpb25JbmZvQ2hhbmdlQWJvcnRDb250cm9sbGVyJiYodGhpcy5fZWxldmF0aW9uSW5mb0NoYW5nZUFib3J0Q29udHJvbGxlci5hYm9ydCgpLHRoaXMuX2VsZXZhdGlvbkluZm9DaGFuZ2VBYm9ydENvbnRyb2xsZXI9bnVsbCl9YXN5bmMgZWxldmF0aW9uSW5mb0NoYW5nZSgpe3RoaXMuX2Fib3J0RWxldmF0aW9uSW5mb0NoYW5nZSgpO2NvbnN0IGU9bmV3IEFib3J0Q29udHJvbGxlcjt0aGlzLl9lbGV2YXRpb25JbmZvQ2hhbmdlQWJvcnRDb250cm9sbGVyPWU7Y29uc3QgdD1yZSh0aGlzLmxheWVyLmVsZXZhdGlvbkluZm8sdGhpcy5lbGV2YXRpb25GZWF0dXJlRXhwcmVzc2lvbkVuYWJsZWQpO3RoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmZlYXR1cmVFeHByZXNzaW9uSW5mb0NvbnRleHQ9YXdhaXQgc2UodCx0aGlzLl92aWV3U3BhdGlhbFJlZmVyZW5jZSxlLnNpZ25hbCxWZSkseShlLnNpZ25hbCksdGhpcy5fZWxldmF0aW9uSW5mb0NoYW5nZUFib3J0Q29udHJvbGxlcj1udWxsLHRoaXMuX2xhYmVsZXI/LmVsZXZhdGlvbkluZm9DaGFuZ2UoKSx0aGlzLmZvckVhY2hHcmFwaGljczNEU3ltYm9sKCgoZSx0LGkpPT57ZS5nbG9iYWxQcm9wZXJ0eUNoYW5nZWQoXCJlbGV2YXRpb25JbmZvXCIsdCk/dC5mb3JFYWNoKChlPT57Y29uc3QgdD1lLmdyYXBoaWMsaT1lLmxhYmVsTGF5ZXJzO2Zvcihjb25zdCByIG9mIGkpe3IuZ3JhcGhpY3MzRFN5bWJvbExheWVyLnVwZGF0ZUdyYXBoaWNFbGV2YXRpb25Db250ZXh0KHQscil9fSkpOnRoaXMuX3JlY3JlYXRlU3ltYm9sKGkpfSkpLHRoaXMudXBkYXRlU3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyKCksdGhpcy5fZWxldmF0aW9uQWxpZ25tZW50Py5lbGV2YXRpb25JbmZvQ2hhbmdlKCl9dXBkYXRlU3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyKCl7dGhpcy5fc3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyPyh0aGlzLmxheWVyLmVsZXZhdGlvbkluZm8mJlwicmVsYXRpdmUtdG8tc2NlbmVcIj09PXRoaXMubGF5ZXIuZWxldmF0aW9uSW5mby5tb2RlfHwwPT09dGhpcy5fbnVtYmVyT2ZHcmFwaGljc1Byb3ZpZGluZ0VsZXZhdGlvbikmJih0aGlzLm93bmVyLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9zdGFnZUxheWVyRWxldmF0aW9uUHJvdmlkZXIpLHRoaXMuX3N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlcj1wKHRoaXMuX3N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlcikpOighdGhpcy5sYXllci5lbGV2YXRpb25JbmZvfHx0aGlzLmxheWVyLmVsZXZhdGlvbkluZm8mJlwicmVsYXRpdmUtdG8tc2NlbmVcIiE9PXRoaXMubGF5ZXIuZWxldmF0aW9uSW5mby5tb2RlKSYmdGhpcy5fbnVtYmVyT2ZHcmFwaGljc1Byb3ZpZGluZ0VsZXZhdGlvbj4wJiYodGhpcy5fc3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyPW5ldyBtZSh7bGF5ZXI6dGhpcy5sYXllcixzdGFnZUxheWVyOnRoaXMuc3RhZ2VMYXllcix2aWV3OnRoaXMub3duZXIudmlld30pLHRoaXMub3duZXIudmlldy5lbGV2YXRpb25Qcm92aWRlci5yZWdpc3RlcihcInNjZW5lXCIsdGhpcy5fc3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyKSl9X2NsZWFyU3ltYm9sc0FuZEdyYXBoaWNzKCl7dGhpcy5jbGVhcigpLG51bGwhPXRoaXMuX2ZpbHRlclZpc2liaWxpdHkmJnRoaXMuX2ZpbHRlclZpc2liaWxpdHkuY2xlYXIoKSx0aGlzLl9sYWJlbGVyPy5yZXNldCgpLHRoaXMuX2RlY29uZmxpY3Rvcj8uY2xlYXIoKSx0aGlzLl9lbGV2YXRpb25BbGlnbm1lbnQ/LmNsZWFyKCksdGhpcy5zdGFnZUxheWVyPy5pbnZhbGlkYXRlU3BhdGlhbFF1ZXJ5QWNjZWxlcmF0b3IoKSx0aGlzLl9zdGFnZUxheWVyRWxldmF0aW9uUHJvdmlkZXImJih0aGlzLm93bmVyLnZpZXcuZWxldmF0aW9uUHJvdmlkZXIudW5yZWdpc3Rlcih0aGlzLl9zdGFnZUxheWVyRWxldmF0aW9uUHJvdmlkZXIpLHRoaXMuX3N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlcj1wKHRoaXMuX3N0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlcikpfXN0YXJ0Q3JlYXRlR3JhcGhpY3MoKXt0aGlzLl9zdGFydENyZWF0ZUdyYXBoaWNzPSEwLHRoaXMucmVjcmVhdGVBbGxHcmFwaGljcygpfXJlY3JlYXRlQWxsR3JhcGhpY3MoKXt0aGlzLl9yZWNyZWF0ZUFsbEdyYXBoaWNzKCExKX1yZWNyZWF0ZUFsbEdyYXBoaWNzQW5kU3ltYm9scygpe3RoaXMuX3JlY3JlYXRlQWxsR3JhcGhpY3MoITApfV9yZWNyZWF0ZUFsbEdyYXBoaWNzKGU9ITEpe2lmKCF0aGlzLl9zdGFydENyZWF0ZUdyYXBoaWNzKXJldHVybjtjb25zdHtsb2FkZWRHcmFwaGljczp0LHZpZXc6aX09dGhpcy5vd25lcixyPWkuYmFzZW1hcFRlcnJhaW4udGlsaW5nU2NoZW1lJiZ0Py5sZW5ndGg/dC50b0FycmF5KCk6bnVsbDshZSYmcnx8dGhpcy5fY2xlYXJTeW1ib2xzQW5kR3JhcGhpY3MoKSx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5zY3JlZW5TaXplUGVyc3BlY3RpdmVFbmFibGVkPXRoaXMub3duZXIudmlldy5zY3JlZW5TaXplUGVyc3BlY3RpdmVFbmFibGVkJiYhIXRoaXMubGF5ZXIuc2NyZWVuU2l6ZVBlcnNwZWN0aXZlRW5hYmxlZCx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5zbGljZVBsYW5lRW5hYmxlZD0hIXRoaXMub3duZXIuc2xpY2VQbGFuZUVuYWJsZWQsdGhpcy5fc2V0KFwiY29tcHV0ZWRFeHRlbnRcIixudWxsKSxyJiYoZT90aGlzLmFkZChyKTp0aGlzLnJlY3JlYXRlR3JhcGhpY3MocikpfV9yZWNyZWF0ZVN5bWJvbChlKXtjb25zdCB0PXRoaXMuX2dyYXBoaWNzQnlTeW1ib2wuZ2V0KGUpLGk9W107dCYmKHQuZm9yRWFjaCgoKGUsdCk9Pntjb25zdCByPWUudXNlZE1lbW9yeTt0aGlzLl9jb25kaXRpb25hbFJlbW92ZShlLHQpLHRoaXMuX3NwYXRpYWxJbmRleD8ucmVtb3ZlKGUpLGkucHVzaChlLmdyYXBoaWMpLGUuZGVzdHJveSgpLHRoaXMuX3JlbW92ZUdyYXBoaWNzM0RHcmFwaGljKHQsciksdGhpcy5fdXBkYXRlTGF5ZXJWaXNpYmlsaXR5KCksdGhpcy5fZmVhdHVyZVN0b3JlLmV2ZW50cy5lbWl0KFwiY2hhbmdlZFwiKX0pKSx0aGlzLl9ncmFwaGljc0J5U3ltYm9sLnNldChlLG5ldyBNYXApKTtjb25zdCByPXRoaXMuX3N5bWJvbHMuZ2V0KGUpO2gociksdGhpcy5fc3ltYm9scy5kZWxldGUoZSksdGhpcy5hZGQoaSl9X3JlY3JlYXRlR3JhcGhpY3NGb3JTeW1ib2woZSl7Y29uc3QgdD10aGlzLl9ncmFwaGljc0J5U3ltYm9sLmdldChlKTtpZih0KXtjb25zdCBlPVtdO3QuZm9yRWFjaCgodD0+ZS5wdXNoKHQuZ3JhcGhpYykpKSx0aGlzLnJlY3JlYXRlR3JhcGhpY3MoZSl9fV9jb25kaXRpb25hbFJlbW92ZShlLHQpe3RoaXMuX2dyYXBoaWNzRHJhcGVkVWlkcy5kZWxldGUodCksdGhpcy5fb2JqZWN0U3RhdGVzPy5yZW1vdmVHcmFwaGljKGUpLHRoaXMuX2xhYmVsZXI/LnJlbW92ZUdyYXBoaWMoZSksdGhpcy5fZGVjb25mbGljdG9yPy5yZW1vdmVHcmFwaGljKGUpLG51bGwhPXRoaXMuX2dyYXBoaWNTdGF0ZVRyYWNraW5nJiZ0aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZy5yZW1vdmVHcmFwaGljKGUpfWFkZChlKXtlJiYwIT09ZS5sZW5ndGgmJih0aGlzLm93bmVyLnZpZXcuYmFzZW1hcFRlcnJhaW4/LnRpbGluZ1NjaGVtZT8odGhpcy5fdXBkYXRlUG9saWN5Rm9yR3JhcGhpY3MoZSk9PT1mZS5BU1lOQz90aGlzLl9hZGREZWxheWVkKGUpOnRoaXMuX2FkZEltbWVkaWF0ZShlKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpKTpWZS5lcnJvcihcIiNhZGQoKVwiLFwiQ2Fubm90IGFkZCBncmFwaGljcyBiZWZvcmUgdGVycmFpbiBzdXJmYWNlIGhhcyBiZWVuIGluaXRpYWxpemVkXCIpKX1fdXBkYXRlUG9saWN5Rm9yR3JhcGhpY3MoZSl7aWYodGhpcy5lZmZlY3RpdmVVcGRhdGVQb2xpY3k9PT1mZS5TWU5DJiYoXCJtZXNoXCI9PT10aGlzLmxheWVyLmdlb21ldHJ5VHlwZXx8bnVsbD09dGhpcy5sYXllci5nZW9tZXRyeVR5cGUpKWZvcihjb25zdCB0IG9mIGUpaWYobnVsbCE9dC5nZW9tZXRyeSYmXCJtZXNoXCI9PT10Lmdlb21ldHJ5LnR5cGUmJiF0Lmdlb21ldHJ5LmxvYWRlZClyZXR1cm4gZmUuQVNZTkM7cmV0dXJuIHRoaXMuZWZmZWN0aXZlVXBkYXRlUG9saWN5fV9hZGRJbW1lZGlhdGUoZSl7dGhpcy5fZ2VvbWV0cnlXYXJuaW5nTG9nZ2VkPSExLHRoaXMuX3N5bWJvbFdhcm5pbmdMb2dnZWQ9ITE7Zm9yKGNvbnN0IHQgb2YgZSl0aGlzLl9hZGRHcmFwaGljKHQsdGhpcy5fZ2V0UmVuZGVyaW5nSW5mbyh0LFZlKSxmZS5TWU5DKTt0aGlzLl9jbGVhbnVwU3ltYm9scygpLHRoaXMuX2xhYmVsZXImJih0aGlzLm93bmVyLnZpZXcubGFiZWxlci5zZXREaXJ0eSgpLHRoaXMuX2NsZWFudXBTeW1ib2xzKCkpLHRoaXMub3duZXIudmlldy5kZWNvbmZsaWN0b3Iuc2V0RGlydHkoKX1fYWRkRGVsYXllZChlKXtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPXQudWlkO2xldCBpPXRoaXMuX3BlbmRpbmdVcGRhdGVzLmdldChlKTtpP2kuYWRkP2kuc3RhdGUhPT1UZS5ORVcmJmkuYWJvcnRDb250cm9sbGVyPy5hYm9ydCgpOnRoaXMuX3BlbmRpbmdBZGRzKys6KGk9dGhpcy5fcGVuZGluZ1VwZGF0ZXNQb29sLnB1c2hOZXcoKSx0aGlzLl9wZW5kaW5nQWRkcysrLHRoaXMuX3BlbmRpbmdVcGRhdGVzLnNldChlLGkpKSxpLmFkZD10fXRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nUmVtYWluaW5nXCIpfXJlbW92ZShlKXt0aGlzLmVmZmVjdGl2ZVVwZGF0ZVBvbGljeT09PWZlLkFTWU5DP3RoaXMuX3JlbW92ZURlbGF5ZWQoZSk6dGhpcy5fcmVtb3ZlSW1tZWRpYXRlKGUpLHRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIil9X3JlbW92ZUltbWVkaWF0ZShlKXtmb3IoY29uc3QgdCBvZiBlKXRoaXMuX3JlbW92ZUdyYXBoaWModCk7dGhpcy5fY2xlYW51cFN5bWJvbHMoKSx0aGlzLl9sYWJlbGVyJiZ0aGlzLm93bmVyLnZpZXcubGFiZWxlci5zZXREaXJ0eSgpLHRoaXMub3duZXIudmlldy5kZWNvbmZsaWN0b3Iuc2V0RGlydHkoKX1fcmVtb3ZlRGVsYXllZChlKXtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPXQudWlkLGk9dGhpcy5fcGVuZGluZ1VwZGF0ZXMuZ2V0KGUpO2lmKGkpaS5hZGQmJihpLnJlbW92ZT9pLmFkZD1udWxsOnRoaXMuX3BlbmRpbmdVcGRhdGVzLmRlbGV0ZShlKSxpLnN0YXRlPT09VGUuTE9BRElORyYmaS5hYm9ydENvbnRyb2xsZXI/LmFib3J0KCksdGhpcy5fcGVuZGluZ0FkZHMtLSk7ZWxzZXtjb25zdCBpPXRoaXMuX3BlbmRpbmdVcGRhdGVzUG9vbC5wdXNoTmV3KCk7aS5yZW1vdmU9dCx0aGlzLl9wZW5kaW5nVXBkYXRlcy5zZXQoZSxpKSx0aGlzLl9wZW5kaW5nUmVtb3ZlcysrLHRoaXMuX2FwcGx5UGVuZGluZ1JlbW92ZXNGaXJzdD0hMH19MD09PXRoaXMuX3BlbmRpbmdVcGRhdGVzLnNpemUmJnRoaXMuX2ZpbmlzaFBlbmRpbmdVcGRhdGVzKCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJydW5uaW5nXCIpLHRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdSZW1haW5pbmdcIil9X2ZpbmlzaFBlbmRpbmdVcGRhdGVzKCl7dGhpcy5fcGVuZGluZ1VwZGF0ZXNQb29sLmNsZWFyKCksdGhpcy5fY2xlYW51cFN5bWJvbHMoKSwodGhpcy5fcGVuZGluZ0FkZHN8fHRoaXMuX3BlbmRpbmdSZW1vdmVzKSYmVmUud2FybihcInBlbmRpbmdBZGRzL1JlbW92ZXMgaW4gaW5jb25zaXN0ZW50IHN0YXRlIVwiKSx0aGlzLl9wZW5kaW5nQWRkcz0wLHRoaXMuX3BlbmRpbmdSZW1vdmVzPTAsdGhpcy5fYXBwbHlQZW5kaW5nUmVtb3Zlc0ZpcnN0PSExfV9hcHBseVBlbmRpbmdVcGRhdGVzKGUpe2lmKHRoaXMuX2dlb21ldHJ5V2FybmluZ0xvZ2dlZD0hMSx0aGlzLl9zeW1ib2xXYXJuaW5nTG9nZ2VkPSExLDA9PT10aGlzLl9wZW5kaW5nVXBkYXRlcy5zaXplJiZ0aGlzLl9zcGF0aWFsSW5kZXg/LnVwZGF0aW5nKXJldHVybiB0aGlzLl9zcGF0aWFsSW5kZXgudXBkYXRlKCksdm9pZCBlLm1hZGVQcm9ncmVzcygpO2lmKHRoaXMuX2FwcGx5UGVuZGluZ1JlbW92ZXNGaXJzdCl7dGhpcy5fYXBwbHlQZW5kaW5nUmVtb3Zlc0ZpcnN0PSExO2Zvcihjb25zdFt0LGldb2YgdGhpcy5fcGVuZGluZ1VwZGF0ZXMpe2lmKGUuZG9uZSl7dGhpcy5fYXBwbHlQZW5kaW5nUmVtb3Zlc0ZpcnN0PSEwO2JyZWFrfWlmKGkucmVtb3ZlJiYhaS5hZGQmJih0aGlzLl9wZW5kaW5nUmVtb3Zlcy0tLGUubWFkZVByb2dyZXNzKCksdGhpcy5fcmVtb3ZlR3JhcGhpYyhpLnJlbW92ZSksaS5yZW1vdmU9bnVsbCx0aGlzLl9wZW5kaW5nVXBkYXRlcy5kZWxldGUodCksMD09PXRoaXMuX3BlbmRpbmdSZW1vdmVzKSlicmVha319Zm9yKGNvbnN0W3QsaV1vZiB0aGlzLl9wZW5kaW5nVXBkYXRlcyl7aWYoZS5kb25lKWJyZWFrO2kuYWRkJiZpLnN0YXRlPT09VGUuTkVXJiZ0aGlzLl9wcm9jZXNzUGVuZGluZ1VwZGF0ZU5ldyhpKTtsZXQgcj10aGlzLmVmZmVjdGl2ZVVwZGF0ZVBvbGljeTtpZighaS5yZW1vdmV8fGkuYWRkJiZpLnN0YXRlIT09VGUuUkVBRFl8fCh0aGlzLl9wZW5kaW5nUmVtb3Zlcy0tLGUubWFkZVByb2dyZXNzKCksdGhpcy5fcmVtb3ZlR3JhcGhpYyhpLnJlbW92ZSksaS5yZW1vdmU9bnVsbCxyPWZlLlNZTkMpLGkuYWRkKXN3aXRjaChpLnN0YXRlKXtjYXNlIFRlLlJFQURZOnRoaXMuX2FkZEdyYXBoaWMoaS5hZGQsaS5yZW5kZXJpbmdJbmZvLHIpLGkuYWRkPW51bGwsdGhpcy5fcGVuZGluZ0FkZHMtLSxlLm1hZGVQcm9ncmVzcygpO2JyZWFrO2Nhc2UgVGUuUkVKRUNURUQ6aS5hZGQ9bnVsbCx0aGlzLl9wZW5kaW5nQWRkcy0tO2Nhc2UgVGUuTE9BRElORzp9bnVsbD09aS5yZW1vdmUmJm51bGw9PWkuYWRkJiZ0aGlzLl9wZW5kaW5nVXBkYXRlcy5kZWxldGUodCl9MD09PXRoaXMuX3BlbmRpbmdVcGRhdGVzLnNpemUmJih0aGlzLl9maW5pc2hQZW5kaW5nVXBkYXRlcygpLHRoaXMubm90aWZ5Q2hhbmdlKFwicnVubmluZ1wiKSl9X3Byb2Nlc3NQZW5kaW5nVXBkYXRlTmV3KGUpe2lmKCFlLmFkZClyZXR1cm4gdm9pZChlLnN0YXRlPVRlLlJFQURZKTtjb25zdCB0PWUuYWRkLmdlb21ldHJ5O251bGw9PXR8fFwibWVzaFwiIT09dC50eXBlfHx0LmxvYWRlZD90aGlzLl9wcm9jZXNzUGVuZGluZ1VwZGF0ZU5ld1JlbmRlcmluZ0luZm8oZSk6dGhpcy5fcHJvY2Vzc1BlbmRpbmdVcGRhdGVOZXdNZXNoKGUsdCl9YXN5bmMgX3Byb2Nlc3NQZW5kaW5nVXBkYXRlTmV3TWVzaChlLHQpe2Uuc3RhdGU9VGUuTE9BRElORyxlLmFib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO2NvbnN0IGk9ZS5hYm9ydENvbnRyb2xsZXIuc2lnbmFsO3RyeXthd2FpdCB0LmxvYWQoe3NpZ25hbDppfSl9Y2F0Y2gocil7cmV0dXJuIHRoaXMuX3Byb2Nlc3NQZW5kaW5nVXBkYXRlTmV3RXJyb3IoZSxyKX1lLmFib3J0Q29udHJvbGxlcj1udWxsLHRoaXMuX3Byb2Nlc3NQZW5kaW5nVXBkYXRlTmV3UmVuZGVyaW5nSW5mbyhlKX1fcHJvY2Vzc1BlbmRpbmdVcGRhdGVOZXdFcnJvcihlLHQpe2UuYWJvcnRDb250cm9sbGVyPW51bGwsbSh0KT9lLnN0YXRlPVRlLk5FVzplLnN0YXRlPVRlLlJFSkVDVEVEfWFzeW5jIF9wcm9jZXNzUGVuZGluZ1VwZGF0ZU5ld1JlbmRlcmluZ0luZm8oZSl7aWYobnVsbD09dGhpcy5sYXllci5yZW5kZXJlcnx8XCJkaWN0aW9uYXJ5XCIhPT10aGlzLmxheWVyLnJlbmRlcmVyLnR5cGUpcmV0dXJuIGUucmVuZGVyaW5nSW5mbz10aGlzLl9nZXRSZW5kZXJpbmdJbmZvKGUuYWRkLFZlKSx2b2lkKGUuc3RhdGU9VGUuUkVBRFkpO2Uuc3RhdGU9VGUuTE9BRElORyxlLmFib3J0Q29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyO2xldCB0PW51bGw7dHJ5e3Q9YXdhaXQgdGhpcy5fZ2V0UmVuZGVyaW5nSW5mb0FzeW5jKGUuYWRkLHtzaWduYWw6ZS5hYm9ydENvbnRyb2xsZXIuc2lnbmFsfSl9Y2F0Y2goaSl7cmV0dXJuIGUuYWJvcnRDb250cm9sbGVyPW51bGwsdm9pZChtKGkpP2Uuc3RhdGU9VGUuTkVXOmUuc3RhdGU9VGUuUkVKRUNURUQpfW51bGw9PXQ/LnN5bWJvbD8oVmUmJiF0aGlzLl9zeW1ib2xXYXJuaW5nTG9nZ2VkJiYodGhpcy5fc3ltYm9sV2FybmluZ0xvZ2dlZD0hMCxWZS53YXJuKGBHcmFwaGljIGluIGxheWVyICR7dGhpcy5sYXllci5pZH0gaGFzIG5vIHN5bWJvbCBhbmQgd2lsbCBub3QgcmVuZGVyYCkpLGUucmVuZGVyaW5nSW5mbz1udWxsKTplLnJlbmRlcmluZ0luZm89dCxlLnN0YXRlPVRlLlJFQURZfV9hZGRHcmFwaGljKGUsdCxpKXtpZih0aGlzLl9ncmFwaGljc1dpdGhvdXRTeW1ib2wuc2V0KGUudWlkLGUpLG51bGw9PXQ/LnN5bWJvbHx8IUgoZSkpcmV0dXJuO2lmKG51bGwhPXRoaXMuc3RhZ2UucmVuZGVyVmlldy5vYmplY3RBbmRMYXllcklkUmVuZGVySGVscGVyJiZ0aGlzLnNldFVpZFRvSWRPbkFkZCl7Y29uc3QgdD0kKHRoaXMub3duZXIudmlldy5tYXAsdGhpcy5sYXllci51aWQpO3RoaXMuc3RhZ2UucmVuZGVyVmlldy5vYmplY3RBbmRMYXllcklkUmVuZGVySGVscGVyLnNldFVpZFRvT2JqZWN0QW5kTGF5ZXJJZChlLm9iamVjdElkLGUudWlkLHRoaXMubGF5ZXIuaWQsdGhpcy5sYXllci51aWQsISF0aGlzLmxheWVyLnBvcHVwRW5hYmxlZCYmIXQmJlNlKHRoaXMubGF5ZXIsdGhpcy5vd25lci52aWV3LnBvcHVwPy5kZWZhdWx0UG9wdXBUZW1wbGF0ZUVuYWJsZWQpKX1jb25zdCByPXQuc3ltYm9sLHM9dGhpcy5nZXRPckNyZWF0ZUdyYXBoaWNzM0RTeW1ib2wocix0LnJlbmRlcmVyKTtpZihudWxsPT1zKXJldHVybjt0aGlzLl9leHBhbmRDb21wdXRlZEV4dGVudChlLmdlb21ldHJ5KTtjb25zdCBhPXRoaXMuX2JlZ2luR3JhcGhpY1VwZGF0ZShlKSxuPW5ldyBuZShlLHQsdGhpcy5sYXllcik7bGV0IG89ITE7Y29uc3QgbD1lPT57ZT09PXMuc3ltYm9sLmlkJiYobz0hMCl9O3RoaXMuX3doZW5TeW1ib2xSZW1vdmVkLnB1c2gobCk7Y29uc3QgaD0oKT0+e2lmKC0tdGhpcy5fbG9hZGluZ1N5bWJvbHMsdGhpcy5kZXN0cm95ZWQpcmV0dXJuO3RoaXMuX3doZW5TeW1ib2xSZW1vdmVkLnJlbW92ZVVub3JkZXJlZChsKTtpZih0aGlzLl9ncmFwaGljc1dhaXRpbmdGb3JTeW1ib2wuZ2V0KGUudWlkKSE9PWF8fG98fHMuZGVzdHJveWVkfHx0aGlzLmdyYXBoaWNTeW1ib2xTdXBwb3J0ZWQmJmUuc3ltYm9sJiZlLnN5bWJvbC5pZCE9PXMuc3ltYm9sLmlkKS0tcy5yZWZlcmVuY2VkLHRoaXMuX2NsZWFudXBTeW1ib2xzKCk7ZWxzZXtjb25zdCB0PXRoaXMuX2NyZWF0ZUdyYXBoaWNzM0RHcmFwaGljKHMsbik7dGhpcy5fc3BhdGlhbEluZGV4JiZudWxsIT10JiZ0aGlzLl9zcGF0aWFsSW5kZXguYWRkKHQpLC0tcy5yZWZlcmVuY2VkLHRoaXMuX2VuZEdyYXBoaWNVcGRhdGUoZSl9dGhpcy5fZmVhdHVyZVN0b3JlLmV2ZW50cy5lbWl0KFwiY2hhbmdlZFwiKSx0aGlzLl9sYWJlbGVyJiZ0aGlzLm93bmVyLnZpZXcubGFiZWxlci5zZXREaXJ0eSgpfSxkPXQ9PnstLXRoaXMuX2xvYWRpbmdTeW1ib2xzLHRoaXMuZGVzdHJveWVkfHwodGhpcy5fd2hlblN5bWJvbFJlbW92ZWQucmVtb3ZlVW5vcmRlcmVkKGwpLG98fChtKHQpP3RoaXMuYWRkKFtlXSk6cy5kZXN0cm95ZWR8fHRoaXMuX2VuZEdyYXBoaWNVcGRhdGUoZSkpKX07Kyt0aGlzLl9sb2FkaW5nU3ltYm9scyxpPT09ZmUuQVNZTkM/cy5sb2FkKCgoKT0+dGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKGgpKSwoZT0+dGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKCgoKT0+ZChlKSkpKSk6cy5sb2FkKGgsZCl9X3JlbW92ZUdyYXBoaWMoZSl7Y29uc3QgdD1lLnVpZCxpPXRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLmdldCh0KTtpZihpKXtpLmdyYXBoaWNzM0RTeW1ib2wub25SZW1vdmVHcmFwaGljKGkpO2NvbnN0IGU9aS51c2VkTWVtb3J5LHI9aS5pc0VsZXZhdGlvblNvdXJjZTt0aGlzLl9jb25kaXRpb25hbFJlbW92ZShpLHQpLHRoaXMuX3NwYXRpYWxJbmRleD8ucmVtb3ZlKGkpO2NvbnN0IHM9aS5ncmFwaGljczNEU3ltYm9sLnN5bWJvbC5pZDt0aGlzLl9ncmFwaGljc0J5U3ltYm9sLmdldChzKT8uZGVsZXRlKHQpLHRoaXMuX2dyYXBoaWNzV2l0aG91dFN5bWJvbC5kZWxldGUodCksdGhpcy5fcmVtb3ZlR3JhcGhpY3MzREdyYXBoaWModCxlLHIpLGkuZGVzdHJveSgpLHRoaXMuX2ZlYXR1cmVTdG9yZS5ldmVudHMuZW1pdChcImNoYW5nZWRcIil9ZWxzZSB0aGlzLl9ncmFwaGljc1dpdGhvdXRTeW1ib2wuZGVsZXRlKHQpLHRoaXMuX2dyYXBoaWNzV2FpdGluZ0ZvclN5bWJvbC5kZWxldGUodCksMD09PXRoaXMuX2dyYXBoaWNzV2FpdGluZ0ZvclN5bWJvbC5zaXplJiYodGhpcy5fY2xlYW51cFN5bWJvbHMoKSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpKX1faGFzTGFiZWxpbmdDb250ZXh0KGUpe2lmKGUgaW5zdGFuY2VvZiBFZXx8ZSBpbnN0YW5jZW9mIEllKXtjb25zdCB0PXRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmxheWVyO3JldHVybiEhdC5sYWJlbGluZ0luZm8mJnQubGFiZWxpbmdJbmZvLnNvbWUoKHQ9PnQuc3ltYm9sPT09ZSkpfXJldHVybiExfV9oYXNWYWxpZFN5bWJvbENyZWF0aW9uQ29udGV4dChlKXtyZXR1cm4hKGUgaW5zdGFuY2VvZiBFZSYmIXRoaXMuX2hhc0xhYmVsaW5nQ29udGV4dChlKSl8fChWZS5lcnJvcihcIkxhYmVsU3ltYm9sM0QgaXMgb25seSB2YWxpZCBhcyBwYXJ0IG9mIGEgTGFiZWxDbGFzcy4gVXNpbmcgTGFiZWxTeW1ib2wzRCBhcyBhIHJlbmRlcmVyIHN5bWJvbCBpcyBub3Qgc3VwcG9ydGVkLlwiKSwhMSl9X2dldFJlbmRlcmluZ0luZm8oZSx0KXtjb25zdCBpPWUuZ2VvbWV0cnk7aWYobnVsbD09aSlyZXR1cm4gdCYmIXRoaXMuX2dlb21ldHJ5V2FybmluZ0xvZ2dlZCYmKHRoaXMuX2dlb21ldHJ5V2FybmluZ0xvZ2dlZD0hMCx0Lndhcm4oYEdyYXBoaWMgaW4gbGF5ZXIgJHt0aGlzLmxheWVyLmlkfSBoYXMgbm8gZ2VvbWV0cnkgYW5kIHdpbGwgbm90IHJlbmRlcmApKSxudWxsO2lmKCFJKGkuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLl92aWV3U3BhdGlhbFJlZmVyZW5jZSkpcmV0dXJuIHQmJiF0aGlzLl9nZW9tZXRyeVdhcm5pbmdMb2dnZWQmJih0aGlzLl9nZW9tZXRyeVdhcm5pbmdMb2dnZWQ9ITAsdC53YXJuKGBHcmFwaGljIGluIGxheWVyICR7dGhpcy5sYXllci5pZH0gaGFzIGluY29tcGF0aWJsZSBzcGF0aWFsIHJlZmVyZW5jZSBhbmQgd2lsbCBub3QgcmVuZGVyYCkpLG51bGw7aWYoIXRoaXMuZ3JhcGhpY1N5bWJvbFN1cHBvcnRlZCYmbnVsbCE9ZS5zeW1ib2wpcmV0dXJuIHQmJiF0aGlzLl9zeW1ib2xXYXJuaW5nTG9nZ2VkJiYodGhpcy5fc3ltYm9sV2FybmluZ0xvZ2dlZD0hMCx0Lndhcm4oYEdyYXBoaWMgaW4gbGF5ZXIgJHt0aGlzLmxheWVyLmlkfSBpcyBub3QgYWxsb3dlZCB0byBoYXZlIGEgc3ltYm9sLCB1c2UgYSByZW5kZXJlciBpbnN0ZWFkYCkpLG51bGw7Y29uc3Qgcj10aGlzLnJlbmRlcmVySGFzR2VvbWV0cnlPcGVyYXRpb25zP04oZSx0aGlzLmxheWVyKTplO2xldCBzO2lmKHRoaXMub3duZXIuZ2V0UmVuZGVyaW5nSW5mbyYmKHRoaXMuZ2V0UmVuZGVyaW5nSW5mb1dpdGhvdXRSZW5kZXJlcnx8bnVsbCE9dGhpcy5jdXJyZW50UmVuZGVyZXIpKXM9dGhpcy5vd25lci5nZXRSZW5kZXJpbmdJbmZvKHIsdGhpcy5jdXJyZW50UmVuZGVyZXIsdGhpcy5fYXJjYWRlT25EZW1hbmQpO2Vsc2V7cz17c3ltYm9sOnIuc3ltYm9sfHxaKHIuZ2VvbWV0cnkpfX1yZXR1cm4gbnVsbD09cz8uc3ltYm9sPyh0JiYhdGhpcy5fc3ltYm9sV2FybmluZ0xvZ2dlZCYmKHRoaXMuX3N5bWJvbFdhcm5pbmdMb2dnZWQ9ITAsdC53YXJuKGBHcmFwaGljIGluIGxheWVyICR7dGhpcy5sYXllci5pZH0gaGFzIG5vIHN5bWJvbCBhbmQgd2lsbCBub3QgcmVuZGVyYCkpLG51bGwpOnN9X2dldFJlbmRlcmluZ0luZm9Bc3luYyhlLHQpe2lmKG51bGw9PWUuZ2VvbWV0cnkpcmV0dXJuIFZlJiYhdGhpcy5fZ2VvbWV0cnlXYXJuaW5nTG9nZ2VkJiYodGhpcy5fZ2VvbWV0cnlXYXJuaW5nTG9nZ2VkPSEwLFZlLndhcm4oYEdyYXBoaWMgaW4gbGF5ZXIgJHt0aGlzLmxheWVyLmlkfSBoYXMgbm8gZ2VvbWV0cnkgYW5kIHdpbGwgbm90IHJlbmRlcmApKSxudWxsO2lmKCF0aGlzLmdyYXBoaWNTeW1ib2xTdXBwb3J0ZWQmJm51bGwhPWUuc3ltYm9sKXJldHVybiBWZSYmIXRoaXMuX3N5bWJvbFdhcm5pbmdMb2dnZWQmJih0aGlzLl9zeW1ib2xXYXJuaW5nTG9nZ2VkPSEwLFZlLndhcm4oYEdyYXBoaWMgaW4gbGF5ZXIgJHt0aGlzLmxheWVyLmlkfSBpcyBub3QgYWxsb3dlZCB0byBoYXZlIGEgc3ltYm9sLCB1c2UgYSByZW5kZXJlciBpbnN0ZWFkYCkpLG51bGw7Y29uc3QgaT10aGlzLnJlbmRlcmVySGFzR2VvbWV0cnlPcGVyYXRpb25zP04oZSx0aGlzLmxheWVyKTplO3JldHVybiB0aGlzLm93bmVyLmdldFJlbmRlcmluZ0luZm9Bc3luYyhpLHRoaXMuY3VycmVudFJlbmRlcmVyLHRoaXMuX2FyY2FkZU9uRGVtYW5kLHQpfV9jcmVhdGVHcmFwaGljczNEU3ltYm9sKGUsdCl7aWYoIXRoaXMuX2hhc1ZhbGlkU3ltYm9sQ3JlYXRpb25Db250ZXh0KGUpKXJldHVybiBudWxsO2NvbnN0IGk9dGhpcy5fZ2V0Q29udmVydGVkU3ltYm9sKGUpO2lmKCFpKXJldHVybiBudWxsO2xldCByO2lmKG51bGwhPXQmJlwiYmFja2dyb3VuZEZpbGxTeW1ib2xcImluIHQmJnQuYmFja2dyb3VuZEZpbGxTeW1ib2wpe2NvbnN0IGU9Sih0LmJhY2tncm91bmRGaWxsU3ltYm9sLHtpZ25vcmVEcml2ZXJzOiEwfSk7bnVsbCE9ZS5zeW1ib2wmJlwid2ViLXN0eWxlXCIhPT1lLnN5bWJvbC50eXBlJiZcImNpbVwiIT09ZS5zeW1ib2wudHlwZSYmKHI9ZS5zeW1ib2wuc3ltYm9sTGF5ZXJzKX1jb25zdCBzPWxlKGksdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQscik7cmV0dXJuIHMubG9hZCgoKCk9Pntjb25zdCBlPXMuZXh0ZW50UGFkZGluZztlPnRoaXMuZXh0ZW50UGFkZGluZyYmdGhpcy5fc2V0KFwiZXh0ZW50UGFkZGluZ1wiLGUpLHRoaXMubm90aWZ5Q2hhbmdlKFwiYXZlcmFnZVN5bWJvbENvbXBsZXhpdHlcIil9KSwoKCk9Pnt9KSksc31nZXRPckNyZWF0ZUdyYXBoaWNzM0RTeW1ib2woZSx0KXtsZXQgaT10aGlzLl9zeW1ib2xzLmdldChlLmlkKTtyZXR1cm4gdm9pZCAwPT09aSYmKGk9ZSBpbnN0YW5jZW9mIFVlP25ldyBoZShlLChlPT50aGlzLl9mcmFtZVRhc2suc2NoZWR1bGUoZSkpLChlPT50aGlzLl9jcmVhdGVHcmFwaGljczNEU3ltYm9sKGUsdCkpKTp0aGlzLl9jcmVhdGVHcmFwaGljczNEU3ltYm9sKGUsdCksdGhpcy5fc3ltYm9scy5zZXQoZS5pZCxpKSksbnVsbCE9aSYmKytpLnJlZmVyZW5jZWQsaX10cmFja0dyYXBoaWNTdGF0ZShlKXtyZXR1cm4gbnVsbD09dGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmcmJih0aGlzLl9ncmFwaGljU3RhdGVUcmFja2luZz1uZXcgZGUodGhpcykpLHRoaXMuX2dyYXBoaWNTdGF0ZVRyYWNraW5nLmFkZChlKX1fYWRkR3JhcGhpY3MzREdyYXBoaWMoZSl7dGhpcy5fdXNlZE1lbW9yeSs9ZS51c2VkTWVtb3J5LHRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLnNldChlLmdyYXBoaWMudWlkLGUpLHRoaXMuX251bWJlck9mR3JhcGhpY3MrKyxlLmlzRWxldmF0aW9uU291cmNlJiYodGhpcy5fbnVtYmVyT2ZHcmFwaGljc1Byb3ZpZGluZ0VsZXZhdGlvbisrLHRoaXMudXBkYXRlU3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyKCkpLHRoaXMuX3VwZGF0ZUxheWVyVmlzaWJpbGl0eSgpfV9yZW1vdmVHcmFwaGljczNER3JhcGhpYyhlLHQsaT0hMSl7dGhpcy5fdXNlZE1lbW9yeS09dCx0aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5kZWxldGUoZSksdGhpcy5fbnVtYmVyT2ZHcmFwaGljcy0tLGkmJih0aGlzLl9udW1iZXJPZkdyYXBoaWNzUHJvdmlkaW5nRWxldmF0aW9uLS0sdGhpcy51cGRhdGVTdGFnZUxheWVyRWxldmF0aW9uUHJvdmlkZXIoKSksdGhpcy5fdXBkYXRlTGF5ZXJWaXNpYmlsaXR5KCl9X2NyZWF0ZUdyYXBoaWNzM0RHcmFwaGljKGUsdCl7Y29uc3QgaT10LmdyYXBoaWM7aWYodGhpcy5fZ3JhcGhpY3NXaXRob3V0U3ltYm9sLmRlbGV0ZShpLnVpZCksIXRoaXMuX3N5bWJvbHMuaGFzKGUuc3ltYm9sLmlkKSlyZXR1cm4gdGhpcy5hZGQoW2ldKSxudWxsO2lmKHRoaXMuZ3JhcGhpY3MzREdyYXBoaWNzLmhhcyhpLnVpZCkpcmV0dXJuIG51bGw7Y29uc3Qgcj1lLmNyZWF0ZUdyYXBoaWNzM0RHcmFwaGljKHQpO2lmKG51bGw9PXIpcmV0dXJuIG51bGw7dGhpcy5fYWRkR3JhcGhpY3MzREdyYXBoaWMocik7Y29uc3Qgcz1lLnN5bWJvbC5pZDt0aGlzLl9ncmFwaGljc0J5U3ltYm9sLmhhcyhzKXx8dGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5zZXQocyxuZXcgTWFwKSx0aGlzLl9ncmFwaGljc0J5U3ltYm9sLmdldChzKS5zZXQoaS51aWQscik7aWYoci5pc0RyYXBlZCYmdGhpcy5fZ3JhcGhpY3NEcmFwZWRVaWRzLmFkZChpLnVpZCksci5jZW50cm9pZD1udWxsLG51bGwhPWkuZ2VvbWV0cnkmJlwicG9pbnRcIiE9PWkuZ2VvbWV0cnkudHlwZSYmKHIuY2VudHJvaWQ9cGUoaS5nZW9tZXRyeSx0aGlzLl92aWV3U3BhdGlhbFJlZmVyZW5jZSkpLHRoaXMuX3VwZGF0ZVVzZXJWaXNpYmlsaXR5KHIpLG51bGwhPXRoaXMuX3NjYWxlVmlzaWJpbGl0eSYmdGhpcy5fc2NhbGVWaXNpYmlsaXR5LnVwZGF0ZVZpc2liaWxpdHkociksbnVsbCE9dGhpcy5fZmlsdGVyVmlzaWJpbGl0eSl7Y29uc3R7ZGVmYXVsdFZpc2liaWxpdHk6ZX09dGhpcy5fZmlsdGVyVmlzaWJpbGl0eTtyLnNldFZpc2liaWxpdHlGbGFnKHRlLkdSQVBISUMsaWUuRklMVEVSLGUpLGV8fHRoaXMuX2ZpbHRlclZpc2liaWxpdHkucmVhcHBseSgpfXRoaXMuX2RlY29uZmxpY3Rvcj8uYWRkR3JhcGhpYyhyKSx0aGlzLl9sYWJlbGVyPy5hZGRHcmFwaGljKHIpLHRoaXMuX29iamVjdFN0YXRlcz8uYWRkR3JhcGhpYyhyKSx0aGlzLl9kZWNvbmZsaWN0b3ImJnRoaXMub3duZXIudmlldy5kZWNvbmZsaWN0b3Iuc2V0SW5pdGlhbEljb25WaXNpYmlsaXR5RmxhZyh0aGlzLHIpLHIuaW5pdGlhbGl6ZSh0aGlzLnN0YWdlTGF5ZXIsdGhpcy5vd25lciksbnVsbCE9dGhpcy5fZ3JhcGhpY1N0YXRlVHJhY2tpbmcmJnRoaXMuX2dyYXBoaWNTdGF0ZVRyYWNraW5nLmFkZEdyYXBoaWMocik7Y29uc3QgYT10aGlzLl93aGVuR3JhcGhpY3MzREdyYXBoaWNSZXF1ZXN0c1tpLnVpZF07cmV0dXJuIGEmJihkZWxldGUgdGhpcy5fd2hlbkdyYXBoaWNzM0RHcmFwaGljUmVxdWVzdHNbaS51aWRdLGEucmVzb2x2ZShyKSkscn1fYWJvcnRSZW5kZXJlckNoYW5nZSgpe3RoaXMuX3JlbmRlcmVyQ2hhbmdlQWJvcnRDb250cm9sbGVyJiYodGhpcy5fcmVuZGVyZXJDaGFuZ2VBYm9ydENvbnRyb2xsZXIuYWJvcnQoKSx0aGlzLl9yZW5kZXJlckNoYW5nZUFib3J0Q29udHJvbGxlcj1udWxsKX1hc3luYyByZW5kZXJlckNoYW5nZShlKXtpZih0aGlzLl9hYm9ydFJlbmRlcmVyQ2hhbmdlKCksZSE9PXRoaXMuY3VycmVudFJlbmRlcmVyKWlmKHRoaXMuX3ZhbGlkYXRlUmVuZGVyZXIoZSksbnVsbD09ZSYmdGhpcy5fY3VycmVudFJlbmRlcmVyQ2hhbmdlKG51bGwsITEpLEIoZSkpaWYobnVsbCE9ZSYmZS5hcmNhZGVSZXF1aXJlZCl7Y29uc3QgdD1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuX3JlbmRlcmVyQ2hhbmdlQWJvcnRDb250cm9sbGVyPXQ7Y29uc3R7YXJjYWRlVXRpbHM6aX09YXdhaXQgdGhpcy5fZW5zdXJlQXJjYWRlKCk7eSh0KTtjb25zdCByPWkuaGFzR2VvbWV0cnlPcGVyYXRpb25zKGUpO3ImJihhd2FpdCBpLmVuYWJsZUdlb21ldHJ5T3BlcmF0aW9ucygpLHkodCkpLHRoaXMuZWZmZWN0aXZlVXBkYXRlUG9saWN5PT09ZmUuQVNZTkM/YXdhaXQgdGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKCgoKT0+dGhpcy5fY3VycmVudFJlbmRlcmVyQ2hhbmdlKGUscikpLHQuc2lnbmFsKTp0aGlzLl9jdXJyZW50UmVuZGVyZXJDaGFuZ2UoZSxyKSx0aGlzLl9yZW5kZXJlckNoYW5nZUFib3J0Q29udHJvbGxlcj1udWxsfWVsc2UgaWYodGhpcy5lZmZlY3RpdmVVcGRhdGVQb2xpY3k9PT1mZS5BU1lOQyl7Y29uc3QgdD1uZXcgQWJvcnRDb250cm9sbGVyO3RoaXMuX3JlbmRlcmVyQ2hhbmdlQWJvcnRDb250cm9sbGVyPXQsYXdhaXQgdGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKCgoKT0+dGhpcy5fY3VycmVudFJlbmRlcmVyQ2hhbmdlKGUsITEpKSx0LnNpZ25hbCksdGhpcy5fcmVuZGVyZXJDaGFuZ2VBYm9ydENvbnRyb2xsZXI9bnVsbH1lbHNlIHRoaXMuX2N1cnJlbnRSZW5kZXJlckNoYW5nZShlLCExKTtlbHNlIHRoaXMuX2N1cnJlbnRSZW5kZXJlckNoYW5nZShlLCExKX1hc3luYyBfZW5zdXJlQXJjYWRlKCl7cmV0dXJuIG51bGw9PXRoaXMuX2FyY2FkZU9uRGVtYW5kPyh0aGlzLl9hcmNhZGVPbkRlbWFuZD1hd2FpdCBZKCksdGhpcy5fYXJjYWRlT25EZW1hbmQpOnRoaXMuX2FyY2FkZU9uRGVtYW5kfV9jdXJyZW50UmVuZGVyZXJDaGFuZ2UoZSx0KXt0aGlzLmN1cnJlbnRSZW5kZXJlcj1lLHRoaXMucmVuZGVyZXJIYXNHZW9tZXRyeU9wZXJhdGlvbnM9dCx0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5hcmNhZGU9dGhpcy5fYXJjYWRlT25EZW1hbmQ7Y29uc3QgaT10aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5yZW5kZXJlcjtpZihlPT09aSlyZXR1cm47aWYodGhpcy5fc3ltYm9sQ29udmVyc2lvbkNhY2hlLmNsZWFyKCksbnVsbD09ZSlyZXR1cm4gdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQucmVuZGVyZXI9bnVsbCx2b2lkIHRoaXMucmVjcmVhdGVBbGxHcmFwaGljc0FuZFN5bWJvbHMoKTtjb25zdCByPUcoaSxlKTt0aGlzLl91cGRhdGVVbmNoYW5nZWRTeW1ib2xNYXBwaW5ncyhyLGUsaSksdGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQucmVuZGVyZXI9ZSxudWxsIT1yJiYoXCJjb21wbGV0ZVwiPT09ci50eXBlP3RoaXMucmVjcmVhdGVBbGxHcmFwaGljc0FuZFN5bWJvbHMoKTpcInBhcnRpYWxcIj09PXIudHlwZSYmKHRoaXMuX2FwcGx5UmVuZGVyZXJEaWZmKHIsZSxpKT90aGlzLl9sYWJlbGVyPy5yZXNldCgpOnRoaXMucmVjcmVhdGVBbGxHcmFwaGljc0FuZFN5bWJvbHMoKSksdGhpcy5ub3RpZnlDaGFuZ2UoXCJhdmVyYWdlU3ltYm9sQ29tcGxleGl0eVwiKSl9X2RpZmZIYXNTeW1ib2xDaGFuZ2UoZSl7Zm9yKGNvbnN0IHQgaW4gZS5kaWZmKXN3aXRjaCh0KXtjYXNlXCJ2aXN1YWxWYXJpYWJsZXNcIjpjYXNlXCJkZWZhdWx0U3ltYm9sXCI6Y2FzZVwidW5pcXVlVmFsdWVJbmZvc1wiOmJyZWFrO2Nhc2VcInVuaXF1ZVZhbHVlR3JvdXBzXCI6Y2FzZVwiYXV0aG9yaW5nSW5mb1wiOmNhc2VcImZpZWxkRGVsaW1pdGVyXCI6ZGVsZXRlIGUuZGlmZlt0XTticmVhaztkZWZhdWx0OnJldHVybiEwfXJldHVybiExfV9hcHBseVN5bWJvbFNldERpZmYoZSx0LGkpe2U9ZXx8W10sdD10fHxbXTtjb25zdCByPVtdO2Zvcihjb25zdCBzIG9mIHQpe2NvbnN0IHQ9dGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5nZXQocy5pZCk7dCYmdC5mb3JFYWNoKCgoYSxuKT0+e2NvbnN0IG89YS5ncmFwaGljLGw9dGhpcy5sYXllciBpbnN0YW5jZW9mIHo/dGhpcy5sYXllcjpudWxsLGg9dGhpcy5fYXJjYWRlT25EZW1hbmQ7aWYocz09PWkuZGVmYXVsdFN5bWJvbCYmaS5nZXRTeW1ib2woTihvLGwpLHthcmNhZGU6aH0pPT09aS5kZWZhdWx0U3ltYm9sKXJldHVybjtjb25zdCBkPWEudXNlZE1lbW9yeTtlLmxlbmd0aHx8aS5kZWZhdWx0U3ltYm9sP3IucHVzaChvKTp0aGlzLl9ncmFwaGljc1dpdGhvdXRTeW1ib2wuc2V0KG4sbyk7Y29uc3QgcD10aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQobik7dGhpcy5fY29uZGl0aW9uYWxSZW1vdmUocCxuKSxhLmRlc3Ryb3koKSx0LmRlbGV0ZShuKSx0aGlzLl9yZW1vdmVHcmFwaGljczNER3JhcGhpYyhuLGQpLHRoaXMuX3VwZGF0ZUxheWVyVmlzaWJpbGl0eSgpfSkpLHRoaXMuX3doZW5TeW1ib2xSZW1vdmVkLmZvckFsbCgoZT0+ZShzLmlkKSkpfShlLmxlbmd0aHx8ci5sZW5ndGgpJiYodGhpcy5fZ3JhcGhpY3NXaXRob3V0U3ltYm9sLmZvckVhY2goKGU9PnIucHVzaChlKSkpLHRoaXMuX2dyYXBoaWNzV2l0aG91dFN5bWJvbC5jbGVhcigpLHRoaXMuYWRkKHIpKSx0aGlzLl9jbGVhbnVwU3ltYm9scygpLHRoaXMuX2xhYmVsZXImJnRoaXMub3duZXIudmlldy5sYWJlbGVyLnNldERpcnR5KCksdGhpcy5vd25lci52aWV3LmRlY29uZmxpY3Rvci5zZXREaXJ0eSgpfV9hcHBseVVuaXF1ZVZhbHVlUmVuZGVyZXJEaWZmKGUsdCxpKXtjb25zdCByPWUuZGlmZi5kZWZhdWx0U3ltYm9sLGE9ZS5kaWZmLnVuaXF1ZVZhbHVlSW5mb3M7aWYocnx8YSl7Y29uc3Qgbj1hP2EuYWRkZWQubWFwKChlPT5lLnN5bWJvbCkpLmZpbHRlcihzKTpbXSxvPWE/YS5yZW1vdmVkLm1hcCgoZT0+ZS5zeW1ib2wpKS5maWx0ZXIocyk6W107aWYoYSlmb3IobGV0IGU9MDtlPGEuY2hhbmdlZC5sZW5ndGg7ZSsrKW4ucHVzaChhLmNoYW5nZWRbZV0ubmV3VmFsdWUuc3ltYm9sKSxvLnB1c2goYS5jaGFuZ2VkW2VdLm9sZFZhbHVlLnN5bWJvbCk7cmV0dXJuIHI/KGkuZGVmYXVsdFN5bWJvbCYmby5wdXNoKGkuZGVmYXVsdFN5bWJvbCksdC5kZWZhdWx0U3ltYm9sJiZuLnB1c2godC5kZWZhdWx0U3ltYm9sKSk6aS5kZWZhdWx0U3ltYm9sJiZuLmxlbmd0aCYmby5wdXNoKHQuZGVmYXVsdFN5bWJvbCksdGhpcy5fYXBwbHlTeW1ib2xTZXREaWZmKG4sbyx0KSxkZWxldGUgZS5kaWZmLmRlZmF1bHRTeW1ib2wsZGVsZXRlIGUuZGlmZi51bmlxdWVWYWx1ZUluZm9zLCEwfXJldHVybiExfV9jYWxjdWxhdGVVbmNoYW5nZWRTeW1ib2xNYXBwaW5nKGUsdCxpKXtpZihcInVuaXF1ZS12YWx1ZVwiIT09dD8udHlwZXx8XCJ1bmlxdWUtdmFsdWVcIiE9PWk/LnR5cGV8fG51bGwhPWUmJlwicGFydGlhbFwiIT09ZS50eXBlKXJldHVybltdO2NvbnN0IHI9ZT0+bnVsbCE9ZT9lLmlkOm51bGwscz1lJiZlLmRpZmYsYT1zPy5kZWZhdWx0U3ltYm9sLG49cyYmcy51bmlxdWVWYWx1ZUluZm9zO2xldCBvO2lmKG4pbz1uLnVuY2hhbmdlZC5tYXAoKGU9Pih7b2xkSWQ6cihlLm9sZFZhbHVlLnN5bWJvbCksbmV3SWQ6cihlLm5ld1ZhbHVlLnN5bWJvbCl9KSkpO2Vsc2V7bz1bXTtmb3IoY29uc3QgZSBvZiBpLnVuaXF1ZVZhbHVlSW5mb3M/P1tdKXtjb25zdCBpPXIoZS5zeW1ib2wpLHM9dC51bmlxdWVWYWx1ZUluZm9zPy5maW5kKCh0PT50LnZhbHVlPT09ZS52YWx1ZSkpO3MmJmkhPT1yKHMuc3ltYm9sKSYmby5wdXNoKHtvbGRJZDppLG5ld0lkOnIocy5zeW1ib2wpfSl9fXJldHVybiFhJiZpLmRlZmF1bHRTeW1ib2wmJm8ucHVzaCh7b2xkSWQ6cihpLmRlZmF1bHRTeW1ib2wpLG5ld0lkOnIodC5kZWZhdWx0U3ltYm9sKX0pLG99X3VwZGF0ZVN5bWJvbE1hcHBpbmcoZSx0KXtjb25zdCBpPW51bGwhPXQmJnQ/XCJzdHJpbmdcIj09dHlwZW9mIHQ/dDp0LmlkOm51bGw7aWYobnVsbD09ZXx8ZT09PWkpcmV0dXJuO2NvbnN0IHI9dGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5nZXQoZSk7dGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5kZWxldGUoZSksdm9pZCAwIT09ciYmdGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5zZXQoaSxyKTtjb25zdCBzPXRoaXMuX3N5bWJvbHMuZ2V0KGUpO2lmKHZvaWQgMCE9PXMmJih0aGlzLl9zeW1ib2xzLmRlbGV0ZShlKSx0aGlzLl9zeW1ib2xzLnNldChpLHMpLG51bGwhPXMpKXtjb25zdCBlPVwic3RyaW5nXCI9PXR5cGVvZiB0P251bGw6dDtudWxsIT1lP3Muc3ltYm9sPWU6cy5zeW1ib2wuaWQ9aX19X3VwZGF0ZVVuY2hhbmdlZFN5bWJvbE1hcHBpbmdzKGUsdCxpKXtjb25zdCByPXRoaXMuX2NhbGN1bGF0ZVVuY2hhbmdlZFN5bWJvbE1hcHBpbmcoZSx0LGkpO2Zvcihjb25zdHtvbGRJZDpzLG5ld0lkOmF9b2Ygcil0aGlzLl91cGRhdGVTeW1ib2xNYXBwaW5nKHMsYSl9X2FwcGx5UmVuZGVyZXJEaWZmKGUsaSxyKXtpZih0aGlzLl9kaWZmSGFzU3ltYm9sQ2hhbmdlKGUpKXJldHVybiExO2lmKGkgaW5zdGFuY2VvZiB0JiZyIGluc3RhbmNlb2YgdCYmdGhpcy5fYXBwbHlVbmlxdWVWYWx1ZVJlbmRlcmVyRGlmZihlLGkscikmJjA9PT1PYmplY3Qua2V5cyhlLmRpZmYpLmxlbmd0aClyZXR1cm4hMDtmb3IoY29uc3RbdF1vZiB0aGlzLl9ncmFwaGljc0J5U3ltYm9sKXtjb25zdCByPXRoaXMuX3N5bWJvbHMuZ2V0KHQpO2lmKG51bGwhPXIpc3dpdGNoKHIuYXBwbHlSZW5kZXJlckRpZmYoZSxpKSl7Y2FzZSBjZS5SZWNyZWF0ZVN5bWJvbDp0aGlzLl9yZWNyZWF0ZVN5bWJvbCh0KTticmVhaztjYXNlIGNlLlJlY3JlYXRlR3JhcGhpY3M6dGhpcy5fcmVjcmVhdGVHcmFwaGljc0ZvclN5bWJvbCh0KTtjYXNlIGNlLkZhc3RVcGRhdGU6fX1yZXR1cm4hMH1vcGFjaXR5Q2hhbmdlKCl7dGhpcy5mb3JFYWNoR3JhcGhpY3MzRFN5bWJvbCgoKGUsdCk9PmUuZ2xvYmFsUHJvcGVydHlDaGFuZ2VkKFwib3BhY2l0eVwiLHQpKSksdGhpcy5fdXBkYXRlU3RhZ2VMYXllclZpc2liaWxpdHkoKX1fc2xpY2VQbGFuZUVuYWJsZWRDaGFuZ2UoZSl7ZSE9PXRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LnNsaWNlUGxhbmVFbmFibGVkJiYodGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQuc2xpY2VQbGFuZUVuYWJsZWQ9ZSx0aGlzLnN0YWdlTGF5ZXIuc2xpY2VhYmxlPWUsdGhpcy5mb3JFYWNoR3JhcGhpY3MzRFN5bWJvbCgoKGUsdCk9PmUuZ2xvYmFsUHJvcGVydHlDaGFuZ2VkKFwic2xpY2VQbGFuZUVuYWJsZWRcIix0KSkpLHRoaXMuX2RlY29uZmxpY3RvciYmdGhpcy5fZGVjb25mbGljdG9yLnNsaWNlUGxhbmVFbmFibGVkQ2hhbmdlKCksdGhpcy5fbGFiZWxlciYmdGhpcy5fbGFiZWxlci5zbGljZVBsYW5lRW5hYmxlZENoYW5nZSgpKX1fcGh5c2ljYWxCYXNlZFJlbmRlcmluZ0NoYW5nZShlKXt0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5waHlzaWNhbEJhc2VkUmVuZGVyaW5nRW5hYmxlZD1lLHRoaXMuZm9yRWFjaEdyYXBoaWNzM0RTeW1ib2woKChlLHQsaSk9PntlLmdsb2JhbFByb3BlcnR5Q2hhbmdlZChcInBoeXNpY2FsQmFzZWRSZW5kZXJpbmdFbmFibGVkXCIsdCl8fHRoaXMuX3JlY3JlYXRlU3ltYm9sKGkpfSkpfV9za2lwSGlnaFN5bWJvbExvRHNDaGFuZ2UoZSl7dGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQuc2tpcEhpZ2hTeW1ib2xMb2RzPWUsdGhpcy5mb3JFYWNoR3JhcGhpY3MzRFN5bWJvbCgoKGUsdCxpKT0+e2UuZ2xvYmFsUHJvcGVydHlDaGFuZ2VkKFwic2tpcEhpZ2hTeW1ib2xMb2RzXCIsdCl8fHRoaXMuX3JlY3JlYXRlU3ltYm9sKGkpfSkpfV9waXhlbFJhdGlvQ2hhbmdlKCl7dGhpcy5mb3JFYWNoR3JhcGhpY3MzRFN5bWJvbCgoKGUsdCxpKT0+e2UuZ2xvYmFsUHJvcGVydHlDaGFuZ2VkKFwicGl4ZWxSYXRpb1wiLHQpfHx0aGlzLl9yZWNyZWF0ZVN5bWJvbChpKX0pKX1fc2lnbmFsVXBkYXRpbmdEdXJpbmdBc3luY0xvYWRlZEdyYXBoaWNzQ2hhbmdlKCl7dGhpcy5fdXBkYXRpbmdQZW5kaW5nTG9hZGVkR3JhcGhpY3NDaGFuZ2UmJnRoaXMuX3VwZGF0aW5nUGVuZGluZ0xvYWRlZEdyYXBoaWNzQ2hhbmdlLnJlbW92ZSgpLHRoaXMuX3VwZGF0aW5nUGVuZGluZ0xvYWRlZEdyYXBoaWNzQ2hhbmdlPUMoKCgpPT57dGhpcy5fdXBkYXRpbmdQZW5kaW5nTG9hZGVkR3JhcGhpY3NDaGFuZ2U9bnVsbH0pKX1zZXRDbGlwcGluZ0V4dGVudChlLHQpe2NvbnN0IGk9dGhpcy5zeW1ib2xDcmVhdGlvbkNvbnRleHQuY2xpcHBpbmdFeHRlbnQscj1UKCk7cmV0dXJuIHVlKGUscix0KT90aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5jbGlwcGluZ0V4dGVudD1WKEwoKSxyKTp0aGlzLnN5bWJvbENyZWF0aW9uQ29udGV4dC5jbGlwcGluZ0V4dGVudD1udWxsLCFGKHRoaXMuc3ltYm9sQ3JlYXRpb25Db250ZXh0LmNsaXBwaW5nRXh0ZW50LGkpfW1vZGlmeUdyYXBoaWNzM0RHcmFwaGljVmlzaWJpbGl0aWVzKGUpe2lmKHRoaXMuZGVzdHJveWVkKXJldHVybjtsZXQgdD0hMTt0aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5mb3JFYWNoKChpPT57ZShpKSYmKHQ9ITApfSkpLHQmJih0aGlzLm93bmVyLnZpZXcubGFiZWxlcj8uc2V0RGlydHkoKSx0aGlzLm93bmVyLnZpZXcuZGVjb25mbGljdG9yPy5zZXREaXJ0eSgpKX1mb3JFYWNoR3JhcGhpY3MzRFN5bWJvbChlKXtmb3IoY29uc3RbdCxpXW9mIHRoaXMuX3N5bWJvbHMpe2lmKG51bGw9PWkpcmV0dXJuO2UoaSx0aGlzLl9ncmFwaGljc0J5U3ltYm9sLmdldCh0KXx8SGUsdCl9fXVwZGF0ZUFsbEdyYXBoaWNzVmlzaWJpbGl0eSgpe251bGwhPXRoaXMuX2ZpbHRlclZpc2liaWxpdHkmJnRoaXMuX2ZpbHRlclZpc2liaWxpdHkucmVhcHBseSgpLHRoaXMubW9kaWZ5R3JhcGhpY3MzREdyYXBoaWNWaXNpYmlsaXRpZXMoKGU9Pntjb25zdCB0PXRoaXMuX3VwZGF0ZVVzZXJWaXNpYmlsaXR5KGUpLGk9bnVsbCE9dGhpcy5fc2NhbGVWaXNpYmlsaXR5JiZ0aGlzLl9zY2FsZVZpc2liaWxpdHkudXBkYXRlVmlzaWJpbGl0eShlKTtyZXR1cm4gdHx8aX0pKX1faGlkZUFsbEdyYXBoaWNzKCl7dGhpcy5tb2RpZnlHcmFwaGljczNER3JhcGhpY1Zpc2liaWxpdGllcygoZT0+ZS5zZXRWaXNpYmlsaXR5RmxhZyh0ZS5HUkFQSElDLGllLlVTRVIsITEpKSl9X3ZhbGlkYXRlUmVuZGVyZXIoZSl7Y29uc3QgdD1xKGUse2dlb21ldHJ5VHlwZTp0aGlzLmxheWVyPy5nZW9tZXRyeVR5cGV9KTtpZih0KXtjb25zdCBlPWBSZW5kZXJlciBmb3IgbGF5ZXIgJyR7dGhpcy5sYXllci50aXRsZT9gJHt0aGlzLmxheWVyLnRpdGxlfSwgYDpcIlwifSwgaWQ6JHt0aGlzLmxheWVyLmlkfScgaXMgbm90IHN1cHBvcnRlZCBpbiBhIFNjZW5lVmlld2A7VmUud2FybihlLHQubWVzc2FnZSl9fV9jbGVhbnVwU3ltYm9scygpe2lmKHRoaXMuX2dyYXBoaWNzV2FpdGluZ0ZvclN5bWJvbC5zaXplPjB8fHRoaXMuX3N1c3BlbmRTeW1ib2xDbGVhbnVwKXJldHVybjtsZXQgZT0hMTt0aGlzLl9zeW1ib2xzLmZvckVhY2goKCh0LGkpPT57aWYobnVsbD09dHx8dC5yZWZlcmVuY2VkPjApcmV0dXJuO2NvbnN0IHI9dGhpcy5fZ3JhcGhpY3NCeVN5bWJvbC5nZXQoaSk7ciYmMCE9PXIuc2l6ZXx8KHRoaXMuX2dyYXBoaWNzQnlTeW1ib2wuZGVsZXRlKGkpLHRoaXMuX3N5bWJvbHMuZGVsZXRlKGkpLGgodCksZT0hMCl9KSksZSYmKHRoaXMuX3JlY29tcHV0ZUV4dGVudFBhZGRpbmcoKSx0aGlzLm5vdGlmeUNoYW5nZShcImF2ZXJhZ2VTeW1ib2xDb21wbGV4aXR5XCIpKX1nZXQgdGVzdCgpe3JldHVybntzbmFwc2hvdEludGVybmFsczooKT0+KHtncmFwaGljczpbLi4udGhpcy5ncmFwaGljczNER3JhcGhpY3Mua2V5cygpXS5zb3J0KCksc3ltYm9sczpbLi4udGhpcy5fc3ltYm9scy5rZXlzKCldLnNvcnQoKSxncmFwaGljc0J5U3ltYm9sOlsuLi50aGlzLl9ncmFwaGljc0J5U3ltYm9sLmtleXMoKV0uc29ydCgpLm1hcCgoZT0+KHtzeW1ib2xJZDplLGdyYXBoaWNzOlsuLi50aGlzLl9ncmFwaGljc0J5U3ltYm9sLmdldChlKS5rZXlzKCldLnNvcnQoKX0pKSksZ3JhcGhpY3NXaXRob3V0U3ltYm9sOlsuLi50aGlzLl9ncmFwaGljc1dpdGhvdXRTeW1ib2wua2V5cygpXS5zb3J0KCksZ3JhcGhpY3NEcmFwZWRVaWRzOlsuLi50aGlzLl9ncmFwaGljc0RyYXBlZFVpZHNdLnNvcnQoKSxwZW5kaW5nVXBkYXRlczp0aGlzLl9wZW5kaW5nVXBkYXRlc30pLHN5bWJvbHM6dGhpcy5fc3ltYm9scyxmaWx0ZXJWaXNpYmlsaXR5OnRoaXMuX2ZpbHRlclZpc2liaWxpdHksbnVtUGVuZGluZzp0aGlzLl9wZW5kaW5nVXBkYXRlcy5zaXplLGZvcmNlVXBkYXRlUG9saWN5OmU9Pnt0aGlzLl9mb3JjZWRVcGRhdGVQb2xpY3k9ZX19fWdldCBwZXJmb3JtYW5jZUluZm8oKXtyZXR1cm57dmlzaWJsZTp0aGlzLmdyYXBoaWNzM0RHcmFwaGljcy5zaXplLG1pc3Npbmc6dGhpcy5fZ3JhcGhpY3NXaXRob3V0U3ltYm9sLnNpemUscGVuZGluZzp0aGlzLl9wZW5kaW5nVXBkYXRlcy5zaXplfX19O3ZhciBUZTtGZS50bXBWZWM9RSgpLGUoW1Moe3JlYWRPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcImNvbXB1dGVkRXh0ZW50XCIsdm9pZCAwKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcImN1cnJlbnRSZW5kZXJlclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJyZW5kZXJlckhhc0dlb21ldHJ5T3BlcmF0aW9uc1wiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfZnJhbWVUYXNrXCIsdm9pZCAwKSxlKFtTKHtyZWFkT25seTohMH0pXSxGZS5wcm90b3R5cGUsXCJfdmlld1NwYXRpYWxSZWZlcmVuY2VcIixudWxsKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIl9yZW5kZXJlckNoYW5nZUFib3J0Q29udHJvbGxlclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfZWxldmF0aW9uSW5mb0NoYW5nZUFib3J0Q29udHJvbGxlclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfaW5pdGlhbGl6ZUFib3J0Q29udHJvbGxlclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfZWxldmF0aW9uQWxpZ25tZW50XCIsdm9pZCAwKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIl9zY2FsZVZpc2liaWxpdHlcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiX2ZpbHRlclZpc2liaWxpdHlcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiX2luaXRpYWxpemVQcm9taXNlXCIsdm9pZCAwKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIl9zcGF0aWFsSW5kZXhcIix2b2lkIDApLGUoW1Moe3JlYWRPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcImV4dGVudFBhZGRpbmdcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiX3VwZGF0aW5nUGVuZGluZ0xvYWRlZEdyYXBoaWNzQ2hhbmdlXCIsdm9pZCAwKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIl9mZWF0dXJlU3RvcmVcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiX2RlY29uZmxpY3RvclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfbGFiZWxlclwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfb2JqZWN0U3RhdGVzXCIsdm9pZCAwKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIl9sb2FkaW5nU3ltYm9sc1wiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJwcmVmZXJyZWRVcGRhdGVQb2xpY3lcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiX2ZvcmNlZFVwZGF0ZVBvbGljeVwiLHZvaWQgMCksZShbUyh7cmVhZE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwiZWZmZWN0aXZlVXBkYXRlUG9saWN5XCIsbnVsbCksZShbUyh7Y29uc3RydWN0T25seTohMH0pXSxGZS5wcm90b3R5cGUsXCJlbGV2YXRpb25GZWF0dXJlRXhwcmVzc2lvbkVuYWJsZWRcIix2b2lkIDApLGUoW1Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwib3duZXJcIix2b2lkIDApLGUoW1Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwibGF5ZXJcIix2b2lkIDApLGUoW1Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwiZ3JhcGhpY1N5bWJvbFN1cHBvcnRlZFwiLHZvaWQgMCksZShbUyh7Y29uc3RydWN0T25seTohMH0pXSxGZS5wcm90b3R5cGUsXCJnZXRSZW5kZXJpbmdJbmZvV2l0aG91dFJlbmRlcmVyXCIsdm9pZCAwKSxlKFtTKHtjb25zdHJ1Y3RPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcImNvbXBvbmVudEZhY3Rvcmllc1wiLHZvaWQgMCksZShbUyh7Y29uc3RydWN0T25seTohMH0pXSxGZS5wcm90b3R5cGUsXCJzZXRVaWRUb0lkT25BZGRcIix2b2lkIDApLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiZmVhdHVyZVN0b3JlXCIsbnVsbCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJpbml0aWFsaXplUHJvbWlzZVwiLG51bGwpLGUoW1MoKV0sRmUucHJvdG90eXBlLFwic2NhbGVWaXNpYmlsaXR5XCIsbnVsbCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJlbGV2YXRpb25BbGlnbm1lbnRcIixudWxsKSxlKFtTKCldLEZlLnByb3RvdHlwZSxcIm9iamVjdFN0YXRlc1wiLG51bGwpLGUoW1MoKV0sRmUucHJvdG90eXBlLFwiZmlsdGVyVmlzaWJpbGl0eVwiLG51bGwpLGUoW1Moe3JlYWRPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbUyh7cmVhZE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwicnVubmluZ1wiLG51bGwpLGUoW1Moe3JlYWRPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcInN1c3BlbmRlZE9yT3V0c2lkZU9mVmlld1wiLG51bGwpLGUoW1Moe3JlYWRPbmx5OiEwLGRlcGVuZHNPbjpbXX0pXSxGZS5wcm90b3R5cGUsXCJ1cGRhdGluZ1JlbWFpbmluZ1wiLG51bGwpLGUoW1Moe3JlYWRPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcImRpc3BsYXlGZWF0dXJlTGltaXRcIixudWxsKSxlKFtTKHtyZWFkT25seTohMCxkZXBlbmRzT246W119KV0sRmUucHJvdG90eXBlLFwiYXZlcmFnZVN5bWJvbENvbXBsZXhpdHlcIixudWxsKSxlKFtTKHtjb25zdHJ1Y3RPbmx5OiEwfSldLEZlLnByb3RvdHlwZSxcImhhc1pcIix2b2lkIDApLGUoW1Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sRmUucHJvdG90eXBlLFwiaGFzTVwiLHZvaWQgMCksZShbUygpXSxGZS5wcm90b3R5cGUsXCJfb2JqZWN0SWRGaWVsZFwiLG51bGwpLEZlPUFlPWUoW3coT2UpXSxGZSksZnVuY3Rpb24oZSl7ZVtlLk5FVz0wXT1cIk5FV1wiLGVbZS5MT0FESU5HPTFdPVwiTE9BRElOR1wiLGVbZS5SRUFEWT0yXT1cIlJFQURZXCIsZVtlLlJFSkVDVEVEPTNdPVwiUkVKRUNURURcIn0oVGV8fChUZT17fSkpO2NsYXNzIGtle2NvbnN0cnVjdG9yKCl7dGhpcy5hZGQ9bnVsbCx0aGlzLnJlbmRlcmluZ0luZm89bnVsbCx0aGlzLnN0YXRlPVRlLk5FVyx0aGlzLmFib3J0Q29udHJvbGxlcj1udWxsLHRoaXMucmVtb3ZlPW51bGx9Y2xlYXIoKXt0aGlzLmFkZD1udWxsLHRoaXMucmVuZGVyaW5nSW5mbz1udWxsLHRoaXMuc3RhdGU9VGUuTkVXLHRoaXMuYWJvcnRDb250cm9sbGVyPW51bGwsdGhpcy5yZW1vdmU9bnVsbH19Y29uc3QgemU9MTAsTWU9RSgpLFdlPUUoKSxIZT1uZXcgTWFwO2V4cG9ydHtGZSBhcyBHcmFwaGljczNEQ29yZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydHt3YXRjaCBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e0V4dGVudFNldCBhcyBufWZyb21cIi4vRXh0ZW50U2V0LmpzXCI7aW1wb3J0e1VwZGF0ZVBvbGljeSBhcyBvfWZyb21cIi4uLy4uL3dlYmdsLWVuZ2luZS9saWIvVXBkYXRlUG9saWN5LmpzXCI7aW1wb3J0e1Rhc2tQcmlvcml0eSBhcyBofWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvU2NoZWR1bGVyLmpzXCI7bGV0IHA9Y2xhc3MgZXh0ZW5kcyB0e2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX2RpcnR5RXh0ZW50cz1uZXcgbix0aGlzLl9nbG9iYWxEaXJ0eT0hMSx0aGlzLl9hdmVyYWdlRXh0ZW50VXBkYXRlU2l6ZT0wLHRoaXMuX2RpcnR5R3JhcGhpY3NTZXQ9bmV3IFNldCx0aGlzLl91cGRhdGVFbGV2YXRpb249ITEsdGhpcy5ncmFwaGljc0NvcmVPd25lcj1udWxsLHRoaXMuZ3JhcGhpY3NDb3JlPW51bGwsdGhpcy5ldmVudHM9bmV3IGl9aW5pdGlhbGl6ZSgpe2NvbnN0IGU9dGhpcy5lbGV2YXRpb25Qcm92aWRlcix0PXRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyO3RoaXMuYWRkSGFuZGxlcyhbZS5vbihcImVsZXZhdGlvbi1jaGFuZ2VcIiwoZT0+dGhpcy5fZWxldmF0aW9uQ2hhbmdlZChlKSkpLHIoKCgpPT50aGlzLmdyYXBoaWNzQ29yZU93bmVyLnN1c3BlbmRlZCksKCgpPT50aGlzLl9zdXNwZW5kZWRDaGFuZ2UoKSkpLHQucmVnaXN0ZXJUYXNrKGguRUxFVkFUSU9OX0FMSUdOTUVOVCx0aGlzKV0pfWRlc3Ryb3koKXt0aGlzLl9kaXJ0eUdyYXBoaWNzU2V0LmNsZWFyKCksdGhpcy5ncmFwaGljc0NvcmVPd25lcj1udWxsLHRoaXMuZ3JhcGhpY3NDb3JlPW51bGwsdGhpcy5xdWVyeUdyYXBoaWNVSURzSW5FeHRlbnQ9bnVsbCx0aGlzLmVsZXZhdGlvblByb3ZpZGVyPW51bGx9Y2xlYXIoKXt0aGlzLl9kaXJ0eUdyYXBoaWNzU2V0LmNsZWFyKCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKX1fc3VzcGVuZGVkQ2hhbmdlKCl7ITA9PT10aGlzLmdyYXBoaWNzQ29yZU93bmVyLnN1c3BlbmRlZD90aGlzLl91cGRhdGVFbGV2YXRpb249ITE6ITE9PT10aGlzLmdyYXBoaWNzQ29yZU93bmVyLnN1c3BlbmRlZCYmdGhpcy5fdXBkYXRlRWxldmF0aW9uJiYodGhpcy5fZ2xvYmFsRGlydHk9ITAsdGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKSl9ZWxldmF0aW9uSW5mb0NoYW5nZSgpe3RoaXMuX2dsb2JhbERpcnR5PSEwLHRoaXMubm90aWZ5Q2hhbmdlKFwidXBkYXRpbmdcIil9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuIHRoaXMucnVubmluZ31nZXQgcnVubmluZygpe3JldHVybiB0aGlzLl9kaXJ0eUdyYXBoaWNzU2V0LnNpemU+MHx8dGhpcy5fZGlydHlFeHRlbnRzJiYhdGhpcy5fZGlydHlFeHRlbnRzLmVtcHR5fHx0aGlzLl9nbG9iYWxEaXJ0eX1nZXQgdXBkYXRpbmdSZW1haW5pbmcoKXtyZXR1cm4gdGhpcy5fZGlydHlHcmFwaGljc1NldC5zaXplK3RoaXMuX2RpcnR5RXh0ZW50cy5zaXplKnRoaXMuX2F2ZXJhZ2VFeHRlbnRVcGRhdGVTaXplfXJ1blRhc2soZSl7Zm9yKHRoaXMuX2dsb2JhbERpcnR5JiYodGhpcy5fbWFya0FsbEdyYXBoaWNzRWxldmF0aW9uRGlydHkoKSx0aGlzLl9nbG9iYWxEaXJ0eT0hMSxlLm1hZGVQcm9ncmVzcygpKSxlLnJ1bigoKCk9PnRoaXMuX2RpcnR5RXh0ZW50cy5tZXJnZShlKSkpO3RoaXMucnVubmluZyYmIWUuZG9uZTspdGhpcy5fdXBkYXRlRGlydHlHcmFwaGljcyhlKSx0aGlzLl91cGRhdGVEaXJ0eUV4dGVudHMoZSk7dGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKX1fdXBkYXRlRGlydHlHcmFwaGljcyhlKXtjb25zdCB0PXRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5yZW5kZXJDb29yZHNIZWxwZXIsaT10aGlzLmdyYXBoaWNzQ29yZS5lZmZlY3RpdmVVcGRhdGVQb2xpY3k9PT1vLkFTWU5DO2Zvcihjb25zdCByIG9mIHRoaXMuX2RpcnR5R3JhcGhpY3NTZXQua2V5cygpKXtjb25zdCBzPXRoaXMuZ3JhcGhpY3NDb3JlLmdldEdyYXBoaWNzM0RHcmFwaGljQnlJZChyKTtpZih0aGlzLl9kaXJ0eUdyYXBoaWNzU2V0LmRlbGV0ZShyKSxudWxsIT1zJiYocy5hbGlnbldpdGhFbGV2YXRpb24odGhpcy5lbGV2YXRpb25Qcm92aWRlcix0LGkpLHRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5kZWNvbmZsaWN0b3Iuc2V0RGlydHkoKSxlLm1hZGVQcm9ncmVzcygpKSxlLmRvbmUpcmV0dXJufX1fdXBkYXRlRGlydHlFeHRlbnRzKGUpe2Zvcig7IXRoaXMuX2RpcnR5RXh0ZW50cy5lbXB0eSYmIWUuZG9uZTspe2NvbnN0IHQ9dGhpcy5fZGlydHlFeHRlbnRzLnBvcCgpLGk9dGhpcy5lbGV2YXRpb25Qcm92aWRlci5zcGF0aWFsUmVmZXJlbmNlO3RoaXMuZXZlbnRzLmVtaXQoXCJpbnZhbGlkYXRlLWVsZXZhdGlvblwiLHtleHRlbnQ6dCxzcGF0aWFsUmVmZXJlbmNlOml9KTtjb25zdCByPXRoaXMuX2RpcnR5R3JhcGhpY3NTZXQuc2l6ZTt0aGlzLnF1ZXJ5R3JhcGhpY1VJRHNJbkV4dGVudCh0LGksKGU9Pntjb25zdCB0PXRoaXMuZ3JhcGhpY3NDb3JlLmdldEdyYXBoaWNzM0RHcmFwaGljQnlJZChlKTtudWxsIT10JiZ0Lm5lZWRzRWxldmF0aW9uVXBkYXRlcygpJiZ0aGlzLl9kaXJ0eUdyYXBoaWNzU2V0LmFkZChlKX0pKSx0aGlzLl9hdmVyYWdlRXh0ZW50VXBkYXRlU2l6ZT0uMSoodGhpcy5fZGlydHlHcmFwaGljc1NldC5zaXplLXIpKy45KnRoaXMuX2F2ZXJhZ2VFeHRlbnRVcGRhdGVTaXplLGUubWFkZVByb2dyZXNzKCl9fV9tYXJrQWxsR3JhcGhpY3NFbGV2YXRpb25EaXJ0eSgpe3RoaXMuX2RpcnR5RXh0ZW50cy5jbGVhcigpLHRoaXMuX2RpcnR5R3JhcGhpY3NTZXQuY2xlYXIoKSx0aGlzLmdyYXBoaWNzQ29yZS5ncmFwaGljczNER3JhcGhpY3MuZm9yRWFjaCgoKGUsdCk9PnRoaXMuX2RpcnR5R3JhcGhpY3NTZXQuYWRkKHQpKSl9X2VsZXZhdGlvbkNoYW5nZWQoZSl7aWYoXCJzY2VuZVwiPT09ZS5jb250ZXh0JiYoIXRoaXMuZ3JhcGhpY3NDb3JlLmxheWVyLmVsZXZhdGlvbkluZm98fFwicmVsYXRpdmUtdG8tc2NlbmVcIiE9PXRoaXMuZ3JhcGhpY3NDb3JlLmxheWVyLmVsZXZhdGlvbkluZm8ubW9kZSkpcmV0dXJuO2NvbnN0e2V4dGVudDp0LHNwYXRpYWxSZWZlcmVuY2U6aX09ZTtpZih0aGlzLmdyYXBoaWNzQ29yZU93bmVyLnN1c3BlbmRlZCl7aWYoIXRoaXMuX3VwZGF0ZUVsZXZhdGlvbil7Y29uc3QgZT10aGlzLmdyYXBoaWNzQ29yZS5jb21wdXRlZEV4dGVudDtlJiZ0WzJdPmUueG1pbiYmdFswXTxlLnhtYXgmJnRbM10+ZS55bWluJiZ0WzFdPGUueW1heCYmKHRoaXMuX3VwZGF0ZUVsZXZhdGlvbj0hMCl9dGhpcy5ldmVudHMuZW1pdChcImludmFsaWRhdGUtZWxldmF0aW9uXCIse2V4dGVudDp0LHNwYXRpYWxSZWZlcmVuY2U6aX0pfWVsc2UgdFswXT09PS0xLzA/dGhpcy5fZ2xvYmFsRGlydHk9ITA6dGhpcy5fZGlydHlFeHRlbnRzLmFkZCh0KSx0aGlzLm5vdGlmeUNoYW5nZShcInVwZGF0aW5nXCIpfX07ZShbcygpXSxwLnByb3RvdHlwZSxcImdyYXBoaWNzQ29yZU93bmVyXCIsdm9pZCAwKSxlKFtzKCldLHAucHJvdG90eXBlLFwiZ3JhcGhpY3NDb3JlXCIsdm9pZCAwKSxlKFtzKCldLHAucHJvdG90eXBlLFwicXVlcnlHcmFwaGljVUlEc0luRXh0ZW50XCIsdm9pZCAwKSxlKFtzKCldLHAucHJvdG90eXBlLFwiZWxldmF0aW9uUHJvdmlkZXJcIix2b2lkIDApLGUoW3Moe3JlYWRPbmx5OiEwfSldLHAucHJvdG90eXBlLFwidXBkYXRpbmdcIixudWxsKSxlKFtzKHtyZWFkT25seTohMH0pXSxwLnByb3RvdHlwZSxcInVwZGF0aW5nUmVtYWluaW5nXCIsbnVsbCkscD1lKFthKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuZ3JhcGhpY3MuR3JhcGhpY3MzREVsZXZhdGlvbkFsaWdubWVudFwiKV0scCk7ZXhwb3J0e3AgYXMgR3JhcGhpY3MzREVsZXZhdGlvbkFsaWdubWVudH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9BY2Nlc3Nvci5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvRXZlbnRlZC5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e3Byb2plY3RQb2ludCBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24uanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2dldE9iamVjdElkIGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRGZWF0dXJlcy5qc1wiO2ltcG9ydHtPcHRpbWl6ZWRGZWF0dXJlIGFzIHB9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL09wdGltaXplZEZlYXR1cmUuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvT3B0aW1pemVkR2VvbWV0cnkuanNcIjtpbXBvcnR7b3B0aW1pemVkRmVhdHVyZVF1ZXJ5RW5naW5lQWRhcHRlciBhcyBofWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kYXRhL29wdGltaXplZEZlYXR1cmVRdWVyeUVuZ2luZUFkYXB0ZXIuanNcIjtjb25zdCB1PWEoKTtsZXQgZD1jbGFzcyBleHRlbmRzIGV7Y29uc3RydWN0b3IodCl7c3VwZXIodCksdGhpcy5ldmVudHM9bmV3IHIsdGhpcy5oYXNaPW51bGwsdGhpcy5oYXNNPW51bGwsdGhpcy5vYmplY3RJZEZpZWxkPW51bGwsdGhpcy5mZWF0dXJlQWRhcHRlcj17Z2V0QXR0cmlidXRlOih0LGUpPT5cImdyYXBoaWNcImluIHQ/dC5ncmFwaGljLmF0dHJpYnV0ZXNbZV06aC5nZXRBdHRyaWJ1dGUodCxlKSxnZXRBdHRyaWJ1dGVzOnQ9PlwiZ3JhcGhpY1wiaW4gdD90LmdyYXBoaWMuYXR0cmlidXRlczpoLmdldEF0dHJpYnV0ZXModCksZ2V0T2JqZWN0SWQ6dD0+XCJncmFwaGljXCJpbiB0P2ModC5ncmFwaGljLHRoaXMub2JqZWN0SWRGaWVsZCk/P3ZvaWQgMDpoLmdldE9iamVjdElkKHQpLGdldEdlb21ldHJ5OnQ9PlwiZ3JhcGhpY1wiaW4gdD90LmdldEFzT3B0aW1pemVkR2VvbWV0cnkodGhpcy5oYXNaLHRoaXMuaGFzTSk6aC5nZXRHZW9tZXRyeSh0KSxnZXRDZW50cm9pZDoodCxlKT0+e2lmKFwiZ3JhcGhpY1wiaW4gdCl7bGV0IHI9bnVsbDtudWxsIT10LmNlbnRyb2lkP3I9dC5jZW50cm9pZDpcInBvaW50XCI9PT10LmdyYXBoaWMuZ2VvbWV0cnkudHlwZSYmaSh0LmdyYXBoaWMuZ2VvbWV0cnksbCx0aGlzLnZpZXdTcGF0aWFsUmVmZXJlbmNlKSYmKHI9bCk7Y29uc3Qgbz1uZXcgQXJyYXkoMisoZS5oYXNaPzE6MCkrKGUuaGFzTT8xOjApKTtyZXR1cm4gbnVsbD09cj8ob1swXT0wLG9bMV09MCxvWzJdPTAsb1szXT0wKToob1swXT1yLngsb1sxXT1yLnksZS5oYXNaJiYob1syXT1yLmhhc1o/ci56OjApLGUuaGFzTSYmKG9bZS5oYXNaPzM6Ml09ci5oYXNNP3IubTowKSksbmV3IG4oW10sbyl9cmV0dXJuIGguZ2V0Q2VudHJvaWQodCxlKX0sY2xvbmVXaXRoR2VvbWV0cnk6KHQsZSk9PlwiZ3JhcGhpY1wiaW4gdD9uZXcgcChlLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0QXR0cmlidXRlcyh0KSxudWxsLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0T2JqZWN0SWQodCkpOmguY2xvbmVXaXRoR2VvbWV0cnkodCxlKX19Zm9yRWFjaEluQm91bmRzKHQsZSl7dGhpcy5nZXRTcGF0aWFsSW5kZXgoKS5mb3JFYWNoSW5Cb3VuZHModCxlKX1mb3JFYWNoQm91bmRzKHQsZSl7Y29uc3Qgcj10aGlzLmdldFNwYXRpYWxJbmRleCgpO2Zvcihjb25zdCBvIG9mIHQpe2NvbnN0IHQ9dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRPYmplY3RJZChvKTtudWxsIT1yLmdldEJvdW5kcyh0LHUpJiZlKHUpfX19O3QoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJnZXRTcGF0aWFsSW5kZXhcIix2b2lkIDApLHQoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJmb3JFYWNoXCIsdm9pZCAwKSx0KFtvKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGQucHJvdG90eXBlLFwiaGFzWlwiLHZvaWQgMCksdChbbyh7Y29uc3RydWN0T25seTohMH0pXSxkLnByb3RvdHlwZSxcImhhc01cIix2b2lkIDApLHQoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJvYmplY3RJZEZpZWxkXCIsdm9pZCAwKSx0KFtvKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGQucHJvdG90eXBlLFwidmlld1NwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLHQoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJmZWF0dXJlU3BhdGlhbFJlZmVyZW5jZVwiLHZvaWQgMCksZD10KFtzKFwiZXNyaS52aWV3cy4zZC5sYXllcnMuZ3JhcGhpY3MuR3JhcGhpY3MzREZlYXR1cmVTdG9yZVwiKV0sZCk7Y29uc3QgbD17dHlwZTpcInBvaW50XCIseDowLHk6MCxoYXNaOiExLGhhc006ITEsc3BhdGlhbFJlZmVyZW5jZTpudWxsfTtleHBvcnR7ZCBhcyBHcmFwaGljczNERmVhdHVyZVN0b3JlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e3dhdGNoIGFzIHMsc3luYyBhcyBpLGluaXRpYWwgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtnZXRSZWZlcmVuY2VFbGxpcHNvaWQgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9lbGxpcHNvaWRVdGlscy5qc1wiO2ltcG9ydHtGcnVzdHVtRXh0ZW50SW50ZXJzZWN0aW9uIGFzIGN9ZnJvbVwiLi4vLi4vc3VwcG9ydC9GcnVzdHVtRXh0ZW50SW50ZXJzZWN0aW9uLmpzXCI7aW1wb3J0e1Rhc2tQcmlvcml0eSBhcyBwLFRhc2sgYXMgbH1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2NvbnN0IGg9MS4yO2xldCB1PWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLnN1c3BlbmRlZD0hMSx0aGlzLl9leHRlbnQ9bnVsbCx0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb25EaXJ0eT0hMCx0aGlzLl9pc1Zpc2libGVCZWxvd1N1cmZhY2VJbnRlcm5hbD0hMSx0aGlzLmdyYXBoaWNzQ29yZU93bmVyPW51bGwsdGhpcy51cGRhdGluZz0hMH1pbml0aWFsaXplKCl7Y29uc3R7Z3JhcGhpY3NDb3JlT3duZXI6ZX09dGhpczt0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb249bmV3IGMoe3JlbmRlckNvb3Jkc0hlbHBlcjplLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyfSk7Y29uc3QgdD1lLnZpZXcsbj10LmJhc2VtYXBUZXJyYWluLG89dC5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyO3RoaXMuYWRkSGFuZGxlcyhbdC5vbihcInJlc2l6ZVwiLCgoKT0+dGhpcy5fdmlld0NoYW5nZSgpKSkscygoKCk9PnQuc3RhdGUuY2FtZXJhKSwoKCk9PnRoaXMuX3ZpZXdDaGFuZ2UoKSksaSksby5yZWdpc3RlclRhc2socC5GUlVTVFVNX1ZJU0lCSUxJVFksdGhpcykscygoKCk9Pm4udmlzaWJsZUVsZXZhdGlvbkJvdW5kcyksKCgpPT50aGlzLl9lbGV2YXRpb25Cb3VuZHNDaGFuZ2UoKSkpXSksXCJsb2NhbFwiPT09dC52aWV3aW5nTW9kZT90aGlzLl9pc1Zpc2libGVCZWxvd1N1cmZhY2U9ITA6dGhpcy5hZGRIYW5kbGVzKFtzKCgoKT0+W24uYmFzZU9wYWNpdHksbi53aXJlZnJhbWUsdC5tYXA/Lmdyb3VuZD8ubmF2aWdhdGlvbkNvbnN0cmFpbnQ/LnR5cGVdKSwoKCk9PnRoaXMuX3VwZGF0ZUlzVmlzaWJsZUJlbG93U3VyZmFjZSgpKSxyKV0pfWRlc3Ryb3koKXt0aGlzLl9zZXQoXCJncmFwaGljc0NvcmVPd25lclwiLG51bGwpLHRoaXMuX2V4dGVudD1udWxsLHRoaXMuX2V4dGVudEludGVyc2VjdGlvbj1udWxsfV9zZXREaXJ0eSgpe3RoaXMudXBkYXRpbmd8fHRoaXMuX3NldChcInVwZGF0aW5nXCIsITApfXNldEV4dGVudChlKXt0aGlzLl9leHRlbnQ9ZSx0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb25EaXJ0eT0hMCx0aGlzLl9zZXREaXJ0eSgpfV92aWV3Q2hhbmdlKCl7dGhpcy5fc2V0RGlydHkoKX1fZWxldmF0aW9uQm91bmRzQ2hhbmdlKCl7dGhpcy5fc2V0RGlydHkoKSx0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb25EaXJ0eT0hMH1zZXQgX2lzVmlzaWJsZUJlbG93U3VyZmFjZShlKXt0aGlzLl9pc1Zpc2libGVCZWxvd1N1cmZhY2VJbnRlcm5hbD1lLHRoaXMuX3NldERpcnR5KCksdGhpcy5fZXh0ZW50SW50ZXJzZWN0aW9uRGlydHk9ITB9X3VwZGF0ZUlzVmlzaWJsZUJlbG93U3VyZmFjZSgpe2NvbnN0IGU9dGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LHQ9ZS5iYXNlbWFwVGVycmFpbixzPVwibG9jYWxcIj09PWUudmlld2luZ01vZGUsaT1cIm5vbmVcIj09PWUubWFwLmdyb3VuZD8ubmF2aWdhdGlvbkNvbnN0cmFpbnQ/LnR5cGU7dGhpcy5faXNWaXNpYmxlQmVsb3dTdXJmYWNlPXN8fCF0Lm9wYXF1ZXx8aX1fdXBkYXRlRXh0ZW50SW50ZXJzZWN0aW9uKCl7aWYoIXRoaXMuX2V4dGVudEludGVyc2VjdGlvbkRpcnR5KXJldHVybjt0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb25EaXJ0eT0hMTtjb25zdCBlPXRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldztsZXQgdDtpZih0aGlzLl9pc1Zpc2libGVCZWxvd1N1cmZhY2VJbnRlcm5hbCl0PS0uMyphKGUuc3BhdGlhbFJlZmVyZW5jZSkucmFkaXVzO2Vsc2V7Y29uc3R7bWluOnMsbWF4Oml9PWUuYmFzZW1hcFRlcnJhaW4udmlzaWJsZUVsZXZhdGlvbkJvdW5kczt0PXMtTWF0aC5tYXgoMSwoaS1zKSooaC0xKSl9dGhpcy5fZXh0ZW50SW50ZXJzZWN0aW9uLnVwZGF0ZSh0aGlzLl9leHRlbnQsZS5zcGF0aWFsUmVmZXJlbmNlLHQpfWdldCBydW5uaW5nKCl7cmV0dXJuIHRoaXMudXBkYXRpbmd9cnVuVGFzayhlKXtpZih0aGlzLl9zZXQoXCJ1cGRhdGluZ1wiLCExKSwhdGhpcy5fZXh0ZW50KXJldHVybiB0aGlzLl9zZXQoXCJzdXNwZW5kZWRcIiwhMSksbC5ZSUVMRDt0aGlzLl91cGRhdGVFeHRlbnRJbnRlcnNlY3Rpb24oKTtjb25zdCB0PXRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5mcnVzdHVtLHM9YSh0aGlzLmdyYXBoaWNzQ29yZU93bmVyLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSkucmFkaXVzO3RoaXMuX3NldChcInN1c3BlbmRlZFwiLCF0aGlzLl9leHRlbnRJbnRlcnNlY3Rpb24uaXNWaXNpYmxlSW5GcnVzdHVtKHQscykpLGUubWFkZVByb2dyZXNzKCl9fTtlKFtuKHtyZWFkT25seTohMH0pXSx1LnByb3RvdHlwZSxcInN1c3BlbmRlZFwiLHZvaWQgMCksZShbbih7Y29uc3RydWN0T25seTohMH0pXSx1LnByb3RvdHlwZSxcImdyYXBoaWNzQ29yZU93bmVyXCIsdm9pZCAwKSxlKFtuKHtyZWFkT25seTohMH0pXSx1LnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSx1PWUoW28oXCJlc3JpLnZpZXdzLjNkLmxheWVycy5ncmFwaGljcy5HcmFwaGljczNERnJ1c3R1bVZpc2liaWxpdHlcIildLHUpO2V4cG9ydHt1IGFzIEdyYXBoaWNzM0RGcnVzdHVtVmlzaWJpbGl0eX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e09iamVjdDNEU3RhdGVTZXQgYXMgdH1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL09iamVjdDNEU3RhdGVTZXQuanNcIjtjbGFzcyBle2NvbnN0cnVjdG9yKGUsaSl7dGhpcy5zdGF0ZVR5cGU9ZSx0aGlzLm9iamVjdElkRmllbGQ9aSx0aGlzLm9iamVjdFN0YXRlU2V0PW5ldyB0LHRoaXMuaWRzPW5ldyBTZXQsdGhpcy5wYXVzZWQ9ITF9aGFzR3JhcGhpYyh0KXtpZih0aGlzLm9iamVjdElkRmllbGQpe2NvbnN0IGU9dC5ncmFwaGljLmF0dHJpYnV0ZXNbdGhpcy5vYmplY3RJZEZpZWxkXTtyZXR1cm4gdGhpcy5pZHMuaGFzKGUpfXJldHVybiB0aGlzLmlkcy5oYXModC5ncmFwaGljLnVpZCl9fWV4cG9ydHtlIGFzIEdyYXBoaWNzM0RPYmplY3RTdGF0ZVNldH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e21ha2VIYW5kbGUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2hhbmRsZVV0aWxzLmpzXCI7aW1wb3J0e0dyYXBoaWNzM0RPYmplY3RTdGF0ZVNldCBhcyBlfWZyb21cIi4vR3JhcGhpY3MzRE9iamVjdFN0YXRlU2V0LmpzXCI7Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0KXt0aGlzLl9ncmFwaGljc0NvcmU9dCx0aGlzLl9zdGF0ZVNldHM9bmV3IEFycmF5fWRlc3Ryb3koKXt0aGlzLnJlc2V0KCksdGhpcy5fc3RhdGVTZXRzPW51bGx9cmVzZXQoKXt0aGlzLl9zdGF0ZVNldHMmJih0aGlzLl9zdGF0ZVNldHMuZm9yRWFjaCgodD0+dC5vYmplY3RTdGF0ZVNldC5yZW1vdmVBbGwoKSkpLHRoaXMuX3N0YXRlU2V0cy5sZW5ndGg9MCl9YWNxdWlyZVNldChzLGEpe2NvbnN0IGk9bmV3IGUocyxhKTt0aGlzLl9zdGF0ZVNldHMucHVzaChpKTtjb25zdCBoPXQoKCgpPT50aGlzLnJlbGVhc2VTZXQoaSkpKTtyZXR1cm57c2V0OmksaGFuZGxlOmh9fXJlbGVhc2VTZXQodCl7dC5vYmplY3RTdGF0ZVNldC5yZW1vdmVBbGwoKTtjb25zdCBlPXRoaXMuX3N0YXRlU2V0cz90aGlzLl9zdGF0ZVNldHMuaW5kZXhPZih0KTotMTstMSE9PWUmJnRoaXMuX3N0YXRlU2V0cy5zcGxpY2UoZSwxKX1fYWRkT2JqZWN0U3RhdGVTZXQodCxlKXt0LmFkZE9iamVjdFN0YXRlU2V0KGUuc3RhdGVUeXBlLGUub2JqZWN0U3RhdGVTZXQpfV9yZW1vdmVPYmplY3RTdGF0ZVNldCh0LGUpe3QucmVtb3ZlT2JqZWN0U3RhdGUoZS5vYmplY3RTdGF0ZVNldCl9c2V0VWlkKHQsZSl7dC5pZHMuYWRkKGUpO2NvbnN0IHM9dGhpcy5fZ3JhcGhpY3NDb3JlLmdyYXBoaWNzM0RHcmFwaGljcy5nZXQoZSk7cyYmdGhpcy5fYWRkT2JqZWN0U3RhdGVTZXQocyx0KX1zZXRVaWRzKHQsZSl7ZS5mb3JFYWNoKChlPT50aGlzLnNldFVpZCh0LGUpKSl9c2V0T2JqZWN0SWRzKHQsZSl7ZS5mb3JFYWNoKChlPT50Lmlkcy5hZGQoZSkpKSx0aGlzLl9pbml0aWFsaXplU2V0KHQpfWFkZEdyYXBoaWModCl7dGhpcy5fc3RhdGVTZXRzLmZvckVhY2goKGU9PnshZS5wYXVzZWQmJmUuaGFzR3JhcGhpYyh0KSYmdGhpcy5fYWRkT2JqZWN0U3RhdGVTZXQodCxlKX0pKX1yZW1vdmVHcmFwaGljKHQpe3RoaXMuX3N0YXRlU2V0cy5mb3JFYWNoKChlPT57ZS5oYXNHcmFwaGljKHQpJiZ0aGlzLl9yZW1vdmVPYmplY3RTdGF0ZVNldCh0LGUpfSkpfWFsbEdyYXBoaWNzRGVsZXRlZCgpe3RoaXMuX3N0YXRlU2V0cyYmdGhpcy5fc3RhdGVTZXRzLmZvckVhY2goKHQ9PnQub2JqZWN0U3RhdGVTZXQucmVtb3ZlQWxsKCkpKX1faW5pdGlhbGl6ZVNldCh0KXtjb25zdCBlPXRoaXMuX2dyYXBoaWNzQ29yZS5ncmFwaGljczNER3JhcGhpY3M7dC5vYmplY3RJZEZpZWxkP2UuZm9yRWFjaCgoZT0+e2UmJnQuaGFzR3JhcGhpYyhlKSYmdGhpcy5fYWRkT2JqZWN0U3RhdGVTZXQoZSx0KX0pKTp0Lmlkcy5mb3JFYWNoKChzPT57Y29uc3QgYT1lLmdldChzKTthJiZ0aGlzLl9hZGRPYmplY3RTdGF0ZVNldChhLHQpfSkpfWdldCB0ZXN0KCl7cmV0dXJue3N0YXRlczp0aGlzLl9zdGF0ZVNldHN9fX1leHBvcnR7cyBhcyBHcmFwaGljczNET2JqZWN0U3RhdGVzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7cmVzdWx0IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHttYWtlIGFzIGF9ZnJvbVwiLi9HcmFwaGljczNEQ2FsbG91dFN5bWJvbExheWVyRmFjdG9yeS5qc1wiO2ltcG9ydHtMaW5lQ2FsbG91dFN5bWJvbExheWVyUmVuZGVyaW5nSW5mbyBhcyBsfWZyb21cIi4vR3JhcGhpY3MzRExpbmVDYWxsb3V0U3ltYm9sTGF5ZXIuanNcIjtpbXBvcnR7R3JhcGhpY3MzRFN5bWJvbCBhcyBlfWZyb21cIi4vR3JhcGhpY3MzRFN5bWJvbC5qc1wiO2NsYXNzIHMgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKHIsbyx0KXtzdXBlcihyLG8sdCksdGhpcy5fY2FsbG91dFN5bWJvbExheWVyPW51bGwsdGhpcy5zeW1ib2wuaGFzVmlzaWJsZUNhbGxvdXQoKSYmKHRoaXMuX2NhbGxvdXRTeW1ib2xMYXllcj1hKHRoaXMuc3ltYm9sLG8pKX1hc3luYyBkb0xvYWQobyl7Y29uc3QgYT10aGlzLl9jYWxsb3V0U3ltYm9sTGF5ZXI/cih0aGlzLl9jYWxsb3V0U3ltYm9sTGF5ZXIubG9hZCgpKTpudWxsO3RyeXthd2FpdCBzdXBlci5kb0xvYWQobyksdChvKX1jYXRjaChsKXt0aHJvdyB0aGlzLl9jYWxsb3V0U3ltYm9sTGF5ZXI/LmFib3J0TG9hZCgpLGx9YSYmYXdhaXQgYX1kZXN0cm95KCl7c3VwZXIuZGVzdHJveSgpLHRoaXMuX2NhbGxvdXRTeW1ib2xMYXllcj1vKHRoaXMuX2NhbGxvdXRTeW1ib2xMYXllcil9Y3JlYXRlR3JhcGhpY3MzREdyYXBoaWMocixvKXtjb25zdCB0PXN1cGVyLmNyZWF0ZUdyYXBoaWNzM0RHcmFwaGljKHIsbyk7aWYobnVsbCE9dGhpcy5fY2FsbG91dFN5bWJvbExheWVyJiZudWxsIT10KXtjb25zdCBvPXRoaXMuX2NyZWF0ZUNhbGxvdXRHcmFwaGljKHIpO28mJnQuc2V0Q2FsbG91dEdyYXBoaWMobyl9cmV0dXJuIHR9Z2xvYmFsUHJvcGVydHlDaGFuZ2VkKHIsbyl7cmV0dXJuISFzdXBlci5nbG9iYWxQcm9wZXJ0eUNoYW5nZWQocixvKSYmKCF0aGlzLl9jYWxsb3V0U3ltYm9sTGF5ZXJ8fHRoaXMuX2NhbGxvdXRTeW1ib2xMYXllci5nbG9iYWxQcm9wZXJ0eUNoYW5nZWQocixvLChyPT5yLmNhbGxvdXRMYXllcikpKX11cGRhdGVHZW9tZXRyeShyLG8pe2NvbnN0IHQ9c3VwZXIudXBkYXRlR2VvbWV0cnkocixvKTtpZih0JiZ0aGlzLl9jYWxsb3V0U3ltYm9sTGF5ZXIpe2NvbnN0IHQ9ci5jYWxsb3V0TGF5ZXI7aWYodClyZXR1cm4gdGhpcy5fY2FsbG91dFN5bWJvbExheWVyLnVwZGF0ZUdlb21ldHJ5KHQsbyl9cmV0dXJuIHR9X2NyZWF0ZUNhbGxvdXRHcmFwaGljKHIpe2NvbnN0IG89ci5yZW5kZXJpbmdJbmZvO3JldHVybiByLnJlbmRlcmluZ0luZm89bmV3IGwoby5yZW5kZXJlcixvLnN5bWJvbCksdGhpcy5fY2FsbG91dFN5bWJvbExheWVyLmNyZWF0ZUdyYXBoaWNzM0RHcmFwaGljKHIpfX1leHBvcnR7cyBhcyBHcmFwaGljczNEUG9pbnRTeW1ib2x9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e1VwZGF0aW5nSGFuZGxlcyBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc3VwcG9ydC9VcGRhdGluZ0hhbmRsZXMuanNcIjtpbXBvcnR7cHJvamVjdEJvdW5kaW5nUmVjdCBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24vcHJvamVjdEJvdW5kaW5nUmVjdC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e1Zpc2liaWxpdHlHcm91cCBhcyBjLFZpc2liaWxpdHlGbGFnIGFzIG99ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtzY2FsZUJvdW5kc1ByZWRpY2F0ZSBhcyBofWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvbGF5ZXJWaWV3VXRpbHMuanNcIjtpbXBvcnR7VGFza1ByaW9yaXR5IGFzIHAsVGFzayBhcyBkfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvU2NoZWR1bGVyLmpzXCI7Y29uc3QgdT10LmdldExvZ2dlcihcImVzcmkudmlld3MuM2QubGF5ZXJzLmdyYXBoaWNzLkdyYXBoaWNzM0RTY2FsZVZpc2liaWxpdHlcIik7bGV0IHk9Y2xhc3MgZXh0ZW5kcyBpe2NvbnN0cnVjdG9yKGUpe3N1cGVyKGUpLHRoaXMuX3NjYWxlUmFuZ2VBY3RpdmU9ITEsdGhpcy5fbGF5ZXJTY2FsZVJhbmdlVmlzaWJpbGl0eVF1ZXJ5PSExLHRoaXMuX2V4dGVudD1udWxsLHRoaXMuX3VwZGF0aW5nSGFuZGxlcz1uZXcgYSx0aGlzLmdyYXBoaWNzQ29yZU93bmVyPW51bGwsdGhpcy5sYXllcj1udWxsLHRoaXMucXVlcnlHcmFwaGljVUlEc0luRXh0ZW50PW51bGwsdGhpcy5ncmFwaGljc0NvcmU9bnVsbCx0aGlzLmJhc2VtYXBUZXJyYWluPW51bGwsdGhpcy5sYXllclNjYWxlRW5hYmxlZD0hMCx0aGlzLnN1c3BlbmRlZD0hMSx0aGlzLl9kaXJ0eT0hMH1pbml0aWFsaXplKCl7dGhpcy51cGRhdGVTY2FsZVJhbmdlQWN0aXZlKCk7Y29uc3QgZT10aGlzLmdyYXBoaWNzQ29yZU93bmVyLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLnNjaGVkdWxlcjt0aGlzLmFkZEhhbmRsZXMoZS5yZWdpc3RlclRhc2socC5TQ0FMRV9WSVNJQklMSVRZLHRoaXMpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5sYXllci5lZmZlY3RpdmVTY2FsZVJhbmdlKSwoKCk9PnRoaXMubGF5ZXJNaW5NYXhTY2FsZUNoYW5nZUhhbmRsZXIoKSkpfWRlc3Ryb3koKXt0aGlzLl91cGRhdGluZ0hhbmRsZXMuZGVzdHJveSgpLHRoaXMucmVtb3ZlSGFuZGxlcygpLHRoaXMuX2RpcnR5PSExLHRoaXMuX2V4dGVudD1udWxsLHRoaXMuZ3JhcGhpY3NDb3JlT3duZXI9bnVsbCx0aGlzLmxheWVyPW51bGwsdGhpcy5xdWVyeUdyYXBoaWNVSURzSW5FeHRlbnQ9bnVsbCx0aGlzLmdyYXBoaWNzQ29yZT1udWxsLHRoaXMuYmFzZW1hcFRlcnJhaW49bnVsbH1nZXQgdXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5fZGlydHl8fHRoaXMuX3VwZGF0aW5nSGFuZGxlcy51cGRhdGluZ31fc2V0RGlydHkoKXt0aGlzLl9kaXJ0eT0hMH1zZXRFeHRlbnQoZSl7Y29uc3QgaT10aGlzLmdyYXBoaWNzQ29yZU93bmVyLnZpZXcuc3BhdGlhbFJlZmVyZW5jZSx0PXRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5iYXNlbWFwVGVycmFpbi5zcGF0aWFsUmVmZXJlbmNlO2lmKGk9PT10KXRoaXMuX2V4dGVudD1lPz9udWxsO2Vsc2V7Y29uc3Qgcj1uKCk7bChlLGkscix0KT90aGlzLl9leHRlbnQ9cjp0aGlzLl9leHRlbnQ9bnVsbH10aGlzLl9zZXREaXJ0eSgpfXNjYWxlUmFuZ2VBY3RpdmUoKXtyZXR1cm4gdGhpcy5fc2NhbGVSYW5nZUFjdGl2ZX11cGRhdGVTY2FsZVJhbmdlQWN0aXZlKCl7Y29uc3QgZT10aGlzLmxheWVyLGk9ZS5lZmZlY3RpdmVTY2FsZVJhbmdlO2xldCB0PXRoaXMubGF5ZXJTY2FsZUVuYWJsZWQmJm51bGwhPWkmJmcoaS5taW5TY2FsZSxpLm1heFNjYWxlKTtlLmxhYmVsaW5nSW5mbyYmIXQmJih0PWUubGFiZWxpbmdJbmZvLnNvbWUoKGU9PmUmJmcoZS5taW5TY2FsZT8/MCxlLm1heFNjYWxlPz8wKSkpKTtjb25zdCByPXRoaXMuX3NjYWxlUmFuZ2VBY3RpdmUhPT10O3JldHVybiB0aGlzLl9zY2FsZVJhbmdlQWN0aXZlPXQsdCYmIXRoaXMuaGFzSGFuZGxlcyhiKSYmdGhpcy5iYXNlbWFwVGVycmFpbj8odGhpcy5hZGRIYW5kbGVzKHRoaXMuYmFzZW1hcFRlcnJhaW4ub24oXCJzY2FsZS1jaGFuZ2VcIiwoZT0+dGhpcy5fc2NhbGVVcGRhdGVIYW5kbGVyKGUpKSksYiksdGhpcy5sYXllclNjYWxlRW5hYmxlZCYmdGhpcy5hZGRIYW5kbGVzKHRoaXMuYmFzZW1hcFRlcnJhaW4ub24oXCJ0aWxlcy12aXNpYmlsaXR5LWNoYW5nZWRcIiwoKCk9PnRoaXMuX3NldERpcnR5KCkpKSxiKSk6IXQmJnRoaXMuaGFzSGFuZGxlcyhiKSYmdGhpcy5yZW1vdmVIYW5kbGVzKGIpLHJ9Z2V0IHJ1bm5pbmcoKXtyZXR1cm4hKCF0aGlzLmdyYXBoaWNzQ29yZU93bmVyLnZpZXcuYmFzZW1hcFRlcnJhaW58fCF0aGlzLnVwZGF0aW5nKX1ydW5UYXNrKGUpe2NvbnN0IGk9dGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LmJhc2VtYXBUZXJyYWluO2lmKHRoaXMuX2V4dGVudCYmaSYmaS5yZWFkeSYmdGhpcy5fc2NhbGVSYW5nZUFjdGl2ZSYmdGhpcy5sYXllclNjYWxlRW5hYmxlZCl7aWYodGhpcy5fbGF5ZXJTY2FsZVJhbmdlVmlzaWJpbGl0eVF1ZXJ5KXJldHVybiBkLllJRUxEO3t0aGlzLl9sYXllclNjYWxlUmFuZ2VWaXNpYmlsaXR5UXVlcnk9ITA7Y29uc3R7bWluU2NhbGU6ZSxtYXhTY2FsZTp0fT10aGlzLmxheWVyLmVmZmVjdGl2ZVNjYWxlUmFuZ2U7aS5xdWVyeVZpc2libGVTY2FsZVJhbmdlKHRoaXMuX2V4dGVudCxlLHQsKGU9PnRoaXMuX2ZpbmlzaFVwZGF0ZShlKSkpfX1lbHNlIHRoaXMuX2ZpbmlzaFVwZGF0ZSghMCk7ZS5tYWRlUHJvZ3Jlc3MoKX1fZmluaXNoVXBkYXRlKGUpe3RoaXMuX2xheWVyU2NhbGVSYW5nZVZpc2liaWxpdHlRdWVyeT0hMSx0aGlzLl9zZXQoXCJzdXNwZW5kZWRcIiwhZSksdGhpcy5fZGlydHk9ITF9X3Zpc2libGVBdExheWVyU2NhbGUoZSl7Y29uc3QgaT10aGlzLmxheWVyLmVmZmVjdGl2ZVNjYWxlUmFuZ2U7cmV0dXJuIXRoaXMubGF5ZXJTY2FsZUVuYWJsZWR8fGgoZSxpLm1pblNjYWxlfHwwLGkubWF4U2NhbGV8fDApfV92aXNpYmxlQXRMYWJlbFNjYWxlKGUsaSl7cmV0dXJuIGgoZSxpLm1pblNjYWxlfHwwLGkubWF4U2NhbGV8fDApfV9ncmFwaGljU2NhbGUoZSl7bGV0IGk7aWYobnVsbCE9ZS5jZW50cm9pZD9pPWUuY2VudHJvaWQ6bnVsbCE9ZS5ncmFwaGljLmdlb21ldHJ5JiZcInBvaW50XCI9PT1lLmdyYXBoaWMuZ2VvbWV0cnkudHlwZSYmKGk9ZS5ncmFwaGljLmdlb21ldHJ5KSxpKXtyZXR1cm4gdGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LmJhc2VtYXBUZXJyYWluP3RoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5iYXNlbWFwVGVycmFpbi5nZXRTY2FsZShpKToxfXJldHVybiBudWxsfV9ncmFwaGljVmlzaWJsZShlKXtpZighdGhpcy5sYXllclNjYWxlRW5hYmxlZClyZXR1cm4hMDtjb25zdCBpPXRoaXMuX2dyYXBoaWNTY2FsZShlKTtyZXR1cm4gdGhpcy5fdmlzaWJsZUF0TGF5ZXJTY2FsZShpKX11cGRhdGVWaXNpYmlsaXR5KGUpe2lmKHRoaXMuX3NjYWxlUmFuZ2VBY3RpdmUpe2NvbnN0IGk9dGhpcy5fZ3JhcGhpY1Zpc2libGUoZSk7cmV0dXJuIGUuc2V0VmlzaWJpbGl0eUZsYWcoYy5HUkFQSElDLG8uU0NBTEVfUkFOR0UsaSl9cmV0dXJuITF9dXBkYXRlR3JhcGhpY0xhYmVsU2NhbGVWaXNpYmlsaXR5KGUpe2lmKCF0aGlzLl9zY2FsZVJhbmdlQWN0aXZlKXJldHVybiExO2lmKCFlLmxhYmVsTGF5ZXJzfHwwPT09ZS5sYWJlbExheWVycy5sZW5ndGgpcmV0dXJuITE7Y29uc3QgaT10aGlzLl9ncmFwaGljU2NhbGUoZSksdD10aGlzLl91cGRhdGVMYWJlbFNjYWxlVmlzaWJpbGl0eShlLGkpO3JldHVybiB0JiYodGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LmRlY29uZmxpY3Rvci5zZXREaXJ0eSgpLHRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5sYWJlbGVyLnNldERpcnR5KCkpLHR9X3VwZGF0ZUxhYmVsU2NhbGVWaXNpYmlsaXR5KGUsaSl7aWYoIWUubGFiZWxMYXllcnN8fDA9PT1lLmxhYmVsTGF5ZXJzLmxlbmd0aClyZXR1cm4hMTtjb25zdCB0PWUubGFiZWxMYXllcnNbMF0uX2xhYmVsQ2xhc3M7aWYobnVsbCE9dD8ubWluU2NhbGUmJm51bGwhPXQubWF4U2NhbGUpe2NvbnN0IHI9dGhpcy5fdmlzaWJsZUF0TGFiZWxTY2FsZShpLHQpO2lmKGUuc2V0VmlzaWJpbGl0eUZsYWcoYy5MQUJFTCxvLlNDQUxFX1JBTkdFLHIpKXJldHVybiEwfXJldHVybiExfV9zY2FsZVVwZGF0ZUhhbmRsZXIoZSl7aWYodGhpcy5fc2V0RGlydHkoKSwhdGhpcy5ncmFwaGljc0NvcmUudmlzaWJsZSlyZXR1cm47Y29uc3QgaT1lLmV4dGVudCx0PWUuc2NhbGUscj10aGlzLl92aXNpYmxlQXRMYXllclNjYWxlKHQpO2xldCBzPSExO2NvbnN0IGE9dGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LnNwYXRpYWxSZWZlcmVuY2Usbj1lLnNwYXRpYWxSZWZlcmVuY2U7aWYobnVsbD09bilyZXR1cm4gdm9pZCB1LmVycm9yKFwic2NhbGVVcGRhdGU6IEludGVybmFsIGVycm9yLCBubyBTcGF0aWFsUmVmZXJlbmNlIGdpdmVuIGZvciB0aWxlc1wiKTtjb25zdCBoPSFuLmVxdWFscyhhKTtpZihoKXtpZighbChpLG4sXyxhKSlyZXR1cm4gdm9pZCB1LmVycm9yKFwic2NhbGVVcGRhdGU6IEludGVybmFsIGVycm9yLCBjYW5ub3QgcHJvamVjdCBBQUJSIGZyb20gXCIrbitcIiB0byB3a2lkIFwiK2EpfWNvbnN0IHA9aD9fOmk7dGhpcy5xdWVyeUdyYXBoaWNVSURzSW5FeHRlbnQocCxhLChlPT57Y29uc3QgYT10aGlzLmdyYXBoaWNzQ29yZS5nZXRHcmFwaGljczNER3JhcGhpY0J5SWQoZSk7aWYobnVsbD09YSlyZXR1cm47Y29uc3QgbD1hLmNlbnRyb2lkO251bGwhPWwmJihpWzBdPmwueHx8aVsxXT5sLnl8fGlbMl08bC54fHxpWzNdPGwueSl8fChhLnNldFZpc2liaWxpdHlGbGFnKGMuR1JBUEhJQyxvLlNDQUxFX1JBTkdFLHIpJiYocz0hMCksdGhpcy5fdXBkYXRlTGFiZWxTY2FsZVZpc2liaWxpdHkoYSx0KSYmKHM9ITApKX0pKSxzJiYodGhpcy5ncmFwaGljc0NvcmVPd25lci52aWV3LmRlY29uZmxpY3Rvci5zZXREaXJ0eSgpLHRoaXMuZ3JhcGhpY3NDb3JlT3duZXIudmlldy5sYWJlbGVyLnNldERpcnR5KCkpfWxheWVyTWluTWF4U2NhbGVDaGFuZ2VIYW5kbGVyKCl7dGhpcy51cGRhdGVTY2FsZVJhbmdlQWN0aXZlKCkmJiF0aGlzLl9zY2FsZVJhbmdlQWN0aXZlP3RoaXMuZ3JhcGhpY3NDb3JlLm1vZGlmeUdyYXBoaWNzM0RHcmFwaGljVmlzaWJpbGl0aWVzKChlPT5lLnNldFZpc2liaWxpdHlGbGFnKGMuR1JBUEhJQyxvLlNDQUxFX1JBTkdFLCEwKSkpOnRoaXMuX3NjYWxlUmFuZ2VBY3RpdmUmJnRoaXMuZ3JhcGhpY3NDb3JlLnVwZGF0ZUFsbEdyYXBoaWNzVmlzaWJpbGl0eSgpLHRoaXMuX3NldERpcnR5KCl9fTtmdW5jdGlvbiBnKGUsaSl7cmV0dXJuIGU+MHx8aT4wfWUoW3IoKV0seS5wcm90b3R5cGUsXCJncmFwaGljc0NvcmVPd25lclwiLHZvaWQgMCksZShbcigpXSx5LnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlKFtyKCldLHkucHJvdG90eXBlLFwicXVlcnlHcmFwaGljVUlEc0luRXh0ZW50XCIsdm9pZCAwKSxlKFtyKCldLHkucHJvdG90eXBlLFwiZ3JhcGhpY3NDb3JlXCIsdm9pZCAwKSxlKFtyKCldLHkucHJvdG90eXBlLFwiYmFzZW1hcFRlcnJhaW5cIix2b2lkIDApLGUoW3Ioe2NvbnN0cnVjdE9ubHk6ITB9KV0seS5wcm90b3R5cGUsXCJsYXllclNjYWxlRW5hYmxlZFwiLHZvaWQgMCksZShbcih7cmVhZE9ubHk6ITB9KV0seS5wcm90b3R5cGUsXCJzdXNwZW5kZWRcIix2b2lkIDApLGUoW3Ioe3JlYWRPbmx5OiEwfSldLHkucHJvdG90eXBlLFwidXBkYXRpbmdcIixudWxsKSxlKFtyKCldLHkucHJvdG90eXBlLFwiX2RpcnR5XCIsdm9pZCAwKSx5PWUoW3MoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5ncmFwaGljcy5HcmFwaGljczNEU2NhbGVWaXNpYmlsaXR5XCIpXSx5KTtjb25zdCBiPVwidGVycmFpbi1ldmVudHNcIixfPW4oKTtleHBvcnR7eSBhcyBHcmFwaGljczNEU2NhbGVWaXNpYmlsaXR5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7R3JhcGhpY3MzRFBvaW50U3ltYm9sIGFzIG99ZnJvbVwiLi9HcmFwaGljczNEUG9pbnRTeW1ib2wuanNcIjtpbXBvcnR7R3JhcGhpY3MzRFN5bWJvbCBhcyByfWZyb21cIi4vR3JhcGhpY3MzRFN5bWJvbC5qc1wiO2Z1bmN0aW9uIHQodCxpLG4pe3JldHVyblwicG9pbnQtM2RcIj09PXQudHlwZT9uZXcgbyh0LGksbik6bmV3IHIodCxpLG4pfWV4cG9ydHt0IGFzIG1ha2V9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e1Bvb2xlZFJCdXNoIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9saWJzL3JidXNoL1Bvb2xlZFJCdXNoLmpzXCI7aW1wb3J0e2Zyb21SZWN0IGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2dldE9iamVjdElkIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL2dyYXBoaWNzL2RlaHlkcmF0ZWRGZWF0dXJlcy5qc1wiO2xldCBkPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLl9pbmRleD1uZXcgbig5LGhhcyhcImVzcmktY3NwLXJlc3RyaWN0aW9uc1wiKT90PT4oe21pblg6dC5leHRlbnRbMF0sbWluWTp0LmV4dGVudFsxXSxtYXhYOnQuZXh0ZW50WzJdLG1heFk6dC5leHRlbnRbM119KTpbXCIuZXh0ZW50WzBdXCIsXCIuZXh0ZW50WzFdXCIsXCIuZXh0ZW50WzJdXCIsXCIuZXh0ZW50WzNdXCJdKSx0aGlzLl9taXNzaW5nPW5ldyBTZXQsdGhpcy5fYm91bmRzQnlGZWF0dXJlPW5ldyBNYXAsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPW51bGwsdGhpcy5oYXNaPW51bGwsdGhpcy5oYXNNPW51bGwsdGhpcy5vYmplY3RJZEZpZWxkPW51bGwsdGhpcy51cGRhdGluZz0hMX1zZXR1cCh0KXt0aGlzLl9hZGRNYW55KHQpfWRlc3Ryb3koKXt0aGlzLl9taXNzaW5nLmNsZWFyKCksdGhpcy5faW5kZXg9cyh0aGlzLl9pbmRleCksdGhpcy5fYm91bmRzQnlGZWF0dXJlLmNsZWFyKCksdGhpcy5fYm91bmRzQnlGZWF0dXJlPW51bGx9dXBkYXRlKCl7dGhpcy5fbWlzc2luZy5zaXplPjAmJih0aGlzLl9hZGRNYW55KEFycmF5LmZyb20odGhpcy5fbWlzc2luZy52YWx1ZXMoKSkpLHRoaXMudXBkYXRpbmc9ITEsdGhpcy5fbWlzc2luZy5jbGVhcigpKX1nZXQgdXBkYXRpbmdSZW1haW5pbmcoKXtyZXR1cm4gdGhpcy5fbWlzc2luZy5zaXplfXF1ZXJ5R3JhcGhpY1VJRHNJbkV4dGVudCh0LGUscyl7bnVsbCE9ZSYmZS5lcXVhbHModGhpcy5zcGF0aWFsUmVmZXJlbmNlKSYmKHUubWluWD10WzBdLHUubWluWT10WzFdLHUubWF4WD10WzJdLHUubWF4WT10WzNdLHRoaXMudXBkYXRlKCksdGhpcy5faW5kZXguc2VhcmNoKHUsKHQ9PnModC5ncmFwaGljLnVpZCkpKSl9YWRkKHQpe3RoaXMuX21pc3NpbmcuYWRkKHQpLHRoaXMudXBkYXRpbmc9ITB9cmVtb3ZlKHQpe2lmKHRoaXMuX21pc3NpbmcuZGVsZXRlKHQpKXJldHVybiB2b2lkKHRoaXMudXBkYXRpbmc9dGhpcy5fbWlzc2luZy5zaXplPjApO3RoaXMuX2luZGV4LnJlbW92ZSh0KTtjb25zdCBlPWEodC5ncmFwaGljLHRoaXMuX2dldChcIm9iamVjdElkRmllbGRcIikpO251bGwhPWUmJnRoaXMuX2JvdW5kc0J5RmVhdHVyZS5kZWxldGUoZSl9X2FkZE1hbnkodCl7aWYoMD09PXQubGVuZ3RoKXJldHVybjtjb25zdCBlPXRoaXMuX2dldChcIm9iamVjdElkRmllbGRcIik7Zm9yKGNvbnN0IHMgb2YgdCl7cy5jb21wdXRlRXh0ZW50KHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7Y29uc3QgdD1hKHMuZ3JhcGhpYyxlKTtudWxsIT10JiZ0aGlzLl9ib3VuZHNCeUZlYXR1cmUuc2V0KHQscy5leHRlbnQpfXRoaXMuX2luZGV4LmxvYWQodCl9Y2xlYXIoKXt0aGlzLl9pbmRleC5jbGVhcigpLHRoaXMuX21pc3NpbmcuY2xlYXIoKSx0aGlzLl9ib3VuZHNCeUZlYXR1cmUuY2xlYXIoKSx0aGlzLnVwZGF0aW5nPSExfWZvckVhY2hJbkJvdW5kcyh0LGUpe3UubWluWD10WzBdLHUubWluWT10WzFdLHUubWF4WD10WzJdLHUubWF4WT10WzNdLHRoaXMudXBkYXRlKCksdGhpcy5faW5kZXguc2VhcmNoKHUsKHQ9PntlKHQpfSkpfWdldEJvdW5kcyh0LGUpe3RoaXMudXBkYXRlKCk7Y29uc3Qgcz10aGlzLl9ib3VuZHNCeUZlYXR1cmUuZ2V0KHQpO3JldHVybiBzP28oZSxzKTpudWxsfX07dChbaSh7Y29uc3RydWN0T25seTohMH0pXSxkLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIix2b2lkIDApLHQoW2koe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJoYXNaXCIsdm9pZCAwKSx0KFtpKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGQucHJvdG90eXBlLFwiaGFzTVwiLHZvaWQgMCksdChbaSh7Y29uc3RydWN0T25seTohMH0pXSxkLnByb3RvdHlwZSxcIm9iamVjdElkRmllbGRcIix2b2lkIDApLHQoW2koKV0sZC5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCksdChbaSh7cmVhZE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJ1cGRhdGluZ1JlbWFpbmluZ1wiLG51bGwpLGQ9dChbcihcImVzcmkudmlld3MuM2QubGF5ZXJzLmdyYXBoaWNzLlNwYXRpYWxJbmRleDJEXCIpXSxkKTtjb25zdCB1PXttaW5YOjAsbWluWTowLG1heFg6MCxtYXhZOjB9O2V4cG9ydHtkIGFzIFNwYXRpYWxJbmRleDJEfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVmVydGljYWxVbml0Rm9yU1IgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2MgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtjIGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3ZlYzNmNjQuanNcIjtpbXBvcnR7ZW1wdHkgYXMgYyx0b1JlY3QgYXMgZCxleHBhbmRXaXRoVmVjMyBhcyBwfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtlbXB0eSBhcyBtfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7Z2V0TWV0ZXJzUGVyVW5pdCBhcyBofWZyb21cIi4uLy4uLy4uLy4uL3N5bWJvbHMvc3VwcG9ydC91bml0Q29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0e25ld0ludGVyc2VjdG9yIGFzIHV9ZnJvbVwiLi4vLi4vd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3Rvci5qc1wiO2ltcG9ydHtTdG9yZVJlc3VsdHMgYXMgZn1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9ySW50ZXJmYWNlcy5qc1wiO2ltcG9ydHthZmZlY3RzR2VvbWV0cnkgYXMgZ31mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL1ZlcnRleEF0dHJpYnV0ZS5qc1wiO2NvbnN0IF89MTtsZXQgeT1jbGFzcyBleHRlbmRzKHIuRXZlbnRlZE1peGluKHQpKXtnZXQgc3BhdGlhbFJlZmVyZW5jZSgpe3JldHVybiB0aGlzLnZpZXc/LnNwYXRpYWxSZWZlcmVuY2V9Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5fZWxldmF0aW9uT2Zmc2V0PTAsdGhpcy5fbGF5ZXJIYW5kbGVzS2V5PVwibGF5ZXJIYW5kbGVzXCJ9aW5pdGlhbGl6ZSgpe3RoaXMuX3JlbmRlckNvb3Jkc0hlbHBlcj10aGlzLnZpZXcucmVuZGVyQ29vcmRzSGVscGVyLHRoaXMuX2ludGVyc2VjdExheWVycz1bdGhpcy5zdGFnZUxheWVyXSx0aGlzLl9pbnRlcnNlY3Rvcj11KHRoaXMudmlldy5zdGF0ZS52aWV3aW5nTW9kZSksdGhpcy5faW50ZXJzZWN0b3Iub3B0aW9ucy5zdG9yZT1mLk1JTjtjb25zdCBlPXRoaXMuX2NvbXB1dGVMYXllckV4dGVudCh0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5zdGFnZUxheWVyKTt0aGlzLl96bWluPWVbMl0sdGhpcy5fem1heD1lWzVdO2NvbnN0IHQ9dGhpcy5zdGFnZUxheWVyLmV2ZW50czt0aGlzLmFkZEhhbmRsZXMoW3Qub24oXCJsYXllck9iamVjdEFkZGVkXCIsKCh7b2JqZWN0OmV9KT0+dGhpcy5fb2JqZWN0Q2hhbmdlZChlKSkpLHQub24oXCJsYXllck9iamVjdFJlbW92ZWRcIiwoKHtvYmplY3Q6ZX0pPT50aGlzLl9vYmplY3RDaGFuZ2VkKGUpKSksdC5vbihcImdlb21ldHJ5QWRkZWRcIiwoKHtvYmplY3Q6ZX0pPT50aGlzLl9vYmplY3RDaGFuZ2VkKGUpKSksdC5vbihcImdlb21ldHJ5UmVtb3ZlZFwiLCgoe29iamVjdDplfSk9PnRoaXMuX29iamVjdENoYW5nZWQoZSkpKSx0Lm9uKFwiYXR0cmlidXRlc0NoYW5nZWRcIiwoKHthdHRyaWJ1dGU6ZSxvYmplY3Q6dH0pPT5nKGUpJiZ0aGlzLl9vYmplY3RDaGFuZ2VkKHQpKSksdC5vbihcInRyYW5zZm9ybWF0aW9uQ2hhbmdlZFwiLChlPT50aGlzLl9vYmplY3RDaGFuZ2VkKGUpKSldLHRoaXMuX2xheWVySGFuZGxlc0tleSl9ZGlzcG9zZSgpe3RoaXMucmVtb3ZlSGFuZGxlcyh0aGlzLl9sYXllckhhbmRsZXNLZXkpfWVsZXZhdGlvbkluZm9DaGFuZ2VkKCl7Y29uc3QgZT1udWxsIT10aGlzLmxheWVyP3RoaXMubGF5ZXIuZWxldmF0aW9uSW5mbzpudWxsO2lmKG51bGwhPWUmJlwib24tdGhlLWdyb3VuZFwiIT09ZS5tb2RlKXtjb25zdCB0PXModGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlKSxyPWgoZS51bml0Pz9cIm1ldGVyc1wiKTt0aGlzLl9lbGV2YXRpb25PZmZzZXQ9KGUub2Zmc2V0Pz8wKSpyL3R9ZWxzZSB0aGlzLl9lbGV2YXRpb25PZmZzZXQ9MH1nZXRFbGV2YXRpb24oZSx0LHIscyl7aWYoeFswXT1lLHhbMV09dCx4WzJdPXIsIXRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlci50b1JlbmRlckNvb3Jkcyh4LHMseCkpcmV0dXJuIG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiY291bGQgbm90IHByb2plY3QgcG9pbnQgZm9yIGVsZXZhdGlvbiBhbGlnbm1lbnRcIiksbnVsbDtjb25zdCBuPXRoaXMuX2VsZXZhdGlvbk9mZnNldCxpPXRoaXMuX3ptaW4rbixhPXRoaXMuX3ptYXgrbjt0aGlzLl9yZW5kZXJDb29yZHNIZWxwZXIuc2V0QWx0aXR1ZGUoQyxhLHgpLHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlci5zZXRBbHRpdHVkZShFLGkseCk7Y29uc3QgbD1lPT4hIWUubGFzdFZhbGlkRWxldmF0aW9uQkI7cmV0dXJuIHRoaXMuX2ludGVyc2VjdG9yLnJlc2V0KEMsRSxudWxsKSx0aGlzLl9pbnRlcnNlY3Rvci5pbnRlcnNlY3QodGhpcy5faW50ZXJzZWN0TGF5ZXJzLG51bGwsXyxudWxsLGwpLHRoaXMuX2ludGVyc2VjdG9yLnJlc3VsdHMubWluLmdldEludGVyc2VjdGlvblBvaW50KHgpP3RoaXMuX3JlbmRlckNvb3Jkc0hlbHBlci5nZXRBbHRpdHVkZSh4KTpudWxsfV9vYmplY3RDaGFuZ2VkKGUpe2NvbnN0IHQ9dGhpcy5zcGF0aWFsUmVmZXJlbmNlO2lmKCFlLmxhc3RWYWxpZEVsZXZhdGlvbkJCfHwhdClyZXR1cm47YyhqKTtjb25zdCByPWUubGFzdFZhbGlkRWxldmF0aW9uQkI7ci5pc0VtcHR5KCl8fHRoaXMuX2V4cGFuZEV4dGVudCh0LHIubWluLHIubWF4LGopO2NvbnN0e21pbjpvLG1heDpzfT1lLmJvdW5kaW5nVm9sdW1lV29ybGRTcGFjZTt0aGlzLl9leHBhbmRFeHRlbnQodCxvLHMsaiksZChqLHYpLHRoaXMuX3ptaW49TWF0aC5taW4odGhpcy5fem1pbixqWzJdKSx0aGlzLl96bWF4PU1hdGgubWF4KHRoaXMuX3ptYXgsals1XSksYi5leHRlbnQ9dixiLnNwYXRpYWxSZWZlcmVuY2U9dCx0aGlzLmVtaXQoXCJlbGV2YXRpb24tY2hhbmdlXCIsYiksYShyLm1pbixvKSxhKHIubWF4LHMpfV9jb21wdXRlTGF5ZXJFeHRlbnQoZSx0KXtyZXR1cm4gYyhqKSxudWxsIT1lJiZ0Lm9iamVjdHMuZm9yQWxsKCh0PT50aGlzLl9leHBhbmRFeHRlbnQoZSx0LmJvdW5kaW5nVm9sdW1lV29ybGRTcGFjZS5taW4sdC5ib3VuZGluZ1ZvbHVtZVdvcmxkU3BhY2UubWF4LGopKSksan1fZXhwYW5kRXh0ZW50KGUsdCxyLG8pe2ZvcihsZXQgcz0wO3M8ODsrK3MpeFswXT0xJnM/dFswXTpyWzBdLHhbMV09MiZzP3RbMV06clsxXSx4WzJdPTQmcz90WzJdOnJbMl0sdGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyLmZyb21SZW5kZXJDb29yZHMoeCx4LGUpLHAobyx4KTtyZXR1cm4gb319O2UoW24oe2NvbnN0cnVjdE9ubHk6ITB9KV0seS5wcm90b3R5cGUsXCJsYXllclwiLHZvaWQgMCksZShbbih7Y29uc3RydWN0T25seTohMH0pXSx5LnByb3RvdHlwZSxcInN0YWdlTGF5ZXJcIix2b2lkIDApLGUoW24oe2NvbnN0cnVjdE9ubHk6ITB9KV0seS5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxlKFtuKCldLHkucHJvdG90eXBlLFwic3BhdGlhbFJlZmVyZW5jZVwiLG51bGwpLHk9ZShbaShcImVzcmkudmlld3MuM2QubGF5ZXJzLnN1cHBvcnQuU3RhZ2VMYXllckVsZXZhdGlvblByb3ZpZGVyXCIpXSx5KTtjb25zdCBqPWMoKSx2PW0oKSxiPXtzcGF0aWFsUmVmZXJlbmNlOm51bGwsZXh0ZW50OnYsY29udGV4dDpcInNjZW5lXCJ9LHg9bCgpLEM9bCgpLEU9bCgpO2V4cG9ydHt5IGFzIFN0YWdlTGF5ZXJFbGV2YXRpb25Qcm92aWRlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e09iamVjdDNEU3RhdGUgYXMgZX1mcm9tXCIuL2Jhc2ljSW50ZXJmYWNlcy5qc1wiO3ZhciB0OyFmdW5jdGlvbihlKXtlW2UuT2JqZWN0PTBdPVwiT2JqZWN0XCIsZVtlLlJlbmRlckdlb21ldHJ5PTFdPVwiUmVuZGVyR2VvbWV0cnlcIixlW2UuRXh0ZXJuYWw9Ml09XCJFeHRlcm5hbFwiLGVbZS5DT1VOVD0zXT1cIkNPVU5UXCJ9KHR8fCh0PXt9KSk7Y2xhc3Mgcntjb25zdHJ1Y3Rvcigpe3RoaXMuX2l0ZW1zPVtdfWFkZE9iamVjdChlLHIpe3RoaXMuX2l0ZW1zLnB1c2goe3R5cGU6dC5PYmplY3Qsb2JqZWN0U3RhdGVJZDpyLG9iamVjdDplfSl9YWRkUmVuZGVyR2VvbWV0cnkoZSxyLG8pe3RoaXMuX2l0ZW1zLnB1c2goe3R5cGU6dC5SZW5kZXJHZW9tZXRyeSxvYmplY3RTdGF0ZUlkOnIscmVuZGVyR2VvbWV0cnk6ZSxvd25lcjpvfSl9YWRkRXh0ZXJuYWwoZSxyKXt0aGlzLl9pdGVtcy5wdXNoKHt0eXBlOnQuRXh0ZXJuYWwsb2JqZWN0U3RhdGVJZDpyLHJlbW92ZTplfSl9cmVtb3ZlKGUpe2ZvcihsZXQgdD10aGlzLl9pdGVtcy5sZW5ndGgtMTt0Pj0wOy0tdCl7Y29uc3Qgcj10aGlzLl9pdGVtc1t0XTtyLm9iamVjdFN0YXRlSWQ9PT1lJiYodGhpcy5fcmVtb3ZlT2JqZWN0U3RhdGVJdGVtKHIpLHRoaXMuX2l0ZW1zLnNwbGljZSh0LDEpKX19cmVtb3ZlT2JqZWN0KGUpe2ZvcihsZXQgcj10aGlzLl9pdGVtcy5sZW5ndGgtMTtyPj0wOy0tcil7Y29uc3Qgbz10aGlzLl9pdGVtc1tyXTtvLnR5cGU9PT10Lk9iamVjdCYmby5vYmplY3Q9PT1lJiYodGhpcy5fcmVtb3ZlT2JqZWN0U3RhdGVJdGVtKG8pLHRoaXMuX2l0ZW1zLnNwbGljZShyLDEpKX19cmVtb3ZlUmVuZGVyR2VvbWV0cnkoZSl7Zm9yKGxldCByPXRoaXMuX2l0ZW1zLmxlbmd0aC0xO3I+PTA7LS1yKXtjb25zdCBvPXRoaXMuX2l0ZW1zW3JdO28udHlwZT09PXQuUmVuZGVyR2VvbWV0cnkmJm8ucmVuZGVyR2VvbWV0cnk9PT1lJiYodGhpcy5fcmVtb3ZlT2JqZWN0U3RhdGVJdGVtKG8pLHRoaXMuX2l0ZW1zLnNwbGljZShyLDEpKX19cmVtb3ZlQWxsKCl7dGhpcy5faXRlbXMuZm9yRWFjaCgoZT0+e3RoaXMuX3JlbW92ZU9iamVjdFN0YXRlSXRlbShlKX0pKSx0aGlzLl9pdGVtcz1bXX1fcmVtb3ZlT2JqZWN0U3RhdGVJdGVtKHIpe3N3aXRjaChyLnR5cGUpe2Nhc2UgdC5PYmplY3Q6ci5vYmplY3RTdGF0ZUlkLmNoYW5uZWw9PT1lLkhpZ2hsaWdodD9yLm9iamVjdC5yZW1vdmVIaWdobGlnaHQoci5vYmplY3RTdGF0ZUlkKTpyLm9iamVjdFN0YXRlSWQuY2hhbm5lbD09PWUuTWFza09jY2x1ZGVlJiZyLm9iamVjdC5yZW1vdmVPY2NsdWRlKHIub2JqZWN0U3RhdGVJZCk7YnJlYWs7Y2FzZSB0LlJlbmRlckdlb21ldHJ5OnIub3duZXIucmVtb3ZlUmVuZGVyR2VvbWV0cnlPYmplY3RTdGF0ZShyLnJlbmRlckdlb21ldHJ5LHIub2JqZWN0U3RhdGVJZCk7YnJlYWs7Y2FzZSB0LkV4dGVybmFsOnIucmVtb3ZlKHIub2JqZWN0U3RhdGVJZCl9fX1leHBvcnR7ciBhcyBPYmplY3QzRFN0YXRlU2V0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0RmVhdHVyZUVkaXRGaWVsZHMgYXMgZSxmaXhGaWVsZHMgYXMgbH1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7YXN5bmMgZnVuY3Rpb24gbihuLHA9bi5wb3B1cFRlbXBsYXRlKXtpZihudWxsPT1wKXJldHVybltdO2NvbnN0IHU9YXdhaXQgcC5nZXRSZXF1aXJlZEZpZWxkcyhuLmZpZWxkc0luZGV4KSx7bGFzdEVkaXRJbmZvRW5hYmxlZDp0fT1wLHtvYmplY3RJZEZpZWxkOmQsdHlwZUlkRmllbGQ6cyxnbG9iYWxJZEZpZWxkOmkscmVsYXRpb25zaGlwczphfT1uO2lmKHUuaW5jbHVkZXMoXCIqXCIpKXJldHVybltcIipcIl07Y29uc3Qgbz10P2Uobik6W10sZj1sKG4uZmllbGRzSW5kZXgsWy4uLnUsLi4ub10pO3JldHVybiBzJiZmLnB1c2gocyksZiYmZCYmbi5maWVsZHNJbmRleD8uaGFzKGQpJiYhZi5pbmNsdWRlcyhkKSYmZi5wdXNoKGQpLGYmJmkmJm4uZmllbGRzSW5kZXg/LmhhcyhpKSYmIWYuaW5jbHVkZXMoaSkmJmYucHVzaChpKSxhJiZhLmZvckVhY2goKGU9Pntjb25zdHtrZXlGaWVsZDpsfT1lO2YmJmwmJm4uZmllbGRzSW5kZXg/LmhhcyhsKSYmIWYuaW5jbHVkZXMobCkmJmYucHVzaChsKX0pKSxmfWZ1bmN0aW9uIHAoZSxsKXtyZXR1cm4gZS5wb3B1cFRlbXBsYXRlP2UucG9wdXBUZW1wbGF0ZTpudWxsIT1sJiZsLmRlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZCYmbnVsbCE9ZS5kZWZhdWx0UG9wdXBUZW1wbGF0ZT9lLmRlZmF1bHRQb3B1cFRlbXBsYXRlOm51bGx9ZnVuY3Rpb24gdShlLGwpe3JldHVybiBudWxsIT1wKGUse2RlZmF1bHRQb3B1cFRlbXBsYXRlRW5hYmxlZDpsfSl9ZXhwb3J0e3AgYXMgZ2V0RmV0Y2hQb3B1cFRlbXBsYXRlLG4gYXMgZ2V0UmVxdWlyZWRGaWVsZHMsdSBhcyBoYXNQb3B1cFRlbXBsYXRlfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==