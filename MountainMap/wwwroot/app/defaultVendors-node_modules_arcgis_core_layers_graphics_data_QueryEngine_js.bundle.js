"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_data_QueryEngine_js"],{

/***/ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/sql/WhereClauseCache.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WhereClauseCache: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _WhereClause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r{constructor(e,r){this._cache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(e),this._invalidCache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(r)}get(t,r){const i=`${r.uid}:${t}`,c=this._cache.get(i);if(c)return c;if(null!=this._invalidCache.get(i))return null;try{const c=_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create(t,r);return this._cache.put(i,c),c}catch(n){return this._invalidCache.put(i,n),null}}getError(t,e){const r=`${e.uid}:${t}`;return this._invalidCache.get(r)??null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/geometry/geometryAdapters/json.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/geometry/geometryAdapters/json.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   jsonAdapter: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t={convertToGEGeometry:s,exportPoint:n,exportPolygon:o,exportPolyline:a,exportMultipoint:c,exportExtent:m};function s(t,s){return null==s?null:t.convertJSONToGeometry(s)}class i{constructor(t,s,i){this.x=t,this.y=s,this.spatialReference=i,this.z=void 0,this.m=void 0}}function n(t,s,n){const e=new i(t.getPointX(s),t.getPointY(s),n),o=t.hasZ(s),h=t.hasM(s);return o&&(e.z=t.getPointZ(s)),h&&(e.m=t.getPointM(s)),e}class e{constructor(t,s,i,n){this.rings=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function o(t,s,i){return new e(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class h{constructor(t,s,i,n){this.paths=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function a(t,s,i){return new h(t.exportPaths(s),i,t.hasZ(s),t.hasM(s))}class r{constructor(t,s,i,n){this.points=t,this.spatialReference=s,this.hasZ=void 0,this.hasM=void 0,i&&(this.hasZ=i),n&&(this.hasM=n)}}function c(t,s,i){return new r(t.exportPoints(s),i,t.hasZ(s),t.hasM(s))}class x{constructor(t,s,i,n,e){this.xmin=t,this.ymin=s,this.xmax=i,this.ymax=n,this.spatialReference=e,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}function m(t,s,i){const n=t.hasZ(s),e=t.hasM(s),o=new x(t.getXMin(s),t.getYMin(s),t.getXMax(s),t.getYMax(s),i);if(n){const i=t.getZExtent(s);o.zmin=i.vmin,o.zmax=i.vmax}if(e){const i=t.getMExtent(s);o.mmin=i.vmin,o.mmax=i.vmax}return o}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../smartMapping/statistics/support/utils.js */ "./node_modules/@arcgis/core/smartMapping/statistics/support/utils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class c{constructor(s,a,l){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=s.returnDistinctValues??!1,this.fieldsIndex=l,this.featureAdapter=a;const r=s.outFields;if(r&&!r.includes("*")){this.outFields=r;let s=0;for(const a of r){const r=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getExpressionFromFieldName)(a),n=this.fieldsIndex.get(r),u=n?null:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(r,l),o=n?n.name:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getAliasFromFieldName)(a)||"FIELD_EXP_"+s++;this._fieldDataCache.set(a,{alias:o,clause:u})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,i,s){const a=s?s.name:i;let l=null;return this._fieldDataCache.has(a)?l=this._fieldDataCache.get(a)?.clause:s||(l=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:l})),s?this.featureAdapter.getAttribute(t,a):l?.calculateValue(t,this.featureAdapter)}getDataValues(t,e,i=!0){const s=e.normalizationType,d=e.normalizationTotal,c=this.fieldsIndex.get(e.field),h=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isDateOnlyField)(c)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isTimestampOffsetField)(c),f=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isTimeOnlyField)(c);return t.map((t=>{let a=e.field&&this.getFieldValue(t,e.field,this.fieldsIndex.get(e.field));if(e.field2?(a=`${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_4__.processNullValue)(a)}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_4__.processNullValue)(this.getFieldValue(t,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(a=`${a}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_4__.processNullValue)(this.getFieldValue(t,e.field3,this.fieldsIndex.get(e.field3)))}`)):"string"==typeof a&&i&&(h?a=a?new Date(a).getTime():null:f&&(a=a?(0,_smartMapping_statistics_support_utils_js__WEBPACK_IMPORTED_MODULE_3__.timeOnlyToMilliseconds)(a):null)),s&&Number.isFinite(a)){const i="field"===s&&e.normalizationField?this.getFieldValue(t,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null;a=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_4__.getNormalizedValue)(a,s,i,d)}return a}))}async getExpressionValues(t,e,i,a,l){const{arcadeUtils:r}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_5__.loadArcade)(),n=r.hasGeometryOperations(e);n&&await r.enableGeometryOperations();const u=r.createFunction(e),o=r.getViewInfo(i),c={fields:this.fieldsIndex.fields};return t.map((t=>{const e={attributes:this.featureAdapter.getAttributes(t),layer:c,geometry:n?{...(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometry)(a.geometryType,a.hasZ,a.hasM,this.featureAdapter.getGeometry(t)),spatialReference:i?.spatialReference}:null},d=r.createExecContext(e,o,l);return r.executeFunction(u,d)}))}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testFeature(t,this.featureAdapter)??!1}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testSet(t,this.featureAdapter)??!1}_processAttributesForOutFields(t){const e=this.outFields;if(!e?.length)return this.featureAdapter.getAttributes(t);const i={};for(const s of e){const{alias:e,clause:a}=this._fieldDataCache.get(s);i[e]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return i}_processAttributesForDistinctValues(t){if(null==t||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const l of e){const{alias:e}=this._fieldDataCache.get(l);i.push(t[e])}else for(const l in t)i.push(t[l]);const s=`${(e||["*"]).join(",")}=${i.join(",")}`;let a=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++a),a>1?null:t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Feature: () => (/* binding */ L),
/* harmony export */   QueryEngine: () => (/* binding */ W)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/JSONSupport.js */ "./node_modules/@arcgis/core/core/JSONSupport.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./QueryEngineCapabilities.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js");
/* harmony import */ var _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./QueryEngineResult.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js");
/* harmony import */ var _queryUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./queryUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/queryUtils.js");
/* harmony import */ var _queryValidationUtils_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./queryValidationUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/queryValidationUtils.js");
/* harmony import */ var _spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./spatialQuerySupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js");
/* harmony import */ var _timeSupport_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./timeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../views/support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const N="unsupported-query";class L{constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const V=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_5__.MemCacheStorage(2e6);let D=0;class W{constructor(e){this._geometryQueryCache=null,this._changeHandle=null,this.capabilities={query:_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_19__.queryCapabilities},this.geometryType=e.geometryType,this.hasM=!!e.hasM,this.hasZ=!!e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_5__.MemCache(D+++"$$",V)),this.fieldsIndex=(0,_core_JSONSupport_js__WEBPACK_IMPORTED_MODULE_2__.isSerializable)(e.fieldsIndex)?e.fieldsIndex:_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_25__["default"].fromJSON(e.fieldsIndex),this.availableFields=null==e.availableFields?new Set(this.fieldsIndex.fields.map((e=>e.name))):new Set(e.availableFields.map((e=>this.fieldsIndex.get(e)?.name)).filter((e=>null!=e))),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.removeMaybe)(this._frameTask),this.clearCache(),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._geometryQueryCache),this._changeHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.removeMaybe)(this._changeHandle)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear(),this._allFeaturesPromise=null,this._timeExtentPromise=null,this._fullExtentPromise=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)throw i;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};return{count:r,extent:await this._getBounds(s.items,s.spatialReference,i||this.spatialReference)}}catch(s){if(s===_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,returnEdge:a,vertexMode:n}=e;if(!a&&"none"===n)return{candidates:[]};let u=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.clone)(e.query);u=await this._schedule((()=>(0,_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.normalizeQueryLike)(u,this.definitionExpression,this.spatialReference)),t),u=await this._reschedule((()=>(0,_queryValidationUtils_js__WEBPACK_IMPORTED_MODULE_22__.validateQuery)(u,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference})),t);const l=!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(i.spatialReference,this.spatialReference);l&&await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.checkProjectionSupport)(i.spatialReference,this.spatialReference);const o="number"==typeof s?s:s.x,h="number"==typeof s?s:s.y,c={xmin:i.x-o,xmax:i.x+o,ymin:i.y-h,ymax:i.y+h,spatialReference:i.spatialReference},m=l?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.project)(c,this.spatialReference):c;if(!m)return{candidates:[]};const y=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_13__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.fromJSON)(i),null,{signal:t}))[0],f=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_13__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.fromJSON)(m),null,{signal:t}))[0];if(null==y||null==f)return{candidates:[]};const p=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(f.toJSON()))),t),u,this);await this._reschedule((()=>this._executeObjectIdsQuery(p)),t),await this._reschedule((()=>this._executeTimeQuery(p)),t),await this._reschedule((()=>this._executeAttributesQuery(p)),t),await this._reschedule((()=>this._executeGeometryQueryForSnapping(p,t)),t);const d=y.toJSON(),g=l?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.project)(d,this.spatialReference):d,x=l?Math.max(m.xmax-m.xmin,m.ymax-m.ymin)/2:s;return p.createSnappingResponse({...e,point:g,distance:x},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo?.trackIdField)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](N,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)throw s;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._executeQueryForStatistics(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,field2:r,field3:a,valueExpression:n}=t;return(await this._executeQueryForStatistics(e,{field:s,field2:r,field3:a,valueExpression:n},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._executeQueryForStatistics(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._executeQueryForStatistics(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async fetchRecomputedExtents(e){this._timeExtentPromise||=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_24__.getTimeExtent)(this.timeInfo,this.featureStore);const[t,i]=await Promise.all([this._getFullExtent(),this._timeExtentPromise]);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.throwIfAborted)(e),{fullExtent:t,timeExtent:i}}async _getBounds(e,t,i){const s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.set)((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.create)(),_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.negativeInfinity);await this.featureStore.forEachBounds(e,(e=>(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.expandWithAABB)(s,e)));const r={xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_17__.cleanFromGeometryEngine)(this.spatialReference)};this.hasZ&&isFinite(s[2])&&isFinite(s[5])&&(r.zmin=s[2],r.zmax=s[5]);const a=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.project)(r,t,i);if(a.spatialReference=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_17__.cleanFromGeometryEngine)(i),a.xmax-a.xmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_7__.getMetersPerUnitForSR)(a.spatialReference);a.xmin-=e,a.xmax+=e}if(a.ymax-a.ymin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_7__.getMetersPerUnitForSR)(a.spatialReference);a.ymin-=e,a.ymax+=e}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_7__.getMetersPerUnitForSR)(a.spatialReference);a.zmin-=e,a.zmax+=e}return a}_getFullExtent(){return this._fullExtentPromise||="getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getAllFeatures().then((e=>this._getBounds(e,this.spatialReference,this.spatialReference))),this._fullExtentPromise}async _schedule(e,t){return null!=this._frameTask?this._frameTask.schedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_26__.noBudget)}async _reschedule(e,t){return null!=this._frameTask?this._frameTask.reschedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_26__.noBudget)}async _getAllFeaturesQueryEngineResult(e){return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(await this._getAllFeatures(),e,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const e=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach((t=>e.push(t)))})().then((()=>e))}const e=this._allFeaturesPromise,t=await e;return e===this._allFeaturesPromise?t.slice():this._getAllFeatures()}async _executeQuery(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.clone)(e),e=await this._schedule((()=>(0,_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>(0,_queryValidationUtils_js__WEBPACK_IMPORTED_MODULE_22__.validateQuery)(e,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference})),i),e={...e,...t};const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(null==e.sceneFilter)return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,n=e.sceneFilter.geometry,u=null==a||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(a,n.spatialReference)?n:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.project)(n,a);if(!u)return null;const l=s||r,o=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.isValid)(i)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(this.spatialReference,i)&&l?async e=>this._project(e,i):e=>e,h=this.featureAdapter,c=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(u))),t);if("disjoint"===e.sceneFilter.spatialRelationship){if(!c.length)return null;const i=new Set;for(const e of c)i.add(h.getObjectId(e));const s=await this._reschedule((()=>this._getAllFeatures()),t),r=await this._reschedule((async()=>{const r=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.getSpatialQueryOperator)("esriSpatialRelDisjoint",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(h.getObjectId(e))||r(h.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(n,e,this)}),t);return o(r)}if(!c.length)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult([],e,this);if(this._canExecuteSinglePass(u,e))return o(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(c,e,this));const m=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.getSpatialQueryOperator)("esriSpatialRelContains",u,this.geometryType,this.hasZ,this.hasM),y=await this._runSpatialFilter(c,(e=>m(h.getGeometry(e))),t);return o(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(y,e,this))}async _executeGeometryQuery(i,s,r){if(null!=s&&0===s.items.length)return s;i=null!=s?s.query:i;const{geometry:a,outSR:n,spatialRel:u,returnGeometry:l,returnCentroid:o}=i,h=this.featureStore.featureSpatialReference,c=!a||null==h||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(h,a.spatialReference)?a:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.project)(a,h),m=l||o,y=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.isValid)(n)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(this.spatialReference,n),f=this._geometryQueryCache&&null==s?y&&m?JSON.stringify({originalFilterGeometry:a,spatialRelationship:u,outSpatialReference:n}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:u}):null,p=f?this._geometryQueryCache.get(f):null;if(null!=p)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(p,i,this);const d=async e=>(y&&m&&await this._project(e,n),f&&this._geometryQueryCache.put(f,e.items,e.items.length+1),e);if(!c)return d(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const g=this.featureAdapter;let x=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(a))),r);if("esriSpatialRelDisjoint"===u){if(!x.length)return d(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const e=new Set;for(const i of x)e.add(g.getObjectId(i));const t=null!=s?s.items:await this._reschedule((()=>this._getAllFeatures()),r),a=await this._reschedule((async()=>{const s=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.getSpatialQueryOperator)(u,c,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(g.getObjectId(t))||s(g.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(n,i,this)}),r);return d(a)}if(null!=s){const i=new _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint;x=x.filter((e=>(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(s.items,e,s.items.length,i)>=0))}if(!x.length){const e=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult([],i,this);return f&&this._geometryQueryCache.put(f,e.items,1),e}if(this._canExecuteSinglePass(c,i))return d(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(x,i,this));const _=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.getSpatialQueryOperator)(u,c,this.geometryType,this.hasZ,this.hasM),w=await this._runSpatialFilter(x,(e=>_(g.getGeometry(e))),r);return d(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult(w,i,this))}async _executeGeometryQueryForSnapping(e,t){const{query:i}=e,{spatialRel:s}=i;if(!e?.items?.length||!i.geometry||!s)return;const r=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.getSpatialQueryOperator)(s,i.geometry,this.geometryType,this.hasZ,this.hasM),a=await this._runSpatialFilter(e.items,(e=>r(e.geometry)),t);e.items=a}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds?.length||null==this.aggregateAdapter)return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds?.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_24__.getTimeOperator)(this.timeInfo,e.query.timeExtent,this.featureAdapter);null!=t&&(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_16__.getWhereClause)(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(null==this._frameTask)return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const u=e[s++];t(u)&&(r.push(u),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const u of e.items){const e=n(u,t),i=n(u,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,u)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.canQueryWithRBush)(e)&&("esriSpatialRelEnvelopeIntersects"===i||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===i||"esriSpatialRelContains"===i))}async _project(e,t){if(!t||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_14__.equals)(this.spatialReference,t))return e;const i=this.featureAdapter;let s;try{const e=await this._getFullExtent();s=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_8__.getTransformation)(this.spatialReference,t,e)}catch{}const r=await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_18__.projectMany)(e.items.map((e=>(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_17__.getGeometry)(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t,s);return e.items=r.map(((t,s)=>i.cloneWithGeometry(e.items[s],(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_15__.convertFromGeometry)(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if((0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_23__.canQueryWithRBush)(e)){if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.isExtent)(e))return[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.fromValues)(Math.min(e.xmin,e.xmax),Math.min(e.ymin,e.ymax),Math.max(e.xmin,e.xmax),Math.max(e.ymin,e.ymax))];if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_12__.isPolygon)(e))return e.rings.map((e=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.fromValues)(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getBoundsXY)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)(),e)]}async _searchFeatures(e){const t=new Set;await Promise.all(e.map((e=>this.featureStore.forEachInBounds(e,(e=>t.add(e))))));const i=Array.from(t.values());return t.clear(),i}async _executeQueryForStatistics(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_3__.clone)(e);try{e=await this._schedule((()=>(0,_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>(0,_queryValidationUtils_js__WEBPACK_IMPORTED_MODULE_22__.validateStatisticsQuery)(e,t,{availableFields:this.availableFields,fieldsIndex:this.fieldsIndex,geometryType:this.geometryType,spatialReference:this.spatialReference})),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(s){if(s!==_queryUtils_js__WEBPACK_IMPORTED_MODULE_21__.queryEngineEmptyResult)throw s;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_20__.QueryEngineResult([],e,this)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   queryCapabilities: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByAnonymous:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryEngineResult: () => (/* binding */ q)
/* harmony export */ });
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/centroid.js */ "./node_modules/@arcgis/core/geometry/support/centroid.js");
/* harmony import */ var _geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/extentUtils.js */ "./node_modules/@arcgis/core/geometry/support/extentUtils.js");
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/quantizationUtils.js */ "./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./AttributesBuilder.js */ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./SnappingCandidate.js */ "./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class q{constructor(e,t,s){this.items=e,this.query=t,this.geometryType=s.geometryType,this.hasM=s.hasM,this.hasZ=s.hasZ,this.fieldsIndex=s.fieldsIndex,this.objectIdField=s.objectIdField,this.spatialReference=s.spatialReference,this.featureAdapter=s.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const e=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:t,having:s,outStatistics:i}=this.query,a=t?.length;if(!!!a)return 1;const r=new Map,n=new Map,o=new Set;for(const l of i){const{statisticType:i}=l,a="exceedslimit"!==i?l.onStatisticField:void 0;if(!n.has(a)){const s=[];for(const i of t){const t=this._getAttributeValues(e,i,r);s.push(t)}n.set(a,this._calculateUniqueValues(s,e.returnDistinctValues))}const u=n.get(a);for(const t in u){const{data:i,items:a}=u[t],r=i.join(",");s&&!e.validateItems(a,s)||o.add(r)}}return o.size}async createQueryResponse(){let e;if(this.query.outStatistics){e=this.query.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query)}else e=this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const t=this.query.geometry;(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.isValid)(this.query.outSR)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(t.spatialReference,this.query.outSR)?e.queryGeometry=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)(t,t.spatialReference,this.query.outSR)}):e.queryGeometry=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...t})}return e}createSnappingResponse(e,t){const s=this.featureAdapter,i=C(this.hasZ,this.hasM),{point:a,mode:r}=e,n="number"==typeof e.distance?e.distance:e.distance.x,o="number"==typeof e.distance?e.distance:e.distance.y,l={candidates:[]},u="esriGeometryPolygon"===this.geometryType,c=this._getPointCreator(r,this.spatialReference,t),d=new D(null,0),m=new D(null,0),f={x:0,y:0,z:0};for(const p of this.items){const t=s.getGeometry(p);if(null==t)continue;const{coords:r,lengths:y}=t;if(d.coords=r,m.coords=r,e.returnEdge){let e=0;for(let t=0;t<y.length;t++){const r=y[t];for(let t=0;t<r;t++,e+=i){const u=d;if(u.coordsIndex=e,t!==r-1){const t=m;t.coordsIndex=e+i;const r=f;N(f,a,u,t);const d=(a.x-r.x)/n,g=(a.y-r.y)/o,y=d*d+g*g;y<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_8__.makeEdgeCandidate)(s.getObjectId(p),c(r),Math.sqrt(y),c(u),c(t)))}}}}if("none"!==e.vertexMode){const t=u?r.length-i:r.length;if("all"===e.vertexMode)for(let e=0;e<t;e+=i){const t=d;t.coordsIndex=e;const i=(a.x-t.x)/n,r=(a.y-t.y)/o,u=i*i+r*r;u<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_8__.makeVertexCandidate)(s.getObjectId(p),c(t),Math.sqrt(u)))}else if("ends"===e.vertexMode){const e=[0];u||e.push(r.length-i);for(const t of e){const e=d;e.coordsIndex=t;const i=(a.x-e.x)/n,r=(a.y-e.y)/o,u=i*i+r*r;u<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_8__.makeVertexCandidate)(s.getObjectId(p),c(e),Math.sqrt(u)))}}}}return l.candidates.sort(((e,t)=>e.distance-t.distance)),l}_getPointCreator(e,t,s){const i=null==s||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(t,s)?e=>e:e=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)(e,t,s),{hasZ:a}=this,r=0;return"3d"===e?a?({x:e,y:t,z:s})=>i({x:e,y:t,z:s}):({x:e,y:t})=>i({x:e,y:t,z:r}):({x:e,y:t})=>i({x:e,y:t})}async createSummaryStatisticsResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,minValue:n,maxValue:o,scale:l,timeZone:u}=e,c=this.fieldsIndex.get(t),d=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isDateField)(c)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isDateOnlyField)(c)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isTimestampOffsetField)(c),m=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:l,timeZone:u}),h=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.isNullCountSupported)({normalizationType:a,normalizationField:i,minValue:n,maxValue:o}),g={value:.5,fieldType:c?.type},I=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isStringField)(c)?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStringStatistics)({values:m,supportsNullCount:h,percentileParams:g}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStatistics)({values:m,minValue:n,maxValue:o,useSampleStdDev:!a,supportsNullCount:h,percentileParams:g});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.processSummaryStatisticsResult)(I,d)}async createUniqueValuesResponse(e){const{field:t,valueExpression:s,domains:i,returnAllCodedValues:a,scale:r,timeZone:n}=e,o=await this._getDataValues({field:t,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:s,scale:r,timeZone:n},!1),l=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateUniqueValuesCount)(o);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.createUVResult)(l,i,a,e.fieldDelimiter)}async createClassBreaksResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c,scale:d,timeZone:m}=e,h=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d,timeZone:m}),g=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateClassBreaks)(h,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.resolveCBResult)(g,n)}async createHistogramResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c,scale:d,timeZone:m}=e,h=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d,timeZone:m});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateHistogram)(h,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c})}_sortFeatures(e,t,s){if(e.length>1&&t?.length)for(const i of t.reverse()){const t=i.split(" "),a=t[0],r=this.fieldsIndex.get(a),n=!!t[1]&&"desc"===t[1].toLowerCase(),o=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.getAttributeComparator)(r?.type,n);e.sort(((e,t)=>{const i=s(e,a,r),n=s(t,a,r);return o(i,n)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:s,hasM:i,hasZ:a,objectIdField:n,spatialReference:o}=this,{outFields:l,outSR:c,quantizationParameters:d,resultRecordCount:m,resultOffset:h,returnZ:g,returnM:f}=e,p=null!=m&&t.length>(h||0)+m,y=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:s,hasM:i&&f,hasZ:a&&g,objectIdFieldName:n,spatialReference:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.cleanFromGeometryEngine)(c||o),transform:d&&(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_3__.toQuantizationTransform)(d)||null}}_createFeatures(e,t){const s=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_5__["default"](e,this.featureAdapter,this.fieldsIndex),{hasM:i,hasZ:a}=this,{orderByFields:n,quantizationParameters:o,returnGeometry:u,returnCentroid:m,maxAllowableOffset:h,resultOffset:g,resultRecordCount:f,returnZ:p=!1,returnM:y=!1}=e,x=a&&p,I=i&&y;let T=[],V=0;const F=[...t];if(this._sortFeatures(F,n,((e,t,i)=>s.getFieldValue(e,t,i))),this.geometryType&&(u||m)){const e=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_3__.toQuantizationTransform)(o)??void 0;if(u&&!m)for(const t of F)T[V++]={attributes:s.getAttributes(t),geometry:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),h,e,x,I)};else if(!u&&m)for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),h,e,x,I)}}else for(const r of F){const e=s.getAttributes(r);e&&(T[V++]={attributes:e})}const S=g||0;if(null!=f){const e=S+f;T=T.slice(S,Math.min(T.length,e))}return T}_createExceedsLimitQueryResponse(e){let t=!1,s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(const r of e.outStatistics??[])if("exceedslimit"===r.statisticType){s=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,i=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,a=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>s;else if(this.items.length>i)t=!0;else{const e=C(this.hasZ,this.hasM),s=this.featureAdapter;t=this.items.reduce(((e,t)=>{const i=s.getGeometry(t);return e+(null!=i&&i.coords.length||0)}),0)/e>a}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},s=[],i=new Map,a=new Map,r=new Map,n=new Map,o=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_5__["default"](e,this.featureAdapter,this.fieldsIndex),u=e.outStatistics,{groupByFieldsForStatistics:c,having:d,orderByFields:m,resultRecordCount:h}=e,g=c?.length,f=!!g,p=f?c[0]:null,y=f&&!this.fieldsIndex.get(p);for(const l of u??[]){const{outStatisticFieldName:e,statisticType:u}=l,m=l,h="exceedslimit"!==u?l.onStatisticField:void 0,I="percentile_disc"===u||"percentile_cont"===u,T="EnvelopeAggregate"===u||"CentroidAggregate"===u||"ConvexHullAggregate"===u,V=f&&1===g&&(h===p||y)&&"count"===u;if(f){if(!r.has(h)){const e=[];for(const t of c){const s=this._getAttributeValues(o,t,i);e.push(s)}r.set(h,this._calculateUniqueValues(e,!T&&o.returnDistinctValues))}const t=r.get(h);if(!t)continue;const s=Object.keys(t);for(const a of s){const{count:s,data:r,items:l,itemPositions:u}=t[a],g=r.join(",");if(!d||o.validateItems(l,d)){const t=n.get(g)||{attributes:{}};if(T){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,l);t.aggregateGeometries[s]=e}else{let a=null;if(V)a=s;else{const e=this._getAttributeValues(o,h,i),t=u.map((t=>e[t]));a=I&&"statisticParameters"in m?this._getPercentileValue(m,t):this._getStatisticValue(m,t,null,o.returnDistinctValues)}t.attributes[e]=a}let a=0;c.forEach(((e,s)=>t.attributes[this.fieldsIndex.get(e)?e:"EXPR_"+ ++a]=r[s])),n.set(g,t)}}}else if(T){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,this.items);t.aggregateGeometries[s]=e}else{const s=this._getAttributeValues(o,h,i);t.attributes[e]=I&&"statisticParameters"in m?this._getPercentileValue(m,s):this._getStatisticValue(m,s,a,o.returnDistinctValues)}const F="min"!==u&&"max"!==u||!(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isStringField)(this.fieldsIndex.get(h))&&!this._isAnyDateField(h)?null:this.fieldsIndex.get(h)?.type;s.push({name:e,alias:e,type:F||"esriFieldTypeDouble"})}const I=f?Array.from(n.values()):[t];return this._sortFeatures(I,m,((e,t)=>e.attributes[t])),h&&(I.length=Math.min(h,I.length)),{fields:s,features:I}}_isAnyDateField(e){const t=this.fieldsIndex.get(e);return (0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isDateField)(t)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isDateOnlyField)(t)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isTimestampOffsetField)(t)||(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isTimeOnlyField)(t)}async _getAggregateGeometry(e,r){const{convexHull:n,union:o}=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js")),{statisticType:l,outStatisticFieldName:u}=e,{featureAdapter:d,spatialReference:m,geometryType:h,hasZ:g,hasM:f}=this,p=r.map((e=>(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.getGeometry)(h,g,f,d.getGeometry(e)))),y=n(m,p,!0)[0],x={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===l){const e=y?(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_2__.getPolygonExtent)(y):(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_2__.getGeometryExtent)(o(m,p));x.aggregateGeometries={...e,spatialReference:m},x.outStatisticFieldName=u||"extent"}else if("CentroidAggregate"===l){const e=y?(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_1__.polygonCentroid)(y):(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_1__.extentCentroid)((0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_2__.getGeometryExtent)(o(m,p)));x.aggregateGeometries={x:e[0],y:e[1],spatialReference:m},x.outStatisticFieldName=u||"centroid"}else"ConvexHullAggregate"===l&&(x.aggregateGeometries=y,x.outStatisticFieldName=u||"convexHull");return x}_getStatisticValue(e,t,s,i){const{onStatisticField:a,statisticType:r}=e;let n=null;n=s?.has(a)?s.get(a):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.isStringField)(this.fieldsIndex.get(a))||this._isAnyDateField(a)?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStringStatistics)({values:t,returnDistinct:i}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculateStatistics)({values:i?[...new Set(t)]:t,minValue:null,maxValue:null,useSampleStdDev:!0}),s&&s.set(a,n);return n["var"===r?"variance":r]}_getPercentileValue(e,t){const{onStatisticField:s,statisticParameters:i,statisticType:a}=e,{value:r,orderBy:n}=i,o=this.fieldsIndex.get(s);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_10__.calculatePercentile)(t,{value:r,orderBy:n,fieldType:o?.type,isDiscrete:"percentile_disc"===a})}_getAttributeValues(e,t,s){if(s.has(t))return s.get(t);const i=this.fieldsIndex.get(t),a=this.items.map((s=>e.getFieldValue(s,t,i)));return s.set(t,a),a}_calculateUniqueValues(e,t){const s={},i=this.items,a=i.length;for(let r=0;r<a;r++){const a=i[r],n=[];for(const t of e)n.push(t[r]);const o=n.join(",");null==s[o]?s[o]={count:1,data:n,items:[a],itemPositions:[r]}:(t||s[o].count++,s[o].items.push(a),s[o].itemPositions.push(r))}return s}async _getDataValues(t,s=!0){const i=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:a,scale:r,timeZone:n}=t;return a?i.getExpressionValues(this.items,a,{viewingMode:"map",scale:r,spatialReference:this.query.outSR||this.spatialReference},{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM},n):i.getDataValues(this.items,(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(t),s)}}function N(e,t,s,i){const a=i.x-s.x,r=i.y-s.y,n=a*a+r*r,o=(t.x-s.x)*a+(t.y-s.y)*r,l=Math.min(1,Math.max(0,o/n));e.x=s.x+a*l,e.y=s.y+r*l}function C(e,t){return e?t?4:3:t?3:2}class D{constructor(e,t){this.coords=e,this.coordsIndex=t}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   allDateAndTimeFieldTypes: () => (/* binding */ a),
/* harmony export */   getAliasFromFieldName: () => (/* binding */ y),
/* harmony export */   getExpressionFromFieldName: () => (/* binding */ u),
/* harmony export */   getWhereClause: () => (/* binding */ c),
/* harmony export */   numericFieldTypes: () => (/* binding */ o),
/* harmony export */   validateFields: () => (/* binding */ g),
/* harmony export */   validateHaving: () => (/* binding */ f),
/* harmony export */   validateWhere: () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/sql/WhereClauseCache.js */ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js");
/* harmony import */ var _support_fieldType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../support/fieldType.js */ "./node_modules/@arcgis/core/layers/support/fieldType.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=new _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_1__.WhereClauseCache(50,500),s="unsupported-query",n=" as ",o=new Set(["esriFieldTypeOID","esriFieldTypeSmallInteger","esriFieldTypeBigInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeLong"]),a=new Set(["esriFieldTypeDate","esriFieldTypeDateOnly","esriFieldTypeTimeOnly","esriFieldTypeTimestampOffset"]),l=new Set(["esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...o,...a]);function d(i,r,n={}){const o=c(r,i);if(!o){const n=t.getError(r,i);throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](s,"invalid SQL expression",{expression:r,error:n})}const a=n.expressionName||"expression";if(n.validateStandardized&&!o.isStandardized)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](s,`${a} is not standard`,{expression:r});if(n.validateAggregate&&!o.isAggregate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](s,`${a} does not contain a valid aggregate function`,{expression:r});return o.fieldNames}function p(e,i,r,t){if(!r)return!0;const s="where clause";return g(e,i,d(e,r,{validateStandardized:!0,expressionName:s}),{expressionName:s,query:t}),!0}function f(i,r,t,n,o){if(!t)return!0;const a="having clause",l=d(i,t,{validateAggregate:!0,expressionName:a});g(i,r,l,{expressionName:a,query:o});const p=c(t,i),f=p?.getExpressions().every((e=>{const{aggregateType:r,field:t}=e,s=i.get(t)?.name;return n.some((e=>{const{onStatisticField:t,statisticType:n}=e,o=i.get(t)?.name;return o===s&&n.toLowerCase().trim()===r}))}));if(!f)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](s,"expressions in having clause should also exist in outStatistics",{having:t});return!0}function c(e,i){return e?t.get(e,i):null}function u(e){return/\((.*?)\)/.test(e)?e:e.split(n)[0]}function y(e){return e.split(n)[1]}function g(i,r,t,n={}){const o=new Map;if(m(o,i,r,n.allowedFieldTypes??l,t),o.size){const i=n.expressionName??"expression";throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](s,`${i} contains invalid or missing fields`,{errors:Array.from(o.values()),query:n.query})}}function m(e,i,r,t,s){for(const o of s){if("*"===o)continue;if(i.get(o))T(e,i,r,t,o);else try{const s=d(i,u(o),{validateStandardized:!0});for(const n of s)T(e,i,r,t,n)}catch(n){e.set(o,{type:"expression-error",expression:o,error:n})}}}function T(e,i,t,s,n){if("*"===n)return;const o=i.get(n);o?t.has(o.name)?!1===s?.has(o.type)&&e.set(n,{type:"invalid-type",fieldName:o.name,fieldType:_support_fieldType_js__WEBPACK_IMPORTED_MODULE_2__.kebabDict.fromJSON(o.type),allowedFieldTypes:Array.from(s,(e=>_support_fieldType_js__WEBPACK_IMPORTED_MODULE_2__.kebabDict.fromJSON(e)))}):e.set(n,{type:"missing-field",fieldName:o.name}):e.set(n,{type:"invalid-field",fieldName:n})}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   checkProjectionSupport: () => (/* binding */ x),
/* harmony export */   project: () => (/* binding */ j),
/* harmony export */   projectMany: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/geometryAdapters/json.js */ "./node_modules/@arcgis/core/geometry/geometryAdapters/json.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../geometry/support/webMercatorUtils.js */ "./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c=[0,0];function h(s,t){if(!t)return null;if("x"in t){const e={x:0,y:0};return[e.x,e.y]=s(t.x,t.y,c),null!=t.z&&(e.z=t.z),null!=t.m&&(e.m=t.m),e}if("xmin"in t){const e={xmin:0,ymin:0,xmax:0,ymax:0};return[e.xmin,e.ymin]=s(t.xmin,t.ymin,c),[e.xmax,e.ymax]=s(t.xmax,t.ymax,c),t.hasZ&&(e.zmin=t.zmin,e.zmax=t.zmax,e.hasZ=!0),t.hasM&&(e.mmin=t.mmin,e.mmax=t.mmax,e.hasM=!0),e}return"rings"in t?{rings:l(t.rings,s),hasM:t.hasM,hasZ:t.hasZ}:"paths"in t?{paths:l(t.paths,s),hasM:t.hasM,hasZ:t.hasZ}:"points"in t?{points:f(t.points,s),hasM:t.hasM,hasZ:t.hasZ}:null}function l(s,t){const e=[];for(const n of s)e.push(f(n,t));return e}function f(s,t){const e=[];for(const n of s){const s=t(n[0],n[1],[0,0]);e.push(s),n.length>2&&s.push(n[2]),n.length>3&&s.push(n[3])}return e}async function x(t,n){if(!t||!n)return;const r=Array.isArray(t)?t.map((s=>null!=s.geometry?s.geometry.spatialReference:null)).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome):[t];await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.initializeProjection)(r.map((s=>({source:s,dest:n}))))}const y=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__.lngLatToXY),g=h.bind(null,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__.xyToLngLat);function j(s,t,e,m){if(!s)return s;if(e||(e=t,t=s.spatialReference),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.isValid)(t)||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.isValid)(e)||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(t,e))return s;if((0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__.canProject)(t,e)){const t=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.isWebMercator)(e)?y(s):g(s);return t.spatialReference=e,t}return (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__.jsonAdapter,[s],t,e,null,m)[0]}class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(s,e,n,r){if(!s?.length||!e||!n||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(e,n))return s;const i={geometries:s,inSpatialReference:e,outSpatialReference:n,geographicTransformation:r,resolve:(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.createResolver)()};return this._jobs.push(i),this._timer??=setTimeout(this._process,10),i.resolve.promise}_process(){this._timer=null;const s=this._jobs.shift();if(!s)return;const{geometries:t,inSpatialReference:e,outSpatialReference:i,resolve:o,geographicTransformation:m}=s;(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_5__.canProject)(e,i)?(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.isWebMercator)(i)?o(t.map(y)):o(t.map(g)):o((0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.projectMany)(_geometry_geometryAdapters_json_js__WEBPACK_IMPORTED_MODULE_3__.jsonAdapter,t,e,i,m,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}}const M=new _;function b(s,t,e,n){return M.push(s,t,e,n)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/queryValidationUtils.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/queryValidationUtils.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   validateQuery: () => (/* binding */ c),
/* harmony export */   validateStatisticsQuery: () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./spatialQuerySupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const u="unsupported-query";async function c(t,{fieldsIndex:i,geometryType:s,spatialReference:r,availableFields:o}){if((t.distance??0)<0||null!=t.geometryPrecision||t.multipatchOption&&"xyFootprint"!==t.multipatchOption||t.pixelSize||t.relationParam||t.text)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"Unsupported query options",{query:t});return p(i,o,t),f(i,o,t),Promise.all([(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_3__.checkSpatialQuerySupport)(t,s,r),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_2__.checkProjectionSupport)(r,t.outSR)]).then((()=>t))}function p(t,i,o){const{outFields:n,orderByFields:a,returnDistinctValues:l,outStatistics:c}=o,p=c?c.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(a&&a.length>0){const e=" asc",r=" desc",n=a.map((t=>{const i=t.toLowerCase();return i.includes(e)?i.split(e)[0]:i.includes(r)?i.split(r)[0]:t})).filter((e=>!p.includes(e)));(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,n,{expressionName:"orderByFields",query:o})}if(n&&n.length>0)(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,n,{expressionName:"outFields",query:o});else if(l)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"outFields should be specified for returnDistinctValues",{query:o});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateWhere)(t,i,o.where,o)}const d=new Set([..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.numericFieldTypes,..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.allDateAndTimeFieldTypes]);function f(t,i,r){const{outStatistics:n,groupByFieldsForStatistics:a,having:l}=r,c=a?.length,p=n?.length;if(l){if(!c||!p)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:r});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateHaving)(t,i,l,n,r)}if(p){if(!h(n))return;const o=n.map((e=>e.onStatisticField)).filter(Boolean);(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,o,{expressionName:"onStatisticFields",query:r}),c&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,a,{expressionName:"groupByFieldsForStatistics",query:r});for(const a of n){const{onStatisticField:o,statisticType:n}=a;if(("percentile_disc"===n||"percentile_cont"===n)&&"statisticParameters"in a){const{statisticParameters:t}=a;if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"statisticParameters should be set for percentile type",{definition:a,query:r})}else t.get(o)&&"count"!==n&&"min"!==n&&"max"!==n&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,[o],{expressionName:`outStatistics with '${n}' statistic type`,allowedFieldTypes:d,query:r})}}}async function m(t,i,{fieldsIndex:s,geometryType:r,spatialReference:o,availableFields:l}){if((t.distance??0)<0||null!=t.geometryPrecision||t.multipatchOption||t.pixelSize||t.relationParam||t.text||t.outStatistics||t.groupByFieldsForStatistics||t.having||t.orderByFields)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"Unsupported query options",{query:t});return p(s,l,t),Promise.all([y(s,l,i,t),(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_3__.checkSpatialQuerySupport)(t,r,o),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_2__.checkProjectionSupport)(o,t.outSR)]).then((()=>t))}async function y(t,i,r,o){let n=[];if(r.valueExpression){const{arcadeUtils:e}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_4__.loadArcade)();n=e.extractFieldNames(r.valueExpression)}if(r.field&&n.push(r.field),r.field2&&n.push(r.field2),r.field3&&n.push(r.field3),r.normalizationField&&n.push(r.normalizationField),!n.length&&!r.valueExpression)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](u,"field or valueExpression is required",{params:r});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_1__.validateFields)(t,i,n,{expressionName:"statistics",query:o})}function h(e){return null!=e&&e.every((e=>"exceedslimit"!==e.statisticType))}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19kYXRhX1F1ZXJ5RW5naW5lX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5RixRQUFRLGlCQUFpQixnQkFBZ0Isa0RBQUMsMkJBQTJCLGtEQUFDLElBQUksU0FBUyxXQUFXLE1BQU0sR0FBRyxFQUFFLHVCQUF1QixjQUFjLCtDQUErQyxJQUFJLFFBQVEsd0RBQUMsYUFBYSw4QkFBOEIsU0FBUyx5Q0FBeUMsY0FBYyxXQUFXLE1BQU0sR0FBRyxFQUFFLEVBQUUsd0NBQXNFOzs7Ozs7Ozs7Ozs7Ozs7QUNKNWU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHdHQUF3RyxnQkFBZ0IsK0NBQStDLFFBQVEsbUJBQW1CLHVFQUF1RSxrQkFBa0IsdUVBQXVFLHlEQUF5RCxRQUFRLHFCQUFxQiwwR0FBMEcsa0JBQWtCLHFEQUFxRCxRQUFRLHFCQUFxQiwwR0FBMEcsa0JBQWtCLHFEQUFxRCxRQUFRLHFCQUFxQiwyR0FBMkcsa0JBQWtCLHNEQUFzRCxRQUFRLHVCQUF1Qiw2SUFBNkksa0JBQWtCLDZGQUE2RixNQUFNLHdCQUF3Qiw0QkFBNEIsTUFBTSx3QkFBd0IsNEJBQTRCLFNBQWtDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKajhDO0FBQ0E7QUFDQTtBQUNBO0FBQ3FnQixRQUFRLG1CQUFtQiwySkFBMkosb0JBQW9CLHdCQUF3QixpQkFBaUIsUUFBUSxrQkFBa0IsUUFBUSxnRkFBQyx1Q0FBdUMsb0VBQUMsaUJBQWlCLDJFQUFDLHNCQUFzQiw0QkFBNEIsaUJBQWlCLElBQUksdUJBQXVCLCtHQUErRyxpQkFBaUIsK0NBQStDLG1EQUFtRCxxQkFBcUIsbUJBQW1CLFdBQVcsK0VBQStFLG9FQUFDLGlEQUFpRCxpQkFBaUIsb0ZBQW9GLHdCQUF3QixxRkFBcUYsdUVBQUMsS0FBSyw4RUFBQyxNQUFNLHVFQUFD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QUFvQixzREFBQyw2REFBNkQsUUFBUSxFQUFFLG1FQUFDLGdCQUFnQixvQkFBb0IsbUVBQUMsSUFBSSwwRUFBQyxHQUFHLGtCQUFrQixNQUFNLHNEQUFzRCwyQkFBMkIsTUFBTSxvQkFBb0Isc0RBQUMsbUZBQW1GLFFBQVEsRUFBRSxvRUFBQyxZQUFZLE1BQU0sZ0JBQWdCLHVEQUF1RCxvRUFBQyxRQUFRLDJDQUEyQyxLQUFLLG9FQUFDLFFBQVEsb0RBQW9ELEVBQUUsa0JBQWtCLE1BQU0sbUNBQW1DLEdBQUcsOEVBQThFLE1BQU0sc0JBQXNCLEdBQUcsZ0JBQWdCLHNEQUFDLDREQUE0RCxxQkFBcUIsRUFBRSxrREFBa0Qsb0VBQUMsVUFBVSxzQ0FBc0MsRUFBRSw4Q0FBOEMsSUFBSSxzQkFBc0Isa0VBQWtFLEVBQUUsOExBQThMLHNEQUFDLGdDQUFnQyxRQUFRLEVBQUUsd0NBQXdDLGlGQUFDLFFBQVEsNkVBQUMsNEJBQTRCLDBCQUEwQixTQUFTLHNCQUFzQixNQUFNLGNBQWMsT0FBTyxzRUFBQyxHQUFHLHlDQUF5Qyw2S0FBNkssc0RBQUMsMkNBQTJDLFNBQVMsRUFBRSxvRUFBQyxRQUFRLG9DQUFvQyxFQUFFLGNBQWMsK0RBQXVIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvc3FsL1doZXJlQ2xhdXNlQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2dlb21ldHJ5L2dlb21ldHJ5QWRhcHRlcnMvanNvbi5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvQXR0cmlidXRlc0J1aWxkZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9kYXRhL1F1ZXJ5RW5naW5lLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZUNhcGFiaWxpdGllcy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2RhdGEvUXVlcnlFbmdpbmVSZXN1bHQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9kYXRhL2F0dHJpYnV0ZVN1cHBvcnQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9kYXRhL3Byb2plY3Rpb25TdXBwb3J0LmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9xdWVyeVZhbGlkYXRpb25VdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e0xSVUNhY2hlIGFzIHR9ZnJvbVwiLi4vTFJVQ2FjaGUuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2UgYXMgZX1mcm9tXCIuL1doZXJlQ2xhdXNlLmpzXCI7Y2xhc3Mgcntjb25zdHJ1Y3RvcihlLHIpe3RoaXMuX2NhY2hlPW5ldyB0KGUpLHRoaXMuX2ludmFsaWRDYWNoZT1uZXcgdChyKX1nZXQodCxyKXtjb25zdCBpPWAke3IudWlkfToke3R9YCxjPXRoaXMuX2NhY2hlLmdldChpKTtpZihjKXJldHVybiBjO2lmKG51bGwhPXRoaXMuX2ludmFsaWRDYWNoZS5nZXQoaSkpcmV0dXJuIG51bGw7dHJ5e2NvbnN0IGM9ZS5jcmVhdGUodCxyKTtyZXR1cm4gdGhpcy5fY2FjaGUucHV0KGksYyksY31jYXRjaChuKXtyZXR1cm4gdGhpcy5faW52YWxpZENhY2hlLnB1dChpLG4pLG51bGx9fWdldEVycm9yKHQsZSl7Y29uc3Qgcj1gJHtlLnVpZH06JHt0fWA7cmV0dXJuIHRoaXMuX2ludmFsaWRDYWNoZS5nZXQocik/P251bGx9fWV4cG9ydHtyIGFzIFdoZXJlQ2xhdXNlQ2FjaGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNvbnN0IHQ9e2NvbnZlcnRUb0dFR2VvbWV0cnk6cyxleHBvcnRQb2ludDpuLGV4cG9ydFBvbHlnb246byxleHBvcnRQb2x5bGluZTphLGV4cG9ydE11bHRpcG9pbnQ6YyxleHBvcnRFeHRlbnQ6bX07ZnVuY3Rpb24gcyh0LHMpe3JldHVybiBudWxsPT1zP251bGw6dC5jb252ZXJ0SlNPTlRvR2VvbWV0cnkocyl9Y2xhc3MgaXtjb25zdHJ1Y3Rvcih0LHMsaSl7dGhpcy54PXQsdGhpcy55PXMsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPWksdGhpcy56PXZvaWQgMCx0aGlzLm09dm9pZCAwfX1mdW5jdGlvbiBuKHQscyxuKXtjb25zdCBlPW5ldyBpKHQuZ2V0UG9pbnRYKHMpLHQuZ2V0UG9pbnRZKHMpLG4pLG89dC5oYXNaKHMpLGg9dC5oYXNNKHMpO3JldHVybiBvJiYoZS56PXQuZ2V0UG9pbnRaKHMpKSxoJiYoZS5tPXQuZ2V0UG9pbnRNKHMpKSxlfWNsYXNzIGV7Y29uc3RydWN0b3IodCxzLGksbil7dGhpcy5yaW5ncz10LHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1zLHRoaXMuaGFzWj12b2lkIDAsdGhpcy5oYXNNPXZvaWQgMCxpJiYodGhpcy5oYXNaPWkpLG4mJih0aGlzLmhhc009bil9fWZ1bmN0aW9uIG8odCxzLGkpe3JldHVybiBuZXcgZSh0LmV4cG9ydFBhdGhzKHMpLGksdC5oYXNaKHMpLHQuaGFzTShzKSl9Y2xhc3MgaHtjb25zdHJ1Y3Rvcih0LHMsaSxuKXt0aGlzLnBhdGhzPXQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPXMsdGhpcy5oYXNaPXZvaWQgMCx0aGlzLmhhc009dm9pZCAwLGkmJih0aGlzLmhhc1o9aSksbiYmKHRoaXMuaGFzTT1uKX19ZnVuY3Rpb24gYSh0LHMsaSl7cmV0dXJuIG5ldyBoKHQuZXhwb3J0UGF0aHMocyksaSx0Lmhhc1oocyksdC5oYXNNKHMpKX1jbGFzcyBye2NvbnN0cnVjdG9yKHQscyxpLG4pe3RoaXMucG9pbnRzPXQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPXMsdGhpcy5oYXNaPXZvaWQgMCx0aGlzLmhhc009dm9pZCAwLGkmJih0aGlzLmhhc1o9aSksbiYmKHRoaXMuaGFzTT1uKX19ZnVuY3Rpb24gYyh0LHMsaSl7cmV0dXJuIG5ldyByKHQuZXhwb3J0UG9pbnRzKHMpLGksdC5oYXNaKHMpLHQuaGFzTShzKSl9Y2xhc3MgeHtjb25zdHJ1Y3Rvcih0LHMsaSxuLGUpe3RoaXMueG1pbj10LHRoaXMueW1pbj1zLHRoaXMueG1heD1pLHRoaXMueW1heD1uLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1lLHRoaXMuem1pbj12b2lkIDAsdGhpcy56bWF4PXZvaWQgMCx0aGlzLm1taW49dm9pZCAwLHRoaXMubW1heD12b2lkIDB9fWZ1bmN0aW9uIG0odCxzLGkpe2NvbnN0IG49dC5oYXNaKHMpLGU9dC5oYXNNKHMpLG89bmV3IHgodC5nZXRYTWluKHMpLHQuZ2V0WU1pbihzKSx0LmdldFhNYXgocyksdC5nZXRZTWF4KHMpLGkpO2lmKG4pe2NvbnN0IGk9dC5nZXRaRXh0ZW50KHMpO28uem1pbj1pLnZtaW4sby56bWF4PWkudm1heH1pZihlKXtjb25zdCBpPXQuZ2V0TUV4dGVudChzKTtvLm1taW49aS52bWluLG8ubW1heD1pLnZtYXh9cmV0dXJuIG99ZXhwb3J0e3QgYXMganNvbkFkYXB0ZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRFeHByZXNzaW9uRnJvbUZpZWxkTmFtZSBhcyB0LGdldFdoZXJlQ2xhdXNlIGFzIGUsZ2V0QWxpYXNGcm9tRmllbGROYW1lIGFzIGl9ZnJvbVwiLi9hdHRyaWJ1dGVTdXBwb3J0LmpzXCI7aW1wb3J0e2dldEdlb21ldHJ5IGFzIHN9ZnJvbVwiLi9nZW9tZXRyeVV0aWxzLmpzXCI7aW1wb3J0e2lzRGF0ZU9ubHlGaWVsZCBhcyBhLGlzVGltZXN0YW1wT2Zmc2V0RmllbGQgYXMgbCxpc1RpbWVPbmx5RmllbGQgYXMgcn1mcm9tXCIuLi8uLi9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7dGltZU9ubHlUb01pbGxpc2Vjb25kcyBhcyBufWZyb21cIi4uLy4uLy4uL3NtYXJ0TWFwcGluZy9zdGF0aXN0aWNzL3N1cHBvcnQvdXRpbHMuanNcIjtpbXBvcnR7cHJvY2Vzc051bGxWYWx1ZSBhcyB1LGdldE5vcm1hbGl6ZWRWYWx1ZSBhcyBvfWZyb21cIi4uLy4uLy4uL3N0YXRpc3RpY3MvdXRpbHMuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBkfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtjbGFzcyBje2NvbnN0cnVjdG9yKHMsYSxsKXt0aGlzLl9maWVsZERhdGFDYWNoZT1uZXcgTWFwLHRoaXMuX3JldHVybkRpc3RpbmN0TWFwPW5ldyBNYXAsdGhpcy5yZXR1cm5EaXN0aW5jdFZhbHVlcz1zLnJldHVybkRpc3RpbmN0VmFsdWVzPz8hMSx0aGlzLmZpZWxkc0luZGV4PWwsdGhpcy5mZWF0dXJlQWRhcHRlcj1hO2NvbnN0IHI9cy5vdXRGaWVsZHM7aWYociYmIXIuaW5jbHVkZXMoXCIqXCIpKXt0aGlzLm91dEZpZWxkcz1yO2xldCBzPTA7Zm9yKGNvbnN0IGEgb2Ygcil7Y29uc3Qgcj10KGEpLG49dGhpcy5maWVsZHNJbmRleC5nZXQociksdT1uP251bGw6ZShyLGwpLG89bj9uLm5hbWU6aShhKXx8XCJGSUVMRF9FWFBfXCIrcysrO3RoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChhLHthbGlhczpvLGNsYXVzZTp1fSl9fX1jb3VudERpc3RpbmN0VmFsdWVzKHQpe3JldHVybiB0aGlzLnJldHVybkRpc3RpbmN0VmFsdWVzPyh0LmZvckVhY2goKHQ9PnRoaXMuZ2V0QXR0cmlidXRlcyh0KSkpLHRoaXMuX3JldHVybkRpc3RpbmN0TWFwLnNpemUpOnQubGVuZ3RofWdldEF0dHJpYnV0ZXModCl7Y29uc3QgZT10aGlzLl9wcm9jZXNzQXR0cmlidXRlc0Zvck91dEZpZWxkcyh0KTtyZXR1cm4gdGhpcy5fcHJvY2Vzc0F0dHJpYnV0ZXNGb3JEaXN0aW5jdFZhbHVlcyhlKX1nZXRGaWVsZFZhbHVlKHQsaSxzKXtjb25zdCBhPXM/cy5uYW1lOmk7bGV0IGw9bnVsbDtyZXR1cm4gdGhpcy5fZmllbGREYXRhQ2FjaGUuaGFzKGEpP2w9dGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KGEpPy5jbGF1c2U6c3x8KGw9ZShpLHRoaXMuZmllbGRzSW5kZXgpLHRoaXMuX2ZpZWxkRGF0YUNhY2hlLnNldChhLHthbGlhczphLGNsYXVzZTpsfSkpLHM/dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGUodCxhKTpsPy5jYWxjdWxhdGVWYWx1ZSh0LHRoaXMuZmVhdHVyZUFkYXB0ZXIpfWdldERhdGFWYWx1ZXModCxlLGk9ITApe2NvbnN0IHM9ZS5ub3JtYWxpemF0aW9uVHlwZSxkPWUubm9ybWFsaXphdGlvblRvdGFsLGM9dGhpcy5maWVsZHNJbmRleC5nZXQoZS5maWVsZCksaD1hKGMpfHxsKGMpLGY9cihjKTtyZXR1cm4gdC5tYXAoKHQ9PntsZXQgYT1lLmZpZWxkJiZ0aGlzLmdldEZpZWxkVmFsdWUodCxlLmZpZWxkLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUuZmllbGQpKTtpZihlLmZpZWxkMj8oYT1gJHt1KGEpfSR7ZS5maWVsZERlbGltaXRlcn0ke3UodGhpcy5nZXRGaWVsZFZhbHVlKHQsZS5maWVsZDIsdGhpcy5maWVsZHNJbmRleC5nZXQoZS5maWVsZDIpKSl9YCxlLmZpZWxkMyYmKGE9YCR7YX0ke2UuZmllbGREZWxpbWl0ZXJ9JHt1KHRoaXMuZ2V0RmllbGRWYWx1ZSh0LGUuZmllbGQzLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUuZmllbGQzKSkpfWApKTpcInN0cmluZ1wiPT10eXBlb2YgYSYmaSYmKGg/YT1hP25ldyBEYXRlKGEpLmdldFRpbWUoKTpudWxsOmYmJihhPWE/bihhKTpudWxsKSkscyYmTnVtYmVyLmlzRmluaXRlKGEpKXtjb25zdCBpPVwiZmllbGRcIj09PXMmJmUubm9ybWFsaXphdGlvbkZpZWxkP3RoaXMuZ2V0RmllbGRWYWx1ZSh0LGUubm9ybWFsaXphdGlvbkZpZWxkLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUubm9ybWFsaXphdGlvbkZpZWxkKSk6bnVsbDthPW8oYSxzLGksZCl9cmV0dXJuIGF9KSl9YXN5bmMgZ2V0RXhwcmVzc2lvblZhbHVlcyh0LGUsaSxhLGwpe2NvbnN0e2FyY2FkZVV0aWxzOnJ9PWF3YWl0IGQoKSxuPXIuaGFzR2VvbWV0cnlPcGVyYXRpb25zKGUpO24mJmF3YWl0IHIuZW5hYmxlR2VvbWV0cnlPcGVyYXRpb25zKCk7Y29uc3QgdT1yLmNyZWF0ZUZ1bmN0aW9uKGUpLG89ci5nZXRWaWV3SW5mbyhpKSxjPXtmaWVsZHM6dGhpcy5maWVsZHNJbmRleC5maWVsZHN9O3JldHVybiB0Lm1hcCgodD0+e2NvbnN0IGU9e2F0dHJpYnV0ZXM6dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGVzKHQpLGxheWVyOmMsZ2VvbWV0cnk6bj97Li4ucyhhLmdlb21ldHJ5VHlwZSxhLmhhc1osYS5oYXNNLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0R2VvbWV0cnkodCkpLHNwYXRpYWxSZWZlcmVuY2U6aT8uc3BhdGlhbFJlZmVyZW5jZX06bnVsbH0sZD1yLmNyZWF0ZUV4ZWNDb250ZXh0KGUsbyxsKTtyZXR1cm4gci5leGVjdXRlRnVuY3Rpb24odSxkKX0pKX12YWxpZGF0ZUl0ZW0odCxpKXtyZXR1cm4gdGhpcy5fZmllbGREYXRhQ2FjaGUuaGFzKGkpfHx0aGlzLl9maWVsZERhdGFDYWNoZS5zZXQoaSx7YWxpYXM6aSxjbGF1c2U6ZShpLHRoaXMuZmllbGRzSW5kZXgpfSksdGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KGkpPy5jbGF1c2U/LnRlc3RGZWF0dXJlKHQsdGhpcy5mZWF0dXJlQWRhcHRlcik/PyExfXZhbGlkYXRlSXRlbXModCxpKXtyZXR1cm4gdGhpcy5fZmllbGREYXRhQ2FjaGUuaGFzKGkpfHx0aGlzLl9maWVsZERhdGFDYWNoZS5zZXQoaSx7YWxpYXM6aSxjbGF1c2U6ZShpLHRoaXMuZmllbGRzSW5kZXgpfSksdGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KGkpPy5jbGF1c2U/LnRlc3RTZXQodCx0aGlzLmZlYXR1cmVBZGFwdGVyKT8/ITF9X3Byb2Nlc3NBdHRyaWJ1dGVzRm9yT3V0RmllbGRzKHQpe2NvbnN0IGU9dGhpcy5vdXRGaWVsZHM7aWYoIWU/Lmxlbmd0aClyZXR1cm4gdGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGVzKHQpO2NvbnN0IGk9e307Zm9yKGNvbnN0IHMgb2YgZSl7Y29uc3R7YWxpYXM6ZSxjbGF1c2U6YX09dGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KHMpO2lbZV09YT9hLmNhbGN1bGF0ZVZhbHVlKHQsdGhpcy5mZWF0dXJlQWRhcHRlcik6dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGUodCxlKX1yZXR1cm4gaX1fcHJvY2Vzc0F0dHJpYnV0ZXNGb3JEaXN0aW5jdFZhbHVlcyh0KXtpZihudWxsPT10fHwhdGhpcy5yZXR1cm5EaXN0aW5jdFZhbHVlcylyZXR1cm4gdDtjb25zdCBlPXRoaXMub3V0RmllbGRzLGk9W107aWYoZSlmb3IoY29uc3QgbCBvZiBlKXtjb25zdHthbGlhczplfT10aGlzLl9maWVsZERhdGFDYWNoZS5nZXQobCk7aS5wdXNoKHRbZV0pfWVsc2UgZm9yKGNvbnN0IGwgaW4gdClpLnB1c2godFtsXSk7Y29uc3Qgcz1gJHsoZXx8W1wiKlwiXSkuam9pbihcIixcIil9PSR7aS5qb2luKFwiLFwiKX1gO2xldCBhPXRoaXMuX3JldHVybkRpc3RpbmN0TWFwLmdldChzKXx8MDtyZXR1cm4gdGhpcy5fcmV0dXJuRGlzdGluY3RNYXAuc2V0KHMsKythKSxhPjE/bnVsbDp0fX1leHBvcnR7YyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7UG9zaXRpb25IaW50IGFzIGUsaW5kZXhPZiBhcyB0fWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7aXNTZXJpYWxpemFibGUgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL0pTT05TdXBwb3J0LmpzXCI7aW1wb3J0e2Nsb25lIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e3JlbW92ZU1heWJlIGFzIGEsZGVzdHJveU1heWJlIGFzIG59ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtNZW1DYWNoZVN0b3JhZ2UgYXMgdSxNZW1DYWNoZSBhcyBsfWZyb21cIi4uLy4uLy4uL2NvcmUvTWVtQ2FjaGUuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtnZXRNZXRlcnNQZXJVbml0Rm9yU1IgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtnZXRUcmFuc2Zvcm1hdGlvbiBhcyBjfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24uanNcIjtpbXBvcnR7c2V0IGFzIG0sbmVnYXRpdmVJbmZpbml0eSBhcyB5LGNyZWF0ZSBhcyBmLGV4cGFuZFdpdGhBQUJCIGFzIHB9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2Zyb21WYWx1ZXMgYXMgZCxjcmVhdGUgYXMgZ31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2dldEJvdW5kc1hZIGFzIHh9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9ib3VuZHNVdGlscy5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBfLGlzRXh0ZW50IGFzIHcsaXNQb2x5Z29uIGFzIEZ9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnR7bm9ybWFsaXplQ2VudHJhbE1lcmlkaWFuIGFzIFN9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9ub3JtYWxpemVVdGlscy5qc1wiO2ltcG9ydHtlcXVhbHMgYXMgUixpc1ZhbGlkIGFzIFF9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Y29udmVydEZyb21HZW9tZXRyeSBhcyBJfWZyb21cIi4uL2ZlYXR1cmVDb252ZXJzaW9uVXRpbHMuanNcIjtpbXBvcnR7Z2V0V2hlcmVDbGF1c2UgYXMgan1mcm9tXCIuL2F0dHJpYnV0ZVN1cHBvcnQuanNcIjtpbXBvcnR7Y2xlYW5Gcm9tR2VvbWV0cnlFbmdpbmUgYXMgRSxnZXRHZW9tZXRyeSBhcyBifWZyb21cIi4vZ2VvbWV0cnlVdGlscy5qc1wiO2ltcG9ydHtjaGVja1Byb2plY3Rpb25TdXBwb3J0IGFzIEEscHJvamVjdCBhcyBULHByb2plY3RNYW55IGFzIHZ9ZnJvbVwiLi9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHtxdWVyeUNhcGFiaWxpdGllcyBhcyBDfWZyb21cIi4vUXVlcnlFbmdpbmVDYXBhYmlsaXRpZXMuanNcIjtpbXBvcnR7UXVlcnlFbmdpbmVSZXN1bHQgYXMgTX1mcm9tXCIuL1F1ZXJ5RW5naW5lUmVzdWx0LmpzXCI7aW1wb3J0e3F1ZXJ5RW5naW5lRW1wdHlSZXN1bHQgYXMgRyxub3JtYWxpemVRdWVyeUxpa2UgYXMgTyxub3JtYWxpemVRdWVyeSBhcyBQfWZyb21cIi4vcXVlcnlVdGlscy5qc1wiO2ltcG9ydHt2YWxpZGF0ZVF1ZXJ5IGFzIHosdmFsaWRhdGVTdGF0aXN0aWNzUXVlcnkgYXMgQn1mcm9tXCIuL3F1ZXJ5VmFsaWRhdGlvblV0aWxzLmpzXCI7aW1wb3J0e2dldFNwYXRpYWxRdWVyeU9wZXJhdG9yIGFzIHEsY2FuUXVlcnlXaXRoUkJ1c2ggYXMga31mcm9tXCIuL3NwYXRpYWxRdWVyeVN1cHBvcnQuanNcIjtpbXBvcnR7Z2V0VGltZUV4dGVudCBhcyBVLGdldFRpbWVPcGVyYXRvciBhcyBafWZyb21cIi4vdGltZVN1cHBvcnQuanNcIjtpbXBvcnQgSCBmcm9tXCIuLi8uLi9zdXBwb3J0L0ZpZWxkc0luZGV4LmpzXCI7aW1wb3J0e25vQnVkZ2V0IGFzIEp9ZnJvbVwiLi4vLi4vLi4vdmlld3Mvc3VwcG9ydC9TY2hlZHVsZXIuanNcIjtjb25zdCBOPVwidW5zdXBwb3J0ZWQtcXVlcnlcIjtjbGFzcyBMe2NvbnN0cnVjdG9yKGUsdD1udWxsLGkscyxyKXt0aGlzLmF0dHJpYnV0ZXM9ZSx0aGlzLmdlb21ldHJ5PWksdGhpcy5jZW50cm9pZD1zLHRoaXMuZmlsdGVyRmxhZ3M9cix0aGlzLmdyb3VwSWQ9LTEsdGhpcy5kaXNwbGF5SWQ9dH19Y29uc3QgVj1uZXcgdSgyZTYpO2xldCBEPTA7Y2xhc3MgV3tjb25zdHJ1Y3RvcihlKXt0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGU9bnVsbCx0aGlzLl9jaGFuZ2VIYW5kbGU9bnVsbCx0aGlzLmNhcGFiaWxpdGllcz17cXVlcnk6Q30sdGhpcy5nZW9tZXRyeVR5cGU9ZS5nZW9tZXRyeVR5cGUsdGhpcy5oYXNNPSEhZS5oYXNNLHRoaXMuaGFzWj0hIWUuaGFzWix0aGlzLm9iamVjdElkRmllbGQ9ZS5vYmplY3RJZEZpZWxkLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1lLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5kZWZpbml0aW9uRXhwcmVzc2lvbj1lLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuZmVhdHVyZVN0b3JlPWUuZmVhdHVyZVN0b3JlLHRoaXMuYWdncmVnYXRlQWRhcHRlcj1lLmFnZ3JlZ2F0ZUFkYXB0ZXIsdGhpcy5fY2hhbmdlSGFuZGxlPXRoaXMuZmVhdHVyZVN0b3JlLmV2ZW50cy5vbihcImNoYW5nZWRcIiwoKCk9PnRoaXMuY2xlYXJDYWNoZSgpKSksdGhpcy50aW1lSW5mbz1lLnRpbWVJbmZvLGUuY2FjaGVTcGF0aWFsUXVlcmllcyYmKHRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZT1uZXcgbChEKysrXCIkJFwiLFYpKSx0aGlzLmZpZWxkc0luZGV4PXMoZS5maWVsZHNJbmRleCk/ZS5maWVsZHNJbmRleDpILmZyb21KU09OKGUuZmllbGRzSW5kZXgpLHRoaXMuYXZhaWxhYmxlRmllbGRzPW51bGw9PWUuYXZhaWxhYmxlRmllbGRzP25ldyBTZXQodGhpcy5maWVsZHNJbmRleC5maWVsZHMubWFwKChlPT5lLm5hbWUpKSk6bmV3IFNldChlLmF2YWlsYWJsZUZpZWxkcy5tYXAoKGU9PnRoaXMuZmllbGRzSW5kZXguZ2V0KGUpPy5uYW1lKSkuZmlsdGVyKChlPT5udWxsIT1lKSkpLGUuc2NoZWR1bGVyJiZlLnByaW9yaXR5JiYodGhpcy5fZnJhbWVUYXNrPWUuc2NoZWR1bGVyLnJlZ2lzdGVyVGFzayhlLnByaW9yaXR5KSl9ZGVzdHJveSgpe3RoaXMuX2ZyYW1lVGFzaz1hKHRoaXMuX2ZyYW1lVGFzayksdGhpcy5jbGVhckNhY2hlKCksbih0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGUpLHRoaXMuX2NoYW5nZUhhbmRsZT1hKHRoaXMuX2NoYW5nZUhhbmRsZSl9Z2V0IGZlYXR1cmVBZGFwdGVyKCl7cmV0dXJuIHRoaXMuZmVhdHVyZVN0b3JlLmZlYXR1cmVBZGFwdGVyfWNsZWFyQ2FjaGUoKXt0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGU/LmNsZWFyKCksdGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlPW51bGwsdGhpcy5fdGltZUV4dGVudFByb21pc2U9bnVsbCx0aGlzLl9mdWxsRXh0ZW50UHJvbWlzZT1udWxsfWFzeW5jIGV4ZWN1dGVRdWVyeShlLHQpe3RyeXtyZXR1cm4oYXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5KGUse30sdCkpLmNyZWF0ZVF1ZXJ5UmVzcG9uc2UoKX1jYXRjaChpKXtpZihpIT09Ryl0aHJvdyBpO3JldHVybiBuZXcgTShbXSxlLHRoaXMpLmNyZWF0ZVF1ZXJ5UmVzcG9uc2UoKX19YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yQ291bnQoZT17fSx0KXt0cnl7cmV0dXJuKGF3YWl0IHRoaXMuX2V4ZWN1dGVRdWVyeShlLHtyZXR1cm5HZW9tZXRyeTohMSxyZXR1cm5DZW50cm9pZDohMSxvdXRTUjpudWxsfSx0KSkuY3JlYXRlUXVlcnlSZXNwb25zZUZvckNvdW50KCl9Y2F0Y2goaSl7aWYoaSE9PUcpdGhyb3cgaTtyZXR1cm4gMH19YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yRXh0ZW50KGUsdCl7Y29uc3QgaT1lLm91dFNSO3RyeXtjb25zdCBzPWF3YWl0IHRoaXMuX2V4ZWN1dGVRdWVyeShlLHtyZXR1cm5HZW9tZXRyeTohMCxyZXR1cm5DZW50cm9pZDohMSxvdXRTUjpudWxsfSx0KSxyPXMuc2l6ZTtpZighcilyZXR1cm57Y291bnQ6MCxleHRlbnQ6bnVsbH07cmV0dXJue2NvdW50OnIsZXh0ZW50OmF3YWl0IHRoaXMuX2dldEJvdW5kcyhzLml0ZW1zLHMuc3BhdGlhbFJlZmVyZW5jZSxpfHx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpfX1jYXRjaChzKXtpZihzPT09RylyZXR1cm57Y291bnQ6MCxleHRlbnQ6bnVsbH07dGhyb3cgc319YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9ySWRzKGUsdCl7cmV0dXJuIHRoaXMuZXhlY3V0ZVF1ZXJ5Rm9ySWRTZXQoZSx0KS50aGVuKChlPT5BcnJheS5mcm9tKGUpKSl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9ySWRTZXQoZSx0KXt0cnl7Y29uc3QgaT1hd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7cmV0dXJuR2VvbWV0cnk6ITAscmV0dXJuQ2VudHJvaWQ6ITEsb3V0U1I6bnVsbH0sdCkscz1pLml0ZW1zLHI9bmV3IFNldDtyZXR1cm4gYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9Pntmb3IoY29uc3QgZSBvZiBzKXIuYWRkKGkuZmVhdHVyZUFkYXB0ZXIuZ2V0T2JqZWN0SWQoZSkpfSksdCkscn1jYXRjaChpKXtpZihpPT09RylyZXR1cm4gbmV3IFNldDt0aHJvdyBpfX1hc3luYyBleGVjdXRlUXVlcnlGb3JTbmFwcGluZyhlLHQpe2NvbnN0e3BvaW50OmksZGlzdGFuY2U6cyxyZXR1cm5FZGdlOmEsdmVydGV4TW9kZTpufT1lO2lmKCFhJiZcIm5vbmVcIj09PW4pcmV0dXJue2NhbmRpZGF0ZXM6W119O2xldCB1PXIoZS5xdWVyeSk7dT1hd2FpdCB0aGlzLl9zY2hlZHVsZSgoKCk9Pk8odSx0aGlzLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpLHQpLHU9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnoodSx7YXZhaWxhYmxlRmllbGRzOnRoaXMuYXZhaWxhYmxlRmllbGRzLGZpZWxkc0luZGV4OnRoaXMuZmllbGRzSW5kZXgsZ2VvbWV0cnlUeXBlOnRoaXMuZ2VvbWV0cnlUeXBlLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlfSkpLHQpO2NvbnN0IGw9IVIoaS5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7bCYmYXdhaXQgQShpLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTtjb25zdCBvPVwibnVtYmVyXCI9PXR5cGVvZiBzP3M6cy54LGg9XCJudW1iZXJcIj09dHlwZW9mIHM/czpzLnksYz17eG1pbjppLngtbyx4bWF4OmkueCtvLHltaW46aS55LWgseW1heDppLnkraCxzcGF0aWFsUmVmZXJlbmNlOmkuc3BhdGlhbFJlZmVyZW5jZX0sbT1sP1QoYyx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpOmM7aWYoIW0pcmV0dXJue2NhbmRpZGF0ZXM6W119O2NvbnN0IHk9KGF3YWl0IFMoXyhpKSxudWxsLHtzaWduYWw6dH0pKVswXSxmPShhd2FpdCBTKF8obSksbnVsbCx7c2lnbmFsOnR9KSlbMF07aWYobnVsbD09eXx8bnVsbD09ZilyZXR1cm57Y2FuZGlkYXRlczpbXX07Y29uc3QgcD1uZXcgTShhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fc2VhcmNoRmVhdHVyZXModGhpcy5fZ2V0UXVlcnlCQm94ZXMoZi50b0pTT04oKSkpKSx0KSx1LHRoaXMpO2F3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlT2JqZWN0SWRzUXVlcnkocCkpLHQpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlVGltZVF1ZXJ5KHApKSx0KSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShwKSksdCksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVHZW9tZXRyeVF1ZXJ5Rm9yU25hcHBpbmcocCx0KSksdCk7Y29uc3QgZD15LnRvSlNPTigpLGc9bD9UKGQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTpkLHg9bD9NYXRoLm1heChtLnhtYXgtbS54bWluLG0ueW1heC1tLnltaW4pLzI6cztyZXR1cm4gcC5jcmVhdGVTbmFwcGluZ1Jlc3BvbnNlKHsuLi5lLHBvaW50OmcsZGlzdGFuY2U6eH0saS5zcGF0aWFsUmVmZXJlbmNlKX1hc3luYyBleGVjdXRlUXVlcnlGb3JMYXRlc3RPYnNlcnZhdGlvbnMoZSx0KXtpZighdGhpcy50aW1lSW5mbz8udHJhY2tJZEZpZWxkKXRocm93IG5ldyBpKE4sXCJNaXNzaW5nIHRpbWVJbmZvIG9yIHRpbWVJbmZvLnRyYWNrSWRGaWVsZFwiLHtxdWVyeTplLHRpbWVJbmZvOnRoaXMudGltZUluZm99KTt0cnl7Y29uc3QgaT1hd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7fSx0KTtyZXR1cm4gYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2ZpbHRlckxhdGVzdChpKSksdCksaS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9Y2F0Y2gocyl7aWYocyE9PUcpdGhyb3cgcztyZXR1cm4gbmV3IE0oW10sZSx0aGlzKS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvclN1bW1hcnlTdGF0aXN0aWNzKGU9e30sdCxpKXtjb25zdHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfT10O3JldHVybihhd2FpdCB0aGlzLl9leGVjdXRlUXVlcnlGb3JTdGF0aXN0aWNzKGUse2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9LGkpKS5jcmVhdGVTdW1tYXJ5U3RhdGlzdGljc1Jlc3BvbnNlKHQpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvclVuaXF1ZVZhbHVlcyhlPXt9LHQsaSl7Y29uc3R7ZmllbGQ6cyxmaWVsZDI6cixmaWVsZDM6YSx2YWx1ZUV4cHJlc3Npb246bn09dDtyZXR1cm4oYXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5Rm9yU3RhdGlzdGljcyhlLHtmaWVsZDpzLGZpZWxkMjpyLGZpZWxkMzphLHZhbHVlRXhwcmVzc2lvbjpufSxpKSkuY3JlYXRlVW5pcXVlVmFsdWVzUmVzcG9uc2UodCl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yQ2xhc3NCcmVha3MoZT17fSx0LGkpe2NvbnN0e2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9PXQ7cmV0dXJuKGF3YWl0IHRoaXMuX2V4ZWN1dGVRdWVyeUZvclN0YXRpc3RpY3MoZSx7ZmllbGQ6cyxub3JtYWxpemF0aW9uRmllbGQ6cix2YWx1ZUV4cHJlc3Npb246YX0saSkpLmNyZWF0ZUNsYXNzQnJlYWtzUmVzcG9uc2UodCl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9ySGlzdG9ncmFtKGU9e30sdCxpKXtjb25zdHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfT10O3JldHVybihhd2FpdCB0aGlzLl9leGVjdXRlUXVlcnlGb3JTdGF0aXN0aWNzKGUse2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9LGkpKS5jcmVhdGVIaXN0b2dyYW1SZXNwb25zZSh0KX1hc3luYyBmZXRjaFJlY29tcHV0ZWRFeHRlbnRzKGUpe3RoaXMuX3RpbWVFeHRlbnRQcm9taXNlfHw9VSh0aGlzLnRpbWVJbmZvLHRoaXMuZmVhdHVyZVN0b3JlKTtjb25zdFt0LGldPWF3YWl0IFByb21pc2UuYWxsKFt0aGlzLl9nZXRGdWxsRXh0ZW50KCksdGhpcy5fdGltZUV4dGVudFByb21pc2VdKTtyZXR1cm4gbyhlKSx7ZnVsbEV4dGVudDp0LHRpbWVFeHRlbnQ6aX19YXN5bmMgX2dldEJvdW5kcyhlLHQsaSl7Y29uc3Qgcz1tKGYoKSx5KTthd2FpdCB0aGlzLmZlYXR1cmVTdG9yZS5mb3JFYWNoQm91bmRzKGUsKGU9PnAocyxlKSkpO2NvbnN0IHI9e3htaW46c1swXSx5bWluOnNbMV0seG1heDpzWzNdLHltYXg6c1s0XSxzcGF0aWFsUmVmZXJlbmNlOkUodGhpcy5zcGF0aWFsUmVmZXJlbmNlKX07dGhpcy5oYXNaJiZpc0Zpbml0ZShzWzJdKSYmaXNGaW5pdGUoc1s1XSkmJihyLnptaW49c1syXSxyLnptYXg9c1s1XSk7Y29uc3QgYT1UKHIsdCxpKTtpZihhLnNwYXRpYWxSZWZlcmVuY2U9RShpKSxhLnhtYXgtYS54bWluPT0wKXtjb25zdCBlPWgoYS5zcGF0aWFsUmVmZXJlbmNlKTthLnhtaW4tPWUsYS54bWF4Kz1lfWlmKGEueW1heC1hLnltaW49PTApe2NvbnN0IGU9aChhLnNwYXRpYWxSZWZlcmVuY2UpO2EueW1pbi09ZSxhLnltYXgrPWV9aWYodGhpcy5oYXNaJiZudWxsIT1hLnptaW4mJm51bGwhPWEuem1heCYmYS56bWF4LWEuem1pbj09MCl7Y29uc3QgZT1oKGEuc3BhdGlhbFJlZmVyZW5jZSk7YS56bWluLT1lLGEuem1heCs9ZX1yZXR1cm4gYX1fZ2V0RnVsbEV4dGVudCgpe3JldHVybiB0aGlzLl9mdWxsRXh0ZW50UHJvbWlzZXx8PVwiZ2V0RnVsbEV4dGVudFwiaW4gdGhpcy5mZWF0dXJlU3RvcmUmJnRoaXMuZmVhdHVyZVN0b3JlLmdldEZ1bGxFeHRlbnQ/UHJvbWlzZS5yZXNvbHZlKHRoaXMuZmVhdHVyZVN0b3JlLmdldEZ1bGxFeHRlbnQodGhpcy5zcGF0aWFsUmVmZXJlbmNlKSk6dGhpcy5fZ2V0QWxsRmVhdHVyZXMoKS50aGVuKChlPT50aGlzLl9nZXRCb3VuZHMoZSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKSkpLHRoaXMuX2Z1bGxFeHRlbnRQcm9taXNlfWFzeW5jIF9zY2hlZHVsZShlLHQpe3JldHVybiBudWxsIT10aGlzLl9mcmFtZVRhc2s/dGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKGUsdCk6ZShKKX1hc3luYyBfcmVzY2hlZHVsZShlLHQpe3JldHVybiBudWxsIT10aGlzLl9mcmFtZVRhc2s/dGhpcy5fZnJhbWVUYXNrLnJlc2NoZWR1bGUoZSx0KTplKEopfWFzeW5jIF9nZXRBbGxGZWF0dXJlc1F1ZXJ5RW5naW5lUmVzdWx0KGUpe3JldHVybiBuZXcgTShhd2FpdCB0aGlzLl9nZXRBbGxGZWF0dXJlcygpLGUsdGhpcyl9YXN5bmMgX2dldEFsbEZlYXR1cmVzKCl7aWYobnVsbD09dGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlKXtjb25zdCBlPVtdO3RoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZT0oYXN5bmMoKT0+e2F3YWl0IHRoaXMuZmVhdHVyZVN0b3JlLmZvckVhY2goKHQ9PmUucHVzaCh0KSkpfSkoKS50aGVuKCgoKT0+ZSkpfWNvbnN0IGU9dGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlLHQ9YXdhaXQgZTtyZXR1cm4gZT09PXRoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZT90LnNsaWNlKCk6dGhpcy5fZ2V0QWxsRmVhdHVyZXMoKX1hc3luYyBfZXhlY3V0ZVF1ZXJ5KGUsdCxpKXtlPXIoZSksZT1hd2FpdCB0aGlzLl9zY2hlZHVsZSgoKCk9PlAoZSx0aGlzLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpLGkpLGU9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnooZSx7YXZhaWxhYmxlRmllbGRzOnRoaXMuYXZhaWxhYmxlRmllbGRzLGZpZWxkc0luZGV4OnRoaXMuZmllbGRzSW5kZXgsZ2VvbWV0cnlUeXBlOnRoaXMuZ2VvbWV0cnlUeXBlLHNwYXRpYWxSZWZlcmVuY2U6dGhpcy5zcGF0aWFsUmVmZXJlbmNlfSkpLGkpLGU9ey4uLmUsLi4udH07Y29uc3Qgcz1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZVNjZW5lRmlsdGVyUXVlcnkoZSxpKSksaSksYT1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUdlb21ldHJ5UXVlcnkoZSxzLGkpKSxpKTtyZXR1cm4gYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVBZ2dyZWdhdGVJZHNRdWVyeShhKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVPYmplY3RJZHNRdWVyeShhKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVUaW1lUXVlcnkoYSkpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlQXR0cmlidXRlc1F1ZXJ5KGEpKSxpKSxhfWFzeW5jIF9leGVjdXRlU2NlbmVGaWx0ZXJRdWVyeShlLHQpe2lmKG51bGw9PWUuc2NlbmVGaWx0ZXIpcmV0dXJuIG51bGw7Y29uc3R7b3V0U1I6aSxyZXR1cm5HZW9tZXRyeTpzLHJldHVybkNlbnRyb2lkOnJ9PWUsYT10aGlzLmZlYXR1cmVTdG9yZS5mZWF0dXJlU3BhdGlhbFJlZmVyZW5jZSxuPWUuc2NlbmVGaWx0ZXIuZ2VvbWV0cnksdT1udWxsPT1hfHxSKGEsbi5zcGF0aWFsUmVmZXJlbmNlKT9uOlQobixhKTtpZighdSlyZXR1cm4gbnVsbDtjb25zdCBsPXN8fHIsbz1RKGkpJiYhUih0aGlzLnNwYXRpYWxSZWZlcmVuY2UsaSkmJmw/YXN5bmMgZT0+dGhpcy5fcHJvamVjdChlLGkpOmU9PmUsaD10aGlzLmZlYXR1cmVBZGFwdGVyLGM9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX3NlYXJjaEZlYXR1cmVzKHRoaXMuX2dldFF1ZXJ5QkJveGVzKHUpKSksdCk7aWYoXCJkaXNqb2ludFwiPT09ZS5zY2VuZUZpbHRlci5zcGF0aWFsUmVsYXRpb25zaGlwKXtpZighYy5sZW5ndGgpcmV0dXJuIG51bGw7Y29uc3QgaT1uZXcgU2V0O2Zvcihjb25zdCBlIG9mIGMpaS5hZGQoaC5nZXRPYmplY3RJZChlKSk7Y29uc3Qgcz1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZ2V0QWxsRmVhdHVyZXMoKSksdCkscj1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKChhc3luYygpPT57Y29uc3Qgcj1hd2FpdCBxKFwiZXNyaVNwYXRpYWxSZWxEaXNqb2ludFwiLHUsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSksYT1lPT4haS5oYXMoaC5nZXRPYmplY3RJZChlKSl8fHIoaC5nZXRHZW9tZXRyeShlKSksbj1hd2FpdCB0aGlzLl9ydW5TcGF0aWFsRmlsdGVyKHMsYSx0KTtyZXR1cm4gbmV3IE0obixlLHRoaXMpfSksdCk7cmV0dXJuIG8ocil9aWYoIWMubGVuZ3RoKXJldHVybiBuZXcgTShbXSxlLHRoaXMpO2lmKHRoaXMuX2NhbkV4ZWN1dGVTaW5nbGVQYXNzKHUsZSkpcmV0dXJuIG8obmV3IE0oYyxlLHRoaXMpKTtjb25zdCBtPWF3YWl0IHEoXCJlc3JpU3BhdGlhbFJlbENvbnRhaW5zXCIsdSx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKSx5PWF3YWl0IHRoaXMuX3J1blNwYXRpYWxGaWx0ZXIoYywoZT0+bShoLmdldEdlb21ldHJ5KGUpKSksdCk7cmV0dXJuIG8obmV3IE0oeSxlLHRoaXMpKX1hc3luYyBfZXhlY3V0ZUdlb21ldHJ5UXVlcnkoaSxzLHIpe2lmKG51bGwhPXMmJjA9PT1zLml0ZW1zLmxlbmd0aClyZXR1cm4gcztpPW51bGwhPXM/cy5xdWVyeTppO2NvbnN0e2dlb21ldHJ5OmEsb3V0U1I6bixzcGF0aWFsUmVsOnUscmV0dXJuR2VvbWV0cnk6bCxyZXR1cm5DZW50cm9pZDpvfT1pLGg9dGhpcy5mZWF0dXJlU3RvcmUuZmVhdHVyZVNwYXRpYWxSZWZlcmVuY2UsYz0hYXx8bnVsbD09aHx8UihoLGEuc3BhdGlhbFJlZmVyZW5jZSk/YTpUKGEsaCksbT1sfHxvLHk9UShuKSYmIVIodGhpcy5zcGF0aWFsUmVmZXJlbmNlLG4pLGY9dGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlJiZudWxsPT1zP3kmJm0/SlNPTi5zdHJpbmdpZnkoe29yaWdpbmFsRmlsdGVyR2VvbWV0cnk6YSxzcGF0aWFsUmVsYXRpb25zaGlwOnUsb3V0U3BhdGlhbFJlZmVyZW5jZTpufSk6SlNPTi5zdHJpbmdpZnkoe29yaWdpbmFsRmlsdGVyR2VvbWV0cnk6YSxzcGF0aWFsUmVsYXRpb25zaGlwOnV9KTpudWxsLHA9Zj90aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGUuZ2V0KGYpOm51bGw7aWYobnVsbCE9cClyZXR1cm4gbmV3IE0ocCxpLHRoaXMpO2NvbnN0IGQ9YXN5bmMgZT0+KHkmJm0mJmF3YWl0IHRoaXMuX3Byb2plY3QoZSxuKSxmJiZ0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGUucHV0KGYsZS5pdGVtcyxlLml0ZW1zLmxlbmd0aCsxKSxlKTtpZighYylyZXR1cm4gZChudWxsIT1zP3M6YXdhaXQgdGhpcy5fZ2V0QWxsRmVhdHVyZXNRdWVyeUVuZ2luZVJlc3VsdChpKSk7Y29uc3QgZz10aGlzLmZlYXR1cmVBZGFwdGVyO2xldCB4PWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9zZWFyY2hGZWF0dXJlcyh0aGlzLl9nZXRRdWVyeUJCb3hlcyhhKSkpLHIpO2lmKFwiZXNyaVNwYXRpYWxSZWxEaXNqb2ludFwiPT09dSl7aWYoIXgubGVuZ3RoKXJldHVybiBkKG51bGwhPXM/czphd2FpdCB0aGlzLl9nZXRBbGxGZWF0dXJlc1F1ZXJ5RW5naW5lUmVzdWx0KGkpKTtjb25zdCBlPW5ldyBTZXQ7Zm9yKGNvbnN0IGkgb2YgeCllLmFkZChnLmdldE9iamVjdElkKGkpKTtjb25zdCB0PW51bGwhPXM/cy5pdGVtczphd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZ2V0QWxsRmVhdHVyZXMoKSksciksYT1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKChhc3luYygpPT57Y29uc3Qgcz1hd2FpdCBxKHUsYyx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKSxhPXQ9PiFlLmhhcyhnLmdldE9iamVjdElkKHQpKXx8cyhnLmdldEdlb21ldHJ5KHQpKSxuPWF3YWl0IHRoaXMuX3J1blNwYXRpYWxGaWx0ZXIodCxhLHIpO3JldHVybiBuZXcgTShuLGksdGhpcyl9KSxyKTtyZXR1cm4gZChhKX1pZihudWxsIT1zKXtjb25zdCBpPW5ldyBlO3g9eC5maWx0ZXIoKGU9PnQocy5pdGVtcyxlLHMuaXRlbXMubGVuZ3RoLGkpPj0wKSl9aWYoIXgubGVuZ3RoKXtjb25zdCBlPW5ldyBNKFtdLGksdGhpcyk7cmV0dXJuIGYmJnRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZS5wdXQoZixlLml0ZW1zLDEpLGV9aWYodGhpcy5fY2FuRXhlY3V0ZVNpbmdsZVBhc3MoYyxpKSlyZXR1cm4gZChuZXcgTSh4LGksdGhpcykpO2NvbnN0IF89YXdhaXQgcSh1LGMsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSksdz1hd2FpdCB0aGlzLl9ydW5TcGF0aWFsRmlsdGVyKHgsKGU9Pl8oZy5nZXRHZW9tZXRyeShlKSkpLHIpO3JldHVybiBkKG5ldyBNKHcsaSx0aGlzKSl9YXN5bmMgX2V4ZWN1dGVHZW9tZXRyeVF1ZXJ5Rm9yU25hcHBpbmcoZSx0KXtjb25zdHtxdWVyeTppfT1lLHtzcGF0aWFsUmVsOnN9PWk7aWYoIWU/Lml0ZW1zPy5sZW5ndGh8fCFpLmdlb21ldHJ5fHwhcylyZXR1cm47Y29uc3Qgcj1hd2FpdCBxKHMsaS5nZW9tZXRyeSx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNKSxhPWF3YWl0IHRoaXMuX3J1blNwYXRpYWxGaWx0ZXIoZS5pdGVtcywoZT0+cihlLmdlb21ldHJ5KSksdCk7ZS5pdGVtcz1hfV9leGVjdXRlQWdncmVnYXRlSWRzUXVlcnkoZSl7aWYoMD09PWUuaXRlbXMubGVuZ3RofHwhZS5xdWVyeS5hZ2dyZWdhdGVJZHM/Lmxlbmd0aHx8bnVsbD09dGhpcy5hZ2dyZWdhdGVBZGFwdGVyKXJldHVybjtjb25zdCB0PW5ldyBTZXQ7Zm9yKGNvbnN0IHMgb2YgZS5xdWVyeS5hZ2dyZWdhdGVJZHMpe3RoaXMuYWdncmVnYXRlQWRhcHRlci5nZXRGZWF0dXJlT2JqZWN0SWRzKHMpLmZvckVhY2goKGU9PnQuYWRkKGUpKSl9Y29uc3QgaT10aGlzLmZlYXR1cmVBZGFwdGVyLmdldE9iamVjdElkO2UuaXRlbXM9ZS5pdGVtcy5maWx0ZXIoKGU9PnQuaGFzKGkoZSkpKSl9X2V4ZWN1dGVPYmplY3RJZHNRdWVyeShlKXtpZigwPT09ZS5pdGVtcy5sZW5ndGh8fCFlLnF1ZXJ5Lm9iamVjdElkcz8ubGVuZ3RoKXJldHVybjtjb25zdCB0PW5ldyBTZXQoZS5xdWVyeS5vYmplY3RJZHMpLGk9dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRPYmplY3RJZDtlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKChlPT50LmhhcyhpKGUpKSkpfV9leGVjdXRlVGltZVF1ZXJ5KGUpe2lmKDA9PT1lLml0ZW1zLmxlbmd0aClyZXR1cm47Y29uc3QgdD1aKHRoaXMudGltZUluZm8sZS5xdWVyeS50aW1lRXh0ZW50LHRoaXMuZmVhdHVyZUFkYXB0ZXIpO251bGwhPXQmJihlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKHQpKX1fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShlKXtpZigwPT09ZS5pdGVtcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9aihlLnF1ZXJ5LndoZXJlLHRoaXMuZmllbGRzSW5kZXgpO2lmKHQpe2lmKCF0LmlzU3RhbmRhcmRpemVkKXRocm93IG5ldyBUeXBlRXJyb3IoXCJXaGVyZSBjbGF1c2UgaXMgbm90IHN0YW5kYXJkaXplZFwiKTtlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKChlPT50LnRlc3RGZWF0dXJlKGUsdGhpcy5mZWF0dXJlQWRhcHRlcikpKX19YXN5bmMgX3J1blNwYXRpYWxGaWx0ZXIoZSx0LGkpe2lmKCF0KXJldHVybiBlO2lmKG51bGw9PXRoaXMuX2ZyYW1lVGFzaylyZXR1cm4gZS5maWx0ZXIoKGU9PnQoZSkpKTtsZXQgcz0wO2NvbnN0IHI9bmV3IEFycmF5LGE9YXN5bmMgbj0+e2Zvcig7czxlLmxlbmd0aDspe2NvbnN0IHU9ZVtzKytdO3QodSkmJihyLnB1c2godSksbi5tYWRlUHJvZ3Jlc3MoKSksbi5kb25lJiZhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKChlPT5hKGUpKSxpKX19O3JldHVybiB0aGlzLl9yZXNjaGVkdWxlKChlPT5hKGUpKSxpKS50aGVuKCgoKT0+cikpfV9maWx0ZXJMYXRlc3QoZSl7Y29uc3R7dHJhY2tJZEZpZWxkOnQsc3RhcnRUaW1lRmllbGQ6aSxlbmRUaW1lRmllbGQ6c309dGhpcy50aW1lSW5mbyxyPXN8fGksYT1uZXcgTWFwLG49dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGU7Zm9yKGNvbnN0IHUgb2YgZS5pdGVtcyl7Y29uc3QgZT1uKHUsdCksaT1uKHUscikscz1hLmdldChlKTsoIXN8fGk+bihzLHIpKSYmYS5zZXQoZSx1KX1lLml0ZW1zPUFycmF5LmZyb20oYS52YWx1ZXMoKSl9X2NhbkV4ZWN1dGVTaW5nbGVQYXNzKGUsdCl7Y29uc3R7c3BhdGlhbFJlbDppfT10O3JldHVybiBrKGUpJiYoXCJlc3JpU3BhdGlhbFJlbEVudmVsb3BlSW50ZXJzZWN0c1wiPT09aXx8XCJlc3JpR2VvbWV0cnlQb2ludFwiPT09dGhpcy5nZW9tZXRyeVR5cGUmJihcImVzcmlTcGF0aWFsUmVsSW50ZXJzZWN0c1wiPT09aXx8XCJlc3JpU3BhdGlhbFJlbENvbnRhaW5zXCI9PT1pKSl9YXN5bmMgX3Byb2plY3QoZSx0KXtpZighdHx8Uih0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdCkpcmV0dXJuIGU7Y29uc3QgaT10aGlzLmZlYXR1cmVBZGFwdGVyO2xldCBzO3RyeXtjb25zdCBlPWF3YWl0IHRoaXMuX2dldEZ1bGxFeHRlbnQoKTtzPWModGhpcy5zcGF0aWFsUmVmZXJlbmNlLHQsZSl9Y2F0Y2h7fWNvbnN0IHI9YXdhaXQgdihlLml0ZW1zLm1hcCgoZT0+Yih0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNLGkuZ2V0R2VvbWV0cnkoZSkpKSksdGhpcy5zcGF0aWFsUmVmZXJlbmNlLHQscyk7cmV0dXJuIGUuaXRlbXM9ci5tYXAoKCh0LHMpPT5pLmNsb25lV2l0aEdlb21ldHJ5KGUuaXRlbXNbc10sSSh0LHRoaXMuaGFzWix0aGlzLmhhc00pKSkpLGV9X2dldFF1ZXJ5QkJveGVzKGUpe2lmKGsoZSkpe2lmKHcoZSkpcmV0dXJuW2QoTWF0aC5taW4oZS54bWluLGUueG1heCksTWF0aC5taW4oZS55bWluLGUueW1heCksTWF0aC5tYXgoZS54bWluLGUueG1heCksTWF0aC5tYXgoZS55bWluLGUueW1heCkpXTtpZihGKGUpKXJldHVybiBlLnJpbmdzLm1hcCgoZT0+ZChNYXRoLm1pbihlWzBdWzBdLGVbMl1bMF0pLE1hdGgubWluKGVbMF1bMV0sZVsyXVsxXSksTWF0aC5tYXgoZVswXVswXSxlWzJdWzBdKSxNYXRoLm1heChlWzBdWzFdLGVbMl1bMV0pKSkpfXJldHVyblt4KGcoKSxlKV19YXN5bmMgX3NlYXJjaEZlYXR1cmVzKGUpe2NvbnN0IHQ9bmV3IFNldDthd2FpdCBQcm9taXNlLmFsbChlLm1hcCgoZT0+dGhpcy5mZWF0dXJlU3RvcmUuZm9yRWFjaEluQm91bmRzKGUsKGU9PnQuYWRkKGUpKSkpKSk7Y29uc3QgaT1BcnJheS5mcm9tKHQudmFsdWVzKCkpO3JldHVybiB0LmNsZWFyKCksaX1hc3luYyBfZXhlY3V0ZVF1ZXJ5Rm9yU3RhdGlzdGljcyhlLHQsaSl7ZT1yKGUpO3RyeXtlPWF3YWl0IHRoaXMuX3NjaGVkdWxlKCgoKT0+UChlLHRoaXMuZGVmaW5pdGlvbkV4cHJlc3Npb24sdGhpcy5zcGF0aWFsUmVmZXJlbmNlKSksaSksZT1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+QihlLHQse2F2YWlsYWJsZUZpZWxkczp0aGlzLmF2YWlsYWJsZUZpZWxkcyxmaWVsZHNJbmRleDp0aGlzLmZpZWxkc0luZGV4LGdlb21ldHJ5VHlwZTp0aGlzLmdlb21ldHJ5VHlwZSxzcGF0aWFsUmVmZXJlbmNlOnRoaXMuc3BhdGlhbFJlZmVyZW5jZX0pKSxpKTtjb25zdCBzPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlU2NlbmVGaWx0ZXJRdWVyeShlLGkpKSxpKSxyPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlR2VvbWV0cnlRdWVyeShlLHMsaSkpLGkpO3JldHVybiBhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUFnZ3JlZ2F0ZUlkc1F1ZXJ5KHIpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZU9iamVjdElkc1F1ZXJ5KHIpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZVRpbWVRdWVyeShyKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVBdHRyaWJ1dGVzUXVlcnkocikpLGkpLHJ9Y2F0Y2gocyl7aWYocyE9PUcpdGhyb3cgcztyZXR1cm4gbmV3IE0oW10sZSx0aGlzKX19fWV4cG9ydHtMIGFzIEZlYXR1cmUsVyBhcyBRdWVyeUVuZ2luZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3QgdD17c3VwcG9ydHNTdGF0aXN0aWNzOiEwLHN1cHBvcnRzUGVyY2VudGlsZVN0YXRpc3RpY3M6ITAsc3VwcG9ydHNTcGF0aWFsQWdncmVnYXRpb25TdGF0aXN0aWNzOiExLHN1cHBvcnRlZFNwYXRpYWxBZ2dyZWdhdGlvblN0YXRpc3RpY3M6e2VudmVsb3BlOiExLGNlbnRyb2lkOiExLGNvbnZleEh1bGw6ITF9LHN1cHBvcnRzQ2VudHJvaWQ6ITAsc3VwcG9ydHNDYWNoZUhpbnQ6ITEsc3VwcG9ydHNEaXN0YW5jZTohMCxzdXBwb3J0c0Rpc3RpbmN0OiEwLHN1cHBvcnRzRXh0ZW50OiEwLHN1cHBvcnRzR2VvbWV0cnlQcm9wZXJ0aWVzOiExLHN1cHBvcnRzSGF2aW5nQ2xhdXNlOiEwLHN1cHBvcnRzT3JkZXJCeTohMCxzdXBwb3J0c1BhZ2luYXRpb246ITAsc3VwcG9ydHNRdWFudGl6YXRpb246ITAsc3VwcG9ydHNRdWFudGl6YXRpb25FZGl0TW9kZTohMSxzdXBwb3J0c1F1ZXJ5R2VvbWV0cnk6ITAsc3VwcG9ydHNSZXN1bHRUeXBlOiExLHN1cHBvcnRzU3FsRXhwcmVzc2lvbjohMCxzdXBwb3J0c01heFJlY29yZENvdW50RmFjdG9yOiExLHN1cHBvcnRzU3RhbmRhcmRpemVkUXVlcmllc09ubHk6ITAsc3VwcG9ydHNUb3BGZWF0dXJlc1F1ZXJ5OiExLHN1cHBvcnRzUXVlcnlCeUFub255bW91czohMCxzdXBwb3J0c1F1ZXJ5QnlPdGhlcnM6ITAsc3VwcG9ydHNIaXN0b3JpY01vbWVudDohMSxzdXBwb3J0c0Zvcm1hdFBCRjohMSxzdXBwb3J0c0Rpc2pvaW50U3BhdGlhbFJlbGF0aW9uc2hpcDohMCxzdXBwb3J0c0RlZmF1bHRTcGF0aWFsUmVmZXJlbmNlOiExLHN1cHBvcnRzRnVsbFRleHRTZWFyY2g6ITEsc3VwcG9ydHNDb21wYWN0R2VvbWV0cnk6ITEsbWF4UmVjb3JkQ291bnRGYWN0b3I6dm9pZCAwLG1heFJlY29yZENvdW50OnZvaWQgMCxzdGFuZGFyZE1heFJlY29yZENvdW50OnZvaWQgMCx0aWxlTWF4UmVjb3JkQ291bnQ6dm9pZCAwfTtleHBvcnR7dCBhcyBxdWVyeUNhcGFiaWxpdGllc307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2Nsb25lIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e3BvbHlnb25DZW50cm9pZCBhcyB0LGV4dGVudENlbnRyb2lkIGFzIHN9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9jZW50cm9pZC5qc1wiO2ltcG9ydHtnZXRQb2x5Z29uRXh0ZW50IGFzIGksZ2V0R2VvbWV0cnlFeHRlbnQgYXMgYX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2V4dGVudFV0aWxzLmpzXCI7aW1wb3J0e3RvUXVhbnRpemF0aW9uVHJhbnNmb3JtIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9xdWFudGl6YXRpb25VdGlscy5qc1wiO2ltcG9ydHtpc1ZhbGlkIGFzIG4sZXF1YWxzIGFzIG99ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnQgbCBmcm9tXCIuL0F0dHJpYnV0ZXNCdWlsZGVyLmpzXCI7aW1wb3J0e2NsZWFuRnJvbUdlb21ldHJ5RW5naW5lIGFzIHUsZ2V0R2VvbWV0cnkgYXMgYyx0cmFuc2Zvcm1DZW50cm9pZCBhcyBkfWZyb21cIi4vZ2VvbWV0cnlVdGlscy5qc1wiO2ltcG9ydHtwcm9qZWN0IGFzIG19ZnJvbVwiLi9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHttYWtlRWRnZUNhbmRpZGF0ZSBhcyBoLG1ha2VWZXJ0ZXhDYW5kaWRhdGUgYXMgZ31mcm9tXCIuL1NuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e2lzRGF0ZUZpZWxkIGFzIGYsaXNEYXRlT25seUZpZWxkIGFzIHAsaXNUaW1lc3RhbXBPZmZzZXRGaWVsZCBhcyB5LGlzU3RyaW5nRmllbGQgYXMgeCxpc1RpbWVPbmx5RmllbGQgYXMgSX1mcm9tXCIuLi8uLi9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7aXNOdWxsQ291bnRTdXBwb3J0ZWQgYXMgVCxjYWxjdWxhdGVTdHJpbmdTdGF0aXN0aWNzIGFzIFYsY2FsY3VsYXRlU3RhdGlzdGljcyBhcyBGLHByb2Nlc3NTdW1tYXJ5U3RhdGlzdGljc1Jlc3VsdCBhcyBTLGNhbGN1bGF0ZVVuaXF1ZVZhbHVlc0NvdW50IGFzIF8sY3JlYXRlVVZSZXN1bHQgYXMgdixjYWxjdWxhdGVDbGFzc0JyZWFrcyBhcyBiLHJlc29sdmVDQlJlc3VsdCBhcyBSLGNhbGN1bGF0ZUhpc3RvZ3JhbSBhcyBBLGdldEF0dHJpYnV0ZUNvbXBhcmF0b3IgYXMgeixjYWxjdWxhdGVQZXJjZW50aWxlIGFzIE19ZnJvbVwiLi4vLi4vLi4vc3RhdGlzdGljcy91dGlscy5qc1wiO2NsYXNzIHF7Y29uc3RydWN0b3IoZSx0LHMpe3RoaXMuaXRlbXM9ZSx0aGlzLnF1ZXJ5PXQsdGhpcy5nZW9tZXRyeVR5cGU9cy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNNPXMuaGFzTSx0aGlzLmhhc1o9cy5oYXNaLHRoaXMuZmllbGRzSW5kZXg9cy5maWVsZHNJbmRleCx0aGlzLm9iamVjdElkRmllbGQ9cy5vYmplY3RJZEZpZWxkLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1zLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5mZWF0dXJlQWRhcHRlcj1zLmZlYXR1cmVBZGFwdGVyfWdldCBzaXplKCl7cmV0dXJuIHRoaXMuaXRlbXMubGVuZ3RofWNyZWF0ZVF1ZXJ5UmVzcG9uc2VGb3JDb3VudCgpe2NvbnN0IGU9bmV3IGwodGhpcy5xdWVyeSx0aGlzLmZlYXR1cmVBZGFwdGVyLHRoaXMuZmllbGRzSW5kZXgpO2lmKCF0aGlzLnF1ZXJ5Lm91dFN0YXRpc3RpY3MpcmV0dXJuIGUuY291bnREaXN0aW5jdFZhbHVlcyh0aGlzLml0ZW1zKTtjb25zdHtncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljczp0LGhhdmluZzpzLG91dFN0YXRpc3RpY3M6aX09dGhpcy5xdWVyeSxhPXQ/Lmxlbmd0aDtpZighISFhKXJldHVybiAxO2NvbnN0IHI9bmV3IE1hcCxuPW5ldyBNYXAsbz1uZXcgU2V0O2Zvcihjb25zdCBsIG9mIGkpe2NvbnN0e3N0YXRpc3RpY1R5cGU6aX09bCxhPVwiZXhjZWVkc2xpbWl0XCIhPT1pP2wub25TdGF0aXN0aWNGaWVsZDp2b2lkIDA7aWYoIW4uaGFzKGEpKXtjb25zdCBzPVtdO2Zvcihjb25zdCBpIG9mIHQpe2NvbnN0IHQ9dGhpcy5fZ2V0QXR0cmlidXRlVmFsdWVzKGUsaSxyKTtzLnB1c2godCl9bi5zZXQoYSx0aGlzLl9jYWxjdWxhdGVVbmlxdWVWYWx1ZXMocyxlLnJldHVybkRpc3RpbmN0VmFsdWVzKSl9Y29uc3QgdT1uLmdldChhKTtmb3IoY29uc3QgdCBpbiB1KXtjb25zdHtkYXRhOmksaXRlbXM6YX09dVt0XSxyPWkuam9pbihcIixcIik7cyYmIWUudmFsaWRhdGVJdGVtcyhhLHMpfHxvLmFkZChyKX19cmV0dXJuIG8uc2l6ZX1hc3luYyBjcmVhdGVRdWVyeVJlc3BvbnNlKCl7bGV0IGU7aWYodGhpcy5xdWVyeS5vdXRTdGF0aXN0aWNzKXtlPXRoaXMucXVlcnkub3V0U3RhdGlzdGljcy5zb21lKChlPT5cImV4Y2VlZHNsaW1pdFwiPT09ZS5zdGF0aXN0aWNUeXBlKSk/dGhpcy5fY3JlYXRlRXhjZWVkc0xpbWl0UXVlcnlSZXNwb25zZSh0aGlzLnF1ZXJ5KTphd2FpdCB0aGlzLl9jcmVhdGVTdGF0aXN0aWNzUXVlcnlSZXNwb25zZSh0aGlzLnF1ZXJ5KX1lbHNlIGU9dGhpcy5fY3JlYXRlRmVhdHVyZVF1ZXJ5UmVzcG9uc2UodGhpcy5xdWVyeSk7aWYodGhpcy5xdWVyeS5yZXR1cm5RdWVyeUdlb21ldHJ5KXtjb25zdCB0PXRoaXMucXVlcnkuZ2VvbWV0cnk7bih0aGlzLnF1ZXJ5Lm91dFNSKSYmIW8odC5zcGF0aWFsUmVmZXJlbmNlLHRoaXMucXVlcnkub3V0U1IpP2UucXVlcnlHZW9tZXRyeT11KHtzcGF0aWFsUmVmZXJlbmNlOnRoaXMucXVlcnkub3V0U1IsLi4ubSh0LHQuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLnF1ZXJ5Lm91dFNSKX0pOmUucXVlcnlHZW9tZXRyeT11KHtzcGF0aWFsUmVmZXJlbmNlOnRoaXMucXVlcnkub3V0U1IsLi4udH0pfXJldHVybiBlfWNyZWF0ZVNuYXBwaW5nUmVzcG9uc2UoZSx0KXtjb25zdCBzPXRoaXMuZmVhdHVyZUFkYXB0ZXIsaT1DKHRoaXMuaGFzWix0aGlzLmhhc00pLHtwb2ludDphLG1vZGU6cn09ZSxuPVwibnVtYmVyXCI9PXR5cGVvZiBlLmRpc3RhbmNlP2UuZGlzdGFuY2U6ZS5kaXN0YW5jZS54LG89XCJudW1iZXJcIj09dHlwZW9mIGUuZGlzdGFuY2U/ZS5kaXN0YW5jZTplLmRpc3RhbmNlLnksbD17Y2FuZGlkYXRlczpbXX0sdT1cImVzcmlHZW9tZXRyeVBvbHlnb25cIj09PXRoaXMuZ2VvbWV0cnlUeXBlLGM9dGhpcy5fZ2V0UG9pbnRDcmVhdG9yKHIsdGhpcy5zcGF0aWFsUmVmZXJlbmNlLHQpLGQ9bmV3IEQobnVsbCwwKSxtPW5ldyBEKG51bGwsMCksZj17eDowLHk6MCx6OjB9O2Zvcihjb25zdCBwIG9mIHRoaXMuaXRlbXMpe2NvbnN0IHQ9cy5nZXRHZW9tZXRyeShwKTtpZihudWxsPT10KWNvbnRpbnVlO2NvbnN0e2Nvb3JkczpyLGxlbmd0aHM6eX09dDtpZihkLmNvb3Jkcz1yLG0uY29vcmRzPXIsZS5yZXR1cm5FZGdlKXtsZXQgZT0wO2ZvcihsZXQgdD0wO3Q8eS5sZW5ndGg7dCsrKXtjb25zdCByPXlbdF07Zm9yKGxldCB0PTA7dDxyO3QrKyxlKz1pKXtjb25zdCB1PWQ7aWYodS5jb29yZHNJbmRleD1lLHQhPT1yLTEpe2NvbnN0IHQ9bTt0LmNvb3Jkc0luZGV4PWUraTtjb25zdCByPWY7TihmLGEsdSx0KTtjb25zdCBkPShhLngtci54KS9uLGc9KGEueS1yLnkpL28seT1kKmQrZypnO3k8PTEmJmwuY2FuZGlkYXRlcy5wdXNoKGgocy5nZXRPYmplY3RJZChwKSxjKHIpLE1hdGguc3FydCh5KSxjKHUpLGModCkpKX19fX1pZihcIm5vbmVcIiE9PWUudmVydGV4TW9kZSl7Y29uc3QgdD11P3IubGVuZ3RoLWk6ci5sZW5ndGg7aWYoXCJhbGxcIj09PWUudmVydGV4TW9kZSlmb3IobGV0IGU9MDtlPHQ7ZSs9aSl7Y29uc3QgdD1kO3QuY29vcmRzSW5kZXg9ZTtjb25zdCBpPShhLngtdC54KS9uLHI9KGEueS10LnkpL28sdT1pKmkrcipyO3U8PTEmJmwuY2FuZGlkYXRlcy5wdXNoKGcocy5nZXRPYmplY3RJZChwKSxjKHQpLE1hdGguc3FydCh1KSkpfWVsc2UgaWYoXCJlbmRzXCI9PT1lLnZlcnRleE1vZGUpe2NvbnN0IGU9WzBdO3V8fGUucHVzaChyLmxlbmd0aC1pKTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPWQ7ZS5jb29yZHNJbmRleD10O2NvbnN0IGk9KGEueC1lLngpL24scj0oYS55LWUueSkvbyx1PWkqaStyKnI7dTw9MSYmbC5jYW5kaWRhdGVzLnB1c2goZyhzLmdldE9iamVjdElkKHApLGMoZSksTWF0aC5zcXJ0KHUpKSl9fX19cmV0dXJuIGwuY2FuZGlkYXRlcy5zb3J0KCgoZSx0KT0+ZS5kaXN0YW5jZS10LmRpc3RhbmNlKSksbH1fZ2V0UG9pbnRDcmVhdG9yKGUsdCxzKXtjb25zdCBpPW51bGw9PXN8fG8odCxzKT9lPT5lOmU9Pm0oZSx0LHMpLHtoYXNaOmF9PXRoaXMscj0wO3JldHVyblwiM2RcIj09PWU/YT8oe3g6ZSx5OnQsejpzfSk9Pmkoe3g6ZSx5OnQsejpzfSk6KHt4OmUseTp0fSk9Pmkoe3g6ZSx5OnQsejpyfSk6KHt4OmUseTp0fSk9Pmkoe3g6ZSx5OnR9KX1hc3luYyBjcmVhdGVTdW1tYXJ5U3RhdGlzdGljc1Jlc3BvbnNlKGUpe2NvbnN0e2ZpZWxkOnQsdmFsdWVFeHByZXNzaW9uOnMsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixtaW5WYWx1ZTpuLG1heFZhbHVlOm8sc2NhbGU6bCx0aW1lWm9uZTp1fT1lLGM9dGhpcy5maWVsZHNJbmRleC5nZXQodCksZD1mKGMpfHxwKGMpfHx5KGMpLG09YXdhaXQgdGhpcy5fZ2V0RGF0YVZhbHVlcyh7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLHNjYWxlOmwsdGltZVpvbmU6dX0pLGg9VCh7bm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uRmllbGQ6aSxtaW5WYWx1ZTpuLG1heFZhbHVlOm99KSxnPXt2YWx1ZTouNSxmaWVsZFR5cGU6Yz8udHlwZX0sST14KGMpP1Yoe3ZhbHVlczptLHN1cHBvcnRzTnVsbENvdW50OmgscGVyY2VudGlsZVBhcmFtczpnfSk6Rih7dmFsdWVzOm0sbWluVmFsdWU6bixtYXhWYWx1ZTpvLHVzZVNhbXBsZVN0ZERldjohYSxzdXBwb3J0c051bGxDb3VudDpoLHBlcmNlbnRpbGVQYXJhbXM6Z30pO3JldHVybiBTKEksZCl9YXN5bmMgY3JlYXRlVW5pcXVlVmFsdWVzUmVzcG9uc2UoZSl7Y29uc3R7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxkb21haW5zOmkscmV0dXJuQWxsQ29kZWRWYWx1ZXM6YSxzY2FsZTpyLHRpbWVab25lOm59PWUsbz1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LGZpZWxkMjplLmZpZWxkMixmaWVsZDM6ZS5maWVsZDMsZmllbGREZWxpbWl0ZXI6ZS5maWVsZERlbGltaXRlcix2YWx1ZUV4cHJlc3Npb246cyxzY2FsZTpyLHRpbWVab25lOm59LCExKSxsPV8obyk7cmV0dXJuIHYobCxpLGEsZS5maWVsZERlbGltaXRlcil9YXN5bmMgY3JlYXRlQ2xhc3NCcmVha3NSZXNwb25zZShlKXtjb25zdHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsY2xhc3NpZmljYXRpb25NZXRob2Q6bixzdGFuZGFyZERldmlhdGlvbkludGVydmFsOm8sbWluVmFsdWU6bCxtYXhWYWx1ZTp1LG51bUNsYXNzZXM6YyxzY2FsZTpkLHRpbWVab25lOm19PWUsaD1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsc2NhbGU6ZCx0aW1lWm9uZTptfSksZz1iKGgse2ZpZWxkOnQsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixjbGFzc2lmaWNhdGlvbk1ldGhvZDpuLHN0YW5kYXJkRGV2aWF0aW9uSW50ZXJ2YWw6byxtaW5WYWx1ZTpsLG1heFZhbHVlOnUsbnVtQ2xhc3NlczpjfSk7cmV0dXJuIFIoZyxuKX1hc3luYyBjcmVhdGVIaXN0b2dyYW1SZXNwb25zZShlKXtjb25zdHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsY2xhc3NpZmljYXRpb25NZXRob2Q6bixzdGFuZGFyZERldmlhdGlvbkludGVydmFsOm8sbWluVmFsdWU6bCxtYXhWYWx1ZTp1LG51bUJpbnM6YyxzY2FsZTpkLHRpbWVab25lOm19PWUsaD1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsc2NhbGU6ZCx0aW1lWm9uZTptfSk7cmV0dXJuIEEoaCx7ZmllbGQ6dCxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLGNsYXNzaWZpY2F0aW9uTWV0aG9kOm4sc3RhbmRhcmREZXZpYXRpb25JbnRlcnZhbDpvLG1pblZhbHVlOmwsbWF4VmFsdWU6dSxudW1CaW5zOmN9KX1fc29ydEZlYXR1cmVzKGUsdCxzKXtpZihlLmxlbmd0aD4xJiZ0Py5sZW5ndGgpZm9yKGNvbnN0IGkgb2YgdC5yZXZlcnNlKCkpe2NvbnN0IHQ9aS5zcGxpdChcIiBcIiksYT10WzBdLHI9dGhpcy5maWVsZHNJbmRleC5nZXQoYSksbj0hIXRbMV0mJlwiZGVzY1wiPT09dFsxXS50b0xvd2VyQ2FzZSgpLG89eihyPy50eXBlLG4pO2Uuc29ydCgoKGUsdCk9Pntjb25zdCBpPXMoZSxhLHIpLG49cyh0LGEscik7cmV0dXJuIG8oaSxuKX0pKX19X2NyZWF0ZUZlYXR1cmVRdWVyeVJlc3BvbnNlKGUpe2NvbnN0IHQ9dGhpcy5pdGVtcyx7Z2VvbWV0cnlUeXBlOnMsaGFzTTppLGhhc1o6YSxvYmplY3RJZEZpZWxkOm4sc3BhdGlhbFJlZmVyZW5jZTpvfT10aGlzLHtvdXRGaWVsZHM6bCxvdXRTUjpjLHF1YW50aXphdGlvblBhcmFtZXRlcnM6ZCxyZXN1bHRSZWNvcmRDb3VudDptLHJlc3VsdE9mZnNldDpoLHJldHVyblo6ZyxyZXR1cm5NOmZ9PWUscD1udWxsIT1tJiZ0Lmxlbmd0aD4oaHx8MCkrbSx5PWwmJihsLmluY2x1ZGVzKFwiKlwiKT9bLi4udGhpcy5maWVsZHNJbmRleC5maWVsZHNdOmwubWFwKChlPT50aGlzLmZpZWxkc0luZGV4LmdldChlKSkpKTtyZXR1cm57ZXhjZWVkZWRUcmFuc2ZlckxpbWl0OnAsZmVhdHVyZXM6dGhpcy5fY3JlYXRlRmVhdHVyZXMoZSx0KSxmaWVsZHM6eSxnZW9tZXRyeVR5cGU6cyxoYXNNOmkmJmYsaGFzWjphJiZnLG9iamVjdElkRmllbGROYW1lOm4sc3BhdGlhbFJlZmVyZW5jZTp1KGN8fG8pLHRyYW5zZm9ybTpkJiZyKGQpfHxudWxsfX1fY3JlYXRlRmVhdHVyZXMoZSx0KXtjb25zdCBzPW5ldyBsKGUsdGhpcy5mZWF0dXJlQWRhcHRlcix0aGlzLmZpZWxkc0luZGV4KSx7aGFzTTppLGhhc1o6YX09dGhpcyx7b3JkZXJCeUZpZWxkczpuLHF1YW50aXphdGlvblBhcmFtZXRlcnM6byxyZXR1cm5HZW9tZXRyeTp1LHJldHVybkNlbnRyb2lkOm0sbWF4QWxsb3dhYmxlT2Zmc2V0OmgscmVzdWx0T2Zmc2V0OmcscmVzdWx0UmVjb3JkQ291bnQ6ZixyZXR1cm5aOnA9ITEscmV0dXJuTTp5PSExfT1lLHg9YSYmcCxJPWkmJnk7bGV0IFQ9W10sVj0wO2NvbnN0IEY9Wy4uLnRdO2lmKHRoaXMuX3NvcnRGZWF0dXJlcyhGLG4sKChlLHQsaSk9PnMuZ2V0RmllbGRWYWx1ZShlLHQsaSkpKSx0aGlzLmdlb21ldHJ5VHlwZSYmKHV8fG0pKXtjb25zdCBlPXIobyk/P3ZvaWQgMDtpZih1JiYhbSlmb3IoY29uc3QgdCBvZiBGKVRbVisrXT17YXR0cmlidXRlczpzLmdldEF0dHJpYnV0ZXModCksZ2VvbWV0cnk6Yyh0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0R2VvbWV0cnkodCksaCxlLHgsSSl9O2Vsc2UgaWYoIXUmJm0pZm9yKGNvbnN0IHQgb2YgRilUW1YrK109e2F0dHJpYnV0ZXM6cy5nZXRBdHRyaWJ1dGVzKHQpLGNlbnRyb2lkOmQodGhpcyx0aGlzLmZlYXR1cmVBZGFwdGVyLmdldENlbnRyb2lkKHQsdGhpcyksZSl9O2Vsc2UgZm9yKGNvbnN0IHQgb2YgRilUW1YrK109e2F0dHJpYnV0ZXM6cy5nZXRBdHRyaWJ1dGVzKHQpLGNlbnRyb2lkOmQodGhpcyx0aGlzLmZlYXR1cmVBZGFwdGVyLmdldENlbnRyb2lkKHQsdGhpcyksZSksZ2VvbWV0cnk6Yyh0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLmhhc1osdGhpcy5oYXNNLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0R2VvbWV0cnkodCksaCxlLHgsSSl9fWVsc2UgZm9yKGNvbnN0IHIgb2YgRil7Y29uc3QgZT1zLmdldEF0dHJpYnV0ZXMocik7ZSYmKFRbVisrXT17YXR0cmlidXRlczplfSl9Y29uc3QgUz1nfHwwO2lmKG51bGwhPWYpe2NvbnN0IGU9UytmO1Q9VC5zbGljZShTLE1hdGgubWluKFQubGVuZ3RoLGUpKX1yZXR1cm4gVH1fY3JlYXRlRXhjZWVkc0xpbWl0UXVlcnlSZXNwb25zZShlKXtsZXQgdD0hMSxzPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxpPU51bWJlci5QT1NJVElWRV9JTkZJTklUWSxhPU51bWJlci5QT1NJVElWRV9JTkZJTklUWTtmb3IoY29uc3QgciBvZiBlLm91dFN0YXRpc3RpY3M/P1tdKWlmKFwiZXhjZWVkc2xpbWl0XCI9PT1yLnN0YXRpc3RpY1R5cGUpe3M9bnVsbCE9ci5tYXhQb2ludENvdW50P3IubWF4UG9pbnRDb3VudDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksaT1udWxsIT1yLm1heFJlY29yZENvdW50P3IubWF4UmVjb3JkQ291bnQ6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGE9bnVsbCE9ci5tYXhWZXJ0ZXhDb3VudD9yLm1heFZlcnRleENvdW50Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWTticmVha31pZihcImVzcmlHZW9tZXRyeVBvaW50XCI9PT10aGlzLmdlb21ldHJ5VHlwZSl0PXRoaXMuaXRlbXMubGVuZ3RoPnM7ZWxzZSBpZih0aGlzLml0ZW1zLmxlbmd0aD5pKXQ9ITA7ZWxzZXtjb25zdCBlPUModGhpcy5oYXNaLHRoaXMuaGFzTSkscz10aGlzLmZlYXR1cmVBZGFwdGVyO3Q9dGhpcy5pdGVtcy5yZWR1Y2UoKChlLHQpPT57Y29uc3QgaT1zLmdldEdlb21ldHJ5KHQpO3JldHVybiBlKyhudWxsIT1pJiZpLmNvb3Jkcy5sZW5ndGh8fDApfSksMCkvZT5hfXJldHVybntmaWVsZHM6W3tuYW1lOlwiZXhjZWVkc2xpbWl0XCIsdHlwZTpcImVzcmlGaWVsZFR5cGVJbnRlZ2VyXCIsYWxpYXM6XCJleGNlZWRzbGltaXRcIixzcWxUeXBlOlwic3FsVHlwZUludGVnZXJcIixkb21haW46bnVsbCxkZWZhdWx0VmFsdWU6bnVsbH1dLGZlYXR1cmVzOlt7YXR0cmlidXRlczp7ZXhjZWVkc2xpbWl0Ok51bWJlcih0KX19XX19YXN5bmMgX2NyZWF0ZVN0YXRpc3RpY3NRdWVyeVJlc3BvbnNlKGUpe2NvbnN0IHQ9e2F0dHJpYnV0ZXM6e319LHM9W10saT1uZXcgTWFwLGE9bmV3IE1hcCxyPW5ldyBNYXAsbj1uZXcgTWFwLG89bmV3IGwoZSx0aGlzLmZlYXR1cmVBZGFwdGVyLHRoaXMuZmllbGRzSW5kZXgpLHU9ZS5vdXRTdGF0aXN0aWNzLHtncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljczpjLGhhdmluZzpkLG9yZGVyQnlGaWVsZHM6bSxyZXN1bHRSZWNvcmRDb3VudDpofT1lLGc9Yz8ubGVuZ3RoLGY9ISFnLHA9Zj9jWzBdOm51bGwseT1mJiYhdGhpcy5maWVsZHNJbmRleC5nZXQocCk7Zm9yKGNvbnN0IGwgb2YgdT8/W10pe2NvbnN0e291dFN0YXRpc3RpY0ZpZWxkTmFtZTplLHN0YXRpc3RpY1R5cGU6dX09bCxtPWwsaD1cImV4Y2VlZHNsaW1pdFwiIT09dT9sLm9uU3RhdGlzdGljRmllbGQ6dm9pZCAwLEk9XCJwZXJjZW50aWxlX2Rpc2NcIj09PXV8fFwicGVyY2VudGlsZV9jb250XCI9PT11LFQ9XCJFbnZlbG9wZUFnZ3JlZ2F0ZVwiPT09dXx8XCJDZW50cm9pZEFnZ3JlZ2F0ZVwiPT09dXx8XCJDb252ZXhIdWxsQWdncmVnYXRlXCI9PT11LFY9ZiYmMT09PWcmJihoPT09cHx8eSkmJlwiY291bnRcIj09PXU7aWYoZil7aWYoIXIuaGFzKGgpKXtjb25zdCBlPVtdO2Zvcihjb25zdCB0IG9mIGMpe2NvbnN0IHM9dGhpcy5fZ2V0QXR0cmlidXRlVmFsdWVzKG8sdCxpKTtlLnB1c2gocyl9ci5zZXQoaCx0aGlzLl9jYWxjdWxhdGVVbmlxdWVWYWx1ZXMoZSwhVCYmby5yZXR1cm5EaXN0aW5jdFZhbHVlcykpfWNvbnN0IHQ9ci5nZXQoaCk7aWYoIXQpY29udGludWU7Y29uc3Qgcz1PYmplY3Qua2V5cyh0KTtmb3IoY29uc3QgYSBvZiBzKXtjb25zdHtjb3VudDpzLGRhdGE6cixpdGVtczpsLGl0ZW1Qb3NpdGlvbnM6dX09dFthXSxnPXIuam9pbihcIixcIik7aWYoIWR8fG8udmFsaWRhdGVJdGVtcyhsLGQpKXtjb25zdCB0PW4uZ2V0KGcpfHx7YXR0cmlidXRlczp7fX07aWYoVCl7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzfHwodC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt9KTtjb25zdHthZ2dyZWdhdGVHZW9tZXRyaWVzOmUsb3V0U3RhdGlzdGljRmllbGROYW1lOnN9PWF3YWl0IHRoaXMuX2dldEFnZ3JlZ2F0ZUdlb21ldHJ5KG0sbCk7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzW3NdPWV9ZWxzZXtsZXQgYT1udWxsO2lmKFYpYT1zO2Vsc2V7Y29uc3QgZT10aGlzLl9nZXRBdHRyaWJ1dGVWYWx1ZXMobyxoLGkpLHQ9dS5tYXAoKHQ9PmVbdF0pKTthPUkmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gbT90aGlzLl9nZXRQZXJjZW50aWxlVmFsdWUobSx0KTp0aGlzLl9nZXRTdGF0aXN0aWNWYWx1ZShtLHQsbnVsbCxvLnJldHVybkRpc3RpbmN0VmFsdWVzKX10LmF0dHJpYnV0ZXNbZV09YX1sZXQgYT0wO2MuZm9yRWFjaCgoKGUscyk9PnQuYXR0cmlidXRlc1t0aGlzLmZpZWxkc0luZGV4LmdldChlKT9lOlwiRVhQUl9cIisgKythXT1yW3NdKSksbi5zZXQoZyx0KX19fWVsc2UgaWYoVCl7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzfHwodC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt9KTtjb25zdHthZ2dyZWdhdGVHZW9tZXRyaWVzOmUsb3V0U3RhdGlzdGljRmllbGROYW1lOnN9PWF3YWl0IHRoaXMuX2dldEFnZ3JlZ2F0ZUdlb21ldHJ5KG0sdGhpcy5pdGVtcyk7dC5hZ2dyZWdhdGVHZW9tZXRyaWVzW3NdPWV9ZWxzZXtjb25zdCBzPXRoaXMuX2dldEF0dHJpYnV0ZVZhbHVlcyhvLGgsaSk7dC5hdHRyaWJ1dGVzW2VdPUkmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gbT90aGlzLl9nZXRQZXJjZW50aWxlVmFsdWUobSxzKTp0aGlzLl9nZXRTdGF0aXN0aWNWYWx1ZShtLHMsYSxvLnJldHVybkRpc3RpbmN0VmFsdWVzKX1jb25zdCBGPVwibWluXCIhPT11JiZcIm1heFwiIT09dXx8IXgodGhpcy5maWVsZHNJbmRleC5nZXQoaCkpJiYhdGhpcy5faXNBbnlEYXRlRmllbGQoaCk/bnVsbDp0aGlzLmZpZWxkc0luZGV4LmdldChoKT8udHlwZTtzLnB1c2goe25hbWU6ZSxhbGlhczplLHR5cGU6Rnx8XCJlc3JpRmllbGRUeXBlRG91YmxlXCJ9KX1jb25zdCBJPWY/QXJyYXkuZnJvbShuLnZhbHVlcygpKTpbdF07cmV0dXJuIHRoaXMuX3NvcnRGZWF0dXJlcyhJLG0sKChlLHQpPT5lLmF0dHJpYnV0ZXNbdF0pKSxoJiYoSS5sZW5ndGg9TWF0aC5taW4oaCxJLmxlbmd0aCkpLHtmaWVsZHM6cyxmZWF0dXJlczpJfX1faXNBbnlEYXRlRmllbGQoZSl7Y29uc3QgdD10aGlzLmZpZWxkc0luZGV4LmdldChlKTtyZXR1cm4gZih0KXx8cCh0KXx8eSh0KXx8SSh0KX1hc3luYyBfZ2V0QWdncmVnYXRlR2VvbWV0cnkoZSxyKXtjb25zdHtjb252ZXhIdWxsOm4sdW5pb246b309YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlFbmdpbmVKU09OLmpzXCIpLHtzdGF0aXN0aWNUeXBlOmwsb3V0U3RhdGlzdGljRmllbGROYW1lOnV9PWUse2ZlYXR1cmVBZGFwdGVyOmQsc3BhdGlhbFJlZmVyZW5jZTptLGdlb21ldHJ5VHlwZTpoLGhhc1o6ZyxoYXNNOmZ9PXRoaXMscD1yLm1hcCgoZT0+YyhoLGcsZixkLmdldEdlb21ldHJ5KGUpKSkpLHk9bihtLHAsITApWzBdLHg9e2FnZ3JlZ2F0ZUdlb21ldHJpZXM6bnVsbCxvdXRTdGF0aXN0aWNGaWVsZE5hbWU6bnVsbH07aWYoXCJFbnZlbG9wZUFnZ3JlZ2F0ZVwiPT09bCl7Y29uc3QgZT15P2koeSk6YShvKG0scCkpO3guYWdncmVnYXRlR2VvbWV0cmllcz17Li4uZSxzcGF0aWFsUmVmZXJlbmNlOm19LHgub3V0U3RhdGlzdGljRmllbGROYW1lPXV8fFwiZXh0ZW50XCJ9ZWxzZSBpZihcIkNlbnRyb2lkQWdncmVnYXRlXCI9PT1sKXtjb25zdCBlPXk/dCh5KTpzKGEobyhtLHApKSk7eC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt4OmVbMF0seTplWzFdLHNwYXRpYWxSZWZlcmVuY2U6bX0seC5vdXRTdGF0aXN0aWNGaWVsZE5hbWU9dXx8XCJjZW50cm9pZFwifWVsc2VcIkNvbnZleEh1bGxBZ2dyZWdhdGVcIj09PWwmJih4LmFnZ3JlZ2F0ZUdlb21ldHJpZXM9eSx4Lm91dFN0YXRpc3RpY0ZpZWxkTmFtZT11fHxcImNvbnZleEh1bGxcIik7cmV0dXJuIHh9X2dldFN0YXRpc3RpY1ZhbHVlKGUsdCxzLGkpe2NvbnN0e29uU3RhdGlzdGljRmllbGQ6YSxzdGF0aXN0aWNUeXBlOnJ9PWU7bGV0IG49bnVsbDtuPXM/LmhhcyhhKT9zLmdldChhKTp4KHRoaXMuZmllbGRzSW5kZXguZ2V0KGEpKXx8dGhpcy5faXNBbnlEYXRlRmllbGQoYSk/Vih7dmFsdWVzOnQscmV0dXJuRGlzdGluY3Q6aX0pOkYoe3ZhbHVlczppP1suLi5uZXcgU2V0KHQpXTp0LG1pblZhbHVlOm51bGwsbWF4VmFsdWU6bnVsbCx1c2VTYW1wbGVTdGREZXY6ITB9KSxzJiZzLnNldChhLG4pO3JldHVybiBuW1widmFyXCI9PT1yP1widmFyaWFuY2VcIjpyXX1fZ2V0UGVyY2VudGlsZVZhbHVlKGUsdCl7Y29uc3R7b25TdGF0aXN0aWNGaWVsZDpzLHN0YXRpc3RpY1BhcmFtZXRlcnM6aSxzdGF0aXN0aWNUeXBlOmF9PWUse3ZhbHVlOnIsb3JkZXJCeTpufT1pLG89dGhpcy5maWVsZHNJbmRleC5nZXQocyk7cmV0dXJuIE0odCx7dmFsdWU6cixvcmRlckJ5Om4sZmllbGRUeXBlOm8/LnR5cGUsaXNEaXNjcmV0ZTpcInBlcmNlbnRpbGVfZGlzY1wiPT09YX0pfV9nZXRBdHRyaWJ1dGVWYWx1ZXMoZSx0LHMpe2lmKHMuaGFzKHQpKXJldHVybiBzLmdldCh0KTtjb25zdCBpPXRoaXMuZmllbGRzSW5kZXguZ2V0KHQpLGE9dGhpcy5pdGVtcy5tYXAoKHM9PmUuZ2V0RmllbGRWYWx1ZShzLHQsaSkpKTtyZXR1cm4gcy5zZXQodCxhKSxhfV9jYWxjdWxhdGVVbmlxdWVWYWx1ZXMoZSx0KXtjb25zdCBzPXt9LGk9dGhpcy5pdGVtcyxhPWkubGVuZ3RoO2ZvcihsZXQgcj0wO3I8YTtyKyspe2NvbnN0IGE9aVtyXSxuPVtdO2Zvcihjb25zdCB0IG9mIGUpbi5wdXNoKHRbcl0pO2NvbnN0IG89bi5qb2luKFwiLFwiKTtudWxsPT1zW29dP3Nbb109e2NvdW50OjEsZGF0YTpuLGl0ZW1zOlthXSxpdGVtUG9zaXRpb25zOltyXX06KHR8fHNbb10uY291bnQrKyxzW29dLml0ZW1zLnB1c2goYSksc1tvXS5pdGVtUG9zaXRpb25zLnB1c2gocikpfXJldHVybiBzfWFzeW5jIF9nZXREYXRhVmFsdWVzKHQscz0hMCl7Y29uc3QgaT1uZXcgbCh0aGlzLnF1ZXJ5LHRoaXMuZmVhdHVyZUFkYXB0ZXIsdGhpcy5maWVsZHNJbmRleCkse3ZhbHVlRXhwcmVzc2lvbjphLHNjYWxlOnIsdGltZVpvbmU6bn09dDtyZXR1cm4gYT9pLmdldEV4cHJlc3Npb25WYWx1ZXModGhpcy5pdGVtcyxhLHt2aWV3aW5nTW9kZTpcIm1hcFwiLHNjYWxlOnIsc3BhdGlhbFJlZmVyZW5jZTp0aGlzLnF1ZXJ5Lm91dFNSfHx0aGlzLnNwYXRpYWxSZWZlcmVuY2V9LHtnZW9tZXRyeVR5cGU6dGhpcy5nZW9tZXRyeVR5cGUsaGFzWjp0aGlzLmhhc1osaGFzTTp0aGlzLmhhc019LG4pOmkuZ2V0RGF0YVZhbHVlcyh0aGlzLml0ZW1zLGUodCkscyl9fWZ1bmN0aW9uIE4oZSx0LHMsaSl7Y29uc3QgYT1pLngtcy54LHI9aS55LXMueSxuPWEqYStyKnIsbz0odC54LXMueCkqYSsodC55LXMueSkqcixsPU1hdGgubWluKDEsTWF0aC5tYXgoMCxvL24pKTtlLng9cy54K2EqbCxlLnk9cy55K3IqbH1mdW5jdGlvbiBDKGUsdCl7cmV0dXJuIGU/dD80OjM6dD8zOjJ9Y2xhc3MgRHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuY29vcmRzPWUsdGhpcy5jb29yZHNJbmRleD10fWdldCB4KCl7cmV0dXJuIHRoaXMuY29vcmRzW3RoaXMuY29vcmRzSW5kZXhdfWdldCB5KCl7cmV0dXJuIHRoaXMuY29vcmRzW3RoaXMuY29vcmRzSW5kZXgrMV19Z2V0IHooKXtyZXR1cm4gdGhpcy5jb29yZHNbdGhpcy5jb29yZHNJbmRleCsyXX19ZXhwb3J0e3EgYXMgUXVlcnlFbmdpbmVSZXN1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2VDYWNoZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvc3FsL1doZXJlQ2xhdXNlQ2FjaGUuanNcIjtpbXBvcnR7a2ViYWJEaWN0IGFzIHJ9ZnJvbVwiLi4vLi4vc3VwcG9ydC9maWVsZFR5cGUuanNcIjtjb25zdCB0PW5ldyBpKDUwLDUwMCkscz1cInVuc3VwcG9ydGVkLXF1ZXJ5XCIsbj1cIiBhcyBcIixvPW5ldyBTZXQoW1wiZXNyaUZpZWxkVHlwZU9JRFwiLFwiZXNyaUZpZWxkVHlwZVNtYWxsSW50ZWdlclwiLFwiZXNyaUZpZWxkVHlwZUJpZ0ludGVnZXJcIixcImVzcmlGaWVsZFR5cGVJbnRlZ2VyXCIsXCJlc3JpRmllbGRUeXBlU2luZ2xlXCIsXCJlc3JpRmllbGRUeXBlRG91YmxlXCIsXCJlc3JpRmllbGRUeXBlTG9uZ1wiXSksYT1uZXcgU2V0KFtcImVzcmlGaWVsZFR5cGVEYXRlXCIsXCJlc3JpRmllbGRUeXBlRGF0ZU9ubHlcIixcImVzcmlGaWVsZFR5cGVUaW1lT25seVwiLFwiZXNyaUZpZWxkVHlwZVRpbWVzdGFtcE9mZnNldFwiXSksbD1uZXcgU2V0KFtcImVzcmlGaWVsZFR5cGVTdHJpbmdcIixcImVzcmlGaWVsZFR5cGVHVUlEXCIsXCJlc3JpRmllbGRUeXBlR2xvYmFsSURcIiwuLi5vLC4uLmFdKTtmdW5jdGlvbiBkKGkscixuPXt9KXtjb25zdCBvPWMocixpKTtpZighbyl7Y29uc3Qgbj10LmdldEVycm9yKHIsaSk7dGhyb3cgbmV3IGUocyxcImludmFsaWQgU1FMIGV4cHJlc3Npb25cIix7ZXhwcmVzc2lvbjpyLGVycm9yOm59KX1jb25zdCBhPW4uZXhwcmVzc2lvbk5hbWV8fFwiZXhwcmVzc2lvblwiO2lmKG4udmFsaWRhdGVTdGFuZGFyZGl6ZWQmJiFvLmlzU3RhbmRhcmRpemVkKXRocm93IG5ldyBlKHMsYCR7YX0gaXMgbm90IHN0YW5kYXJkYCx7ZXhwcmVzc2lvbjpyfSk7aWYobi52YWxpZGF0ZUFnZ3JlZ2F0ZSYmIW8uaXNBZ2dyZWdhdGUpdGhyb3cgbmV3IGUocyxgJHthfSBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgYWdncmVnYXRlIGZ1bmN0aW9uYCx7ZXhwcmVzc2lvbjpyfSk7cmV0dXJuIG8uZmllbGROYW1lc31mdW5jdGlvbiBwKGUsaSxyLHQpe2lmKCFyKXJldHVybiEwO2NvbnN0IHM9XCJ3aGVyZSBjbGF1c2VcIjtyZXR1cm4gZyhlLGksZChlLHIse3ZhbGlkYXRlU3RhbmRhcmRpemVkOiEwLGV4cHJlc3Npb25OYW1lOnN9KSx7ZXhwcmVzc2lvbk5hbWU6cyxxdWVyeTp0fSksITB9ZnVuY3Rpb24gZihpLHIsdCxuLG8pe2lmKCF0KXJldHVybiEwO2NvbnN0IGE9XCJoYXZpbmcgY2xhdXNlXCIsbD1kKGksdCx7dmFsaWRhdGVBZ2dyZWdhdGU6ITAsZXhwcmVzc2lvbk5hbWU6YX0pO2coaSxyLGwse2V4cHJlc3Npb25OYW1lOmEscXVlcnk6b30pO2NvbnN0IHA9Yyh0LGkpLGY9cD8uZ2V0RXhwcmVzc2lvbnMoKS5ldmVyeSgoZT0+e2NvbnN0e2FnZ3JlZ2F0ZVR5cGU6cixmaWVsZDp0fT1lLHM9aS5nZXQodCk/Lm5hbWU7cmV0dXJuIG4uc29tZSgoZT0+e2NvbnN0e29uU3RhdGlzdGljRmllbGQ6dCxzdGF0aXN0aWNUeXBlOm59PWUsbz1pLmdldCh0KT8ubmFtZTtyZXR1cm4gbz09PXMmJm4udG9Mb3dlckNhc2UoKS50cmltKCk9PT1yfSkpfSkpO2lmKCFmKXRocm93IG5ldyBlKHMsXCJleHByZXNzaW9ucyBpbiBoYXZpbmcgY2xhdXNlIHNob3VsZCBhbHNvIGV4aXN0IGluIG91dFN0YXRpc3RpY3NcIix7aGF2aW5nOnR9KTtyZXR1cm4hMH1mdW5jdGlvbiBjKGUsaSl7cmV0dXJuIGU/dC5nZXQoZSxpKTpudWxsfWZ1bmN0aW9uIHUoZSl7cmV0dXJuL1xcKCguKj8pXFwpLy50ZXN0KGUpP2U6ZS5zcGxpdChuKVswXX1mdW5jdGlvbiB5KGUpe3JldHVybiBlLnNwbGl0KG4pWzFdfWZ1bmN0aW9uIGcoaSxyLHQsbj17fSl7Y29uc3Qgbz1uZXcgTWFwO2lmKG0obyxpLHIsbi5hbGxvd2VkRmllbGRUeXBlcz8/bCx0KSxvLnNpemUpe2NvbnN0IGk9bi5leHByZXNzaW9uTmFtZT8/XCJleHByZXNzaW9uXCI7dGhyb3cgbmV3IGUocyxgJHtpfSBjb250YWlucyBpbnZhbGlkIG9yIG1pc3NpbmcgZmllbGRzYCx7ZXJyb3JzOkFycmF5LmZyb20oby52YWx1ZXMoKSkscXVlcnk6bi5xdWVyeX0pfX1mdW5jdGlvbiBtKGUsaSxyLHQscyl7Zm9yKGNvbnN0IG8gb2Ygcyl7aWYoXCIqXCI9PT1vKWNvbnRpbnVlO2lmKGkuZ2V0KG8pKVQoZSxpLHIsdCxvKTtlbHNlIHRyeXtjb25zdCBzPWQoaSx1KG8pLHt2YWxpZGF0ZVN0YW5kYXJkaXplZDohMH0pO2Zvcihjb25zdCBuIG9mIHMpVChlLGkscix0LG4pfWNhdGNoKG4pe2Uuc2V0KG8se3R5cGU6XCJleHByZXNzaW9uLWVycm9yXCIsZXhwcmVzc2lvbjpvLGVycm9yOm59KX19fWZ1bmN0aW9uIFQoZSxpLHQscyxuKXtpZihcIipcIj09PW4pcmV0dXJuO2NvbnN0IG89aS5nZXQobik7bz90LmhhcyhvLm5hbWUpPyExPT09cz8uaGFzKG8udHlwZSkmJmUuc2V0KG4se3R5cGU6XCJpbnZhbGlkLXR5cGVcIixmaWVsZE5hbWU6by5uYW1lLGZpZWxkVHlwZTpyLmZyb21KU09OKG8udHlwZSksYWxsb3dlZEZpZWxkVHlwZXM6QXJyYXkuZnJvbShzLChlPT5yLmZyb21KU09OKGUpKSl9KTplLnNldChuLHt0eXBlOlwibWlzc2luZy1maWVsZFwiLGZpZWxkTmFtZTpvLm5hbWV9KTplLnNldChuLHt0eXBlOlwiaW52YWxpZC1maWVsZFwiLGZpZWxkTmFtZTpufSl9ZXhwb3J0e2EgYXMgYWxsRGF0ZUFuZFRpbWVGaWVsZFR5cGVzLHkgYXMgZ2V0QWxpYXNGcm9tRmllbGROYW1lLHUgYXMgZ2V0RXhwcmVzc2lvbkZyb21GaWVsZE5hbWUsYyBhcyBnZXRXaGVyZUNsYXVzZSxvIGFzIG51bWVyaWNGaWVsZFR5cGVzLGcgYXMgdmFsaWRhdGVGaWVsZHMsZiBhcyB2YWxpZGF0ZUhhdmluZyxwIGFzIHZhbGlkYXRlV2hlcmV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpc1NvbWUgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtpbml0aWFsaXplUHJvamVjdGlvbiBhcyBlLHByb2plY3RNYW55IGFzIG59ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtqc29uQWRhcHRlciBhcyByfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5QWRhcHRlcnMvanNvbi5qc1wiO2ltcG9ydHtpc1ZhbGlkIGFzIGksZXF1YWxzIGFzIG8saXNXZWJNZXJjYXRvciBhcyBhfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e2xuZ0xhdFRvWFkgYXMgbSx4eVRvTG5nTGF0IGFzIHAsY2FuUHJvamVjdCBhcyB1fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvd2ViTWVyY2F0b3JVdGlscy5qc1wiO2NvbnN0IGM9WzAsMF07ZnVuY3Rpb24gaChzLHQpe2lmKCF0KXJldHVybiBudWxsO2lmKFwieFwiaW4gdCl7Y29uc3QgZT17eDowLHk6MH07cmV0dXJuW2UueCxlLnldPXModC54LHQueSxjKSxudWxsIT10LnomJihlLno9dC56KSxudWxsIT10Lm0mJihlLm09dC5tKSxlfWlmKFwieG1pblwiaW4gdCl7Y29uc3QgZT17eG1pbjowLHltaW46MCx4bWF4OjAseW1heDowfTtyZXR1cm5bZS54bWluLGUueW1pbl09cyh0LnhtaW4sdC55bWluLGMpLFtlLnhtYXgsZS55bWF4XT1zKHQueG1heCx0LnltYXgsYyksdC5oYXNaJiYoZS56bWluPXQuem1pbixlLnptYXg9dC56bWF4LGUuaGFzWj0hMCksdC5oYXNNJiYoZS5tbWluPXQubW1pbixlLm1tYXg9dC5tbWF4LGUuaGFzTT0hMCksZX1yZXR1cm5cInJpbmdzXCJpbiB0P3tyaW5nczpsKHQucmluZ3MscyksaGFzTTp0Lmhhc00saGFzWjp0Lmhhc1p9OlwicGF0aHNcImluIHQ/e3BhdGhzOmwodC5wYXRocyxzKSxoYXNNOnQuaGFzTSxoYXNaOnQuaGFzWn06XCJwb2ludHNcImluIHQ/e3BvaW50czpmKHQucG9pbnRzLHMpLGhhc006dC5oYXNNLGhhc1o6dC5oYXNafTpudWxsfWZ1bmN0aW9uIGwocyx0KXtjb25zdCBlPVtdO2Zvcihjb25zdCBuIG9mIHMpZS5wdXNoKGYobix0KSk7cmV0dXJuIGV9ZnVuY3Rpb24gZihzLHQpe2NvbnN0IGU9W107Zm9yKGNvbnN0IG4gb2Ygcyl7Y29uc3Qgcz10KG5bMF0sblsxXSxbMCwwXSk7ZS5wdXNoKHMpLG4ubGVuZ3RoPjImJnMucHVzaChuWzJdKSxuLmxlbmd0aD4zJiZzLnB1c2goblszXSl9cmV0dXJuIGV9YXN5bmMgZnVuY3Rpb24geCh0LG4pe2lmKCF0fHwhbilyZXR1cm47Y29uc3Qgcj1BcnJheS5pc0FycmF5KHQpP3QubWFwKChzPT5udWxsIT1zLmdlb21ldHJ5P3MuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZTpudWxsKSkuZmlsdGVyKHMpOlt0XTthd2FpdCBlKHIubWFwKChzPT4oe3NvdXJjZTpzLGRlc3Q6bn0pKSkpfWNvbnN0IHk9aC5iaW5kKG51bGwsbSksZz1oLmJpbmQobnVsbCxwKTtmdW5jdGlvbiBqKHMsdCxlLG0pe2lmKCFzKXJldHVybiBzO2lmKGV8fChlPXQsdD1zLnNwYXRpYWxSZWZlcmVuY2UpLCFpKHQpfHwhaShlKXx8byh0LGUpKXJldHVybiBzO2lmKHUodCxlKSl7Y29uc3QgdD1hKGUpP3kocyk6ZyhzKTtyZXR1cm4gdC5zcGF0aWFsUmVmZXJlbmNlPWUsdH1yZXR1cm4gbihyLFtzXSx0LGUsbnVsbCxtKVswXX1jbGFzcyBfe2NvbnN0cnVjdG9yKCl7dGhpcy5fam9icz1bXSx0aGlzLl90aW1lcj1udWxsLHRoaXMuX3Byb2Nlc3M9dGhpcy5fcHJvY2Vzcy5iaW5kKHRoaXMpfWFzeW5jIHB1c2gocyxlLG4scil7aWYoIXM/Lmxlbmd0aHx8IWV8fCFufHxvKGUsbikpcmV0dXJuIHM7Y29uc3QgaT17Z2VvbWV0cmllczpzLGluU3BhdGlhbFJlZmVyZW5jZTplLG91dFNwYXRpYWxSZWZlcmVuY2U6bixnZW9ncmFwaGljVHJhbnNmb3JtYXRpb246cixyZXNvbHZlOnQoKX07cmV0dXJuIHRoaXMuX2pvYnMucHVzaChpKSx0aGlzLl90aW1lcj8/PXNldFRpbWVvdXQodGhpcy5fcHJvY2VzcywxMCksaS5yZXNvbHZlLnByb21pc2V9X3Byb2Nlc3MoKXt0aGlzLl90aW1lcj1udWxsO2NvbnN0IHM9dGhpcy5fam9icy5zaGlmdCgpO2lmKCFzKXJldHVybjtjb25zdHtnZW9tZXRyaWVzOnQsaW5TcGF0aWFsUmVmZXJlbmNlOmUsb3V0U3BhdGlhbFJlZmVyZW5jZTppLHJlc29sdmU6byxnZW9ncmFwaGljVHJhbnNmb3JtYXRpb246bX09czt1KGUsaSk/YShpKT9vKHQubWFwKHkpKTpvKHQubWFwKGcpKTpvKG4ocix0LGUsaSxtLG51bGwpKSx0aGlzLl9qb2JzLmxlbmd0aD4wJiYodGhpcy5fdGltZXI9c2V0VGltZW91dCh0aGlzLl9wcm9jZXNzLDEwKSl9fWNvbnN0IE09bmV3IF87ZnVuY3Rpb24gYihzLHQsZSxuKXtyZXR1cm4gTS5wdXNoKHMsdCxlLG4pfWV4cG9ydHt4IGFzIGNoZWNrUHJvamVjdGlvblN1cHBvcnQsaiBhcyBwcm9qZWN0LGIgYXMgcHJvamVjdE1hbnl9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnR7bnVtZXJpY0ZpZWxkVHlwZXMgYXMgdCxhbGxEYXRlQW5kVGltZUZpZWxkVHlwZXMgYXMgaSx2YWxpZGF0ZUZpZWxkcyBhcyBzLHZhbGlkYXRlV2hlcmUgYXMgcix2YWxpZGF0ZUhhdmluZyBhcyBvfWZyb21cIi4vYXR0cmlidXRlU3VwcG9ydC5qc1wiO2ltcG9ydHtjaGVja1Byb2plY3Rpb25TdXBwb3J0IGFzIG59ZnJvbVwiLi9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHtjaGVja1NwYXRpYWxRdWVyeVN1cHBvcnQgYXMgYX1mcm9tXCIuL3NwYXRpYWxRdWVyeVN1cHBvcnQuanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBsfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtjb25zdCB1PVwidW5zdXBwb3J0ZWQtcXVlcnlcIjthc3luYyBmdW5jdGlvbiBjKHQse2ZpZWxkc0luZGV4OmksZ2VvbWV0cnlUeXBlOnMsc3BhdGlhbFJlZmVyZW5jZTpyLGF2YWlsYWJsZUZpZWxkczpvfSl7aWYoKHQuZGlzdGFuY2U/PzApPDB8fG51bGwhPXQuZ2VvbWV0cnlQcmVjaXNpb258fHQubXVsdGlwYXRjaE9wdGlvbiYmXCJ4eUZvb3RwcmludFwiIT09dC5tdWx0aXBhdGNoT3B0aW9ufHx0LnBpeGVsU2l6ZXx8dC5yZWxhdGlvblBhcmFtfHx0LnRleHQpdGhyb3cgbmV3IGUodSxcIlVuc3VwcG9ydGVkIHF1ZXJ5IG9wdGlvbnNcIix7cXVlcnk6dH0pO3JldHVybiBwKGksbyx0KSxmKGksbyx0KSxQcm9taXNlLmFsbChbYSh0LHMsciksbihyLHQub3V0U1IpXSkudGhlbigoKCk9PnQpKX1mdW5jdGlvbiBwKHQsaSxvKXtjb25zdHtvdXRGaWVsZHM6bixvcmRlckJ5RmllbGRzOmEscmV0dXJuRGlzdGluY3RWYWx1ZXM6bCxvdXRTdGF0aXN0aWNzOmN9PW8scD1jP2MubWFwKChlPT5lLm91dFN0YXRpc3RpY0ZpZWxkTmFtZSYmZS5vdXRTdGF0aXN0aWNGaWVsZE5hbWUudG9Mb3dlckNhc2UoKSkpLmZpbHRlcihCb29sZWFuKTpbXTtpZihhJiZhLmxlbmd0aD4wKXtjb25zdCBlPVwiIGFzY1wiLHI9XCIgZGVzY1wiLG49YS5tYXAoKHQ9Pntjb25zdCBpPXQudG9Mb3dlckNhc2UoKTtyZXR1cm4gaS5pbmNsdWRlcyhlKT9pLnNwbGl0KGUpWzBdOmkuaW5jbHVkZXMocik/aS5zcGxpdChyKVswXTp0fSkpLmZpbHRlcigoZT0+IXAuaW5jbHVkZXMoZSkpKTtzKHQsaSxuLHtleHByZXNzaW9uTmFtZTpcIm9yZGVyQnlGaWVsZHNcIixxdWVyeTpvfSl9aWYobiYmbi5sZW5ndGg+MClzKHQsaSxuLHtleHByZXNzaW9uTmFtZTpcIm91dEZpZWxkc1wiLHF1ZXJ5Om99KTtlbHNlIGlmKGwpdGhyb3cgbmV3IGUodSxcIm91dEZpZWxkcyBzaG91bGQgYmUgc3BlY2lmaWVkIGZvciByZXR1cm5EaXN0aW5jdFZhbHVlc1wiLHtxdWVyeTpvfSk7cih0LGksby53aGVyZSxvKX1jb25zdCBkPW5ldyBTZXQoWy4uLnQsLi4uaV0pO2Z1bmN0aW9uIGYodCxpLHIpe2NvbnN0e291dFN0YXRpc3RpY3M6bixncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljczphLGhhdmluZzpsfT1yLGM9YT8ubGVuZ3RoLHA9bj8ubGVuZ3RoO2lmKGwpe2lmKCFjfHwhcCl0aHJvdyBuZXcgZSh1LFwib3V0U3RhdGlzdGljcyBhbmQgZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3Mgc2hvdWxkIGJlIHNwZWNpZmllZCB3aXRoIGhhdmluZ1wiLHtxdWVyeTpyfSk7byh0LGksbCxuLHIpfWlmKHApe2lmKCFoKG4pKXJldHVybjtjb25zdCBvPW4ubWFwKChlPT5lLm9uU3RhdGlzdGljRmllbGQpKS5maWx0ZXIoQm9vbGVhbik7cyh0LGksbyx7ZXhwcmVzc2lvbk5hbWU6XCJvblN0YXRpc3RpY0ZpZWxkc1wiLHF1ZXJ5OnJ9KSxjJiZzKHQsaSxhLHtleHByZXNzaW9uTmFtZTpcImdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzXCIscXVlcnk6cn0pO2Zvcihjb25zdCBhIG9mIG4pe2NvbnN0e29uU3RhdGlzdGljRmllbGQ6byxzdGF0aXN0aWNUeXBlOm59PWE7aWYoKFwicGVyY2VudGlsZV9kaXNjXCI9PT1ufHxcInBlcmNlbnRpbGVfY29udFwiPT09bikmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gYSl7Y29uc3R7c3RhdGlzdGljUGFyYW1ldGVyczp0fT1hO2lmKCF0KXRocm93IG5ldyBlKHUsXCJzdGF0aXN0aWNQYXJhbWV0ZXJzIHNob3VsZCBiZSBzZXQgZm9yIHBlcmNlbnRpbGUgdHlwZVwiLHtkZWZpbml0aW9uOmEscXVlcnk6cn0pfWVsc2UgdC5nZXQobykmJlwiY291bnRcIiE9PW4mJlwibWluXCIhPT1uJiZcIm1heFwiIT09biYmcyh0LGksW29dLHtleHByZXNzaW9uTmFtZTpgb3V0U3RhdGlzdGljcyB3aXRoICcke259JyBzdGF0aXN0aWMgdHlwZWAsYWxsb3dlZEZpZWxkVHlwZXM6ZCxxdWVyeTpyfSl9fX1hc3luYyBmdW5jdGlvbiBtKHQsaSx7ZmllbGRzSW5kZXg6cyxnZW9tZXRyeVR5cGU6cixzcGF0aWFsUmVmZXJlbmNlOm8sYXZhaWxhYmxlRmllbGRzOmx9KXtpZigodC5kaXN0YW5jZT8/MCk8MHx8bnVsbCE9dC5nZW9tZXRyeVByZWNpc2lvbnx8dC5tdWx0aXBhdGNoT3B0aW9ufHx0LnBpeGVsU2l6ZXx8dC5yZWxhdGlvblBhcmFtfHx0LnRleHR8fHQub3V0U3RhdGlzdGljc3x8dC5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljc3x8dC5oYXZpbmd8fHQub3JkZXJCeUZpZWxkcyl0aHJvdyBuZXcgZSh1LFwiVW5zdXBwb3J0ZWQgcXVlcnkgb3B0aW9uc1wiLHtxdWVyeTp0fSk7cmV0dXJuIHAocyxsLHQpLFByb21pc2UuYWxsKFt5KHMsbCxpLHQpLGEodCxyLG8pLG4obyx0Lm91dFNSKV0pLnRoZW4oKCgpPT50KSl9YXN5bmMgZnVuY3Rpb24geSh0LGkscixvKXtsZXQgbj1bXTtpZihyLnZhbHVlRXhwcmVzc2lvbil7Y29uc3R7YXJjYWRlVXRpbHM6ZX09YXdhaXQgbCgpO249ZS5leHRyYWN0RmllbGROYW1lcyhyLnZhbHVlRXhwcmVzc2lvbil9aWYoci5maWVsZCYmbi5wdXNoKHIuZmllbGQpLHIuZmllbGQyJiZuLnB1c2goci5maWVsZDIpLHIuZmllbGQzJiZuLnB1c2goci5maWVsZDMpLHIubm9ybWFsaXphdGlvbkZpZWxkJiZuLnB1c2goci5ub3JtYWxpemF0aW9uRmllbGQpLCFuLmxlbmd0aCYmIXIudmFsdWVFeHByZXNzaW9uKXRocm93IG5ldyBlKHUsXCJmaWVsZCBvciB2YWx1ZUV4cHJlc3Npb24gaXMgcmVxdWlyZWRcIix7cGFyYW1zOnJ9KTtzKHQsaSxuLHtleHByZXNzaW9uTmFtZTpcInN0YXRpc3RpY3NcIixxdWVyeTpvfSl9ZnVuY3Rpb24gaChlKXtyZXR1cm4gbnVsbCE9ZSYmZS5ldmVyeSgoZT0+XCJleGNlZWRzbGltaXRcIiE9PWUuc3RhdGlzdGljVHlwZSkpfWV4cG9ydHtjIGFzIHZhbGlkYXRlUXVlcnksbSBhcyB2YWxpZGF0ZVN0YXRpc3RpY3NRdWVyeX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=