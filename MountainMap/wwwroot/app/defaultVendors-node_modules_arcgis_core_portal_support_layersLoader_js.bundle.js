"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_portal_support_layersLoader_js"],{

/***/ "./node_modules/@arcgis/core/layers/support/fetchService.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/fetchService.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchFeatureService: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../support/requestPresets.js */ "./node_modules/@arcgis/core/support/requestPresets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function t(t,r){const a=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.fetchArcGISServiceJSON)(t,r);y(a),n(a);const s={serviceJSON:a};if((a.currentVersion??0)<10.5)return s;const o=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_0__.fetchArcGISServiceJSON)(t+"/layers",r);return y(o),n(o),s.layersJSON={layers:o.layers,tables:o.tables},s}function r(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function a(e){return"Table"===e.type}function n(e){e.layers=e.layers?.filter(r),e.tables=e.tables?.filter(a)}function s(e){e.type||="Feature Layer"}function o(e){e.type||="Table"}function y(e){e.layers?.forEach(s),e.tables?.forEach(o)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/layersCreator.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/layersCreator.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   populateGroupLayer: () => (/* binding */ w),
/* harmony export */   populateOperationalLayers: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./LayerLoadContext.js */ "./node_modules/@arcgis/core/layers/support/LayerLoadContext.js");
/* harmony import */ var _lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lazyLayerLoader.js */ "./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _portal_support_featureCollectionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../portal/support/featureCollectionUtils.js */ "./node_modules/@arcgis/core/portal/support/featureCollectionUtils.js");
/* harmony import */ var _portal_support_portalLayers_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../portal/support/portalLayers.js */ "./node_modules/@arcgis/core/portal/support/portalLayers.js");
/* harmony import */ var _renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../renderers/support/styleUtils.js */ "./node_modules/@arcgis/core/renderers/support/styleUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function c(e,r,a){if(!r)return;const t=[];for(const i of r)t.push(g(i,a));const y=await Promise.allSettled(t);for(const i of y)"rejected"===i.status||i.value&&e.add(i.value)}const l={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},s={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},p={ArcGISFeatureLayer:"FeatureLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},u={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},d={ArcGISFeatureLayer:"FeatureLayer"},I={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},m={...u,LinkChartLayer:"LinkChartLayer"},f={...d},T={...I};async function g(e,r){return G(await M(e,r),e,r)}async function G(e,r,a){const t=new e;return t.read(r,a.context),"group"===t.type&&("GroupLayer"===r.layerType?await w(t,r,a):v(r)?h(t,r,a.context):A(r)&&await C(t,r,a.context)),await (0,_renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_7__.loadStyleRenderer)(t,a.context),t}async function M(e,n){const c=n.context,l=b(c);let s=e.layerType||e.type;!s&&n?.defaultLayerType&&(s=n.defaultLayerType);const p=l[s];let S=p?_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap[p]:_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.UnknownLayer;if(v(e)){const y=c?.portal;if(e.itemId){const i=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_4__["default"]({id:e.itemId,portal:y});await i.load();const L=(await (0,_portal_support_portalLayers_js__WEBPACK_IMPORTED_MODULE_6__.selectLayerClassPath)(i,new _LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_2__.LayerLoadContext)).className||"UnknownLayer";S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap[L]}}else"ArcGISFeatureLayer"===s?(0,_portal_support_featureCollectionUtils_js__WEBPACK_IMPORTED_MODULE_5__.isMapNotesLayer)(e)||(0,_portal_support_featureCollectionUtils_js__WEBPACK_IMPORTED_MODULE_5__.isMarkupLayer)(e)?S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.MapNotesLayer:(0,_portal_support_featureCollectionUtils_js__WEBPACK_IMPORTED_MODULE_5__.isRouteLayer)(e)?S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.RouteLayer:A(e)&&(S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.GroupLayer):e.wmtsInfo?.url&&e.wmtsInfo.layerIdentifier?S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.WMTSLayer:"WFS"===s&&"2.0.0"!==e.wfsInfo?.version&&(S=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.UnsupportedLayer);return S()}function A(e){if("ArcGISFeatureLayer"!==e.layerType||v(e))return!1;return(e.featureCollection?.layers?.length??0)>1}function v(e){return"Feature Collection"===e.type}function b(e){let r;switch(e.origin){case"web-scene":switch(e.layerContainerType){case"basemap":r=S;break;case"ground":r=s;break;case"tables":r=p;break;default:r=l}break;case"link-chart":switch(e.layerContainerType){case"basemap":r=T;break;case"tables":r=f;break;default:r=m}break;default:switch(e.layerContainerType){case"basemap":r=I;break;case"tables":r=d;break;default:r=u}}return r}async function w(r,a,t){const y=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_0__["default"],i=c(y,Array.isArray(a.layers)?a.layers:[],t);try{try{if(await i,"group"===r.type)return r.layers.addMany(y),r}catch(L){r.destroy();for(const e of y)e.destroy();throw L}}catch(L){throw L}}function h(e,r,a){r.itemId&&(e.portalItem=new _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_4__["default"]({id:r.itemId,portal:a?.portal}),e.when((()=>{const t=t=>{const y=t.layerId;F(t,e,r,y,a);const i=r.featureCollection?.layers?.[y];i&&t.read(i,a)};e.layers?.forEach(t),e.tables?.forEach(t)})))}async function C(e,r,t){const y=_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_3__.layerLookupMap.FeatureLayer,i=await y(),L=r.featureCollection,o=L?.showLegend,n=L?.layers?.map(((a,y)=>{const L=new i;L.read(a,t);const n={...t,ignoreDefaults:!0};return F(L,e,r,y,n),null!=o&&L.read({showLegend:o},n),L}));e.layers.addMany(n??[])}function F(e,r,a,t,y){e.read({id:`${r.id}-sublayer-${t}`,visibility:a.visibleLayers?.includes(t)??!0},y)}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/featureCollectionUtils.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/featureCollectionUtils.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isMapNotesLayer: () => (/* binding */ e),
/* harmony export */   isMarkupLayer: () => (/* binding */ r),
/* harmony export */   isRouteLayer: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){return t(e,"notes")}function r(e){return t(e,"markup")}function n(e){return t(e,"route")}function t(e,r){return!(!e.layerType||"ArcGISFeatureLayer"!==e.layerType)&&e.featureCollectionType===r}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/jsonContext.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/jsonContext.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createForGroupLayerItemRead: () => (/* binding */ l),
/* harmony export */   createForGroupLayerItemWrite: () => (/* binding */ a),
/* harmony export */   createForItemRead: () => (/* binding */ e),
/* harmony export */   createForItemWrite: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _Portal_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){return{origin:"portal-item",url:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(e.itemUrl),portal:e.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_1__["default"].getDefault(),portalItem:e,readResourcePaths:[]}}function o(e){const o=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(e.itemUrl);return{origin:"portal-item",messages:[],writtenProperties:[],url:o,portal:e.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_1__["default"].getDefault(),portalItem:e,verifyItemRelativeUrls:o?{rootPath:o.path,writtenUrls:[]}:null,blockedRelativeUrls:[]}}function l(e){return{origin:"web-map",url:(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(e.itemUrl),portal:e.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_1__["default"].getDefault(),portalItem:e,readResourcePaths:[]}}function a(e,o){const l=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_0__.urlToObject)(e.itemUrl);return{origin:"web-map",messages:[],writtenProperties:[],url:l,portal:e.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_1__["default"].getDefault(),portalItem:e,initiator:o,verifyItemRelativeUrls:l?{rootPath:l.path,writtenUrls:[]}:null,blockedRelativeUrls:[],resources:{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/layersLoader.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/layersLoader.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   load: () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../layers/support/fetchService.js */ "./node_modules/@arcgis/core/layers/support/fetchService.js");
/* harmony import */ var _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layers/support/LayerLoadContext.js */ "./node_modules/@arcgis/core/layers/support/LayerLoadContext.js");
/* harmony import */ var _layers_support_layersCreator_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../layers/support/layersCreator.js */ "./node_modules/@arcgis/core/layers/support/layersCreator.js");
/* harmony import */ var _layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../layers/support/lazyLayerLoader.js */ "./node_modules/@arcgis/core/layers/support/lazyLayerLoader.js");
/* harmony import */ var _Portal_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _jsonContext_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _loadUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./loadUtils.js */ "./node_modules/@arcgis/core/portal/support/loadUtils.js");
/* harmony import */ var _portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../renderers/support/styleUtils.js */ "./node_modules/@arcgis/core/renderers/support/styleUtils.js");
/* harmony import */ var _support_requestPresets_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../support/requestPresets.js */ "./node_modules/@arcgis/core/support/requestPresets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
async function g(e,t){const r=e.instance.portalItem;if(r?.id)return await r.load(t),I(e),L(e,t)}function I(t){const r=t.instance.portalItem;if(!r?.type||!t.supportedTypes.includes(r.type))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:r?.type,expectedType:t.supportedTypes.join(", ")})}async function L(e,t){const r=e.instance,n=r.portalItem;if(!n)return;const{url:o,title:s}=n,i=(0,_jsonContext_js__WEBPACK_IMPORTED_MODULE_7__.createForItemRead)(n);if("group"===r.type)return S(r,i,e);o&&r.read({url:o},i);const p=new _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__.LayerLoadContext,u=await F(e,p,t);return u&&r.read(u,i),r.resourceReferences={portalItem:n,paths:i.readResourcePaths??[]},"subtype-group"!==r.type&&r.read({title:s},i),(0,_renderers_support_styleUtils_js__WEBPACK_IMPORTED_MODULE_10__.loadStyleRenderer)(r,i)}async function S(t,r,a){const n=t.portalItem;if(!t.sourceIsPortalItem)return;const{title:o,type:s}=n;if("Group Layer"===s){if(!(0,_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_9__.hasTypeKeyword)(n,"Map"))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:invalid-layer-item-typekeyword","'Group Layer' item without 'Map' type keyword is not supported");return T(t)}return t.read({title:o},r),j(t,a)}async function T(e){const t=e.portalItem,r=await t.fetchData("json");if(!r)return;const a=(0,_jsonContext_js__WEBPACK_IMPORTED_MODULE_7__.createForGroupLayerItemRead)(t);e.read(r,a),await (0,_layers_support_layersCreator_js__WEBPACK_IMPORTED_MODULE_4__.populateGroupLayer)(e,r,{context:a}),e.resourceReferences={portalItem:t,paths:a.readResourcePaths??[]}}async function j(t,r){let n;const{portalItem:o}=t;if(!o)return;const s=o.type,l=r.layerModuleTypeMap;switch(s){case"Feature Service":case"Feature Collection":n=l.FeatureLayer;break;case"Stream Service":n=l.StreamLayer;break;case"Scene Service":n=l.SceneLayer;break;default:throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("portal:unsupported-item-type-as-group",`The item type '${s}' is not supported as a 'IGroupLayer'`)}const i=new _layers_support_LayerLoadContext_js__WEBPACK_IMPORTED_MODULE_3__.LayerLoadContext;let[d,m]=await Promise.all([n(),F(r,i)]),h=()=>d;if("Feature Service"===s){m=o.url?await (0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.preprocessFSItemData)(m,o.url,i):{};const e=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getSubtypeGroupLayerIds)(m),r=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getOrientedImageryLayerIds)(m),a=[];if(e.length||r?.length){e.length&&a.push("SubtypeGroupLayer"),r?.length&&a.push("OrientedImageryLayer");const t=[];for(const e of a){const r=l[e];t.push(r())}const n=await Promise.all(t),o=new Map;a.forEach(((e,t)=>{o.set(e,n[t])})),h=e=>e.layerType?o.get(e.layerType)??d:d}const n=await E(o.url);return await M(t,h,m,n)}return"Scene Service"===s&&o.url&&(m=await (0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.populateSceneServiceItemData)(o,m,i)),(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getNumLayersAndTables)(m)>0?await M(t,h,m):await v(t,h)}async function v(e,t){const{portalItem:r}=e;if(!r?.url)return;const a=await (0,_support_requestPresets_js__WEBPACK_IMPORTED_MODULE_11__.fetchArcGISServiceJSON)(r.url);a&&M(e,t,{layers:a.layers?.map(_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.createSublayerData),tables:a.tables?.map(_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.createSublayerData)})}async function M(e,t,r,a){let n=r.layers||[];const s=r.tables||[];if("Feature Collection"===e.portalItem?.type?(n.forEach(((e,t)=>{e.id=t,"Table"===e?.layerDefinition?.type&&s.push(e)})),n=n.filter((e=>"Table"!==e?.layerDefinition?.type))):(n.reverse(),s.reverse()),n.forEach((n=>{const o=a?.(n);if(o||!a){const a=x(e,t(n),r,n,o);e.add(a)}})),s.length){const t=await _layers_support_lazyLayerLoader_js__WEBPACK_IMPORTED_MODULE_5__.layerLookupMap.FeatureLayer();s.forEach((n=>{const o=a?.(n);if(o||!a){const a=x(e,t,r,n,o);e.tables.add(a)}}))}}function x(e,t,r,a,n){const o=e.portalItem,l={portalItem:o.clone(),layerId:a.id};null!=a.url&&(l.url=a.url);const i=new t(l);if("sourceJSON"in i&&(i.sourceJSON=n),"subtype-group"!==i.type&&(i.sublayerTitleMode="service-name"),"Feature Collection"===o.type){const e={origin:"portal-item",portal:o.portal||_Portal_js__WEBPACK_IMPORTED_MODULE_6__["default"].getDefault()};i.read(a,e);const t=r.showLegend;null!=t&&i.read({showLegend:t},e)}return i}async function F(e,t,r){if(!1===e.supportsData)return;const a=e.instance,n=a.portalItem;if(!n)return;let o=null;try{o=await n.fetchData("json",r)}catch(s){}if(D(a)){let e=null;const r=await P(n,o,t);if((o?.layers||o?.tables)&&r>0){if(null==a.layerId){const e=(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getSubtypeGroupLayerIds)(o);a.layerId="subtype-group"===a.type?e?.[0]:(0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getFirstLayerOrTableId)(o)}e=C(o,a),e&&null!=o.showLegend&&(e.showLegend=o.showLegend)}return r>1&&"sublayerTitleMode"in a&&"service-name"!==a.sublayerTitleMode&&(a.sublayerTitleMode="item-title-and-service-name"),e}return o}async function P(e,r,a){if(r?.layers&&r?.tables)return (0,_loadUtils_js__WEBPACK_IMPORTED_MODULE_8__.getNumLayersAndTables)(r);const n=(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__.parse)(e.url);if(!n)return 1;const o=await a.fetchServiceMetadata(n.url.path).catch((()=>null));return(r?.layers?.length??o?.layers?.length??0)+(r?.tables?.length??o?.tables?.length??0)}function C(e,t){const{layerId:r}=t,a=e.layers?.find((e=>e.id===r))||e.tables?.find((e=>e.id===r));return a&&k(a,t)?a:null}function D(e){return"stream"!==e.type&&"layerId"in e}function k(e,t){return!("feature"===t.type&&"layerType"in e&&"SubtypeGroupLayer"===e.layerType||"subtype-group"===t.type&&!("layerType"in e))}async function E(e){const{layersJSON:t}=await (0,_layers_support_fetchService_js__WEBPACK_IMPORTED_MODULE_2__.fetchFeatureService)(e);if(!t)return null;const a=[...t.layers,...t.tables];return e=>a.find((t=>t.id===e.id))}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3BvcnRhbF9zdXBwb3J0X2xheWVyc0xvYWRlcl9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5RSxzQkFBc0IsY0FBYyxrRkFBQyxNQUFNLFVBQVUsU0FBUyxlQUFlLHVDQUF1QyxjQUFjLGtGQUFDLGdCQUFnQiwrQkFBK0IsZ0NBQWdDLEdBQUcsY0FBYyxrRUFBa0UsY0FBYyx1QkFBdUIsY0FBYywwREFBMEQsY0FBYyx5QkFBeUIsY0FBYyxpQkFBaUIsY0FBYywwQ0FBMkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0oxbkI7QUFDQTtBQUNBO0FBQ0E7QUFDdWUsd0JBQXdCLGFBQWEsV0FBVyxnQ0FBZ0Msb0NBQW9DLGdFQUFnRSxTQUFTLDB2QkFBMHZCLElBQUksZ0lBQWdJLElBQUksa0NBQWtDLElBQUksc1dBQXNXLElBQUksdXlCQUF1eUIsSUFBSSxrQ0FBa0MsSUFBSSwwYkFBMGIsSUFBSSxxQ0FBcUMsSUFBSSxLQUFLLElBQUksTUFBTSxzQkFBc0IsMkJBQTJCLHdCQUF3QixjQUFjLGtKQUFrSixtRkFBQyxnQkFBZ0Isc0JBQXNCLHlCQUF5QiwwQkFBMEIsZ0RBQWdELGFBQWEsUUFBUSwrREFBQyxJQUFJLCtEQUFDLGNBQWMsU0FBUyxrQkFBa0IsYUFBYSxZQUFZLDZEQUFDLEVBQUUscUJBQXFCLEVBQUUsZUFBZSxlQUFlLHFGQUFDLE9BQU8sa0VBQUMsNkJBQTZCLEVBQUUsK0RBQUMsS0FBSyw2QkFBNkIsMEZBQUMsS0FBSyx3RkFBQyxNQUFNLCtEQUFDLGVBQWUsdUZBQUMsTUFBTSwrREFBQyxxQkFBcUIsK0RBQUMsMkRBQTJELCtEQUFDLHVEQUF1RCwrREFBQyxtQkFBbUIsV0FBVyxjQUFjLHFEQUFxRCxpREFBaUQsY0FBYyxvQ0FBb0MsY0FBYyxNQUFNLGlCQUFpQiw2Q0FBNkMsa0JBQWtCLE1BQU0saUJBQWlC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LElBQUksOEJBQThCLFVBQVUsU0FBUyxXQUFXLHVCQUF1QixnQ0FBZ0Msb0JBQW9CLFFBQVEsc0VBQUMsSUFBSSwwQ0FBMEMscUVBQUMsSUFBSSw0REFBNEQsaUlBQWlJLFNBQVMsd0JBQXdCLCtCQUErQixvRUFBQyxJQUFJLFFBQVEsd0VBQUMsUUFBUSxlQUFlLG1FQUFtRSwwRkFBMEYsZ0JBQWdCLE1BQU0sVUFBVSxrRUFBa0Usd0JBQXdCLGNBQWMsdUNBQXVDLGdCQUFnQiw4SEFBOEgsb0JBQW9CLE1BQU0sYUFBYSxPQUFPLG9GQUFDLElBQUksa0JBQWtCLGtDQUFrQyxtQ0FBcUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvZmV0Y2hTZXJ2aWNlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9sYXllcnNDcmVhdG9yLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9wb3J0YWwvc3VwcG9ydC9mZWF0dXJlQ29sbGVjdGlvblV0aWxzLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9wb3J0YWwvc3VwcG9ydC9qc29uQ29udGV4dC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcG9ydGFsL3N1cHBvcnQvbGF5ZXJzTG9hZGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7ZmV0Y2hBcmNHSVNTZXJ2aWNlSlNPTiBhcyBlfWZyb21cIi4uLy4uL3N1cHBvcnQvcmVxdWVzdFByZXNldHMuanNcIjthc3luYyBmdW5jdGlvbiB0KHQscil7Y29uc3QgYT1hd2FpdCBlKHQscik7eShhKSxuKGEpO2NvbnN0IHM9e3NlcnZpY2VKU09OOmF9O2lmKChhLmN1cnJlbnRWZXJzaW9uPz8wKTwxMC41KXJldHVybiBzO2NvbnN0IG89YXdhaXQgZSh0K1wiL2xheWVyc1wiLHIpO3JldHVybiB5KG8pLG4obykscy5sYXllcnNKU09OPXtsYXllcnM6by5sYXllcnMsdGFibGVzOm8udGFibGVzfSxzfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJGZWF0dXJlIExheWVyXCI9PT1lLnR5cGV8fFwiT3JpZW50ZWQgSW1hZ2VyeSBMYXllclwiPT09ZS50eXBlfWZ1bmN0aW9uIGEoZSl7cmV0dXJuXCJUYWJsZVwiPT09ZS50eXBlfWZ1bmN0aW9uIG4oZSl7ZS5sYXllcnM9ZS5sYXllcnM/LmZpbHRlcihyKSxlLnRhYmxlcz1lLnRhYmxlcz8uZmlsdGVyKGEpfWZ1bmN0aW9uIHMoZSl7ZS50eXBlfHw9XCJGZWF0dXJlIExheWVyXCJ9ZnVuY3Rpb24gbyhlKXtlLnR5cGV8fD1cIlRhYmxlXCJ9ZnVuY3Rpb24geShlKXtlLmxheWVycz8uZm9yRWFjaChzKSxlLnRhYmxlcz8uZm9yRWFjaChvKX1leHBvcnR7dCBhcyBmZXRjaEZlYXR1cmVTZXJ2aWNlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0NvbGxlY3Rpb24uanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e0xheWVyTG9hZENvbnRleHQgYXMgcn1mcm9tXCIuL0xheWVyTG9hZENvbnRleHQuanNcIjtpbXBvcnR7bGF5ZXJMb29rdXBNYXAgYXMgYX1mcm9tXCIuL2xhenlMYXllckxvYWRlci5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL3BvcnRhbC9Qb3J0YWxJdGVtLmpzXCI7aW1wb3J0e2lzTWFwTm90ZXNMYXllciBhcyB5LGlzTWFya3VwTGF5ZXIgYXMgaSxpc1JvdXRlTGF5ZXIgYXMgTH1mcm9tXCIuLi8uLi9wb3J0YWwvc3VwcG9ydC9mZWF0dXJlQ29sbGVjdGlvblV0aWxzLmpzXCI7aW1wb3J0e3NlbGVjdExheWVyQ2xhc3NQYXRoIGFzIG99ZnJvbVwiLi4vLi4vcG9ydGFsL3N1cHBvcnQvcG9ydGFsTGF5ZXJzLmpzXCI7aW1wb3J0e2xvYWRTdHlsZVJlbmRlcmVyIGFzIG59ZnJvbVwiLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvc3R5bGVVdGlscy5qc1wiO2FzeW5jIGZ1bmN0aW9uIGMoZSxyLGEpe2lmKCFyKXJldHVybjtjb25zdCB0PVtdO2Zvcihjb25zdCBpIG9mIHIpdC5wdXNoKGcoaSxhKSk7Y29uc3QgeT1hd2FpdCBQcm9taXNlLmFsbFNldHRsZWQodCk7Zm9yKGNvbnN0IGkgb2YgeSlcInJlamVjdGVkXCI9PT1pLnN0YXR1c3x8aS52YWx1ZSYmZS5hZGQoaS52YWx1ZSl9Y29uc3QgbD17QXJjR0lTRGltZW5zaW9uTGF5ZXI6XCJEaW1lbnNpb25MYXllclwiLEFyY0dJU0ZlYXR1cmVMYXllcjpcIkZlYXR1cmVMYXllclwiLEFyY0dJU0ltYWdlU2VydmljZUxheWVyOlwiSW1hZ2VyeUxheWVyXCIsQXJjR0lTTWFwU2VydmljZUxheWVyOlwiTWFwSW1hZ2VMYXllclwiLFBvaW50Q2xvdWRMYXllcjpcIlBvaW50Q2xvdWRMYXllclwiLEFyY0dJU1NjZW5lU2VydmljZUxheWVyOlwiU2NlbmVMYXllclwiLEludGVncmF0ZWRNZXNoTGF5ZXI6XCJJbnRlZ3JhdGVkTWVzaExheWVyXCIsT0dDRmVhdHVyZUxheWVyOlwiT0dDRmVhdHVyZUxheWVyXCIsQnVpbGRpbmdTY2VuZUxheWVyOlwiQnVpbGRpbmdTY2VuZUxheWVyXCIsQXJjR0lTVGlsZWRFbGV2YXRpb25TZXJ2aWNlTGF5ZXI6XCJFbGV2YXRpb25MYXllclwiLEFyY0dJU1RpbGVkSW1hZ2VTZXJ2aWNlTGF5ZXI6XCJJbWFnZXJ5VGlsZUxheWVyXCIsQXJjR0lTVGlsZWRNYXBTZXJ2aWNlTGF5ZXI6XCJUaWxlTGF5ZXJcIixHcm91cExheWVyOlwiR3JvdXBMYXllclwiLEdlb0pTT046XCJHZW9KU09OTGF5ZXJcIixXZWJUaWxlZExheWVyOlwiV2ViVGlsZUxheWVyXCIsQ1NWOlwiQ1NWTGF5ZXJcIixWZWN0b3JUaWxlTGF5ZXI6XCJWZWN0b3JUaWxlTGF5ZXJcIixXRlM6XCJXRlNMYXllclwiLFdNUzpcIldNU0xheWVyXCIsRGVmYXVsdFRpbGVMYXllcjpcIlRpbGVMYXllclwiLEtNTDpcIktNTExheWVyXCIsUmFzdGVyRGF0YUxheWVyOlwiVW5zdXBwb3J0ZWRMYXllclwiLFZveGVsOlwiVm94ZWxMYXllclwiLExpbmVPZlNpZ2h0TGF5ZXI6XCJMaW5lT2ZTaWdodExheWVyXCJ9LHM9e0FyY0dJU1RpbGVkRWxldmF0aW9uU2VydmljZUxheWVyOlwiRWxldmF0aW9uTGF5ZXJcIixEZWZhdWx0VGlsZUxheWVyOlwiRWxldmF0aW9uTGF5ZXJcIixSYXN0ZXJEYXRhRWxldmF0aW9uTGF5ZXI6XCJVbnN1cHBvcnRlZExheWVyXCJ9LHA9e0FyY0dJU0ZlYXR1cmVMYXllcjpcIkZlYXR1cmVMYXllclwifSxTPXtBcmNHSVNUaWxlZE1hcFNlcnZpY2VMYXllcjpcIlRpbGVMYXllclwiLEFyY0dJU1RpbGVkSW1hZ2VTZXJ2aWNlTGF5ZXI6XCJJbWFnZXJ5VGlsZUxheWVyXCIsT3BlblN0cmVldE1hcDpcIk9wZW5TdHJlZXRNYXBMYXllclwiLFdlYlRpbGVkTGF5ZXI6XCJXZWJUaWxlTGF5ZXJcIixWZWN0b3JUaWxlTGF5ZXI6XCJWZWN0b3JUaWxlTGF5ZXJcIixBcmNHSVNJbWFnZVNlcnZpY2VMYXllcjpcIlVuc3VwcG9ydGVkTGF5ZXJcIixXTVM6XCJVbnN1cHBvcnRlZExheWVyXCIsQXJjR0lTTWFwU2VydmljZUxheWVyOlwiVW5zdXBwb3J0ZWRMYXllclwiLEFyY0dJU1NjZW5lU2VydmljZUxheWVyOlwiU2NlbmVMYXllclwiLERlZmF1bHRUaWxlTGF5ZXI6XCJUaWxlTGF5ZXJcIn0sdT17QXJjR0lTQW5ub3RhdGlvbkxheWVyOlwiVW5zdXBwb3J0ZWRMYXllclwiLEFyY0dJU0RpbWVuc2lvbkxheWVyOlwiVW5zdXBwb3J0ZWRMYXllclwiLEFyY0dJU0ZlYXR1cmVMYXllcjpcIkZlYXR1cmVMYXllclwiLEFyY0dJU0ltYWdlU2VydmljZUxheWVyOlwiSW1hZ2VyeUxheWVyXCIsQXJjR0lTSW1hZ2VTZXJ2aWNlVmVjdG9yTGF5ZXI6XCJJbWFnZXJ5TGF5ZXJcIixBcmNHSVNNYXBTZXJ2aWNlTGF5ZXI6XCJNYXBJbWFnZUxheWVyXCIsQXJjR0lTU3RyZWFtTGF5ZXI6XCJTdHJlYW1MYXllclwiLEFyY0dJU1RpbGVkSW1hZ2VTZXJ2aWNlTGF5ZXI6XCJJbWFnZXJ5VGlsZUxheWVyXCIsQXJjR0lTVGlsZWRNYXBTZXJ2aWNlTGF5ZXI6XCJUaWxlTGF5ZXJcIixCaW5nTWFwc0FlcmlhbDpcIkJpbmdNYXBzTGF5ZXJcIixCaW5nTWFwc1JvYWQ6XCJCaW5nTWFwc0xheWVyXCIsQmluZ01hcHNIeWJyaWQ6XCJCaW5nTWFwc0xheWVyXCIsQ1NWOlwiQ1NWTGF5ZXJcIixEZWZhdWx0VGlsZUxheWVyOlwiVGlsZUxheWVyXCIsR2VvUlNTOlwiR2VvUlNTTGF5ZXJcIixHZW9KU09OOlwiR2VvSlNPTkxheWVyXCIsR3JvdXBMYXllcjpcIkdyb3VwTGF5ZXJcIixLTUw6XCJLTUxMYXllclwiLE1lZGlhTGF5ZXI6XCJNZWRpYUxheWVyXCIsT0dDRmVhdHVyZUxheWVyOlwiT0dDRmVhdHVyZUxheWVyXCIsT3JpZW50ZWRJbWFnZXJ5TGF5ZXI6XCJPcmllbnRlZEltYWdlcnlMYXllclwiLFN1YnR5cGVHcm91cExheWVyOlwiU3VidHlwZUdyb3VwTGF5ZXJcIixWZWN0b3JUaWxlTGF5ZXI6XCJWZWN0b3JUaWxlTGF5ZXJcIixXRlM6XCJXRlNMYXllclwiLFdNUzpcIldNU0xheWVyXCIsV2ViVGlsZWRMYXllcjpcIldlYlRpbGVMYXllclwifSxkPXtBcmNHSVNGZWF0dXJlTGF5ZXI6XCJGZWF0dXJlTGF5ZXJcIn0sST17QXJjR0lTSW1hZ2VTZXJ2aWNlTGF5ZXI6XCJJbWFnZXJ5TGF5ZXJcIixBcmNHSVNJbWFnZVNlcnZpY2VWZWN0b3JMYXllcjpcIkltYWdlcnlMYXllclwiLEFyY0dJU01hcFNlcnZpY2VMYXllcjpcIk1hcEltYWdlTGF5ZXJcIixBcmNHSVNUaWxlZEltYWdlU2VydmljZUxheWVyOlwiSW1hZ2VyeVRpbGVMYXllclwiLEFyY0dJU1RpbGVkTWFwU2VydmljZUxheWVyOlwiVGlsZUxheWVyXCIsT3BlblN0cmVldE1hcDpcIk9wZW5TdHJlZXRNYXBMYXllclwiLFZlY3RvclRpbGVMYXllcjpcIlZlY3RvclRpbGVMYXllclwiLFdlYlRpbGVkTGF5ZXI6XCJXZWJUaWxlTGF5ZXJcIixCaW5nTWFwc0FlcmlhbDpcIkJpbmdNYXBzTGF5ZXJcIixCaW5nTWFwc1JvYWQ6XCJCaW5nTWFwc0xheWVyXCIsQmluZ01hcHNIeWJyaWQ6XCJCaW5nTWFwc0xheWVyXCIsV01TOlwiV01TTGF5ZXJcIixEZWZhdWx0VGlsZUxheWVyOlwiVGlsZUxheWVyXCJ9LG09ey4uLnUsTGlua0NoYXJ0TGF5ZXI6XCJMaW5rQ2hhcnRMYXllclwifSxmPXsuLi5kfSxUPXsuLi5JfTthc3luYyBmdW5jdGlvbiBnKGUscil7cmV0dXJuIEcoYXdhaXQgTShlLHIpLGUscil9YXN5bmMgZnVuY3Rpb24gRyhlLHIsYSl7Y29uc3QgdD1uZXcgZTtyZXR1cm4gdC5yZWFkKHIsYS5jb250ZXh0KSxcImdyb3VwXCI9PT10LnR5cGUmJihcIkdyb3VwTGF5ZXJcIj09PXIubGF5ZXJUeXBlP2F3YWl0IHcodCxyLGEpOnYocik/aCh0LHIsYS5jb250ZXh0KTpBKHIpJiZhd2FpdCBDKHQscixhLmNvbnRleHQpKSxhd2FpdCBuKHQsYS5jb250ZXh0KSx0fWFzeW5jIGZ1bmN0aW9uIE0oZSxuKXtjb25zdCBjPW4uY29udGV4dCxsPWIoYyk7bGV0IHM9ZS5sYXllclR5cGV8fGUudHlwZTshcyYmbj8uZGVmYXVsdExheWVyVHlwZSYmKHM9bi5kZWZhdWx0TGF5ZXJUeXBlKTtjb25zdCBwPWxbc107bGV0IFM9cD9hW3BdOmEuVW5rbm93bkxheWVyO2lmKHYoZSkpe2NvbnN0IHk9Yz8ucG9ydGFsO2lmKGUuaXRlbUlkKXtjb25zdCBpPW5ldyB0KHtpZDplLml0ZW1JZCxwb3J0YWw6eX0pO2F3YWl0IGkubG9hZCgpO2NvbnN0IEw9KGF3YWl0IG8oaSxuZXcgcikpLmNsYXNzTmFtZXx8XCJVbmtub3duTGF5ZXJcIjtTPWFbTF19fWVsc2VcIkFyY0dJU0ZlYXR1cmVMYXllclwiPT09cz95KGUpfHxpKGUpP1M9YS5NYXBOb3Rlc0xheWVyOkwoZSk/Uz1hLlJvdXRlTGF5ZXI6QShlKSYmKFM9YS5Hcm91cExheWVyKTplLndtdHNJbmZvPy51cmwmJmUud210c0luZm8ubGF5ZXJJZGVudGlmaWVyP1M9YS5XTVRTTGF5ZXI6XCJXRlNcIj09PXMmJlwiMi4wLjBcIiE9PWUud2ZzSW5mbz8udmVyc2lvbiYmKFM9YS5VbnN1cHBvcnRlZExheWVyKTtyZXR1cm4gUygpfWZ1bmN0aW9uIEEoZSl7aWYoXCJBcmNHSVNGZWF0dXJlTGF5ZXJcIiE9PWUubGF5ZXJUeXBlfHx2KGUpKXJldHVybiExO3JldHVybihlLmZlYXR1cmVDb2xsZWN0aW9uPy5sYXllcnM/Lmxlbmd0aD8/MCk+MX1mdW5jdGlvbiB2KGUpe3JldHVyblwiRmVhdHVyZSBDb2xsZWN0aW9uXCI9PT1lLnR5cGV9ZnVuY3Rpb24gYihlKXtsZXQgcjtzd2l0Y2goZS5vcmlnaW4pe2Nhc2VcIndlYi1zY2VuZVwiOnN3aXRjaChlLmxheWVyQ29udGFpbmVyVHlwZSl7Y2FzZVwiYmFzZW1hcFwiOnI9UzticmVhaztjYXNlXCJncm91bmRcIjpyPXM7YnJlYWs7Y2FzZVwidGFibGVzXCI6cj1wO2JyZWFrO2RlZmF1bHQ6cj1sfWJyZWFrO2Nhc2VcImxpbmstY2hhcnRcIjpzd2l0Y2goZS5sYXllckNvbnRhaW5lclR5cGUpe2Nhc2VcImJhc2VtYXBcIjpyPVQ7YnJlYWs7Y2FzZVwidGFibGVzXCI6cj1mO2JyZWFrO2RlZmF1bHQ6cj1tfWJyZWFrO2RlZmF1bHQ6c3dpdGNoKGUubGF5ZXJDb250YWluZXJUeXBlKXtjYXNlXCJiYXNlbWFwXCI6cj1JO2JyZWFrO2Nhc2VcInRhYmxlc1wiOnI9ZDticmVhaztkZWZhdWx0OnI9dX19cmV0dXJuIHJ9YXN5bmMgZnVuY3Rpb24gdyhyLGEsdCl7Y29uc3QgeT1uZXcgZSxpPWMoeSxBcnJheS5pc0FycmF5KGEubGF5ZXJzKT9hLmxheWVyczpbXSx0KTt0cnl7dHJ5e2lmKGF3YWl0IGksXCJncm91cFwiPT09ci50eXBlKXJldHVybiByLmxheWVycy5hZGRNYW55KHkpLHJ9Y2F0Y2goTCl7ci5kZXN0cm95KCk7Zm9yKGNvbnN0IGUgb2YgeSllLmRlc3Ryb3koKTt0aHJvdyBMfX1jYXRjaChMKXt0aHJvdyBMfX1mdW5jdGlvbiBoKGUscixhKXtyLml0ZW1JZCYmKGUucG9ydGFsSXRlbT1uZXcgdCh7aWQ6ci5pdGVtSWQscG9ydGFsOmE/LnBvcnRhbH0pLGUud2hlbigoKCk9Pntjb25zdCB0PXQ9Pntjb25zdCB5PXQubGF5ZXJJZDtGKHQsZSxyLHksYSk7Y29uc3QgaT1yLmZlYXR1cmVDb2xsZWN0aW9uPy5sYXllcnM/Llt5XTtpJiZ0LnJlYWQoaSxhKX07ZS5sYXllcnM/LmZvckVhY2godCksZS50YWJsZXM/LmZvckVhY2godCl9KSkpfWFzeW5jIGZ1bmN0aW9uIEMoZSxyLHQpe2NvbnN0IHk9YS5GZWF0dXJlTGF5ZXIsaT1hd2FpdCB5KCksTD1yLmZlYXR1cmVDb2xsZWN0aW9uLG89TD8uc2hvd0xlZ2VuZCxuPUw/LmxheWVycz8ubWFwKCgoYSx5KT0+e2NvbnN0IEw9bmV3IGk7TC5yZWFkKGEsdCk7Y29uc3Qgbj17Li4udCxpZ25vcmVEZWZhdWx0czohMH07cmV0dXJuIEYoTCxlLHIseSxuKSxudWxsIT1vJiZMLnJlYWQoe3Nob3dMZWdlbmQ6b30sbiksTH0pKTtlLmxheWVycy5hZGRNYW55KG4/P1tdKX1mdW5jdGlvbiBGKGUscixhLHQseSl7ZS5yZWFkKHtpZDpgJHtyLmlkfS1zdWJsYXllci0ke3R9YCx2aXNpYmlsaXR5OmEudmlzaWJsZUxheWVycz8uaW5jbHVkZXModCk/PyEwfSx5KX1leHBvcnR7dyBhcyBwb3B1bGF0ZUdyb3VwTGF5ZXIsYyBhcyBwb3B1bGF0ZU9wZXJhdGlvbmFsTGF5ZXJzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBlKGUpe3JldHVybiB0KGUsXCJub3Rlc1wiKX1mdW5jdGlvbiByKGUpe3JldHVybiB0KGUsXCJtYXJrdXBcIil9ZnVuY3Rpb24gbihlKXtyZXR1cm4gdChlLFwicm91dGVcIil9ZnVuY3Rpb24gdChlLHIpe3JldHVybiEoIWUubGF5ZXJUeXBlfHxcIkFyY0dJU0ZlYXR1cmVMYXllclwiIT09ZS5sYXllclR5cGUpJiZlLmZlYXR1cmVDb2xsZWN0aW9uVHlwZT09PXJ9ZXhwb3J0e2UgYXMgaXNNYXBOb3Rlc0xheWVyLHIgYXMgaXNNYXJrdXBMYXllcixuIGFzIGlzUm91dGVMYXllcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3VybFRvT2JqZWN0IGFzIHR9ZnJvbVwiLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydCByIGZyb21cIi4uL1BvcnRhbC5qc1wiO2Z1bmN0aW9uIGUoZSl7cmV0dXJue29yaWdpbjpcInBvcnRhbC1pdGVtXCIsdXJsOnQoZS5pdGVtVXJsKSxwb3J0YWw6ZS5wb3J0YWx8fHIuZ2V0RGVmYXVsdCgpLHBvcnRhbEl0ZW06ZSxyZWFkUmVzb3VyY2VQYXRoczpbXX19ZnVuY3Rpb24gbyhlKXtjb25zdCBvPXQoZS5pdGVtVXJsKTtyZXR1cm57b3JpZ2luOlwicG9ydGFsLWl0ZW1cIixtZXNzYWdlczpbXSx3cml0dGVuUHJvcGVydGllczpbXSx1cmw6byxwb3J0YWw6ZS5wb3J0YWx8fHIuZ2V0RGVmYXVsdCgpLHBvcnRhbEl0ZW06ZSx2ZXJpZnlJdGVtUmVsYXRpdmVVcmxzOm8/e3Jvb3RQYXRoOm8ucGF0aCx3cml0dGVuVXJsczpbXX06bnVsbCxibG9ja2VkUmVsYXRpdmVVcmxzOltdfX1mdW5jdGlvbiBsKGUpe3JldHVybntvcmlnaW46XCJ3ZWItbWFwXCIsdXJsOnQoZS5pdGVtVXJsKSxwb3J0YWw6ZS5wb3J0YWx8fHIuZ2V0RGVmYXVsdCgpLHBvcnRhbEl0ZW06ZSxyZWFkUmVzb3VyY2VQYXRoczpbXX19ZnVuY3Rpb24gYShlLG8pe2NvbnN0IGw9dChlLml0ZW1VcmwpO3JldHVybntvcmlnaW46XCJ3ZWItbWFwXCIsbWVzc2FnZXM6W10sd3JpdHRlblByb3BlcnRpZXM6W10sdXJsOmwscG9ydGFsOmUucG9ydGFsfHxyLmdldERlZmF1bHQoKSxwb3J0YWxJdGVtOmUsaW5pdGlhdG9yOm8sdmVyaWZ5SXRlbVJlbGF0aXZlVXJsczpsP3tyb290UGF0aDpsLnBhdGgsd3JpdHRlblVybHM6W119Om51bGwsYmxvY2tlZFJlbGF0aXZlVXJsczpbXSxyZXNvdXJjZXM6e3RvQWRkOltdLHRvVXBkYXRlOltdLHRvS2VlcDpbXSxwZW5kaW5nT3BlcmF0aW9uczpbXX19fWV4cG9ydHtsIGFzIGNyZWF0ZUZvckdyb3VwTGF5ZXJJdGVtUmVhZCxhIGFzIGNyZWF0ZUZvckdyb3VwTGF5ZXJJdGVtV3JpdGUsZSBhcyBjcmVhdGVGb3JJdGVtUmVhZCxvIGFzIGNyZWF0ZUZvckl0ZW1Xcml0ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtwYXJzZSBhcyB0fWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2FyY2dpc0xheWVyVXJsLmpzXCI7aW1wb3J0e2ZldGNoRmVhdHVyZVNlcnZpY2UgYXMgcn1mcm9tXCIuLi8uLi9sYXllcnMvc3VwcG9ydC9mZXRjaFNlcnZpY2UuanNcIjtpbXBvcnR7TGF5ZXJMb2FkQ29udGV4dCBhcyBhfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L0xheWVyTG9hZENvbnRleHQuanNcIjtpbXBvcnR7cG9wdWxhdGVHcm91cExheWVyIGFzIG59ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvbGF5ZXJzQ3JlYXRvci5qc1wiO2ltcG9ydHtsYXllckxvb2t1cE1hcCBhcyBvfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2xhenlMYXllckxvYWRlci5qc1wiO2ltcG9ydCBzIGZyb21cIi4uL1BvcnRhbC5qc1wiO2ltcG9ydHtjcmVhdGVGb3JJdGVtUmVhZCBhcyBsLGNyZWF0ZUZvckdyb3VwTGF5ZXJJdGVtUmVhZCBhcyBpfWZyb21cIi4vanNvbkNvbnRleHQuanNcIjtpbXBvcnR7cHJlcHJvY2Vzc0ZTSXRlbURhdGEgYXMgcCxnZXRTdWJ0eXBlR3JvdXBMYXllcklkcyBhcyB1LGdldE9yaWVudGVkSW1hZ2VyeUxheWVySWRzIGFzIGMscG9wdWxhdGVTY2VuZVNlcnZpY2VJdGVtRGF0YSBhcyB5LGdldE51bUxheWVyc0FuZFRhYmxlcyBhcyBmLGNyZWF0ZVN1YmxheWVyRGF0YSBhcyBkLGdldEZpcnN0TGF5ZXJPclRhYmxlSWQgYXMgbX1mcm9tXCIuL2xvYWRVdGlscy5qc1wiO2ltcG9ydHtoYXNUeXBlS2V5d29yZCBhcyBofWZyb21cIi4vcG9ydGFsSXRlbVV0aWxzLmpzXCI7aW1wb3J0e2xvYWRTdHlsZVJlbmRlcmVyIGFzIHd9ZnJvbVwiLi4vLi4vcmVuZGVyZXJzL3N1cHBvcnQvc3R5bGVVdGlscy5qc1wiO2ltcG9ydHtmZXRjaEFyY0dJU1NlcnZpY2VKU09OIGFzIGJ9ZnJvbVwiLi4vLi4vc3VwcG9ydC9yZXF1ZXN0UHJlc2V0cy5qc1wiO2FzeW5jIGZ1bmN0aW9uIGcoZSx0KXtjb25zdCByPWUuaW5zdGFuY2UucG9ydGFsSXRlbTtpZihyPy5pZClyZXR1cm4gYXdhaXQgci5sb2FkKHQpLEkoZSksTChlLHQpfWZ1bmN0aW9uIEkodCl7Y29uc3Qgcj10Lmluc3RhbmNlLnBvcnRhbEl0ZW07aWYoIXI/LnR5cGV8fCF0LnN1cHBvcnRlZFR5cGVzLmluY2x1ZGVzKHIudHlwZSkpdGhyb3cgbmV3IGUoXCJwb3J0YWw6aW52YWxpZC1sYXllci1pdGVtLXR5cGVcIixcIkludmFsaWQgbGF5ZXIgaXRlbSB0eXBlICcke3R5cGV9JywgZXhwZWN0ZWQgJyR7ZXhwZWN0ZWRUeXBlfSdcIix7dHlwZTpyPy50eXBlLGV4cGVjdGVkVHlwZTp0LnN1cHBvcnRlZFR5cGVzLmpvaW4oXCIsIFwiKX0pfWFzeW5jIGZ1bmN0aW9uIEwoZSx0KXtjb25zdCByPWUuaW5zdGFuY2Usbj1yLnBvcnRhbEl0ZW07aWYoIW4pcmV0dXJuO2NvbnN0e3VybDpvLHRpdGxlOnN9PW4saT1sKG4pO2lmKFwiZ3JvdXBcIj09PXIudHlwZSlyZXR1cm4gUyhyLGksZSk7byYmci5yZWFkKHt1cmw6b30saSk7Y29uc3QgcD1uZXcgYSx1PWF3YWl0IEYoZSxwLHQpO3JldHVybiB1JiZyLnJlYWQodSxpKSxyLnJlc291cmNlUmVmZXJlbmNlcz17cG9ydGFsSXRlbTpuLHBhdGhzOmkucmVhZFJlc291cmNlUGF0aHM/P1tdfSxcInN1YnR5cGUtZ3JvdXBcIiE9PXIudHlwZSYmci5yZWFkKHt0aXRsZTpzfSxpKSx3KHIsaSl9YXN5bmMgZnVuY3Rpb24gUyh0LHIsYSl7Y29uc3Qgbj10LnBvcnRhbEl0ZW07aWYoIXQuc291cmNlSXNQb3J0YWxJdGVtKXJldHVybjtjb25zdHt0aXRsZTpvLHR5cGU6c309bjtpZihcIkdyb3VwIExheWVyXCI9PT1zKXtpZighaChuLFwiTWFwXCIpKXRocm93IG5ldyBlKFwicG9ydGFsOmludmFsaWQtbGF5ZXItaXRlbS10eXBla2V5d29yZFwiLFwiJ0dyb3VwIExheWVyJyBpdGVtIHdpdGhvdXQgJ01hcCcgdHlwZSBrZXl3b3JkIGlzIG5vdCBzdXBwb3J0ZWRcIik7cmV0dXJuIFQodCl9cmV0dXJuIHQucmVhZCh7dGl0bGU6b30sciksaih0LGEpfWFzeW5jIGZ1bmN0aW9uIFQoZSl7Y29uc3QgdD1lLnBvcnRhbEl0ZW0scj1hd2FpdCB0LmZldGNoRGF0YShcImpzb25cIik7aWYoIXIpcmV0dXJuO2NvbnN0IGE9aSh0KTtlLnJlYWQocixhKSxhd2FpdCBuKGUscix7Y29udGV4dDphfSksZS5yZXNvdXJjZVJlZmVyZW5jZXM9e3BvcnRhbEl0ZW06dCxwYXRoczphLnJlYWRSZXNvdXJjZVBhdGhzPz9bXX19YXN5bmMgZnVuY3Rpb24gaih0LHIpe2xldCBuO2NvbnN0e3BvcnRhbEl0ZW06b309dDtpZighbylyZXR1cm47Y29uc3Qgcz1vLnR5cGUsbD1yLmxheWVyTW9kdWxlVHlwZU1hcDtzd2l0Y2gocyl7Y2FzZVwiRmVhdHVyZSBTZXJ2aWNlXCI6Y2FzZVwiRmVhdHVyZSBDb2xsZWN0aW9uXCI6bj1sLkZlYXR1cmVMYXllcjticmVhaztjYXNlXCJTdHJlYW0gU2VydmljZVwiOm49bC5TdHJlYW1MYXllcjticmVhaztjYXNlXCJTY2VuZSBTZXJ2aWNlXCI6bj1sLlNjZW5lTGF5ZXI7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgZShcInBvcnRhbDp1bnN1cHBvcnRlZC1pdGVtLXR5cGUtYXMtZ3JvdXBcIixgVGhlIGl0ZW0gdHlwZSAnJHtzfScgaXMgbm90IHN1cHBvcnRlZCBhcyBhICdJR3JvdXBMYXllcidgKX1jb25zdCBpPW5ldyBhO2xldFtkLG1dPWF3YWl0IFByb21pc2UuYWxsKFtuKCksRihyLGkpXSksaD0oKT0+ZDtpZihcIkZlYXR1cmUgU2VydmljZVwiPT09cyl7bT1vLnVybD9hd2FpdCBwKG0sby51cmwsaSk6e307Y29uc3QgZT11KG0pLHI9YyhtKSxhPVtdO2lmKGUubGVuZ3RofHxyPy5sZW5ndGgpe2UubGVuZ3RoJiZhLnB1c2goXCJTdWJ0eXBlR3JvdXBMYXllclwiKSxyPy5sZW5ndGgmJmEucHVzaChcIk9yaWVudGVkSW1hZ2VyeUxheWVyXCIpO2NvbnN0IHQ9W107Zm9yKGNvbnN0IGUgb2YgYSl7Y29uc3Qgcj1sW2VdO3QucHVzaChyKCkpfWNvbnN0IG49YXdhaXQgUHJvbWlzZS5hbGwodCksbz1uZXcgTWFwO2EuZm9yRWFjaCgoKGUsdCk9PntvLnNldChlLG5bdF0pfSkpLGg9ZT0+ZS5sYXllclR5cGU/by5nZXQoZS5sYXllclR5cGUpPz9kOmR9Y29uc3Qgbj1hd2FpdCBFKG8udXJsKTtyZXR1cm4gYXdhaXQgTSh0LGgsbSxuKX1yZXR1cm5cIlNjZW5lIFNlcnZpY2VcIj09PXMmJm8udXJsJiYobT1hd2FpdCB5KG8sbSxpKSksZihtKT4wP2F3YWl0IE0odCxoLG0pOmF3YWl0IHYodCxoKX1hc3luYyBmdW5jdGlvbiB2KGUsdCl7Y29uc3R7cG9ydGFsSXRlbTpyfT1lO2lmKCFyPy51cmwpcmV0dXJuO2NvbnN0IGE9YXdhaXQgYihyLnVybCk7YSYmTShlLHQse2xheWVyczphLmxheWVycz8ubWFwKGQpLHRhYmxlczphLnRhYmxlcz8ubWFwKGQpfSl9YXN5bmMgZnVuY3Rpb24gTShlLHQscixhKXtsZXQgbj1yLmxheWVyc3x8W107Y29uc3Qgcz1yLnRhYmxlc3x8W107aWYoXCJGZWF0dXJlIENvbGxlY3Rpb25cIj09PWUucG9ydGFsSXRlbT8udHlwZT8obi5mb3JFYWNoKCgoZSx0KT0+e2UuaWQ9dCxcIlRhYmxlXCI9PT1lPy5sYXllckRlZmluaXRpb24/LnR5cGUmJnMucHVzaChlKX0pKSxuPW4uZmlsdGVyKChlPT5cIlRhYmxlXCIhPT1lPy5sYXllckRlZmluaXRpb24/LnR5cGUpKSk6KG4ucmV2ZXJzZSgpLHMucmV2ZXJzZSgpKSxuLmZvckVhY2goKG49Pntjb25zdCBvPWE/LihuKTtpZihvfHwhYSl7Y29uc3QgYT14KGUsdChuKSxyLG4sbyk7ZS5hZGQoYSl9fSkpLHMubGVuZ3RoKXtjb25zdCB0PWF3YWl0IG8uRmVhdHVyZUxheWVyKCk7cy5mb3JFYWNoKChuPT57Y29uc3Qgbz1hPy4obik7aWYob3x8IWEpe2NvbnN0IGE9eChlLHQscixuLG8pO2UudGFibGVzLmFkZChhKX19KSl9fWZ1bmN0aW9uIHgoZSx0LHIsYSxuKXtjb25zdCBvPWUucG9ydGFsSXRlbSxsPXtwb3J0YWxJdGVtOm8uY2xvbmUoKSxsYXllcklkOmEuaWR9O251bGwhPWEudXJsJiYobC51cmw9YS51cmwpO2NvbnN0IGk9bmV3IHQobCk7aWYoXCJzb3VyY2VKU09OXCJpbiBpJiYoaS5zb3VyY2VKU09OPW4pLFwic3VidHlwZS1ncm91cFwiIT09aS50eXBlJiYoaS5zdWJsYXllclRpdGxlTW9kZT1cInNlcnZpY2UtbmFtZVwiKSxcIkZlYXR1cmUgQ29sbGVjdGlvblwiPT09by50eXBlKXtjb25zdCBlPXtvcmlnaW46XCJwb3J0YWwtaXRlbVwiLHBvcnRhbDpvLnBvcnRhbHx8cy5nZXREZWZhdWx0KCl9O2kucmVhZChhLGUpO2NvbnN0IHQ9ci5zaG93TGVnZW5kO251bGwhPXQmJmkucmVhZCh7c2hvd0xlZ2VuZDp0fSxlKX1yZXR1cm4gaX1hc3luYyBmdW5jdGlvbiBGKGUsdCxyKXtpZighMT09PWUuc3VwcG9ydHNEYXRhKXJldHVybjtjb25zdCBhPWUuaW5zdGFuY2Usbj1hLnBvcnRhbEl0ZW07aWYoIW4pcmV0dXJuO2xldCBvPW51bGw7dHJ5e289YXdhaXQgbi5mZXRjaERhdGEoXCJqc29uXCIscil9Y2F0Y2gocyl7fWlmKEQoYSkpe2xldCBlPW51bGw7Y29uc3Qgcj1hd2FpdCBQKG4sbyx0KTtpZigobz8ubGF5ZXJzfHxvPy50YWJsZXMpJiZyPjApe2lmKG51bGw9PWEubGF5ZXJJZCl7Y29uc3QgZT11KG8pO2EubGF5ZXJJZD1cInN1YnR5cGUtZ3JvdXBcIj09PWEudHlwZT9lPy5bMF06bShvKX1lPUMobyxhKSxlJiZudWxsIT1vLnNob3dMZWdlbmQmJihlLnNob3dMZWdlbmQ9by5zaG93TGVnZW5kKX1yZXR1cm4gcj4xJiZcInN1YmxheWVyVGl0bGVNb2RlXCJpbiBhJiZcInNlcnZpY2UtbmFtZVwiIT09YS5zdWJsYXllclRpdGxlTW9kZSYmKGEuc3VibGF5ZXJUaXRsZU1vZGU9XCJpdGVtLXRpdGxlLWFuZC1zZXJ2aWNlLW5hbWVcIiksZX1yZXR1cm4gb31hc3luYyBmdW5jdGlvbiBQKGUscixhKXtpZihyPy5sYXllcnMmJnI/LnRhYmxlcylyZXR1cm4gZihyKTtjb25zdCBuPXQoZS51cmwpO2lmKCFuKXJldHVybiAxO2NvbnN0IG89YXdhaXQgYS5mZXRjaFNlcnZpY2VNZXRhZGF0YShuLnVybC5wYXRoKS5jYXRjaCgoKCk9Pm51bGwpKTtyZXR1cm4ocj8ubGF5ZXJzPy5sZW5ndGg/P28/LmxheWVycz8ubGVuZ3RoPz8wKSsocj8udGFibGVzPy5sZW5ndGg/P28/LnRhYmxlcz8ubGVuZ3RoPz8wKX1mdW5jdGlvbiBDKGUsdCl7Y29uc3R7bGF5ZXJJZDpyfT10LGE9ZS5sYXllcnM/LmZpbmQoKGU9PmUuaWQ9PT1yKSl8fGUudGFibGVzPy5maW5kKChlPT5lLmlkPT09cikpO3JldHVybiBhJiZrKGEsdCk/YTpudWxsfWZ1bmN0aW9uIEQoZSl7cmV0dXJuXCJzdHJlYW1cIiE9PWUudHlwZSYmXCJsYXllcklkXCJpbiBlfWZ1bmN0aW9uIGsoZSx0KXtyZXR1cm4hKFwiZmVhdHVyZVwiPT09dC50eXBlJiZcImxheWVyVHlwZVwiaW4gZSYmXCJTdWJ0eXBlR3JvdXBMYXllclwiPT09ZS5sYXllclR5cGV8fFwic3VidHlwZS1ncm91cFwiPT09dC50eXBlJiYhKFwibGF5ZXJUeXBlXCJpbiBlKSl9YXN5bmMgZnVuY3Rpb24gRShlKXtjb25zdHtsYXllcnNKU09OOnR9PWF3YWl0IHIoZSk7aWYoIXQpcmV0dXJuIG51bGw7Y29uc3QgYT1bLi4udC5sYXllcnMsLi4udC50YWJsZXNdO3JldHVybiBlPT5hLmZpbmQoKHQ9PnQuaWQ9PT1lLmlkKSl9ZXhwb3J0e2cgYXMgbG9hZH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=