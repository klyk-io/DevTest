"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["node_modules_arcgis_core_layers_graphics_sources_WFSSourceWorker_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ F)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./geojson/geojson.js */ "./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js");
/* harmony import */ var _support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./support/sourceUtils.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js");
/* harmony import */ var _ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ogc/wfsUtils.js */ "./node_modules/@arcgis/core/layers/ogc/wfsUtils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../time/timeZoneUtils.js */ "./node_modules/@arcgis/core/time/timeZoneUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class F{constructor(){this._queryEngine=null,this._customParameters=null}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,r){const{getFeatureUrl:a,getFeatureOutputFormat:i,fields:o,geometryType:n,featureType:l,objectIdField:c,customParameters:m}=e,{spatialReference:y,getFeatureSpatialReference:g}=(0,_ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getGetFeatureSpatialReference)(a,l,e.spatialReference);this._featureType=l,this._customParameters=m,this._getFeatureUrl=a,this._getFeatureOutputFormat=i,this._getFeatureSpatialReference=g;try{await (0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.checkProjectionSupport)(g,y)}catch{throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("unsupported-projection","Projection not supported",{inSpatialReference:g,outSpatialReference:y})}(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(r);const F=_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__["default"].fromLayerJSON({fields:o,dateFieldsTimeReference:o.some((e=>"esriFieldTypeDate"===e.type))?{timeZoneIANA:_time_timeZoneUtils_js__WEBPACK_IMPORTED_MODULE_13__.utc}:null}),w=await this._snapshotFeatures({fieldsIndex:F,geometryType:n,objectIdField:c,spatialReference:y},r.signal);return this._queryEngine=new _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__.QueryEngine({fieldsIndex:F,geometryType:n,hasM:!1,hasZ:!1,objectIdField:c,spatialReference:y,timeInfo:null,featureStore:new _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__["default"]({geometryType:n,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(w),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)((e=>this._snapshotFeatures(this._queryEngine,e))),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.WFSLayer").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures({objectIdField:e,geometryType:t,spatialReference:r,fieldsIndex:a},u){const p=await (0,_ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getFeature)(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:u});(0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.validateGeoJSON)(p,this._getFeatureSpatialReference.wkid),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(u);const h=(0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.createOptimizedFeatures)(p,{geometryType:t,hasZ:!1,objectIdField:e});if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(r,this._getFeatureSpatialReference))for(const s of h)null!=s.geometry&&(s.geometry=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertFromGeometry)((0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)((0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertToGeometry)(s.geometry,t,!1,!1),this._getFeatureSpatialReference,r)));let f=1;for(const s of h){const t={};(0,_support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__.mixAttributes)(a,t,s.attributes,!0),s.attributes=t,null==t[e]&&(s.objectId=t[e]=f++)}return h}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createFeatureEditErrorResult: () => (/* binding */ f),
/* harmony export */   createFeatureEditSuccessResult: () => (/* binding */ d),
/* harmony export */   loadGeometryEngineForSimplify: () => (/* binding */ I),
/* harmony export */   mixAttributes: () => (/* binding */ p),
/* harmony export */   parseStringDateFieldValues: () => (/* binding */ g),
/* harmony export */   simplify: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_date_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/date.js */ "./node_modules/@arcgis/core/core/date.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class u{constructor(){this.code=null,this.description=null}}class c{constructor(t){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=t}}function f(t){return new c(t)}class a{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function d(t){return new a(t)}const m=new Set;function p(t,n,i,o=!1){m.clear();for(const s in i){const l=t.get(s);if(!l)continue;const u=h(l,i[s]);if(m.add(l.name),l&&(o||l.editable)){const t=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.validateFieldValue)(l,u);if(t)return f((0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.validationErrorToString)(t,l,u));n[l.name]=u}}for(const e of t?.requiredFields??[])if(!m.has(e.name))return f(`missing required field "${e.name}"`);return null}function g(n,e){if(n?.length)for(const{name:r}of n)"string"==typeof e[r]&&(e[r]=(0,_core_date_js__WEBPACK_IMPORTED_MODULE_0__.parseDate)(e[r]))}function h(n,e){let r=e;return (0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isNumericField)(n)&&"string"==typeof e?r=parseFloat(e):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isStringField)(n)&&null!=e&&"string"!=typeof e?r=String(e):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.isDateField)(n)&&"string"==typeof e&&(r=(0,_core_date_js__WEBPACK_IMPORTED_MODULE_0__.parseDate)(e)),(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_2__.sanitizeNullFieldValue)(r)}let y;function w(t,e){if(!t||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.isValid)(e))return t;if("rings"in t||"paths"in t){if(null==y)throw new TypeError("geometry engine not loaded");return y.simplify(e,t)}return t}async function j(){return null==y&&(y=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js"))),y}async function I(t,e){!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_1__.isValid)(t)||"esriGeometryPolygon"!==e&&"esriGeometryPolyline"!==e||await j()}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19zb3VyY2VzX1dGU1NvdXJjZVdvcmtlcl9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDZzNCLFFBQVEsY0FBYyxtREFBbUQsVUFBVSxvREFBb0QsZ0JBQWdCLE1BQU0sa0hBQWtILElBQUksZ0RBQWdELENBQUMsZ0ZBQUMseUJBQXlCLHFJQUFxSSxJQUFJLE1BQU0sa0ZBQUMsTUFBTSxNQUFNLFVBQVUsc0RBQUMsc0RBQXNELDJDQUEyQyxFQUFFLHFFQUFDLElBQUksUUFBUSxnRUFBQyxnQkFBZ0IsNEVBQTRFLGFBQWEsd0RBQUMsQ0FBQyxNQUFNLGtDQUFrQyxnRUFBZ0UsV0FBVyw2QkFBNkIsNkRBQUMsRUFBRSwrR0FBK0csNkRBQUMsRUFBRSwrQkFBK0IsRUFBRSw2Q0FBNkMsc0VBQXNFLG1CQUFtQixVQUFVLHNEQUFDLGlGQUFpRix3QkFBd0IsS0FBSyxFQUFFLHFGQUFxRiw0QkFBNEIsS0FBSyxFQUFFLDZGQUE2Rix5QkFBeUIsS0FBSyxFQUFFLDJGQUEyRixzQkFBc0IsS0FBSyxFQUFFLDhGQUE4RiwwQkFBMEIsRUFBRSxnR0FBZ0csaUJBQWlCLCtFQUErRSwrREFBQyx3RkFBd0Ysb0ZBQW9GLE9BQU8sdUNBQXVDLG1FQUFDLEtBQUssdURBQUMsNkNBQTZDLHNEQUFDLGlGQUFpRixRQUFRLEdBQUcsdUNBQXVDLHNFQUFzRSw4QkFBOEIscURBQXFELElBQUksaUNBQWlDLE9BQU8scUNBQXFDLHlCQUF5QixnRUFBZ0UsSUFBSSxjQUFjLDZEQUFDLG1IQUFtSCxpREFBaUQsRUFBRSxvRUFBQywwQ0FBMEMscUVBQUMsSUFBSSxRQUFRLDRFQUFDLElBQUksdUNBQXVDLEVBQUUsSUFBSSxrRkFBQyxvRkFBb0YsK0VBQUMsQ0FBQyxtRUFBQyxDQUFDLDZFQUFDLDJEQUEyRCxRQUFRLGtCQUFrQixXQUFXLHVFQUFDLHVFQUF1RSxVQUErQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKempJO0FBQ0E7QUFDQTtBQUNBO0FBQzBULFFBQVEsY0FBYyxzQ0FBc0MsUUFBUSxlQUFlLG9IQUFvSCxjQUFjLGdCQUFnQixRQUFRLGVBQWUsa0VBQWtFLGNBQWMsZ0JBQWdCLGdCQUFnQix1QkFBdUIsVUFBVSxrQkFBa0IsaUJBQWlCLGVBQWUsa0JBQWtCLHFDQUFxQyxRQUFRLDBFQUFDLE1BQU0sY0FBYywrRUFBQyxTQUFTLGFBQWEsMkZBQTJGLE9BQU8sSUFBSSxZQUFZLGdCQUFnQix1QkFBdUIsT0FBTyxrQ0FBa0Msd0RBQUMsUUFBUSxnQkFBZ0IsUUFBUSxPQUFPLHNFQUFDLHdDQUF3QyxxRUFBQyw2Q0FBNkMsbUVBQUMsNEJBQTRCLHdEQUFDLEtBQUssOEVBQUMsSUFBSSxNQUFNLGdCQUFnQixRQUFRLG1GQUFDLGFBQWEsNkJBQTZCLDZEQUE2RCx1QkFBdUIsU0FBUyxtQkFBbUIseUJBQXlCLHdYQUFvRCxJQUFJLHNCQUFzQixDQUFDLG1GQUFDLHNFQUF3UCIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9XRlNTb3VyY2VXb3JrZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL3N1cHBvcnQvc291cmNlVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjcmVhdGVUYXNrIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIHMsaXNBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Y29udmVydEZyb21HZW9tZXRyeSBhcyBvLGNvbnZlcnRUb0dlb21ldHJ5IGFzIG59ZnJvbVwiLi4vZmVhdHVyZUNvbnZlcnNpb25VdGlscy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uL2RhdGEvRmVhdHVyZVN0b3JlLmpzXCI7aW1wb3J0e2NoZWNrUHJvamVjdGlvblN1cHBvcnQgYXMgcCxwcm9qZWN0IGFzIGx9ZnJvbVwiLi4vZGF0YS9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZSBhcyBofWZyb21cIi4uL2RhdGEvUXVlcnlFbmdpbmUuanNcIjtpbXBvcnR7dmFsaWRhdGVHZW9KU09OIGFzIGMsY3JlYXRlT3B0aW1pemVkRmVhdHVyZXMgYXMgbX1mcm9tXCIuL2dlb2pzb24vZ2VvanNvbi5qc1wiO2ltcG9ydHttaXhBdHRyaWJ1dGVzIGFzIHl9ZnJvbVwiLi9zdXBwb3J0L3NvdXJjZVV0aWxzLmpzXCI7aW1wb3J0e2dldEdldEZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlIGFzIGYsZ2V0RmVhdHVyZSBhcyBnfWZyb21cIi4uLy4uL29nYy93ZnNVdGlscy5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnR7dXRjIGFzIF99ZnJvbVwiLi4vLi4vLi4vdGltZS90aW1lWm9uZVV0aWxzLmpzXCI7Y2xhc3MgRntjb25zdHJ1Y3Rvcigpe3RoaXMuX3F1ZXJ5RW5naW5lPW51bGwsdGhpcy5fY3VzdG9tUGFyYW1ldGVycz1udWxsfWRlc3Ryb3koKXt0aGlzLl9xdWVyeUVuZ2luZT8uZGVzdHJveSgpLHRoaXMuX3F1ZXJ5RW5naW5lPW51bGx9YXN5bmMgbG9hZChlLHIpe2NvbnN0e2dldEZlYXR1cmVVcmw6YSxnZXRGZWF0dXJlT3V0cHV0Rm9ybWF0OmksZmllbGRzOm8sZ2VvbWV0cnlUeXBlOm4sZmVhdHVyZVR5cGU6bCxvYmplY3RJZEZpZWxkOmMsY3VzdG9tUGFyYW1ldGVyczptfT1lLHtzcGF0aWFsUmVmZXJlbmNlOnksZ2V0RmVhdHVyZVNwYXRpYWxSZWZlcmVuY2U6Z309ZihhLGwsZS5zcGF0aWFsUmVmZXJlbmNlKTt0aGlzLl9mZWF0dXJlVHlwZT1sLHRoaXMuX2N1c3RvbVBhcmFtZXRlcnM9bSx0aGlzLl9nZXRGZWF0dXJlVXJsPWEsdGhpcy5fZ2V0RmVhdHVyZU91dHB1dEZvcm1hdD1pLHRoaXMuX2dldEZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlPWc7dHJ5e2F3YWl0IHAoZyx5KX1jYXRjaHt0aHJvdyBuZXcgdChcInVuc3VwcG9ydGVkLXByb2plY3Rpb25cIixcIlByb2plY3Rpb24gbm90IHN1cHBvcnRlZFwiLHtpblNwYXRpYWxSZWZlcmVuY2U6ZyxvdXRTcGF0aWFsUmVmZXJlbmNlOnl9KX1zKHIpO2NvbnN0IEY9ZC5mcm9tTGF5ZXJKU09OKHtmaWVsZHM6byxkYXRlRmllbGRzVGltZVJlZmVyZW5jZTpvLnNvbWUoKGU9PlwiZXNyaUZpZWxkVHlwZURhdGVcIj09PWUudHlwZSkpP3t0aW1lWm9uZUlBTkE6X306bnVsbH0pLHc9YXdhaXQgdGhpcy5fc25hcHNob3RGZWF0dXJlcyh7ZmllbGRzSW5kZXg6RixnZW9tZXRyeVR5cGU6bixvYmplY3RJZEZpZWxkOmMsc3BhdGlhbFJlZmVyZW5jZTp5fSxyLnNpZ25hbCk7cmV0dXJuIHRoaXMuX3F1ZXJ5RW5naW5lPW5ldyBoKHtmaWVsZHNJbmRleDpGLGdlb21ldHJ5VHlwZTpuLGhhc006ITEsaGFzWjohMSxvYmplY3RJZEZpZWxkOmMsc3BhdGlhbFJlZmVyZW5jZTp5LHRpbWVJbmZvOm51bGwsZmVhdHVyZVN0b3JlOm5ldyB1KHtnZW9tZXRyeVR5cGU6bixoYXNNOiExLGhhc1o6ITF9KX0pLHRoaXMuX3F1ZXJ5RW5naW5lLmZlYXR1cmVTdG9yZS5hZGRNYW55KHcpLHtleHRlbnQ6KGF3YWl0IHRoaXMuX3F1ZXJ5RW5naW5lLmZldGNoUmVjb21wdXRlZEV4dGVudHMoKSkuZnVsbEV4dGVudH19YXN5bmMgYXBwbHlFZGl0cygpe3Rocm93IG5ldyB0KFwid2ZzLXNvdXJjZTplZGl0aW5nLW5vdC1zdXBwb3J0ZWRcIixcImFwcGx5RWRpdHMoKSBpcyBub3Qgc3VwcG9ydGVkIG9uIFdGU0xheWVyXCIpfWFzeW5jIHF1ZXJ5RmVhdHVyZXMoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnkoZSx0LnNpZ25hbCl9YXN5bmMgcXVlcnlGZWF0dXJlQ291bnQoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JDb3VudChlLHQuc2lnbmFsKX1hc3luYyBxdWVyeU9iamVjdElkcyhlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvcklkcyhlLHQuc2lnbmFsKX1hc3luYyBxdWVyeUV4dGVudChlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvckV4dGVudChlLHQuc2lnbmFsKX1hc3luYyBxdWVyeVNuYXBwaW5nKGUsdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yU25hcHBpbmcoZSx0LnNpZ25hbCl9YXN5bmMgcmVmcmVzaChzKXtyZXR1cm4gdGhpcy5fY3VzdG9tUGFyYW1ldGVycz1zLHRoaXMuX3NuYXBzaG90VGFzaz8uYWJvcnQoKSx0aGlzLl9zbmFwc2hvdFRhc2s9ZSgoZT0+dGhpcy5fc25hcHNob3RGZWF0dXJlcyh0aGlzLl9xdWVyeUVuZ2luZSxlKSkpLHRoaXMuX3NuYXBzaG90VGFzay5wcm9taXNlLnRoZW4oKGU9Pnt0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuY2xlYXIoKSxlJiZ0aGlzLl9xdWVyeUVuZ2luZS5mZWF0dXJlU3RvcmUuYWRkTWFueShlKX0pLChlPT57dGhpcy5fcXVlcnlFbmdpbmUuZmVhdHVyZVN0b3JlLmNsZWFyKCksYShlKXx8ci5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5XRlNMYXllclwiKS5lcnJvcihuZXcgdChcIndmcy1sYXllcjpnZXRmZWF0dXJlLWVycm9yXCIsXCJBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIEdldEZlYXR1cmUgcmVxdWVzdFwiLHtlcnJvcjplfSkpfSkpLGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCkse2V4dGVudDooYXdhaXQgdGhpcy5fcXVlcnlFbmdpbmUuZmV0Y2hSZWNvbXB1dGVkRXh0ZW50cygpKS5mdWxsRXh0ZW50fX1hc3luYyBfd2FpdFNuYXBzaG90Q29tcGxldGUoKXtpZih0aGlzLl9zbmFwc2hvdFRhc2smJiF0aGlzLl9zbmFwc2hvdFRhc2suZmluaXNoZWQpe3RyeXthd2FpdCB0aGlzLl9zbmFwc2hvdFRhc2sucHJvbWlzZX1jYXRjaHt9cmV0dXJuIHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCl9fWFzeW5jIF9zbmFwc2hvdEZlYXR1cmVzKHtvYmplY3RJZEZpZWxkOmUsZ2VvbWV0cnlUeXBlOnQsc3BhdGlhbFJlZmVyZW5jZTpyLGZpZWxkc0luZGV4OmF9LHUpe2NvbnN0IHA9YXdhaXQgZyh0aGlzLl9nZXRGZWF0dXJlVXJsPz9cIlwiLHRoaXMuX2ZlYXR1cmVUeXBlLnR5cGVOYW1lLHRoaXMuX2dldEZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlLHRoaXMuX2dldEZlYXR1cmVPdXRwdXRGb3JtYXQse2N1c3RvbVBhcmFtZXRlcnM6dGhpcy5fY3VzdG9tUGFyYW1ldGVycyxzaWduYWw6dX0pO2MocCx0aGlzLl9nZXRGZWF0dXJlU3BhdGlhbFJlZmVyZW5jZS53a2lkKSxzKHUpO2NvbnN0IGg9bShwLHtnZW9tZXRyeVR5cGU6dCxoYXNaOiExLG9iamVjdElkRmllbGQ6ZX0pO2lmKCFpKHIsdGhpcy5fZ2V0RmVhdHVyZVNwYXRpYWxSZWZlcmVuY2UpKWZvcihjb25zdCBzIG9mIGgpbnVsbCE9cy5nZW9tZXRyeSYmKHMuZ2VvbWV0cnk9byhsKG4ocy5nZW9tZXRyeSx0LCExLCExKSx0aGlzLl9nZXRGZWF0dXJlU3BhdGlhbFJlZmVyZW5jZSxyKSkpO2xldCBmPTE7Zm9yKGNvbnN0IHMgb2YgaCl7Y29uc3QgdD17fTt5KGEsdCxzLmF0dHJpYnV0ZXMsITApLHMuYXR0cmlidXRlcz10LG51bGw9PXRbZV0mJihzLm9iamVjdElkPXRbZV09ZisrKX1yZXR1cm4gaH19ZXhwb3J0e0YgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3BhcnNlRGF0ZSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvZGF0ZS5qc1wiO2ltcG9ydHtpc1ZhbGlkIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7dmFsaWRhdGVGaWVsZFZhbHVlIGFzIGUsdmFsaWRhdGlvbkVycm9yVG9TdHJpbmcgYXMgcixpc051bWVyaWNGaWVsZCBhcyBpLGlzU3RyaW5nRmllbGQgYXMgbyxpc0RhdGVGaWVsZCBhcyBzLHNhbml0aXplTnVsbEZpZWxkVmFsdWUgYXMgbH1mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtjbGFzcyB1e2NvbnN0cnVjdG9yKCl7dGhpcy5jb2RlPW51bGwsdGhpcy5kZXNjcmlwdGlvbj1udWxsfX1jbGFzcyBje2NvbnN0cnVjdG9yKHQpe3RoaXMuZXJyb3I9bmV3IHUsdGhpcy5nbG9iYWxJZD1udWxsLHRoaXMub2JqZWN0SWQ9bnVsbCx0aGlzLnN1Y2Nlc3M9ITEsdGhpcy51bmlxdWVJZD1udWxsLHRoaXMuZXJyb3IuZGVzY3JpcHRpb249dH19ZnVuY3Rpb24gZih0KXtyZXR1cm4gbmV3IGModCl9Y2xhc3MgYXtjb25zdHJ1Y3Rvcih0KXt0aGlzLmdsb2JhbElkPW51bGwsdGhpcy5zdWNjZXNzPSEwLHRoaXMub2JqZWN0SWQ9dGhpcy51bmlxdWVJZD10fX1mdW5jdGlvbiBkKHQpe3JldHVybiBuZXcgYSh0KX1jb25zdCBtPW5ldyBTZXQ7ZnVuY3Rpb24gcCh0LG4saSxvPSExKXttLmNsZWFyKCk7Zm9yKGNvbnN0IHMgaW4gaSl7Y29uc3QgbD10LmdldChzKTtpZighbCljb250aW51ZTtjb25zdCB1PWgobCxpW3NdKTtpZihtLmFkZChsLm5hbWUpLGwmJihvfHxsLmVkaXRhYmxlKSl7Y29uc3QgdD1lKGwsdSk7aWYodClyZXR1cm4gZihyKHQsbCx1KSk7bltsLm5hbWVdPXV9fWZvcihjb25zdCBlIG9mIHQ/LnJlcXVpcmVkRmllbGRzPz9bXSlpZighbS5oYXMoZS5uYW1lKSlyZXR1cm4gZihgbWlzc2luZyByZXF1aXJlZCBmaWVsZCBcIiR7ZS5uYW1lfVwiYCk7cmV0dXJuIG51bGx9ZnVuY3Rpb24gZyhuLGUpe2lmKG4/Lmxlbmd0aClmb3IoY29uc3R7bmFtZTpyfW9mIG4pXCJzdHJpbmdcIj09dHlwZW9mIGVbcl0mJihlW3JdPXQoZVtyXSkpfWZ1bmN0aW9uIGgobixlKXtsZXQgcj1lO3JldHVybiBpKG4pJiZcInN0cmluZ1wiPT10eXBlb2YgZT9yPXBhcnNlRmxvYXQoZSk6byhuKSYmbnVsbCE9ZSYmXCJzdHJpbmdcIiE9dHlwZW9mIGU/cj1TdHJpbmcoZSk6cyhuKSYmXCJzdHJpbmdcIj09dHlwZW9mIGUmJihyPXQoZSkpLGwocil9bGV0IHk7ZnVuY3Rpb24gdyh0LGUpe2lmKCF0fHwhbihlKSlyZXR1cm4gdDtpZihcInJpbmdzXCJpbiB0fHxcInBhdGhzXCJpbiB0KXtpZihudWxsPT15KXRocm93IG5ldyBUeXBlRXJyb3IoXCJnZW9tZXRyeSBlbmdpbmUgbm90IGxvYWRlZFwiKTtyZXR1cm4geS5zaW1wbGlmeShlLHQpfXJldHVybiB0fWFzeW5jIGZ1bmN0aW9uIGooKXtyZXR1cm4gbnVsbD09eSYmKHk9YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlFbmdpbmVKU09OLmpzXCIpKSx5fWFzeW5jIGZ1bmN0aW9uIEkodCxlKXshbih0KXx8XCJlc3JpR2VvbWV0cnlQb2x5Z29uXCIhPT1lJiZcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCIhPT1lfHxhd2FpdCBqKCl9ZXhwb3J0e2YgYXMgY3JlYXRlRmVhdHVyZUVkaXRFcnJvclJlc3VsdCxkIGFzIGNyZWF0ZUZlYXR1cmVFZGl0U3VjY2Vzc1Jlc3VsdCxJIGFzIGxvYWRHZW9tZXRyeUVuZ2luZUZvclNpbXBsaWZ5LHAgYXMgbWl4QXR0cmlidXRlcyxnIGFzIHBhcnNlU3RyaW5nRGF0ZUZpZWxkVmFsdWVzLHcgYXMgc2ltcGxpZnl9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9