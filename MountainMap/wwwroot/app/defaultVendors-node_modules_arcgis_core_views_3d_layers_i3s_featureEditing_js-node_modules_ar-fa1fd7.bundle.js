"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_3d_layers_i3s_featureEditing_js-node_modules_ar-fa1fd7"],{

/***/ "./node_modules/@arcgis/core/core/AsyncUpdate.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/core/AsyncUpdate.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AsyncUpdate: () => (/* binding */ d),
/* harmony export */   AsyncUpdateMixin: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./accessorSupport/tracking.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking.js");
/* harmony import */ var _accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _accessorSupport_tracking_SimpleTrackingTarget_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./accessorSupport/tracking/SimpleTrackingTarget.js */ "./node_modules/@arcgis/core/core/accessorSupport/tracking/SimpleTrackingTarget.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=e=>{let n=class extends e{constructor(){super(...arguments),this._numUpdating=0,this._asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(t,e){return c((e=>this._updateAsync(t,e)),e)}async _updateAsync(t,e){if(!this._startAsyncUpdate(t)){try{const s=await e();this._set(t,s)}catch(n){_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).warn(`Async update of "${String(t)}" failed. Async update functions should not throw exceptions.`)}this._endAsyncUpdate(t)&&this._updateAsync(t,e)}}_startAsyncUpdate(t){const e=this._asyncUpdateState.get(t)??p.None;return e&p.Updating?(this._asyncUpdateState.set(t,e|p.Invalidated),!0):(++this._numUpdating,this._asyncUpdateState.set(t,e|p.Updating),!1)}_endAsyncUpdate(t){--this._numUpdating;const e=(this._asyncUpdateState.get(t)??p.None)&~p.Updating;return e&p.Invalidated?(this._asyncUpdateState.set(t,e&~p.Invalidated),!0):(this._asyncUpdateState.set(t,e),!1)}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],n.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],n.prototype,"_numUpdating",void 0),n=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.core.AsyncUpdate")],n),n};var p;function c(t,e){const s=()=>{i&&!p&&t(a)},a=()=>{if(!i||p)return e();i.clear(),p=!0;const t=(0,_accessorSupport_tracking_js__WEBPACK_IMPORTED_MODULE_3__.runTracked)(i,e);return p=!1,t},r=()=>{i&&(i.destroy(),i=null)};let i=new _accessorSupport_tracking_SimpleTrackingTarget_js__WEBPACK_IMPORTED_MODULE_6__.SimpleTrackingTarget(s),p=!1;return t(a),{remove:r}}!function(t){t[t.None=0]="None",t[t.Updating=1]="Updating",t[t.Invalidated=2]="Invalidated"}(p||(p={}));let d=class extends(i(_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){};d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.core.AsyncUpdate")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/featureEditing.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/featureEditing.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createInteractiveEditSession: () => (/* binding */ i),
/* harmony export */   normalizeEditResultsEvent: () => (/* binding */ u),
/* harmony export */   processAttributeEdits: () => (/* binding */ f),
/* harmony export */   processGeometryEdits: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../layers/support/featureQueryAll.js */ "./node_modules/@arcgis/core/layers/support/featureQueryAll.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o={setAttribute(){},rollback(){},commit(){}};var r;function i(e,n){const i=n.attributes[e.objectIdField];if(null==i)return o;const s=e.sessions.get(i);if(s)return s;const l=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(n.attributes),u=new Set,a=e.i3sOverrides.createInteractiveEditSession(i),d=new Map,f=(e,t)=>{const n=d.get(e);if(null==n){const n=t.indexOf(i);return d.set(e,n),n}return n};let c=r.EDITING;const g={setAttribute(t,o){if(c!==r.EDITING)return;const i=e.fieldsIndex.get(t);if(!i)return;const s=e.attributeStorageInfo.findIndex((e=>e.name===i.name));if(s<0)return;if(!(t in l))throw new Error(`Attribute "${t}" is not an attribute of the edited feature.`);a.setAttribute(s,o);const d=e.attributeStorageInfo[s];let g=!1;u.add(t),e.forEachNode(((t,r)=>{const i=f(t,r);if(-1===i)return;const s=e.getAttributeData(t.index);if(s){const r=s[d.name];r&&(r[i]=o,e.setAttributeData(t.index,s,n),g=!0)}})),g&&e.clearMemCache()},rollback(){if(c===r.EDITING){for(const e of u)this.setAttribute(e,l[e]);a.remove(),c=r.ROLLED_BACK,e.sessions.delete(i)}},commit(){c===r.EDITING&&(a.remove(),c=r.COMMITTED,e.sessions.delete(i))}};return e.sessions.set(i,g),g}function s(e,t,n){const{gidToFeatureInfo:o,oidToFeatureInfo:r,fieldsIndex:i,objectIdField:s,globalIdField:l,featureOrIdentifierList:u}=n;if(!n.featuresResolved&&null!=u){for(const e of u){const t={feature:null,oid:-1,gid:null};if("attributes"in e){t.feature=e;const n=e.attributes;if(null!=n)for(const e in n){if(-1!==t.oid&&null!=t.gid)break;const o=i.normalizeFieldName(e);o===s&&(t.oid=n[e]??-1),o===l&&(t.gid=n[e])}}else t.oid=e.objectId??-1,t.gid=e.globalId;null!=t.gid&&o.set(t.gid,t),-1!==t.oid&&r.set(t.oid,t)}n.featuresResolved=!0}return(-1!==e?r.get(e):null)??(null!=t?o.get(t):null)}function l(e,t,n,o,r=null,i=!0){const l=[],u={gidToFeatureInfo:new Map,oidToFeatureInfo:new Map,featuresResolved:null==n,fieldsIndex:e.fieldsIndex,objectIdField:e.objectIdField,globalIdField:e.globalIdField,featureOrIdentifierList:n};for(const a of t){if(null!=a.error)continue;const e=a.objectId??-1,t=a.globalId,n=(-1===e||i?s(e,t,u):null)??{feature:null,oid:e,gid:t},d={oid:-1===e?n.oid:e,gid:t??n.gid,feature:n.feature,result:a};if(l.push(d),-1===d.oid&&null!=d.gid&&null!=r&&(d.oid=r.get(d.gid)??-1),-1===d.oid&&null!=d.gid){let e=o.get(d.gid);null==e&&(e=[],o.set(d.gid,e)),e.push(d)}}return l}async function u(e,t){const n=new Map,o=l(e,t.addedFeatures,t.edits?.addFeatures,n),r=l(e,t.updatedFeatures,t.edits?.updateFeatures,n),i=l(e,t.deletedFeatures,t.edits?.deleteFeatures,n,t.globalIdToObjectId,!1);return n.size>0&&await a(e,n),{adds:o.filter((e=>-1!==e.oid)),updates:r.filter((e=>-1!==e.oid)),deletes:i.filter((e=>-1!==e.oid))}}async function a(t,o){const r=t.i3sOverrides.layer.associatedLayer;if(null==r?.globalIdField)return;const i=r.createQuery(),{objectIdField:s,globalIdField:l}=r;i.where=Array.from(o.keys()).map((e=>`${l}='${e}'`)).join(" OR "),i.returnGeometry=!1,i.outFields=[s,l],i.cacheHint=!1;const u=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.resultOrAbort)((0,_layers_support_featureQueryAll_js__WEBPACK_IMPORTED_MODULE_2__.queryAllJSON)(r,i));if(!u.ok)return;const a=u.value.features;for(const e of a){const t=e.attributes[l],n=e.attributes[s];if(null==t||null==n||-1===n)continue;const r=o.get(t);if(null!=r)for(const e of r)e.oid=n}}function d(e,t){const n=new Map,o=t.adds,r=t.updates,i=t.deletes;if(o.length>0)for(const s of o){const e=s.oid,t=s.feature;"mesh"===t?.geometry?.type&&n.set(e,t.geometry)}if(r.length>0)for(const s of r){const e=s.oid,t=s.feature;"mesh"===t?.geometry?.type&&n.set(e,t.geometry)}if(i.length>0)for(const s of i)n.set(s.oid,null);for(const[s,l]of n)e.i3sOverrides.updateGeometry(s,l)}function f(e,t){const n=g(e,t),o=c(e,t);if(0===n.size&&0===o.size)return;const r=new Map;for(let c=0;c<e.attributeStorageInfo.length;c++)r.set(e.attributeStorageInfo[c].name,c);let i=!1;n.forEach(((t,n)=>{const o=e.getAttributeData(n);let s=!1;t.forEach(((t,n)=>{const l=null!=o?o[n]:null,u=r.get(n);for(const{featureIndex:o,value:r,featureId:a}of t)l&&(l[o]=r,s=!0,i=!0),e.i3sOverrides.updateAttributeValue(a,u,r)})),s&&e.setAttributeData(n,o,null)})),i&&e.clearMemCache();const{fieldsIndex:s,i3sOverrides:l,objectIdField:u,globalIdField:a}=e,d=l.layer.associatedLayer?.infoFor3D,f=new Set(d?[...Object.values(d.assetMapFieldRoles),...Object.values(d.transformFieldRoles)]:[]);for(const[c,g]of o){l.featureAdded(c);const{attributes:e}=g;for(const t in e){if(t!==u&&t!==a&&f.has(t))continue;const n=s.normalizeFieldName(t),o=null!=n?r.get(n):null;if(null==o)continue;const i=e[t];l.updateAttributeValue(c,o,i)}}}function c(e,t){const n=new Map,o=t.adds;if(!o||0===o.length||null==e.globalIdField)return n;for(const r of o){const e=r.oid,t=r.feature;"mesh"===t?.geometry?.type&&n.set(e,t)}return n}function g(e,t){const n=t.updates;if(!n||0===n.length)return new p;const o=new p,r=new Map;for(let i=0;i<e.attributeStorageInfo.length;i++)r.set(e.attributeStorageInfo[i].name,i);return e.forEachNode(((t,r)=>{for(const i of n){if(null==i.feature)continue;const n=i.feature,s=i.oid,l=r.indexOf(s);for(const r in n.attributes){const i=e.fieldsIndex.normalizeFieldName(r),u=I(o,t.index,i),a=n.attributes[r];u.push({featureIndex:l,featureId:s,value:a})}}})),o}function I(e,t,n){const o=b(e,t),r=null!=n&&o.get(n);if(r)return r;const i=new Array;return o.set(n,i),i}function b(e,t){const n=e.get(t);if(n)return n;const o=new m;return e.set(t,o),o}!function(e){e[e.EDITING=0]="EDITING",e[e.ROLLED_BACK=1]="ROLLED_BACK",e[e.COMMITTED=2]="COMMITTED"}(r||(r={}));const m=Map,p=Map;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   PopupSceneLayerView: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../layers/support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=i=>{let c=class extends i{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:s});if(!(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_8__.getFetchPopupTemplate)(s,e))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){this._validateFetchPopupFeatures(r);const s=null!=r?r.clientGraphics:null;if(!s||0===s.length)return[];const i="scene"===this.layer.type&&null!=this.layer.associatedLayer?this.layer.associatedLayer:this.layer;let c=[];"fieldsIndex"in this.layer&&(c=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__.unpackFieldNames)(this.layer.fieldsIndex,await (0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_8__.getRequiredFields)(i,(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_8__.getFetchPopupTemplate)(this.layer,r)))),await this.prepareFetchPopupFeatures(c);const l=new Set,n=[],u=[];for(const t of s)(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_7__.populateMissingFields)(c,t,l)?u.push(t):n.push(t);return 0===u.length?n:this.whenGraphicAttributes(u,[...l]).catch((()=>u)).then((e=>n.concat(e)))}};return c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.support.PopupSceneLayerView")],c),c};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SceneLayerViewRequiredFields: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_AsyncUpdate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/AsyncUpdate.js */ "./node_modules/@arcgis/core/core/AsyncUpdate.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let c=class extends((0,_core_AsyncUpdate_js__WEBPACK_IMPORTED_MODULE_2__.AsyncUpdateMixin)(_core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"])){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:e},definitionExpressionFields:r},rendererFields:s,labelingFields:t,viewFilterFields:i}=this;return (0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.fixFields)(e,[...r??[],...s??[],...t??[],...i??[]])}constructor(e){super(e)}initialize(){this.addHandles([this.autoUpdateAsync("rendererFields",(async()=>{const{fieldsIndex:e,renderer:r}=this.layer;return r?p((s=>r.collectRequiredFields(s,e))):null})),this.autoUpdateAsync("labelingFields",(async()=>{const{layer:e}=this;return e.labelsVisible?p((r=>(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.collectLabelingFields)(r,e))):null})),this.autoUpdateAsync("viewFilterFields",(()=>{const{layer:e,filter:r}=this.layerView;return p((s=>(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.collectFilterFields)(s,e,r)))}))])}};async function p(e){const r=new Set;try{return await e(r),Array.from(r).sort()}catch(s){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(d).error(s),null}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"layer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"requiredFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"rendererFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"labelingFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],c.prototype,"viewFilterFields",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)(d)],c);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defineFieldProperties: () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function i(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:i,layer:{fieldsIndex:t},requiredFields:l}=this;return i.outFields?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(t,[...(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.unpackFieldNames)(t,i.outFields),...l]):(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(t,l)}}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/SceneLayerView.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/SceneLayerView.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ j)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/maybeUpdating.js */ "./node_modules/@arcgis/core/core/maybeUpdating.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _LayerView_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f="esri.views.layers.SceneLayerView",w=_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(f);let E=class extends _LayerView_js__WEBPACK_IMPORTED_MODULE_12__["default"]{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1,this._abortController=new AbortController}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return (0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_4__.unwrapUpdating)(this._layerFilter)}get _layerFilter(){const e=this.layer?.filter;if(null==e||e.geometries.length<1)return null;const r=this._geometryEngine;if(null==r||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return _core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_4__.updating;const o=e.geometries.at(0).spatialReference,i=e.geometries.toArray().map((e=>{try{e=r.simplify(e)}catch(t){return w.warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==e)return null;if(e.spatialReference.equals(o))return e;try{return (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_11__.project)(e,o)}catch(t){return w.warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}})).filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_1__.isSome).sort(((e,t)=>e.extent.xmin-t.extent.xmin)),l=new Set,s=new Array,a=new Array;for(let t of i){const e=t.extent.xmin;if(s.length=0,l.forEach((o=>{if(e>=o.extent.xmax)return a.push(o),void l.delete(o);t.extent.ymin<=o.extent.ymax&&t.extent.ymax>=o.extent.ymin&&r.intersects(t,o)&&s.push(o)})),s.length>0){s.push(t);try{t=r.union(s)}catch(m){w.warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}s.pop(),s.forEach((e=>l.delete(e)))}l.add(t)}return l.forEach((e=>a.push(e))),a.length>0?{spatialRelationship:e.spatialRelationship,geometries:a}:null}get _filterNeedsProjectionEngine(){const e=this.layer.filter;if(null==e||e.geometries.length<=1)return!1;const t=e.geometries.at(0).spatialReference;return e.geometries.some((({spatialReference:e})=>!e.equals(t)&&!(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_11__.canProjectWithoutEngine)(e,t)))}get layerFilterUpdating(){return (0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_4__.isUpdating)(this._layerFilter)}initialize(){const{signal:e}=this._abortController;(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.whenOnce)((()=>this.destroyed||!this._geometryEngine&&this.layer?.filter?.geometries?.length),e).then((async()=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAbortError)(e),this._geometryEngine=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngine_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../geometry/geometryEngine.js */ "./node_modules/@arcgis/core/geometry/geometryEngine.js"))})).catch(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfNotAbortError),this._projectionEngineLoaded=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_11__.isLoaded)(),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.whenOnce)((()=>this.destroyed||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine),e).then((async()=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAbortError)(e),await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_11__.load)(),this._projectionEngineLoaded=!0})).catch(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfNotAbortError)}destroy(){this._abortController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.abortMaybe)(this._abortController)}highlight(e){throw new Error("Not implemented")}queryFeatures(e,t){throw new Error("Not implemented")}queryObjectIds(e,t){throw new Error("Not implemented")}queryFeatureCount(e,t){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(e,t){throw new Error("Not implemented")}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"availableFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"maximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],E.prototype,"maximumNumberOfFeaturesExceeded",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],E.prototype,"layerFilter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],E.prototype,"_layerFilter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"_geometryEngine",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"_projectionEngineLoaded",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"_filterNeedsProjectionEngine",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],E.prototype,"layerFilterUpdating",null),E=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)(f)],E);const j=E;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzNkX2xheWVyc19pM3NfZmVhdHVyZUVkaXRpbmdfanMtbm9kZV9tb2R1bGVzX2FyLWZhMWZkNy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDZ1ksWUFBWSxzQkFBc0IsY0FBYyx1RUFBdUUsZUFBZSwyQkFBMkIscUJBQXFCLHdDQUF3Qyx3QkFBd0IsK0JBQStCLElBQUksa0JBQWtCLGVBQWUsU0FBUyxrREFBQywwQ0FBMEMsVUFBVSxnRUFBZ0UsaURBQWlELHFCQUFxQiw4Q0FBOEMsMklBQTJJLG1CQUFtQixvQkFBb0IsNERBQTRELGtIQUFrSCxPQUFPLHVEQUFDLEVBQUUsaUZBQUMsRUFBRSxZQUFZLGdDQUFnQyx1REFBQyxFQUFFLGlGQUFDLHlDQUF5Qyx1REFBQyxFQUFFLGlGQUFDLGlDQUFpQyxNQUFNLGdCQUFnQixhQUFhLFlBQVksUUFBUSxvQkFBb0IsZUFBZSxRQUFRLHdFQUFDLE1BQU0sY0FBYyxRQUFRLHlCQUF5QixVQUFVLG1HQUFDLFNBQVMsYUFBYSxVQUFVLGFBQWEsK0VBQStFLFNBQVMsR0FBRyxzQkFBc0Isb0RBQUMsS0FBSyxFQUFFLHVEQUFDLEVBQUUsaUZBQUMsOEJBQTZFOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKanpEO0FBQ0E7QUFDQTtBQUNBO0FBQzZMLFNBQVMsZ0JBQWdCLGFBQWEsYUFBYSxNQUFNLGdCQUFnQixzQ0FBc0Msb0JBQW9CLDBCQUEwQixjQUFjLFFBQVEsb0RBQUMsOEZBQThGLGlCQUFpQixZQUFZLHFCQUFxQixvQkFBb0IsVUFBVSxnQkFBZ0IsU0FBUyxrQkFBa0Isd0JBQXdCLDZCQUE2QixhQUFhLCtEQUErRCxjQUFjLDJDQUEyQyxFQUFFLCtDQUErQyxvQkFBb0Isa0NBQWtDLFNBQVMsZ0NBQWdDLGVBQWUsaUJBQWlCLG9DQUFvQyxNQUFNLGtCQUFrQixrREFB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Q0FBcUMsdURBQUMsRUFBRSxzRkFBQyxnQ0FBZ0MsdURBQUMsRUFBRSxzRkFBQyx3Q0FBd0MsdURBQUMsRUFBRSxzRkFBQyxnREFBZ0QsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksdURBQXVELHVEQUFDLEVBQUUsc0ZBQUMsaUNBQWlDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLG1DQUFtQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSxvQ0FBb0MsdURBQUMsRUFBRSxzRkFBQywwQ0FBMEMsdURBQUMsRUFBRSxzRkFBQyxrREFBa0QsdURBQUMsRUFBRSxzRkFBQyxxREFBcUQsdURBQUMsRUFBRSxzRkFBQyw4Q0FBOEMsdURBQUMsRUFBRSx1RkFBQyxRQUFRLFVBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvQXN5bmNVcGRhdGUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvZmVhdHVyZUVkaXRpbmcuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9zdXBwb3J0L1BvcHVwU2NlbmVMYXllclZpZXcuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9zdXBwb3J0L1NjZW5lTGF5ZXJWaWV3UmVxdWlyZWRGaWVsZHMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9zdXBwb3J0L2ZpZWxkUHJvcGVydGllcy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvbGF5ZXJzL1NjZW5lTGF5ZXJWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyB0fWZyb21cIi4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgZSBmcm9tXCIuL0FjY2Vzc29yLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi9Mb2dnZXIuanNcIjtpbXBvcnR7cnVuVHJhY2tlZCBhcyBufWZyb21cIi4vYWNjZXNzb3JTdXBwb3J0L3RyYWNraW5nLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGF9ZnJvbVwiLi9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyByfWZyb21cIi4vYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7U2ltcGxlVHJhY2tpbmdUYXJnZXQgYXMgb31mcm9tXCIuL2FjY2Vzc29yU3VwcG9ydC90cmFja2luZy9TaW1wbGVUcmFja2luZ1RhcmdldC5qc1wiO2NvbnN0IGk9ZT0+e2xldCBuPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fbnVtVXBkYXRpbmc9MCx0aGlzLl9hc3luY1VwZGF0ZVN0YXRlPW5ldyBNYXB9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX251bVVwZGF0aW5nPjB9YXV0b1VwZGF0ZUFzeW5jKHQsZSl7cmV0dXJuIGMoKGU9PnRoaXMuX3VwZGF0ZUFzeW5jKHQsZSkpLGUpfWFzeW5jIF91cGRhdGVBc3luYyh0LGUpe2lmKCF0aGlzLl9zdGFydEFzeW5jVXBkYXRlKHQpKXt0cnl7Y29uc3Qgcz1hd2FpdCBlKCk7dGhpcy5fc2V0KHQscyl9Y2F0Y2gobil7cy5nZXRMb2dnZXIodGhpcykud2FybihgQXN5bmMgdXBkYXRlIG9mIFwiJHtTdHJpbmcodCl9XCIgZmFpbGVkLiBBc3luYyB1cGRhdGUgZnVuY3Rpb25zIHNob3VsZCBub3QgdGhyb3cgZXhjZXB0aW9ucy5gKX10aGlzLl9lbmRBc3luY1VwZGF0ZSh0KSYmdGhpcy5fdXBkYXRlQXN5bmModCxlKX19X3N0YXJ0QXN5bmNVcGRhdGUodCl7Y29uc3QgZT10aGlzLl9hc3luY1VwZGF0ZVN0YXRlLmdldCh0KT8/cC5Ob25lO3JldHVybiBlJnAuVXBkYXRpbmc/KHRoaXMuX2FzeW5jVXBkYXRlU3RhdGUuc2V0KHQsZXxwLkludmFsaWRhdGVkKSwhMCk6KCsrdGhpcy5fbnVtVXBkYXRpbmcsdGhpcy5fYXN5bmNVcGRhdGVTdGF0ZS5zZXQodCxlfHAuVXBkYXRpbmcpLCExKX1fZW5kQXN5bmNVcGRhdGUodCl7LS10aGlzLl9udW1VcGRhdGluZztjb25zdCBlPSh0aGlzLl9hc3luY1VwZGF0ZVN0YXRlLmdldCh0KT8/cC5Ob25lKSZ+cC5VcGRhdGluZztyZXR1cm4gZSZwLkludmFsaWRhdGVkPyh0aGlzLl9hc3luY1VwZGF0ZVN0YXRlLnNldCh0LGUmfnAuSW52YWxpZGF0ZWQpLCEwKToodGhpcy5fYXN5bmNVcGRhdGVTdGF0ZS5zZXQodCxlKSwhMSl9fTtyZXR1cm4gdChbYSh7cmVhZE9ubHk6ITB9KV0sbi5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLG51bGwpLHQoW2EoKV0sbi5wcm90b3R5cGUsXCJfbnVtVXBkYXRpbmdcIix2b2lkIDApLG49dChbcihcImVzcmkuY29yZS5Bc3luY1VwZGF0ZVwiKV0sbiksbn07dmFyIHA7ZnVuY3Rpb24gYyh0LGUpe2NvbnN0IHM9KCk9PntpJiYhcCYmdChhKX0sYT0oKT0+e2lmKCFpfHxwKXJldHVybiBlKCk7aS5jbGVhcigpLHA9ITA7Y29uc3QgdD1uKGksZSk7cmV0dXJuIHA9ITEsdH0scj0oKT0+e2kmJihpLmRlc3Ryb3koKSxpPW51bGwpfTtsZXQgaT1uZXcgbyhzKSxwPSExO3JldHVybiB0KGEpLHtyZW1vdmU6cn19IWZ1bmN0aW9uKHQpe3RbdC5Ob25lPTBdPVwiTm9uZVwiLHRbdC5VcGRhdGluZz0xXT1cIlVwZGF0aW5nXCIsdFt0LkludmFsaWRhdGVkPTJdPVwiSW52YWxpZGF0ZWRcIn0ocHx8KHA9e30pKTtsZXQgZD1jbGFzcyBleHRlbmRzKGkoZSkpe307ZD10KFtyKFwiZXNyaS5jb3JlLkFzeW5jVXBkYXRlXCIpXSxkKTtleHBvcnR7ZCBhcyBBc3luY1VwZGF0ZSxpIGFzIEFzeW5jVXBkYXRlTWl4aW59O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtyZXN1bHRPckFib3J0IGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0e2Nsb25lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e3F1ZXJ5QWxsSlNPTiBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ZlYXR1cmVRdWVyeUFsbC5qc1wiO2NvbnN0IG89e3NldEF0dHJpYnV0ZSgpe30scm9sbGJhY2soKXt9LGNvbW1pdCgpe319O3ZhciByO2Z1bmN0aW9uIGkoZSxuKXtjb25zdCBpPW4uYXR0cmlidXRlc1tlLm9iamVjdElkRmllbGRdO2lmKG51bGw9PWkpcmV0dXJuIG87Y29uc3Qgcz1lLnNlc3Npb25zLmdldChpKTtpZihzKXJldHVybiBzO2NvbnN0IGw9dChuLmF0dHJpYnV0ZXMpLHU9bmV3IFNldCxhPWUuaTNzT3ZlcnJpZGVzLmNyZWF0ZUludGVyYWN0aXZlRWRpdFNlc3Npb24oaSksZD1uZXcgTWFwLGY9KGUsdCk9Pntjb25zdCBuPWQuZ2V0KGUpO2lmKG51bGw9PW4pe2NvbnN0IG49dC5pbmRleE9mKGkpO3JldHVybiBkLnNldChlLG4pLG59cmV0dXJuIG59O2xldCBjPXIuRURJVElORztjb25zdCBnPXtzZXRBdHRyaWJ1dGUodCxvKXtpZihjIT09ci5FRElUSU5HKXJldHVybjtjb25zdCBpPWUuZmllbGRzSW5kZXguZ2V0KHQpO2lmKCFpKXJldHVybjtjb25zdCBzPWUuYXR0cmlidXRlU3RvcmFnZUluZm8uZmluZEluZGV4KChlPT5lLm5hbWU9PT1pLm5hbWUpKTtpZihzPDApcmV0dXJuO2lmKCEodCBpbiBsKSl0aHJvdyBuZXcgRXJyb3IoYEF0dHJpYnV0ZSBcIiR7dH1cIiBpcyBub3QgYW4gYXR0cmlidXRlIG9mIHRoZSBlZGl0ZWQgZmVhdHVyZS5gKTthLnNldEF0dHJpYnV0ZShzLG8pO2NvbnN0IGQ9ZS5hdHRyaWJ1dGVTdG9yYWdlSW5mb1tzXTtsZXQgZz0hMTt1LmFkZCh0KSxlLmZvckVhY2hOb2RlKCgodCxyKT0+e2NvbnN0IGk9Zih0LHIpO2lmKC0xPT09aSlyZXR1cm47Y29uc3Qgcz1lLmdldEF0dHJpYnV0ZURhdGEodC5pbmRleCk7aWYocyl7Y29uc3Qgcj1zW2QubmFtZV07ciYmKHJbaV09byxlLnNldEF0dHJpYnV0ZURhdGEodC5pbmRleCxzLG4pLGc9ITApfX0pKSxnJiZlLmNsZWFyTWVtQ2FjaGUoKX0scm9sbGJhY2soKXtpZihjPT09ci5FRElUSU5HKXtmb3IoY29uc3QgZSBvZiB1KXRoaXMuc2V0QXR0cmlidXRlKGUsbFtlXSk7YS5yZW1vdmUoKSxjPXIuUk9MTEVEX0JBQ0ssZS5zZXNzaW9ucy5kZWxldGUoaSl9fSxjb21taXQoKXtjPT09ci5FRElUSU5HJiYoYS5yZW1vdmUoKSxjPXIuQ09NTUlUVEVELGUuc2Vzc2lvbnMuZGVsZXRlKGkpKX19O3JldHVybiBlLnNlc3Npb25zLnNldChpLGcpLGd9ZnVuY3Rpb24gcyhlLHQsbil7Y29uc3R7Z2lkVG9GZWF0dXJlSW5mbzpvLG9pZFRvRmVhdHVyZUluZm86cixmaWVsZHNJbmRleDppLG9iamVjdElkRmllbGQ6cyxnbG9iYWxJZEZpZWxkOmwsZmVhdHVyZU9ySWRlbnRpZmllckxpc3Q6dX09bjtpZighbi5mZWF0dXJlc1Jlc29sdmVkJiZudWxsIT11KXtmb3IoY29uc3QgZSBvZiB1KXtjb25zdCB0PXtmZWF0dXJlOm51bGwsb2lkOi0xLGdpZDpudWxsfTtpZihcImF0dHJpYnV0ZXNcImluIGUpe3QuZmVhdHVyZT1lO2NvbnN0IG49ZS5hdHRyaWJ1dGVzO2lmKG51bGwhPW4pZm9yKGNvbnN0IGUgaW4gbil7aWYoLTEhPT10Lm9pZCYmbnVsbCE9dC5naWQpYnJlYWs7Y29uc3Qgbz1pLm5vcm1hbGl6ZUZpZWxkTmFtZShlKTtvPT09cyYmKHQub2lkPW5bZV0/Py0xKSxvPT09bCYmKHQuZ2lkPW5bZV0pfX1lbHNlIHQub2lkPWUub2JqZWN0SWQ/Py0xLHQuZ2lkPWUuZ2xvYmFsSWQ7bnVsbCE9dC5naWQmJm8uc2V0KHQuZ2lkLHQpLC0xIT09dC5vaWQmJnIuc2V0KHQub2lkLHQpfW4uZmVhdHVyZXNSZXNvbHZlZD0hMH1yZXR1cm4oLTEhPT1lP3IuZ2V0KGUpOm51bGwpPz8obnVsbCE9dD9vLmdldCh0KTpudWxsKX1mdW5jdGlvbiBsKGUsdCxuLG8scj1udWxsLGk9ITApe2NvbnN0IGw9W10sdT17Z2lkVG9GZWF0dXJlSW5mbzpuZXcgTWFwLG9pZFRvRmVhdHVyZUluZm86bmV3IE1hcCxmZWF0dXJlc1Jlc29sdmVkOm51bGw9PW4sZmllbGRzSW5kZXg6ZS5maWVsZHNJbmRleCxvYmplY3RJZEZpZWxkOmUub2JqZWN0SWRGaWVsZCxnbG9iYWxJZEZpZWxkOmUuZ2xvYmFsSWRGaWVsZCxmZWF0dXJlT3JJZGVudGlmaWVyTGlzdDpufTtmb3IoY29uc3QgYSBvZiB0KXtpZihudWxsIT1hLmVycm9yKWNvbnRpbnVlO2NvbnN0IGU9YS5vYmplY3RJZD8/LTEsdD1hLmdsb2JhbElkLG49KC0xPT09ZXx8aT9zKGUsdCx1KTpudWxsKT8/e2ZlYXR1cmU6bnVsbCxvaWQ6ZSxnaWQ6dH0sZD17b2lkOi0xPT09ZT9uLm9pZDplLGdpZDp0Pz9uLmdpZCxmZWF0dXJlOm4uZmVhdHVyZSxyZXN1bHQ6YX07aWYobC5wdXNoKGQpLC0xPT09ZC5vaWQmJm51bGwhPWQuZ2lkJiZudWxsIT1yJiYoZC5vaWQ9ci5nZXQoZC5naWQpPz8tMSksLTE9PT1kLm9pZCYmbnVsbCE9ZC5naWQpe2xldCBlPW8uZ2V0KGQuZ2lkKTtudWxsPT1lJiYoZT1bXSxvLnNldChkLmdpZCxlKSksZS5wdXNoKGQpfX1yZXR1cm4gbH1hc3luYyBmdW5jdGlvbiB1KGUsdCl7Y29uc3Qgbj1uZXcgTWFwLG89bChlLHQuYWRkZWRGZWF0dXJlcyx0LmVkaXRzPy5hZGRGZWF0dXJlcyxuKSxyPWwoZSx0LnVwZGF0ZWRGZWF0dXJlcyx0LmVkaXRzPy51cGRhdGVGZWF0dXJlcyxuKSxpPWwoZSx0LmRlbGV0ZWRGZWF0dXJlcyx0LmVkaXRzPy5kZWxldGVGZWF0dXJlcyxuLHQuZ2xvYmFsSWRUb09iamVjdElkLCExKTtyZXR1cm4gbi5zaXplPjAmJmF3YWl0IGEoZSxuKSx7YWRkczpvLmZpbHRlcigoZT0+LTEhPT1lLm9pZCkpLHVwZGF0ZXM6ci5maWx0ZXIoKGU9Pi0xIT09ZS5vaWQpKSxkZWxldGVzOmkuZmlsdGVyKChlPT4tMSE9PWUub2lkKSl9fWFzeW5jIGZ1bmN0aW9uIGEodCxvKXtjb25zdCByPXQuaTNzT3ZlcnJpZGVzLmxheWVyLmFzc29jaWF0ZWRMYXllcjtpZihudWxsPT1yPy5nbG9iYWxJZEZpZWxkKXJldHVybjtjb25zdCBpPXIuY3JlYXRlUXVlcnkoKSx7b2JqZWN0SWRGaWVsZDpzLGdsb2JhbElkRmllbGQ6bH09cjtpLndoZXJlPUFycmF5LmZyb20oby5rZXlzKCkpLm1hcCgoZT0+YCR7bH09JyR7ZX0nYCkpLmpvaW4oXCIgT1IgXCIpLGkucmV0dXJuR2VvbWV0cnk9ITEsaS5vdXRGaWVsZHM9W3MsbF0saS5jYWNoZUhpbnQ9ITE7Y29uc3QgdT1hd2FpdCBlKG4ocixpKSk7aWYoIXUub2spcmV0dXJuO2NvbnN0IGE9dS52YWx1ZS5mZWF0dXJlcztmb3IoY29uc3QgZSBvZiBhKXtjb25zdCB0PWUuYXR0cmlidXRlc1tsXSxuPWUuYXR0cmlidXRlc1tzXTtpZihudWxsPT10fHxudWxsPT1ufHwtMT09PW4pY29udGludWU7Y29uc3Qgcj1vLmdldCh0KTtpZihudWxsIT1yKWZvcihjb25zdCBlIG9mIHIpZS5vaWQ9bn19ZnVuY3Rpb24gZChlLHQpe2NvbnN0IG49bmV3IE1hcCxvPXQuYWRkcyxyPXQudXBkYXRlcyxpPXQuZGVsZXRlcztpZihvLmxlbmd0aD4wKWZvcihjb25zdCBzIG9mIG8pe2NvbnN0IGU9cy5vaWQsdD1zLmZlYXR1cmU7XCJtZXNoXCI9PT10Py5nZW9tZXRyeT8udHlwZSYmbi5zZXQoZSx0Lmdlb21ldHJ5KX1pZihyLmxlbmd0aD4wKWZvcihjb25zdCBzIG9mIHIpe2NvbnN0IGU9cy5vaWQsdD1zLmZlYXR1cmU7XCJtZXNoXCI9PT10Py5nZW9tZXRyeT8udHlwZSYmbi5zZXQoZSx0Lmdlb21ldHJ5KX1pZihpLmxlbmd0aD4wKWZvcihjb25zdCBzIG9mIGkpbi5zZXQocy5vaWQsbnVsbCk7Zm9yKGNvbnN0W3MsbF1vZiBuKWUuaTNzT3ZlcnJpZGVzLnVwZGF0ZUdlb21ldHJ5KHMsbCl9ZnVuY3Rpb24gZihlLHQpe2NvbnN0IG49ZyhlLHQpLG89YyhlLHQpO2lmKDA9PT1uLnNpemUmJjA9PT1vLnNpemUpcmV0dXJuO2NvbnN0IHI9bmV3IE1hcDtmb3IobGV0IGM9MDtjPGUuYXR0cmlidXRlU3RvcmFnZUluZm8ubGVuZ3RoO2MrKylyLnNldChlLmF0dHJpYnV0ZVN0b3JhZ2VJbmZvW2NdLm5hbWUsYyk7bGV0IGk9ITE7bi5mb3JFYWNoKCgodCxuKT0+e2NvbnN0IG89ZS5nZXRBdHRyaWJ1dGVEYXRhKG4pO2xldCBzPSExO3QuZm9yRWFjaCgoKHQsbik9Pntjb25zdCBsPW51bGwhPW8/b1tuXTpudWxsLHU9ci5nZXQobik7Zm9yKGNvbnN0e2ZlYXR1cmVJbmRleDpvLHZhbHVlOnIsZmVhdHVyZUlkOmF9b2YgdClsJiYobFtvXT1yLHM9ITAsaT0hMCksZS5pM3NPdmVycmlkZXMudXBkYXRlQXR0cmlidXRlVmFsdWUoYSx1LHIpfSkpLHMmJmUuc2V0QXR0cmlidXRlRGF0YShuLG8sbnVsbCl9KSksaSYmZS5jbGVhck1lbUNhY2hlKCk7Y29uc3R7ZmllbGRzSW5kZXg6cyxpM3NPdmVycmlkZXM6bCxvYmplY3RJZEZpZWxkOnUsZ2xvYmFsSWRGaWVsZDphfT1lLGQ9bC5sYXllci5hc3NvY2lhdGVkTGF5ZXI/LmluZm9Gb3IzRCxmPW5ldyBTZXQoZD9bLi4uT2JqZWN0LnZhbHVlcyhkLmFzc2V0TWFwRmllbGRSb2xlcyksLi4uT2JqZWN0LnZhbHVlcyhkLnRyYW5zZm9ybUZpZWxkUm9sZXMpXTpbXSk7Zm9yKGNvbnN0W2MsZ11vZiBvKXtsLmZlYXR1cmVBZGRlZChjKTtjb25zdHthdHRyaWJ1dGVzOmV9PWc7Zm9yKGNvbnN0IHQgaW4gZSl7aWYodCE9PXUmJnQhPT1hJiZmLmhhcyh0KSljb250aW51ZTtjb25zdCBuPXMubm9ybWFsaXplRmllbGROYW1lKHQpLG89bnVsbCE9bj9yLmdldChuKTpudWxsO2lmKG51bGw9PW8pY29udGludWU7Y29uc3QgaT1lW3RdO2wudXBkYXRlQXR0cmlidXRlVmFsdWUoYyxvLGkpfX19ZnVuY3Rpb24gYyhlLHQpe2NvbnN0IG49bmV3IE1hcCxvPXQuYWRkcztpZighb3x8MD09PW8ubGVuZ3RofHxudWxsPT1lLmdsb2JhbElkRmllbGQpcmV0dXJuIG47Zm9yKGNvbnN0IHIgb2Ygbyl7Y29uc3QgZT1yLm9pZCx0PXIuZmVhdHVyZTtcIm1lc2hcIj09PXQ/Lmdlb21ldHJ5Py50eXBlJiZuLnNldChlLHQpfXJldHVybiBufWZ1bmN0aW9uIGcoZSx0KXtjb25zdCBuPXQudXBkYXRlcztpZighbnx8MD09PW4ubGVuZ3RoKXJldHVybiBuZXcgcDtjb25zdCBvPW5ldyBwLHI9bmV3IE1hcDtmb3IobGV0IGk9MDtpPGUuYXR0cmlidXRlU3RvcmFnZUluZm8ubGVuZ3RoO2krKylyLnNldChlLmF0dHJpYnV0ZVN0b3JhZ2VJbmZvW2ldLm5hbWUsaSk7cmV0dXJuIGUuZm9yRWFjaE5vZGUoKCh0LHIpPT57Zm9yKGNvbnN0IGkgb2Ygbil7aWYobnVsbD09aS5mZWF0dXJlKWNvbnRpbnVlO2NvbnN0IG49aS5mZWF0dXJlLHM9aS5vaWQsbD1yLmluZGV4T2Yocyk7Zm9yKGNvbnN0IHIgaW4gbi5hdHRyaWJ1dGVzKXtjb25zdCBpPWUuZmllbGRzSW5kZXgubm9ybWFsaXplRmllbGROYW1lKHIpLHU9SShvLHQuaW5kZXgsaSksYT1uLmF0dHJpYnV0ZXNbcl07dS5wdXNoKHtmZWF0dXJlSW5kZXg6bCxmZWF0dXJlSWQ6cyx2YWx1ZTphfSl9fX0pKSxvfWZ1bmN0aW9uIEkoZSx0LG4pe2NvbnN0IG89YihlLHQpLHI9bnVsbCE9biYmby5nZXQobik7aWYocilyZXR1cm4gcjtjb25zdCBpPW5ldyBBcnJheTtyZXR1cm4gby5zZXQobixpKSxpfWZ1bmN0aW9uIGIoZSx0KXtjb25zdCBuPWUuZ2V0KHQpO2lmKG4pcmV0dXJuIG47Y29uc3Qgbz1uZXcgbTtyZXR1cm4gZS5zZXQodCxvKSxvfSFmdW5jdGlvbihlKXtlW2UuRURJVElORz0wXT1cIkVESVRJTkdcIixlW2UuUk9MTEVEX0JBQ0s9MV09XCJST0xMRURfQkFDS1wiLGVbZS5DT01NSVRURUQ9Ml09XCJDT01NSVRURURcIn0ocnx8KHI9e30pKTtjb25zdCBtPU1hcCxwPU1hcDtleHBvcnR7aSBhcyBjcmVhdGVJbnRlcmFjdGl2ZUVkaXRTZXNzaW9uLHUgYXMgbm9ybWFsaXplRWRpdFJlc3VsdHNFdmVudCxmIGFzIHByb2Nlc3NBdHRyaWJ1dGVFZGl0cyxkIGFzIHByb2Nlc3NHZW9tZXRyeUVkaXRzfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7dW5wYWNrRmllbGROYW1lcyBhcyB0LHBvcHVsYXRlTWlzc2luZ0ZpZWxkcyBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ZpZWxkVXRpbHMuanNcIjtpbXBvcnR7Z2V0RmV0Y2hQb3B1cFRlbXBsYXRlIGFzIG8sZ2V0UmVxdWlyZWRGaWVsZHMgYXMgcH1mcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9wb3B1cFV0aWxzLmpzXCI7Y29uc3QgaT1pPT57bGV0IGM9Y2xhc3MgZXh0ZW5kcyBpe192YWxpZGF0ZUZldGNoUG9wdXBGZWF0dXJlcyhlKXtjb25zdHtsYXllcjpzfT10aGlzLHtwb3B1cEVuYWJsZWQ6dH09cztpZighdCl0aHJvdyBuZXcgcihcInNjZW5lbGF5ZXJ2aWV3M2Q6ZmV0Y2hQb3B1cEZlYXR1cmVzXCIsXCJQb3B1cHMgYXJlIGRpc2FibGVkXCIse2xheWVyOnN9KTtpZighbyhzLGUpKXRocm93IG5ldyByKFwic2NlbmVsYXllcnZpZXczZDpmZXRjaFBvcHVwRmVhdHVyZXNcIixcIkxheWVyIGRvZXMgbm90IGRlZmluZSBhIHBvcHVwIHRlbXBsYXRlXCIse2xheWVyOnN9KX1hc3luYyBwcmVwYXJlRmV0Y2hQb3B1cEZlYXR1cmVzKGUpe31hc3luYyBmZXRjaFBvcHVwRmVhdHVyZXMoZSxyKXt0aGlzLl92YWxpZGF0ZUZldGNoUG9wdXBGZWF0dXJlcyhyKTtjb25zdCBzPW51bGwhPXI/ci5jbGllbnRHcmFwaGljczpudWxsO2lmKCFzfHwwPT09cy5sZW5ndGgpcmV0dXJuW107Y29uc3QgaT1cInNjZW5lXCI9PT10aGlzLmxheWVyLnR5cGUmJm51bGwhPXRoaXMubGF5ZXIuYXNzb2NpYXRlZExheWVyP3RoaXMubGF5ZXIuYXNzb2NpYXRlZExheWVyOnRoaXMubGF5ZXI7bGV0IGM9W107XCJmaWVsZHNJbmRleFwiaW4gdGhpcy5sYXllciYmKGM9dCh0aGlzLmxheWVyLmZpZWxkc0luZGV4LGF3YWl0IHAoaSxvKHRoaXMubGF5ZXIscikpKSksYXdhaXQgdGhpcy5wcmVwYXJlRmV0Y2hQb3B1cEZlYXR1cmVzKGMpO2NvbnN0IGw9bmV3IFNldCxuPVtdLHU9W107Zm9yKGNvbnN0IHQgb2YgcylhKGMsdCxsKT91LnB1c2godCk6bi5wdXNoKHQpO3JldHVybiAwPT09dS5sZW5ndGg/bjp0aGlzLndoZW5HcmFwaGljQXR0cmlidXRlcyh1LFsuLi5sXSkuY2F0Y2goKCgpPT51KSkudGhlbigoZT0+bi5jb25jYXQoZSkpKX19O3JldHVybiBjPWUoW3MoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5zdXBwb3J0LlBvcHVwU2NlbmVMYXllclZpZXdcIildLGMpLGN9O2V4cG9ydHtpIGFzIFBvcHVwU2NlbmVMYXllclZpZXd9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnR7QXN5bmNVcGRhdGVNaXhpbiBhcyBzfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQXN5bmNVcGRhdGUuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2ZpeEZpZWxkcyBhcyBsLGNvbGxlY3RMYWJlbGluZ0ZpZWxkcyBhcyBuLGNvbGxlY3RGaWx0ZXJGaWVsZHMgYXMgYX1mcm9tXCIuLi8uLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9maWVsZFV0aWxzLmpzXCI7Y29uc3QgZD1cImVzcmkudmlld3MuM2QubGF5ZXJzLnN1cHBvcnQuU2NlbmVMYXllclZpZXdSZXF1aXJlZEZpZWxkc1wiO2xldCBjPWNsYXNzIGV4dGVuZHMocyhyKSl7Z2V0IGxheWVyKCl7cmV0dXJuIHRoaXMubGF5ZXJWaWV3LmxheWVyfWdldCByZXF1aXJlZEZpZWxkcygpe2NvbnN0e2xheWVyVmlldzp7bGF5ZXI6e2ZpZWxkc0luZGV4OmV9LGRlZmluaXRpb25FeHByZXNzaW9uRmllbGRzOnJ9LHJlbmRlcmVyRmllbGRzOnMsbGFiZWxpbmdGaWVsZHM6dCx2aWV3RmlsdGVyRmllbGRzOml9PXRoaXM7cmV0dXJuIGwoZSxbLi4ucj8/W10sLi4ucz8/W10sLi4udD8/W10sLi4uaT8/W11dKX1jb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1pbml0aWFsaXplKCl7dGhpcy5hZGRIYW5kbGVzKFt0aGlzLmF1dG9VcGRhdGVBc3luYyhcInJlbmRlcmVyRmllbGRzXCIsKGFzeW5jKCk9Pntjb25zdHtmaWVsZHNJbmRleDplLHJlbmRlcmVyOnJ9PXRoaXMubGF5ZXI7cmV0dXJuIHI/cCgocz0+ci5jb2xsZWN0UmVxdWlyZWRGaWVsZHMocyxlKSkpOm51bGx9KSksdGhpcy5hdXRvVXBkYXRlQXN5bmMoXCJsYWJlbGluZ0ZpZWxkc1wiLChhc3luYygpPT57Y29uc3R7bGF5ZXI6ZX09dGhpcztyZXR1cm4gZS5sYWJlbHNWaXNpYmxlP3AoKHI9Pm4ocixlKSkpOm51bGx9KSksdGhpcy5hdXRvVXBkYXRlQXN5bmMoXCJ2aWV3RmlsdGVyRmllbGRzXCIsKCgpPT57Y29uc3R7bGF5ZXI6ZSxmaWx0ZXI6cn09dGhpcy5sYXllclZpZXc7cmV0dXJuIHAoKHM9PmEocyxlLHIpKSl9KSldKX19O2FzeW5jIGZ1bmN0aW9uIHAoZSl7Y29uc3Qgcj1uZXcgU2V0O3RyeXtyZXR1cm4gYXdhaXQgZShyKSxBcnJheS5mcm9tKHIpLnNvcnQoKX1jYXRjaChzKXtyZXR1cm4gdC5nZXRMb2dnZXIoZCkuZXJyb3IocyksbnVsbH19ZShbaSgpXSxjLnByb3RvdHlwZSxcImxheWVyVmlld1wiLHZvaWQgMCksZShbaSgpXSxjLnByb3RvdHlwZSxcImxheWVyXCIsbnVsbCksZShbaSgpXSxjLnByb3RvdHlwZSxcInJlcXVpcmVkRmllbGRzXCIsbnVsbCksZShbaSgpXSxjLnByb3RvdHlwZSxcInJlbmRlcmVyRmllbGRzXCIsdm9pZCAwKSxlKFtpKCldLGMucHJvdG90eXBlLFwibGFiZWxpbmdGaWVsZHNcIix2b2lkIDApLGUoW2koKV0sYy5wcm90b3R5cGUsXCJ2aWV3RmlsdGVyRmllbGRzXCIsdm9pZCAwKSxjPWUoW28oZCldLGMpO2V4cG9ydHtjIGFzIFNjZW5lTGF5ZXJWaWV3UmVxdWlyZWRGaWVsZHN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtmaXhGaWVsZHMgYXMgZSx1bnBhY2tGaWVsZE5hbWVzIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2Z1bmN0aW9uIGkoKXtyZXR1cm57cmVxdWlyZWRGaWVsZHM6e3R5cGU6W1N0cmluZ10scmVhZE9ubHk6ITB9LGF2YWlsYWJsZUZpZWxkczp7dHlwZTpbU3RyaW5nXSxyZWFkT25seTohMCxnZXQ6ZnVuY3Rpb24oKXtjb25zdHtsYXllcjppLGxheWVyOntmaWVsZHNJbmRleDp0fSxyZXF1aXJlZEZpZWxkczpsfT10aGlzO3JldHVybiBpLm91dEZpZWxkcz9lKHQsWy4uLnIodCxpLm91dEZpZWxkcyksLi4ubF0pOmUodCxsKX19fX1leHBvcnR7aSBhcyBkZWZpbmVGaWVsZFByb3BlcnRpZXN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHtpc1NvbWUgYXMgdH1mcm9tXCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHthYm9ydE1heWJlIGFzIG99ZnJvbVwiLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHt1bndyYXBVcGRhdGluZyBhcyBpLHVwZGF0aW5nIGFzIG4saXNVcGRhdGluZyBhcyBsfWZyb21cIi4uLy4uL2NvcmUvbWF5YmVVcGRhdGluZy5qc1wiO2ltcG9ydHt0aHJvd0lmQWJvcnRFcnJvciBhcyBzLHRocm93SWZOb3RBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2hlbk9uY2UgYXMgbX1mcm9tXCIuLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgcH1mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBjfWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7cHJvamVjdCBhcyB1LGNhblByb2plY3RXaXRob3V0RW5naW5lIGFzIHksaXNMb2FkZWQgYXMgZyxsb2FkIGFzIGR9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydCBoIGZyb21cIi4vTGF5ZXJWaWV3LmpzXCI7Y29uc3QgZj1cImVzcmkudmlld3MubGF5ZXJzLlNjZW5lTGF5ZXJWaWV3XCIsdz1yLmdldExvZ2dlcihmKTtsZXQgRT1jbGFzcyBleHRlbmRzIGh7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMubGF5ZXI9bnVsbCx0aGlzLmZpbHRlcj1udWxsLHRoaXMuX2dlb21ldHJ5RW5naW5lPW51bGwsdGhpcy5fcHJvamVjdGlvbkVuZ2luZUxvYWRlZD0hMSx0aGlzLl9hYm9ydENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcn1nZXQgYXZhaWxhYmxlRmllbGRzKCl7cmV0dXJuW119Z2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzKCl7cmV0dXJuIDB9c2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzKGUpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX1nZXQgbWF4aW11bU51bWJlck9mRmVhdHVyZXNFeGNlZWRlZCgpe3JldHVybiExfWdldCBsYXllckZpbHRlcigpe3JldHVybiBpKHRoaXMuX2xheWVyRmlsdGVyKX1nZXQgX2xheWVyRmlsdGVyKCl7Y29uc3QgZT10aGlzLmxheWVyPy5maWx0ZXI7aWYobnVsbD09ZXx8ZS5nZW9tZXRyaWVzLmxlbmd0aDwxKXJldHVybiBudWxsO2NvbnN0IHI9dGhpcy5fZ2VvbWV0cnlFbmdpbmU7aWYobnVsbD09cnx8IXRoaXMuX3Byb2plY3Rpb25FbmdpbmVMb2FkZWQmJnRoaXMuX2ZpbHRlck5lZWRzUHJvamVjdGlvbkVuZ2luZSlyZXR1cm4gbjtjb25zdCBvPWUuZ2VvbWV0cmllcy5hdCgwKS5zcGF0aWFsUmVmZXJlbmNlLGk9ZS5nZW9tZXRyaWVzLnRvQXJyYXkoKS5tYXAoKGU9Pnt0cnl7ZT1yLnNpbXBsaWZ5KGUpfWNhdGNoKHQpe3JldHVybiB3Lndhcm5PbmNlUGVyVGljayhcIkZhaWxlZCB0byBzaW1wbGlmeSBzY2VuZSBmaWx0ZXIgbWFzayBwb2x5Z29uLiBQb2x5Z29uIHdpbGwgYmUgaWdub3JlZC5cIiksbnVsbH1pZihudWxsPT1lKXJldHVybiBudWxsO2lmKGUuc3BhdGlhbFJlZmVyZW5jZS5lcXVhbHMobykpcmV0dXJuIGU7dHJ5e3JldHVybiB1KGUsbyl9Y2F0Y2godCl7cmV0dXJuIHcud2Fybk9uY2VQZXJUaWNrKFwiRmFpbGVkIHRvIHByb2plY3Qgc2NlbmUgZmlsdGVyIG1hc2sgcG9seWdvbi4gUG9seWdvbiB3aWxsIGJlIGlnbm9yZWQuXCIpLG51bGx9fSkpLmZpbHRlcih0KS5zb3J0KCgoZSx0KT0+ZS5leHRlbnQueG1pbi10LmV4dGVudC54bWluKSksbD1uZXcgU2V0LHM9bmV3IEFycmF5LGE9bmV3IEFycmF5O2ZvcihsZXQgdCBvZiBpKXtjb25zdCBlPXQuZXh0ZW50LnhtaW47aWYocy5sZW5ndGg9MCxsLmZvckVhY2goKG89PntpZihlPj1vLmV4dGVudC54bWF4KXJldHVybiBhLnB1c2gobyksdm9pZCBsLmRlbGV0ZShvKTt0LmV4dGVudC55bWluPD1vLmV4dGVudC55bWF4JiZ0LmV4dGVudC55bWF4Pj1vLmV4dGVudC55bWluJiZyLmludGVyc2VjdHModCxvKSYmcy5wdXNoKG8pfSkpLHMubGVuZ3RoPjApe3MucHVzaCh0KTt0cnl7dD1yLnVuaW9uKHMpfWNhdGNoKG0pe3cud2Fybk9uY2VQZXJUaWNrKFwiRmFpbGVkIHRvIHVuaWZ5IGZpbHRlciBtYXNrIHBvbHlnb25zLiBQb2x5Z29uIHdpbGwgYmUgaWdub3JlZC5cIik7Y29udGludWV9cy5wb3AoKSxzLmZvckVhY2goKGU9PmwuZGVsZXRlKGUpKSl9bC5hZGQodCl9cmV0dXJuIGwuZm9yRWFjaCgoZT0+YS5wdXNoKGUpKSksYS5sZW5ndGg+MD97c3BhdGlhbFJlbGF0aW9uc2hpcDplLnNwYXRpYWxSZWxhdGlvbnNoaXAsZ2VvbWV0cmllczphfTpudWxsfWdldCBfZmlsdGVyTmVlZHNQcm9qZWN0aW9uRW5naW5lKCl7Y29uc3QgZT10aGlzLmxheWVyLmZpbHRlcjtpZihudWxsPT1lfHxlLmdlb21ldHJpZXMubGVuZ3RoPD0xKXJldHVybiExO2NvbnN0IHQ9ZS5nZW9tZXRyaWVzLmF0KDApLnNwYXRpYWxSZWZlcmVuY2U7cmV0dXJuIGUuZ2VvbWV0cmllcy5zb21lKCgoe3NwYXRpYWxSZWZlcmVuY2U6ZX0pPT4hZS5lcXVhbHModCkmJiF5KGUsdCkpKX1nZXQgbGF5ZXJGaWx0ZXJVcGRhdGluZygpe3JldHVybiBsKHRoaXMuX2xheWVyRmlsdGVyKX1pbml0aWFsaXplKCl7Y29uc3R7c2lnbmFsOmV9PXRoaXMuX2Fib3J0Q29udHJvbGxlcjttKCgoKT0+dGhpcy5kZXN0cm95ZWR8fCF0aGlzLl9nZW9tZXRyeUVuZ2luZSYmdGhpcy5sYXllcj8uZmlsdGVyPy5nZW9tZXRyaWVzPy5sZW5ndGgpLGUpLnRoZW4oKGFzeW5jKCk9PntzKGUpLHRoaXMuX2dlb21ldHJ5RW5naW5lPWF3YWl0IGltcG9ydChcIi4uLy4uL2dlb21ldHJ5L2dlb21ldHJ5RW5naW5lLmpzXCIpfSkpLmNhdGNoKGEpLHRoaXMuX3Byb2plY3Rpb25FbmdpbmVMb2FkZWQ9ZygpLG0oKCgpPT50aGlzLmRlc3Ryb3llZHx8IXRoaXMuX3Byb2plY3Rpb25FbmdpbmVMb2FkZWQmJnRoaXMuX2ZpbHRlck5lZWRzUHJvamVjdGlvbkVuZ2luZSksZSkudGhlbigoYXN5bmMoKT0+e3MoZSksYXdhaXQgZCgpLHRoaXMuX3Byb2plY3Rpb25FbmdpbmVMb2FkZWQ9ITB9KSkuY2F0Y2goYSl9ZGVzdHJveSgpe3RoaXMuX2Fib3J0Q29udHJvbGxlcj1vKHRoaXMuX2Fib3J0Q29udHJvbGxlcil9aGlnaGxpZ2h0KGUpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX1xdWVyeUZlYXR1cmVzKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfXF1ZXJ5T2JqZWN0SWRzKGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfXF1ZXJ5RmVhdHVyZUNvdW50KGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfWNyZWF0ZVF1ZXJ5KCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfXF1ZXJ5RXh0ZW50KGUsdCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfX07ZShbcCgpXSxFLnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlKFtwKCldLEUucHJvdG90eXBlLFwiYXZhaWxhYmxlRmllbGRzXCIsbnVsbCksZShbcCgpXSxFLnByb3RvdHlwZSxcIm1heGltdW1OdW1iZXJPZkZlYXR1cmVzXCIsbnVsbCksZShbcCh7cmVhZE9ubHk6ITB9KV0sRS5wcm90b3R5cGUsXCJtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc0V4Y2VlZGVkXCIsbnVsbCksZShbcCgpXSxFLnByb3RvdHlwZSxcImZpbHRlclwiLHZvaWQgMCksZShbcCh7cmVhZE9ubHk6ITB9KV0sRS5wcm90b3R5cGUsXCJsYXllckZpbHRlclwiLG51bGwpLGUoW3Aoe3JlYWRPbmx5OiEwfSldLEUucHJvdG90eXBlLFwiX2xheWVyRmlsdGVyXCIsbnVsbCksZShbcCgpXSxFLnByb3RvdHlwZSxcIl9nZW9tZXRyeUVuZ2luZVwiLHZvaWQgMCksZShbcCgpXSxFLnByb3RvdHlwZSxcIl9wcm9qZWN0aW9uRW5naW5lTG9hZGVkXCIsdm9pZCAwKSxlKFtwKCldLEUucHJvdG90eXBlLFwiX2ZpbHRlck5lZWRzUHJvamVjdGlvbkVuZ2luZVwiLG51bGwpLGUoW3AoKV0sRS5wcm90b3R5cGUsXCJsYXllckZpbHRlclVwZGF0aW5nXCIsbnVsbCksRT1lKFtjKGYpXSxFKTtjb25zdCBqPUU7ZXhwb3J0e2ogYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=