"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_core_maybeUpdating_js-node_modules_arcgis_core_views_-93f316"],{

/***/ "./node_modules/@arcgis/core/core/maybeUpdating.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/maybeUpdating.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isUpdating: () => (/* binding */ u),
/* harmony export */   unwrapUpdating: () => (/* binding */ t),
/* harmony export */   updating: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n="updating";function t(n){return"updating"===n?null:n}function u(n){return"updating"===n}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SPointsWorkerHandle: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/workers/WorkerHandle.js */ "./node_modules/@arcgis/core/core/workers/WorkerHandle.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class r extends _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_0__.WorkerHandle{constructor(e){super("SceneLayerWorker","dracoDecompressPointCloudData",{dracoDecompressPointCloudData:e=>[e.geometryBuffer]},e,{hasInitialize:!0})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/SceneLayerGraphicsView3D.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ re)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/projection/projectBuffer.js */ "./node_modules/@arcgis/core/geometry/projection/projectBuffer.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../geometry/support/contains.js */ "./node_modules/@arcgis/core/geometry/support/contains.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../layers/LayerConstants.js */ "./node_modules/@arcgis/core/layers/LayerConstants.js");
/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js");
/* harmony import */ var _layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedPoint.js */ "./node_modules/@arcgis/core/layers/graphics/dehydratedPoint.js");
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/graphics/hydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js");
/* harmony import */ var _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/graphics/controllers/I3SOnDemandController.js */ "./node_modules/@arcgis/core/layers/graphics/controllers/I3SOnDemandController.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./I3SPointsWorkerHandle.js */ "./node_modules/@arcgis/core/views/3d/layers/I3SPointsWorkerHandle.js");
/* harmony import */ var _LayerView3D_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./LayerView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js");
/* harmony import */ var _graphics_Graphics3DFeatureProcessor_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./graphics/Graphics3DFeatureProcessor.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureProcessor.js");
/* harmony import */ var _graphics_QueryEngine_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./graphics/QueryEngine.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js");
/* harmony import */ var _i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./i3s/featureEditing.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/featureEditing.js");
/* harmony import */ var _i3s_I3SGraphicsMap_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./i3s/I3SGraphicsMap.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js");
/* harmony import */ var _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./i3s/I3SOverrides.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SOverrides.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _support_DefinitionExpressionSceneLayerView_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./support/DefinitionExpressionSceneLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js");
/* harmony import */ var _support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./support/fieldProperties.js */ "./node_modules/@arcgis/core/views/3d/layers/support/fieldProperties.js");
/* harmony import */ var _support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./support/PopupSceneLayerView.js */ "./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js");
/* harmony import */ var _support_SceneLayerViewRequiredFields_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./support/SceneLayerViewRequiredFields.js */ "./node_modules/@arcgis/core/views/3d/layers/support/SceneLayerViewRequiredFields.js");
/* harmony import */ var _support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../support/debugFlags.js */ "./node_modules/@arcgis/core/views/3d/support/debugFlags.js");
/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../support/orientedBoundingBox.js */ "./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js");
/* harmony import */ var _support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../support/updatingProperties.js */ "./node_modules/@arcgis/core/views/3d/support/updatingProperties.js");
/* harmony import */ var _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../webgl-engine/lib/Attribute.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Attribute.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/* harmony import */ var _layers_SceneLayerView_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../../layers/SceneLayerView.js */ "./node_modules/@arcgis/core/views/layers/SceneLayerView.js");
/* harmony import */ var _layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../../layers/support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../../support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const X=(0,_support_fieldProperties_js__WEBPACK_IMPORTED_MODULE_34__.defineFieldProperties)();class ee{constructor(e,t,r,i){this.graphics=e,this.featureIds=t,this.attributeInfo=r,this.node=i}}let te=class extends((0,_support_DefinitionExpressionSceneLayerView_js__WEBPACK_IMPORTED_MODULE_33__.DefinitionExpressionSceneLayerView)((0,_support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_35__.PopupSceneLayerView)((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_26__.LayerView3D)(_layers_SceneLayerView_js__WEBPACK_IMPORTED_MODULE_42__["default"])))){constructor(){super(...arguments),this.type="scene-layer-graphics-3d",this._queryEngine=null,this._memCache=null,this._interactiveEditingSessions=new Map,this._pendingEditsQueue=Promise.resolve(),this.loadedGraphics=new _i3s_I3SGraphicsMap_js__WEBPACK_IMPORTED_MODULE_30__.I3SGraphicsMap(((e,t,r)=>oe(e,t,r)),(e=>this.processor.graphicsCore.recreateGraphics(e))),this.holeFilling="always",this.progressiveLoadFactor=1,this.supportsHeightUnitConversion=!0,this._coordinatesOutsideExtentErrors=0,this._maxCoordinatesOutsideExtentErrors=20}tryRecycleWith(e,t){return e.url===this.layer.url&&this._i3sOverrides.isEmpty?e.load(t).then((()=>{(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkRecyclable)(this.layer,e,this._i3sOverrides),this.layer=e,this._i3sOverrides.destroy();const t=this.view.resourceController?.memoryController;this._i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__.I3SOverrides({view:this.view,layer:e,memoryController:t}),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._queryEngine),this._setupQueryEngine(),this.processor.resetObjectStates()})):null}initialize(){this.addResolvingPromise(this.layer.indexInfo);const e=this.view.resourceController?.memoryController;this._i3sOverrides=new _i3s_I3SOverrides_js__WEBPACK_IMPORTED_MODULE_31__.I3SOverrides({view:this.view,layer:this.layer,memoryController:e}),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkSpatialReferences)(this.layer,this.view.spatialReference,this.view.viewingMode),this._fieldsHelper=new _support_SceneLayerViewRequiredFields_js__WEBPACK_IMPORTED_MODULE_36__.SceneLayerViewRequiredFields({layerView:this}),this._updatingHandles.add((()=>this.layer.rangeInfos),(e=>this._rangeInfosChanged(e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),this._updatingHandles.add((()=>this.layer.renderer),((e,t)=>this._rendererChange(e,t))),this._updatingHandles.add((()=>[this.parsedDefinitionExpression,this._excludeObjectIdsSorted]),(()=>this._filterChange())),this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES),(e=>{if(e&&!this._treeDebugger){const e=this._controller.crsIndex;__webpack_require__.e(/*! import() */ "node_modules_arcgis_core_views_3d_layers_support_I3STreeDebugger_js").then(__webpack_require__.bind(__webpack_require__, /*! ./support/I3STreeDebugger.js */ "./node_modules/@arcgis/core/views/3d/layers/support/I3STreeDebugger.js")).then((({I3STreeDebugger:t})=>{!this._treeDebugger&&_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES&&(this._treeDebugger=new t({lv:this,view:this.view,nodeSR:e}))}))}else e||!this._treeDebugger||_support_debugFlags_js__WEBPACK_IMPORTED_MODULE_37__.debugFlags.I3S_TREE_SHOW_TILES||(this._treeDebugger.destroy(),this._treeDebugger=null)}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial)),this._set("processor",new _graphics_Graphics3DFeatureProcessor_js__WEBPACK_IMPORTED_MODULE_27__.Graphics3DFeatureProcessor({owner:this,preferredUpdatePolicy:_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_41__.UpdatePolicy.ASYNC,scaleVisibilityEnabled:!0,filterVisibilityEnabled:!0,timeExtentEnabled:!1,frustumVisibilityEnabled:!1,elevationAlignmentEnabled:!0,elevationFeatureExpressionEnabled:!1,setUidToIdOnAdd:!1,dataExtent:this.layer.fullExtent,updateClippingExtent:e=>this._updateClippingExtent(e)})),this.processor.elevationAlignment?.events.on("invalidate-elevation",(e=>this._controller.updateElevationChanged(e.extent,e.spatialReference))),this.supportsHeightUnitConversion&&(this._verticalScale=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_16__.getGeometryZScaler)("point",this.layer.spatialReference,this.view.spatialReference)),this.addResolvingPromise(this.processor.initializePromise),this._memCache=this.view.resourceController.memoryController.newCache(`psl-${this.uid}`),this._controller=new _layers_graphics_controllers_I3SOnDemandController_js__WEBPACK_IMPORTED_MODULE_21__["default"]({layerView:this,scaleVisibilityEnabled:!1}),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.containsDraco)(this.layer.geometryDefinitions)&&(this._worker=new _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__.I3SPointsWorkerHandle((e=>this.view.resourceController.immediate.schedule(e)))),this.addHandles(this.layer.on("apply-edits",(e=>this._updatingHandles.addPromise(e.result)))),this.addHandles(this.layer.on("edits",(e=>{const t=this._pendingEditsQueue.then((()=>this._handleEdits(e))).then();this._pendingEditsQueue=t,this._updatingHandles.addPromise(t)}))),this.when((()=>{this._setupQueryEngine(),this._updatingHandles.add((()=>this.maximumNumberOfFeatures),(e=>this._controller.featureTarget=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.initial),this._updatingHandles.add((()=>this.suspended),(e=>{e&&this._removeAllNodeData()}))}))}destroy(){this._treeDebugger=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._treeDebugger),this._i3sOverrides=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._i3sOverrides),this._set("processor",(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this.processor)),this._controller=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._controller),this._queryEngine=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._queryEngine),this._worker=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._worker),this._memCache=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._memCache),this.loadedGraphics.clear(),this._fieldsHelper=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.destroyMaybe)(this._fieldsHelper)}get i3slayer(){return this.layer}get updatingProgressValue(){return this._controller?.updatingProgress??1}get requiredFields(){return this._fieldsHelper?.requiredFields??[]}get maximumNumberOfFeatures(){const e=this.processor?.graphicsCore?.displayFeatureLimit;return e?.maximumNumberOfFeatures??0}set maximumNumberOfFeatures(e){null!=e?(this._override("maximumNumberOfFeatures",e),this._controller.fixedFeatureTarget=!0):(this._clearOverride("maximumNumberOfFeatures"),this._controller.fixedFeatureTarget=!1)}get maximumNumberOfFeaturesExceeded(){return!this.suspended&&(!!this._controller?.useMaximumNumberOfFeatures&&!this._controller.leavesReached)}get _excludeObjectIdsSorted(){const e=this.layer.excludeObjectIds;return e.length?e.toArray().sort(((e,t)=>e-t)):null}get lodFactor(){return"Labels"===this.layer.semantic?1:this.view.qualitySettings.sceneService.point.lodFactor}get hasM(){return!1}get hasZ(){return!0}get contentVisible(){return!this.suspended&&!!this._controller?.rootNodeVisible}get legendEnabled(){return this.contentVisible&&!0===this.i3slayer?.legendEnabled}async whenGraphicAttributes(e,t){return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.whenGraphicAttributes)(this.layer,e,this._getObjectIdField(),t,(()=>[...this.loadedGraphics.nodes()]))}getHit(e){if(!this.loadedGraphics)return null;const t=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_20__.hydrateGraphic)(this.loadedGraphics.find((t=>t.uid===e)),this.layer),r=this._getObjectIdField();return t?.attributes?.[r]?(t.layer=this.layer,t.sourceLayer=this.layer,{type:"graphic",graphic:t,layer:t.layer}):null}whenGraphicBounds(e,t){return this.processor.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.processor.computeAttachmentOrigin(e,t)}isUpdating(){return!!(this._controller?.updating||this.processor?.updating||this._fieldsHelper?.updating||this.layerFilterUpdating)}highlight(e){return this.processor.highlight(e,this.layer.objectIdField)}get updatePolicy(){return this.processor.graphicsCore.effectiveUpdatePolicy}createInteractiveEditSession(e){return (0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.createInteractiveEditSession)(this._attributeEditingContext,e)}async _decompressBinaryPointData(e,t){const r={geometryBuffer:e.geometryBuffer};null==this._worker&&(this._worker=new _I3SPointsWorkerHandle_js__WEBPACK_IMPORTED_MODULE_25__.I3SPointsWorkerHandle((e=>this.view.resourceController.immediate.schedule(e))));const i=await this._worker.invoke(r,t);if(null==i)throw new Error("Failed to decompress Draco point data");return{positionData:i.positions,featureIds:i.featureIds}}async addNode(e,t,r){if(!se(t)&&!ie(t))throw new Error;if(this.loadedGraphics.hasNode(e.index))return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("I3S node "+e.id+" already added");const s=null!=this.layer.fullExtent?ne(this.layer.fullExtent.clone(),.5):null,o=[],{featureIds:a,pointPositions:n}=se(t)?await this._extractBinaryPointPositions(e,t,r):this._extractLegacyPointPositions(t);this._validatePositions(e,a,n,s,o);const l=this._controller.crsVertex,d=this.view.spatialReference;(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__.projectBuffer)(n,l,0,n,d,0,a.length);const u=se(t)?e.level:0,h=this._createGraphics(a,n,e.index,u),p=new ee(h,a,t.attributeDataInfo,e);if(await this._i3sOverrides.applyAttributeOverrides(p.featureIds,t.attributeDataInfo,r),e.numFeatures=p.graphics.length,this._updateNodeMemory(e),ae(p),o.length>0&&(this._computeObb(e,o,l),this._controller.updateVisibility(e.index)),!this._controller.isGeometryVisible(e))return void this._cacheNodeData(p);if(null!=this._verticalScale)for(const i of p.graphics)this._verticalScale(i.geometry);const g=this.view._stage.renderView.objectAndLayerIdRenderHelper;if(null!=g){const e=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_24__.isBasemapLayer)(this.view.map,this.layer.uid);for(let t=0;t<p.featureIds.length;t++){const r=p.featureIds[t];g.setUidToObjectAndLayerId(r,p.graphics[t].uid,this.layer.id,this.layer.uid,this.layer.popupEnabled&&!e&&(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_43__.hasPopupTemplate)(this.layer,this.view.popup?.defaultPopupTemplateEnabled),p.node.resources.attributes,t)}}this.loadedGraphics.addNode(e.index,p),this._controller.updateLoadStatus(e.index,!0),this._filterNode(p),this._treeDebugger&&this._treeDebugger.update()}_computeObb(e,t,r){const i=this._controller.crsIndex,s=i.isGeographic?this.view.renderSpatialReference:i;(0,_geometry_projection_projectBuffer_js__WEBPACK_IMPORTED_MODULE_12__.projectBuffer)(t,r,0,t,s,0,t.length/3),e.serviceObb=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_38__.compute)(new _webgl_engine_lib_Attribute_js__WEBPACK_IMPORTED_MODULE_40__.Vertices(t,3)),i.isGeographic&&(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_13__.projectVectorToVector)(e.serviceObb.center,s,e.serviceObb.center,i)}isNodeLoaded(e){return this.loadedGraphics.hasNode(e)}isNodeReloading(){return!1}updateNodeState(){}async _extractBinaryPointPositions(e,t,r){const i=await this._decompressBinaryPointData(t,r),s=i.positionData,o=3,a=s.length/o,n=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(3*a),l=null!=e.serviceObb?e.serviceObb.center:[0,0,0],d=Math.abs(l[2])*2**-20;for(let u=0;u<a;u++){const e=u*o;n[e]=s[e]+l[0],n[e+1]=s[e+1]+l[1],n[e+2]=s[e+2]+l[2],Math.abs(n[e+2])<d&&(n[e+2]=0)}return{featureIds:i.featureIds?(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.doubleArrayFrom)(i.featureIds):[],pointPositions:n}}_extractLegacyPointPositions(e){const t=e.pointData.length,r=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_15__.newDoubleArray)(3*t),i=new Array;for(let s=0;s<t;s++){const t=e.pointData[s],o=t.featureDataPosition,a=o.length,n=t.geometries?.[0]??le[a],l=t.featureIds[0];if("Embedded"!==n.type||"points"!==n.params.type||a<2||a>3)continue;const d=n.params.vertexAttributes?.position??[0,0,0],u=3*i.length;r[u]=o[0]+d[0],r[u+1]=o[1]+d[1],r[u+2]=3===a?o[2]+d[2]:NaN,i.push(l)}return{featureIds:i,pointPositions:r}}_validatePositions(e,t,r,s,o){if(null==s&&e.serviceObb)return;const a=t.length,n=3;for(let l=0;l<a;l++){const t=l*n;(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_10__.s)(de,r[t],r[t+1],r[t+2]);const a=!Number.isNaN(r[2]);null==s||(a?(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__.extentContainsCoords3D)(s,de):(0,_geometry_support_contains_js__WEBPACK_IMPORTED_MODULE_14__.extentContainsCoords2D)(s,de))||(this._coordinatesOutsideExtentErrors<this._maxCoordinatesOutsideExtentErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("Service Error: Coordinates outside of layer extent"),this._coordinatesOutsideExtentErrors+1===this._maxCoordinatesOutsideExtentErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("Maximum number of errors reached. Further errors are ignored."),this._coordinatesOutsideExtentErrors++),e.serviceObb||o.push(de[0],de[1],de[2])}}_createGraphics(e,r,i,s){const o=e.length,a=3,n=this._getObjectIdField(),l=this.processor.graphicsCore,d=new Array,u=this.view.spatialReference;for(let h=0;h<o;h++){const o=e[h],c={};null!=o&&(c[n]=o);const p=o??_Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].generateUID(),g=h*a,m=isNaN(r[g+2])?void 0:r[g+2],y=(0,_layers_graphics_dehydratedPoint_js__WEBPACK_IMPORTED_MODULE_19__.makeDehydratedPoint)(r[g],r[g+1],m,u),f=this.loadedGraphics.get(p);if(null!=f)(null==f.level||f.level<s)&&(ue.property="geometry",ue.graphic=f,ue.oldValue=f.geometry,ue.newValue=y,f.geometry=y,f.level=s,l.graphicUpdateHandler(ue)),d.push(f);else{const e=_Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].generateUID();d.push({objectId:p,uid:e,geometry:y,attributes:c,visible:!0,nodeIndex:i,level:s})}}return d}_updateNodeMemory(e){e.memory=4096+(null!=e.numFeatures?e.numFeatures*this.processor.graphicsCore.usedMemoryPerGraphic:0)}_cacheNodeData(e){const t=e.graphics.reduce(((e,t)=>(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_18__.estimateSize)(t)+e),(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_6__.estimateSize)(e.featureIds)+1024);this._memCache.put(this._getMemCacheKey(e.node),e,t)}_getMemCacheKey(e){return`${e.index}`}_removeAllNodeData(){this.loadedGraphics.forEachNode(((e,t)=>{if(e){const t=e.node;this._updateNodeMemory(t),this._cacheNodeData(e)}this._controller.updateLoadStatus(t,!1)})),this._treeDebugger&&this._treeDebugger.update(),this.loadedGraphics.clear()}removeNode(e){const t=this._removeNodeStageData(e);t&&(this._updateNodeMemory(t.node),this._cacheNodeData(t))}_removeNodeStageData(e){const t=this.loadedGraphics.getNode(e);return null==t?null:(this._controller.updateLoadStatus(e,!1),this.loadedGraphics.removeNode(e),this._treeDebugger&&this._treeDebugger.update(),t)}async loadCachedNodeData(e){return this._memCache?.pop(this._getMemCacheKey(e))}async addCachedNodeData(e,t,r,s){this.loadedGraphics.hasNode(e.index)?_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("I3S node "+e.id+" already added"):(await this._i3sOverrides.applyAttributeOverrides(t.featureIds,r,s),this.loadedGraphics.addNode(e.index,t),this._controller.updateLoadStatus(e.index,!0),this._updateNodeMemory(e),t.attributeInfo=r,this._attributeValuesChanged(t),this._filterNode(t),this._treeDebugger&&this._treeDebugger.update())}getLoadedNodeIds(){const e=[];return this.loadedGraphics.forEachNode((t=>e.push(t.node.id))),e.sort()}getVisibleNodes(){const e=new Array;return this.loadedGraphics.forEachNode((t=>e.push(t.node))),e}getLoadedNodeIndices(e){this.loadedGraphics.forEachNode(((t,r)=>e.push(r)))}getLoadedAttributes(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.loadedAttributes}getAttributeData(e){const t=this.loadedGraphics.getNode(e);if(null!=t?.attributeInfo)return t.attributeInfo.attributeData}_setAttributeData(e,t){const r=this.loadedGraphics.getNode(e);null!=r?.attributeInfo&&(r.attributeInfo.attributeData=t,this._attributeValuesChanged(r))}async updateAttributes(e,t,r){const i=this.loadedGraphics.getNode(e);null!=i&&(await this._i3sOverrides.applyAttributeOverrides(i.featureIds,t,r),i.attributeInfo=t,this._attributeValuesChanged(i))}_attributeValuesChanged(e){if(ae(e),this._filterNode(e),this.processor.graphicsCore.labelsEnabled){const t=e.graphics.map((e=>e.uid));this.processor.graphicsCore.updateLabelingInfo(t)}}_updateClippingExtent(e){return this._controller&&this._controller.updateClippingArea(e),!1}_getObjectIdField(){return this.layer.objectIdField||_layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_17__.fallbackObjectIDAttribute}_getGlobalIdField(){return this.layer.associatedLayer?.globalIdField}async _rendererChange(e,t){const{layer:{fieldsIndex:r}}=this,i=new Set;let s,o;e?(await e.collectRequiredFields(i,r),s=Array.from(i).sort()):s=[],i.clear(),t?(await t.collectRequiredFields(i,r),o=Array.from(i).sort()):o=[],s.length===o.length&&s.every(((e,t)=>s[t]===o[t]))||this._reloadAllNodes()}_rangeInfosChanged(e){null!=e&&e.length>0&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).warn("Unsupported property: rangeInfos are currently only serialized to and from web scenes but do not affect rendering.")}_filterChange(){this.loadedGraphics.forEachNode((e=>this._filterNode(e)))}_reloadAllNodes(){this._removeAllNodeData(),this._controller&&this._controller.restartNodeLoading()}_filterNode(e){const t=this.parsedDefinitionExpression,i=this._excludeObjectIdsSorted,s=this._getObjectIdField();for(const o of e.graphics){const e=o.visible,a=!t||this._evaluateClause(t,o),n=null==i||(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.binaryIndexOf)(i,o.attributes[s])<0;o.visible=a&&n,e!==o.visible&&(ue.graphic=o,ue.property="visible",ue.oldValue=e,ue.newValue=o.visible,this.processor.graphicsCore.graphicUpdateHandler(ue))}}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return null!=this.filter?this.filter.createQuery(e):new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"](e)}queryFeatures(e,t){return this._queryEngine.executeQuery(this._ensureQuery(e),t?.signal)}queryObjectIds(e,t){return this._queryEngine.executeQueryForIds(this._ensureQuery(e),t?.signal)}queryFeatureCount(e,t){return this._queryEngine.executeQueryForCount(this._ensureQuery(e),t?.signal)}queryExtent(e,t){return this._queryEngine.executeQueryForExtent(this._ensureQuery(e),t?.signal)}_ensureQuery(e){return this._addDefinitionExpressionToQuery(null==e?this.createQuery():_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_23__["default"].from(e))}_setupQueryEngine(){const e=()=>this.processor.featureStore;this._queryEngine=new _graphics_QueryEngine_js__WEBPACK_IMPORTED_MODULE_28__.QueryEngine({context:{spatialReference:this.view.spatialReference,layer:this.layer,scheduler:this.view.resourceController.scheduler,get featureStore(){return e()},hasZ:this.hasZ,hasM:this.hasM},priority:_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_44__.TaskPriority.FEATURE_QUERY_ENGINE})}get usedMemory(){return this.processor?.graphicsCore?.usedMemory??0}get unloadedMemory(){return.8*((this._controller?.unloadedMemoryEstimate??0)+(this.processor?.graphicsCore?.unprocessedMemoryEstimate??0))}get ignoresMemoryFactor(){return this._controller&&this._controller.fixedFeatureTarget}async _handleEdits(e){const t=this._attributeEditingContext,r=await (0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.normalizeEditResultsEvent)(t,e);(0,_i3s_featureEditing_js__WEBPACK_IMPORTED_MODULE_29__.processAttributeEdits)(t,r)}get _attributeEditingContext(){const e=this._getObjectIdField(),t=this._getGlobalIdField();return{sessions:this._interactiveEditingSessions,fieldsIndex:this.layer.fieldsIndex,objectIdField:e,globalIdField:t,forEachNode:e=>this.loadedGraphics.forEachNode((t=>e(t.node,t.featureIds))),attributeStorageInfo:this.i3slayer.attributeStorageInfo??[],i3sOverrides:this._i3sOverrides,getAttributeData:e=>this.getAttributeData(e),setAttributeData:(t,r,i)=>{this._setAttributeData(t,r);const s=this.loadedGraphics.getNode(t);if(null!=i){const t=this.loadedGraphics.get(i.attributes[e]);null!=t&&this.processor.graphicsCore.recreateGraphics([t])}else null!=s&&this.processor.graphicsCore.recreateGraphics(s.graphics)},clearMemCache:()=>{}}}get performanceInfo(){const e={displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:this.maximumNumberOfFeatures,totalNumberOfFeatures:-1,nodes:this.loadedGraphics.nodeCount,core:this.processor.graphicsCore.performanceInfo};return this._controller&&this._controller.updateStats(e),e}get test(){return{controller:this._controller,numNodes:this.loadedGraphics.nodeCount,loadedGraphics:this.loadedGraphics}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"processor",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({type:_layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_22__["default"]})],te.prototype,"filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"loadedGraphics",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"i3slayer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_controller",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"updating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"holeFilling",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(_support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_39__.updatingProgress)],te.prototype,"updatingProgress",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"updatingProgressValue",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(X.requiredFields)],te.prototype,"requiredFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)(X.availableFields)],te.prototype,"availableFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_fieldsHelper",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({type:Number})],te.prototype,"maximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"maximumNumberOfFeaturesExceeded",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"_excludeObjectIdsSorted",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"lodFactor",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"hasM",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"hasZ",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)()],te.prototype,"contentVisible",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({readOnly:!0})],te.prototype,"legendEnabled",null),te=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.3d.layers.SceneLayerGraphicsView3D")],te);const re=te;function ie(e){return"pointData"in e}function se(e){return"geometryBuffer"in e&&null!==e.geometryBuffer}function oe(e,t,r){const i=t.attributeInfo;if(null==i?.loadedAttributes||null==i.attributeData)return!1;let s=!1;for(const{name:o}of i.loadedAttributes)if(i.attributeData[o]){const t=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.getCachedAttributeValue)(i.attributeData[o],r);t!==e.attributes[o]&&(e.attributes[o]=t,s=!0)}return s}function ae(e){const t=e.attributeInfo,r=e.node.index;if(null!=t?.loadedAttributes&&null!=t.attributeData)for(let i=0;i<e.graphics.length;i++){const s=e.graphics[i];if(s.nodeIndex===r){s.attributes||(s.attributes={});for(const{name:e}of t.loadedAttributes)t.attributeData[e]&&(s.attributes[e]=(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.getCachedAttributeValue)(t.attributeData[e],i))}}}function ne(e,t){return e.xmin-=t,e.ymin-=t,e.xmax+=t,e.ymax+=t,null!=e.zmin&&null!=e.zmax&&(e.zmin-=t,e.zmax+=t),null!=e.mmin&&null!=e.mmax&&(e.mmin-=t,e.mmax+=t),e}const le={2:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0]}}},3:{type:"Embedded",params:{type:"points",vertexAttributes:{position:[0,0,0]}}}},de=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_11__.c)(),ue={graphic:null,property:null,oldValue:null,newValue:null};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SGraphicsMap.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SGraphicsMap: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/MapUtils.js */ "./node_modules/@arcgis/core/core/MapUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(e,t){super(),this._updateAndCompare=e,this._notifyUpdated=t,this._nodes=new Map,this._graphics=new Map,this._duplicates=new Map}clear(){if(this._graphics.size>0){const e=this.toArray();this._graphics.clear(),this.emit("change",{added:[],removed:e})}this._nodes.clear()}get length(){return this._graphics.size}get(e){return this._graphics.get(e)}getNode(e){return this._nodes.get(e)}hasNode(e){return this._nodes.has(e)}nodes(){return this._nodes.values()}addNode(e,t){this._nodes.set(e,t);const s=t.graphics;if(0===s.length)return;const n=new Set;for(let i=0;i<s.length;i++){const t=s[i],o=t.objectId,r=this._graphics.get(o);if(r){n.add(o),t!==r&&(s[i]=r);const d=this._duplicates.get(o);d?d.push(e):this._duplicates.set(o,[r.nodeIndex,e])}else t.nodeIndex=e,this._graphics.set(o,t)}n.size&&this._updateForeignGraphics(t);const o=n.size>0?s.filter((e=>!n.has(e.objectId))):s;o.length>0&&this.emit("change",{added:o,removed:[]})}removeNode(e){const t=this._nodes.get(e);if(!t)return void console.error("Removing unknown node");this._nodes.delete(e);const s=new Set,n=[];for(const o of t.graphics){const t=o.objectId,i=this._graphics.get(t);if(!i)continue;const r=this._duplicates.get(t);if(r){const n=r.indexOf(e);if(-1===n){console.error("error: removing graphic from node that should not reference it.");continue}if(r.splice(n,1),i.nodeIndex===e){let e=this.getNode(r[0]);for(let t=1;t<r.length;t++){const s=this.getNode(r[t]);(null==e||null!=s&&s.node.level>e.node.level)&&(e=s)}null!=e&&s.add(e)}1===r.length&&this._duplicates.delete(t)}else this._graphics.delete(t),n.push(o)}n.length>0&&this.emit("change",{added:[],removed:n}),s.forEach((e=>this._updateForeignGraphics(e)))}_updateForeignGraphics(e){const t=[],s=e.node.index,n=e.node.level;let o=0;for(;o<e.graphics.length;){const i=e.graphics[o].nodeIndex;if(i===s){o++;continue}let r=1;for(;o+r<e.graphics.length&&e.graphics[o+r].nodeIndex===i;)r++;const d=this.getNode(i);if(null!=d&&d.node.level>n)o+=r;else{for(let n=o;n<o+r;n++){const o=e.graphics[n];o.nodeIndex=s,this._updateAndCompare(o,e,n)&&t.push(o)}o+=r}}this._notifyUpdated(t)}toArray(){return Array.from(this._graphics.values())}find(e){let s;return (0,_core_MapUtils_js__WEBPACK_IMPORTED_MODULE_1__.someMap)(this._graphics,(t=>!!e(t)&&(s=t,!0))),s}forEach(e){this._graphics.forEach((t=>e(t)))}forEachNode(e){this._nodes.forEach(((t,s)=>e(t,s)))}get nodeCount(){return this._nodes.size}_checkInvariants(){const e=new Map;this._nodes.forEach(((t,s)=>{s!==t.node.index&&console.error("Mismatched node index"),t.graphics.forEach((t=>{e.set(t.objectId,1+(e.get(t.objectId)??0));const n=this._duplicates.get(t.objectId);n&&!n.includes(s)&&console.error("Node not listed in duplicate list"),n||t.nodeIndex===s||console.error("Unique graphic does not reference owning node index")}))})),this._graphics.size!==e.size&&console.error("Mismatch between actual and expected number of graphics");let t=0;e.forEach(((e,s)=>{t+=e>1?1:0;const n=this._graphics.get(s);if(!n)return void console.error("Missing graphic entry");const o=this._nodes.get(n.nodeIndex);if(!o)return void console.error("Graphic references unkown node");const i=this._duplicates.get(s);i?(i.length!==e&&console.error("Wrong number of entries in duplicate list"),i.forEach((e=>{const t=this._nodes.get(e);t?t.node.level>o.node.level&&console.error("Duplicated graphic does not reference highest level node"):console.error("Unknown node in duplicate list")}))):e>1&&console.error("Missing duplicates entry")})),this._duplicates.size!==t&&console.error("Mismatch between expected and actual number of duplicate entries")}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefinitionExpressionSceneLayerView: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/sql/WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Error while evaluating definitionExpression: "+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Further errors are ignored")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("definitionExpression is using non standard function"),null;const i=[],s=r.fieldNames;return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.findFieldsCaseInsensitive)(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(`definitionExpression references unknown fields: ${i.join(", ")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Failed to parse definitionExpression: "+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],p.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"parsedDefinitionExpression",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"definitionExpressionFields",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],p),p};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2NvcmVfbWF5YmVVcGRhdGluZ19qcy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvcmVfdmlld3NfLTkzZjMxNi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYyw0QkFBNEIsY0FBYyxxQkFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMUo7QUFDQTtBQUNBO0FBQ0E7QUFDcUUsZ0JBQWdCLHVFQUFDLENBQUMsZUFBZSwwREFBMEQsb0RBQW9ELElBQUksaUJBQWlCLEdBQXNDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKL1E7QUFDQTtBQUNBO0FBQ0E7QUFDcWtHLFFBQVEsbUZBQUMsR0FBRyxTQUFTLHFCQUFxQixvRUFBb0UscUJBQXFCLG1IQUFDLENBQUMscUZBQUMsQ0FBQyw2REFBQyxDQUFDLGtFQUFDLEtBQUssY0FBYyw4TUFBOE0sbUVBQUMsMFBBQTBQLG9CQUFvQiwrRUFBK0UsaUVBQUMsNEVBQTRFLHVEQUF1RCx1QkFBdUIsK0RBQUMsRUFBRSwwQ0FBMEMsRUFBRSw0REFBQyxnRkFBZ0YsUUFBUSxhQUFhLCtDQUErQyx1REFBdUQsdUJBQXVCLCtEQUFDLEVBQUUsbURBQW1ELEVBQUUsd0VBQUMscUZBQXFGLG1HQUFDLEVBQUUsZUFBZSx3RkFBd0YsMkRBQUMscU9BQXFPLDZEQUFDLE1BQU0sK0RBQUMsMkJBQTJCLDJCQUEyQixrQ0FBa0MsOFFBQXNDLFNBQVMsa0JBQWtCLElBQUkscUJBQXFCLCtEQUFDLGlEQUFpRCxnQ0FBZ0MsR0FBRyxHQUFHLDZCQUE2QiwrREFBQyw2RUFBNkUsRUFBRSwyREFBQyw2QkFBNkIsZ0dBQUMsRUFBRSxpQ0FBaUMsNEVBQUMseVJBQXlSLDBNQUEwTSxnRkFBQywwTUFBME0sU0FBUyx3QkFBd0IsOEZBQUMsRUFB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bW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9tYXliZVVwZGF0aW5nLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvSTNTUG9pbnRzV29ya2VySGFuZGxlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvU2NlbmVMYXllckdyYXBoaWNzVmlldzNELmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvaTNzL0kzU0dyYXBoaWNzTWFwLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvc3VwcG9ydC9EZWZpbml0aW9uRXhwcmVzc2lvblNjZW5lTGF5ZXJWaWV3LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCBuPVwidXBkYXRpbmdcIjtmdW5jdGlvbiB0KG4pe3JldHVyblwidXBkYXRpbmdcIj09PW4/bnVsbDpufWZ1bmN0aW9uIHUobil7cmV0dXJuXCJ1cGRhdGluZ1wiPT09bn1leHBvcnR7dSBhcyBpc1VwZGF0aW5nLHQgYXMgdW53cmFwVXBkYXRpbmcsbiBhcyB1cGRhdGluZ307XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e1dvcmtlckhhbmRsZSBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvd29ya2Vycy9Xb3JrZXJIYW5kbGUuanNcIjtjbGFzcyByIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlKXtzdXBlcihcIlNjZW5lTGF5ZXJXb3JrZXJcIixcImRyYWNvRGVjb21wcmVzc1BvaW50Q2xvdWREYXRhXCIse2RyYWNvRGVjb21wcmVzc1BvaW50Q2xvdWREYXRhOmU9PltlLmdlb21ldHJ5QnVmZmVyXX0sZSx7aGFzSW5pdGlhbGl6ZTohMH0pfX1leHBvcnR7ciBhcyBJM1NQb2ludHNXb3JrZXJIYW5kbGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL0dyYXBoaWMuanNcIjtpbXBvcnR7YmluYXJ5SW5kZXhPZiBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7aW5pdGlhbCBhcyBvLHdhdGNoIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e2VzdGltYXRlU2l6ZSBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvdHlwZWRBcnJheVV0aWwuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGR9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtzIGFzIHV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3ZlYzMuanNcIjtpbXBvcnR7YyBhcyBofWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMzZjY0LmpzXCI7aW1wb3J0e3Byb2plY3RCdWZmZXIgYXMgY31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCdWZmZXIuanNcIjtpbXBvcnR7cHJvamVjdFZlY3RvclRvVmVjdG9yIGFzIHB9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi9wcm9qZWN0VmVjdG9yVG9WZWN0b3IuanNcIjtpbXBvcnR7ZXh0ZW50Q29udGFpbnNDb29yZHMzRCBhcyBnLGV4dGVudENvbnRhaW5zQ29vcmRzMkQgYXMgbX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2NvbnRhaW5zLmpzXCI7aW1wb3J0e25ld0RvdWJsZUFycmF5IGFzIHksZG91YmxlQXJyYXlGcm9tIGFzIGZ9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9Eb3VibGVBcnJheS5qc1wiO2ltcG9ydHtnZXRHZW9tZXRyeVpTY2FsZXIgYXMgX31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3pzY2FsZS5qc1wiO2ltcG9ydHtmYWxsYmFja09iamVjdElEQXR0cmlidXRlIGFzIGJ9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL0xheWVyQ29uc3RhbnRzLmpzXCI7aW1wb3J0e2VzdGltYXRlU2l6ZSBhcyB2fWZyb21cIi4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kZWh5ZHJhdGVkRmVhdHVyZXMuanNcIjtpbXBvcnR7bWFrZURlaHlkcmF0ZWRQb2ludCBhcyBFfWZyb21cIi4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kZWh5ZHJhdGVkUG9pbnQuanNcIjtpbXBvcnR7aHlkcmF0ZUdyYXBoaWMgYXMgeH1mcm9tXCIuLi8uLi8uLi9sYXllcnMvZ3JhcGhpY3MvaHlkcmF0ZWRGZWF0dXJlcy5qc1wiO2ltcG9ydCBJIGZyb21cIi4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9jb250cm9sbGVycy9JM1NPbkRlbWFuZENvbnRyb2xsZXIuanNcIjtpbXBvcnQgdyBmcm9tXCIuLi8uLi8uLi9sYXllcnMvc3VwcG9ydC9GZWF0dXJlRmlsdGVyLmpzXCI7aW1wb3J0IE4gZnJvbVwiLi4vLi4vLi4vcmVzdC9zdXBwb3J0L1F1ZXJ5LmpzXCI7aW1wb3J0e2lzQmFzZW1hcExheWVyIGFzIE99ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9iYXNlbWFwVXRpbHMuanNcIjtpbXBvcnR7STNTUG9pbnRzV29ya2VySGFuZGxlIGFzIGp9ZnJvbVwiLi9JM1NQb2ludHNXb3JrZXJIYW5kbGUuanNcIjtpbXBvcnR7TGF5ZXJWaWV3M0QgYXMgQ31mcm9tXCIuL0xheWVyVmlldzNELmpzXCI7aW1wb3J0e0dyYXBoaWNzM0RGZWF0dXJlUHJvY2Vzc29yIGFzIEZ9ZnJvbVwiLi9ncmFwaGljcy9HcmFwaGljczNERmVhdHVyZVByb2Nlc3Nvci5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZSBhcyBEfWZyb21cIi4vZ3JhcGhpY3MvUXVlcnlFbmdpbmUuanNcIjtpbXBvcnR7Y3JlYXRlSW50ZXJhY3RpdmVFZGl0U2Vzc2lvbiBhcyBTLG5vcm1hbGl6ZUVkaXRSZXN1bHRzRXZlbnQgYXMgRyxwcm9jZXNzQXR0cmlidXRlRWRpdHMgYXMgQX1mcm9tXCIuL2kzcy9mZWF0dXJlRWRpdGluZy5qc1wiO2ltcG9ydHtJM1NHcmFwaGljc01hcCBhcyBQfWZyb21cIi4vaTNzL0kzU0dyYXBoaWNzTWFwLmpzXCI7aW1wb3J0e0kzU092ZXJyaWRlcyBhcyBMfWZyb21cIi4vaTNzL0kzU092ZXJyaWRlcy5qc1wiO2ltcG9ydHtjaGVja1JlY3ljbGFibGUgYXMgVixjaGVja1NwYXRpYWxSZWZlcmVuY2VzIGFzIE0sY29udGFpbnNEcmFjbyBhcyBILHdoZW5HcmFwaGljQXR0cmlidXRlcyBhcyBSLGdldENhY2hlZEF0dHJpYnV0ZVZhbHVlIGFzIFF9ZnJvbVwiLi9pM3MvSTNTVXRpbC5qc1wiO2ltcG9ydHtEZWZpbml0aW9uRXhwcmVzc2lvblNjZW5lTGF5ZXJWaWV3IGFzIFV9ZnJvbVwiLi9zdXBwb3J0L0RlZmluaXRpb25FeHByZXNzaW9uU2NlbmVMYXllclZpZXcuanNcIjtpbXBvcnR7ZGVmaW5lRmllbGRQcm9wZXJ0aWVzIGFzIHF9ZnJvbVwiLi9zdXBwb3J0L2ZpZWxkUHJvcGVydGllcy5qc1wiO2ltcG9ydHtQb3B1cFNjZW5lTGF5ZXJWaWV3IGFzIFR9ZnJvbVwiLi9zdXBwb3J0L1BvcHVwU2NlbmVMYXllclZpZXcuanNcIjtpbXBvcnR7U2NlbmVMYXllclZpZXdSZXF1aXJlZEZpZWxkcyBhcyBCfWZyb21cIi4vc3VwcG9ydC9TY2VuZUxheWVyVmlld1JlcXVpcmVkRmllbGRzLmpzXCI7aW1wb3J0e2RlYnVnRmxhZ3MgYXMga31mcm9tXCIuLi9zdXBwb3J0L2RlYnVnRmxhZ3MuanNcIjtpbXBvcnR7Y29tcHV0ZSBhcyB6fWZyb21cIi4uL3N1cHBvcnQvb3JpZW50ZWRCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHt1cGRhdGluZ1Byb2dyZXNzIGFzIFd9ZnJvbVwiLi4vc3VwcG9ydC91cGRhdGluZ1Byb3BlcnRpZXMuanNcIjtpbXBvcnR7VmVydGljZXMgYXMgWn1mcm9tXCIuLi93ZWJnbC1lbmdpbmUvbGliL0F0dHJpYnV0ZS5qc1wiO2ltcG9ydHtVcGRhdGVQb2xpY3kgYXMgS31mcm9tXCIuLi93ZWJnbC1lbmdpbmUvbGliL1VwZGF0ZVBvbGljeS5qc1wiO2ltcG9ydCBZIGZyb21cIi4uLy4uL2xheWVycy9TY2VuZUxheWVyVmlldy5qc1wiO2ltcG9ydHtoYXNQb3B1cFRlbXBsYXRlIGFzICR9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvcG9wdXBVdGlscy5qc1wiO2ltcG9ydHtUYXNrUHJpb3JpdHkgYXMgSn1mcm9tXCIuLi8uLi9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2NvbnN0IFg9cSgpO2NsYXNzIGVle2NvbnN0cnVjdG9yKGUsdCxyLGkpe3RoaXMuZ3JhcGhpY3M9ZSx0aGlzLmZlYXR1cmVJZHM9dCx0aGlzLmF0dHJpYnV0ZUluZm89cix0aGlzLm5vZGU9aX19bGV0IHRlPWNsYXNzIGV4dGVuZHMoVShUKEMoWSkpKSl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMudHlwZT1cInNjZW5lLWxheWVyLWdyYXBoaWNzLTNkXCIsdGhpcy5fcXVlcnlFbmdpbmU9bnVsbCx0aGlzLl9tZW1DYWNoZT1udWxsLHRoaXMuX2ludGVyYWN0aXZlRWRpdGluZ1Nlc3Npb25zPW5ldyBNYXAsdGhpcy5fcGVuZGluZ0VkaXRzUXVldWU9UHJvbWlzZS5yZXNvbHZlKCksdGhpcy5sb2FkZWRHcmFwaGljcz1uZXcgUCgoKGUsdCxyKT0+b2UoZSx0LHIpKSwoZT0+dGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLnJlY3JlYXRlR3JhcGhpY3MoZSkpKSx0aGlzLmhvbGVGaWxsaW5nPVwiYWx3YXlzXCIsdGhpcy5wcm9ncmVzc2l2ZUxvYWRGYWN0b3I9MSx0aGlzLnN1cHBvcnRzSGVpZ2h0VW5pdENvbnZlcnNpb249ITAsdGhpcy5fY29vcmRpbmF0ZXNPdXRzaWRlRXh0ZW50RXJyb3JzPTAsdGhpcy5fbWF4Q29vcmRpbmF0ZXNPdXRzaWRlRXh0ZW50RXJyb3JzPTIwfXRyeVJlY3ljbGVXaXRoKGUsdCl7cmV0dXJuIGUudXJsPT09dGhpcy5sYXllci51cmwmJnRoaXMuX2kzc092ZXJyaWRlcy5pc0VtcHR5P2UubG9hZCh0KS50aGVuKCgoKT0+e1YodGhpcy5sYXllcixlLHRoaXMuX2kzc092ZXJyaWRlcyksdGhpcy5sYXllcj1lLHRoaXMuX2kzc092ZXJyaWRlcy5kZXN0cm95KCk7Y29uc3QgdD10aGlzLnZpZXcucmVzb3VyY2VDb250cm9sbGVyPy5tZW1vcnlDb250cm9sbGVyO3RoaXMuX2kzc092ZXJyaWRlcz1uZXcgTCh7dmlldzp0aGlzLnZpZXcsbGF5ZXI6ZSxtZW1vcnlDb250cm9sbGVyOnR9KSxzKHRoaXMuX3F1ZXJ5RW5naW5lKSx0aGlzLl9zZXR1cFF1ZXJ5RW5naW5lKCksdGhpcy5wcm9jZXNzb3IucmVzZXRPYmplY3RTdGF0ZXMoKX0pKTpudWxsfWluaXRpYWxpemUoKXt0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UodGhpcy5sYXllci5pbmRleEluZm8pO2NvbnN0IGU9dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlcj8ubWVtb3J5Q29udHJvbGxlcjt0aGlzLl9pM3NPdmVycmlkZXM9bmV3IEwoe3ZpZXc6dGhpcy52aWV3LGxheWVyOnRoaXMubGF5ZXIsbWVtb3J5Q29udHJvbGxlcjplfSksTSh0aGlzLmxheWVyLHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlLHRoaXMudmlldy52aWV3aW5nTW9kZSksdGhpcy5fZmllbGRzSGVscGVyPW5ldyBCKHtsYXllclZpZXc6dGhpc30pLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50aGlzLmxheWVyLnJhbmdlSW5mb3MpLChlPT50aGlzLl9yYW5nZUluZm9zQ2hhbmdlZChlKSksbyksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZCgoKCk9PnRoaXMubGF5ZXIucmVuZGVyZXIpLCgoZSx0KT0+dGhpcy5fcmVuZGVyZXJDaGFuZ2UoZSx0KSkpLHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT5bdGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbix0aGlzLl9leGNsdWRlT2JqZWN0SWRzU29ydGVkXSksKCgpPT50aGlzLl9maWx0ZXJDaGFuZ2UoKSkpLHRoaXMuYWRkSGFuZGxlcyhhKCgoKT0+ay5JM1NfVFJFRV9TSE9XX1RJTEVTKSwoZT0+e2lmKGUmJiF0aGlzLl90cmVlRGVidWdnZXIpe2NvbnN0IGU9dGhpcy5fY29udHJvbGxlci5jcnNJbmRleDtpbXBvcnQoXCIuL3N1cHBvcnQvSTNTVHJlZURlYnVnZ2VyLmpzXCIpLnRoZW4oKCh7STNTVHJlZURlYnVnZ2VyOnR9KT0+eyF0aGlzLl90cmVlRGVidWdnZXImJmsuSTNTX1RSRUVfU0hPV19USUxFUyYmKHRoaXMuX3RyZWVEZWJ1Z2dlcj1uZXcgdCh7bHY6dGhpcyx2aWV3OnRoaXMudmlldyxub2RlU1I6ZX0pKX0pKX1lbHNlIGV8fCF0aGlzLl90cmVlRGVidWdnZXJ8fGsuSTNTX1RSRUVfU0hPV19USUxFU3x8KHRoaXMuX3RyZWVEZWJ1Z2dlci5kZXN0cm95KCksdGhpcy5fdHJlZURlYnVnZ2VyPW51bGwpfSksbykpLHRoaXMuX3NldChcInByb2Nlc3NvclwiLG5ldyBGKHtvd25lcjp0aGlzLHByZWZlcnJlZFVwZGF0ZVBvbGljeTpLLkFTWU5DLHNjYWxlVmlzaWJpbGl0eUVuYWJsZWQ6ITAsZmlsdGVyVmlzaWJpbGl0eUVuYWJsZWQ6ITAsdGltZUV4dGVudEVuYWJsZWQ6ITEsZnJ1c3R1bVZpc2liaWxpdHlFbmFibGVkOiExLGVsZXZhdGlvbkFsaWdubWVudEVuYWJsZWQ6ITAsZWxldmF0aW9uRmVhdHVyZUV4cHJlc3Npb25FbmFibGVkOiExLHNldFVpZFRvSWRPbkFkZDohMSxkYXRhRXh0ZW50OnRoaXMubGF5ZXIuZnVsbEV4dGVudCx1cGRhdGVDbGlwcGluZ0V4dGVudDplPT50aGlzLl91cGRhdGVDbGlwcGluZ0V4dGVudChlKX0pKSx0aGlzLnByb2Nlc3Nvci5lbGV2YXRpb25BbGlnbm1lbnQ/LmV2ZW50cy5vbihcImludmFsaWRhdGUtZWxldmF0aW9uXCIsKGU9PnRoaXMuX2NvbnRyb2xsZXIudXBkYXRlRWxldmF0aW9uQ2hhbmdlZChlLmV4dGVudCxlLnNwYXRpYWxSZWZlcmVuY2UpKSksdGhpcy5zdXBwb3J0c0hlaWdodFVuaXRDb252ZXJzaW9uJiYodGhpcy5fdmVydGljYWxTY2FsZT1fKFwicG9pbnRcIix0aGlzLmxheWVyLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UpKSx0aGlzLmFkZFJlc29sdmluZ1Byb21pc2UodGhpcy5wcm9jZXNzb3IuaW5pdGlhbGl6ZVByb21pc2UpLHRoaXMuX21lbUNhY2hlPXRoaXMudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIubWVtb3J5Q29udHJvbGxlci5uZXdDYWNoZShgcHNsLSR7dGhpcy51aWR9YCksdGhpcy5fY29udHJvbGxlcj1uZXcgSSh7bGF5ZXJWaWV3OnRoaXMsc2NhbGVWaXNpYmlsaXR5RW5hYmxlZDohMX0pLEgodGhpcy5sYXllci5nZW9tZXRyeURlZmluaXRpb25zKSYmKHRoaXMuX3dvcmtlcj1uZXcgaigoZT0+dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5pbW1lZGlhdGUuc2NoZWR1bGUoZSkpKSksdGhpcy5hZGRIYW5kbGVzKHRoaXMubGF5ZXIub24oXCJhcHBseS1lZGl0c1wiLChlPT50aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZShlLnJlc3VsdCkpKSksdGhpcy5hZGRIYW5kbGVzKHRoaXMubGF5ZXIub24oXCJlZGl0c1wiLChlPT57Y29uc3QgdD10aGlzLl9wZW5kaW5nRWRpdHNRdWV1ZS50aGVuKCgoKT0+dGhpcy5faGFuZGxlRWRpdHMoZSkpKS50aGVuKCk7dGhpcy5fcGVuZGluZ0VkaXRzUXVldWU9dCx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0KX0pKSksdGhpcy53aGVuKCgoKT0+e3RoaXMuX3NldHVwUXVlcnlFbmdpbmUoKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5tYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcyksKGU9PnRoaXMuX2NvbnRyb2xsZXIuZmVhdHVyZVRhcmdldD1lKSxvKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkKCgoKT0+dGhpcy5zdXNwZW5kZWQpLChlPT57ZSYmdGhpcy5fcmVtb3ZlQWxsTm9kZURhdGEoKX0pKX0pKX1kZXN0cm95KCl7dGhpcy5fdHJlZURlYnVnZ2VyPXModGhpcy5fdHJlZURlYnVnZ2VyKSx0aGlzLl9pM3NPdmVycmlkZXM9cyh0aGlzLl9pM3NPdmVycmlkZXMpLHRoaXMuX3NldChcInByb2Nlc3NvclwiLHModGhpcy5wcm9jZXNzb3IpKSx0aGlzLl9jb250cm9sbGVyPXModGhpcy5fY29udHJvbGxlciksdGhpcy5fcXVlcnlFbmdpbmU9cyh0aGlzLl9xdWVyeUVuZ2luZSksdGhpcy5fd29ya2VyPXModGhpcy5fd29ya2VyKSx0aGlzLl9tZW1DYWNoZT1zKHRoaXMuX21lbUNhY2hlKSx0aGlzLmxvYWRlZEdyYXBoaWNzLmNsZWFyKCksdGhpcy5fZmllbGRzSGVscGVyPXModGhpcy5fZmllbGRzSGVscGVyKX1nZXQgaTNzbGF5ZXIoKXtyZXR1cm4gdGhpcy5sYXllcn1nZXQgdXBkYXRpbmdQcm9ncmVzc1ZhbHVlKCl7cmV0dXJuIHRoaXMuX2NvbnRyb2xsZXI/LnVwZGF0aW5nUHJvZ3Jlc3M/PzF9Z2V0IHJlcXVpcmVkRmllbGRzKCl7cmV0dXJuIHRoaXMuX2ZpZWxkc0hlbHBlcj8ucmVxdWlyZWRGaWVsZHM/P1tdfWdldCBtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcygpe2NvbnN0IGU9dGhpcy5wcm9jZXNzb3I/LmdyYXBoaWNzQ29yZT8uZGlzcGxheUZlYXR1cmVMaW1pdDtyZXR1cm4gZT8ubWF4aW11bU51bWJlck9mRmVhdHVyZXM/PzB9c2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzKGUpe251bGwhPWU/KHRoaXMuX292ZXJyaWRlKFwibWF4aW11bU51bWJlck9mRmVhdHVyZXNcIixlKSx0aGlzLl9jb250cm9sbGVyLmZpeGVkRmVhdHVyZVRhcmdldD0hMCk6KHRoaXMuX2NsZWFyT3ZlcnJpZGUoXCJtYXhpbXVtTnVtYmVyT2ZGZWF0dXJlc1wiKSx0aGlzLl9jb250cm9sbGVyLmZpeGVkRmVhdHVyZVRhcmdldD0hMSl9Z2V0IG1heGltdW1OdW1iZXJPZkZlYXR1cmVzRXhjZWVkZWQoKXtyZXR1cm4hdGhpcy5zdXNwZW5kZWQmJighIXRoaXMuX2NvbnRyb2xsZXI/LnVzZU1heGltdW1OdW1iZXJPZkZlYXR1cmVzJiYhdGhpcy5fY29udHJvbGxlci5sZWF2ZXNSZWFjaGVkKX1nZXQgX2V4Y2x1ZGVPYmplY3RJZHNTb3J0ZWQoKXtjb25zdCBlPXRoaXMubGF5ZXIuZXhjbHVkZU9iamVjdElkcztyZXR1cm4gZS5sZW5ndGg/ZS50b0FycmF5KCkuc29ydCgoKGUsdCk9PmUtdCkpOm51bGx9Z2V0IGxvZEZhY3Rvcigpe3JldHVyblwiTGFiZWxzXCI9PT10aGlzLmxheWVyLnNlbWFudGljPzE6dGhpcy52aWV3LnF1YWxpdHlTZXR0aW5ncy5zY2VuZVNlcnZpY2UucG9pbnQubG9kRmFjdG9yfWdldCBoYXNNKCl7cmV0dXJuITF9Z2V0IGhhc1ooKXtyZXR1cm4hMH1nZXQgY29udGVudFZpc2libGUoKXtyZXR1cm4hdGhpcy5zdXNwZW5kZWQmJiEhdGhpcy5fY29udHJvbGxlcj8ucm9vdE5vZGVWaXNpYmxlfWdldCBsZWdlbmRFbmFibGVkKCl7cmV0dXJuIHRoaXMuY29udGVudFZpc2libGUmJiEwPT09dGhpcy5pM3NsYXllcj8ubGVnZW5kRW5hYmxlZH1hc3luYyB3aGVuR3JhcGhpY0F0dHJpYnV0ZXMoZSx0KXtyZXR1cm4gUih0aGlzLmxheWVyLGUsdGhpcy5fZ2V0T2JqZWN0SWRGaWVsZCgpLHQsKCgpPT5bLi4udGhpcy5sb2FkZWRHcmFwaGljcy5ub2RlcygpXSkpfWdldEhpdChlKXtpZighdGhpcy5sb2FkZWRHcmFwaGljcylyZXR1cm4gbnVsbDtjb25zdCB0PXgodGhpcy5sb2FkZWRHcmFwaGljcy5maW5kKCh0PT50LnVpZD09PWUpKSx0aGlzLmxheWVyKSxyPXRoaXMuX2dldE9iamVjdElkRmllbGQoKTtyZXR1cm4gdD8uYXR0cmlidXRlcz8uW3JdPyh0LmxheWVyPXRoaXMubGF5ZXIsdC5zb3VyY2VMYXllcj10aGlzLmxheWVyLHt0eXBlOlwiZ3JhcGhpY1wiLGdyYXBoaWM6dCxsYXllcjp0LmxheWVyfSk6bnVsbH13aGVuR3JhcGhpY0JvdW5kcyhlLHQpe3JldHVybiB0aGlzLnByb2Nlc3Nvci53aGVuR3JhcGhpY0JvdW5kcyhlLHQpfWNvbXB1dGVBdHRhY2htZW50T3JpZ2luKGUsdCl7cmV0dXJuIHRoaXMucHJvY2Vzc29yLmNvbXB1dGVBdHRhY2htZW50T3JpZ2luKGUsdCl9aXNVcGRhdGluZygpe3JldHVybiEhKHRoaXMuX2NvbnRyb2xsZXI/LnVwZGF0aW5nfHx0aGlzLnByb2Nlc3Nvcj8udXBkYXRpbmd8fHRoaXMuX2ZpZWxkc0hlbHBlcj8udXBkYXRpbmd8fHRoaXMubGF5ZXJGaWx0ZXJVcGRhdGluZyl9aGlnaGxpZ2h0KGUpe3JldHVybiB0aGlzLnByb2Nlc3Nvci5oaWdobGlnaHQoZSx0aGlzLmxheWVyLm9iamVjdElkRmllbGQpfWdldCB1cGRhdGVQb2xpY3koKXtyZXR1cm4gdGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLmVmZmVjdGl2ZVVwZGF0ZVBvbGljeX1jcmVhdGVJbnRlcmFjdGl2ZUVkaXRTZXNzaW9uKGUpe3JldHVybiBTKHRoaXMuX2F0dHJpYnV0ZUVkaXRpbmdDb250ZXh0LGUpfWFzeW5jIF9kZWNvbXByZXNzQmluYXJ5UG9pbnREYXRhKGUsdCl7Y29uc3Qgcj17Z2VvbWV0cnlCdWZmZXI6ZS5nZW9tZXRyeUJ1ZmZlcn07bnVsbD09dGhpcy5fd29ya2VyJiYodGhpcy5fd29ya2VyPW5ldyBqKChlPT50aGlzLnZpZXcucmVzb3VyY2VDb250cm9sbGVyLmltbWVkaWF0ZS5zY2hlZHVsZShlKSkpKTtjb25zdCBpPWF3YWl0IHRoaXMuX3dvcmtlci5pbnZva2Uocix0KTtpZihudWxsPT1pKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBkZWNvbXByZXNzIERyYWNvIHBvaW50IGRhdGFcIik7cmV0dXJue3Bvc2l0aW9uRGF0YTppLnBvc2l0aW9ucyxmZWF0dXJlSWRzOmkuZmVhdHVyZUlkc319YXN5bmMgYWRkTm9kZShlLHQscil7aWYoIXNlKHQpJiYhaWUodCkpdGhyb3cgbmV3IEVycm9yO2lmKHRoaXMubG9hZGVkR3JhcGhpY3MuaGFzTm9kZShlLmluZGV4KSlyZXR1cm4gdm9pZCBpLmdldExvZ2dlcih0aGlzKS5lcnJvcihcIkkzUyBub2RlIFwiK2UuaWQrXCIgYWxyZWFkeSBhZGRlZFwiKTtjb25zdCBzPW51bGwhPXRoaXMubGF5ZXIuZnVsbEV4dGVudD9uZSh0aGlzLmxheWVyLmZ1bGxFeHRlbnQuY2xvbmUoKSwuNSk6bnVsbCxvPVtdLHtmZWF0dXJlSWRzOmEscG9pbnRQb3NpdGlvbnM6bn09c2UodCk/YXdhaXQgdGhpcy5fZXh0cmFjdEJpbmFyeVBvaW50UG9zaXRpb25zKGUsdCxyKTp0aGlzLl9leHRyYWN0TGVnYWN5UG9pbnRQb3NpdGlvbnModCk7dGhpcy5fdmFsaWRhdGVQb3NpdGlvbnMoZSxhLG4scyxvKTtjb25zdCBsPXRoaXMuX2NvbnRyb2xsZXIuY3JzVmVydGV4LGQ9dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2U7YyhuLGwsMCxuLGQsMCxhLmxlbmd0aCk7Y29uc3QgdT1zZSh0KT9lLmxldmVsOjAsaD10aGlzLl9jcmVhdGVHcmFwaGljcyhhLG4sZS5pbmRleCx1KSxwPW5ldyBlZShoLGEsdC5hdHRyaWJ1dGVEYXRhSW5mbyxlKTtpZihhd2FpdCB0aGlzLl9pM3NPdmVycmlkZXMuYXBwbHlBdHRyaWJ1dGVPdmVycmlkZXMocC5mZWF0dXJlSWRzLHQuYXR0cmlidXRlRGF0YUluZm8sciksZS5udW1GZWF0dXJlcz1wLmdyYXBoaWNzLmxlbmd0aCx0aGlzLl91cGRhdGVOb2RlTWVtb3J5KGUpLGFlKHApLG8ubGVuZ3RoPjAmJih0aGlzLl9jb21wdXRlT2JiKGUsbyxsKSx0aGlzLl9jb250cm9sbGVyLnVwZGF0ZVZpc2liaWxpdHkoZS5pbmRleCkpLCF0aGlzLl9jb250cm9sbGVyLmlzR2VvbWV0cnlWaXNpYmxlKGUpKXJldHVybiB2b2lkIHRoaXMuX2NhY2hlTm9kZURhdGEocCk7aWYobnVsbCE9dGhpcy5fdmVydGljYWxTY2FsZSlmb3IoY29uc3QgaSBvZiBwLmdyYXBoaWNzKXRoaXMuX3ZlcnRpY2FsU2NhbGUoaS5nZW9tZXRyeSk7Y29uc3QgZz10aGlzLnZpZXcuX3N0YWdlLnJlbmRlclZpZXcub2JqZWN0QW5kTGF5ZXJJZFJlbmRlckhlbHBlcjtpZihudWxsIT1nKXtjb25zdCBlPU8odGhpcy52aWV3Lm1hcCx0aGlzLmxheWVyLnVpZCk7Zm9yKGxldCB0PTA7dDxwLmZlYXR1cmVJZHMubGVuZ3RoO3QrKyl7Y29uc3Qgcj1wLmZlYXR1cmVJZHNbdF07Zy5zZXRVaWRUb09iamVjdEFuZExheWVySWQocixwLmdyYXBoaWNzW3RdLnVpZCx0aGlzLmxheWVyLmlkLHRoaXMubGF5ZXIudWlkLHRoaXMubGF5ZXIucG9wdXBFbmFibGVkJiYhZSYmJCh0aGlzLmxheWVyLHRoaXMudmlldy5wb3B1cD8uZGVmYXVsdFBvcHVwVGVtcGxhdGVFbmFibGVkKSxwLm5vZGUucmVzb3VyY2VzLmF0dHJpYnV0ZXMsdCl9fXRoaXMubG9hZGVkR3JhcGhpY3MuYWRkTm9kZShlLmluZGV4LHApLHRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyhlLmluZGV4LCEwKSx0aGlzLl9maWx0ZXJOb2RlKHApLHRoaXMuX3RyZWVEZWJ1Z2dlciYmdGhpcy5fdHJlZURlYnVnZ2VyLnVwZGF0ZSgpfV9jb21wdXRlT2JiKGUsdCxyKXtjb25zdCBpPXRoaXMuX2NvbnRyb2xsZXIuY3JzSW5kZXgscz1pLmlzR2VvZ3JhcGhpYz90aGlzLnZpZXcucmVuZGVyU3BhdGlhbFJlZmVyZW5jZTppO2ModCxyLDAsdCxzLDAsdC5sZW5ndGgvMyksZS5zZXJ2aWNlT2JiPXoobmV3IFoodCwzKSksaS5pc0dlb2dyYXBoaWMmJnAoZS5zZXJ2aWNlT2JiLmNlbnRlcixzLGUuc2VydmljZU9iYi5jZW50ZXIsaSl9aXNOb2RlTG9hZGVkKGUpe3JldHVybiB0aGlzLmxvYWRlZEdyYXBoaWNzLmhhc05vZGUoZSl9aXNOb2RlUmVsb2FkaW5nKCl7cmV0dXJuITF9dXBkYXRlTm9kZVN0YXRlKCl7fWFzeW5jIF9leHRyYWN0QmluYXJ5UG9pbnRQb3NpdGlvbnMoZSx0LHIpe2NvbnN0IGk9YXdhaXQgdGhpcy5fZGVjb21wcmVzc0JpbmFyeVBvaW50RGF0YSh0LHIpLHM9aS5wb3NpdGlvbkRhdGEsbz0zLGE9cy5sZW5ndGgvbyxuPXkoMyphKSxsPW51bGwhPWUuc2VydmljZU9iYj9lLnNlcnZpY2VPYmIuY2VudGVyOlswLDAsMF0sZD1NYXRoLmFicyhsWzJdKSoyKiotMjA7Zm9yKGxldCB1PTA7dTxhO3UrKyl7Y29uc3QgZT11Km87bltlXT1zW2VdK2xbMF0sbltlKzFdPXNbZSsxXStsWzFdLG5bZSsyXT1zW2UrMl0rbFsyXSxNYXRoLmFicyhuW2UrMl0pPGQmJihuW2UrMl09MCl9cmV0dXJue2ZlYXR1cmVJZHM6aS5mZWF0dXJlSWRzP2YoaS5mZWF0dXJlSWRzKTpbXSxwb2ludFBvc2l0aW9uczpufX1fZXh0cmFjdExlZ2FjeVBvaW50UG9zaXRpb25zKGUpe2NvbnN0IHQ9ZS5wb2ludERhdGEubGVuZ3RoLHI9eSgzKnQpLGk9bmV3IEFycmF5O2ZvcihsZXQgcz0wO3M8dDtzKyspe2NvbnN0IHQ9ZS5wb2ludERhdGFbc10sbz10LmZlYXR1cmVEYXRhUG9zaXRpb24sYT1vLmxlbmd0aCxuPXQuZ2VvbWV0cmllcz8uWzBdPz9sZVthXSxsPXQuZmVhdHVyZUlkc1swXTtpZihcIkVtYmVkZGVkXCIhPT1uLnR5cGV8fFwicG9pbnRzXCIhPT1uLnBhcmFtcy50eXBlfHxhPDJ8fGE+Myljb250aW51ZTtjb25zdCBkPW4ucGFyYW1zLnZlcnRleEF0dHJpYnV0ZXM/LnBvc2l0aW9uPz9bMCwwLDBdLHU9MyppLmxlbmd0aDtyW3VdPW9bMF0rZFswXSxyW3UrMV09b1sxXStkWzFdLHJbdSsyXT0zPT09YT9vWzJdK2RbMl06TmFOLGkucHVzaChsKX1yZXR1cm57ZmVhdHVyZUlkczppLHBvaW50UG9zaXRpb25zOnJ9fV92YWxpZGF0ZVBvc2l0aW9ucyhlLHQscixzLG8pe2lmKG51bGw9PXMmJmUuc2VydmljZU9iYilyZXR1cm47Y29uc3QgYT10Lmxlbmd0aCxuPTM7Zm9yKGxldCBsPTA7bDxhO2wrKyl7Y29uc3QgdD1sKm47dShkZSxyW3RdLHJbdCsxXSxyW3QrMl0pO2NvbnN0IGE9IU51bWJlci5pc05hTihyWzJdKTtudWxsPT1zfHwoYT9nKHMsZGUpOm0ocyxkZSkpfHwodGhpcy5fY29vcmRpbmF0ZXNPdXRzaWRlRXh0ZW50RXJyb3JzPHRoaXMuX21heENvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9ycyYmaS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJTZXJ2aWNlIEVycm9yOiBDb29yZGluYXRlcyBvdXRzaWRlIG9mIGxheWVyIGV4dGVudFwiKSx0aGlzLl9jb29yZGluYXRlc091dHNpZGVFeHRlbnRFcnJvcnMrMT09PXRoaXMuX21heENvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9ycyYmaS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJNYXhpbXVtIG51bWJlciBvZiBlcnJvcnMgcmVhY2hlZC4gRnVydGhlciBlcnJvcnMgYXJlIGlnbm9yZWQuXCIpLHRoaXMuX2Nvb3JkaW5hdGVzT3V0c2lkZUV4dGVudEVycm9ycysrKSxlLnNlcnZpY2VPYmJ8fG8ucHVzaChkZVswXSxkZVsxXSxkZVsyXSl9fV9jcmVhdGVHcmFwaGljcyhlLHIsaSxzKXtjb25zdCBvPWUubGVuZ3RoLGE9MyxuPXRoaXMuX2dldE9iamVjdElkRmllbGQoKSxsPXRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZSxkPW5ldyBBcnJheSx1PXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlO2ZvcihsZXQgaD0wO2g8bztoKyspe2NvbnN0IG89ZVtoXSxjPXt9O251bGwhPW8mJihjW25dPW8pO2NvbnN0IHA9bz8/dC5nZW5lcmF0ZVVJRCgpLGc9aCphLG09aXNOYU4ocltnKzJdKT92b2lkIDA6cltnKzJdLHk9RShyW2ddLHJbZysxXSxtLHUpLGY9dGhpcy5sb2FkZWRHcmFwaGljcy5nZXQocCk7aWYobnVsbCE9ZikobnVsbD09Zi5sZXZlbHx8Zi5sZXZlbDxzKSYmKHVlLnByb3BlcnR5PVwiZ2VvbWV0cnlcIix1ZS5ncmFwaGljPWYsdWUub2xkVmFsdWU9Zi5nZW9tZXRyeSx1ZS5uZXdWYWx1ZT15LGYuZ2VvbWV0cnk9eSxmLmxldmVsPXMsbC5ncmFwaGljVXBkYXRlSGFuZGxlcih1ZSkpLGQucHVzaChmKTtlbHNle2NvbnN0IGU9dC5nZW5lcmF0ZVVJRCgpO2QucHVzaCh7b2JqZWN0SWQ6cCx1aWQ6ZSxnZW9tZXRyeTp5LGF0dHJpYnV0ZXM6Yyx2aXNpYmxlOiEwLG5vZGVJbmRleDppLGxldmVsOnN9KX19cmV0dXJuIGR9X3VwZGF0ZU5vZGVNZW1vcnkoZSl7ZS5tZW1vcnk9NDA5NisobnVsbCE9ZS5udW1GZWF0dXJlcz9lLm51bUZlYXR1cmVzKnRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS51c2VkTWVtb3J5UGVyR3JhcGhpYzowKX1fY2FjaGVOb2RlRGF0YShlKXtjb25zdCB0PWUuZ3JhcGhpY3MucmVkdWNlKCgoZSx0KT0+dih0KStlKSxuKGUuZmVhdHVyZUlkcykrMTAyNCk7dGhpcy5fbWVtQ2FjaGUucHV0KHRoaXMuX2dldE1lbUNhY2hlS2V5KGUubm9kZSksZSx0KX1fZ2V0TWVtQ2FjaGVLZXkoZSl7cmV0dXJuYCR7ZS5pbmRleH1gfV9yZW1vdmVBbGxOb2RlRGF0YSgpe3RoaXMubG9hZGVkR3JhcGhpY3MuZm9yRWFjaE5vZGUoKChlLHQpPT57aWYoZSl7Y29uc3QgdD1lLm5vZGU7dGhpcy5fdXBkYXRlTm9kZU1lbW9yeSh0KSx0aGlzLl9jYWNoZU5vZGVEYXRhKGUpfXRoaXMuX2NvbnRyb2xsZXIudXBkYXRlTG9hZFN0YXR1cyh0LCExKX0pKSx0aGlzLl90cmVlRGVidWdnZXImJnRoaXMuX3RyZWVEZWJ1Z2dlci51cGRhdGUoKSx0aGlzLmxvYWRlZEdyYXBoaWNzLmNsZWFyKCl9cmVtb3ZlTm9kZShlKXtjb25zdCB0PXRoaXMuX3JlbW92ZU5vZGVTdGFnZURhdGEoZSk7dCYmKHRoaXMuX3VwZGF0ZU5vZGVNZW1vcnkodC5ub2RlKSx0aGlzLl9jYWNoZU5vZGVEYXRhKHQpKX1fcmVtb3ZlTm9kZVN0YWdlRGF0YShlKXtjb25zdCB0PXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0Tm9kZShlKTtyZXR1cm4gbnVsbD09dD9udWxsOih0aGlzLl9jb250cm9sbGVyLnVwZGF0ZUxvYWRTdGF0dXMoZSwhMSksdGhpcy5sb2FkZWRHcmFwaGljcy5yZW1vdmVOb2RlKGUpLHRoaXMuX3RyZWVEZWJ1Z2dlciYmdGhpcy5fdHJlZURlYnVnZ2VyLnVwZGF0ZSgpLHQpfWFzeW5jIGxvYWRDYWNoZWROb2RlRGF0YShlKXtyZXR1cm4gdGhpcy5fbWVtQ2FjaGU/LnBvcCh0aGlzLl9nZXRNZW1DYWNoZUtleShlKSl9YXN5bmMgYWRkQ2FjaGVkTm9kZURhdGEoZSx0LHIscyl7dGhpcy5sb2FkZWRHcmFwaGljcy5oYXNOb2RlKGUuaW5kZXgpP2kuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiSTNTIG5vZGUgXCIrZS5pZCtcIiBhbHJlYWR5IGFkZGVkXCIpOihhd2FpdCB0aGlzLl9pM3NPdmVycmlkZXMuYXBwbHlBdHRyaWJ1dGVPdmVycmlkZXModC5mZWF0dXJlSWRzLHIscyksdGhpcy5sb2FkZWRHcmFwaGljcy5hZGROb2RlKGUuaW5kZXgsdCksdGhpcy5fY29udHJvbGxlci51cGRhdGVMb2FkU3RhdHVzKGUuaW5kZXgsITApLHRoaXMuX3VwZGF0ZU5vZGVNZW1vcnkoZSksdC5hdHRyaWJ1dGVJbmZvPXIsdGhpcy5fYXR0cmlidXRlVmFsdWVzQ2hhbmdlZCh0KSx0aGlzLl9maWx0ZXJOb2RlKHQpLHRoaXMuX3RyZWVEZWJ1Z2dlciYmdGhpcy5fdHJlZURlYnVnZ2VyLnVwZGF0ZSgpKX1nZXRMb2FkZWROb2RlSWRzKCl7Y29uc3QgZT1bXTtyZXR1cm4gdGhpcy5sb2FkZWRHcmFwaGljcy5mb3JFYWNoTm9kZSgodD0+ZS5wdXNoKHQubm9kZS5pZCkpKSxlLnNvcnQoKX1nZXRWaXNpYmxlTm9kZXMoKXtjb25zdCBlPW5ldyBBcnJheTtyZXR1cm4gdGhpcy5sb2FkZWRHcmFwaGljcy5mb3JFYWNoTm9kZSgodD0+ZS5wdXNoKHQubm9kZSkpKSxlfWdldExvYWRlZE5vZGVJbmRpY2VzKGUpe3RoaXMubG9hZGVkR3JhcGhpY3MuZm9yRWFjaE5vZGUoKCh0LHIpPT5lLnB1c2gocikpKX1nZXRMb2FkZWRBdHRyaWJ1dGVzKGUpe2NvbnN0IHQ9dGhpcy5sb2FkZWRHcmFwaGljcy5nZXROb2RlKGUpO2lmKG51bGwhPXQ/LmF0dHJpYnV0ZUluZm8pcmV0dXJuIHQuYXR0cmlidXRlSW5mby5sb2FkZWRBdHRyaWJ1dGVzfWdldEF0dHJpYnV0ZURhdGEoZSl7Y29uc3QgdD10aGlzLmxvYWRlZEdyYXBoaWNzLmdldE5vZGUoZSk7aWYobnVsbCE9dD8uYXR0cmlidXRlSW5mbylyZXR1cm4gdC5hdHRyaWJ1dGVJbmZvLmF0dHJpYnV0ZURhdGF9X3NldEF0dHJpYnV0ZURhdGEoZSx0KXtjb25zdCByPXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0Tm9kZShlKTtudWxsIT1yPy5hdHRyaWJ1dGVJbmZvJiYoci5hdHRyaWJ1dGVJbmZvLmF0dHJpYnV0ZURhdGE9dCx0aGlzLl9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKHIpKX1hc3luYyB1cGRhdGVBdHRyaWJ1dGVzKGUsdCxyKXtjb25zdCBpPXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0Tm9kZShlKTtudWxsIT1pJiYoYXdhaXQgdGhpcy5faTNzT3ZlcnJpZGVzLmFwcGx5QXR0cmlidXRlT3ZlcnJpZGVzKGkuZmVhdHVyZUlkcyx0LHIpLGkuYXR0cmlidXRlSW5mbz10LHRoaXMuX2F0dHJpYnV0ZVZhbHVlc0NoYW5nZWQoaSkpfV9hdHRyaWJ1dGVWYWx1ZXNDaGFuZ2VkKGUpe2lmKGFlKGUpLHRoaXMuX2ZpbHRlck5vZGUoZSksdGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLmxhYmVsc0VuYWJsZWQpe2NvbnN0IHQ9ZS5ncmFwaGljcy5tYXAoKGU9PmUudWlkKSk7dGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLnVwZGF0ZUxhYmVsaW5nSW5mbyh0KX19X3VwZGF0ZUNsaXBwaW5nRXh0ZW50KGUpe3JldHVybiB0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnVwZGF0ZUNsaXBwaW5nQXJlYShlKSwhMX1fZ2V0T2JqZWN0SWRGaWVsZCgpe3JldHVybiB0aGlzLmxheWVyLm9iamVjdElkRmllbGR8fGJ9X2dldEdsb2JhbElkRmllbGQoKXtyZXR1cm4gdGhpcy5sYXllci5hc3NvY2lhdGVkTGF5ZXI/Lmdsb2JhbElkRmllbGR9YXN5bmMgX3JlbmRlcmVyQ2hhbmdlKGUsdCl7Y29uc3R7bGF5ZXI6e2ZpZWxkc0luZGV4OnJ9fT10aGlzLGk9bmV3IFNldDtsZXQgcyxvO2U/KGF3YWl0IGUuY29sbGVjdFJlcXVpcmVkRmllbGRzKGkscikscz1BcnJheS5mcm9tKGkpLnNvcnQoKSk6cz1bXSxpLmNsZWFyKCksdD8oYXdhaXQgdC5jb2xsZWN0UmVxdWlyZWRGaWVsZHMoaSxyKSxvPUFycmF5LmZyb20oaSkuc29ydCgpKTpvPVtdLHMubGVuZ3RoPT09by5sZW5ndGgmJnMuZXZlcnkoKChlLHQpPT5zW3RdPT09b1t0XSkpfHx0aGlzLl9yZWxvYWRBbGxOb2RlcygpfV9yYW5nZUluZm9zQ2hhbmdlZChlKXtudWxsIT1lJiZlLmxlbmd0aD4wJiZpLmdldExvZ2dlcih0aGlzKS53YXJuKFwiVW5zdXBwb3J0ZWQgcHJvcGVydHk6IHJhbmdlSW5mb3MgYXJlIGN1cnJlbnRseSBvbmx5IHNlcmlhbGl6ZWQgdG8gYW5kIGZyb20gd2ViIHNjZW5lcyBidXQgZG8gbm90IGFmZmVjdCByZW5kZXJpbmcuXCIpfV9maWx0ZXJDaGFuZ2UoKXt0aGlzLmxvYWRlZEdyYXBoaWNzLmZvckVhY2hOb2RlKChlPT50aGlzLl9maWx0ZXJOb2RlKGUpKSl9X3JlbG9hZEFsbE5vZGVzKCl7dGhpcy5fcmVtb3ZlQWxsTm9kZURhdGEoKSx0aGlzLl9jb250cm9sbGVyJiZ0aGlzLl9jb250cm9sbGVyLnJlc3RhcnROb2RlTG9hZGluZygpfV9maWx0ZXJOb2RlKGUpe2NvbnN0IHQ9dGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbixpPXRoaXMuX2V4Y2x1ZGVPYmplY3RJZHNTb3J0ZWQscz10aGlzLl9nZXRPYmplY3RJZEZpZWxkKCk7Zm9yKGNvbnN0IG8gb2YgZS5ncmFwaGljcyl7Y29uc3QgZT1vLnZpc2libGUsYT0hdHx8dGhpcy5fZXZhbHVhdGVDbGF1c2UodCxvKSxuPW51bGw9PWl8fHIoaSxvLmF0dHJpYnV0ZXNbc10pPDA7by52aXNpYmxlPWEmJm4sZSE9PW8udmlzaWJsZSYmKHVlLmdyYXBoaWM9byx1ZS5wcm9wZXJ0eT1cInZpc2libGVcIix1ZS5vbGRWYWx1ZT1lLHVlLm5ld1ZhbHVlPW8udmlzaWJsZSx0aGlzLnByb2Nlc3Nvci5ncmFwaGljc0NvcmUuZ3JhcGhpY1VwZGF0ZUhhbmRsZXIodWUpKX19Y3JlYXRlUXVlcnkoKXtjb25zdCBlPXtvdXRGaWVsZHM6W1wiKlwiXSxyZXR1cm5HZW9tZXRyeTohMCxvdXRTcGF0aWFsUmVmZXJlbmNlOnRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlfTtyZXR1cm4gbnVsbCE9dGhpcy5maWx0ZXI/dGhpcy5maWx0ZXIuY3JlYXRlUXVlcnkoZSk6bmV3IE4oZSl9cXVlcnlGZWF0dXJlcyhlLHQpe3JldHVybiB0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnkodGhpcy5fZW5zdXJlUXVlcnkoZSksdD8uc2lnbmFsKX1xdWVyeU9iamVjdElkcyhlLHQpe3JldHVybiB0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JJZHModGhpcy5fZW5zdXJlUXVlcnkoZSksdD8uc2lnbmFsKX1xdWVyeUZlYXR1cmVDb3VudChlLHQpe3JldHVybiB0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JDb3VudCh0aGlzLl9lbnN1cmVRdWVyeShlKSx0Py5zaWduYWwpfXF1ZXJ5RXh0ZW50KGUsdCl7cmV0dXJuIHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvckV4dGVudCh0aGlzLl9lbnN1cmVRdWVyeShlKSx0Py5zaWduYWwpfV9lbnN1cmVRdWVyeShlKXtyZXR1cm4gdGhpcy5fYWRkRGVmaW5pdGlvbkV4cHJlc3Npb25Ub1F1ZXJ5KG51bGw9PWU/dGhpcy5jcmVhdGVRdWVyeSgpOk4uZnJvbShlKSl9X3NldHVwUXVlcnlFbmdpbmUoKXtjb25zdCBlPSgpPT50aGlzLnByb2Nlc3Nvci5mZWF0dXJlU3RvcmU7dGhpcy5fcXVlcnlFbmdpbmU9bmV3IEQoe2NvbnRleHQ6e3NwYXRpYWxSZWZlcmVuY2U6dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UsbGF5ZXI6dGhpcy5sYXllcixzY2hlZHVsZXI6dGhpcy52aWV3LnJlc291cmNlQ29udHJvbGxlci5zY2hlZHVsZXIsZ2V0IGZlYXR1cmVTdG9yZSgpe3JldHVybiBlKCl9LGhhc1o6dGhpcy5oYXNaLGhhc006dGhpcy5oYXNNfSxwcmlvcml0eTpKLkZFQVRVUkVfUVVFUllfRU5HSU5FfSl9Z2V0IHVzZWRNZW1vcnkoKXtyZXR1cm4gdGhpcy5wcm9jZXNzb3I/LmdyYXBoaWNzQ29yZT8udXNlZE1lbW9yeT8/MH1nZXQgdW5sb2FkZWRNZW1vcnkoKXtyZXR1cm4uOCooKHRoaXMuX2NvbnRyb2xsZXI/LnVubG9hZGVkTWVtb3J5RXN0aW1hdGU/PzApKyh0aGlzLnByb2Nlc3Nvcj8uZ3JhcGhpY3NDb3JlPy51bnByb2Nlc3NlZE1lbW9yeUVzdGltYXRlPz8wKSl9Z2V0IGlnbm9yZXNNZW1vcnlGYWN0b3IoKXtyZXR1cm4gdGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci5maXhlZEZlYXR1cmVUYXJnZXR9YXN5bmMgX2hhbmRsZUVkaXRzKGUpe2NvbnN0IHQ9dGhpcy5fYXR0cmlidXRlRWRpdGluZ0NvbnRleHQscj1hd2FpdCBHKHQsZSk7QSh0LHIpfWdldCBfYXR0cmlidXRlRWRpdGluZ0NvbnRleHQoKXtjb25zdCBlPXRoaXMuX2dldE9iamVjdElkRmllbGQoKSx0PXRoaXMuX2dldEdsb2JhbElkRmllbGQoKTtyZXR1cm57c2Vzc2lvbnM6dGhpcy5faW50ZXJhY3RpdmVFZGl0aW5nU2Vzc2lvbnMsZmllbGRzSW5kZXg6dGhpcy5sYXllci5maWVsZHNJbmRleCxvYmplY3RJZEZpZWxkOmUsZ2xvYmFsSWRGaWVsZDp0LGZvckVhY2hOb2RlOmU9PnRoaXMubG9hZGVkR3JhcGhpY3MuZm9yRWFjaE5vZGUoKHQ9PmUodC5ub2RlLHQuZmVhdHVyZUlkcykpKSxhdHRyaWJ1dGVTdG9yYWdlSW5mbzp0aGlzLmkzc2xheWVyLmF0dHJpYnV0ZVN0b3JhZ2VJbmZvPz9bXSxpM3NPdmVycmlkZXM6dGhpcy5faTNzT3ZlcnJpZGVzLGdldEF0dHJpYnV0ZURhdGE6ZT0+dGhpcy5nZXRBdHRyaWJ1dGVEYXRhKGUpLHNldEF0dHJpYnV0ZURhdGE6KHQscixpKT0+e3RoaXMuX3NldEF0dHJpYnV0ZURhdGEodCxyKTtjb25zdCBzPXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0Tm9kZSh0KTtpZihudWxsIT1pKXtjb25zdCB0PXRoaXMubG9hZGVkR3JhcGhpY3MuZ2V0KGkuYXR0cmlidXRlc1tlXSk7bnVsbCE9dCYmdGhpcy5wcm9jZXNzb3IuZ3JhcGhpY3NDb3JlLnJlY3JlYXRlR3JhcGhpY3MoW3RdKX1lbHNlIG51bGwhPXMmJnRoaXMucHJvY2Vzc29yLmdyYXBoaWNzQ29yZS5yZWNyZWF0ZUdyYXBoaWNzKHMuZ3JhcGhpY3MpfSxjbGVhck1lbUNhY2hlOigpPT57fX19Z2V0IHBlcmZvcm1hbmNlSW5mbygpe2NvbnN0IGU9e2Rpc3BsYXllZE51bWJlck9mRmVhdHVyZXM6dGhpcy5sb2FkZWRHcmFwaGljcy5sZW5ndGgsbWF4aW11bU51bWJlck9mRmVhdHVyZXM6dGhpcy5tYXhpbXVtTnVtYmVyT2ZGZWF0dXJlcyx0b3RhbE51bWJlck9mRmVhdHVyZXM6LTEsbm9kZXM6dGhpcy5sb2FkZWRHcmFwaGljcy5ub2RlQ291bnQsY29yZTp0aGlzLnByb2Nlc3Nvci5ncmFwaGljc0NvcmUucGVyZm9ybWFuY2VJbmZvfTtyZXR1cm4gdGhpcy5fY29udHJvbGxlciYmdGhpcy5fY29udHJvbGxlci51cGRhdGVTdGF0cyhlKSxlfWdldCB0ZXN0KCl7cmV0dXJue2NvbnRyb2xsZXI6dGhpcy5fY29udHJvbGxlcixudW1Ob2Rlczp0aGlzLmxvYWRlZEdyYXBoaWNzLm5vZGVDb3VudCxsb2FkZWRHcmFwaGljczp0aGlzLmxvYWRlZEdyYXBoaWNzfX19O2UoW2woKV0sdGUucHJvdG90eXBlLFwicHJvY2Vzc29yXCIsdm9pZCAwKSxlKFtsKHt0eXBlOnd9KV0sdGUucHJvdG90eXBlLFwiZmlsdGVyXCIsdm9pZCAwKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcImxvYWRlZEdyYXBoaWNzXCIsdm9pZCAwKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcImkzc2xheWVyXCIsbnVsbCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJfY29udHJvbGxlclwiLHZvaWQgMCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCksZShbbCgpXSx0ZS5wcm90b3R5cGUsXCJzdXNwZW5kZWRcIix2b2lkIDApLGUoW2woKV0sdGUucHJvdG90eXBlLFwiaG9sZUZpbGxpbmdcIix2b2lkIDApLGUoW2woVyldLHRlLnByb3RvdHlwZSxcInVwZGF0aW5nUHJvZ3Jlc3NcIix2b2lkIDApLGUoW2woKV0sdGUucHJvdG90eXBlLFwidXBkYXRpbmdQcm9ncmVzc1ZhbHVlXCIsbnVsbCksZShbbChYLnJlcXVpcmVkRmllbGRzKV0sdGUucHJvdG90eXBlLFwicmVxdWlyZWRGaWVsZHNcIixudWxsKSxlKFtsKFguYXZhaWxhYmxlRmllbGRzKV0sdGUucHJvdG90eXBlLFwiYXZhaWxhYmxlRmllbGRzXCIsdm9pZCAwKSxlKFtsKCldLHRlLnByb3RvdHlwZSxcIl9maWVsZHNIZWxwZXJcIix2b2lkIDApLGUoW2woe3R5cGU6TnVtYmVyfSldLHRlLnByb3RvdHlwZSxcIm1heGltdW1OdW1iZXJPZkZlYXR1cmVzXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sdGUucHJvdG90eXBlLFwibWF4aW11bU51bWJlck9mRmVhdHVyZXNFeGNlZWRlZFwiLG51bGwpLGUoW2woKV0sdGUucHJvdG90eXBlLFwiX2V4Y2x1ZGVPYmplY3RJZHNTb3J0ZWRcIixudWxsKSxlKFtsKHtyZWFkT25seTohMH0pXSx0ZS5wcm90b3R5cGUsXCJsb2RGYWN0b3JcIixudWxsKSxlKFtsKHtyZWFkT25seTohMH0pXSx0ZS5wcm90b3R5cGUsXCJoYXNNXCIsbnVsbCksZShbbCh7cmVhZE9ubHk6ITB9KV0sdGUucHJvdG90eXBlLFwiaGFzWlwiLG51bGwpLGUoW2woKV0sdGUucHJvdG90eXBlLFwiY29udGVudFZpc2libGVcIixudWxsKSxlKFtsKHtyZWFkT25seTohMH0pXSx0ZS5wcm90b3R5cGUsXCJsZWdlbmRFbmFibGVkXCIsbnVsbCksdGU9ZShbZChcImVzcmkudmlld3MuM2QubGF5ZXJzLlNjZW5lTGF5ZXJHcmFwaGljc1ZpZXczRFwiKV0sdGUpO2NvbnN0IHJlPXRlO2Z1bmN0aW9uIGllKGUpe3JldHVyblwicG9pbnREYXRhXCJpbiBlfWZ1bmN0aW9uIHNlKGUpe3JldHVyblwiZ2VvbWV0cnlCdWZmZXJcImluIGUmJm51bGwhPT1lLmdlb21ldHJ5QnVmZmVyfWZ1bmN0aW9uIG9lKGUsdCxyKXtjb25zdCBpPXQuYXR0cmlidXRlSW5mbztpZihudWxsPT1pPy5sb2FkZWRBdHRyaWJ1dGVzfHxudWxsPT1pLmF0dHJpYnV0ZURhdGEpcmV0dXJuITE7bGV0IHM9ITE7Zm9yKGNvbnN0e25hbWU6b31vZiBpLmxvYWRlZEF0dHJpYnV0ZXMpaWYoaS5hdHRyaWJ1dGVEYXRhW29dKXtjb25zdCB0PVEoaS5hdHRyaWJ1dGVEYXRhW29dLHIpO3QhPT1lLmF0dHJpYnV0ZXNbb10mJihlLmF0dHJpYnV0ZXNbb109dCxzPSEwKX1yZXR1cm4gc31mdW5jdGlvbiBhZShlKXtjb25zdCB0PWUuYXR0cmlidXRlSW5mbyxyPWUubm9kZS5pbmRleDtpZihudWxsIT10Py5sb2FkZWRBdHRyaWJ1dGVzJiZudWxsIT10LmF0dHJpYnV0ZURhdGEpZm9yKGxldCBpPTA7aTxlLmdyYXBoaWNzLmxlbmd0aDtpKyspe2NvbnN0IHM9ZS5ncmFwaGljc1tpXTtpZihzLm5vZGVJbmRleD09PXIpe3MuYXR0cmlidXRlc3x8KHMuYXR0cmlidXRlcz17fSk7Zm9yKGNvbnN0e25hbWU6ZX1vZiB0LmxvYWRlZEF0dHJpYnV0ZXMpdC5hdHRyaWJ1dGVEYXRhW2VdJiYocy5hdHRyaWJ1dGVzW2VdPVEodC5hdHRyaWJ1dGVEYXRhW2VdLGkpKX19fWZ1bmN0aW9uIG5lKGUsdCl7cmV0dXJuIGUueG1pbi09dCxlLnltaW4tPXQsZS54bWF4Kz10LGUueW1heCs9dCxudWxsIT1lLnptaW4mJm51bGwhPWUuem1heCYmKGUuem1pbi09dCxlLnptYXgrPXQpLG51bGwhPWUubW1pbiYmbnVsbCE9ZS5tbWF4JiYoZS5tbWluLT10LGUubW1heCs9dCksZX1jb25zdCBsZT17Mjp7dHlwZTpcIkVtYmVkZGVkXCIscGFyYW1zOnt0eXBlOlwicG9pbnRzXCIsdmVydGV4QXR0cmlidXRlczp7cG9zaXRpb246WzAsMF19fX0sMzp7dHlwZTpcIkVtYmVkZGVkXCIscGFyYW1zOnt0eXBlOlwicG9pbnRzXCIsdmVydGV4QXR0cmlidXRlczp7cG9zaXRpb246WzAsMCwwXX19fX0sZGU9aCgpLHVlPXtncmFwaGljOm51bGwscHJvcGVydHk6bnVsbCxvbGRWYWx1ZTpudWxsLG5ld1ZhbHVlOm51bGx9O2V4cG9ydHtyZSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnR7c29tZU1hcCBhcyB0fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTWFwVXRpbHMuanNcIjtjbGFzcyBzIGV4dGVuZHMgZXtjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKCksdGhpcy5fdXBkYXRlQW5kQ29tcGFyZT1lLHRoaXMuX25vdGlmeVVwZGF0ZWQ9dCx0aGlzLl9ub2Rlcz1uZXcgTWFwLHRoaXMuX2dyYXBoaWNzPW5ldyBNYXAsdGhpcy5fZHVwbGljYXRlcz1uZXcgTWFwfWNsZWFyKCl7aWYodGhpcy5fZ3JhcGhpY3Muc2l6ZT4wKXtjb25zdCBlPXRoaXMudG9BcnJheSgpO3RoaXMuX2dyYXBoaWNzLmNsZWFyKCksdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6ZX0pfXRoaXMuX25vZGVzLmNsZWFyKCl9Z2V0IGxlbmd0aCgpe3JldHVybiB0aGlzLl9ncmFwaGljcy5zaXplfWdldChlKXtyZXR1cm4gdGhpcy5fZ3JhcGhpY3MuZ2V0KGUpfWdldE5vZGUoZSl7cmV0dXJuIHRoaXMuX25vZGVzLmdldChlKX1oYXNOb2RlKGUpe3JldHVybiB0aGlzLl9ub2Rlcy5oYXMoZSl9bm9kZXMoKXtyZXR1cm4gdGhpcy5fbm9kZXMudmFsdWVzKCl9YWRkTm9kZShlLHQpe3RoaXMuX25vZGVzLnNldChlLHQpO2NvbnN0IHM9dC5ncmFwaGljcztpZigwPT09cy5sZW5ndGgpcmV0dXJuO2NvbnN0IG49bmV3IFNldDtmb3IobGV0IGk9MDtpPHMubGVuZ3RoO2krKyl7Y29uc3QgdD1zW2ldLG89dC5vYmplY3RJZCxyPXRoaXMuX2dyYXBoaWNzLmdldChvKTtpZihyKXtuLmFkZChvKSx0IT09ciYmKHNbaV09cik7Y29uc3QgZD10aGlzLl9kdXBsaWNhdGVzLmdldChvKTtkP2QucHVzaChlKTp0aGlzLl9kdXBsaWNhdGVzLnNldChvLFtyLm5vZGVJbmRleCxlXSl9ZWxzZSB0Lm5vZGVJbmRleD1lLHRoaXMuX2dyYXBoaWNzLnNldChvLHQpfW4uc2l6ZSYmdGhpcy5fdXBkYXRlRm9yZWlnbkdyYXBoaWNzKHQpO2NvbnN0IG89bi5zaXplPjA/cy5maWx0ZXIoKGU9PiFuLmhhcyhlLm9iamVjdElkKSkpOnM7by5sZW5ndGg+MCYmdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOm8scmVtb3ZlZDpbXX0pfXJlbW92ZU5vZGUoZSl7Y29uc3QgdD10aGlzLl9ub2Rlcy5nZXQoZSk7aWYoIXQpcmV0dXJuIHZvaWQgY29uc29sZS5lcnJvcihcIlJlbW92aW5nIHVua25vd24gbm9kZVwiKTt0aGlzLl9ub2Rlcy5kZWxldGUoZSk7Y29uc3Qgcz1uZXcgU2V0LG49W107Zm9yKGNvbnN0IG8gb2YgdC5ncmFwaGljcyl7Y29uc3QgdD1vLm9iamVjdElkLGk9dGhpcy5fZ3JhcGhpY3MuZ2V0KHQpO2lmKCFpKWNvbnRpbnVlO2NvbnN0IHI9dGhpcy5fZHVwbGljYXRlcy5nZXQodCk7aWYocil7Y29uc3Qgbj1yLmluZGV4T2YoZSk7aWYoLTE9PT1uKXtjb25zb2xlLmVycm9yKFwiZXJyb3I6IHJlbW92aW5nIGdyYXBoaWMgZnJvbSBub2RlIHRoYXQgc2hvdWxkIG5vdCByZWZlcmVuY2UgaXQuXCIpO2NvbnRpbnVlfWlmKHIuc3BsaWNlKG4sMSksaS5ub2RlSW5kZXg9PT1lKXtsZXQgZT10aGlzLmdldE5vZGUoclswXSk7Zm9yKGxldCB0PTE7dDxyLmxlbmd0aDt0Kyspe2NvbnN0IHM9dGhpcy5nZXROb2RlKHJbdF0pOyhudWxsPT1lfHxudWxsIT1zJiZzLm5vZGUubGV2ZWw+ZS5ub2RlLmxldmVsKSYmKGU9cyl9bnVsbCE9ZSYmcy5hZGQoZSl9MT09PXIubGVuZ3RoJiZ0aGlzLl9kdXBsaWNhdGVzLmRlbGV0ZSh0KX1lbHNlIHRoaXMuX2dyYXBoaWNzLmRlbGV0ZSh0KSxuLnB1c2gobyl9bi5sZW5ndGg+MCYmdGhpcy5lbWl0KFwiY2hhbmdlXCIse2FkZGVkOltdLHJlbW92ZWQ6bn0pLHMuZm9yRWFjaCgoZT0+dGhpcy5fdXBkYXRlRm9yZWlnbkdyYXBoaWNzKGUpKSl9X3VwZGF0ZUZvcmVpZ25HcmFwaGljcyhlKXtjb25zdCB0PVtdLHM9ZS5ub2RlLmluZGV4LG49ZS5ub2RlLmxldmVsO2xldCBvPTA7Zm9yKDtvPGUuZ3JhcGhpY3MubGVuZ3RoOyl7Y29uc3QgaT1lLmdyYXBoaWNzW29dLm5vZGVJbmRleDtpZihpPT09cyl7bysrO2NvbnRpbnVlfWxldCByPTE7Zm9yKDtvK3I8ZS5ncmFwaGljcy5sZW5ndGgmJmUuZ3JhcGhpY3NbbytyXS5ub2RlSW5kZXg9PT1pOylyKys7Y29uc3QgZD10aGlzLmdldE5vZGUoaSk7aWYobnVsbCE9ZCYmZC5ub2RlLmxldmVsPm4pbys9cjtlbHNle2ZvcihsZXQgbj1vO248bytyO24rKyl7Y29uc3Qgbz1lLmdyYXBoaWNzW25dO28ubm9kZUluZGV4PXMsdGhpcy5fdXBkYXRlQW5kQ29tcGFyZShvLGUsbikmJnQucHVzaChvKX1vKz1yfX10aGlzLl9ub3RpZnlVcGRhdGVkKHQpfXRvQXJyYXkoKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLl9ncmFwaGljcy52YWx1ZXMoKSl9ZmluZChlKXtsZXQgcztyZXR1cm4gdCh0aGlzLl9ncmFwaGljcywodD0+ISFlKHQpJiYocz10LCEwKSkpLHN9Zm9yRWFjaChlKXt0aGlzLl9ncmFwaGljcy5mb3JFYWNoKCh0PT5lKHQpKSl9Zm9yRWFjaE5vZGUoZSl7dGhpcy5fbm9kZXMuZm9yRWFjaCgoKHQscyk9PmUodCxzKSkpfWdldCBub2RlQ291bnQoKXtyZXR1cm4gdGhpcy5fbm9kZXMuc2l6ZX1fY2hlY2tJbnZhcmlhbnRzKCl7Y29uc3QgZT1uZXcgTWFwO3RoaXMuX25vZGVzLmZvckVhY2goKCh0LHMpPT57cyE9PXQubm9kZS5pbmRleCYmY29uc29sZS5lcnJvcihcIk1pc21hdGNoZWQgbm9kZSBpbmRleFwiKSx0LmdyYXBoaWNzLmZvckVhY2goKHQ9PntlLnNldCh0Lm9iamVjdElkLDErKGUuZ2V0KHQub2JqZWN0SWQpPz8wKSk7Y29uc3Qgbj10aGlzLl9kdXBsaWNhdGVzLmdldCh0Lm9iamVjdElkKTtuJiYhbi5pbmNsdWRlcyhzKSYmY29uc29sZS5lcnJvcihcIk5vZGUgbm90IGxpc3RlZCBpbiBkdXBsaWNhdGUgbGlzdFwiKSxufHx0Lm5vZGVJbmRleD09PXN8fGNvbnNvbGUuZXJyb3IoXCJVbmlxdWUgZ3JhcGhpYyBkb2VzIG5vdCByZWZlcmVuY2Ugb3duaW5nIG5vZGUgaW5kZXhcIil9KSl9KSksdGhpcy5fZ3JhcGhpY3Muc2l6ZSE9PWUuc2l6ZSYmY29uc29sZS5lcnJvcihcIk1pc21hdGNoIGJldHdlZW4gYWN0dWFsIGFuZCBleHBlY3RlZCBudW1iZXIgb2YgZ3JhcGhpY3NcIik7bGV0IHQ9MDtlLmZvckVhY2goKChlLHMpPT57dCs9ZT4xPzE6MDtjb25zdCBuPXRoaXMuX2dyYXBoaWNzLmdldChzKTtpZighbilyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiTWlzc2luZyBncmFwaGljIGVudHJ5XCIpO2NvbnN0IG89dGhpcy5fbm9kZXMuZ2V0KG4ubm9kZUluZGV4KTtpZighbylyZXR1cm4gdm9pZCBjb25zb2xlLmVycm9yKFwiR3JhcGhpYyByZWZlcmVuY2VzIHVua293biBub2RlXCIpO2NvbnN0IGk9dGhpcy5fZHVwbGljYXRlcy5nZXQocyk7aT8oaS5sZW5ndGghPT1lJiZjb25zb2xlLmVycm9yKFwiV3JvbmcgbnVtYmVyIG9mIGVudHJpZXMgaW4gZHVwbGljYXRlIGxpc3RcIiksaS5mb3JFYWNoKChlPT57Y29uc3QgdD10aGlzLl9ub2Rlcy5nZXQoZSk7dD90Lm5vZGUubGV2ZWw+by5ub2RlLmxldmVsJiZjb25zb2xlLmVycm9yKFwiRHVwbGljYXRlZCBncmFwaGljIGRvZXMgbm90IHJlZmVyZW5jZSBoaWdoZXN0IGxldmVsIG5vZGVcIik6Y29uc29sZS5lcnJvcihcIlVua25vd24gbm9kZSBpbiBkdXBsaWNhdGUgbGlzdFwiKX0pKSk6ZT4xJiZjb25zb2xlLmVycm9yKFwiTWlzc2luZyBkdXBsaWNhdGVzIGVudHJ5XCIpfSkpLHRoaXMuX2R1cGxpY2F0ZXMuc2l6ZSE9PXQmJmNvbnNvbGUuZXJyb3IoXCJNaXNtYXRjaCBiZXR3ZWVuIGV4cGVjdGVkIGFuZCBhY3R1YWwgbnVtYmVyIG9mIGR1cGxpY2F0ZSBlbnRyaWVzXCIpfX1leHBvcnR7cyBhcyBJM1NHcmFwaGljc01hcH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtXaGVyZUNsYXVzZSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc3FsL1doZXJlQ2xhdXNlLmpzXCI7aW1wb3J0e2ZpbmRGaWVsZHNDYXNlSW5zZW5zaXRpdmUgYXMgbn1mcm9tXCIuLi9pM3MvSTNTVXRpbC5qc1wiO2NvbnN0IHQ9dD0+e2xldCBwPWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9MCx0aGlzLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycz0yMCx0aGlzLmxvZ0Vycm9yPXI9Pnt0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9yczx0aGlzLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycyYmZS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJFcnJvciB3aGlsZSBldmFsdWF0aW5nIGRlZmluaXRpb25FeHByZXNzaW9uOiBcIityKSx0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycysrLHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPT09dGhpcy5fbWF4RGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnMmJmUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiRnVydGhlciBlcnJvcnMgYXJlIGlnbm9yZWRcIil9fWdldCBwYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbigpe2lmKCF0aGlzLmkzc2xheWVyPy5kZWZpbml0aW9uRXhwcmVzc2lvbilyZXR1cm4gbnVsbDt0cnl7Y29uc3Qgcj1vLmNyZWF0ZSh0aGlzLmkzc2xheWVyLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgpO2lmKCFyLmlzU3RhbmRhcmRpemVkKXJldHVybiBlLmdldExvZ2dlcih0aGlzKS5lcnJvcihcImRlZmluaXRpb25FeHByZXNzaW9uIGlzIHVzaW5nIG5vbiBzdGFuZGFyZCBmdW5jdGlvblwiKSxudWxsO2NvbnN0IGk9W10scz1yLmZpZWxkTmFtZXM7cmV0dXJuIG4ocyx0aGlzLmkzc2xheWVyLmZpZWxkcyx7bWlzc2luZ0ZpZWxkczppfSksaS5sZW5ndGg+MD8oZS5nZXRMb2dnZXIodGhpcykuZXJyb3IoYGRlZmluaXRpb25FeHByZXNzaW9uIHJlZmVyZW5jZXMgdW5rbm93biBmaWVsZHM6ICR7aS5qb2luKFwiLCBcIil9YCksbnVsbCk6KHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPTAscil9Y2F0Y2gocil7cmV0dXJuIGUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGRlZmluaXRpb25FeHByZXNzaW9uOiBcIityKSxudWxsfX1nZXQgZGVmaW5pdGlvbkV4cHJlc3Npb25GaWVsZHMoKXtyZXR1cm4gdGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbj90aGlzLnBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uLmZpZWxkTmFtZXM6W119X2V2YWx1YXRlQ2xhdXNlKHIsZSl7dHJ5e3JldHVybiByLnRlc3RGZWF0dXJlKGUpfWNhdGNoKGkpe3JldHVybiB0aGlzLmxvZ0Vycm9yKGkpLCExfX1fYWRkRGVmaW5pdGlvbkV4cHJlc3Npb25Ub1F1ZXJ5KHIpe2lmKCF0aGlzLnBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uKXJldHVybiByO2NvbnN0IGU9dGhpcy5pM3NsYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbixpPXIuY2xvbmUoKTtyZXR1cm4gaS53aGVyZT9pLndoZXJlPWAoJHtlfSkgQU5EICgke2kud2hlcmV9KWA6aS53aGVyZT1lLGl9fTtyZXR1cm4gcihbaSgpXSxwLnByb3RvdHlwZSxcImkzc2xheWVyXCIsdm9pZCAwKSxyKFtpKHtyZWFkT25seTohMH0pXSxwLnByb3RvdHlwZSxcInBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uXCIsbnVsbCkscihbaSh7cmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJkZWZpbml0aW9uRXhwcmVzc2lvbkZpZWxkc1wiLG51bGwpLHA9cihbcyhcImVzcmkudmlld3MuM2QubGF5ZXJzLnN1cHBvcnQuRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlld1wiKV0scCkscH07ZXhwb3J0e3QgYXMgRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlld307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=