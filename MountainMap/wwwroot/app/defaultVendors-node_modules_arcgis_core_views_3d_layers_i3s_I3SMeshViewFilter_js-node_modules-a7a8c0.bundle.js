"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_3d_layers_i3s_I3SMeshViewFilter_js-node_modules-a7a8c0"],{

/***/ "./node_modules/@arcgis/core/core/maybeUpdating.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/maybeUpdating.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isUpdating: () => (/* binding */ u),
/* harmony export */   unwrapUpdating: () => (/* binding */ t),
/* harmony export */   updating: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n="updating";function t(n){return"updating"===n?null:n}function u(n){return"updating"===n}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SMeshViewFilter.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SMeshViewFilter: () => (/* binding */ L)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/maybeUpdating.js */ "./node_modules/@arcgis/core/core/maybeUpdating.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../core/sql/WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/* harmony import */ var _geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../geometry/ellipsoidUtils.js */ "./node_modules/@arcgis/core/geometry/ellipsoidUtils.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../geometry/projection/projectVectorToVector.js */ "./node_modules/@arcgis/core/geometry/projection/projectVectorToVector.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../../geometry/support/DoubleArray.js */ "./node_modules/@arcgis/core/geometry/support/DoubleArray.js");
/* harmony import */ var _geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../../geometry/support/Ellipsoid.js */ "./node_modules/@arcgis/core/geometry/support/Ellipsoid.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../../geometry/support/webMercatorUtils.js */ "./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const O="esri.views.3d.layers.i3s.I3SMeshViewFilter",B=_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(O);let L=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(e),this._projectionEngineLoaded=!1}initialize(){(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.whenOnce)((()=>this.viewFilter?.geometry||null!=this.layerFilter)).then((()=>this.loadAsyncModule(Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngine_js")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../geometry/geometryEngine.js */ "./node_modules/@arcgis/core/geometry/geometryEngine.js")).then((e=>{this.destroyed||(this._geometryEngine=e)})))))}get sortedObjectIds(){if(null==this.viewFilter?.objectIds)return null;const e=(0,_geometry_support_DoubleArray_js__WEBPACK_IMPORTED_MODULE_21__.doubleArrayFrom)(this.viewFilter.objectIds);return e.sort(),e}get parsedWhereClause(){const e=null!=this.viewFilter?this.viewFilter.where:null;if(null==e||!e)return null;try{return _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_14__.WhereClause.create(e,this.layerFieldsIndex)}catch(t){B.error(`Failed to parse filter where clause: ${t}`)}return null}addFilters(e,t,r,i){const s=this.sortedObjectIds;null!=s&&e.push((e=>(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_27__.objectIdFilter)(s,!0,e))),this.addSqlFilter(e,this.parsedWhereClause);const n=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._layerMaskGeometries),a=this._geometryEngine;if(null!=n&&null!=this.layerFilter&&null!=a){const s=this.layerFilter.spatialRelationship;e.push(((e,o)=>q(a,e,o,i,t,r,n,s)))}const l=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._viewMaskGeometries);if(null!=l&&null!=this.viewFilter&&null!=a){const s=this.viewFilter.spatialRelationship;e.push(((e,n)=>q(a,e,n,i,t,r,l,s)))}}isMBSGeometryVisible(e,t,r){const i=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._layerMaskGeometries),s=this._geometryEngine;if(null!=i&&null!=this.layerFilter&&null!=s){const n=this.layerFilter.spatialRelationship,o=i[0].spatialReference||t;if(!(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_17__.projectBoundingSphere)(e,r,N,o))return B.warnOnce("SceneLayer.mask geometry is using unsupported SpatialReference, skipping geometry filter for MBS"),!0;return V(s,N,i,o,n)}const n=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._viewMaskGeometries);if(null!=n&&null!=this.viewFilter&&null!=s){const i=this.viewFilter.spatialRelationship,o=n[0].spatialReference||t;if(!(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_17__.projectBoundingSphere)(e,r,N,o))return B.warnOnce("SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter for MBS"),!0;return V(s,N,n,o,i)}return!0}get parsedGeometry(){const e=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._viewMaskGeometries),t=(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.unwrapUpdating)(this._layerMaskGeometries);return null==e||null==t?e||t:t.concat(e)}get _layerMaskGeometries(){const e=this.layerFilter;return null==e?null:null==this._geometryEngine?_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.updating:"disjoint"===e.spatialRelationship?e.geometries.map((e=>({type:"polygon",rings:e.rings,spatialReference:e.spatialReference,cache:{}}))):[e.geometries.reduce(((e,t)=>(e.rings=[...e.rings,...t.rings],e)),{type:"polygon",rings:[],spatialReference:e.geometries[0].spatialReference,cache:{}})]}get _viewMaskGeometries(){if(null==this.viewFilter)return null;const{geometry:e}=this.viewFilter;if(null==e)return null;if(null==this.viewFilter||null==this._geometryEngine)return _core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.updating;const{distance:t,units:r}=this.viewFilter,i=this.viewFilter.spatialRelationship,s="mesh"===e.type?e.extent:e;if(null==t||0===t)return W(this._geometryEngine,s,i);const n=r||(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_8__.getUnitString)(s.spatialReference);if(s.spatialReference.isWGS84){const e=this._geometryEngine.geodesicBuffer(s,t,n);return W(this._geometryEngine,e,i)}const o=(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_25__.project)(s,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_28__["default"].WGS84);if(null!=o){const e=(0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_25__.project)(this._geometryEngine.geodesicBuffer(o,t,n),s.spatialReference);return W(this._geometryEngine,e,i)}if(!this._projectionEngineLoaded&&(this.loadAsyncModule((0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_16__.load)().then((()=>this._projectionEngineLoaded=!0))),!this._projectionEngineLoaded))return null;let l=null;try{l=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_16__.project)(s,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_28__["default"].WGS84)}catch(c){}if(l)try{l=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_16__.project)(this._geometryEngine.geodesicBuffer(l,t,n),s.spatialReference)}catch(c){l=null}return l||B.error(`Filter by geodesic buffer (distance) unsupported, failed to project input geometry (${s.spatialReference.wkid}) to WGS84.`),W(this._geometryEngine,l,i)}get updating(){return (0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.isUpdating)(this._layerMaskGeometries)||(0,_core_maybeUpdating_js__WEBPACK_IMPORTED_MODULE_6__.isUpdating)(this._viewMaskGeometries)}static checkSupport(e){return null!=e&&(e.timeExtent?(B.warn("Filters with a timeExtent are not supported for mesh scene layers"),!1):!!U(e.spatialRelationship)||(B.warn(`Filters with spatialRelationship other than ${P.join(", ")} are not supported for mesh scene layers`),!1))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"layerFilter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({type:_layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_26__["default"]})],L.prototype,"viewFilter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"layerFieldsIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"loadAsyncModule",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"addSqlFilter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],L.prototype,"sortedObjectIds",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],L.prototype,"parsedWhereClause",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],L.prototype,"parsedGeometry",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],L.prototype,"_layerMaskGeometries",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)({readOnly:!0})],L.prototype,"_viewMaskGeometries",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"_projectionEngineLoaded",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_9__.property)()],L.prototype,"_geometryEngine",void 0),L=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__.subclass)(O)],L);const P=(e=>e)(["contains","intersects","disjoint"]);function U(e){return null!=e&&P.includes(e)}var K;function W(e,t,s){if(null==t)return null;if("disjoint"===s&&"polygon"===t.type){const s=t.rings.length,n=t.spatialReference,o=new Array(s);for(let e=0;e<s;++e){const r=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_20__.fromValues)(1/0,1/0,-1/0,-1/0);(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_20__.expandWithNestedArray)(r,t.rings[e]),o[e]={type:"polygon",rings:[t.rings[e]],spatialReference:n,cache:{},aabr:r}}o.sort(((e,t)=>e.aabr[0]-t.aabr[0]));const a=new Set,l=new _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.PositionHint;for(let t=0;t<o.length;++t){const r=o[t],s=r.aabr[0];a.forEach((t=>{if(s>=t.aabr[2])return void a.delete(t);if(r.aabr[1]>t.aabr[3]||r.aabr[3]<t.aabr[1]||!e.intersects(r,t))return;r.rings=r.rings.concat(t.rings),(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_20__.expand)(r.aabr,t.aabr,r.aabr),r.cache={},a.delete(t);const n=(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__.indexOf)(o,t,o.length,l);o.splice(n,1)})),a.add(r)}for(const e of o)e.aabr=void 0;return o}return[t]}function V(e,t,r,i,s){if(t[3]>=.5*(t[2]+(0,_geometry_ellipsoidUtils_js__WEBPACK_IMPORTED_MODULE_15__.getReferenceEllipsoid)(i).radius))return!0;const n=z(e,t,i);return r.every((t=>H(e,t,n,s)!==K.DISCARD))}function q(e,t,r,i,s,n,o,a){const l=o[0].spatialReference||s.spatialReference;if(!(0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_17__.projectBoundingSphere)(r.node.mbs,n,N,l))return void B.warnOnce("SceneLayerView.filter.geometry is using unsupported SpatialReference, skipping geometry filter");const c=z(e,N,l),p=$(a,s,l,i,r.objectHandle);for(const u of o){if(0===t.length)return;switch(H(e,u,c,a)){case K.DISCARD:return void(t.length=0);case K.KEEP:continue}(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_27__.filterInPlace)(t,r.featureIds,(t=>Q(e,u,t,p)))}}!function(e){e[e.KEEP=0]="KEEP",e[e.DISCARD=1]="DISCARD",e[e.TEST=2]="TEST"}(K||(K={}));const N=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_24__.f)(0,0,0,0);function $(e,t,r,i,s){const n=t.renderSpatialReference,o=new Map,a={type:"polygon",rings:[[[0,0,0],[0,0,0],[0,0,0],[0,0,0]]],spatialReference:r};a.rings[0][3]=a.rings[0][0];const l={indices:null,data:null,stride:0,startIndex:0,endIndex:0};let c,p;switch(e){case"intersects":c=(e,t,r)=>e.intersects(t,r)?K.KEEP:K.TEST,p=Z;break;case"contains":c=(e,t,r)=>e.contains(t,r)?K.TEST:K.DISCARD,p=Z;break;default:c=(e,t,r)=>e.disjoint(t,r)?K.TEST:K.DISCARD,p=J}return{collection:i,object:s,type:e,maskSR:r,renderSR:n,aabbCache:o,triangle:a,positions:l,triangleTest:c,geometryTest:p}}function z(e,t,r){const i={type:"point",x:t[0],y:t[1],hasZ:!1,hasM:!1,spatialReference:r},s=!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_23__.isWGS84)(r)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_23__.isWebMercator)(r),o=Number.isNaN(t[3])?0:(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_5__.clamp)(t[3],0,2*_geometry_support_Ellipsoid_js__WEBPACK_IMPORTED_MODULE_22__.earth.radius),a=s?e.buffer(i,o,1):e.geodesicBuffer(i,o,1);return a.type="polygon",a}function H(e,t,r,i){switch(i){case"intersects":case"contains":return Z(e,t,r);case"disjoint":return J(e,t,r)}}function Z(e,t,r){return e.intersects(t,r)?e.contains(t,r)?K.KEEP:K.TEST:K.DISCARD}function J(e,t,r){return e.intersects(t,r)?e.contains(t,r)?K.DISCARD:K.TEST:K.KEEP}function Q(e,t,r,i){const{collection:s,object:n,renderSR:o,maskSR:a,geometryTest:l,aabbCache:c}=i;let p=c.get(r);if(!p){const e=s.getObjectTransform(n);s.getComponentAabb(n,r,X);const t=[[X[0],X[1],0],[X[0],X[4],0],[X[3],X[4],0],[X[3],X[1],0]];for(let r=0;r<4;++r)(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.t)(t[r],t[r],e.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.g)(t[r],t[r],e.position),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_18__.projectVectorToVector)(t[r],o,t[r],a);p={type:"polygon",rings:[t],spatialReference:a,cache:{}},p.rings[0][4]=p.rings[0][0],c.set(r,p)}switch(l(e,t,p)){case K.DISCARD:return!1;case K.KEEP:return!0}const{triangle:u,triangleTest:g,positions:y}=i,h=u.rings[0][0],j=u.rings[0][1],S=u.rings[0][2],R=s.getObjectTransform(n);s.getComponentPositions(n,r,y);const{indices:w,data:b,stride:v,startIndex:F,endIndex:_}=y;for(let k=F;k<_;k+=3){const r=v*w[k],i=v*w[k+1],s=v*w[k+2];switch((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.s)(h,b[r],b[r+1],b[r+2]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.s)(j,b[i],b[i+1],b[i+2]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.s)(S,b[s],b[s+1],b[s+2]),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.t)(h,h,R.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.t)(j,j,R.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.t)(S,S,R.rotationScale),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.g)(h,h,R.position),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.g)(j,j,R.position),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_13__.g)(S,S,R.position),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_18__.projectVectorToVector)(h,o,h,a),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_18__.projectVectorToVector)(j,o,j,a),(0,_geometry_projection_projectVectorToVector_js__WEBPACK_IMPORTED_MODULE_18__.projectVectorToVector)(S,o,S,a),g(e,t,u)){case K.DISCARD:return!1;case K.KEEP:return!0}}return"intersects"!==i.type}const X=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_19__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryEngine.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SQueryEngine: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../layers/LayerConstants.js */ "./node_modules/@arcgis/core/layers/LayerConstants.js");
/* harmony import */ var _layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../layers/graphics/data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../layers/support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const l=_layers_graphics_data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_11__.QueryEngine;let d=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{get spatialReference(){return this.layerView.view.spatialReference}get layer(){return this.layerView.i3slayer}get defaultQueryJSON(){return new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_14__["default"]({outSpatialReference:this.spatialReference}).toJSON()}get _dataQueryEngine(){return this._ensureDataQueryEngine()}constructor(e){super(e)}initialize(){this.addHandles(this.layerView.on("visible-geometry-changed",(()=>this.spatialIndex.events.emit("changed"))))}destroy(){this._dataQueryEngineInstance=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._dataQueryEngineInstance),this._set("layerView",null)}async executeQueryForCount(e,r){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),r)}async executeQueryForExtent(e,r){const{count:t,extent:s}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),r);return{count:t,extent:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_9__["default"].fromJSON(s)}}async executeQueryForIds(e,r){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),r)}async executeQuery(e,r){const s=this._ensureQueryJSON(e);if(s.returnGeometry)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("unsupported-query","returnGeometry is not yet supported for mesh scene layer queries");if(s.returnCentroid)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_2__["default"]("unsupported-query","returnCentroid is not yet supported for mesh scene layer queries");const n=await this._dataQueryEngine.executeQuery(s,r),o=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_13__["default"].fromJSON(n);return o.features.forEach((e=>{e.geometry=null})),o}_ensureQueryJSON(e){return null==e?this.defaultQueryJSON:e.toJSON()}_ensureDataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const e=this.layer.objectIdField||_layers_LayerConstants_js__WEBPACK_IMPORTED_MODULE_10__.fallbackObjectIDAttribute,r="esriGeometryPolygon",t=this.layer.fieldsIndex?.toJSON()||new _layers_support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__["default"]([]),s=this.layerView.view.resourceController.scheduler,n=this.spatialReference.toJSON(),o=this.priority,i=this.spatialIndex;return this._dataQueryEngineInstance=new l({hasZ:!0,hasM:!1,geometryType:r,fieldsIndex:t,timeInfo:null,spatialReference:n,objectIdField:e,featureStore:i,scheduler:s,priority:o}),this._dataQueryEngineInstance}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"layerView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"priority",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({constructOnly:!0})],d.prototype,"spatialIndex",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],d.prototype,"spatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],d.prototype,"layer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],d.prototype,"defaultQueryJSON",null),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.3d.layers.i3s.I3SQueryEngine")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureAdapter.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SQueryFeatureAdapter: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../layers/graphics/centroid.js */ "./node_modules/@arcgis/core/layers/graphics/centroid.js");
/* harmony import */ var _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../layers/graphics/OptimizedGeometry.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js");
/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class o{constructor(t){this._objectIdField=t.objectIdField,this._getFeatureExtent=t.getFeatureExtent}getObjectId(t){return t.id}getAttributes(t){const{meta:e,index:r}=t,o={};this._objectIdField&&(o[this._objectIdField]=t.id);const n=e.attributeInfo?.attributeData;if(null!=n)for(const s of Object.keys(n))o[s]=(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_3__.getCachedAttributeValue)(n[s],r);return o}getAttribute(t,e){if(e===this._objectIdField)return t.id;const{meta:r,index:o}=t,n=r.attributeInfo?.attributeData;return null!=n?(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_3__.getCachedAttributeValue)(n[e],o):null}getGeometry(t){if(t.geometry)return t.geometry;const[e,i,o,s,a]=this._getFeatureExtent(t,n);return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"]([5],[e,i,o,s,i,o,s,a,o,e,a,o,e,i,o])}getCentroid(t,i){if(t.geometry)return (0,_layers_graphics_centroid_js__WEBPACK_IMPORTED_MODULE_1__.getCentroidOptimizedGeometry)(new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"],t.geometry,i.hasZ,i.hasM);const[o,s,a,u,d,c]=this._getFeatureExtent(t,n);return new _layers_graphics_OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"]([0],[(o+u)/2,(s+d)/2,(a+c)/2])}cloneWithGeometry(t,e){const{id:r,index:i,meta:o}=t;return{id:r,index:i,meta:o,geometry:e}}}const n=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/I3SQueryFeatureStore.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   I3SQueryFeatureStore: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/projection/projectBoundingSphere.js */ "./node_modules/@arcgis/core/geometry/projection/projectBoundingSphere.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../chunks/sphere.js */ "./node_modules/@arcgis/core/chunks/sphere.js");
/* harmony import */ var _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../II3SMeshView3D.js */ "./node_modules/@arcgis/core/views/3d/layers/II3SMeshView3D.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.create)();let l=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"]}forEach(e){this.forAllFeatures((r=>(e(r),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__.ForAllFeaturesReturnType.CONTINUE)))}forEachBounds(e,r){const t=this.getFeatureExtent;for(const o of e)r(t(o,f))}forEachInBounds(e,r){this.forAllFeatures((t=>{const o=this.getFeatureExtent(t,y);return (0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.intersects)(e,(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.toRect)(o,d))&&r(t),_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__.ForAllFeaturesReturnType.CONTINUE}),(r=>{if((0,_geometry_projection_projectBoundingSphere_js__WEBPACK_IMPORTED_MODULE_8__.projectBoundingSphere)(r.node.mbs,this.sourceSpatialReference,h,this.viewSpatialReference),h[0]>=e[0]&&h[2]<=e[2]&&h[1]>=e[1]&&h[3]<=e[3])return _II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__.ForAllFeaturesReturnType.CONTINUE;const t=Math.max(e[0],Math.min(h[0],e[2])),o=Math.max(e[1],Math.min(h[1],e[3])),s=h[0]-t,n=h[1]-o;return s*s+n*n<=h[3]*h[3]?_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__.ForAllFeaturesReturnType.CONTINUE:_II3SMeshView3D_js__WEBPACK_IMPORTED_MODULE_12__.ForAllFeaturesReturnType.SKIP}))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],l.prototype,"featureAdapter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],l.prototype,"forAllFeatures",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],l.prototype,"getFeatureExtent",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],l.prototype,"sourceSpatialReference",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({constructOnly:!0})],l.prototype,"viewSpatialReference",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.3d.layers.i3s.I3SQueryFeatureStore")],l);const h=(0,_chunks_sphere_js__WEBPACK_IMPORTED_MODULE_11__.f)(0,0,0,0),y=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_9__.create)(),d=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_10__.create)();


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/DefinitionExpressionSceneLayerView.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DefinitionExpressionSceneLayerView: () => (/* binding */ t)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/sql/WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../i3s/I3SUtil.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const t=t=>{let p=class extends t{constructor(){super(...arguments),this._definitionExpressionErrors=0,this._maxDefinitionExpressionErrors=20,this.logError=r=>{this._definitionExpressionErrors<this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Error while evaluating definitionExpression: "+r),this._definitionExpressionErrors++,this._definitionExpressionErrors===this._maxDefinitionExpressionErrors&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Further errors are ignored")}}get parsedDefinitionExpression(){if(!this.i3slayer?.definitionExpression)return null;try{const r=_core_sql_WhereClause_js__WEBPACK_IMPORTED_MODULE_7__.WhereClause.create(this.i3slayer.definitionExpression,this.i3slayer.fieldsIndex);if(!r.isStandardized)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("definitionExpression is using non standard function"),null;const i=[],s=r.fieldNames;return (0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_8__.findFieldsCaseInsensitive)(s,this.i3slayer.fields,{missingFields:i}),i.length>0?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(`definitionExpression references unknown fields: ${i.join(", ")}`),null):(this._definitionExpressionErrors=0,r)}catch(r){return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error("Failed to parse definitionExpression: "+r),null}}get definitionExpressionFields(){return this.parsedDefinitionExpression?this.parsedDefinitionExpression.fieldNames:[]}_evaluateClause(r,e){try{return r.testFeature(e)}catch(i){return this.logError(i),!1}}_addDefinitionExpressionToQuery(r){if(!this.parsedDefinitionExpression)return r;const e=this.i3slayer.definitionExpression,i=r.clone();return i.where?i.where=`(${e}) AND (${i.where})`:i.where=e,i}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],p.prototype,"i3slayer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"parsedDefinitionExpression",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],p.prototype,"definitionExpressionFields",null),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.3d.layers.support.DefinitionExpressionSceneLayerView")],p),p};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzNkX2xheWVyc19pM3NfSTNTTWVzaFZpZXdGaWx0ZXJfanMtbm9kZV9tb2R1bGVzLWE3YThjMC5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsY0FBYyw0QkFBNEIsY0FBYyxxQkFBK0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSjFKO0FBQ0E7QUFDQTtBQUNBO0FBQ3c3RCx1REFBdUQsdURBQUMsY0FBYyxvQkFBb0IseURBQUMsQ0FBQyxlQUFlLHlDQUF5QyxhQUFhLGdFQUFDLHlGQUF5RixxV0FBZ0QsV0FBVyx5Q0FBeUMsTUFBTSxzQkFBc0IsZ0RBQWdELFFBQVEsa0ZBQUMsNEJBQTRCLGtCQUFrQix3QkFBd0IseURBQXlELDJCQUEyQixJQUFJLE9BQU8sa0VBQUMsaUNBQWlDLFNBQVMsZ0RBQWdELEVBQUUsR0FBRyxZQUFZLG9CQUFvQiw2QkFBNkIsb0JBQW9CLDREQUFDLHVEQUF1RCxRQUFRLHNFQUFDLG1EQUFtRCw2Q0FBNkMsNkNBQTZDLG9DQUFvQyxRQUFRLHNFQUFDLDJCQUEyQiw0Q0FBNEMsNENBQTRDLHFDQUFxQyw0QkFBNEIsUUFBUSxzRUFBQyxtREFBbUQsNkNBQTZDLHdFQUF3RSxJQUFJLHFHQUFDLG1JQUFtSSxvQkFBb0IsUUFBUSxzRUFBQywyQkFBMkIsNENBQTRDLHVFQUF1RSxJQUFJLHFHQUFDLHlJQUF5SSxvQkFBb0IsU0FBUyxxQkFBcUIsUUFBUSxzRUFBQyw2QkFBNkIsc0VBQUMsNEJBQTRCLHlDQUF5QywyQkFBMkIseUJBQXlCLCtDQUErQyw0REFBQywyREFBMkQsMEVBQTBFLHVFQUF1RSxtRkFBbUYsR0FBRywwQkFBMEIscUNBQXFDLE1BQU0sV0FBVyxpQkFBaUIsdUJBQXVCLDREQUE0RCw0REFBQyxDQUFDLE1BQU0sbUJBQW1CLG9G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QUFTLFFBQVEsaUJBQWlCLE9BQU8sdURBQUMsRUFBRSxzRkFBQyxtQ0FBbUMsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksa0RBQWtELHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLG9EQUFvRCx1REFBQyxFQUFFLHNGQUFDLDJFQUEySCIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9jb3JlL21heWJlVXBkYXRpbmcuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTTWVzaFZpZXdGaWx0ZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTUXVlcnlFbmdpbmUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzNkL2xheWVycy9pM3MvSTNTUXVlcnlGZWF0dXJlQWRhcHRlci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL2kzcy9JM1NRdWVyeUZlYXR1cmVTdG9yZS5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvM2QvbGF5ZXJzL3N1cHBvcnQvRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlldy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuY29uc3Qgbj1cInVwZGF0aW5nXCI7ZnVuY3Rpb24gdChuKXtyZXR1cm5cInVwZGF0aW5nXCI9PT1uP251bGw6bn1mdW5jdGlvbiB1KG4pe3JldHVyblwidXBkYXRpbmdcIj09PW59ZXhwb3J0e3UgYXMgaXNVcGRhdGluZyx0IGFzIHVud3JhcFVwZGF0aW5nLG4gYXMgdXBkYXRpbmd9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0e1Bvc2l0aW9uSGludCBhcyByLGluZGV4T2YgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtjbGFtcCBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvbWF0aFV0aWxzLmpzXCI7aW1wb3J0e3Vud3JhcFVwZGF0aW5nIGFzIG8sdXBkYXRpbmcgYXMgYSxpc1VwZGF0aW5nIGFzIGx9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tYXliZVVwZGF0aW5nLmpzXCI7aW1wb3J0e3doZW5PbmNlIGFzIGN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e2dldFVuaXRTdHJpbmcgYXMgcH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGd9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHt0IGFzIG0sZyBhcyBmLHMgYXMgZH1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdmVjMy5qc1wiO2ltcG9ydHtXaGVyZUNsYXVzZSBhcyB5fWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc3FsL1doZXJlQ2xhdXNlLmpzXCI7aW1wb3J0e2dldFJlZmVyZW5jZUVsbGlwc29pZCBhcyBofWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L2VsbGlwc29pZFV0aWxzLmpzXCI7aW1wb3J0e2xvYWQgYXMgaixwcm9qZWN0IGFzIFN9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtwcm9qZWN0Qm91bmRpbmdTcGhlcmUgYXMgUn1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCb3VuZGluZ1NwaGVyZS5qc1wiO2ltcG9ydHtwcm9qZWN0VmVjdG9yVG9WZWN0b3IgYXMgRX1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RWZWN0b3JUb1ZlY3Rvci5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgd31mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdCb3guanNcIjtpbXBvcnR7ZnJvbVZhbHVlcyBhcyBiLGV4cGFuZFdpdGhOZXN0ZWRBcnJheSBhcyB2LGV4cGFuZCBhcyBGfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7ZG91YmxlQXJyYXlGcm9tIGFzIF99ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9Eb3VibGVBcnJheS5qc1wiO2ltcG9ydHtlYXJ0aCBhcyBrfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvRWxsaXBzb2lkLmpzXCI7aW1wb3J0e2lzV0dTODQgYXMgSSxpc1dlYk1lcmNhdG9yIGFzIE19ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7ZiBhcyBUfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7cHJvamVjdCBhcyBEfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvd2ViTWVyY2F0b3JVdGlscy5qc1wiO2ltcG9ydCBHIGZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9zdXBwb3J0L0ZlYXR1cmVGaWx0ZXIuanNcIjtpbXBvcnR7b2JqZWN0SWRGaWx0ZXIgYXMgQyxmaWx0ZXJJblBsYWNlIGFzIEF9ZnJvbVwiLi9JM1NVdGlsLmpzXCI7aW1wb3J0IHggZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZS5qc1wiO2NvbnN0IE89XCJlc3JpLnZpZXdzLjNkLmxheWVycy5pM3MuSTNTTWVzaFZpZXdGaWx0ZXJcIixCPXMuZ2V0TG9nZ2VyKE8pO2xldCBMPWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9wcm9qZWN0aW9uRW5naW5lTG9hZGVkPSExfWluaXRpYWxpemUoKXtjKCgoKT0+dGhpcy52aWV3RmlsdGVyPy5nZW9tZXRyeXx8bnVsbCE9dGhpcy5sYXllckZpbHRlcikpLnRoZW4oKCgpPT50aGlzLmxvYWRBc3luY01vZHVsZShpbXBvcnQoXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9nZW9tZXRyeUVuZ2luZS5qc1wiKS50aGVuKChlPT57dGhpcy5kZXN0cm95ZWR8fCh0aGlzLl9nZW9tZXRyeUVuZ2luZT1lKX0pKSkpKX1nZXQgc29ydGVkT2JqZWN0SWRzKCl7aWYobnVsbD09dGhpcy52aWV3RmlsdGVyPy5vYmplY3RJZHMpcmV0dXJuIG51bGw7Y29uc3QgZT1fKHRoaXMudmlld0ZpbHRlci5vYmplY3RJZHMpO3JldHVybiBlLnNvcnQoKSxlfWdldCBwYXJzZWRXaGVyZUNsYXVzZSgpe2NvbnN0IGU9bnVsbCE9dGhpcy52aWV3RmlsdGVyP3RoaXMudmlld0ZpbHRlci53aGVyZTpudWxsO2lmKG51bGw9PWV8fCFlKXJldHVybiBudWxsO3RyeXtyZXR1cm4geS5jcmVhdGUoZSx0aGlzLmxheWVyRmllbGRzSW5kZXgpfWNhdGNoKHQpe0IuZXJyb3IoYEZhaWxlZCB0byBwYXJzZSBmaWx0ZXIgd2hlcmUgY2xhdXNlOiAke3R9YCl9cmV0dXJuIG51bGx9YWRkRmlsdGVycyhlLHQscixpKXtjb25zdCBzPXRoaXMuc29ydGVkT2JqZWN0SWRzO251bGwhPXMmJmUucHVzaCgoZT0+QyhzLCEwLGUpKSksdGhpcy5hZGRTcWxGaWx0ZXIoZSx0aGlzLnBhcnNlZFdoZXJlQ2xhdXNlKTtjb25zdCBuPW8odGhpcy5fbGF5ZXJNYXNrR2VvbWV0cmllcyksYT10aGlzLl9nZW9tZXRyeUVuZ2luZTtpZihudWxsIT1uJiZudWxsIT10aGlzLmxheWVyRmlsdGVyJiZudWxsIT1hKXtjb25zdCBzPXRoaXMubGF5ZXJGaWx0ZXIuc3BhdGlhbFJlbGF0aW9uc2hpcDtlLnB1c2goKChlLG8pPT5xKGEsZSxvLGksdCxyLG4scykpKX1jb25zdCBsPW8odGhpcy5fdmlld01hc2tHZW9tZXRyaWVzKTtpZihudWxsIT1sJiZudWxsIT10aGlzLnZpZXdGaWx0ZXImJm51bGwhPWEpe2NvbnN0IHM9dGhpcy52aWV3RmlsdGVyLnNwYXRpYWxSZWxhdGlvbnNoaXA7ZS5wdXNoKCgoZSxuKT0+cShhLGUsbixpLHQscixsLHMpKSl9fWlzTUJTR2VvbWV0cnlWaXNpYmxlKGUsdCxyKXtjb25zdCBpPW8odGhpcy5fbGF5ZXJNYXNrR2VvbWV0cmllcykscz10aGlzLl9nZW9tZXRyeUVuZ2luZTtpZihudWxsIT1pJiZudWxsIT10aGlzLmxheWVyRmlsdGVyJiZudWxsIT1zKXtjb25zdCBuPXRoaXMubGF5ZXJGaWx0ZXIuc3BhdGlhbFJlbGF0aW9uc2hpcCxvPWlbMF0uc3BhdGlhbFJlZmVyZW5jZXx8dDtpZighUihlLHIsTixvKSlyZXR1cm4gQi53YXJuT25jZShcIlNjZW5lTGF5ZXIubWFzayBnZW9tZXRyeSBpcyB1c2luZyB1bnN1cHBvcnRlZCBTcGF0aWFsUmVmZXJlbmNlLCBza2lwcGluZyBnZW9tZXRyeSBmaWx0ZXIgZm9yIE1CU1wiKSwhMDtyZXR1cm4gVihzLE4saSxvLG4pfWNvbnN0IG49byh0aGlzLl92aWV3TWFza0dlb21ldHJpZXMpO2lmKG51bGwhPW4mJm51bGwhPXRoaXMudmlld0ZpbHRlciYmbnVsbCE9cyl7Y29uc3QgaT10aGlzLnZpZXdGaWx0ZXIuc3BhdGlhbFJlbGF0aW9uc2hpcCxvPW5bMF0uc3BhdGlhbFJlZmVyZW5jZXx8dDtpZighUihlLHIsTixvKSlyZXR1cm4gQi53YXJuT25jZShcIlNjZW5lTGF5ZXJWaWV3LmZpbHRlci5nZW9tZXRyeSBpcyB1c2luZyB1bnN1cHBvcnRlZCBTcGF0aWFsUmVmZXJlbmNlLCBza2lwcGluZyBnZW9tZXRyeSBmaWx0ZXIgZm9yIE1CU1wiKSwhMDtyZXR1cm4gVihzLE4sbixvLGkpfXJldHVybiEwfWdldCBwYXJzZWRHZW9tZXRyeSgpe2NvbnN0IGU9byh0aGlzLl92aWV3TWFza0dlb21ldHJpZXMpLHQ9byh0aGlzLl9sYXllck1hc2tHZW9tZXRyaWVzKTtyZXR1cm4gbnVsbD09ZXx8bnVsbD09dD9lfHx0OnQuY29uY2F0KGUpfWdldCBfbGF5ZXJNYXNrR2VvbWV0cmllcygpe2NvbnN0IGU9dGhpcy5sYXllckZpbHRlcjtyZXR1cm4gbnVsbD09ZT9udWxsOm51bGw9PXRoaXMuX2dlb21ldHJ5RW5naW5lP2E6XCJkaXNqb2ludFwiPT09ZS5zcGF0aWFsUmVsYXRpb25zaGlwP2UuZ2VvbWV0cmllcy5tYXAoKGU9Pih7dHlwZTpcInBvbHlnb25cIixyaW5nczplLnJpbmdzLHNwYXRpYWxSZWZlcmVuY2U6ZS5zcGF0aWFsUmVmZXJlbmNlLGNhY2hlOnt9fSkpKTpbZS5nZW9tZXRyaWVzLnJlZHVjZSgoKGUsdCk9PihlLnJpbmdzPVsuLi5lLnJpbmdzLC4uLnQucmluZ3NdLGUpKSx7dHlwZTpcInBvbHlnb25cIixyaW5nczpbXSxzcGF0aWFsUmVmZXJlbmNlOmUuZ2VvbWV0cmllc1swXS5zcGF0aWFsUmVmZXJlbmNlLGNhY2hlOnt9fSldfWdldCBfdmlld01hc2tHZW9tZXRyaWVzKCl7aWYobnVsbD09dGhpcy52aWV3RmlsdGVyKXJldHVybiBudWxsO2NvbnN0e2dlb21ldHJ5OmV9PXRoaXMudmlld0ZpbHRlcjtpZihudWxsPT1lKXJldHVybiBudWxsO2lmKG51bGw9PXRoaXMudmlld0ZpbHRlcnx8bnVsbD09dGhpcy5fZ2VvbWV0cnlFbmdpbmUpcmV0dXJuIGE7Y29uc3R7ZGlzdGFuY2U6dCx1bml0czpyfT10aGlzLnZpZXdGaWx0ZXIsaT10aGlzLnZpZXdGaWx0ZXIuc3BhdGlhbFJlbGF0aW9uc2hpcCxzPVwibWVzaFwiPT09ZS50eXBlP2UuZXh0ZW50OmU7aWYobnVsbD09dHx8MD09PXQpcmV0dXJuIFcodGhpcy5fZ2VvbWV0cnlFbmdpbmUscyxpKTtjb25zdCBuPXJ8fHAocy5zcGF0aWFsUmVmZXJlbmNlKTtpZihzLnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4NCl7Y29uc3QgZT10aGlzLl9nZW9tZXRyeUVuZ2luZS5nZW9kZXNpY0J1ZmZlcihzLHQsbik7cmV0dXJuIFcodGhpcy5fZ2VvbWV0cnlFbmdpbmUsZSxpKX1jb25zdCBvPUQocyx4LldHUzg0KTtpZihudWxsIT1vKXtjb25zdCBlPUQodGhpcy5fZ2VvbWV0cnlFbmdpbmUuZ2VvZGVzaWNCdWZmZXIobyx0LG4pLHMuc3BhdGlhbFJlZmVyZW5jZSk7cmV0dXJuIFcodGhpcy5fZ2VvbWV0cnlFbmdpbmUsZSxpKX1pZighdGhpcy5fcHJvamVjdGlvbkVuZ2luZUxvYWRlZCYmKHRoaXMubG9hZEFzeW5jTW9kdWxlKGooKS50aGVuKCgoKT0+dGhpcy5fcHJvamVjdGlvbkVuZ2luZUxvYWRlZD0hMCkpKSwhdGhpcy5fcHJvamVjdGlvbkVuZ2luZUxvYWRlZCkpcmV0dXJuIG51bGw7bGV0IGw9bnVsbDt0cnl7bD1TKHMseC5XR1M4NCl9Y2F0Y2goYyl7fWlmKGwpdHJ5e2w9Uyh0aGlzLl9nZW9tZXRyeUVuZ2luZS5nZW9kZXNpY0J1ZmZlcihsLHQsbikscy5zcGF0aWFsUmVmZXJlbmNlKX1jYXRjaChjKXtsPW51bGx9cmV0dXJuIGx8fEIuZXJyb3IoYEZpbHRlciBieSBnZW9kZXNpYyBidWZmZXIgKGRpc3RhbmNlKSB1bnN1cHBvcnRlZCwgZmFpbGVkIHRvIHByb2plY3QgaW5wdXQgZ2VvbWV0cnkgKCR7cy5zcGF0aWFsUmVmZXJlbmNlLndraWR9KSB0byBXR1M4NC5gKSxXKHRoaXMuX2dlb21ldHJ5RW5naW5lLGwsaSl9Z2V0IHVwZGF0aW5nKCl7cmV0dXJuIGwodGhpcy5fbGF5ZXJNYXNrR2VvbWV0cmllcyl8fGwodGhpcy5fdmlld01hc2tHZW9tZXRyaWVzKX1zdGF0aWMgY2hlY2tTdXBwb3J0KGUpe3JldHVybiBudWxsIT1lJiYoZS50aW1lRXh0ZW50PyhCLndhcm4oXCJGaWx0ZXJzIHdpdGggYSB0aW1lRXh0ZW50IGFyZSBub3Qgc3VwcG9ydGVkIGZvciBtZXNoIHNjZW5lIGxheWVyc1wiKSwhMSk6ISFVKGUuc3BhdGlhbFJlbGF0aW9uc2hpcCl8fChCLndhcm4oYEZpbHRlcnMgd2l0aCBzcGF0aWFsUmVsYXRpb25zaGlwIG90aGVyIHRoYW4gJHtQLmpvaW4oXCIsIFwiKX0gYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIG1lc2ggc2NlbmUgbGF5ZXJzYCksITEpKX19O2UoW3UoKV0sTC5wcm90b3R5cGUsXCJsYXllckZpbHRlclwiLHZvaWQgMCksZShbdSh7dHlwZTpHfSldLEwucHJvdG90eXBlLFwidmlld0ZpbHRlclwiLHZvaWQgMCksZShbdSgpXSxMLnByb3RvdHlwZSxcImxheWVyRmllbGRzSW5kZXhcIix2b2lkIDApLGUoW3UoKV0sTC5wcm90b3R5cGUsXCJsb2FkQXN5bmNNb2R1bGVcIix2b2lkIDApLGUoW3UoKV0sTC5wcm90b3R5cGUsXCJhZGRTcWxGaWx0ZXJcIix2b2lkIDApLGUoW3Uoe3JlYWRPbmx5OiEwfSldLEwucHJvdG90eXBlLFwic29ydGVkT2JqZWN0SWRzXCIsbnVsbCksZShbdSh7cmVhZE9ubHk6ITB9KV0sTC5wcm90b3R5cGUsXCJwYXJzZWRXaGVyZUNsYXVzZVwiLG51bGwpLGUoW3Uoe3JlYWRPbmx5OiEwfSldLEwucHJvdG90eXBlLFwicGFyc2VkR2VvbWV0cnlcIixudWxsKSxlKFt1KHtyZWFkT25seTohMH0pXSxMLnByb3RvdHlwZSxcIl9sYXllck1hc2tHZW9tZXRyaWVzXCIsbnVsbCksZShbdSh7cmVhZE9ubHk6ITB9KV0sTC5wcm90b3R5cGUsXCJfdmlld01hc2tHZW9tZXRyaWVzXCIsbnVsbCksZShbdSgpXSxMLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsbnVsbCksZShbdSgpXSxMLnByb3RvdHlwZSxcIl9wcm9qZWN0aW9uRW5naW5lTG9hZGVkXCIsdm9pZCAwKSxlKFt1KCldLEwucHJvdG90eXBlLFwiX2dlb21ldHJ5RW5naW5lXCIsdm9pZCAwKSxMPWUoW2coTyldLEwpO2NvbnN0IFA9KGU9PmUpKFtcImNvbnRhaW5zXCIsXCJpbnRlcnNlY3RzXCIsXCJkaXNqb2ludFwiXSk7ZnVuY3Rpb24gVShlKXtyZXR1cm4gbnVsbCE9ZSYmUC5pbmNsdWRlcyhlKX12YXIgSztmdW5jdGlvbiBXKGUsdCxzKXtpZihudWxsPT10KXJldHVybiBudWxsO2lmKFwiZGlzam9pbnRcIj09PXMmJlwicG9seWdvblwiPT09dC50eXBlKXtjb25zdCBzPXQucmluZ3MubGVuZ3RoLG49dC5zcGF0aWFsUmVmZXJlbmNlLG89bmV3IEFycmF5KHMpO2ZvcihsZXQgZT0wO2U8czsrK2Upe2NvbnN0IHI9YigxLzAsMS8wLC0xLzAsLTEvMCk7dihyLHQucmluZ3NbZV0pLG9bZV09e3R5cGU6XCJwb2x5Z29uXCIscmluZ3M6W3QucmluZ3NbZV1dLHNwYXRpYWxSZWZlcmVuY2U6bixjYWNoZTp7fSxhYWJyOnJ9fW8uc29ydCgoKGUsdCk9PmUuYWFiclswXS10LmFhYnJbMF0pKTtjb25zdCBhPW5ldyBTZXQsbD1uZXcgcjtmb3IobGV0IHQ9MDt0PG8ubGVuZ3RoOysrdCl7Y29uc3Qgcj1vW3RdLHM9ci5hYWJyWzBdO2EuZm9yRWFjaCgodD0+e2lmKHM+PXQuYWFiclsyXSlyZXR1cm4gdm9pZCBhLmRlbGV0ZSh0KTtpZihyLmFhYnJbMV0+dC5hYWJyWzNdfHxyLmFhYnJbM108dC5hYWJyWzFdfHwhZS5pbnRlcnNlY3RzKHIsdCkpcmV0dXJuO3IucmluZ3M9ci5yaW5ncy5jb25jYXQodC5yaW5ncyksRihyLmFhYnIsdC5hYWJyLHIuYWFiciksci5jYWNoZT17fSxhLmRlbGV0ZSh0KTtjb25zdCBuPWkobyx0LG8ubGVuZ3RoLGwpO28uc3BsaWNlKG4sMSl9KSksYS5hZGQocil9Zm9yKGNvbnN0IGUgb2YgbyllLmFhYnI9dm9pZCAwO3JldHVybiBvfXJldHVyblt0XX1mdW5jdGlvbiBWKGUsdCxyLGkscyl7aWYodFszXT49LjUqKHRbMl0raChpKS5yYWRpdXMpKXJldHVybiEwO2NvbnN0IG49eihlLHQsaSk7cmV0dXJuIHIuZXZlcnkoKHQ9PkgoZSx0LG4scykhPT1LLkRJU0NBUkQpKX1mdW5jdGlvbiBxKGUsdCxyLGkscyxuLG8sYSl7Y29uc3QgbD1vWzBdLnNwYXRpYWxSZWZlcmVuY2V8fHMuc3BhdGlhbFJlZmVyZW5jZTtpZighUihyLm5vZGUubWJzLG4sTixsKSlyZXR1cm4gdm9pZCBCLndhcm5PbmNlKFwiU2NlbmVMYXllclZpZXcuZmlsdGVyLmdlb21ldHJ5IGlzIHVzaW5nIHVuc3VwcG9ydGVkIFNwYXRpYWxSZWZlcmVuY2UsIHNraXBwaW5nIGdlb21ldHJ5IGZpbHRlclwiKTtjb25zdCBjPXooZSxOLGwpLHA9JChhLHMsbCxpLHIub2JqZWN0SGFuZGxlKTtmb3IoY29uc3QgdSBvZiBvKXtpZigwPT09dC5sZW5ndGgpcmV0dXJuO3N3aXRjaChIKGUsdSxjLGEpKXtjYXNlIEsuRElTQ0FSRDpyZXR1cm4gdm9pZCh0Lmxlbmd0aD0wKTtjYXNlIEsuS0VFUDpjb250aW51ZX1BKHQsci5mZWF0dXJlSWRzLCh0PT5RKGUsdSx0LHApKSl9fSFmdW5jdGlvbihlKXtlW2UuS0VFUD0wXT1cIktFRVBcIixlW2UuRElTQ0FSRD0xXT1cIkRJU0NBUkRcIixlW2UuVEVTVD0yXT1cIlRFU1RcIn0oS3x8KEs9e30pKTtjb25zdCBOPVQoMCwwLDAsMCk7ZnVuY3Rpb24gJChlLHQscixpLHMpe2NvbnN0IG49dC5yZW5kZXJTcGF0aWFsUmVmZXJlbmNlLG89bmV3IE1hcCxhPXt0eXBlOlwicG9seWdvblwiLHJpbmdzOltbWzAsMCwwXSxbMCwwLDBdLFswLDAsMF0sWzAsMCwwXV1dLHNwYXRpYWxSZWZlcmVuY2U6cn07YS5yaW5nc1swXVszXT1hLnJpbmdzWzBdWzBdO2NvbnN0IGw9e2luZGljZXM6bnVsbCxkYXRhOm51bGwsc3RyaWRlOjAsc3RhcnRJbmRleDowLGVuZEluZGV4OjB9O2xldCBjLHA7c3dpdGNoKGUpe2Nhc2VcImludGVyc2VjdHNcIjpjPShlLHQscik9PmUuaW50ZXJzZWN0cyh0LHIpP0suS0VFUDpLLlRFU1QscD1aO2JyZWFrO2Nhc2VcImNvbnRhaW5zXCI6Yz0oZSx0LHIpPT5lLmNvbnRhaW5zKHQscik/Sy5URVNUOksuRElTQ0FSRCxwPVo7YnJlYWs7ZGVmYXVsdDpjPShlLHQscik9PmUuZGlzam9pbnQodCxyKT9LLlRFU1Q6Sy5ESVNDQVJELHA9Sn1yZXR1cm57Y29sbGVjdGlvbjppLG9iamVjdDpzLHR5cGU6ZSxtYXNrU1I6cixyZW5kZXJTUjpuLGFhYmJDYWNoZTpvLHRyaWFuZ2xlOmEscG9zaXRpb25zOmwsdHJpYW5nbGVUZXN0OmMsZ2VvbWV0cnlUZXN0OnB9fWZ1bmN0aW9uIHooZSx0LHIpe2NvbnN0IGk9e3R5cGU6XCJwb2ludFwiLHg6dFswXSx5OnRbMV0saGFzWjohMSxoYXNNOiExLHNwYXRpYWxSZWZlcmVuY2U6cn0scz0hSShyKSYmIU0ociksbz1OdW1iZXIuaXNOYU4odFszXSk/MDpuKHRbM10sMCwyKmsucmFkaXVzKSxhPXM/ZS5idWZmZXIoaSxvLDEpOmUuZ2VvZGVzaWNCdWZmZXIoaSxvLDEpO3JldHVybiBhLnR5cGU9XCJwb2x5Z29uXCIsYX1mdW5jdGlvbiBIKGUsdCxyLGkpe3N3aXRjaChpKXtjYXNlXCJpbnRlcnNlY3RzXCI6Y2FzZVwiY29udGFpbnNcIjpyZXR1cm4gWihlLHQscik7Y2FzZVwiZGlzam9pbnRcIjpyZXR1cm4gSihlLHQscil9fWZ1bmN0aW9uIFooZSx0LHIpe3JldHVybiBlLmludGVyc2VjdHModCxyKT9lLmNvbnRhaW5zKHQscik/Sy5LRUVQOksuVEVTVDpLLkRJU0NBUkR9ZnVuY3Rpb24gSihlLHQscil7cmV0dXJuIGUuaW50ZXJzZWN0cyh0LHIpP2UuY29udGFpbnModCxyKT9LLkRJU0NBUkQ6Sy5URVNUOksuS0VFUH1mdW5jdGlvbiBRKGUsdCxyLGkpe2NvbnN0e2NvbGxlY3Rpb246cyxvYmplY3Q6bixyZW5kZXJTUjpvLG1hc2tTUjphLGdlb21ldHJ5VGVzdDpsLGFhYmJDYWNoZTpjfT1pO2xldCBwPWMuZ2V0KHIpO2lmKCFwKXtjb25zdCBlPXMuZ2V0T2JqZWN0VHJhbnNmb3JtKG4pO3MuZ2V0Q29tcG9uZW50QWFiYihuLHIsWCk7Y29uc3QgdD1bW1hbMF0sWFsxXSwwXSxbWFswXSxYWzRdLDBdLFtYWzNdLFhbNF0sMF0sW1hbM10sWFsxXSwwXV07Zm9yKGxldCByPTA7cjw0OysrciltKHRbcl0sdFtyXSxlLnJvdGF0aW9uU2NhbGUpLGYodFtyXSx0W3JdLGUucG9zaXRpb24pLEUodFtyXSxvLHRbcl0sYSk7cD17dHlwZTpcInBvbHlnb25cIixyaW5nczpbdF0sc3BhdGlhbFJlZmVyZW5jZTphLGNhY2hlOnt9fSxwLnJpbmdzWzBdWzRdPXAucmluZ3NbMF1bMF0sYy5zZXQocixwKX1zd2l0Y2gobChlLHQscCkpe2Nhc2UgSy5ESVNDQVJEOnJldHVybiExO2Nhc2UgSy5LRUVQOnJldHVybiEwfWNvbnN0e3RyaWFuZ2xlOnUsdHJpYW5nbGVUZXN0OmcscG9zaXRpb25zOnl9PWksaD11LnJpbmdzWzBdWzBdLGo9dS5yaW5nc1swXVsxXSxTPXUucmluZ3NbMF1bMl0sUj1zLmdldE9iamVjdFRyYW5zZm9ybShuKTtzLmdldENvbXBvbmVudFBvc2l0aW9ucyhuLHIseSk7Y29uc3R7aW5kaWNlczp3LGRhdGE6YixzdHJpZGU6dixzdGFydEluZGV4OkYsZW5kSW5kZXg6X309eTtmb3IobGV0IGs9RjtrPF87ays9Myl7Y29uc3Qgcj12Kndba10saT12KndbaysxXSxzPXYqd1trKzJdO3N3aXRjaChkKGgsYltyXSxiW3IrMV0sYltyKzJdKSxkKGosYltpXSxiW2krMV0sYltpKzJdKSxkKFMsYltzXSxiW3MrMV0sYltzKzJdKSxtKGgsaCxSLnJvdGF0aW9uU2NhbGUpLG0oaixqLFIucm90YXRpb25TY2FsZSksbShTLFMsUi5yb3RhdGlvblNjYWxlKSxmKGgsaCxSLnBvc2l0aW9uKSxmKGosaixSLnBvc2l0aW9uKSxmKFMsUyxSLnBvc2l0aW9uKSxFKGgsbyxoLGEpLEUoaixvLGosYSksRShTLG8sUyxhKSxnKGUsdCx1KSl7Y2FzZSBLLkRJU0NBUkQ6cmV0dXJuITE7Y2FzZSBLLktFRVA6cmV0dXJuITB9fXJldHVyblwiaW50ZXJzZWN0c1wiIT09aS50eXBlfWNvbnN0IFg9dygpO2V4cG9ydHtMIGFzIEkzU01lc2hWaWV3RmlsdGVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0FjY2Vzc29yLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtkZXN0cm95TWF5YmUgYXMgc31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnR7ZmFsbGJhY2tPYmplY3RJREF0dHJpYnV0ZSBhcyBhfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9MYXllckNvbnN0YW50cy5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZSBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9kYXRhL1F1ZXJ5RW5naW5lLmpzXCI7aW1wb3J0IHkgZnJvbVwiLi4vLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnQgYyBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvRmVhdHVyZVNldC5qc1wiO2ltcG9ydCBwIGZyb21cIi4uLy4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2NvbnN0IGw9dTtsZXQgZD1jbGFzcyBleHRlbmRzIHJ7Z2V0IHNwYXRpYWxSZWZlcmVuY2UoKXtyZXR1cm4gdGhpcy5sYXllclZpZXcudmlldy5zcGF0aWFsUmVmZXJlbmNlfWdldCBsYXllcigpe3JldHVybiB0aGlzLmxheWVyVmlldy5pM3NsYXllcn1nZXQgZGVmYXVsdFF1ZXJ5SlNPTigpe3JldHVybiBuZXcgcCh7b3V0U3BhdGlhbFJlZmVyZW5jZTp0aGlzLnNwYXRpYWxSZWZlcmVuY2V9KS50b0pTT04oKX1nZXQgX2RhdGFRdWVyeUVuZ2luZSgpe3JldHVybiB0aGlzLl9lbnN1cmVEYXRhUXVlcnlFbmdpbmUoKX1jb25zdHJ1Y3RvcihlKXtzdXBlcihlKX1pbml0aWFsaXplKCl7dGhpcy5hZGRIYW5kbGVzKHRoaXMubGF5ZXJWaWV3Lm9uKFwidmlzaWJsZS1nZW9tZXRyeS1jaGFuZ2VkXCIsKCgpPT50aGlzLnNwYXRpYWxJbmRleC5ldmVudHMuZW1pdChcImNoYW5nZWRcIikpKSl9ZGVzdHJveSgpe3RoaXMuX2RhdGFRdWVyeUVuZ2luZUluc3RhbmNlPXModGhpcy5fZGF0YVF1ZXJ5RW5naW5lSW5zdGFuY2UpLHRoaXMuX3NldChcImxheWVyVmlld1wiLG51bGwpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvckNvdW50KGUscil7cmV0dXJuIHRoaXMuX2RhdGFRdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JDb3VudCh0aGlzLl9lbnN1cmVRdWVyeUpTT04oZSkscil9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yRXh0ZW50KGUscil7Y29uc3R7Y291bnQ6dCxleHRlbnQ6c309YXdhaXQgdGhpcy5fZGF0YVF1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvckV4dGVudCh0aGlzLl9lbnN1cmVRdWVyeUpTT04oZSkscik7cmV0dXJue2NvdW50OnQsZXh0ZW50OmkuZnJvbUpTT04ocyl9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvcklkcyhlLHIpe3JldHVybiB0aGlzLl9kYXRhUXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9ySWRzKHRoaXMuX2Vuc3VyZVF1ZXJ5SlNPTihlKSxyKX1hc3luYyBleGVjdXRlUXVlcnkoZSxyKXtjb25zdCBzPXRoaXMuX2Vuc3VyZVF1ZXJ5SlNPTihlKTtpZihzLnJldHVybkdlb21ldHJ5KXRocm93IG5ldyB0KFwidW5zdXBwb3J0ZWQtcXVlcnlcIixcInJldHVybkdlb21ldHJ5IGlzIG5vdCB5ZXQgc3VwcG9ydGVkIGZvciBtZXNoIHNjZW5lIGxheWVyIHF1ZXJpZXNcIik7aWYocy5yZXR1cm5DZW50cm9pZCl0aHJvdyBuZXcgdChcInVuc3VwcG9ydGVkLXF1ZXJ5XCIsXCJyZXR1cm5DZW50cm9pZCBpcyBub3QgeWV0IHN1cHBvcnRlZCBmb3IgbWVzaCBzY2VuZSBsYXllciBxdWVyaWVzXCIpO2NvbnN0IG49YXdhaXQgdGhpcy5fZGF0YVF1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeShzLHIpLG89Yy5mcm9tSlNPTihuKTtyZXR1cm4gby5mZWF0dXJlcy5mb3JFYWNoKChlPT57ZS5nZW9tZXRyeT1udWxsfSkpLG99X2Vuc3VyZVF1ZXJ5SlNPTihlKXtyZXR1cm4gbnVsbD09ZT90aGlzLmRlZmF1bHRRdWVyeUpTT046ZS50b0pTT04oKX1fZW5zdXJlRGF0YVF1ZXJ5RW5naW5lKCl7aWYodGhpcy5fZGF0YVF1ZXJ5RW5naW5lSW5zdGFuY2UpcmV0dXJuIHRoaXMuX2RhdGFRdWVyeUVuZ2luZUluc3RhbmNlO2NvbnN0IGU9dGhpcy5sYXllci5vYmplY3RJZEZpZWxkfHxhLHI9XCJlc3JpR2VvbWV0cnlQb2x5Z29uXCIsdD10aGlzLmxheWVyLmZpZWxkc0luZGV4Py50b0pTT04oKXx8bmV3IHkoW10pLHM9dGhpcy5sYXllclZpZXcudmlldy5yZXNvdXJjZUNvbnRyb2xsZXIuc2NoZWR1bGVyLG49dGhpcy5zcGF0aWFsUmVmZXJlbmNlLnRvSlNPTigpLG89dGhpcy5wcmlvcml0eSxpPXRoaXMuc3BhdGlhbEluZGV4O3JldHVybiB0aGlzLl9kYXRhUXVlcnlFbmdpbmVJbnN0YW5jZT1uZXcgbCh7aGFzWjohMCxoYXNNOiExLGdlb21ldHJ5VHlwZTpyLGZpZWxkc0luZGV4OnQsdGltZUluZm86bnVsbCxzcGF0aWFsUmVmZXJlbmNlOm4sb2JqZWN0SWRGaWVsZDplLGZlYXR1cmVTdG9yZTppLHNjaGVkdWxlcjpzLHByaW9yaXR5Om99KSx0aGlzLl9kYXRhUXVlcnlFbmdpbmVJbnN0YW5jZX19O2UoW24oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJsYXllclZpZXdcIix2b2lkIDApLGUoW24oe2NvbnN0cnVjdE9ubHk6ITB9KV0sZC5wcm90b3R5cGUsXCJwcmlvcml0eVwiLHZvaWQgMCksZShbbih7Y29uc3RydWN0T25seTohMH0pXSxkLnByb3RvdHlwZSxcInNwYXRpYWxJbmRleFwiLHZvaWQgMCksZShbbigpXSxkLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIixudWxsKSxlKFtuKCldLGQucHJvdG90eXBlLFwibGF5ZXJcIixudWxsKSxlKFtuKCldLGQucHJvdG90eXBlLFwiZGVmYXVsdFF1ZXJ5SlNPTlwiLG51bGwpLGQ9ZShbbyhcImVzcmkudmlld3MuM2QubGF5ZXJzLmkzcy5JM1NRdWVyeUVuZ2luZVwiKV0sZCk7ZXhwb3J0e2QgYXMgSTNTUXVlcnlFbmdpbmV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjcmVhdGUgYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdCb3guanNcIjtpbXBvcnR7Z2V0Q2VudHJvaWRPcHRpbWl6ZWRHZW9tZXRyeSBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9jZW50cm9pZC5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9PcHRpbWl6ZWRHZW9tZXRyeS5qc1wiO2ltcG9ydHtnZXRDYWNoZWRBdHRyaWJ1dGVWYWx1ZSBhcyBpfWZyb21cIi4vSTNTVXRpbC5qc1wiO2NsYXNzIG97Y29uc3RydWN0b3IodCl7dGhpcy5fb2JqZWN0SWRGaWVsZD10Lm9iamVjdElkRmllbGQsdGhpcy5fZ2V0RmVhdHVyZUV4dGVudD10LmdldEZlYXR1cmVFeHRlbnR9Z2V0T2JqZWN0SWQodCl7cmV0dXJuIHQuaWR9Z2V0QXR0cmlidXRlcyh0KXtjb25zdHttZXRhOmUsaW5kZXg6cn09dCxvPXt9O3RoaXMuX29iamVjdElkRmllbGQmJihvW3RoaXMuX29iamVjdElkRmllbGRdPXQuaWQpO2NvbnN0IG49ZS5hdHRyaWJ1dGVJbmZvPy5hdHRyaWJ1dGVEYXRhO2lmKG51bGwhPW4pZm9yKGNvbnN0IHMgb2YgT2JqZWN0LmtleXMobikpb1tzXT1pKG5bc10scik7cmV0dXJuIG99Z2V0QXR0cmlidXRlKHQsZSl7aWYoZT09PXRoaXMuX29iamVjdElkRmllbGQpcmV0dXJuIHQuaWQ7Y29uc3R7bWV0YTpyLGluZGV4Om99PXQsbj1yLmF0dHJpYnV0ZUluZm8/LmF0dHJpYnV0ZURhdGE7cmV0dXJuIG51bGwhPW4/aShuW2VdLG8pOm51bGx9Z2V0R2VvbWV0cnkodCl7aWYodC5nZW9tZXRyeSlyZXR1cm4gdC5nZW9tZXRyeTtjb25zdFtlLGksbyxzLGFdPXRoaXMuX2dldEZlYXR1cmVFeHRlbnQodCxuKTtyZXR1cm4gbmV3IHIoWzVdLFtlLGksbyxzLGksbyxzLGEsbyxlLGEsbyxlLGksb10pfWdldENlbnRyb2lkKHQsaSl7aWYodC5nZW9tZXRyeSlyZXR1cm4gZShuZXcgcix0Lmdlb21ldHJ5LGkuaGFzWixpLmhhc00pO2NvbnN0W28scyxhLHUsZCxjXT10aGlzLl9nZXRGZWF0dXJlRXh0ZW50KHQsbik7cmV0dXJuIG5ldyByKFswXSxbKG8rdSkvMiwocytkKS8yLChhK2MpLzJdKX1jbG9uZVdpdGhHZW9tZXRyeSh0LGUpe2NvbnN0e2lkOnIsaW5kZXg6aSxtZXRhOm99PXQ7cmV0dXJue2lkOnIsaW5kZXg6aSxtZXRhOm8sZ2VvbWV0cnk6ZX19fWNvbnN0IG49dCgpO2V4cG9ydHtvIGFzIEkzU1F1ZXJ5RmVhdHVyZUFkYXB0ZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtwcm9qZWN0Qm91bmRpbmdTcGhlcmUgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uL3Byb2plY3RCb3VuZGluZ1NwaGVyZS5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgbix0b1JlY3QgYXMgcH1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdCb3guanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGEsaW50ZXJzZWN0cyBhcyBpfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtpbXBvcnR7ZiBhcyB1fWZyb21cIi4uLy4uLy4uLy4uL2NodW5rcy9zcGhlcmUuanNcIjtpbXBvcnR7Rm9yQWxsRmVhdHVyZXNSZXR1cm5UeXBlIGFzIG19ZnJvbVwiLi4vSUkzU01lc2hWaWV3M0QuanNcIjtjb25zdCBmPW4oKTtsZXQgbD1jbGFzcyBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoZSksdGhpcy5ldmVudHM9bmV3IHR9Zm9yRWFjaChlKXt0aGlzLmZvckFsbEZlYXR1cmVzKChyPT4oZShyKSxtLkNPTlRJTlVFKSkpfWZvckVhY2hCb3VuZHMoZSxyKXtjb25zdCB0PXRoaXMuZ2V0RmVhdHVyZUV4dGVudDtmb3IoY29uc3QgbyBvZiBlKXIodChvLGYpKX1mb3JFYWNoSW5Cb3VuZHMoZSxyKXt0aGlzLmZvckFsbEZlYXR1cmVzKCh0PT57Y29uc3Qgbz10aGlzLmdldEZlYXR1cmVFeHRlbnQodCx5KTtyZXR1cm4gaShlLHAobyxkKSkmJnIodCksbS5DT05USU5VRX0pLChyPT57aWYoYyhyLm5vZGUubWJzLHRoaXMuc291cmNlU3BhdGlhbFJlZmVyZW5jZSxoLHRoaXMudmlld1NwYXRpYWxSZWZlcmVuY2UpLGhbMF0+PWVbMF0mJmhbMl08PWVbMl0mJmhbMV0+PWVbMV0mJmhbM108PWVbM10pcmV0dXJuIG0uQ09OVElOVUU7Y29uc3QgdD1NYXRoLm1heChlWzBdLE1hdGgubWluKGhbMF0sZVsyXSkpLG89TWF0aC5tYXgoZVsxXSxNYXRoLm1pbihoWzFdLGVbM10pKSxzPWhbMF0tdCxuPWhbMV0tbztyZXR1cm4gcypzK24qbjw9aFszXSpoWzNdP20uQ09OVElOVUU6bS5TS0lQfSkpfX07ZShbbyh7Y29uc3RydWN0T25seTohMH0pXSxsLnByb3RvdHlwZSxcImZlYXR1cmVBZGFwdGVyXCIsdm9pZCAwKSxlKFtvKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGwucHJvdG90eXBlLFwiZm9yQWxsRmVhdHVyZXNcIix2b2lkIDApLGUoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sbC5wcm90b3R5cGUsXCJnZXRGZWF0dXJlRXh0ZW50XCIsdm9pZCAwKSxlKFtvKHtjb25zdHJ1Y3RPbmx5OiEwfSldLGwucHJvdG90eXBlLFwic291cmNlU3BhdGlhbFJlZmVyZW5jZVwiLHZvaWQgMCksZShbbyh7Y29uc3RydWN0T25seTohMH0pXSxsLnByb3RvdHlwZSxcInZpZXdTcGF0aWFsUmVmZXJlbmNlXCIsdm9pZCAwKSxsPWUoW3MoXCJlc3JpLnZpZXdzLjNkLmxheWVycy5pM3MuSTNTUXVlcnlGZWF0dXJlU3RvcmVcIildLGwpO2NvbnN0IGg9dSgwLDAsMCwwKSx5PW4oKSxkPWEoKTtleHBvcnR7bCBhcyBJM1NRdWVyeUZlYXR1cmVTdG9yZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtXaGVyZUNsYXVzZSBhcyBvfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvc3FsL1doZXJlQ2xhdXNlLmpzXCI7aW1wb3J0e2ZpbmRGaWVsZHNDYXNlSW5zZW5zaXRpdmUgYXMgbn1mcm9tXCIuLi9pM3MvSTNTVXRpbC5qc1wiO2NvbnN0IHQ9dD0+e2xldCBwPWNsYXNzIGV4dGVuZHMgdHtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fZGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnM9MCx0aGlzLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycz0yMCx0aGlzLmxvZ0Vycm9yPXI9Pnt0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9yczx0aGlzLl9tYXhEZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycyYmZS5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJFcnJvciB3aGlsZSBldmFsdWF0aW5nIGRlZmluaXRpb25FeHByZXNzaW9uOiBcIityKSx0aGlzLl9kZWZpbml0aW9uRXhwcmVzc2lvbkVycm9ycysrLHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPT09dGhpcy5fbWF4RGVmaW5pdGlvbkV4cHJlc3Npb25FcnJvcnMmJmUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiRnVydGhlciBlcnJvcnMgYXJlIGlnbm9yZWRcIil9fWdldCBwYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbigpe2lmKCF0aGlzLmkzc2xheWVyPy5kZWZpbml0aW9uRXhwcmVzc2lvbilyZXR1cm4gbnVsbDt0cnl7Y29uc3Qgcj1vLmNyZWF0ZSh0aGlzLmkzc2xheWVyLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuaTNzbGF5ZXIuZmllbGRzSW5kZXgpO2lmKCFyLmlzU3RhbmRhcmRpemVkKXJldHVybiBlLmdldExvZ2dlcih0aGlzKS5lcnJvcihcImRlZmluaXRpb25FeHByZXNzaW9uIGlzIHVzaW5nIG5vbiBzdGFuZGFyZCBmdW5jdGlvblwiKSxudWxsO2NvbnN0IGk9W10scz1yLmZpZWxkTmFtZXM7cmV0dXJuIG4ocyx0aGlzLmkzc2xheWVyLmZpZWxkcyx7bWlzc2luZ0ZpZWxkczppfSksaS5sZW5ndGg+MD8oZS5nZXRMb2dnZXIodGhpcykuZXJyb3IoYGRlZmluaXRpb25FeHByZXNzaW9uIHJlZmVyZW5jZXMgdW5rbm93biBmaWVsZHM6ICR7aS5qb2luKFwiLCBcIil9YCksbnVsbCk6KHRoaXMuX2RlZmluaXRpb25FeHByZXNzaW9uRXJyb3JzPTAscil9Y2F0Y2gocil7cmV0dXJuIGUuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwiRmFpbGVkIHRvIHBhcnNlIGRlZmluaXRpb25FeHByZXNzaW9uOiBcIityKSxudWxsfX1nZXQgZGVmaW5pdGlvbkV4cHJlc3Npb25GaWVsZHMoKXtyZXR1cm4gdGhpcy5wYXJzZWREZWZpbml0aW9uRXhwcmVzc2lvbj90aGlzLnBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uLmZpZWxkTmFtZXM6W119X2V2YWx1YXRlQ2xhdXNlKHIsZSl7dHJ5e3JldHVybiByLnRlc3RGZWF0dXJlKGUpfWNhdGNoKGkpe3JldHVybiB0aGlzLmxvZ0Vycm9yKGkpLCExfX1fYWRkRGVmaW5pdGlvbkV4cHJlc3Npb25Ub1F1ZXJ5KHIpe2lmKCF0aGlzLnBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uKXJldHVybiByO2NvbnN0IGU9dGhpcy5pM3NsYXllci5kZWZpbml0aW9uRXhwcmVzc2lvbixpPXIuY2xvbmUoKTtyZXR1cm4gaS53aGVyZT9pLndoZXJlPWAoJHtlfSkgQU5EICgke2kud2hlcmV9KWA6aS53aGVyZT1lLGl9fTtyZXR1cm4gcihbaSgpXSxwLnByb3RvdHlwZSxcImkzc2xheWVyXCIsdm9pZCAwKSxyKFtpKHtyZWFkT25seTohMH0pXSxwLnByb3RvdHlwZSxcInBhcnNlZERlZmluaXRpb25FeHByZXNzaW9uXCIsbnVsbCkscihbaSh7cmVhZE9ubHk6ITB9KV0scC5wcm90b3R5cGUsXCJkZWZpbml0aW9uRXhwcmVzc2lvbkZpZWxkc1wiLG51bGwpLHA9cihbcyhcImVzcmkudmlld3MuM2QubGF5ZXJzLnN1cHBvcnQuRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlld1wiKV0scCkscH07ZXhwb3J0e3QgYXMgRGVmaW5pdGlvbkV4cHJlc3Npb25TY2VuZUxheWVyVmlld307XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=