"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_core_libs_rbush_PooledRBush_js-node_modules_arcgis_co-c0a51f"],{

/***/ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BBox: () => (/* binding */ Y),
/* harmony export */   PooledRBush: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/quickselect.js */ "./node_modules/@arcgis/core/chunks/quickselect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t=9,i){this._compareMinX=o,this._compareMinY=l,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),p.prune(),g.prune(),M.prune(),X.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(x(t,n))for(p.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;x(t,a)&&(n.leaf?i(h):_(t,a)?this._all(h,i):p.push(h))}n=p.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!x(t,i))return!1;for(p.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(x(t,h)){if(i.leaf||_(t,h))return!0;p.push(s)}}i=p.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(i){if(!i)return this;let n,e=this._data,s=null,h=0,a=!1;const r=this._toBBox(i);for(M.clear(),X.clear();e||M.length>0;){if(e||(e=M.pop(),s=M.data[M.length-1],h=X.pop()??0,a=!0),e.leaf&&(n=(0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(e.children,i,e.children.length,e.indexHint),-1!==n))return e.children.splice(n,1),M.push(e),this._condense(M),this;a||e.leaf||!_(e,r)?s?(h++,e=s.children[h],a=!1):e=null:(M.push(e),X.push(h),h=0,s=e,e=e.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(g.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else g.pushArray(n.children);n=g.pop()??null}}_build(t,i,n,e){const s=n-i+1;let a=this._maxEntries;if(s<=a){const e=new w(t.slice(i,n+1));return h(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/a**(e-1)));const r=new b([]);r.height=e;const o=Math.ceil(s/a),l=o*Math.ceil(Math.sqrt(a));f(t,i,n,l,this._compareMinX);for(let h=i;h<=n;h+=l){const i=Math.min(h+l-1,n);f(t,h,i,o,this._compareMinY);for(let n=h;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return h(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=c(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);M.clear();const h=this._chooseSubtree(s,this._data,i,M);for(h.children.push(t),r(h,s);i>=0&&M.data[i].children.length>this._maxEntries;)this._split(M,i),i--;this._adjustParentBBoxes(s,M,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const a=this._chooseSplitIndex(n,s,e);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(a,n.children.length-a),o=n.leaf?new w(r):new b(r);o.height=n.height,h(n,this._toBBox),h(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new b([t,i]),this._data.height=t.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let r=i;r<=n-i;r++){const i=a(t,0,r,this._toBBox),o=a(t,r,n,this._toBBox),l=u(i,o),m=c(i)+c(o);l<e?(e=l,h=r,s=m<s?m:s):l===e&&m<s&&(s=m,h=r)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:o,s=t.leaf?this._compareMinY:l;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=a(t,0,i,s),o=a(t,n-i,n,s);let l=m(h)+m(o);for(let a=i;a<n-i;a++){const i=t.children[a];r(h,t.leaf?s(i):i),l+=m(h)}for(let a=n-i-1;a>=i;a--){const i=t.children[a];r(o,t.leaf?s(i):i),l+=m(o)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)r(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice((0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(h,e,h.length,s.indexHint),1)}else this.clear();else h(e,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this._compareMinX=new Function("a","b",i.join(t[0])),this._compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function h(t,i){a(t,0,t.children.length,i,t)}function a(t,i,n,e,s){s||(s=new w([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],r(s,t.leaf?e(h):h);return s}function r(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function o(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function _(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function x(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function f(t,i,n,s,h){const a=[i,n];for(;a.length;){const i=a.pop(),n=a.pop();if(i-n<=s)continue;const r=n+Math.ceil((i-n)/s/2)*s;(0,_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,r,n,i,h),a.push(n,r,r,i)}}const p=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],g=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],M=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],X=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint}}class w extends B{constructor(t){super(),this.children=t,this.leaf=!0}}class b extends B{constructor(t){super(),this.children=t,this.leaf=!1}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/centroid.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/centroid.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCentroidOptimizedGeometry: () => (/* binding */ n),
/* harmony export */   lineCentroid: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n){return t?n?4:3:n?3:2}function n(n,I,o,u,N){if(!I?.lengths.length)return null;const l="upperLeft"===N?.originPosition?-1:1;n.lengths.length&&(n.lengths.length=0),n.coords.length&&(n.coords.length=0);const s=n.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:i}=I,h=t(o,u);let g=0;for(const t of T){const n=e(f,i,g,t,o,u,l);n&&c.push(n),g+=t*h}if(c.sort(((t,n)=>{let e=l*t[2]-l*n[2];return 0===e&&o&&(e=t[4]-n[4]),e})),c.length){let t=6*c[0][2];s[0]=c[0][0]/t,s[1]=c[0][1]/t,o&&(t=6*c[0][4],s[2]=0!==t?c[0][3]/t:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const t=I.lengths[0]?r(i,0,T[0],o,u):null;if(!t)return null;s[0]=t[0],s[1]=t[1],o&&t.length>2&&(s[2]=t[2])}return n}function e(n,e,r,I,o,u,N=1){const l=t(o,u);let s=r,c=r+l,f=0,T=0,i=0,h=0,g=0;for(let t=0,b=I-1;t<b;t++,s+=l,c+=l){const t=e[s],r=e[s+1],I=e[s+2],u=e[c],N=e[c+1],l=e[c+2];let E=t*N-u*r;h+=E,f+=(t+u)*E,T+=(r+N)*E,o&&(E=t*l-u*I,i+=(I+l)*E,g+=E),t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t),r<n[2]&&(n[2]=r),r>n[3]&&(n[3]=r),o&&(I<n[4]&&(n[4]=I),I>n[5]&&(n[5]=I))}if(h*N>0&&(h*=-1),g*N>0&&(g*=-1),!h)return null;const E=[f,T,.5*h];return o&&(E[3]=i,E[4]=.5*g),E}function r(n,e,r,l,s){const c=t(l,s);let f=e,T=e+c,i=0,h=0,g=0,E=0;for(let t=0,b=r-1;t<b;t++,f+=c,T+=c){const t=n[f],e=n[f+1],r=n[f+2],s=n[T],c=n[T+1],b=n[T+2],m=l?o(t,e,r,s,c,b):I(t,e,s,c);if(m)if(i+=m,l){const n=N(t,e,r,s,c,b);h+=m*n[0],g+=m*n[1],E+=m*n[2]}else{const n=u(t,e,s,c);h+=m*n[0],g+=m*n[1]}}return i>0?l?[h/i,g/i,E/i]:[h/i,g/i]:r>0?l?[n[e],n[e+1],n[e+2]]:[n[e],n[e+1]]:null}function I(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function o(t,n,e,r,I,o){const u=r-t,N=I-n,l=o-e;return Math.sqrt(u*u+N*N+l*l)}function u(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   optimizedFeatureQueryEngineAdapter: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _centroid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../centroid.js */ "./node_modules/@arcgis/core/layers/graphics/centroid.js");
/* harmony import */ var _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../OptimizedFeature.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js");
/* harmony import */ var _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../OptimizedGeometry.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.OptimizedFeature(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(null==e.centroid&&(e.centroid=(0,_centroid_js__WEBPACK_IMPORTED_MODULE_0__.getCentroidOptimizedGeometry)(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"],e.geometry,o.hasZ,o.hasM)),e.centroid)};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/graphics/GraphicsProcessor.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GraphicsProcessor: () => (/* binding */ O)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _layers_Layer_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../layers/Layer.js */ "./node_modules/@arcgis/core/layers/Layer.js");
/* harmony import */ var _layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../layers/graphics/hydratedFeatures.js */ "./node_modules/@arcgis/core/layers/graphics/hydratedFeatures.js");
/* harmony import */ var _renderers_support_renderingInfoUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../renderers/support/renderingInfoUtils.js */ "./node_modules/@arcgis/core/renderers/support/renderingInfoUtils.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _interfaces_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../interfaces.js */ "./node_modules/@arcgis/core/views/3d/layers/interfaces.js");
/* harmony import */ var _constants_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./constants.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/constants.js");
/* harmony import */ var _Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./Graphics3DCore.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DCore.js");
/* harmony import */ var _Graphics3DElevationAlignment_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Graphics3DElevationAlignment.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DElevationAlignment.js");
/* harmony import */ var _Graphics3DFrustumVisibility_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./Graphics3DFrustumVisibility.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFrustumVisibility.js");
/* harmony import */ var _Graphics3DObjectStates_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./Graphics3DObjectStates.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DObjectStates.js");
/* harmony import */ var _Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./Graphics3DScaleVisibility.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DScaleVisibility.js");
/* harmony import */ var _graphicUtils_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./graphicUtils.js */ "./node_modules/@arcgis/core/views/3d/layers/graphics/graphicUtils.js");
/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js");
/* harmony import */ var _webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../webgl-engine/lib/UpdatePolicy.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let O=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(t){super(t),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=_interfaces_js__WEBPACK_IMPORTED_MODULE_19__.DrapeSourceType.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null,this._updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_14__.UpdatingHandles}initialize(){const{layer:t}=this,i="effectiveScaleRange"in t?t:null,e=this.scaleVisibilityEnabled&&null!=i,s=new _Graphics3DCore_js__WEBPACK_IMPORTED_MODULE_21__.Graphics3DCore({owner:this,layer:this.owner.layer,preferredUpdatePolicy:_webgl_engine_lib_UpdatePolicy_js__WEBPACK_IMPORTED_MODULE_28__.UpdatePolicy.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(t,i)=>new _Graphics3DElevationAlignment_js__WEBPACK_IMPORTED_MODULE_22__.Graphics3DElevationAlignment({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:i,elevationProvider:this.view.elevationProvider}),scaleVisibility:e?(t,e)=>new _Graphics3DScaleVisibility_js__WEBPACK_IMPORTED_MODULE_25__.Graphics3DScaleVisibility({graphicsCoreOwner:this,layer:i,queryGraphicUIDsInExtent:e,graphicsCore:t,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:t=>new _Graphics3DObjectStates_js__WEBPACK_IMPORTED_MODULE_24__.Graphics3DObjectStates(t)}});if(this._set("graphicsCore",s),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new _Graphics3DFrustumVisibility_js__WEBPACK_IMPORTED_MODULE_23__.Graphics3DFrustumVisibility({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const t=this.owner;this._updatingHandles.add((()=>t.fullOpacity),(()=>this.graphicsCore.opacityChange()))}if("elevationInfo"in t){const i=t;this._updatingHandles.add((()=>i.elevationInfo),((t,i)=>{(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_13__.diff)(t,i)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())}))}this._set("initializePromise",this._initializeAsync()),this._updatingHandles.addPromise(this.initializePromise)}async _initializeAsync(){try{await this.graphicsCore.initializePromise}catch(t){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_6__.isAbortError)(t))return;throw t}this.destroyed||(this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>this.view.clippingArea),(()=>this._updateClippingExtent()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.sync)),this._updateClippingExtent(),this._setupSuspendResumeExtent(),this.graphicsCore.startCreateGraphics())}destroy(){this._updatingHandles.destroy(),this._set("frustumVisibility",(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.destroyMaybe)(this.frustumVisibility)),this._set("graphicsCore",(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_5__.destroyMaybe)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get objectStates(){return this.graphicsCore?.objectStates}get scaleVisibilitySuspended(){return!(null==this.scaleVisibility||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return null!=this.frustumVisibility&&this.frustumVisibility.suspended}get suspended(){return this.owner.suspended??!1}get updating(){return!!(this.graphicsCore?.updating||null!=this.scaleVisibility&&this.scaleVisibility.updating||null!=this.frustumVisibility&&this.frustumVisibility.updating||this._updatingHandles.updating)}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner.fullOpacity??1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(t){this.graphicsCore.notifyGraphicGeometryChanged(t)}notifyGraphicVisibilityChanged(t){this.graphicsCore.notifyGraphicVisibilityChanged(t)}getRenderingInfo(t,i,e){const s=(0,_renderers_support_renderingInfoUtils_js__WEBPACK_IMPORTED_MODULE_17__.getRenderingInfo)(t,{renderer:i,arcade:e});if(s?.color){const t=s.color;t[0]=t[0]/255,t[1]=t[1]/255,t[2]=t[2]/255}return s}getRenderingInfoAsync(t,i,e,s){return (0,_renderers_support_renderingInfoUtils_js__WEBPACK_IMPORTED_MODULE_17__.getRenderingInfoAsync)(t,{renderer:i,arcade:e,...s})}getHit(t){if(this.owner.loadedGraphics){const i=this.owner.loadedGraphics.find((i=>i.uid===t));if(i){const t=this.layer instanceof _layers_Layer_js__WEBPACK_IMPORTED_MODULE_15__["default"]?this.layer:null,e=(0,_layers_graphics_hydratedFeatures_js__WEBPACK_IMPORTED_MODULE_16__.hydrateGraphic)(i,t);return{type:"graphic",graphic:e,layer:e.layer}}}return null}whenGraphicBounds(t,i){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(t,i):Promise.reject()}computeAttachmentOrigin(t,i){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(t,i):null}getSymbolLayerSize(t,i){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(t,i):null}maskOccludee(t){const{set:i,handle:e}=this.objectStates.acquireSet(_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_27__.Object3DState.MaskOccludee,null);return this.objectStates.setUid(i,t.uid),e}highlight(t){if(t instanceof _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_18__["default"])return P;if("number"==typeof t)return this.highlight([t]);if(t instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"])return this.highlight([t]);if(t instanceof _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__["default"]&&(t=t.toArray()),Array.isArray(t)&&t.length>0){if(t[0]instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]){const i=t.map((t=>t.uid)),{set:e,handle:s}=this.objectStates.acquireSet(_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_27__.Object3DState.Highlight,null);return this.objectStates.setUids(e,i),s}if("number"==typeof t[0]){const i=t,{set:e,handle:s}=this.objectStates.acquireSet(_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_27__.Object3DState.Highlight,null);return this.objectStates.setObjectIds(e,i),s}}return P}_setupSuspendResumeExtent(){const{scaleVisibility:t,frustumVisibility:i}=this;if(null==t&&null==i)return;const e=({computedExtent:e,extentPadding:s})=>{this._suspendResumeExtent=(0,_graphicUtils_js__WEBPACK_IMPORTED_MODULE_26__.enlargeExtent)(e,this._suspendResumeExtent,_constants_js__WEBPACK_IMPORTED_MODULE_20__.suspendResumeExtentOptimism,s),null!=t&&t.setExtent(this._suspendResumeExtent),null!=i&&i.setExtent(this._suspendResumeExtent)};this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.watch)((()=>({computedExtent:this.graphicsCore?.computedExtent,extentPadding:this.graphicsCore?.extentPadding})),(t=>e(t)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_7__.syncAndInitial))}_updateClippingExtent(){const t=this.view.clippingArea;this.graphicsCore.setClippingExtent(t,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"type",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],O.prototype,"owner",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"layer",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"view",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],O.prototype,"graphicsCore",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"scaleVisibility",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],O.prototype,"frustumVisibility",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"elevationAlignment",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"objectStates",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"scaleVisibilitySuspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],O.prototype,"frustumVisibilitySuspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"suspended",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({readOnly:!0})],O.prototype,"updating",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"loadedGraphics",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"fullOpacity",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"slicePlaneEnabled",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"drapeSourceType",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"updatePolicy",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],O.prototype,"scaleVisibilityEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)({constructOnly:!0})],O.prototype,"frustumVisibilityEnabled",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_8__.property)()],O.prototype,"initializePromise",void 0),O=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_12__.subclass)("esri.views.3d.layers.graphics.GraphicsProcessor")],O);const P=(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_4__.makeHandle)();


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2NvcmVfbGlic19yYnVzaF9Qb29sZWRSQnVzaF9qcy1ub2RlX21vZHVsZXNfYXJjZ2lzX2NvLWMwYTUxZi5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN1SixRQUFRLG1CQUFtQixrT0FBa08sVUFBVSxxREFBcUQsT0FBTyx3QkFBd0IsWUFBWSxpQkFBaUIscUJBQXFCLHdCQUF3QixFQUFFLEVBQUUsZ0NBQWdDLElBQUksS0FBSyxzQ0FBc0Msc0RBQXNELFdBQVcsWUFBWSxpQkFBaUIscUJBQXFCLG9CQUFvQixjQUFjLEVBQUUsRUFBRSxnQ0FBZ0MsSUFBSSxLQUFLLHNDQUFzQyxXQUFXLDJCQUEyQixXQUFXLFVBQVUsU0FBUyxRQUFRLHlCQUF5Qiw4QkFBOEIsdUJBQXVCLElBQUksc0JBQXNCLFlBQVksc0RBQXNELDRGQUE0RixLQUFLLCtCQUErQixtQkFBbUIsaUJBQWlCLGdEQUFnRCxrQkFBa0IsWUFBWSxVQUFVLG1EQUFtRCxRQUFRLGlDQUFpQyxVQUFVLGtCQUFrQixtQ0FBbUMsd0JBQXdCLHdCQUF3QixjQUFjLEVBQUUsb0VBQW9FLHVEQUFDLG9IQUFvSCxxR0FBcUcsWUFBWSxTQUFTLGtCQUFrQixZQUFZLHlCQUF5QixVQUFVLFFBQVEsY0FBYyxFQUFFLEVBQUUsOENBQThDLDZCQUE2QixpQkFBaUIsZ0JBQWdCLGNBQWMsdUJBQXVCLFNBQVMsOEJBQThCLDJCQUEyQixrRUFBa0Usa0JBQWtCLFdBQVcsbURBQW1ELDZCQUE2QixZQUFZLEtBQUssTUFBTSwwQkFBMEIsNkJBQTZCLFlBQVksS0FBSyxNQUFNLDBCQUEwQix5Q0FBeUMsMkJBQTJCLHdCQUF3QixLQUFLLHNDQUFzQyxFQUFFLGtCQUFrQixnQ0FBZ0MsSUFBSSxLQUFLLHdDQUF3Qyw4Q0FBOEMsbUJBQW1CLFNBQVMsZUFBZSxnQ0FBZ0MsVUFBVSw4Q0FBOEMs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QixzQ0FBc0MsdURBQUMsRUFBRSxzRkFBQyx3Q0FBd0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLGlCQUFpQiwyQ0FBMkMsdURBQUMsRUFBRSxzRkFBQywyQ0FBMkMsdURBQUMsRUFBRSxzRkFBQyxxQ0FBcUMsdURBQUMsRUFBRSxzRkFBQyxpREFBaUQsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksa0RBQWtELHVEQUFDLEVBQUUsc0ZBQUMsa0NBQWtDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxZQUFZLGdDQUFnQyx1REFBQyxFQUFFLHNGQUFDLHVDQUF1Qyx1REFBQyxFQUFFLHNGQUFDLG9DQUFvQyx1REFBQyxFQUFFLHNGQUFDLDBDQUEwQyx1REFBQyxFQUFFLHNGQUFDLDBDQUEwQyx1REFBQyxFQUFFLHNGQUFDLHFDQUFxQyx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGdEQUFnRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGtEQUFrRCx1REFBQyxFQUFFLHNGQUFDLDhDQUE4Qyx1REFBQyxFQUFFLHVGQUFDLHdEQUF3RCxRQUFRLGdFQUFDLEdBQWtDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2NvcmUvbGlicy9yYnVzaC9Qb29sZWRSQnVzaC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL2NlbnRyb2lkLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9vcHRpbWl6ZWRGZWF0dXJlUXVlcnlFbmdpbmVBZGFwdGVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8zZC9sYXllcnMvZ3JhcGhpY3MvR3JhcGhpY3NQcm9jZXNzb3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpbmRleE9mIGFzIHQsUG9zaXRpb25IaW50IGFzIGl9ZnJvbVwiLi4vLi4vYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBuIGZyb21cIi4uLy4uL1Bvb2xlZEFycmF5LmpzXCI7aW1wb3J0e3EgYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvcXVpY2tzZWxlY3QuanNcIjtjbGFzcyBze2NvbnN0cnVjdG9yKHQ9OSxpKXt0aGlzLl9jb21wYXJlTWluWD1vLHRoaXMuX2NvbXBhcmVNaW5ZPWwsdGhpcy5fdG9CQm94PXQ9PnQsdGhpcy5fbWF4RW50cmllcz1NYXRoLm1heCg0LHR8fDkpLHRoaXMuX21pbkVudHJpZXM9TWF0aC5tYXgoMixNYXRoLmNlaWwoLjQqdGhpcy5fbWF4RW50cmllcykpLGkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpP3RoaXMuX3RvQkJveD1pOnRoaXMuX2luaXRGb3JtYXQoaSkpLHRoaXMuY2xlYXIoKX1kZXN0cm95KCl7dGhpcy5jbGVhcigpLHAucHJ1bmUoKSxnLnBydW5lKCksTS5wcnVuZSgpLFgucHJ1bmUoKX1hbGwodCl7dGhpcy5fYWxsKHRoaXMuX2RhdGEsdCl9c2VhcmNoKHQsaSl7bGV0IG49dGhpcy5fZGF0YTtjb25zdCBlPXRoaXMuX3RvQkJveDtpZih4KHQsbikpZm9yKHAuY2xlYXIoKTtuOyl7Zm9yKGxldCBzPTAsaD1uLmNoaWxkcmVuLmxlbmd0aDtzPGg7cysrKXtjb25zdCBoPW4uY2hpbGRyZW5bc10sYT1uLmxlYWY/ZShoKTpoO3godCxhKSYmKG4ubGVhZj9pKGgpOl8odCxhKT90aGlzLl9hbGwoaCxpKTpwLnB1c2goaCkpfW49cC5wb3AoKX19Y29sbGlkZXModCl7bGV0IGk9dGhpcy5fZGF0YTtjb25zdCBuPXRoaXMuX3RvQkJveDtpZigheCh0LGkpKXJldHVybiExO2ZvcihwLmNsZWFyKCk7aTspe2ZvcihsZXQgZT0wLHM9aS5jaGlsZHJlbi5sZW5ndGg7ZTxzO2UrKyl7Y29uc3Qgcz1pLmNoaWxkcmVuW2VdLGg9aS5sZWFmP24ocyk6cztpZih4KHQsaCkpe2lmKGkubGVhZnx8Xyh0LGgpKXJldHVybiEwO3AucHVzaChzKX19aT1wLnBvcCgpfXJldHVybiExfWxvYWQodCl7aWYoIXQubGVuZ3RoKXJldHVybiB0aGlzO2lmKHQubGVuZ3RoPHRoaXMuX21pbkVudHJpZXMpe2ZvcihsZXQgaT0wLG49dC5sZW5ndGg7aTxuO2krKyl0aGlzLmluc2VydCh0W2ldKTtyZXR1cm4gdGhpc31sZXQgaT10aGlzLl9idWlsZCh0LnNsaWNlKDAsdC5sZW5ndGgpLDAsdC5sZW5ndGgtMSwwKTtpZih0aGlzLl9kYXRhLmNoaWxkcmVuLmxlbmd0aClpZih0aGlzLl9kYXRhLmhlaWdodD09PWkuaGVpZ2h0KXRoaXMuX3NwbGl0Um9vdCh0aGlzLl9kYXRhLGkpO2Vsc2V7aWYodGhpcy5fZGF0YS5oZWlnaHQ8aS5oZWlnaHQpe2NvbnN0IHQ9dGhpcy5fZGF0YTt0aGlzLl9kYXRhPWksaT10fXRoaXMuX2luc2VydChpLHRoaXMuX2RhdGEuaGVpZ2h0LWkuaGVpZ2h0LTEsITApfWVsc2UgdGhpcy5fZGF0YT1pO3JldHVybiB0aGlzfWluc2VydCh0KXtyZXR1cm4gdCYmdGhpcy5faW5zZXJ0KHQsdGhpcy5fZGF0YS5oZWlnaHQtMSksdGhpc31jbGVhcigpe3JldHVybiB0aGlzLl9kYXRhPW5ldyB3KFtdKSx0aGlzfXJlbW92ZShpKXtpZighaSlyZXR1cm4gdGhpcztsZXQgbixlPXRoaXMuX2RhdGEscz1udWxsLGg9MCxhPSExO2NvbnN0IHI9dGhpcy5fdG9CQm94KGkpO2ZvcihNLmNsZWFyKCksWC5jbGVhcigpO2V8fE0ubGVuZ3RoPjA7KXtpZihlfHwoZT1NLnBvcCgpLHM9TS5kYXRhW00ubGVuZ3RoLTFdLGg9WC5wb3AoKT8/MCxhPSEwKSxlLmxlYWYmJihuPXQoZS5jaGlsZHJlbixpLGUuY2hpbGRyZW4ubGVuZ3RoLGUuaW5kZXhIaW50KSwtMSE9PW4pKXJldHVybiBlLmNoaWxkcmVuLnNwbGljZShuLDEpLE0ucHVzaChlKSx0aGlzLl9jb25kZW5zZShNKSx0aGlzO2F8fGUubGVhZnx8IV8oZSxyKT9zPyhoKyssZT1zLmNoaWxkcmVuW2hdLGE9ITEpOmU9bnVsbDooTS5wdXNoKGUpLFgucHVzaChoKSxoPTAscz1lLGU9ZS5jaGlsZHJlblswXSl9cmV0dXJuIHRoaXN9dG9KU09OKCl7cmV0dXJuIHRoaXMuX2RhdGF9ZnJvbUpTT04odCl7cmV0dXJuIHRoaXMuX2RhdGE9dCx0aGlzfV9hbGwodCxpKXtsZXQgbj10O2ZvcihnLmNsZWFyKCk7bjspe2lmKCEwPT09bi5sZWFmKWZvcihjb25zdCB0IG9mIG4uY2hpbGRyZW4paSh0KTtlbHNlIGcucHVzaEFycmF5KG4uY2hpbGRyZW4pO249Zy5wb3AoKT8/bnVsbH19X2J1aWxkKHQsaSxuLGUpe2NvbnN0IHM9bi1pKzE7bGV0IGE9dGhpcy5fbWF4RW50cmllcztpZihzPD1hKXtjb25zdCBlPW5ldyB3KHQuc2xpY2UoaSxuKzEpKTtyZXR1cm4gaChlLHRoaXMuX3RvQkJveCksZX1lfHwoZT1NYXRoLmNlaWwoTWF0aC5sb2cocykvTWF0aC5sb2coYSkpLGE9TWF0aC5jZWlsKHMvYSoqKGUtMSkpKTtjb25zdCByPW5ldyBiKFtdKTtyLmhlaWdodD1lO2NvbnN0IG89TWF0aC5jZWlsKHMvYSksbD1vKk1hdGguY2VpbChNYXRoLnNxcnQoYSkpO2YodCxpLG4sbCx0aGlzLl9jb21wYXJlTWluWCk7Zm9yKGxldCBoPWk7aDw9bjtoKz1sKXtjb25zdCBpPU1hdGgubWluKGgrbC0xLG4pO2YodCxoLGksbyx0aGlzLl9jb21wYXJlTWluWSk7Zm9yKGxldCBuPWg7bjw9aTtuKz1vKXtjb25zdCBzPU1hdGgubWluKG4rby0xLGkpO3IuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZCh0LG4scyxlLTEpKX19cmV0dXJuIGgocix0aGlzLl90b0JCb3gpLHJ9X2Nob29zZVN1YnRyZWUodCxpLG4sZSl7Zm9yKDtlLnB1c2goaSksITAhPT1pLmxlYWYmJmUubGVuZ3RoLTEhPT1uOyl7bGV0IG4sZT0xLzAscz0xLzA7Zm9yKGxldCBoPTAsYT1pLmNoaWxkcmVuLmxlbmd0aDtoPGE7aCsrKXtjb25zdCBhPWkuY2hpbGRyZW5baF0scj1jKGEpLG89ZCh0LGEpLXI7bzxzPyhzPW8sZT1yPGU/cjplLG49YSk6bz09PXMmJnI8ZSYmKGU9cixuPWEpfWk9bnx8aS5jaGlsZHJlblswXX1yZXR1cm4gaX1faW5zZXJ0KHQsaSxuKXtjb25zdCBlPXRoaXMuX3RvQkJveCxzPW4/dDplKHQpO00uY2xlYXIoKTtjb25zdCBoPXRoaXMuX2Nob29zZVN1YnRyZWUocyx0aGlzLl9kYXRhLGksTSk7Zm9yKGguY2hpbGRyZW4ucHVzaCh0KSxyKGgscyk7aT49MCYmTS5kYXRhW2ldLmNoaWxkcmVuLmxlbmd0aD50aGlzLl9tYXhFbnRyaWVzOyl0aGlzLl9zcGxpdChNLGkpLGktLTt0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMocyxNLGkpfV9zcGxpdCh0LGkpe2NvbnN0IG49dC5kYXRhW2ldLGU9bi5jaGlsZHJlbi5sZW5ndGgscz10aGlzLl9taW5FbnRyaWVzO3RoaXMuX2Nob29zZVNwbGl0QXhpcyhuLHMsZSk7Y29uc3QgYT10aGlzLl9jaG9vc2VTcGxpdEluZGV4KG4scyxlKTtpZighYSlyZXR1cm4gdm9pZCBjb25zb2xlLmxvZyhcIiAgRXJyb3I6IGFzc2VydGlvbiBmYWlsZWQgYXQgUG9vbGVkUkJ1c2guX3NwbGl0OiBubyB2YWxpZCBzcGxpdCBpbmRleFwiKTtjb25zdCByPW4uY2hpbGRyZW4uc3BsaWNlKGEsbi5jaGlsZHJlbi5sZW5ndGgtYSksbz1uLmxlYWY/bmV3IHcocik6bmV3IGIocik7by5oZWlnaHQ9bi5oZWlnaHQsaChuLHRoaXMuX3RvQkJveCksaChvLHRoaXMuX3RvQkJveCksaT90LmRhdGFbaS0xXS5jaGlsZHJlbi5wdXNoKG8pOnRoaXMuX3NwbGl0Um9vdChuLG8pfV9zcGxpdFJvb3QodCxpKXt0aGlzLl9kYXRhPW5ldyBiKFt0LGldKSx0aGlzLl9kYXRhLmhlaWdodD10LmhlaWdodCsxLGgodGhpcy5fZGF0YSx0aGlzLl90b0JCb3gpfV9jaG9vc2VTcGxpdEluZGV4KHQsaSxuKXtsZXQgZSxzLGg7ZT1zPTEvMDtmb3IobGV0IHI9aTtyPD1uLWk7cisrKXtjb25zdCBpPWEodCwwLHIsdGhpcy5fdG9CQm94KSxvPWEodCxyLG4sdGhpcy5fdG9CQm94KSxsPXUoaSxvKSxtPWMoaSkrYyhvKTtsPGU/KGU9bCxoPXIscz1tPHM/bTpzKTpsPT09ZSYmbTxzJiYocz1tLGg9cil9cmV0dXJuIGh9X2Nob29zZVNwbGl0QXhpcyh0LGksbil7Y29uc3QgZT10LmxlYWY/dGhpcy5fY29tcGFyZU1pblg6byxzPXQubGVhZj90aGlzLl9jb21wYXJlTWluWTpsO3RoaXMuX2FsbERpc3RNYXJnaW4odCxpLG4sZSk8dGhpcy5fYWxsRGlzdE1hcmdpbih0LGksbixzKSYmdC5jaGlsZHJlbi5zb3J0KGUpfV9hbGxEaXN0TWFyZ2luKHQsaSxuLGUpe3QuY2hpbGRyZW4uc29ydChlKTtjb25zdCBzPXRoaXMuX3RvQkJveCxoPWEodCwwLGkscyksbz1hKHQsbi1pLG4scyk7bGV0IGw9bShoKSttKG8pO2ZvcihsZXQgYT1pO2E8bi1pO2ErKyl7Y29uc3QgaT10LmNoaWxkcmVuW2FdO3IoaCx0LmxlYWY/cyhpKTppKSxsKz1tKGgpfWZvcihsZXQgYT1uLWktMTthPj1pO2EtLSl7Y29uc3QgaT10LmNoaWxkcmVuW2FdO3Iobyx0LmxlYWY/cyhpKTppKSxsKz1tKG8pfXJldHVybiBsfV9hZGp1c3RQYXJlbnRCQm94ZXModCxpLG4pe2ZvcihsZXQgZT1uO2U+PTA7ZS0tKXIoaS5kYXRhW2VdLHQpfV9jb25kZW5zZShpKXtmb3IobGV0IG49aS5sZW5ndGgtMTtuPj0wO24tLSl7Y29uc3QgZT1pLmRhdGFbbl07aWYoMD09PWUuY2hpbGRyZW4ubGVuZ3RoKWlmKG4+MCl7Y29uc3Qgcz1pLmRhdGFbbi0xXSxoPXMuY2hpbGRyZW47aC5zcGxpY2UodChoLGUsaC5sZW5ndGgscy5pbmRleEhpbnQpLDEpfWVsc2UgdGhpcy5jbGVhcigpO2Vsc2UgaChlLHRoaXMuX3RvQkJveCl9fV9pbml0Rm9ybWF0KHQpe2NvbnN0IGk9W1wicmV0dXJuIGFcIixcIiAtIGJcIixcIjtcIl07dGhpcy5fY29tcGFyZU1pblg9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGkuam9pbih0WzBdKSksdGhpcy5fY29tcGFyZU1pblk9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGkuam9pbih0WzFdKSksdGhpcy5fdG9CQm94PW5ldyBGdW5jdGlvbihcImFcIixcInJldHVybiB7bWluWDogYVwiK3RbMF0rXCIsIG1pblk6IGFcIit0WzFdK1wiLCBtYXhYOiBhXCIrdFsyXStcIiwgbWF4WTogYVwiK3RbM10rXCJ9O1wiKX19ZnVuY3Rpb24gaCh0LGkpe2EodCwwLHQuY2hpbGRyZW4ubGVuZ3RoLGksdCl9ZnVuY3Rpb24gYSh0LGksbixlLHMpe3N8fChzPW5ldyB3KFtdKSkscy5taW5YPTEvMCxzLm1pblk9MS8wLHMubWF4WD0tMS8wLHMubWF4WT0tMS8wO2ZvcihsZXQgaCxhPWk7YTxuO2ErKyloPXQuY2hpbGRyZW5bYV0scihzLHQubGVhZj9lKGgpOmgpO3JldHVybiBzfWZ1bmN0aW9uIHIodCxpKXt0Lm1pblg9TWF0aC5taW4odC5taW5YLGkubWluWCksdC5taW5ZPU1hdGgubWluKHQubWluWSxpLm1pblkpLHQubWF4WD1NYXRoLm1heCh0Lm1heFgsaS5tYXhYKSx0Lm1heFk9TWF0aC5tYXgodC5tYXhZLGkubWF4WSl9ZnVuY3Rpb24gbyh0LGkpe3JldHVybiB0Lm1pblgtaS5taW5YfWZ1bmN0aW9uIGwodCxpKXtyZXR1cm4gdC5taW5ZLWkubWluWX1mdW5jdGlvbiBjKHQpe3JldHVybih0Lm1heFgtdC5taW5YKSoodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gdC5tYXhYLXQubWluWCsodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gZCh0LGkpe3JldHVybihNYXRoLm1heChpLm1heFgsdC5tYXhYKS1NYXRoLm1pbihpLm1pblgsdC5taW5YKSkqKE1hdGgubWF4KGkubWF4WSx0Lm1heFkpLU1hdGgubWluKGkubWluWSx0Lm1pblkpKX1mdW5jdGlvbiB1KHQsaSl7Y29uc3Qgbj1NYXRoLm1heCh0Lm1pblgsaS5taW5YKSxlPU1hdGgubWF4KHQubWluWSxpLm1pblkpLHM9TWF0aC5taW4odC5tYXhYLGkubWF4WCksaD1NYXRoLm1pbih0Lm1heFksaS5tYXhZKTtyZXR1cm4gTWF0aC5tYXgoMCxzLW4pKk1hdGgubWF4KDAsaC1lKX1mdW5jdGlvbiBfKHQsaSl7cmV0dXJuIHQubWluWDw9aS5taW5YJiZ0Lm1pblk8PWkubWluWSYmaS5tYXhYPD10Lm1heFgmJmkubWF4WTw9dC5tYXhZfWZ1bmN0aW9uIHgodCxpKXtyZXR1cm4gaS5taW5YPD10Lm1heFgmJmkubWluWTw9dC5tYXhZJiZpLm1heFg+PXQubWluWCYmaS5tYXhZPj10Lm1pbll9ZnVuY3Rpb24gZih0LGksbixzLGgpe2NvbnN0IGE9W2ksbl07Zm9yKDthLmxlbmd0aDspe2NvbnN0IGk9YS5wb3AoKSxuPWEucG9wKCk7aWYoaS1uPD1zKWNvbnRpbnVlO2NvbnN0IHI9bitNYXRoLmNlaWwoKGktbikvcy8yKSpzO2UodCxyLG4saSxoKSxhLnB1c2gobixyLHIsaSl9fWNvbnN0IHA9bmV3IG4sZz1uZXcgbixNPW5ldyBuLFg9bmV3IG4oe2RlYWxsb2NhdG9yOnZvaWQgMH0pO2NsYXNzIFl7Y29uc3RydWN0b3IoKXt0aGlzLm1pblg9MS8wLHRoaXMubWluWT0xLzAsdGhpcy5tYXhYPS0xLzAsdGhpcy5tYXhZPS0xLzB9fWNsYXNzIEIgZXh0ZW5kcyBZe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmhlaWdodD0xLHRoaXMuaW5kZXhIaW50PW5ldyBpfX1jbGFzcyB3IGV4dGVuZHMgQntjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMuY2hpbGRyZW49dCx0aGlzLmxlYWY9ITB9fWNsYXNzIGIgZXh0ZW5kcyBCe2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5jaGlsZHJlbj10LHRoaXMubGVhZj0hMX19ZXhwb3J0e1kgYXMgQkJveCxzIGFzIFBvb2xlZFJCdXNofTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0KHQsbil7cmV0dXJuIHQ/bj80OjM6bj8zOjJ9ZnVuY3Rpb24gbihuLEksbyx1LE4pe2lmKCFJPy5sZW5ndGhzLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBsPVwidXBwZXJMZWZ0XCI9PT1OPy5vcmlnaW5Qb3NpdGlvbj8tMToxO24ubGVuZ3Rocy5sZW5ndGgmJihuLmxlbmd0aHMubGVuZ3RoPTApLG4uY29vcmRzLmxlbmd0aCYmKG4uY29vcmRzLmxlbmd0aD0wKTtjb25zdCBzPW4uY29vcmRzLGM9W10sZj1vP1tOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV06W051bWJlci5QT1NJVElWRV9JTkZJTklUWSxOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0se2xlbmd0aHM6VCxjb29yZHM6aX09SSxoPXQobyx1KTtsZXQgZz0wO2Zvcihjb25zdCB0IG9mIFQpe2NvbnN0IG49ZShmLGksZyx0LG8sdSxsKTtuJiZjLnB1c2gobiksZys9dCpofWlmKGMuc29ydCgoKHQsbik9PntsZXQgZT1sKnRbMl0tbCpuWzJdO3JldHVybiAwPT09ZSYmbyYmKGU9dFs0XS1uWzRdKSxlfSkpLGMubGVuZ3RoKXtsZXQgdD02KmNbMF1bMl07c1swXT1jWzBdWzBdL3Qsc1sxXT1jWzBdWzFdL3QsbyYmKHQ9NipjWzBdWzRdLHNbMl09MCE9PXQ/Y1swXVszXS90OjApLChzWzBdPGZbMF18fHNbMF0+ZlsxXXx8c1sxXTxmWzJdfHxzWzFdPmZbM118fG8mJihzWzJdPGZbNF18fHNbMl0+Zls1XSkpJiYocy5sZW5ndGg9MCl9aWYoIXMubGVuZ3RoKXtjb25zdCB0PUkubGVuZ3Roc1swXT9yKGksMCxUWzBdLG8sdSk6bnVsbDtpZighdClyZXR1cm4gbnVsbDtzWzBdPXRbMF0sc1sxXT10WzFdLG8mJnQubGVuZ3RoPjImJihzWzJdPXRbMl0pfXJldHVybiBufWZ1bmN0aW9uIGUobixlLHIsSSxvLHUsTj0xKXtjb25zdCBsPXQobyx1KTtsZXQgcz1yLGM9citsLGY9MCxUPTAsaT0wLGg9MCxnPTA7Zm9yKGxldCB0PTAsYj1JLTE7dDxiO3QrKyxzKz1sLGMrPWwpe2NvbnN0IHQ9ZVtzXSxyPWVbcysxXSxJPWVbcysyXSx1PWVbY10sTj1lW2MrMV0sbD1lW2MrMl07bGV0IEU9dCpOLXUqcjtoKz1FLGYrPSh0K3UpKkUsVCs9KHIrTikqRSxvJiYoRT10KmwtdSpJLGkrPShJK2wpKkUsZys9RSksdDxuWzBdJiYoblswXT10KSx0Pm5bMV0mJihuWzFdPXQpLHI8blsyXSYmKG5bMl09cikscj5uWzNdJiYoblszXT1yKSxvJiYoSTxuWzRdJiYobls0XT1JKSxJPm5bNV0mJihuWzVdPUkpKX1pZihoKk4+MCYmKGgqPS0xKSxnKk4+MCYmKGcqPS0xKSwhaClyZXR1cm4gbnVsbDtjb25zdCBFPVtmLFQsLjUqaF07cmV0dXJuIG8mJihFWzNdPWksRVs0XT0uNSpnKSxFfWZ1bmN0aW9uIHIobixlLHIsbCxzKXtjb25zdCBjPXQobCxzKTtsZXQgZj1lLFQ9ZStjLGk9MCxoPTAsZz0wLEU9MDtmb3IobGV0IHQ9MCxiPXItMTt0PGI7dCsrLGYrPWMsVCs9Yyl7Y29uc3QgdD1uW2ZdLGU9bltmKzFdLHI9bltmKzJdLHM9bltUXSxjPW5bVCsxXSxiPW5bVCsyXSxtPWw/byh0LGUscixzLGMsYik6SSh0LGUscyxjKTtpZihtKWlmKGkrPW0sbCl7Y29uc3Qgbj1OKHQsZSxyLHMsYyxiKTtoKz1tKm5bMF0sZys9bSpuWzFdLEUrPW0qblsyXX1lbHNle2NvbnN0IG49dSh0LGUscyxjKTtoKz1tKm5bMF0sZys9bSpuWzFdfX1yZXR1cm4gaT4wP2w/W2gvaSxnL2ksRS9pXTpbaC9pLGcvaV06cj4wP2w/W25bZV0sbltlKzFdLG5bZSsyXV06W25bZV0sbltlKzFdXTpudWxsfWZ1bmN0aW9uIEkodCxuLGUscil7Y29uc3QgST1lLXQsbz1yLW47cmV0dXJuIE1hdGguc3FydChJKkkrbypvKX1mdW5jdGlvbiBvKHQsbixlLHIsSSxvKXtjb25zdCB1PXItdCxOPUktbixsPW8tZTtyZXR1cm4gTWF0aC5zcXJ0KHUqdStOKk4rbCpsKX1mdW5jdGlvbiB1KHQsbixlLHIpe3JldHVyblt0Ky41KihlLXQpLG4rLjUqKHItbildfWZ1bmN0aW9uIE4odCxuLGUscixJLG8pe3JldHVyblt0Ky41KihyLXQpLG4rLjUqKEktbiksZSsuNSooby1lKV19ZXhwb3J0e24gYXMgZ2V0Q2VudHJvaWRPcHRpbWl6ZWRHZW9tZXRyeSxyIGFzIGxpbmVDZW50cm9pZH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2dldENlbnRyb2lkT3B0aW1pemVkR2VvbWV0cnkgYXMgdH1mcm9tXCIuLi9jZW50cm9pZC5qc1wiO2ltcG9ydHtPcHRpbWl6ZWRGZWF0dXJlIGFzIGV9ZnJvbVwiLi4vT3B0aW1pemVkRmVhdHVyZS5qc1wiO2ltcG9ydCByIGZyb21cIi4uL09wdGltaXplZEdlb21ldHJ5LmpzXCI7Y29uc3Qgbz17Z2V0T2JqZWN0SWQ6dD0+dC5vYmplY3RJZCxnZXRBdHRyaWJ1dGVzOnQ9PnQuYXR0cmlidXRlcyxnZXRBdHRyaWJ1dGU6KHQsZSk9PnQuYXR0cmlidXRlc1tlXSxjbG9uZVdpdGhHZW9tZXRyeToodCxyKT0+bmV3IGUocix0LmF0dHJpYnV0ZXMsbnVsbCx0Lm9iamVjdElkKSxnZXRHZW9tZXRyeTp0PT50Lmdlb21ldHJ5LGdldENlbnRyb2lkOihlLG8pPT4obnVsbD09ZS5jZW50cm9pZCYmKGUuY2VudHJvaWQ9dChuZXcgcixlLmdlb21ldHJ5LG8uaGFzWixvLmhhc00pKSxlLmNlbnRyb2lkKX07ZXhwb3J0e28gYXMgb3B0aW1pemVkRmVhdHVyZVF1ZXJ5RW5naW5lQWRhcHRlcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgdH1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IGkgZnJvbVwiLi4vLi4vLi4vLi4vR3JhcGhpYy5qc1wiO2ltcG9ydCBlIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvQWNjZXNzb3IuanNcIjtpbXBvcnQgcyBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0NvbGxlY3Rpb24uanNcIjtpbXBvcnR7bWFrZUhhbmRsZSBhcyByfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFuZGxlVXRpbHMuanNcIjtpbXBvcnR7ZGVzdHJveU1heWJlIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtpc0Fib3J0RXJyb3IgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHt3YXRjaCBhcyBhLHN5bmMgYXMgbCxzeW5jQW5kSW5pdGlhbCBhcyBwfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaH1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0e2RpZmYgYXMgdX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kaWZmVXRpbHMuanNcIjtpbXBvcnR7VXBkYXRpbmdIYW5kbGVzIGFzIGR9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9zdXBwb3J0L1VwZGF0aW5nSGFuZGxlcy5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9MYXllci5qc1wiO2ltcG9ydHtoeWRyYXRlR3JhcGhpYyBhcyBnfWZyb21cIi4uLy4uLy4uLy4uL2xheWVycy9ncmFwaGljcy9oeWRyYXRlZEZlYXR1cmVzLmpzXCI7aW1wb3J0e2dldFJlbmRlcmluZ0luZm8gYXMgbSxnZXRSZW5kZXJpbmdJbmZvQXN5bmMgYXMgZn1mcm9tXCIuLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9yZW5kZXJpbmdJbmZvVXRpbHMuanNcIjtpbXBvcnQgYiBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvUXVlcnkuanNcIjtpbXBvcnR7RHJhcGVTb3VyY2VUeXBlIGFzIEN9ZnJvbVwiLi4vaW50ZXJmYWNlcy5qc1wiO2ltcG9ydHtzdXNwZW5kUmVzdW1lRXh0ZW50T3B0aW1pc20gYXMgan1mcm9tXCIuL2NvbnN0YW50cy5qc1wiO2ltcG9ydHtHcmFwaGljczNEQ29yZSBhcyB3fWZyb21cIi4vR3JhcGhpY3MzRENvcmUuanNcIjtpbXBvcnR7R3JhcGhpY3MzREVsZXZhdGlvbkFsaWdubWVudCBhcyBTfWZyb21cIi4vR3JhcGhpY3MzREVsZXZhdGlvbkFsaWdubWVudC5qc1wiO2ltcG9ydHtHcmFwaGljczNERnJ1c3R1bVZpc2liaWxpdHkgYXMgVn1mcm9tXCIuL0dyYXBoaWNzM0RGcnVzdHVtVmlzaWJpbGl0eS5qc1wiO2ltcG9ydHtHcmFwaGljczNET2JqZWN0U3RhdGVzIGFzIHZ9ZnJvbVwiLi9HcmFwaGljczNET2JqZWN0U3RhdGVzLmpzXCI7aW1wb3J0e0dyYXBoaWNzM0RTY2FsZVZpc2liaWxpdHkgYXMgRX1mcm9tXCIuL0dyYXBoaWNzM0RTY2FsZVZpc2liaWxpdHkuanNcIjtpbXBvcnR7ZW5sYXJnZUV4dGVudCBhcyBHfWZyb21cIi4vZ3JhcGhpY1V0aWxzLmpzXCI7aW1wb3J0e09iamVjdDNEU3RhdGUgYXMgX31mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL2Jhc2ljSW50ZXJmYWNlcy5qc1wiO2ltcG9ydHtVcGRhdGVQb2xpY3kgYXMgeH1mcm9tXCIuLi8uLi93ZWJnbC1lbmdpbmUvbGliL1VwZGF0ZVBvbGljeS5qc1wiO2xldCBPPWNsYXNzIGV4dGVuZHMgZXtjb25zdHJ1Y3Rvcih0KXtzdXBlcih0KSx0aGlzLnR5cGU9XCJncmFwaGljcy0zZFwiLHRoaXMuZ3JhcGhpY3NDb3JlPW51bGwsdGhpcy5kcmFwZVNvdXJjZVR5cGU9Qy5GZWF0dXJlcyx0aGlzLnNjYWxlVmlzaWJpbGl0eUVuYWJsZWQ9ITEsdGhpcy5mcnVzdHVtVmlzaWJpbGl0eUVuYWJsZWQ9ITEsdGhpcy5fc3VzcGVuZFJlc3VtZUV4dGVudD1udWxsLHRoaXMuX3VwZGF0aW5nSGFuZGxlcz1uZXcgZH1pbml0aWFsaXplKCl7Y29uc3R7bGF5ZXI6dH09dGhpcyxpPVwiZWZmZWN0aXZlU2NhbGVSYW5nZVwiaW4gdD90Om51bGwsZT10aGlzLnNjYWxlVmlzaWJpbGl0eUVuYWJsZWQmJm51bGwhPWkscz1uZXcgdyh7b3duZXI6dGhpcyxsYXllcjp0aGlzLm93bmVyLmxheWVyLHByZWZlcnJlZFVwZGF0ZVBvbGljeTp4LlNZTkMsZ3JhcGhpY1N5bWJvbFN1cHBvcnRlZDohMCxjb21wb25lbnRGYWN0b3JpZXM6e2VsZXZhdGlvbkFsaWdubWVudDoodCxpKT0+bmV3IFMoe2dyYXBoaWNzQ29yZU93bmVyOnRoaXMsZ3JhcGhpY3NDb3JlOnQscXVlcnlHcmFwaGljVUlEc0luRXh0ZW50OmksZWxldmF0aW9uUHJvdmlkZXI6dGhpcy52aWV3LmVsZXZhdGlvblByb3ZpZGVyfSksc2NhbGVWaXNpYmlsaXR5OmU/KHQsZSk9Pm5ldyBFKHtncmFwaGljc0NvcmVPd25lcjp0aGlzLGxheWVyOmkscXVlcnlHcmFwaGljVUlEc0luRXh0ZW50OmUsZ3JhcGhpY3NDb3JlOnQsYmFzZW1hcFRlcnJhaW46dGhpcy5vd25lci52aWV3LmJhc2VtYXBUZXJyYWlufSk6bnVsbCxvYmplY3RTdGF0ZXM6dD0+bmV3IHYodCl9fSk7aWYodGhpcy5fc2V0KFwiZ3JhcGhpY3NDb3JlXCIscyksdGhpcy5mcnVzdHVtVmlzaWJpbGl0eUVuYWJsZWQmJnRoaXMuX3NldChcImZydXN0dW1WaXNpYmlsaXR5XCIsbmV3IFYoe2dyYXBoaWNzQ29yZU93bmVyOnRoaXN9KSksXCJmdWxsT3BhY2l0eVwiaW4gdGhpcy5vd25lcil7Y29uc3QgdD10aGlzLm93bmVyO3RoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT50LmZ1bGxPcGFjaXR5KSwoKCk9PnRoaXMuZ3JhcGhpY3NDb3JlLm9wYWNpdHlDaGFuZ2UoKSkpfWlmKFwiZWxldmF0aW9uSW5mb1wiaW4gdCl7Y29uc3QgaT10O3RoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT5pLmVsZXZhdGlvbkluZm8pLCgodCxpKT0+e3UodCxpKSYmdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5ncmFwaGljc0NvcmUuZWxldmF0aW9uSW5mb0NoYW5nZSgpKX0pKX10aGlzLl9zZXQoXCJpbml0aWFsaXplUHJvbWlzZVwiLHRoaXMuX2luaXRpYWxpemVBc3luYygpKSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLmluaXRpYWxpemVQcm9taXNlKX1hc3luYyBfaW5pdGlhbGl6ZUFzeW5jKCl7dHJ5e2F3YWl0IHRoaXMuZ3JhcGhpY3NDb3JlLmluaXRpYWxpemVQcm9taXNlfWNhdGNoKHQpe2lmKG8odCkpcmV0dXJuO3Rocm93IHR9dGhpcy5kZXN0cm95ZWR8fCh0aGlzLmFkZEhhbmRsZXMoYSgoKCk9PnRoaXMudmlldy5jbGlwcGluZ0FyZWEpLCgoKT0+dGhpcy5fdXBkYXRlQ2xpcHBpbmdFeHRlbnQoKSksbCkpLHRoaXMuX3VwZGF0ZUNsaXBwaW5nRXh0ZW50KCksdGhpcy5fc2V0dXBTdXNwZW5kUmVzdW1lRXh0ZW50KCksdGhpcy5ncmFwaGljc0NvcmUuc3RhcnRDcmVhdGVHcmFwaGljcygpKX1kZXN0cm95KCl7dGhpcy5fdXBkYXRpbmdIYW5kbGVzLmRlc3Ryb3koKSx0aGlzLl9zZXQoXCJmcnVzdHVtVmlzaWJpbGl0eVwiLG4odGhpcy5mcnVzdHVtVmlzaWJpbGl0eSkpLHRoaXMuX3NldChcImdyYXBoaWNzQ29yZVwiLG4odGhpcy5ncmFwaGljc0NvcmUpKX1nZXQgbGF5ZXIoKXtyZXR1cm4gdGhpcy5vd25lci5sYXllcn1nZXQgdmlldygpe3JldHVybiB0aGlzLm93bmVyLnZpZXd9Z2V0IHNjYWxlVmlzaWJpbGl0eSgpe3JldHVybiB0aGlzLmdyYXBoaWNzQ29yZT8uc2NhbGVWaXNpYmlsaXR5fWdldCBlbGV2YXRpb25BbGlnbm1lbnQoKXtyZXR1cm4gdGhpcy5ncmFwaGljc0NvcmU/LmVsZXZhdGlvbkFsaWdubWVudH1nZXQgb2JqZWN0U3RhdGVzKCl7cmV0dXJuIHRoaXMuZ3JhcGhpY3NDb3JlPy5vYmplY3RTdGF0ZXN9Z2V0IHNjYWxlVmlzaWJpbGl0eVN1c3BlbmRlZCgpe3JldHVybiEobnVsbD09dGhpcy5zY2FsZVZpc2liaWxpdHl8fCF0aGlzLnNjYWxlVmlzaWJpbGl0eS5zdXNwZW5kZWQpfWdldCBmcnVzdHVtVmlzaWJpbGl0eVN1c3BlbmRlZCgpe3JldHVybiBudWxsIT10aGlzLmZydXN0dW1WaXNpYmlsaXR5JiZ0aGlzLmZydXN0dW1WaXNpYmlsaXR5LnN1c3BlbmRlZH1nZXQgc3VzcGVuZGVkKCl7cmV0dXJuIHRoaXMub3duZXIuc3VzcGVuZGVkPz8hMX1nZXQgdXBkYXRpbmcoKXtyZXR1cm4hISh0aGlzLmdyYXBoaWNzQ29yZT8udXBkYXRpbmd8fG51bGwhPXRoaXMuc2NhbGVWaXNpYmlsaXR5JiZ0aGlzLnNjYWxlVmlzaWJpbGl0eS51cGRhdGluZ3x8bnVsbCE9dGhpcy5mcnVzdHVtVmlzaWJpbGl0eSYmdGhpcy5mcnVzdHVtVmlzaWJpbGl0eS51cGRhdGluZ3x8dGhpcy5fdXBkYXRpbmdIYW5kbGVzLnVwZGF0aW5nKX1nZXQgZ3JhcGhpY3MzREdyYXBoaWNzKCl7cmV0dXJuIHRoaXMuZ3JhcGhpY3NDb3JlPy5ncmFwaGljczNER3JhcGhpY3N9Z2V0IGdyYXBoaWNzM0RHcmFwaGljc0J5T2JqZWN0SUQoKXtyZXR1cm4gdGhpcy5ncmFwaGljc0NvcmU/LmdyYXBoaWNzM0RHcmFwaGljc0J5T2JqZWN0SUR9Z2V0IGxvYWRlZEdyYXBoaWNzKCl7cmV0dXJuIHRoaXMub3duZXIubG9hZGVkR3JhcGhpY3N9Z2V0IGZ1bGxPcGFjaXR5KCl7cmV0dXJuIHRoaXMub3duZXIuZnVsbE9wYWNpdHk/PzF9Z2V0IHNsaWNlUGxhbmVFbmFibGVkKCl7cmV0dXJuIHRoaXMub3duZXIuc2xpY2VQbGFuZUVuYWJsZWR9Z2V0IHVwZGF0ZVBvbGljeSgpe3JldHVybiB0aGlzLm93bmVyLnVwZGF0ZVBvbGljeX1ub3RpZnlHcmFwaGljR2VvbWV0cnlDaGFuZ2VkKHQpe3RoaXMuZ3JhcGhpY3NDb3JlLm5vdGlmeUdyYXBoaWNHZW9tZXRyeUNoYW5nZWQodCl9bm90aWZ5R3JhcGhpY1Zpc2liaWxpdHlDaGFuZ2VkKHQpe3RoaXMuZ3JhcGhpY3NDb3JlLm5vdGlmeUdyYXBoaWNWaXNpYmlsaXR5Q2hhbmdlZCh0KX1nZXRSZW5kZXJpbmdJbmZvKHQsaSxlKXtjb25zdCBzPW0odCx7cmVuZGVyZXI6aSxhcmNhZGU6ZX0pO2lmKHM/LmNvbG9yKXtjb25zdCB0PXMuY29sb3I7dFswXT10WzBdLzI1NSx0WzFdPXRbMV0vMjU1LHRbMl09dFsyXS8yNTV9cmV0dXJuIHN9Z2V0UmVuZGVyaW5nSW5mb0FzeW5jKHQsaSxlLHMpe3JldHVybiBmKHQse3JlbmRlcmVyOmksYXJjYWRlOmUsLi4uc30pfWdldEhpdCh0KXtpZih0aGlzLm93bmVyLmxvYWRlZEdyYXBoaWNzKXtjb25zdCBpPXRoaXMub3duZXIubG9hZGVkR3JhcGhpY3MuZmluZCgoaT0+aS51aWQ9PT10KSk7aWYoaSl7Y29uc3QgdD10aGlzLmxheWVyIGluc3RhbmNlb2YgeT90aGlzLmxheWVyOm51bGwsZT1nKGksdCk7cmV0dXJue3R5cGU6XCJncmFwaGljXCIsZ3JhcGhpYzplLGxheWVyOmUubGF5ZXJ9fX1yZXR1cm4gbnVsbH13aGVuR3JhcGhpY0JvdW5kcyh0LGkpe3JldHVybiB0aGlzLmdyYXBoaWNzQ29yZT90aGlzLmdyYXBoaWNzQ29yZS53aGVuR3JhcGhpY0JvdW5kcyh0LGkpOlByb21pc2UucmVqZWN0KCl9Y29tcHV0ZUF0dGFjaG1lbnRPcmlnaW4odCxpKXtyZXR1cm4gdGhpcy5ncmFwaGljc0NvcmU/dGhpcy5ncmFwaGljc0NvcmUuY29tcHV0ZUF0dGFjaG1lbnRPcmlnaW4odCxpKTpudWxsfWdldFN5bWJvbExheWVyU2l6ZSh0LGkpe3JldHVybiB0aGlzLmdyYXBoaWNzQ29yZT90aGlzLmdyYXBoaWNzQ29yZS5nZXRTeW1ib2xMYXllclNpemUodCxpKTpudWxsfW1hc2tPY2NsdWRlZSh0KXtjb25zdHtzZXQ6aSxoYW5kbGU6ZX09dGhpcy5vYmplY3RTdGF0ZXMuYWNxdWlyZVNldChfLk1hc2tPY2NsdWRlZSxudWxsKTtyZXR1cm4gdGhpcy5vYmplY3RTdGF0ZXMuc2V0VWlkKGksdC51aWQpLGV9aGlnaGxpZ2h0KHQpe2lmKHQgaW5zdGFuY2VvZiBiKXJldHVybiBQO2lmKFwibnVtYmVyXCI9PXR5cGVvZiB0KXJldHVybiB0aGlzLmhpZ2hsaWdodChbdF0pO2lmKHQgaW5zdGFuY2VvZiBpKXJldHVybiB0aGlzLmhpZ2hsaWdodChbdF0pO2lmKHQgaW5zdGFuY2VvZiBzJiYodD10LnRvQXJyYXkoKSksQXJyYXkuaXNBcnJheSh0KSYmdC5sZW5ndGg+MCl7aWYodFswXWluc3RhbmNlb2YgaSl7Y29uc3QgaT10Lm1hcCgodD0+dC51aWQpKSx7c2V0OmUsaGFuZGxlOnN9PXRoaXMub2JqZWN0U3RhdGVzLmFjcXVpcmVTZXQoXy5IaWdobGlnaHQsbnVsbCk7cmV0dXJuIHRoaXMub2JqZWN0U3RhdGVzLnNldFVpZHMoZSxpKSxzfWlmKFwibnVtYmVyXCI9PXR5cGVvZiB0WzBdKXtjb25zdCBpPXQse3NldDplLGhhbmRsZTpzfT10aGlzLm9iamVjdFN0YXRlcy5hY3F1aXJlU2V0KF8uSGlnaGxpZ2h0LG51bGwpO3JldHVybiB0aGlzLm9iamVjdFN0YXRlcy5zZXRPYmplY3RJZHMoZSxpKSxzfX1yZXR1cm4gUH1fc2V0dXBTdXNwZW5kUmVzdW1lRXh0ZW50KCl7Y29uc3R7c2NhbGVWaXNpYmlsaXR5OnQsZnJ1c3R1bVZpc2liaWxpdHk6aX09dGhpcztpZihudWxsPT10JiZudWxsPT1pKXJldHVybjtjb25zdCBlPSh7Y29tcHV0ZWRFeHRlbnQ6ZSxleHRlbnRQYWRkaW5nOnN9KT0+e3RoaXMuX3N1c3BlbmRSZXN1bWVFeHRlbnQ9RyhlLHRoaXMuX3N1c3BlbmRSZXN1bWVFeHRlbnQsaixzKSxudWxsIT10JiZ0LnNldEV4dGVudCh0aGlzLl9zdXNwZW5kUmVzdW1lRXh0ZW50KSxudWxsIT1pJiZpLnNldEV4dGVudCh0aGlzLl9zdXNwZW5kUmVzdW1lRXh0ZW50KX07dGhpcy5hZGRIYW5kbGVzKGEoKCgpPT4oe2NvbXB1dGVkRXh0ZW50OnRoaXMuZ3JhcGhpY3NDb3JlPy5jb21wdXRlZEV4dGVudCxleHRlbnRQYWRkaW5nOnRoaXMuZ3JhcGhpY3NDb3JlPy5leHRlbnRQYWRkaW5nfSkpLCh0PT5lKHQpKSxwKSl9X3VwZGF0ZUNsaXBwaW5nRXh0ZW50KCl7Y29uc3QgdD10aGlzLnZpZXcuY2xpcHBpbmdBcmVhO3RoaXMuZ3JhcGhpY3NDb3JlLnNldENsaXBwaW5nRXh0ZW50KHQsdGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UpJiZ0aGlzLmdyYXBoaWNzQ29yZS5yZWNyZWF0ZUFsbEdyYXBoaWNzKCl9fTt0KFtjKCldLE8ucHJvdG90eXBlLFwidHlwZVwiLHZvaWQgMCksdChbYyh7Y29uc3RydWN0T25seTohMH0pXSxPLnByb3RvdHlwZSxcIm93bmVyXCIsdm9pZCAwKSx0KFtjKCldLE8ucHJvdG90eXBlLFwibGF5ZXJcIixudWxsKSx0KFtjKCldLE8ucHJvdG90eXBlLFwidmlld1wiLG51bGwpLHQoW2Moe2NvbnN0cnVjdE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJncmFwaGljc0NvcmVcIix2b2lkIDApLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJzY2FsZVZpc2liaWxpdHlcIixudWxsKSx0KFtjKHtjb25zdHJ1Y3RPbmx5OiEwfSldLE8ucHJvdG90eXBlLFwiZnJ1c3R1bVZpc2liaWxpdHlcIix2b2lkIDApLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJlbGV2YXRpb25BbGlnbm1lbnRcIixudWxsKSx0KFtjKCldLE8ucHJvdG90eXBlLFwib2JqZWN0U3RhdGVzXCIsbnVsbCksdChbYygpXSxPLnByb3RvdHlwZSxcInNjYWxlVmlzaWJpbGl0eVN1c3BlbmRlZFwiLG51bGwpLHQoW2Moe3JlYWRPbmx5OiEwfSldLE8ucHJvdG90eXBlLFwiZnJ1c3R1bVZpc2liaWxpdHlTdXNwZW5kZWRcIixudWxsKSx0KFtjKCldLE8ucHJvdG90eXBlLFwic3VzcGVuZGVkXCIsbnVsbCksdChbYyh7cmVhZE9ubHk6ITB9KV0sTy5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLG51bGwpLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJsb2FkZWRHcmFwaGljc1wiLG51bGwpLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJmdWxsT3BhY2l0eVwiLG51bGwpLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJzbGljZVBsYW5lRW5hYmxlZFwiLG51bGwpLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJkcmFwZVNvdXJjZVR5cGVcIix2b2lkIDApLHQoW2MoKV0sTy5wcm90b3R5cGUsXCJ1cGRhdGVQb2xpY3lcIixudWxsKSx0KFtjKHtjb25zdHJ1Y3RPbmx5OiEwfSldLE8ucHJvdG90eXBlLFwic2NhbGVWaXNpYmlsaXR5RW5hYmxlZFwiLHZvaWQgMCksdChbYyh7Y29uc3RydWN0T25seTohMH0pXSxPLnByb3RvdHlwZSxcImZydXN0dW1WaXNpYmlsaXR5RW5hYmxlZFwiLHZvaWQgMCksdChbYygpXSxPLnByb3RvdHlwZSxcImluaXRpYWxpemVQcm9taXNlXCIsdm9pZCAwKSxPPXQoW2goXCJlc3JpLnZpZXdzLjNkLmxheWVycy5ncmFwaGljcy5HcmFwaGljc1Byb2Nlc3NvclwiKV0sTyk7Y29uc3QgUD1yKCk7ZXhwb3J0e08gYXMgR3JhcGhpY3NQcm9jZXNzb3J9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9