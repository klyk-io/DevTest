"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_VoxelWasmPerSceneView_js"],{

/***/ "./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/VoxelWasmPerSceneView.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ A)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../chunks/vec3.js */ "./node_modules/@arcgis/core/chunks/vec3.js");
/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../chunks/vec3f64.js */ "./node_modules/@arcgis/core/chunks/vec3f64.js");
/* harmony import */ var _geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../geometry/support/coordinateSystem.js */ "./node_modules/@arcgis/core/geometry/support/coordinateSystem.js");
/* harmony import */ var _geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../geometry/support/frustum.js */ "./node_modules/@arcgis/core/geometry/support/frustum.js");
/* harmony import */ var _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../libs/vxl/enums.js */ "./node_modules/@arcgis/core/libs/vxl/enums.js");
/* harmony import */ var _libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../libs/vxl/VxlModule.js */ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js");
/* harmony import */ var _views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../views/ViewingMode.js */ "./node_modules/@arcgis/core/views/ViewingMode.js");
/* harmony import */ var _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../views/3d/layers/i3s/Intersector.js */ "./node_modules/@arcgis/core/views/3d/layers/i3s/Intersector.js");
/* harmony import */ var _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../views/3d/state/Frustum.js */ "./node_modules/@arcgis/core/views/3d/state/Frustum.js");
/* harmony import */ var _views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../views/3d/support/RenderCoordsHelper.js */ "./node_modules/@arcgis/core/views/3d/support/RenderCoordsHelper.js");
/* harmony import */ var _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../views/3d/webgl-engine/effects/RenderPlugin.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/effects/RenderPlugin.js");
/* harmony import */ var _views_3d_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/Intersector.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js");
/* harmony import */ var _views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/IntersectorInterfaces.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderFeature.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderFeature.js");
/* harmony import */ var _views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/RenderSlot.js */ "./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js");
/* harmony import */ var _views_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../views/webgl/contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../views/webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const k=_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger("esri.layers.VoxelWasmPerSceneView");var I;!function(e){e[e.Lifetime=1]="Lifetime",e[e.RequestResponse=2]="RequestResponse",e[e.Rendering=3]="Rendering",e[e.Error=4]="Error"}(I||(I={}));let B=class extends _views_3d_webgl_engine_effects_RenderPlugin_js__WEBPACK_IMPORTED_MODULE_21__.SyncRenderPlugin{constructor(e){super(e),this._halfIntTexturesAvailable=!1,this._textureFloatLinearAvailable=!1,this._havePreparedWithAllLayers=!1,this._renderPluginContext=null,this._vxlPromise=null,this._vxl=null,this._pluginIsActive=!1,this._moreToLoad=!1,this._viewportWidth=-1,this._viewportHeight=-1,this._newLayers=[],this._layers=new Map,this._rctx=null,this._renderTargetToRestore=null,this._lastFrameWasStationary=!1,this._wasmMemBlockSizes=[512,1024,2048,4096,8192,16384,32768,65536],this._wasmMemBlocks=new Map,this._dbgFlags=new Set,this._captureFrustum=!1,this._frustum=null,this._frustumRenderableId=-1,this._renderCoordsHelper=null,this.produces=new Map([[_views_3d_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_25__.RenderSlot.VOXEL,()=>!!this._vxl&&"local"===this.view.viewingMode]]),this.type=_views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__.IntersectorType.VOXEL,this.slicePlaneEnabled=!0,this.isGround=!1,this.layerUid=[]}_dbg(e,t){this._dbgFlags.has(e)&&(e===I.Error?k.error(t):k.warn(t))}_removeRenderPlugin(){this._pluginIsActive&&this.view._stage&&(this._dbg(I.Lifetime,"--removeRenderPlugin--"),this.view._stage.removeRenderPlugin(this)),this._pluginIsActive=!1}initialize(){this._dbg(I.Lifetime,"--initialize--");for(const e of this._wasmMemBlockSizes)this._wasmMemBlocks.set(e,0);this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view.ready),(e=>{e&&"local"===this.view.viewingMode?(this._dbg(I.Lifetime,"view ready status changed to ready on a local view, calling addRenderPlugin"),this.view._stage.addRenderPlugin(this),this._pluginIsActive=!0):(this._dbg(I.Lifetime,"view ready status changed, not ready or not a local view!"),this._removeRenderPlugin())}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.qualityProfile),(e=>{this._dbg(I.Rendering,"qualityProfile changed to "+e),this._vxl&&this._vxl.set_quality(this._toWasmQuality(e))}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.timeExtent),(()=>{if(this._vxl){const e=this._getTimeArgs(this.view?.timeExtent);this._dbg(I.Rendering,"sceneView timeExtent changed to useTime="+e.useTime+" st="+e.startTime+" et="+e.endTime),this._vxl.set_scene_time_extent(e.startTime,e.endTime,e.useTime),this._renderPluginContext.requestRender()}}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.watch)((()=>this.view?.stationary),(e=>{this._vxl&&e&&!this._lastFrameWasStationary&&this._renderPluginContext.requestRender()}))])}initializeRenderContext(e){this._dbg(I.Lifetime,"--initializeRenderContext--");const t=e.renderContext.rctx;t.type===_views_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_26__.ContextType.WEBGL2?(this._renderPluginContext=e,this._rctx=e.renderContext.rctx,this._halfIntTexturesAvailable=!!this._rctx.capabilities.textureNorm16,this._textureFloatLinearAvailable=this._rctx.capabilities.textureFloatLinear,this._initializeWasm(t.gl)):this._dbg(I.Error,"WebGL 1 context only!")}uninitializeRenderContext(){this._renderPluginContext=null,this._rctx=null,this._dbg(I.Lifetime,"--uninitializeRenderContext--")}_restoreFramebuffer(){if(!this._renderTargetToRestore)return;const e=this._renderTargetToRestore.fbo;if(!!!this._rctx)return void this._dbg(I.Error,"no context in restoreFramebuffer!");this._rctx.bindFramebuffer(e,!0);const t=this._renderTargetToRestore.viewport;this._rctx.setViewport(t.x,t.y,t.width,t.height)}_bindPreviousDepthToSlot(e,t){const s=!!this._rctx,r=!!this._renderTargetToRestore;if(!s||!r)return 0;const i=this._renderTargetToRestore.fbo.depthStencilTexture;return i?(0===t?this._rctx.bindTexture(null,e,!0):this._rctx.bindTexture(i,e,!0),1):(this._dbg(I.Error,"no depth/stencil texture exists!"),0)}_modifyResourceCount(e,t,s){if(!this._rctx)return void this._dbg(I.Error,"modifyAllocation callback has no rendering context!");const r=e;1===s?this._rctx.instanceCounter.increment(r,t):this._rctx.instanceCounter.decrement(r,t)}_setBlendState(e,t,s,r){this._rctx?(this._rctx.setBlendingEnabled(1===e),this._rctx.setBlendFunction(t,s),this._rctx.setBlendEquation(r)):this._dbg(I.Error,"setBlendState callback has no rendering context!")}_setFrontFace(e){this._rctx?this._rctx.setFrontFace(e):this._dbg(I.Error,"setFrontFace callback has no rendering context!")}_setDepthStencilStateFunction(e,t,s){this._rctx?(this._rctx.setDepthFunction(s),this._rctx.setDepthTestEnabled(1===e),this._rctx.setDepthWriteEnabled(1===t),this._rctx.setStencilTestEnabled(!1),this._rctx.setStencilFunction(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.CompareFunction.ALWAYS,0,255),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.INCR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP),this._rctx.setStencilOpSeparate(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.DECR,_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.StencilOperation.KEEP)):this._dbg(I.Error,"setDepthStencilStateFunction callback has no rendering context!")}_setRasterizerState(e){if(this._rctx)switch(e){case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.None:this._rctx.setFaceCullingEnabled(!1);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.Back:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.BACK),this._rctx.setFaceCullingEnabled(!0);break;case _libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.WasmCullMode.Front:this._rctx.setCullFace(_views_webgl_enums_js__WEBPACK_IMPORTED_MODULE_27__.Face.FRONT),this._rctx.setFaceCullingEnabled(!0)}else this._dbg(I.Error,"setRasterizerState callback has no rendering context!")}_setViewport(e,t,s,r){this._rctx?this._rctx.setViewport(e,t,s,r):this._dbg(I.Error,"setViewport callback has no rendering context!")}_updateMemoryUsage(){this._layers.forEach(((e,t)=>{if(e.needMemoryUsageUpdate){const s=this._vxl.estimate_memory_usage(t);s>=0&&(e.needMemoryUsageUpdate=!1,e.layerView.setUsedMemory(s))}}))}_syncRequestsResponses(){this._layers.forEach(((e,t)=>{const r=[];e.responses.forEach(((s,i)=>{r.push(i),this._dbg(I.RequestResponse,"responding for requestID:"+i+" size:"+s.size),this._vxl.respond(t,i,s),s.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.VoxelRequestType.TreeIndex&&s.requestType!==_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.VoxelRequestType.Section||(e.needMemoryUsageUpdate=!0)}));const a=e.responses;for(const s of r)a.delete(s);const n=this._vxl.get_new_requests(t),o=e.abortController.signal;for(const l in n){e.outstandingRequestCount+=1,1===e.outstandingRequestCount&&e.layerView.updatingFlagChanged();const t=n[l],r={responseType:"array-buffer",signal:o};this._dbg(I.RequestResponse,"making requestID:"+l+" url:"+t.url),(0,_request_js__WEBPACK_IMPORTED_MODULE_2__["default"])(t.url,r).then((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),this._dbg(I.RequestResponse,"have response for requestID:"+l);let r=0;if(s.data.byteLength>0){r=this._vxl._malloc(s.data.byteLength);const e=new Uint8Array(this._vxl.HEAPU8.buffer,r,s.data.byteLength),t=new Uint8Array(s.data);for(let r=0;r<s.data.byteLength;++r)e[r]=t[r]}a.set(+l,{responseType:t.responseType,ptr:r,size:s.data.byteLength,success:!0,requestType:t.requestType})})).catch((s=>{e.outstandingRequestCount-=1,0===e.outstandingRequestCount&&e.layerView.updatingFlagChanged(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(s)||(this._dbg(I.Error,`requestID:${l} failed, error=${s.toString()}`),a.set(+l,{responseType:t.responseType,ptr:0,size:0,success:!1,requestType:t.requestType}))}))}}))}updateWasmCamera(e){this._vxl.set_projection_matrix.apply(this._vxl,e.projectionMatrix),this._vxl.set_view_matrix.apply(this._vxl,e.viewMatrix),this._vxl.set_near_far(e.near,e.far)}isUpdating(e){if(!this._vxl&&this._vxlPromise)return!0;const t=this._layers.get(e);return!!t&&t.outstandingRequestCount>0}getLayerTimes(e){const t=[];return this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const s=this._vxl.get_layer_epoch_times(r,e.layer.currentVariableId);for(let e=0;e<s.length;++e)t.push(s[e])}})),t}getCurrentLayerTimeIndex(e){let t=0;return this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(t=this._vxl.get_layer_current_time_id(r))})),t}setEnabled(e,t){this._layers.forEach(((s,r)=>{s.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.set_enabled(r,t),s.needMemoryUsageUpdate=!0,this._renderPluginContext.requestRender())}))}setStaticSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.StaticSections,staticSections:t};return this._doMaskedUIUpdate(e,s,!0)}setCurrentVariable(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.CurrentVariable,currentVariable:t};return this._doMaskedUIUpdate(e,s,!0)}setRenderMode(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.RenderMode,renderMode:t};return this._doMaskedUIUpdate(e,s,!0)}setVerticalExaggerationAndOffset(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ExaggerationAndOffset,volStyleDesc:{volumeId:t,verticalExaggeration:s,verticalOffset:r}};return this._doMaskedUIUpdate(e,i,!0)}setVariableStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.VariableStyles,variableStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setVolumeStyles(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.VolumeStyles,volumeStyles:t};return this._doMaskedUIUpdate(e,s,!0)}setEnableDynamicSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.DynamicSections};return this._doMaskedUIUpdate(e,s,!0)}setEnableIsosurfaces(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.Isosurfaces};return this._doMaskedUIUpdate(e,s,!0)}setEnableSections(e,t){const s={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.ContainerVisibility,containerIsVisible:t,container:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.ContainerType.StaticSections};return this._doMaskedUIUpdate(e,s,!0)}setAnalysisSlice(e,t,s,r){const i={mask:_libs_vxl_enums_js__WEBPACK_IMPORTED_MODULE_15__.UpdateFlags.AnalysisSlice,analysisSlice:{point:s,normal:r,enabled:t}};return this._doMaskedUIUpdate(e,i,!0)}_doMaskedUIUpdate(e,t,s){if(!this._vxl)return!1;let r=!1;return this._layers.forEach(((s,i)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){const e={str:JSON.stringify(t),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(r=1===this._vxl.handle_masked_ui_update(i,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}})),r&&s&&this._renderPluginContext.requestRender(),r}_addTriangleToWasmBuffer(e,t,s,r,i){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],e[3*(t+=1)]=r[0],e[3*t+1]=r[1],e[3*t+2]=r[2],e[3*(t+=1)]=i[0],e[3*t+1]=i[1],e[3*t+2]=i[2],t+=1}_addNormalToWasmBuffer(e,t,s){return e[3*t]=s[0],e[3*t+1]=s[1],e[3*t+2]=s[2],t+=1}_doCaptureFrustum(){if(!this._vxl)return;const e=36,t=e/3,s=this._vxl._malloc(3*e*Float32Array.BYTES_PER_ELEMENT),r=new Float32Array(this._vxl.HEAPF32.buffer,s,3*e),i=this._vxl._malloc(3*t*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(this._vxl.HEAPF32.buffer,i,e),n=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_BOTTOM_LEFT],o=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_BOTTOM_RIGHT],l=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_TOP_RIGHT],h=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.NEAR_TOP_LEFT],d=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_BOTTOM_LEFT],u=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_BOTTOM_RIGHT],m=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_TOP_RIGHT],p=this._frustum.points[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PointIndex.FAR_TOP_LEFT];let g=0,f=0;const x=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.NEAR];g=this._addTriangleToWasmBuffer(r,g,l,o,n),f=this._addNormalToWasmBuffer(a,f,x),g=this._addTriangleToWasmBuffer(r,g,n,h,l),f=this._addNormalToWasmBuffer(a,f,x);const y=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.FAR];g=this._addTriangleToWasmBuffer(r,g,d,u,m),f=this._addNormalToWasmBuffer(a,f,y),g=this._addTriangleToWasmBuffer(r,g,m,p,d),f=this._addNormalToWasmBuffer(a,f,y);const v=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.TOP];g=this._addTriangleToWasmBuffer(r,g,m,l,h),f=this._addNormalToWasmBuffer(a,f,v),g=this._addTriangleToWasmBuffer(r,g,h,p,m),f=this._addNormalToWasmBuffer(a,f,v);const b=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.BOTTOM];g=this._addTriangleToWasmBuffer(r,g,n,o,u),f=this._addNormalToWasmBuffer(a,f,b),g=this._addTriangleToWasmBuffer(r,g,u,d,n),f=this._addNormalToWasmBuffer(a,f,b);const w=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.LEFT];g=this._addTriangleToWasmBuffer(r,g,h,n,d),f=this._addNormalToWasmBuffer(a,f,w),g=this._addTriangleToWasmBuffer(r,g,d,p,h),f=this._addNormalToWasmBuffer(a,f,w);const T=this._frustum.planes[_geometry_support_frustum_js__WEBPACK_IMPORTED_MODULE_14__.PlaneIndex.RIGHT];g=this._addTriangleToWasmBuffer(r,g,l,m,u),f=this._addNormalToWasmBuffer(a,f,T),g=this._addTriangleToWasmBuffer(r,g,u,o,l),f=this._addNormalToWasmBuffer(a,f,T),-1!==this._frustumRenderableId&&this._vxl.remove_generic_mesh(this._frustumRenderableId),this._frustumRenderableId=this._vxl.add_generic_mesh(s,3*e,i,e,255,0,0,64),this._vxl._free(s),this._vxl._free(i),this._captureFrustum=!1,this._renderPluginContext.requestRender()}captureFrustum(){null===this._renderCoordsHelper&&(this._renderCoordsHelper=_views_3d_support_RenderCoordsHelper_js__WEBPACK_IMPORTED_MODULE_20__.RenderCoordsHelper.create(_views_ViewingMode_js__WEBPACK_IMPORTED_MODULE_17__.ViewingMode.Local,(0,_geometry_support_coordinateSystem_js__WEBPACK_IMPORTED_MODULE_13__.renderSRFromViewSR)(!1,this.view.spatialReference))),null===this._frustum&&(this._frustum=new _views_3d_state_Frustum_js__WEBPACK_IMPORTED_MODULE_19__.Frustum(this._renderCoordsHelper)),this._captureFrustum=!0,null!==this._renderPluginContext&&this._renderPluginContext.requestRender()}toggleFullVolumeExtentDraw(e){this._vxl&&this._layers.forEach(((t,s)=>{t.layerView.wasmLayerId===e.wasmLayerId&&(this._vxl.toggle_full_volume_extent_draw(s),this._renderPluginContext.requestRender())}))}addVoxelLayer(e){if(!this._vxl){const t={layerView:e,resolveCallback:null,rejectCallback:null},s=new Promise(((e,s)=>{t.resolveCallback=e,t.rejectCallback=s}));return this._newLayers.push(t),s}const t=this._addVoxelLayer(e);return t<0?Promise.reject(-1):Promise.resolve(t)}removeVoxelLayer(e){if(!this._vxl){const t=this._newLayers.findIndex((t=>e.uid===t.layerView.uid));t>=0&&(this._newLayers[t].resolveCallback(-1),this._newLayers.splice(t,1));const s=this._newLayers.length;return 0===s&&(this._dbg(I.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}let t=-1;this._layers.forEach(((s,r)=>{if(s.layerView.wasmLayerId===e.wasmLayerId){t=r,s.abortController.abort(),this._vxl.remove_layer(t);const i=this.layerUid.indexOf(e.layer.uid);-1!==i&&this.layerUid.splice(i,1)}})),t>=0&&this._layers.delete(t);const s=this._layers.size;return 0===s&&(this._dbg(I.Lifetime," no voxel layers left after removing a layer, removing RenderPlugin and destroying"),this.destroy()),s}_getBlockSize(e){for(const t of this._wasmMemBlockSizes)if(e<t)return t;return-1}_allocateBlock(e){e.byteCount=this._vxl.lengthBytesUTF8(e.str)+1;const t=this._getBlockSize(e.byteCount);return t<0?(e.isReusable=!1,e.ptr=this._vxl._malloc(e.byteCount)):(e.isReusable=!0,e.ptr=this._wasmMemBlocks.get(t),0===e.ptr&&(e.ptr=this._vxl._malloc(t),this._wasmMemBlocks.set(t,e.ptr))),0!==e.ptr&&(this._vxl.stringToUTF8(e.str,e.ptr,e.byteCount),!0)}_getTimeArgs(e){let t=-Number.MAX_VALUE,s=Number.MAX_VALUE,r=!1;return null!=e&&(e.isAllTime?r=!0:(null!=e.start&&(r=!0,t=e.start.getTime()/1e3),null!=e.end&&(r=!0,s=e.end.getTime()/1e3))),{startTime:t,endTime:s,useTime:r}}_addVoxelLayer(e){const t=e.layer;let s=-1;const r=t.getConfiguration();if(r.length<1)return-1;const i={str:r,byteCount:0,ptr:0,isReusable:!1};if(!this._allocateBlock(i))return-1;const a=this._getTimeArgs(this.view?.timeExtent),n=this.view.spatialReference.isWGS84&&t.spatialReference.isWGS84?111319.49079327357:1;if(s=this._vxl.add_layer(t.serviceRoot,i.ptr,i.byteCount,n,n,a.startTime,a.endTime,a.useTime,this._toWasmQuality(this.view.qualityProfile)),i.isReusable||this._vxl._free(i.ptr),s>=0){t.test?.constantUpscaling&&(this._setUpscalingLimits(0,.25,.25),this._setUpscalingLimits(1,.5,.5),this._setUpscalingLimits(2,.75,.75));const r=new AbortController;if(this._layers.set(s,{layerView:e,responses:new Map,outstandingRequestCount:0,abortController:r,needMemoryUsageUpdate:!1}),this.layerUid.push(e.layer.uid),!this._halfIntTexturesAvailable||(0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("mac")){const t=[];let s="";for(const r of e.layer.variables)"Int16"!==r.renderingFormat.type&&"UInt16"!==r.renderingFormat.type||(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));""!==s&&k.error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&k.warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}if(!this._textureFloatLinearAvailable){const t=[];let s="";for(const r of e.layer.variables)"Float32"===r.renderingFormat.type&&(t.push(r.name),r.id===e.layer.currentVariableId&&(s=r.name));""!==s&&k.error("#addVoxelLayer_error()",e.layer,`The voxel layer '${e.layer.title}' cannot render the current variable '${s}' in this browser`),t.length>0&&k.warn("#addVoxelLayer_warning()",e.layer,`The voxel layer '${e.layer.title}' cannot render the variables '${t.toString()}' in this browser`)}return (0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("esri-mobile")&&k.warnOnce("Mobile support differs across devices. Voxel layer might not display as expected."),s}return-1}prepareRender(e){if(!this._vxl)return;const t=e.bindParameters.camera.viewForward,s=e.bindParameters.camera.eye;this._vxl.update_camera_pos_and_direction(s[0],s[1],s[2],t[0],t[1],t[2]);const r=this._vxl.cull();this._dbg(I.RequestResponse,"missingResourceCount="+r),this._moreToLoad=r>0,this._havePreparedWithAllLayers=0===this._newLayers.length,this._updateMemoryUsage()}renderNode(e){if(!this._vxl)return;for(const s of this._newLayers){const e=this._addVoxelLayer(s.layerView);-1===e?s.rejectCallback(-1):s.resolveCallback(e)}if(this._newLayers=[],0===this._layers.size)return void this._dbg(I.Error,"No voxel layers but RenderPlugin instance is being asked to render!");this._lastFrameWasStationary=this.view.stationary,this._syncRequestsResponses(),this._beforeDraw(),this._vxl.begin_color_frame(!this.view._stage.renderer.isFeatureEnabled(_views_3d_webgl_engine_lib_RenderFeature_js__WEBPACK_IMPORTED_MODULE_24__.RenderFeature.HighResolutionVoxel),e.bindParameters.lighting.mainLight.direction[0],e.bindParameters.lighting.mainLight.direction[1],e.bindParameters.lighting.mainLight.direction[2]);const t=this._renderTargetToRestore.viewport;t.width===this._viewportWidth&&t.height===this._viewportHeight||(this._viewportWidth=t.width,this._viewportHeight=t.height,this._vxl.set_viewport(t.width,t.height),this._layers.forEach((e=>{e.needMemoryUsageUpdate=!0}))),0===t.x&&0===t.y||this._dbg(I.Error,"Unsupported viewport parameters detected!"),this.updateWasmCamera(e.bindParameters.camera),this._captureFrustum&&(this._frustum.update(e.bindParameters.camera),this._doCaptureFrustum()),this._vxl.draw(),this._afterDraw(),(this._moreToLoad||!this._havePreparedWithAllLayers&&this._layers.size>0)&&this._renderPluginContext.requestRender()}destroy(){this._dbg(I.Lifetime,"--destroy--"),this._removeRenderPlugin(),this._vxl&&(this._layers.forEach((e=>{e.abortController.abort()})),this._wasmMemBlocks.forEach((e=>{0!==e&&this._vxl._free(e)})),this._vxl.uninitialize_voxel_wasm(),this._vxl=null)}_initializeWasm(e){return this._vxl?Promise.resolve():(this._vxlPromise||(this._vxlPromise=(0,_libs_vxl_VxlModule_js__WEBPACK_IMPORTED_MODULE_16__.loadVoxelWASM)(e).then((e=>{if(this._vxl=e,this._vxlPromise=null,this._newLayers.length<=0)return this._dbg(I.Lifetime," no voxel layers left after WASM downloaded, removing RenderPlugin and destroying"),void this.destroy();const t=this._getTimeArgs(this.view?.timeExtent),s=this._vxl.addFunction(this._restoreFramebuffer.bind(this),"v"),r=this._vxl.addFunction(this._setBlendState.bind(this),"viiii"),i=this._vxl.addFunction(this._setFrontFace.bind(this),"vi"),a=this._vxl.addFunction(this._setRasterizerState.bind(this),"vi"),n=this._vxl.addFunction(this._setDepthStencilStateFunction.bind(this),"viii"),o=this._vxl.addFunction(this._setViewport.bind(this),"viiii"),l=this._vxl.addFunction(this._bindPreviousDepthToSlot.bind(this),"iii"),h=this._vxl.addFunction(this._modifyResourceCount.bind(this),"viii"),d=this._halfIntTexturesAvailable&&!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_3__["default"])("mac"),u=this._textureFloatLinearAvailable;this._vxl.initialize_voxel_wasm(s,r,i,a,n,o,l,h,t.startTime,t.endTime,t.useTime,d,u),this._renderPluginContext&&this._renderPluginContext.requestRender()})).catch((()=>{for(const e of this._newLayers)e.rejectCallback(-2);this._dbg(I.Error," WASM failed to download, removing RenderPlugin and destroying"),this.destroy()}))),this._vxlPromise)}pickDepth(e,t,s){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const r=s.viewport[3]-t;if(e<0||e>s.viewport[2]||t<0||t>s.viewport[3])return this._dbg(I.Error,`[js] pickDepth: outOfRange, screenXY=[${e.toFixed(0)}, ${r.toFixed(0)}]]`),null;this._beforeDraw();const i=s.viewForward,a=s.eye;this._vxl.update_camera_pos_and_direction(a[0],a[1],a[2],i[0],i[1],i[2]),this.updateWasmCamera(s),this._vxl.begin_frame();const n=this._vxl.pick_depth(e,r);if(this._afterDraw(),n.success){return n.distanceToCamera}return null}pickObject(e,t,s,r){if(!this._vxl||!this._rctx||0===this._layers.size)return null;const i=Math.round(e),a=Math.round(t);if(i<0||i>s.viewport[2]||a<0||a>s.viewport[3])return this._dbg(I.Error,`[js] pickObject: outOfRange, screenXY=[${i}, ${a}], vp=[${s.viewport.toString()}]`),null;this._beforeDraw();const n=s.viewForward,o=s.eye;this._vxl.update_camera_pos_and_direction(o[0],o[1],o[2],n[0],n[1],n[2]),this.updateWasmCamera(s),this._vxl.begin_frame();let l=null;if(0===r.length)l=this._vxl.pick_object(i,a,0,0);else{const e={str:JSON.stringify({layerIds:r}),byteCount:0,ptr:0,isReusable:!1};this._allocateBlock(e)&&(l=this._vxl.pick_object(i,a,e.ptr,e.byteCount),e.isReusable||this._vxl._free(e.ptr))}return this._afterDraw(),l}_beforeDraw(){this._renderTargetToRestore={fbo:this._rctx.getBoundFramebufferObject(),viewport:this._rctx.getViewport()},this._rctx.setPolygonOffsetFillEnabled(!1),this._rctx.setScissorTestEnabled(!1),this._rctx.setColorMask(!0,!0,!0,!0)}_afterDraw(){this._renderTargetToRestore.fbo=null,this._rctx.externalTextureUnitUpdate(this._vxl.get_texture_units_bound_in_frame(),this._vxl.get_active_texture_unit()),this._rctx.externalVertexArrayObjectUpdate(),this._rctx.externalVertexBufferUpdate(),this._rctx.externalProgramUpdate()}intersect(e,t,s,r,i){if(!this._vxl||!this._rctx||0===this._layers.size||!e.options.selectionMode||e.options.isFiltered)return;if(i[0]<0||i[0]>e.camera.viewport[2]||i[1]<0||i[1]>e.camera.viewport[3])return this._dbg(I.Error,`[js] VoxelWasmPerScene.intersect: outOfRange, screenXY=[${i[0].toFixed(0)}, ${i[1].toFixed(0)}]`),null;const a=[];this._layers.forEach((t=>{e.options.filteredLayerUids.includes(t.layerView.layer.uid)&&a.push(t.layerView.wasmLayerId)}));const n=this.pickObject(i[0],i[1],e.camera,a);if(null==n||-1===n.layerId)return;const o=this._layers.get(n.layerId);if(o){const t=o.layerView.layer.uid,i=n.distanceToCamera/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_11__.o)(s,r),a=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_12__.c)();a[0]=n.worldX,a[1]=n.worldY,a[2]=n.worldZ;const l={};if(null!=n.continuousValue&&null!=n.continuousValueUnits?l["Voxel.ServiceValue"]=`${n.continuousValue.toLocaleString()} ${n.continuousValueUnits}`:null!=n.uniqueValueLabel&&null!=n.uniqueValue?l["Voxel.ServiceValue"]=`${n.uniqueValueLabel} (${n.uniqueValue})`:null!=n.uniqueValue&&(l["Voxel.ServiceValue"]=`${n.uniqueValue}`),l["Voxel.ServiceVariableLabel"]=n.variableLabel,l["Voxel.Position"]=n.voxelSpacePosition,null!=n.epochTime&&null!=n.nativeTime&&null!=n.nativeTimeUnits){const e=new Date(n.epochTime);l["Voxel.ServiceLocalTime"]=e.toString(),l["Voxel.ServiceNativeTime"]=`${n.nativeTime.toLocaleString()} ${n.nativeTimeUnits}`}null!=n.depth&&null!=n.depthUnits&&(l["Voxel.ServiceDepth"]=`${n.depth.toLocaleString()} ${n.depthUnits}`);const u=n.faceNormal;l["Voxel.WorldPosition"]=`[${a[0]}, ${a[1]}, ${a[2]}]`;const _=e=>{const s=new _views_3d_layers_i3s_Intersector_js__WEBPACK_IMPORTED_MODULE_18__.VoxelTarget(a,t,(()=>this._createVoxelGraphic(o.layerView.layer,l)));e.set(this.type,s,i,u)},c=e.results,m=e.options.store===_views_3d_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_23__.StoreResults.ALL;if((null==c.min.dist||i<c.min.dist)&&_(c.min),(null==c.max.dist||i>c.max.dist)&&_(c.max),m){const t=(0,_views_3d_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_22__.newIntersectorResult)(e.ray);_(t),e.results.all.push(t)}}}_createVoxelGraphic(e,s){return new _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]({layer:e,sourceLayer:e,attributes:s})}_toWasmQuality(e){switch(e){case"low":return 0;case"medium":return 1;case"high":return 2}}_setUpscalingLimits(e,t,s){this._vxl&&this._vxl.set_upscaling_limits(e,t,s)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_7__.property)({constructOnly:!0})],B.prototype,"view",void 0),B=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.VoxelWasmPerSceneView")],B);const A=B;


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/VxlModule.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/VxlModule.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   loadVoxelWASM: () => (/* binding */ e)
/* harmony export */ });
/* harmony import */ var _assets_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../assets.js */ "./node_modules/@arcgis/core/assets.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(t){return new Promise((e=>__webpack_require__.e(/*! import() */ "defaultVendors-node_modules_arcgis_core_chunks_vxlLayer_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../chunks/vxlLayer.js */ "./node_modules/@arcgis/core/chunks/vxlLayer.js")).then((t=>t.v)).then((({default:n})=>{const r=n({locateFile:i,preinitializedWebGLContext:t,onRuntimeInitialized:()=>e(r)})})))).catch((t=>{throw t}))}function i(e){return (0,_assets_js__WEBPACK_IMPORTED_MODULE_0__.getAssetUrl)(`esri/libs/vxl/${e}`)}


/***/ }),

/***/ "./node_modules/@arcgis/core/libs/vxl/enums.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/libs/vxl/enums.js ***!
  \*****************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ContainerType: () => (/* binding */ o),
/* harmony export */   UpdateFlags: () => (/* binding */ a),
/* harmony export */   VoxelRequestType: () => (/* binding */ i),
/* harmony export */   WasmCullMode: () => (/* binding */ t),
/* harmony export */   WasmRenderingQuality: () => (/* binding */ n),
/* harmony export */   WasmResponseType: () => (/* binding */ e)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var e,i,t,n,a,o;!function(e){e[e.Binary=0]="Binary",e[e.JSON=1]="JSON"}(e||(e={})),function(e){e[e.TreeIndex=0]="TreeIndex",e[e.TreeStats=1]="TreeStats",e[e.TreeData=2]="TreeData",e[e.BrickBundles=3]="BrickBundles",e[e.Section=4]="Section",e[e.VariableStats=5]="VariableStats"}(i||(i={})),function(e){e[e.None=1]="None",e[e.Front=2]="Front",e[e.Back=3]="Back"}(t||(t={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(n||(n={})),function(e){e[e.None=0]="None",e[e.StaticSections=1]="StaticSections",e[e.Slices=2]="Slices",e[e.DynamicSections=4]="DynamicSections",e[e.GhostShell=8]="GhostShell",e[e.Isosurface=16]="Isosurface",e[e.Quality=32]="Quality",e[e.SunLocation=64]="SunLocation",e[e.StaticSectionSelection=128]="StaticSectionSelection",e[e.ExaggerationAndOffset=256]="ExaggerationAndOffset",e[e.CurrentTime=512]="CurrentTime",e[e.CurrentVariable=1024]="CurrentVariable",e[e.DeleteIsosurface=2048]="DeleteIsosurface",e[e.ContainerVisibility=4096]="ContainerVisibility",e[e.RenderMode=8192]="RenderMode",e[e.Optimization=16384]="Optimization",e[e.VariableStyles=32768]="VariableStyles",e[e.VolumeStyles=65536]="VolumeStyles",e[e.AnalysisSlice=131072]="AnalysisSlice"}(a||(a={})),function(e){e[e.Isosurfaces=0]="Isosurfaces",e[e.DynamicSections=1]="DynamicSections",e[e.StaticSections=2]="StaticSections"}(o||(o={}));


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19Wb3hlbFdhc21QZXJTY2VuZVZpZXdfanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDd3NELFFBQVEsdURBQUMsZ0RBQWdELE1BQU0sYUFBYSxzSEFBc0gsU0FBUyxHQUFHLG9CQUFvQiw2RkFBQyxDQUFDLGVBQWUsZ29CQUFnb0IsaUZBQUMscUVBQXFFLGlHQUFDLG1FQUFtRSxVQUFVLDBEQUEwRCxzQkFBc0IsMkpBQTJKLGFBQWEsdUNBQXVDLG9FQUFvRSxpQkFBaUIsNkRBQUMsNEJBQTRCLHVUQUF1VCxFQUFFLDJEQUFDLEVBQUUsNkRBQUMsc0NBQXNDLCtHQUErRyxFQUFFLDJEQUFDLEVBQUUsNkRBQUMsbUNBQW1DLGNBQWMsaURBQWlELDROQUE0TixFQUFFLDJEQUFDLEVBQUUsNkRBQUMsa0NBQWtDLHVGQUF1RixLQUFLLDJCQUEyQixvREFBb0QsNkJBQTZCLFNBQVMsc0VBQUMsZ1NBQWdTLDRCQUE0QixxR0FBcUcsc0JBQXNCLHVDQUF1Qyx3Q0FBd0Msb0ZBQW9GLGlDQUFpQyw2Q0FBNkMsaURBQWlELDhCQUE4QixxREFBcUQsbUJBQW1CLDREQUE0RCw4SUFBOEksNEJBQTRCLG9HQUFvRyxVQUFVLDBGQUEwRix3QkFBd0Isd0xBQXdMLGlCQUFpQiwyR0FBMkcscUNBQXFDLDJMQUEyTCxtRUFBQywrQ0FBK0Msd0RBQUMsT0FBTyxvRUFBQyxNQUFNLG9FQUFDLE1BQU0sb0VBQUMsdUNBQXVDLHdEQUFDLE1BQU0sb0VBQUMsTUFBTSxvRUFBQyxNQUFNLG9FQUFDLDZGQUE2Rix1QkFBdUIsd0JBQXdCLEtBQUssNkRBQUMsMkNBQTJDLE1BQU0sS0FBSyw2REFBQyw2QkFBNkIsd0RBQUMsNENBQTRDLE1BQU0sS0FBSyw2REFBQyw4QkFBOEIsd0RBQUMsNkNBQTZDLGdG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SSxLQUFLLElBQUksS0FBSyxHQUFHLFlBQVksWUFBWSw2RUFBQywwREFBMEQsdUJBQXVCLGlDQUFpQyw4RkFBQyxLQUFLLDRGQUE0RixRQUFRLGdHQUFDLFFBQVEsNkJBQTZCLHlCQUF5QixXQUFXLG1EQUFDLEVBQUUsbUNBQW1DLEVBQUUsa0JBQWtCLFVBQVUsbUJBQW1CLHNCQUFzQixxQkFBcUIsMkJBQTJCLG1EQUFtRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsaUJBQWlCLGdDQUFnQyx1REFBQyxFQUFFLHVGQUFDLDBDQUEwQyxVQUErQjs7Ozs7Ozs7Ozs7Ozs7OztBQ0p0L3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQzhDLGNBQWMsdUJBQXVCLHlPQUFrQyx3QkFBd0IsVUFBVSxJQUFJLFdBQVcsd0VBQXdFLEVBQUUsZ0JBQWdCLFFBQVEsR0FBRyxjQUFjLE9BQU8sdURBQUMsa0JBQWtCLEVBQUUsR0FBOEI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSm5WO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWEsMENBQTBDLFNBQVMsZUFBZSxzTEFBc0wsU0FBUyxlQUFlLDJEQUEyRCxTQUFTLGVBQWUsMkRBQTJELFNBQVMsZUFBZSwydEJBQTJ0QixTQUFTLGVBQWUsaUhBQWlILFNBQVMsR0FBdUkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL1ZveGVsV2FzbVBlclNjZW5lVmlldy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGlicy92eGwvVnhsTW9kdWxlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9saWJzL3Z4bC9lbnVtcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vR3JhcGhpYy5qc1wiO2ltcG9ydCBzIGZyb21cIi4uL3JlcXVlc3QuanNcIjtpbXBvcnQgaGFzIGZyb21cIi4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIGl9ZnJvbVwiLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgYSxpbml0aWFsIGFzIG59ZnJvbVwiLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG99ZnJvbVwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIGx9ZnJvbVwiLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtvIGFzIGh9ZnJvbVwiLi4vY2h1bmtzL3ZlYzMuanNcIjtpbXBvcnR7YyBhcyBkfWZyb21cIi4uL2NodW5rcy92ZWMzZjY0LmpzXCI7aW1wb3J0e3JlbmRlclNSRnJvbVZpZXdTUiBhcyB1fWZyb21cIi4uL2dlb21ldHJ5L3N1cHBvcnQvY29vcmRpbmF0ZVN5c3RlbS5qc1wiO2ltcG9ydHtQb2ludEluZGV4IGFzIF8sUGxhbmVJbmRleCBhcyBjfWZyb21cIi4uL2dlb21ldHJ5L3N1cHBvcnQvZnJ1c3R1bS5qc1wiO2ltcG9ydHtXYXNtQ3VsbE1vZGUgYXMgbSxWb3hlbFJlcXVlc3RUeXBlIGFzIHAsVXBkYXRlRmxhZ3MgYXMgZyxDb250YWluZXJUeXBlIGFzIGZ9ZnJvbVwiLi4vbGlicy92eGwvZW51bXMuanNcIjtpbXBvcnR7bG9hZFZveGVsV0FTTSBhcyB4fWZyb21cIi4uL2xpYnMvdnhsL1Z4bE1vZHVsZS5qc1wiO2ltcG9ydHtWaWV3aW5nTW9kZSBhcyB5fWZyb21cIi4uL3ZpZXdzL1ZpZXdpbmdNb2RlLmpzXCI7aW1wb3J0e1ZveGVsVGFyZ2V0IGFzIHZ9ZnJvbVwiLi4vdmlld3MvM2QvbGF5ZXJzL2kzcy9JbnRlcnNlY3Rvci5qc1wiO2ltcG9ydHtGcnVzdHVtIGFzIGJ9ZnJvbVwiLi4vdmlld3MvM2Qvc3RhdGUvRnJ1c3R1bS5qc1wiO2ltcG9ydHtSZW5kZXJDb29yZHNIZWxwZXIgYXMgd31mcm9tXCIuLi92aWV3cy8zZC9zdXBwb3J0L1JlbmRlckNvb3Jkc0hlbHBlci5qc1wiO2ltcG9ydHtTeW5jUmVuZGVyUGx1Z2luIGFzIFR9ZnJvbVwiLi4vdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2VmZmVjdHMvUmVuZGVyUGx1Z2luLmpzXCI7aW1wb3J0e25ld0ludGVyc2VjdG9yUmVzdWx0IGFzIFJ9ZnJvbVwiLi4vdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9JbnRlcnNlY3Rvci5qc1wiO2ltcG9ydHtJbnRlcnNlY3RvclR5cGUgYXMgTCxTdG9yZVJlc3VsdHMgYXMgRX1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL0ludGVyc2VjdG9ySW50ZXJmYWNlcy5qc1wiO2ltcG9ydHtSZW5kZXJGZWF0dXJlIGFzIFZ9ZnJvbVwiLi4vdmlld3MvM2Qvd2ViZ2wtZW5naW5lL2xpYi9SZW5kZXJGZWF0dXJlLmpzXCI7aW1wb3J0e1JlbmRlclNsb3QgYXMgRn1mcm9tXCIuLi92aWV3cy8zZC93ZWJnbC1lbmdpbmUvbGliL1JlbmRlclNsb3QuanNcIjtpbXBvcnR7Q29udGV4dFR5cGUgYXMgQ31mcm9tXCIuLi92aWV3cy93ZWJnbC9jb250ZXh0VXRpbHMuanNcIjtpbXBvcnR7Q29tcGFyZUZ1bmN0aW9uIGFzIFMsRmFjZSBhcyBQLFN0ZW5jaWxPcGVyYXRpb24gYXMgVX1mcm9tXCIuLi92aWV3cy93ZWJnbC9lbnVtcy5qc1wiO2NvbnN0IGs9ci5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5Wb3hlbFdhc21QZXJTY2VuZVZpZXdcIik7dmFyIEk7IWZ1bmN0aW9uKGUpe2VbZS5MaWZldGltZT0xXT1cIkxpZmV0aW1lXCIsZVtlLlJlcXVlc3RSZXNwb25zZT0yXT1cIlJlcXVlc3RSZXNwb25zZVwiLGVbZS5SZW5kZXJpbmc9M109XCJSZW5kZXJpbmdcIixlW2UuRXJyb3I9NF09XCJFcnJvclwifShJfHwoST17fSkpO2xldCBCPWNsYXNzIGV4dGVuZHMgVHtjb25zdHJ1Y3RvcihlKXtzdXBlcihlKSx0aGlzLl9oYWxmSW50VGV4dHVyZXNBdmFpbGFibGU9ITEsdGhpcy5fdGV4dHVyZUZsb2F0TGluZWFyQXZhaWxhYmxlPSExLHRoaXMuX2hhdmVQcmVwYXJlZFdpdGhBbGxMYXllcnM9ITEsdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dD1udWxsLHRoaXMuX3Z4bFByb21pc2U9bnVsbCx0aGlzLl92eGw9bnVsbCx0aGlzLl9wbHVnaW5Jc0FjdGl2ZT0hMSx0aGlzLl9tb3JlVG9Mb2FkPSExLHRoaXMuX3ZpZXdwb3J0V2lkdGg9LTEsdGhpcy5fdmlld3BvcnRIZWlnaHQ9LTEsdGhpcy5fbmV3TGF5ZXJzPVtdLHRoaXMuX2xheWVycz1uZXcgTWFwLHRoaXMuX3JjdHg9bnVsbCx0aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmU9bnVsbCx0aGlzLl9sYXN0RnJhbWVXYXNTdGF0aW9uYXJ5PSExLHRoaXMuX3dhc21NZW1CbG9ja1NpemVzPVs1MTIsMTAyNCwyMDQ4LDQwOTYsODE5MiwxNjM4NCwzMjc2OCw2NTUzNl0sdGhpcy5fd2FzbU1lbUJsb2Nrcz1uZXcgTWFwLHRoaXMuX2RiZ0ZsYWdzPW5ldyBTZXQsdGhpcy5fY2FwdHVyZUZydXN0dW09ITEsdGhpcy5fZnJ1c3R1bT1udWxsLHRoaXMuX2ZydXN0dW1SZW5kZXJhYmxlSWQ9LTEsdGhpcy5fcmVuZGVyQ29vcmRzSGVscGVyPW51bGwsdGhpcy5wcm9kdWNlcz1uZXcgTWFwKFtbRi5WT1hFTCwoKT0+ISF0aGlzLl92eGwmJlwibG9jYWxcIj09PXRoaXMudmlldy52aWV3aW5nTW9kZV1dKSx0aGlzLnR5cGU9TC5WT1hFTCx0aGlzLnNsaWNlUGxhbmVFbmFibGVkPSEwLHRoaXMuaXNHcm91bmQ9ITEsdGhpcy5sYXllclVpZD1bXX1fZGJnKGUsdCl7dGhpcy5fZGJnRmxhZ3MuaGFzKGUpJiYoZT09PUkuRXJyb3I/ay5lcnJvcih0KTprLndhcm4odCkpfV9yZW1vdmVSZW5kZXJQbHVnaW4oKXt0aGlzLl9wbHVnaW5Jc0FjdGl2ZSYmdGhpcy52aWV3Ll9zdGFnZSYmKHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwiLS1yZW1vdmVSZW5kZXJQbHVnaW4tLVwiKSx0aGlzLnZpZXcuX3N0YWdlLnJlbW92ZVJlbmRlclBsdWdpbih0aGlzKSksdGhpcy5fcGx1Z2luSXNBY3RpdmU9ITF9aW5pdGlhbGl6ZSgpe3RoaXMuX2RiZyhJLkxpZmV0aW1lLFwiLS1pbml0aWFsaXplLS1cIik7Zm9yKGNvbnN0IGUgb2YgdGhpcy5fd2FzbU1lbUJsb2NrU2l6ZXMpdGhpcy5fd2FzbU1lbUJsb2Nrcy5zZXQoZSwwKTt0aGlzLmFkZEhhbmRsZXMoW2EoKCgpPT50aGlzLnZpZXcucmVhZHkpLChlPT57ZSYmXCJsb2NhbFwiPT09dGhpcy52aWV3LnZpZXdpbmdNb2RlPyh0aGlzLl9kYmcoSS5MaWZldGltZSxcInZpZXcgcmVhZHkgc3RhdHVzIGNoYW5nZWQgdG8gcmVhZHkgb24gYSBsb2NhbCB2aWV3LCBjYWxsaW5nIGFkZFJlbmRlclBsdWdpblwiKSx0aGlzLnZpZXcuX3N0YWdlLmFkZFJlbmRlclBsdWdpbih0aGlzKSx0aGlzLl9wbHVnaW5Jc0FjdGl2ZT0hMCk6KHRoaXMuX2RiZyhJLkxpZmV0aW1lLFwidmlldyByZWFkeSBzdGF0dXMgY2hhbmdlZCwgbm90IHJlYWR5IG9yIG5vdCBhIGxvY2FsIHZpZXchXCIpLHRoaXMuX3JlbW92ZVJlbmRlclBsdWdpbigpKX0pLG4pLGEoKCgpPT50aGlzLnZpZXc/LnF1YWxpdHlQcm9maWxlKSwoZT0+e3RoaXMuX2RiZyhJLlJlbmRlcmluZyxcInF1YWxpdHlQcm9maWxlIGNoYW5nZWQgdG8gXCIrZSksdGhpcy5fdnhsJiZ0aGlzLl92eGwuc2V0X3F1YWxpdHkodGhpcy5fdG9XYXNtUXVhbGl0eShlKSl9KSxuKSxhKCgoKT0+dGhpcy52aWV3Py50aW1lRXh0ZW50KSwoKCk9PntpZih0aGlzLl92eGwpe2NvbnN0IGU9dGhpcy5fZ2V0VGltZUFyZ3ModGhpcy52aWV3Py50aW1lRXh0ZW50KTt0aGlzLl9kYmcoSS5SZW5kZXJpbmcsXCJzY2VuZVZpZXcgdGltZUV4dGVudCBjaGFuZ2VkIHRvIHVzZVRpbWU9XCIrZS51c2VUaW1lK1wiIHN0PVwiK2Uuc3RhcnRUaW1lK1wiIGV0PVwiK2UuZW5kVGltZSksdGhpcy5fdnhsLnNldF9zY2VuZV90aW1lX2V4dGVudChlLnN0YXJ0VGltZSxlLmVuZFRpbWUsZS51c2VUaW1lKSx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKX19KSxuKSxhKCgoKT0+dGhpcy52aWV3Py5zdGF0aW9uYXJ5KSwoZT0+e3RoaXMuX3Z4bCYmZSYmIXRoaXMuX2xhc3RGcmFtZVdhc1N0YXRpb25hcnkmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfSkpXSl9aW5pdGlhbGl6ZVJlbmRlckNvbnRleHQoZSl7dGhpcy5fZGJnKEkuTGlmZXRpbWUsXCItLWluaXRpYWxpemVSZW5kZXJDb250ZXh0LS1cIik7Y29uc3QgdD1lLnJlbmRlckNvbnRleHQucmN0eDt0LnR5cGU9PT1DLldFQkdMMj8odGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dD1lLHRoaXMuX3JjdHg9ZS5yZW5kZXJDb250ZXh0LnJjdHgsdGhpcy5faGFsZkludFRleHR1cmVzQXZhaWxhYmxlPSEhdGhpcy5fcmN0eC5jYXBhYmlsaXRpZXMudGV4dHVyZU5vcm0xNix0aGlzLl90ZXh0dXJlRmxvYXRMaW5lYXJBdmFpbGFibGU9dGhpcy5fcmN0eC5jYXBhYmlsaXRpZXMudGV4dHVyZUZsb2F0TGluZWFyLHRoaXMuX2luaXRpYWxpemVXYXNtKHQuZ2wpKTp0aGlzLl9kYmcoSS5FcnJvcixcIldlYkdMIDEgY29udGV4dCBvbmx5IVwiKX11bmluaXRpYWxpemVSZW5kZXJDb250ZXh0KCl7dGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dD1udWxsLHRoaXMuX3JjdHg9bnVsbCx0aGlzLl9kYmcoSS5MaWZldGltZSxcIi0tdW5pbml0aWFsaXplUmVuZGVyQ29udGV4dC0tXCIpfV9yZXN0b3JlRnJhbWVidWZmZXIoKXtpZighdGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlKXJldHVybjtjb25zdCBlPXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS5mYm87aWYoISEhdGhpcy5fcmN0eClyZXR1cm4gdm9pZCB0aGlzLl9kYmcoSS5FcnJvcixcIm5vIGNvbnRleHQgaW4gcmVzdG9yZUZyYW1lYnVmZmVyIVwiKTt0aGlzLl9yY3R4LmJpbmRGcmFtZWJ1ZmZlcihlLCEwKTtjb25zdCB0PXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS52aWV3cG9ydDt0aGlzLl9yY3R4LnNldFZpZXdwb3J0KHQueCx0LnksdC53aWR0aCx0LmhlaWdodCl9X2JpbmRQcmV2aW91c0RlcHRoVG9TbG90KGUsdCl7Y29uc3Qgcz0hIXRoaXMuX3JjdHgscj0hIXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZTtpZighc3x8IXIpcmV0dXJuIDA7Y29uc3QgaT10aGlzLl9yZW5kZXJUYXJnZXRUb1Jlc3RvcmUuZmJvLmRlcHRoU3RlbmNpbFRleHR1cmU7cmV0dXJuIGk/KDA9PT10P3RoaXMuX3JjdHguYmluZFRleHR1cmUobnVsbCxlLCEwKTp0aGlzLl9yY3R4LmJpbmRUZXh0dXJlKGksZSwhMCksMSk6KHRoaXMuX2RiZyhJLkVycm9yLFwibm8gZGVwdGgvc3RlbmNpbCB0ZXh0dXJlIGV4aXN0cyFcIiksMCl9X21vZGlmeVJlc291cmNlQ291bnQoZSx0LHMpe2lmKCF0aGlzLl9yY3R4KXJldHVybiB2b2lkIHRoaXMuX2RiZyhJLkVycm9yLFwibW9kaWZ5QWxsb2NhdGlvbiBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpO2NvbnN0IHI9ZTsxPT09cz90aGlzLl9yY3R4Lmluc3RhbmNlQ291bnRlci5pbmNyZW1lbnQocix0KTp0aGlzLl9yY3R4Lmluc3RhbmNlQ291bnRlci5kZWNyZW1lbnQocix0KX1fc2V0QmxlbmRTdGF0ZShlLHQscyxyKXt0aGlzLl9yY3R4Pyh0aGlzLl9yY3R4LnNldEJsZW5kaW5nRW5hYmxlZCgxPT09ZSksdGhpcy5fcmN0eC5zZXRCbGVuZEZ1bmN0aW9uKHQscyksdGhpcy5fcmN0eC5zZXRCbGVuZEVxdWF0aW9uKHIpKTp0aGlzLl9kYmcoSS5FcnJvcixcInNldEJsZW5kU3RhdGUgY2FsbGJhY2sgaGFzIG5vIHJlbmRlcmluZyBjb250ZXh0IVwiKX1fc2V0RnJvbnRGYWNlKGUpe3RoaXMuX3JjdHg/dGhpcy5fcmN0eC5zZXRGcm9udEZhY2UoZSk6dGhpcy5fZGJnKEkuRXJyb3IsXCJzZXRGcm9udEZhY2UgY2FsbGJhY2sgaGFzIG5vIHJlbmRlcmluZyBjb250ZXh0IVwiKX1fc2V0RGVwdGhTdGVuY2lsU3RhdGVGdW5jdGlvbihlLHQscyl7dGhpcy5fcmN0eD8odGhpcy5fcmN0eC5zZXREZXB0aEZ1bmN0aW9uKHMpLHRoaXMuX3JjdHguc2V0RGVwdGhUZXN0RW5hYmxlZCgxPT09ZSksdGhpcy5fcmN0eC5zZXREZXB0aFdyaXRlRW5hYmxlZCgxPT09dCksdGhpcy5fcmN0eC5zZXRTdGVuY2lsVGVzdEVuYWJsZWQoITEpLHRoaXMuX3JjdHguc2V0U3RlbmNpbEZ1bmN0aW9uKFMuQUxXQVlTLDAsMjU1KSx0aGlzLl9yY3R4LnNldFN0ZW5jaWxPcFNlcGFyYXRlKFAuRlJPTlQsVS5LRUVQLFUuSU5DUixVLktFRVApLHRoaXMuX3JjdHguc2V0U3RlbmNpbE9wU2VwYXJhdGUoUC5CQUNLLFUuS0VFUCxVLkRFQ1IsVS5LRUVQKSk6dGhpcy5fZGJnKEkuRXJyb3IsXCJzZXREZXB0aFN0ZW5jaWxTdGF0ZUZ1bmN0aW9uIGNhbGxiYWNrIGhhcyBubyByZW5kZXJpbmcgY29udGV4dCFcIil9X3NldFJhc3Rlcml6ZXJTdGF0ZShlKXtpZih0aGlzLl9yY3R4KXN3aXRjaChlKXtjYXNlIG0uTm9uZTp0aGlzLl9yY3R4LnNldEZhY2VDdWxsaW5nRW5hYmxlZCghMSk7YnJlYWs7Y2FzZSBtLkJhY2s6dGhpcy5fcmN0eC5zZXRDdWxsRmFjZShQLkJBQ0spLHRoaXMuX3JjdHguc2V0RmFjZUN1bGxpbmdFbmFibGVkKCEwKTticmVhaztjYXNlIG0uRnJvbnQ6dGhpcy5fcmN0eC5zZXRDdWxsRmFjZShQLkZST05UKSx0aGlzLl9yY3R4LnNldEZhY2VDdWxsaW5nRW5hYmxlZCghMCl9ZWxzZSB0aGlzLl9kYmcoSS5FcnJvcixcInNldFJhc3Rlcml6ZXJTdGF0ZSBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV9zZXRWaWV3cG9ydChlLHQscyxyKXt0aGlzLl9yY3R4P3RoaXMuX3JjdHguc2V0Vmlld3BvcnQoZSx0LHMscik6dGhpcy5fZGJnKEkuRXJyb3IsXCJzZXRWaWV3cG9ydCBjYWxsYmFjayBoYXMgbm8gcmVuZGVyaW5nIGNvbnRleHQhXCIpfV91cGRhdGVNZW1vcnlVc2FnZSgpe3RoaXMuX2xheWVycy5mb3JFYWNoKCgoZSx0KT0+e2lmKGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlKXtjb25zdCBzPXRoaXMuX3Z4bC5lc3RpbWF0ZV9tZW1vcnlfdXNhZ2UodCk7cz49MCYmKGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSExLGUubGF5ZXJWaWV3LnNldFVzZWRNZW1vcnkocykpfX0pKX1fc3luY1JlcXVlc3RzUmVzcG9uc2VzKCl7dGhpcy5fbGF5ZXJzLmZvckVhY2goKChlLHQpPT57Y29uc3Qgcj1bXTtlLnJlc3BvbnNlcy5mb3JFYWNoKCgocyxpKT0+e3IucHVzaChpKSx0aGlzLl9kYmcoSS5SZXF1ZXN0UmVzcG9uc2UsXCJyZXNwb25kaW5nIGZvciByZXF1ZXN0SUQ6XCIraStcIiBzaXplOlwiK3Muc2l6ZSksdGhpcy5fdnhsLnJlc3BvbmQodCxpLHMpLHMucmVxdWVzdFR5cGUhPT1wLlRyZWVJbmRleCYmcy5yZXF1ZXN0VHlwZSE9PXAuU2VjdGlvbnx8KGUubmVlZE1lbW9yeVVzYWdlVXBkYXRlPSEwKX0pKTtjb25zdCBhPWUucmVzcG9uc2VzO2Zvcihjb25zdCBzIG9mIHIpYS5kZWxldGUocyk7Y29uc3Qgbj10aGlzLl92eGwuZ2V0X25ld19yZXF1ZXN0cyh0KSxvPWUuYWJvcnRDb250cm9sbGVyLnNpZ25hbDtmb3IoY29uc3QgbCBpbiBuKXtlLm91dHN0YW5kaW5nUmVxdWVzdENvdW50Kz0xLDE9PT1lLm91dHN0YW5kaW5nUmVxdWVzdENvdW50JiZlLmxheWVyVmlldy51cGRhdGluZ0ZsYWdDaGFuZ2VkKCk7Y29uc3QgdD1uW2xdLHI9e3Jlc3BvbnNlVHlwZTpcImFycmF5LWJ1ZmZlclwiLHNpZ25hbDpvfTt0aGlzLl9kYmcoSS5SZXF1ZXN0UmVzcG9uc2UsXCJtYWtpbmcgcmVxdWVzdElEOlwiK2wrXCIgdXJsOlwiK3QudXJsKSxzKHQudXJsLHIpLnRoZW4oKHM9PntlLm91dHN0YW5kaW5nUmVxdWVzdENvdW50LT0xLDA9PT1lLm91dHN0YW5kaW5nUmVxdWVzdENvdW50JiZlLmxheWVyVmlldy51cGRhdGluZ0ZsYWdDaGFuZ2VkKCksdGhpcy5fZGJnKEkuUmVxdWVzdFJlc3BvbnNlLFwiaGF2ZSByZXNwb25zZSBmb3IgcmVxdWVzdElEOlwiK2wpO2xldCByPTA7aWYocy5kYXRhLmJ5dGVMZW5ndGg+MCl7cj10aGlzLl92eGwuX21hbGxvYyhzLmRhdGEuYnl0ZUxlbmd0aCk7Y29uc3QgZT1uZXcgVWludDhBcnJheSh0aGlzLl92eGwuSEVBUFU4LmJ1ZmZlcixyLHMuZGF0YS5ieXRlTGVuZ3RoKSx0PW5ldyBVaW50OEFycmF5KHMuZGF0YSk7Zm9yKGxldCByPTA7cjxzLmRhdGEuYnl0ZUxlbmd0aDsrK3IpZVtyXT10W3JdfWEuc2V0KCtsLHtyZXNwb25zZVR5cGU6dC5yZXNwb25zZVR5cGUscHRyOnIsc2l6ZTpzLmRhdGEuYnl0ZUxlbmd0aCxzdWNjZXNzOiEwLHJlcXVlc3RUeXBlOnQucmVxdWVzdFR5cGV9KX0pKS5jYXRjaCgocz0+e2Uub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQtPTEsMD09PWUub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQmJmUubGF5ZXJWaWV3LnVwZGF0aW5nRmxhZ0NoYW5nZWQoKSxpKHMpfHwodGhpcy5fZGJnKEkuRXJyb3IsYHJlcXVlc3RJRDoke2x9IGZhaWxlZCwgZXJyb3I9JHtzLnRvU3RyaW5nKCl9YCksYS5zZXQoK2wse3Jlc3BvbnNlVHlwZTp0LnJlc3BvbnNlVHlwZSxwdHI6MCxzaXplOjAsc3VjY2VzczohMSxyZXF1ZXN0VHlwZTp0LnJlcXVlc3RUeXBlfSkpfSkpfX0pKX11cGRhdGVXYXNtQ2FtZXJhKGUpe3RoaXMuX3Z4bC5zZXRfcHJvamVjdGlvbl9tYXRyaXguYXBwbHkodGhpcy5fdnhsLGUucHJvamVjdGlvbk1hdHJpeCksdGhpcy5fdnhsLnNldF92aWV3X21hdHJpeC5hcHBseSh0aGlzLl92eGwsZS52aWV3TWF0cml4KSx0aGlzLl92eGwuc2V0X25lYXJfZmFyKGUubmVhcixlLmZhcil9aXNVcGRhdGluZyhlKXtpZighdGhpcy5fdnhsJiZ0aGlzLl92eGxQcm9taXNlKXJldHVybiEwO2NvbnN0IHQ9dGhpcy5fbGF5ZXJzLmdldChlKTtyZXR1cm4hIXQmJnQub3V0c3RhbmRpbmdSZXF1ZXN0Q291bnQ+MH1nZXRMYXllclRpbWVzKGUpe2NvbnN0IHQ9W107cmV0dXJuIHRoaXMuX2xheWVycy5mb3JFYWNoKCgocyxyKT0+e2lmKHMubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCl7Y29uc3Qgcz10aGlzLl92eGwuZ2V0X2xheWVyX2Vwb2NoX3RpbWVzKHIsZS5sYXllci5jdXJyZW50VmFyaWFibGVJZCk7Zm9yKGxldCBlPTA7ZTxzLmxlbmd0aDsrK2UpdC5wdXNoKHNbZV0pfX0pKSx0fWdldEN1cnJlbnRMYXllclRpbWVJbmRleChlKXtsZXQgdD0wO3JldHVybiB0aGlzLl9sYXllcnMuZm9yRWFjaCgoKHMscik9PntzLmxheWVyVmlldy53YXNtTGF5ZXJJZD09PWUud2FzbUxheWVySWQmJih0PXRoaXMuX3Z4bC5nZXRfbGF5ZXJfY3VycmVudF90aW1lX2lkKHIpKX0pKSx0fXNldEVuYWJsZWQoZSx0KXt0aGlzLl9sYXllcnMuZm9yRWFjaCgoKHMscik9PntzLmxheWVyVmlldy53YXNtTGF5ZXJJZD09PWUud2FzbUxheWVySWQmJih0aGlzLl92eGwuc2V0X2VuYWJsZWQocix0KSxzLm5lZWRNZW1vcnlVc2FnZVVwZGF0ZT0hMCx0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKSl9KSl9c2V0U3RhdGljU2VjdGlvbnMoZSx0KXtjb25zdCBzPXttYXNrOmcuU3RhdGljU2VjdGlvbnMsc3RhdGljU2VjdGlvbnM6dH07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRDdXJyZW50VmFyaWFibGUoZSx0KXtjb25zdCBzPXttYXNrOmcuQ3VycmVudFZhcmlhYmxlLGN1cnJlbnRWYXJpYWJsZTp0fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldFJlbmRlck1vZGUoZSx0KXtjb25zdCBzPXttYXNrOmcuUmVuZGVyTW9kZSxyZW5kZXJNb2RlOnR9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0VmVydGljYWxFeGFnZ2VyYXRpb25BbmRPZmZzZXQoZSx0LHMscil7Y29uc3QgaT17bWFzazpnLkV4YWdnZXJhdGlvbkFuZE9mZnNldCx2b2xTdHlsZURlc2M6e3ZvbHVtZUlkOnQsdmVydGljYWxFeGFnZ2VyYXRpb246cyx2ZXJ0aWNhbE9mZnNldDpyfX07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxpLCEwKX1zZXRWYXJpYWJsZVN0eWxlcyhlLHQpe2NvbnN0IHM9e21hc2s6Zy5WYXJpYWJsZVN0eWxlcyx2YXJpYWJsZVN0eWxlczp0fTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldFZvbHVtZVN0eWxlcyhlLHQpe2NvbnN0IHM9e21hc2s6Zy5Wb2x1bWVTdHlsZXMsdm9sdW1lU3R5bGVzOnR9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0RW5hYmxlRHluYW1pY1NlY3Rpb25zKGUsdCl7Y29uc3Qgcz17bWFzazpnLkNvbnRhaW5lclZpc2liaWxpdHksY29udGFpbmVySXNWaXNpYmxlOnQsY29udGFpbmVyOmYuRHluYW1pY1NlY3Rpb25zfTtyZXR1cm4gdGhpcy5fZG9NYXNrZWRVSVVwZGF0ZShlLHMsITApfXNldEVuYWJsZUlzb3N1cmZhY2VzKGUsdCl7Y29uc3Qgcz17bWFzazpnLkNvbnRhaW5lclZpc2liaWxpdHksY29udGFpbmVySXNWaXNpYmxlOnQsY29udGFpbmVyOmYuSXNvc3VyZmFjZXN9O3JldHVybiB0aGlzLl9kb01hc2tlZFVJVXBkYXRlKGUscywhMCl9c2V0RW5hYmxlU2VjdGlvbnMoZSx0KXtjb25zdCBzPXttYXNrOmcuQ29udGFpbmVyVmlzaWJpbGl0eSxjb250YWluZXJJc1Zpc2libGU6dCxjb250YWluZXI6Zi5TdGF0aWNTZWN0aW9uc307cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxzLCEwKX1zZXRBbmFseXNpc1NsaWNlKGUsdCxzLHIpe2NvbnN0IGk9e21hc2s6Zy5BbmFseXNpc1NsaWNlLGFuYWx5c2lzU2xpY2U6e3BvaW50OnMsbm9ybWFsOnIsZW5hYmxlZDp0fX07cmV0dXJuIHRoaXMuX2RvTWFza2VkVUlVcGRhdGUoZSxpLCEwKX1fZG9NYXNrZWRVSVVwZGF0ZShlLHQscyl7aWYoIXRoaXMuX3Z4bClyZXR1cm4hMTtsZXQgcj0hMTtyZXR1cm4gdGhpcy5fbGF5ZXJzLmZvckVhY2goKChzLGkpPT57aWYocy5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkKXtjb25zdCBlPXtzdHI6SlNPTi5zdHJpbmdpZnkodCksYnl0ZUNvdW50OjAscHRyOjAsaXNSZXVzYWJsZTohMX07dGhpcy5fYWxsb2NhdGVCbG9jayhlKSYmKHI9MT09PXRoaXMuX3Z4bC5oYW5kbGVfbWFza2VkX3VpX3VwZGF0ZShpLGUucHRyLGUuYnl0ZUNvdW50KSxlLmlzUmV1c2FibGV8fHRoaXMuX3Z4bC5fZnJlZShlLnB0cikpfX0pKSxyJiZzJiZ0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKSxyfV9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihlLHQscyxyLGkpe3JldHVybiBlWzMqdF09c1swXSxlWzMqdCsxXT1zWzFdLGVbMyp0KzJdPXNbMl0sZVszKih0Kz0xKV09clswXSxlWzMqdCsxXT1yWzFdLGVbMyp0KzJdPXJbMl0sZVszKih0Kz0xKV09aVswXSxlWzMqdCsxXT1pWzFdLGVbMyp0KzJdPWlbMl0sdCs9MX1fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGUsdCxzKXtyZXR1cm4gZVszKnRdPXNbMF0sZVszKnQrMV09c1sxXSxlWzMqdCsyXT1zWzJdLHQrPTF9X2RvQ2FwdHVyZUZydXN0dW0oKXtpZighdGhpcy5fdnhsKXJldHVybjtjb25zdCBlPTM2LHQ9ZS8zLHM9dGhpcy5fdnhsLl9tYWxsb2MoMyplKkZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCkscj1uZXcgRmxvYXQzMkFycmF5KHRoaXMuX3Z4bC5IRUFQRjMyLmJ1ZmZlcixzLDMqZSksaT10aGlzLl92eGwuX21hbGxvYygzKnQqRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5UKSxhPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fdnhsLkhFQVBGMzIuYnVmZmVyLGksZSksbj10aGlzLl9mcnVzdHVtLnBvaW50c1tfLk5FQVJfQk9UVE9NX0xFRlRdLG89dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5ORUFSX0JPVFRPTV9SSUdIVF0sbD10aGlzLl9mcnVzdHVtLnBvaW50c1tfLk5FQVJfVE9QX1JJR0hUXSxoPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uTkVBUl9UT1BfTEVGVF0sZD10aGlzLl9mcnVzdHVtLnBvaW50c1tfLkZBUl9CT1RUT01fTEVGVF0sdT10aGlzLl9mcnVzdHVtLnBvaW50c1tfLkZBUl9CT1RUT01fUklHSFRdLG09dGhpcy5fZnJ1c3R1bS5wb2ludHNbXy5GQVJfVE9QX1JJR0hUXSxwPXRoaXMuX2ZydXN0dW0ucG9pbnRzW18uRkFSX1RPUF9MRUZUXTtsZXQgZz0wLGY9MDtjb25zdCB4PXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuTkVBUl07Zz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsbCxvLG4pLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZix4KSxnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxuLGgsbCksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLHgpO2NvbnN0IHk9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5GQVJdO2c9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLGQsdSxtKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYseSksZz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsbSxwLGQpLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZix5KTtjb25zdCB2PXRoaXMuX2ZydXN0dW0ucGxhbmVzW2MuVE9QXTtnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxtLGwsaCksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLHYpLGc9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLGgscCxtKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsdik7Y29uc3QgYj10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLkJPVFRPTV07Zz10aGlzLl9hZGRUcmlhbmdsZVRvV2FzbUJ1ZmZlcihyLGcsbixvLHUpLGY9dGhpcy5fYWRkTm9ybWFsVG9XYXNtQnVmZmVyKGEsZixiKSxnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyx1LGQsbiksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLGIpO2NvbnN0IHc9dGhpcy5fZnJ1c3R1bS5wbGFuZXNbYy5MRUZUXTtnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxoLG4sZCksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLHcpLGc9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLGQscCxoKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsdyk7Y29uc3QgVD10aGlzLl9mcnVzdHVtLnBsYW5lc1tjLlJJR0hUXTtnPXRoaXMuX2FkZFRyaWFuZ2xlVG9XYXNtQnVmZmVyKHIsZyxsLG0sdSksZj10aGlzLl9hZGROb3JtYWxUb1dhc21CdWZmZXIoYSxmLFQpLGc9dGhpcy5fYWRkVHJpYW5nbGVUb1dhc21CdWZmZXIocixnLHUsbyxsKSxmPXRoaXMuX2FkZE5vcm1hbFRvV2FzbUJ1ZmZlcihhLGYsVCksLTEhPT10aGlzLl9mcnVzdHVtUmVuZGVyYWJsZUlkJiZ0aGlzLl92eGwucmVtb3ZlX2dlbmVyaWNfbWVzaCh0aGlzLl9mcnVzdHVtUmVuZGVyYWJsZUlkKSx0aGlzLl9mcnVzdHVtUmVuZGVyYWJsZUlkPXRoaXMuX3Z4bC5hZGRfZ2VuZXJpY19tZXNoKHMsMyplLGksZSwyNTUsMCwwLDY0KSx0aGlzLl92eGwuX2ZyZWUocyksdGhpcy5fdnhsLl9mcmVlKGkpLHRoaXMuX2NhcHR1cmVGcnVzdHVtPSExLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfWNhcHR1cmVGcnVzdHVtKCl7bnVsbD09PXRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlciYmKHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlcj13LmNyZWF0ZSh5LkxvY2FsLHUoITEsdGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2UpKSksbnVsbD09PXRoaXMuX2ZydXN0dW0mJih0aGlzLl9mcnVzdHVtPW5ldyBiKHRoaXMuX3JlbmRlckNvb3Jkc0hlbHBlcikpLHRoaXMuX2NhcHR1cmVGcnVzdHVtPSEwLG51bGwhPT10aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0JiZ0aGlzLl9yZW5kZXJQbHVnaW5Db250ZXh0LnJlcXVlc3RSZW5kZXIoKX10b2dnbGVGdWxsVm9sdW1lRXh0ZW50RHJhdyhlKXt0aGlzLl92eGwmJnRoaXMuX2xheWVycy5mb3JFYWNoKCgodCxzKT0+e3QubGF5ZXJWaWV3Lndhc21MYXllcklkPT09ZS53YXNtTGF5ZXJJZCYmKHRoaXMuX3Z4bC50b2dnbGVfZnVsbF92b2x1bWVfZXh0ZW50X2RyYXcocyksdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCkpfSkpfWFkZFZveGVsTGF5ZXIoZSl7aWYoIXRoaXMuX3Z4bCl7Y29uc3QgdD17bGF5ZXJWaWV3OmUscmVzb2x2ZUNhbGxiYWNrOm51bGwscmVqZWN0Q2FsbGJhY2s6bnVsbH0scz1uZXcgUHJvbWlzZSgoKGUscyk9Pnt0LnJlc29sdmVDYWxsYmFjaz1lLHQucmVqZWN0Q2FsbGJhY2s9c30pKTtyZXR1cm4gdGhpcy5fbmV3TGF5ZXJzLnB1c2godCksc31jb25zdCB0PXRoaXMuX2FkZFZveGVsTGF5ZXIoZSk7cmV0dXJuIHQ8MD9Qcm9taXNlLnJlamVjdCgtMSk6UHJvbWlzZS5yZXNvbHZlKHQpfXJlbW92ZVZveGVsTGF5ZXIoZSl7aWYoIXRoaXMuX3Z4bCl7Y29uc3QgdD10aGlzLl9uZXdMYXllcnMuZmluZEluZGV4KCh0PT5lLnVpZD09PXQubGF5ZXJWaWV3LnVpZCkpO3Q+PTAmJih0aGlzLl9uZXdMYXllcnNbdF0ucmVzb2x2ZUNhbGxiYWNrKC0xKSx0aGlzLl9uZXdMYXllcnMuc3BsaWNlKHQsMSkpO2NvbnN0IHM9dGhpcy5fbmV3TGF5ZXJzLmxlbmd0aDtyZXR1cm4gMD09PXMmJih0aGlzLl9kYmcoSS5MaWZldGltZSxcIiBubyB2b3hlbCBsYXllcnMgbGVmdCBhZnRlciByZW1vdmluZyBhIGxheWVyLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdGhpcy5kZXN0cm95KCkpLHN9bGV0IHQ9LTE7dGhpcy5fbGF5ZXJzLmZvckVhY2goKChzLHIpPT57aWYocy5sYXllclZpZXcud2FzbUxheWVySWQ9PT1lLndhc21MYXllcklkKXt0PXIscy5hYm9ydENvbnRyb2xsZXIuYWJvcnQoKSx0aGlzLl92eGwucmVtb3ZlX2xheWVyKHQpO2NvbnN0IGk9dGhpcy5sYXllclVpZC5pbmRleE9mKGUubGF5ZXIudWlkKTstMSE9PWkmJnRoaXMubGF5ZXJVaWQuc3BsaWNlKGksMSl9fSkpLHQ+PTAmJnRoaXMuX2xheWVycy5kZWxldGUodCk7Y29uc3Qgcz10aGlzLl9sYXllcnMuc2l6ZTtyZXR1cm4gMD09PXMmJih0aGlzLl9kYmcoSS5MaWZldGltZSxcIiBubyB2b3hlbCBsYXllcnMgbGVmdCBhZnRlciByZW1vdmluZyBhIGxheWVyLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdGhpcy5kZXN0cm95KCkpLHN9X2dldEJsb2NrU2l6ZShlKXtmb3IoY29uc3QgdCBvZiB0aGlzLl93YXNtTWVtQmxvY2tTaXplcylpZihlPHQpcmV0dXJuIHQ7cmV0dXJuLTF9X2FsbG9jYXRlQmxvY2soZSl7ZS5ieXRlQ291bnQ9dGhpcy5fdnhsLmxlbmd0aEJ5dGVzVVRGOChlLnN0cikrMTtjb25zdCB0PXRoaXMuX2dldEJsb2NrU2l6ZShlLmJ5dGVDb3VudCk7cmV0dXJuIHQ8MD8oZS5pc1JldXNhYmxlPSExLGUucHRyPXRoaXMuX3Z4bC5fbWFsbG9jKGUuYnl0ZUNvdW50KSk6KGUuaXNSZXVzYWJsZT0hMCxlLnB0cj10aGlzLl93YXNtTWVtQmxvY2tzLmdldCh0KSwwPT09ZS5wdHImJihlLnB0cj10aGlzLl92eGwuX21hbGxvYyh0KSx0aGlzLl93YXNtTWVtQmxvY2tzLnNldCh0LGUucHRyKSkpLDAhPT1lLnB0ciYmKHRoaXMuX3Z4bC5zdHJpbmdUb1VURjgoZS5zdHIsZS5wdHIsZS5ieXRlQ291bnQpLCEwKX1fZ2V0VGltZUFyZ3MoZSl7bGV0IHQ9LU51bWJlci5NQVhfVkFMVUUscz1OdW1iZXIuTUFYX1ZBTFVFLHI9ITE7cmV0dXJuIG51bGwhPWUmJihlLmlzQWxsVGltZT9yPSEwOihudWxsIT1lLnN0YXJ0JiYocj0hMCx0PWUuc3RhcnQuZ2V0VGltZSgpLzFlMyksbnVsbCE9ZS5lbmQmJihyPSEwLHM9ZS5lbmQuZ2V0VGltZSgpLzFlMykpKSx7c3RhcnRUaW1lOnQsZW5kVGltZTpzLHVzZVRpbWU6cn19X2FkZFZveGVsTGF5ZXIoZSl7Y29uc3QgdD1lLmxheWVyO2xldCBzPS0xO2NvbnN0IHI9dC5nZXRDb25maWd1cmF0aW9uKCk7aWYoci5sZW5ndGg8MSlyZXR1cm4tMTtjb25zdCBpPXtzdHI6cixieXRlQ291bnQ6MCxwdHI6MCxpc1JldXNhYmxlOiExfTtpZighdGhpcy5fYWxsb2NhdGVCbG9jayhpKSlyZXR1cm4tMTtjb25zdCBhPXRoaXMuX2dldFRpbWVBcmdzKHRoaXMudmlldz8udGltZUV4dGVudCksbj10aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZS5pc1dHUzg0JiZ0LnNwYXRpYWxSZWZlcmVuY2UuaXNXR1M4ND8xMTEzMTkuNDkwNzkzMjczNTc6MTtpZihzPXRoaXMuX3Z4bC5hZGRfbGF5ZXIodC5zZXJ2aWNlUm9vdCxpLnB0cixpLmJ5dGVDb3VudCxuLG4sYS5zdGFydFRpbWUsYS5lbmRUaW1lLGEudXNlVGltZSx0aGlzLl90b1dhc21RdWFsaXR5KHRoaXMudmlldy5xdWFsaXR5UHJvZmlsZSkpLGkuaXNSZXVzYWJsZXx8dGhpcy5fdnhsLl9mcmVlKGkucHRyKSxzPj0wKXt0LnRlc3Q/LmNvbnN0YW50VXBzY2FsaW5nJiYodGhpcy5fc2V0VXBzY2FsaW5nTGltaXRzKDAsLjI1LC4yNSksdGhpcy5fc2V0VXBzY2FsaW5nTGltaXRzKDEsLjUsLjUpLHRoaXMuX3NldFVwc2NhbGluZ0xpbWl0cygyLC43NSwuNzUpKTtjb25zdCByPW5ldyBBYm9ydENvbnRyb2xsZXI7aWYodGhpcy5fbGF5ZXJzLnNldChzLHtsYXllclZpZXc6ZSxyZXNwb25zZXM6bmV3IE1hcCxvdXRzdGFuZGluZ1JlcXVlc3RDb3VudDowLGFib3J0Q29udHJvbGxlcjpyLG5lZWRNZW1vcnlVc2FnZVVwZGF0ZTohMX0pLHRoaXMubGF5ZXJVaWQucHVzaChlLmxheWVyLnVpZCksIXRoaXMuX2hhbGZJbnRUZXh0dXJlc0F2YWlsYWJsZXx8aGFzKFwibWFjXCIpKXtjb25zdCB0PVtdO2xldCBzPVwiXCI7Zm9yKGNvbnN0IHIgb2YgZS5sYXllci52YXJpYWJsZXMpXCJJbnQxNlwiIT09ci5yZW5kZXJpbmdGb3JtYXQudHlwZSYmXCJVSW50MTZcIiE9PXIucmVuZGVyaW5nRm9ybWF0LnR5cGV8fCh0LnB1c2goci5uYW1lKSxyLmlkPT09ZS5sYXllci5jdXJyZW50VmFyaWFibGVJZCYmKHM9ci5uYW1lKSk7XCJcIiE9PXMmJmsuZXJyb3IoXCIjYWRkVm94ZWxMYXllcl9lcnJvcigpXCIsZS5sYXllcixgVGhlIHZveGVsIGxheWVyICcke2UubGF5ZXIudGl0bGV9JyBjYW5ub3QgcmVuZGVyIHRoZSBjdXJyZW50IHZhcmlhYmxlICcke3N9JyBpbiB0aGlzIGJyb3dzZXJgKSx0Lmxlbmd0aD4wJiZrLndhcm4oXCIjYWRkVm94ZWxMYXllcl93YXJuaW5nKClcIixlLmxheWVyLGBUaGUgdm94ZWwgbGF5ZXIgJyR7ZS5sYXllci50aXRsZX0nIGNhbm5vdCByZW5kZXIgdGhlIHZhcmlhYmxlcyAnJHt0LnRvU3RyaW5nKCl9JyBpbiB0aGlzIGJyb3dzZXJgKX1pZighdGhpcy5fdGV4dHVyZUZsb2F0TGluZWFyQXZhaWxhYmxlKXtjb25zdCB0PVtdO2xldCBzPVwiXCI7Zm9yKGNvbnN0IHIgb2YgZS5sYXllci52YXJpYWJsZXMpXCJGbG9hdDMyXCI9PT1yLnJlbmRlcmluZ0Zvcm1hdC50eXBlJiYodC5wdXNoKHIubmFtZSksci5pZD09PWUubGF5ZXIuY3VycmVudFZhcmlhYmxlSWQmJihzPXIubmFtZSkpO1wiXCIhPT1zJiZrLmVycm9yKFwiI2FkZFZveGVsTGF5ZXJfZXJyb3IoKVwiLGUubGF5ZXIsYFRoZSB2b3hlbCBsYXllciAnJHtlLmxheWVyLnRpdGxlfScgY2Fubm90IHJlbmRlciB0aGUgY3VycmVudCB2YXJpYWJsZSAnJHtzfScgaW4gdGhpcyBicm93c2VyYCksdC5sZW5ndGg+MCYmay53YXJuKFwiI2FkZFZveGVsTGF5ZXJfd2FybmluZygpXCIsZS5sYXllcixgVGhlIHZveGVsIGxheWVyICcke2UubGF5ZXIudGl0bGV9JyBjYW5ub3QgcmVuZGVyIHRoZSB2YXJpYWJsZXMgJyR7dC50b1N0cmluZygpfScgaW4gdGhpcyBicm93c2VyYCl9cmV0dXJuIGhhcyhcImVzcmktbW9iaWxlXCIpJiZrLndhcm5PbmNlKFwiTW9iaWxlIHN1cHBvcnQgZGlmZmVycyBhY3Jvc3MgZGV2aWNlcy4gVm94ZWwgbGF5ZXIgbWlnaHQgbm90IGRpc3BsYXkgYXMgZXhwZWN0ZWQuXCIpLHN9cmV0dXJuLTF9cHJlcGFyZVJlbmRlcihlKXtpZighdGhpcy5fdnhsKXJldHVybjtjb25zdCB0PWUuYmluZFBhcmFtZXRlcnMuY2FtZXJhLnZpZXdGb3J3YXJkLHM9ZS5iaW5kUGFyYW1ldGVycy5jYW1lcmEuZXllO3RoaXMuX3Z4bC51cGRhdGVfY2FtZXJhX3Bvc19hbmRfZGlyZWN0aW9uKHNbMF0sc1sxXSxzWzJdLHRbMF0sdFsxXSx0WzJdKTtjb25zdCByPXRoaXMuX3Z4bC5jdWxsKCk7dGhpcy5fZGJnKEkuUmVxdWVzdFJlc3BvbnNlLFwibWlzc2luZ1Jlc291cmNlQ291bnQ9XCIrciksdGhpcy5fbW9yZVRvTG9hZD1yPjAsdGhpcy5faGF2ZVByZXBhcmVkV2l0aEFsbExheWVycz0wPT09dGhpcy5fbmV3TGF5ZXJzLmxlbmd0aCx0aGlzLl91cGRhdGVNZW1vcnlVc2FnZSgpfXJlbmRlck5vZGUoZSl7aWYoIXRoaXMuX3Z4bClyZXR1cm47Zm9yKGNvbnN0IHMgb2YgdGhpcy5fbmV3TGF5ZXJzKXtjb25zdCBlPXRoaXMuX2FkZFZveGVsTGF5ZXIocy5sYXllclZpZXcpOy0xPT09ZT9zLnJlamVjdENhbGxiYWNrKC0xKTpzLnJlc29sdmVDYWxsYmFjayhlKX1pZih0aGlzLl9uZXdMYXllcnM9W10sMD09PXRoaXMuX2xheWVycy5zaXplKXJldHVybiB2b2lkIHRoaXMuX2RiZyhJLkVycm9yLFwiTm8gdm94ZWwgbGF5ZXJzIGJ1dCBSZW5kZXJQbHVnaW4gaW5zdGFuY2UgaXMgYmVpbmcgYXNrZWQgdG8gcmVuZGVyIVwiKTt0aGlzLl9sYXN0RnJhbWVXYXNTdGF0aW9uYXJ5PXRoaXMudmlldy5zdGF0aW9uYXJ5LHRoaXMuX3N5bmNSZXF1ZXN0c1Jlc3BvbnNlcygpLHRoaXMuX2JlZm9yZURyYXcoKSx0aGlzLl92eGwuYmVnaW5fY29sb3JfZnJhbWUoIXRoaXMudmlldy5fc3RhZ2UucmVuZGVyZXIuaXNGZWF0dXJlRW5hYmxlZChWLkhpZ2hSZXNvbHV0aW9uVm94ZWwpLGUuYmluZFBhcmFtZXRlcnMubGlnaHRpbmcubWFpbkxpZ2h0LmRpcmVjdGlvblswXSxlLmJpbmRQYXJhbWV0ZXJzLmxpZ2h0aW5nLm1haW5MaWdodC5kaXJlY3Rpb25bMV0sZS5iaW5kUGFyYW1ldGVycy5saWdodGluZy5tYWluTGlnaHQuZGlyZWN0aW9uWzJdKTtjb25zdCB0PXRoaXMuX3JlbmRlclRhcmdldFRvUmVzdG9yZS52aWV3cG9ydDt0LndpZHRoPT09dGhpcy5fdmlld3BvcnRXaWR0aCYmdC5oZWlnaHQ9PT10aGlzLl92aWV3cG9ydEhlaWdodHx8KHRoaXMuX3ZpZXdwb3J0V2lkdGg9dC53aWR0aCx0aGlzLl92aWV3cG9ydEhlaWdodD10LmhlaWdodCx0aGlzLl92eGwuc2V0X3ZpZXdwb3J0KHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuX2xheWVycy5mb3JFYWNoKChlPT57ZS5uZWVkTWVtb3J5VXNhZ2VVcGRhdGU9ITB9KSkpLDA9PT10LngmJjA9PT10Lnl8fHRoaXMuX2RiZyhJLkVycm9yLFwiVW5zdXBwb3J0ZWQgdmlld3BvcnQgcGFyYW1ldGVycyBkZXRlY3RlZCFcIiksdGhpcy51cGRhdGVXYXNtQ2FtZXJhKGUuYmluZFBhcmFtZXRlcnMuY2FtZXJhKSx0aGlzLl9jYXB0dXJlRnJ1c3R1bSYmKHRoaXMuX2ZydXN0dW0udXBkYXRlKGUuYmluZFBhcmFtZXRlcnMuY2FtZXJhKSx0aGlzLl9kb0NhcHR1cmVGcnVzdHVtKCkpLHRoaXMuX3Z4bC5kcmF3KCksdGhpcy5fYWZ0ZXJEcmF3KCksKHRoaXMuX21vcmVUb0xvYWR8fCF0aGlzLl9oYXZlUHJlcGFyZWRXaXRoQWxsTGF5ZXJzJiZ0aGlzLl9sYXllcnMuc2l6ZT4wKSYmdGhpcy5fcmVuZGVyUGx1Z2luQ29udGV4dC5yZXF1ZXN0UmVuZGVyKCl9ZGVzdHJveSgpe3RoaXMuX2RiZyhJLkxpZmV0aW1lLFwiLS1kZXN0cm95LS1cIiksdGhpcy5fcmVtb3ZlUmVuZGVyUGx1Z2luKCksdGhpcy5fdnhsJiYodGhpcy5fbGF5ZXJzLmZvckVhY2goKGU9PntlLmFib3J0Q29udHJvbGxlci5hYm9ydCgpfSkpLHRoaXMuX3dhc21NZW1CbG9ja3MuZm9yRWFjaCgoZT0+ezAhPT1lJiZ0aGlzLl92eGwuX2ZyZWUoZSl9KSksdGhpcy5fdnhsLnVuaW5pdGlhbGl6ZV92b3hlbF93YXNtKCksdGhpcy5fdnhsPW51bGwpfV9pbml0aWFsaXplV2FzbShlKXtyZXR1cm4gdGhpcy5fdnhsP1Byb21pc2UucmVzb2x2ZSgpOih0aGlzLl92eGxQcm9taXNlfHwodGhpcy5fdnhsUHJvbWlzZT14KGUpLnRoZW4oKGU9PntpZih0aGlzLl92eGw9ZSx0aGlzLl92eGxQcm9taXNlPW51bGwsdGhpcy5fbmV3TGF5ZXJzLmxlbmd0aDw9MClyZXR1cm4gdGhpcy5fZGJnKEkuTGlmZXRpbWUsXCIgbm8gdm94ZWwgbGF5ZXJzIGxlZnQgYWZ0ZXIgV0FTTSBkb3dubG9hZGVkLCByZW1vdmluZyBSZW5kZXJQbHVnaW4gYW5kIGRlc3Ryb3lpbmdcIiksdm9pZCB0aGlzLmRlc3Ryb3koKTtjb25zdCB0PXRoaXMuX2dldFRpbWVBcmdzKHRoaXMudmlldz8udGltZUV4dGVudCkscz10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fcmVzdG9yZUZyYW1lYnVmZmVyLmJpbmQodGhpcyksXCJ2XCIpLHI9dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX3NldEJsZW5kU3RhdGUuYmluZCh0aGlzKSxcInZpaWlpXCIpLGk9dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX3NldEZyb250RmFjZS5iaW5kKHRoaXMpLFwidmlcIiksYT10aGlzLl92eGwuYWRkRnVuY3Rpb24odGhpcy5fc2V0UmFzdGVyaXplclN0YXRlLmJpbmQodGhpcyksXCJ2aVwiKSxuPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9zZXREZXB0aFN0ZW5jaWxTdGF0ZUZ1bmN0aW9uLmJpbmQodGhpcyksXCJ2aWlpXCIpLG89dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX3NldFZpZXdwb3J0LmJpbmQodGhpcyksXCJ2aWlpaVwiKSxsPXRoaXMuX3Z4bC5hZGRGdW5jdGlvbih0aGlzLl9iaW5kUHJldmlvdXNEZXB0aFRvU2xvdC5iaW5kKHRoaXMpLFwiaWlpXCIpLGg9dGhpcy5fdnhsLmFkZEZ1bmN0aW9uKHRoaXMuX21vZGlmeVJlc291cmNlQ291bnQuYmluZCh0aGlzKSxcInZpaWlcIiksZD10aGlzLl9oYWxmSW50VGV4dHVyZXNBdmFpbGFibGUmJiFoYXMoXCJtYWNcIiksdT10aGlzLl90ZXh0dXJlRmxvYXRMaW5lYXJBdmFpbGFibGU7dGhpcy5fdnhsLmluaXRpYWxpemVfdm94ZWxfd2FzbShzLHIsaSxhLG4sbyxsLGgsdC5zdGFydFRpbWUsdC5lbmRUaW1lLHQudXNlVGltZSxkLHUpLHRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQmJnRoaXMuX3JlbmRlclBsdWdpbkNvbnRleHQucmVxdWVzdFJlbmRlcigpfSkpLmNhdGNoKCgoKT0+e2Zvcihjb25zdCBlIG9mIHRoaXMuX25ld0xheWVycyllLnJlamVjdENhbGxiYWNrKC0yKTt0aGlzLl9kYmcoSS5FcnJvcixcIiBXQVNNIGZhaWxlZCB0byBkb3dubG9hZCwgcmVtb3ZpbmcgUmVuZGVyUGx1Z2luIGFuZCBkZXN0cm95aW5nXCIpLHRoaXMuZGVzdHJveSgpfSkpKSx0aGlzLl92eGxQcm9taXNlKX1waWNrRGVwdGgoZSx0LHMpe2lmKCF0aGlzLl92eGx8fCF0aGlzLl9yY3R4fHwwPT09dGhpcy5fbGF5ZXJzLnNpemUpcmV0dXJuIG51bGw7Y29uc3Qgcj1zLnZpZXdwb3J0WzNdLXQ7aWYoZTwwfHxlPnMudmlld3BvcnRbMl18fHQ8MHx8dD5zLnZpZXdwb3J0WzNdKXJldHVybiB0aGlzLl9kYmcoSS5FcnJvcixgW2pzXSBwaWNrRGVwdGg6IG91dE9mUmFuZ2UsIHNjcmVlblhZPVske2UudG9GaXhlZCgwKX0sICR7ci50b0ZpeGVkKDApfV1dYCksbnVsbDt0aGlzLl9iZWZvcmVEcmF3KCk7Y29uc3QgaT1zLnZpZXdGb3J3YXJkLGE9cy5leWU7dGhpcy5fdnhsLnVwZGF0ZV9jYW1lcmFfcG9zX2FuZF9kaXJlY3Rpb24oYVswXSxhWzFdLGFbMl0saVswXSxpWzFdLGlbMl0pLHRoaXMudXBkYXRlV2FzbUNhbWVyYShzKSx0aGlzLl92eGwuYmVnaW5fZnJhbWUoKTtjb25zdCBuPXRoaXMuX3Z4bC5waWNrX2RlcHRoKGUscik7aWYodGhpcy5fYWZ0ZXJEcmF3KCksbi5zdWNjZXNzKXtyZXR1cm4gbi5kaXN0YW5jZVRvQ2FtZXJhfXJldHVybiBudWxsfXBpY2tPYmplY3QoZSx0LHMscil7aWYoIXRoaXMuX3Z4bHx8IXRoaXMuX3JjdHh8fDA9PT10aGlzLl9sYXllcnMuc2l6ZSlyZXR1cm4gbnVsbDtjb25zdCBpPU1hdGgucm91bmQoZSksYT1NYXRoLnJvdW5kKHQpO2lmKGk8MHx8aT5zLnZpZXdwb3J0WzJdfHxhPDB8fGE+cy52aWV3cG9ydFszXSlyZXR1cm4gdGhpcy5fZGJnKEkuRXJyb3IsYFtqc10gcGlja09iamVjdDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9WyR7aX0sICR7YX1dLCB2cD1bJHtzLnZpZXdwb3J0LnRvU3RyaW5nKCl9XWApLG51bGw7dGhpcy5fYmVmb3JlRHJhdygpO2NvbnN0IG49cy52aWV3Rm9yd2FyZCxvPXMuZXllO3RoaXMuX3Z4bC51cGRhdGVfY2FtZXJhX3Bvc19hbmRfZGlyZWN0aW9uKG9bMF0sb1sxXSxvWzJdLG5bMF0sblsxXSxuWzJdKSx0aGlzLnVwZGF0ZVdhc21DYW1lcmEocyksdGhpcy5fdnhsLmJlZ2luX2ZyYW1lKCk7bGV0IGw9bnVsbDtpZigwPT09ci5sZW5ndGgpbD10aGlzLl92eGwucGlja19vYmplY3QoaSxhLDAsMCk7ZWxzZXtjb25zdCBlPXtzdHI6SlNPTi5zdHJpbmdpZnkoe2xheWVySWRzOnJ9KSxieXRlQ291bnQ6MCxwdHI6MCxpc1JldXNhYmxlOiExfTt0aGlzLl9hbGxvY2F0ZUJsb2NrKGUpJiYobD10aGlzLl92eGwucGlja19vYmplY3QoaSxhLGUucHRyLGUuYnl0ZUNvdW50KSxlLmlzUmV1c2FibGV8fHRoaXMuX3Z4bC5fZnJlZShlLnB0cikpfXJldHVybiB0aGlzLl9hZnRlckRyYXcoKSxsfV9iZWZvcmVEcmF3KCl7dGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlPXtmYm86dGhpcy5fcmN0eC5nZXRCb3VuZEZyYW1lYnVmZmVyT2JqZWN0KCksdmlld3BvcnQ6dGhpcy5fcmN0eC5nZXRWaWV3cG9ydCgpfSx0aGlzLl9yY3R4LnNldFBvbHlnb25PZmZzZXRGaWxsRW5hYmxlZCghMSksdGhpcy5fcmN0eC5zZXRTY2lzc29yVGVzdEVuYWJsZWQoITEpLHRoaXMuX3JjdHguc2V0Q29sb3JNYXNrKCEwLCEwLCEwLCEwKX1fYWZ0ZXJEcmF3KCl7dGhpcy5fcmVuZGVyVGFyZ2V0VG9SZXN0b3JlLmZibz1udWxsLHRoaXMuX3JjdHguZXh0ZXJuYWxUZXh0dXJlVW5pdFVwZGF0ZSh0aGlzLl92eGwuZ2V0X3RleHR1cmVfdW5pdHNfYm91bmRfaW5fZnJhbWUoKSx0aGlzLl92eGwuZ2V0X2FjdGl2ZV90ZXh0dXJlX3VuaXQoKSksdGhpcy5fcmN0eC5leHRlcm5hbFZlcnRleEFycmF5T2JqZWN0VXBkYXRlKCksdGhpcy5fcmN0eC5leHRlcm5hbFZlcnRleEJ1ZmZlclVwZGF0ZSgpLHRoaXMuX3JjdHguZXh0ZXJuYWxQcm9ncmFtVXBkYXRlKCl9aW50ZXJzZWN0KGUsdCxzLHIsaSl7aWYoIXRoaXMuX3Z4bHx8IXRoaXMuX3JjdHh8fDA9PT10aGlzLl9sYXllcnMuc2l6ZXx8IWUub3B0aW9ucy5zZWxlY3Rpb25Nb2RlfHxlLm9wdGlvbnMuaXNGaWx0ZXJlZClyZXR1cm47aWYoaVswXTwwfHxpWzBdPmUuY2FtZXJhLnZpZXdwb3J0WzJdfHxpWzFdPDB8fGlbMV0+ZS5jYW1lcmEudmlld3BvcnRbM10pcmV0dXJuIHRoaXMuX2RiZyhJLkVycm9yLGBbanNdIFZveGVsV2FzbVBlclNjZW5lLmludGVyc2VjdDogb3V0T2ZSYW5nZSwgc2NyZWVuWFk9WyR7aVswXS50b0ZpeGVkKDApfSwgJHtpWzFdLnRvRml4ZWQoMCl9XWApLG51bGw7Y29uc3QgYT1bXTt0aGlzLl9sYXllcnMuZm9yRWFjaCgodD0+e2Uub3B0aW9ucy5maWx0ZXJlZExheWVyVWlkcy5pbmNsdWRlcyh0LmxheWVyVmlldy5sYXllci51aWQpJiZhLnB1c2godC5sYXllclZpZXcud2FzbUxheWVySWQpfSkpO2NvbnN0IG49dGhpcy5waWNrT2JqZWN0KGlbMF0saVsxXSxlLmNhbWVyYSxhKTtpZihudWxsPT1ufHwtMT09PW4ubGF5ZXJJZClyZXR1cm47Y29uc3Qgbz10aGlzLl9sYXllcnMuZ2V0KG4ubGF5ZXJJZCk7aWYobyl7Y29uc3QgdD1vLmxheWVyVmlldy5sYXllci51aWQsaT1uLmRpc3RhbmNlVG9DYW1lcmEvaChzLHIpLGE9ZCgpO2FbMF09bi53b3JsZFgsYVsxXT1uLndvcmxkWSxhWzJdPW4ud29ybGRaO2NvbnN0IGw9e307aWYobnVsbCE9bi5jb250aW51b3VzVmFsdWUmJm51bGwhPW4uY29udGludW91c1ZhbHVlVW5pdHM/bFtcIlZveGVsLlNlcnZpY2VWYWx1ZVwiXT1gJHtuLmNvbnRpbnVvdXNWYWx1ZS50b0xvY2FsZVN0cmluZygpfSAke24uY29udGludW91c1ZhbHVlVW5pdHN9YDpudWxsIT1uLnVuaXF1ZVZhbHVlTGFiZWwmJm51bGwhPW4udW5pcXVlVmFsdWU/bFtcIlZveGVsLlNlcnZpY2VWYWx1ZVwiXT1gJHtuLnVuaXF1ZVZhbHVlTGFiZWx9ICgke24udW5pcXVlVmFsdWV9KWA6bnVsbCE9bi51bmlxdWVWYWx1ZSYmKGxbXCJWb3hlbC5TZXJ2aWNlVmFsdWVcIl09YCR7bi51bmlxdWVWYWx1ZX1gKSxsW1wiVm94ZWwuU2VydmljZVZhcmlhYmxlTGFiZWxcIl09bi52YXJpYWJsZUxhYmVsLGxbXCJWb3hlbC5Qb3NpdGlvblwiXT1uLnZveGVsU3BhY2VQb3NpdGlvbixudWxsIT1uLmVwb2NoVGltZSYmbnVsbCE9bi5uYXRpdmVUaW1lJiZudWxsIT1uLm5hdGl2ZVRpbWVVbml0cyl7Y29uc3QgZT1uZXcgRGF0ZShuLmVwb2NoVGltZSk7bFtcIlZveGVsLlNlcnZpY2VMb2NhbFRpbWVcIl09ZS50b1N0cmluZygpLGxbXCJWb3hlbC5TZXJ2aWNlTmF0aXZlVGltZVwiXT1gJHtuLm5hdGl2ZVRpbWUudG9Mb2NhbGVTdHJpbmcoKX0gJHtuLm5hdGl2ZVRpbWVVbml0c31gfW51bGwhPW4uZGVwdGgmJm51bGwhPW4uZGVwdGhVbml0cyYmKGxbXCJWb3hlbC5TZXJ2aWNlRGVwdGhcIl09YCR7bi5kZXB0aC50b0xvY2FsZVN0cmluZygpfSAke24uZGVwdGhVbml0c31gKTtjb25zdCB1PW4uZmFjZU5vcm1hbDtsW1wiVm94ZWwuV29ybGRQb3NpdGlvblwiXT1gWyR7YVswXX0sICR7YVsxXX0sICR7YVsyXX1dYDtjb25zdCBfPWU9Pntjb25zdCBzPW5ldyB2KGEsdCwoKCk9PnRoaXMuX2NyZWF0ZVZveGVsR3JhcGhpYyhvLmxheWVyVmlldy5sYXllcixsKSkpO2Uuc2V0KHRoaXMudHlwZSxzLGksdSl9LGM9ZS5yZXN1bHRzLG09ZS5vcHRpb25zLnN0b3JlPT09RS5BTEw7aWYoKG51bGw9PWMubWluLmRpc3R8fGk8Yy5taW4uZGlzdCkmJl8oYy5taW4pLChudWxsPT1jLm1heC5kaXN0fHxpPmMubWF4LmRpc3QpJiZfKGMubWF4KSxtKXtjb25zdCB0PVIoZS5yYXkpO18odCksZS5yZXN1bHRzLmFsbC5wdXNoKHQpfX19X2NyZWF0ZVZveGVsR3JhcGhpYyhlLHMpe3JldHVybiBuZXcgdCh7bGF5ZXI6ZSxzb3VyY2VMYXllcjplLGF0dHJpYnV0ZXM6c30pfV90b1dhc21RdWFsaXR5KGUpe3N3aXRjaChlKXtjYXNlXCJsb3dcIjpyZXR1cm4gMDtjYXNlXCJtZWRpdW1cIjpyZXR1cm4gMTtjYXNlXCJoaWdoXCI6cmV0dXJuIDJ9fV9zZXRVcHNjYWxpbmdMaW1pdHMoZSx0LHMpe3RoaXMuX3Z4bCYmdGhpcy5fdnhsLnNldF91cHNjYWxpbmdfbGltaXRzKGUsdCxzKX19O2UoW28oe2NvbnN0cnVjdE9ubHk6ITB9KV0sQi5wcm90b3R5cGUsXCJ2aWV3XCIsdm9pZCAwKSxCPWUoW2woXCJlc3JpLmxheWVycy5Wb3hlbFdhc21QZXJTY2VuZVZpZXdcIildLEIpO2NvbnN0IEE9QjtleHBvcnR7QSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7Z2V0QXNzZXRVcmwgYXMgdH1mcm9tXCIuLi8uLi9hc3NldHMuanNcIjtmdW5jdGlvbiBlKHQpe3JldHVybiBuZXcgUHJvbWlzZSgoZT0+aW1wb3J0KFwiLi4vLi4vY2h1bmtzL3Z4bExheWVyLmpzXCIpLnRoZW4oKHQ9PnQudikpLnRoZW4oKCh7ZGVmYXVsdDpufSk9Pntjb25zdCByPW4oe2xvY2F0ZUZpbGU6aSxwcmVpbml0aWFsaXplZFdlYkdMQ29udGV4dDp0LG9uUnVudGltZUluaXRpYWxpemVkOigpPT5lKHIpfSl9KSkpKS5jYXRjaCgodD0+e3Rocm93IHR9KSl9ZnVuY3Rpb24gaShlKXtyZXR1cm4gdChgZXNyaS9saWJzL3Z4bC8ke2V9YCl9ZXhwb3J0e2UgYXMgbG9hZFZveGVsV0FTTX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xudmFyIGUsaSx0LG4sYSxvOyFmdW5jdGlvbihlKXtlW2UuQmluYXJ5PTBdPVwiQmluYXJ5XCIsZVtlLkpTT049MV09XCJKU09OXCJ9KGV8fChlPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlRyZWVJbmRleD0wXT1cIlRyZWVJbmRleFwiLGVbZS5UcmVlU3RhdHM9MV09XCJUcmVlU3RhdHNcIixlW2UuVHJlZURhdGE9Ml09XCJUcmVlRGF0YVwiLGVbZS5Ccmlja0J1bmRsZXM9M109XCJCcmlja0J1bmRsZXNcIixlW2UuU2VjdGlvbj00XT1cIlNlY3Rpb25cIixlW2UuVmFyaWFibGVTdGF0cz01XT1cIlZhcmlhYmxlU3RhdHNcIn0oaXx8KGk9e30pKSxmdW5jdGlvbihlKXtlW2UuTm9uZT0xXT1cIk5vbmVcIixlW2UuRnJvbnQ9Ml09XCJGcm9udFwiLGVbZS5CYWNrPTNdPVwiQmFja1wifSh0fHwodD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Mb3c9MF09XCJMb3dcIixlW2UuTWVkaXVtPTFdPVwiTWVkaXVtXCIsZVtlLkhpZ2g9Ml09XCJIaWdoXCJ9KG58fChuPXt9KSksZnVuY3Rpb24oZSl7ZVtlLk5vbmU9MF09XCJOb25lXCIsZVtlLlN0YXRpY1NlY3Rpb25zPTFdPVwiU3RhdGljU2VjdGlvbnNcIixlW2UuU2xpY2VzPTJdPVwiU2xpY2VzXCIsZVtlLkR5bmFtaWNTZWN0aW9ucz00XT1cIkR5bmFtaWNTZWN0aW9uc1wiLGVbZS5HaG9zdFNoZWxsPThdPVwiR2hvc3RTaGVsbFwiLGVbZS5Jc29zdXJmYWNlPTE2XT1cIklzb3N1cmZhY2VcIixlW2UuUXVhbGl0eT0zMl09XCJRdWFsaXR5XCIsZVtlLlN1bkxvY2F0aW9uPTY0XT1cIlN1bkxvY2F0aW9uXCIsZVtlLlN0YXRpY1NlY3Rpb25TZWxlY3Rpb249MTI4XT1cIlN0YXRpY1NlY3Rpb25TZWxlY3Rpb25cIixlW2UuRXhhZ2dlcmF0aW9uQW5kT2Zmc2V0PTI1Nl09XCJFeGFnZ2VyYXRpb25BbmRPZmZzZXRcIixlW2UuQ3VycmVudFRpbWU9NTEyXT1cIkN1cnJlbnRUaW1lXCIsZVtlLkN1cnJlbnRWYXJpYWJsZT0xMDI0XT1cIkN1cnJlbnRWYXJpYWJsZVwiLGVbZS5EZWxldGVJc29zdXJmYWNlPTIwNDhdPVwiRGVsZXRlSXNvc3VyZmFjZVwiLGVbZS5Db250YWluZXJWaXNpYmlsaXR5PTQwOTZdPVwiQ29udGFpbmVyVmlzaWJpbGl0eVwiLGVbZS5SZW5kZXJNb2RlPTgxOTJdPVwiUmVuZGVyTW9kZVwiLGVbZS5PcHRpbWl6YXRpb249MTYzODRdPVwiT3B0aW1pemF0aW9uXCIsZVtlLlZhcmlhYmxlU3R5bGVzPTMyNzY4XT1cIlZhcmlhYmxlU3R5bGVzXCIsZVtlLlZvbHVtZVN0eWxlcz02NTUzNl09XCJWb2x1bWVTdHlsZXNcIixlW2UuQW5hbHlzaXNTbGljZT0xMzEwNzJdPVwiQW5hbHlzaXNTbGljZVwifShhfHwoYT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5Jc29zdXJmYWNlcz0wXT1cIklzb3N1cmZhY2VzXCIsZVtlLkR5bmFtaWNTZWN0aW9ucz0xXT1cIkR5bmFtaWNTZWN0aW9uc1wiLGVbZS5TdGF0aWNTZWN0aW9ucz0yXT1cIlN0YXRpY1NlY3Rpb25zXCJ9KG98fChvPXt9KSk7ZXhwb3J0e28gYXMgQ29udGFpbmVyVHlwZSxhIGFzIFVwZGF0ZUZsYWdzLGkgYXMgVm94ZWxSZXF1ZXN0VHlwZSx0IGFzIFdhc21DdWxsTW9kZSxuIGFzIFdhc21SZW5kZXJpbmdRdWFsaXR5LGUgYXMgV2FzbVJlc3BvbnNlVHlwZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=