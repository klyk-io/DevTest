"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["node_modules_arcgis_core_views_2d_layers_WMSLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/WMSLayerView2D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../engine/BitmapContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _support_ExportStrategy_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./support/ExportStrategy.js */ "./node_modules/@arcgis/core/views/2d/layers/support/ExportStrategy.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/* harmony import */ var _layers_WMSLayerView_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../layers/WMSLayerView.js */ "./node_modules/@arcgis/core/views/layers/WMSLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let y=class extends((0,_layers_WMSLayerView_js__WEBPACK_IMPORTED_MODULE_16__["default"])((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_15__["default"])((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_14__["default"])))){constructor(){super(...arguments),this.bitmapContainer=new _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_11__.BitmapContainer}supportsSpatialReference(e){return this.layer.serviceSupportsSpatialReference(e)}update(e){this.strategy.update(e).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(e)}))}attach(){const{layer:e}=this,{imageMaxHeight:t,imageMaxWidth:r}=e;this.bitmapContainer=new _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_11__.BitmapContainer,this.container.addChild(this.bitmapContainer),this.strategy=new _support_ExportStrategy_js__WEBPACK_IMPORTED_MODULE_13__["default"]({container:this.bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:t,imageMaxWidth:r,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.addAttachHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this.exportImageVersion),(()=>this.requestUpdate())))}detach(){this.strategy=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.destroyMaybe)(this.strategy),this.container.removeAllChildren()}moveStart(){}viewChange(){}moveEnd(){this.requestUpdate()}createFetchPopupFeaturesQuery(e){const{view:t,bitmapContainer:r}=this,{x:i,y:s}=e,{spatialReference:a}=t;let o,n=0,m=0;if(r.children.some((e=>{const{width:t,height:r,resolution:h,x:c,y:d}=e,u=c+h*t,y=d-h*r;return i>=c&&i<=u&&s<=d&&s>=y&&(o=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_10__["default"]({xmin:c,ymin:y,xmax:u,ymax:d,spatialReference:a}),n=t,m=r,!0)})),!o)return null;const h=o.width/n,c=Math.round((i-o.xmin)/h),d=Math.round((o.ymax-s)/h);return{extent:o,width:n,height:m,x:c,y:d}}async doRefresh(){this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(e,t,r,i){return this.layer.fetchImageBitmap(e,t,r,{timeExtent:this.timeExtent,...i})}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],y.prototype,"strategy",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],y.prototype,"updating",void 0),y=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.WMSLayerView2D")],y);const g=y;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/WMSLayerView.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/WMSLayerView.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../layers/support/commonProperties.js */ "./node_modules/@arcgis/core/layers/support/commonProperties.js");
/* harmony import */ var _layers_support_ExportWMSImageParameters_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../layers/support/ExportWMSImageParameters.js */ "./node_modules/@arcgis/core/layers/support/ExportWMSImageParameters.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const i=i=>{let m=class extends i{initialize(){this.exportImageParameters=new _layers_support_ExportWMSImageParameters_js__WEBPACK_IMPORTED_MODULE_9__.ExportWMSImageParameters({layer:this.layer})}destroy(){this.exportImageParameters=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.destroyMaybe)(this.exportImageParameters)}get exportImageVersion(){return this.exportImageParameters?.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}fetchPopupFeatures(e){const{layer:t}=this;if(!e)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}));const{popupEnabled:o}=t;if(!o)return Promise.reject(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:o}));const s=this.createFetchPopupFeaturesQuery(e);if(!s)return Promise.resolve([]);const{extent:p,width:a,height:i,x:m,y:n}=s;if(!(p&&a&&i))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:p,width:a,height:i});return t.fetchFeatureInfo(p,a,i,m,n)}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],m.prototype,"exportImageParameters",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],m.prototype,"exportImageVersion",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],m.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)(_layers_support_commonProperties_js__WEBPACK_IMPORTED_MODULE_8__.combinedViewLayerTimeExtentProperty)],m.prototype,"timeExtent",void 0),m=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.mixins.WMSLayerView")],m),m};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19XTVNMYXllclZpZXcyRF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeTJCLG9CQUFvQixvRUFBQyxDQUFDLDRFQUFDLENBQUMsa0VBQUMsQ0FBQyw2REFBQyxLQUFLLGNBQWMsNkNBQTZDLHdFQUFDLENBQUMsNEJBQTRCLHFEQUFxRCxVQUFVLG1DQUFtQyxtRUFBQyxLQUFLLHVEQUFDLDBCQUEwQixHQUFHLFNBQVMsTUFBTSxRQUFRLE9BQU8saUNBQWlDLEdBQUcseUJBQXlCLHdFQUFDLGlFQUFpRSxtRUFBQyxFQUFFLHFOQUFxTix3QkFBd0IsNkRBQUMsNERBQTRELFNBQVMsY0FBYyw0REFBQyxtREFBbUQsYUFBYSxjQUFjLFVBQVUscUJBQXFCLGlDQUFpQyxNQUFNLHlCQUF5QixPQUFPLFFBQVEsSUFBSSxtQkFBbUIsR0FBRyxjQUFjLHdCQUF3QixNQUFNLHNDQUFzQyxtQkFBbUIsc0NBQXNDLDREQUFDLEVBQUUsK0NBQStDLGNBQWMsa0JBQWtCLHdFQUF3RSxPQUFPLG1DQUFtQyxrQkFBa0IscUJBQXFCLGFBQWEsb0RBQW9ELG9CQUFvQiwwQ0FBMEMsZ0NBQWdDLElBQUksdURBQUMsRUFBRSxzRkFBQyxtQ0FBbUMsdURBQUMsRUFBRSxzRkFBQyxxQ0FBcUMsdURBQUMsRUFBRSxzRkFBQyw0Q0FBNEMsVUFBK0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKeDlFO0FBQ0E7QUFDQTtBQUNBO0FBQ3FrQixZQUFZLHNCQUFzQixhQUFhLCtCQUErQixpR0FBQyxFQUFFLGlCQUFpQixFQUFFLFVBQVUsMkJBQTJCLDREQUFDLDZCQUE2Qix5QkFBeUIsc0lBQXNJLHNCQUFzQixNQUFNLFFBQVEsTUFBTSxnQ0FBZ0Msc0RBQUMsb0VBQW9FLFFBQVEsR0FBRyxNQUFNLGVBQWUsR0FBRyxnQ0FBZ0Msc0RBQUMsa0VBQWtFLGVBQWUsR0FBRyw4Q0FBOEMsaUNBQWlDLE1BQU0sa0NBQWtDLEdBQUcsd0JBQXdCLHNEQUFDLG1GQUFtRiwwQkFBMEIsRUFBRSx1Q0FBdUMsT0FBTyx1REFBQyxFQUFFLHNGQUFDLGdEQUFnRCx1REFBQyxFQUFFLHNGQUFDLEVBQUUsWUFBWSwwQ0FBMEMsdURBQUMsRUFBRSxzRkFBQyxnQ0FBZ0MsdURBQUMsRUFBRSxzRkFBQyxDQUFDLG9HQUFDLHNDQUFzQyx1REFBQyxFQUFFLHNGQUFDLDJDQUFnRSIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvV01TTGF5ZXJWaWV3MkQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL2xheWVycy9XTVNMYXllclZpZXcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyByfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIGl9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7d2F0Y2ggYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydCBwIGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L0V4dGVudC5qc1wiO2ltcG9ydHtCaXRtYXBDb250YWluZXIgYXMgbn1mcm9tXCIuLi9lbmdpbmUvQml0bWFwQ29udGFpbmVyLmpzXCI7aW1wb3J0e0xheWVyVmlldzJETWl4aW4gYXMgbX1mcm9tXCIuL0xheWVyVmlldzJELmpzXCI7aW1wb3J0IGggZnJvbVwiLi9zdXBwb3J0L0V4cG9ydFN0cmF0ZWd5LmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uL2xheWVycy9SZWZyZXNoYWJsZUxheWVyVmlldy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uL2xheWVycy9XTVNMYXllclZpZXcuanNcIjtsZXQgeT1jbGFzcyBleHRlbmRzKHUoZChtKGMpKSkpe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmJpdG1hcENvbnRhaW5lcj1uZXcgbn1zdXBwb3J0c1NwYXRpYWxSZWZlcmVuY2UoZSl7cmV0dXJuIHRoaXMubGF5ZXIuc2VydmljZVN1cHBvcnRzU3BhdGlhbFJlZmVyZW5jZShlKX11cGRhdGUoZSl7dGhpcy5zdHJhdGVneS51cGRhdGUoZSkuY2F0Y2goKGU9PntpKGUpfHx0LmdldExvZ2dlcih0aGlzKS5lcnJvcihlKX0pKX1hdHRhY2goKXtjb25zdHtsYXllcjplfT10aGlzLHtpbWFnZU1heEhlaWdodDp0LGltYWdlTWF4V2lkdGg6cn09ZTt0aGlzLmJpdG1hcENvbnRhaW5lcj1uZXcgbix0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLmJpdG1hcENvbnRhaW5lciksdGhpcy5zdHJhdGVneT1uZXcgaCh7Y29udGFpbmVyOnRoaXMuYml0bWFwQ29udGFpbmVyLGZldGNoU291cmNlOnRoaXMuZmV0Y2hJbWFnZS5iaW5kKHRoaXMpLHJlcXVlc3RVcGRhdGU6dGhpcy5yZXF1ZXN0VXBkYXRlLmJpbmQodGhpcyksaW1hZ2VNYXhIZWlnaHQ6dCxpbWFnZU1heFdpZHRoOnIsaW1hZ2VSb3RhdGlvblN1cHBvcnRlZDohMSxpbWFnZU5vcm1hbGl6YXRpb25TdXBwb3J0ZWQ6ITEsaGlkcGk6ITF9KSx0aGlzLmFkZEF0dGFjaEhhbmRsZXMocygoKCk9PnRoaXMuZXhwb3J0SW1hZ2VWZXJzaW9uKSwoKCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpKSkpfWRldGFjaCgpe3RoaXMuc3RyYXRlZ3k9cih0aGlzLnN0cmF0ZWd5KSx0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpfW1vdmVTdGFydCgpe312aWV3Q2hhbmdlKCl7fW1vdmVFbmQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX1jcmVhdGVGZXRjaFBvcHVwRmVhdHVyZXNRdWVyeShlKXtjb25zdHt2aWV3OnQsYml0bWFwQ29udGFpbmVyOnJ9PXRoaXMse3g6aSx5OnN9PWUse3NwYXRpYWxSZWZlcmVuY2U6YX09dDtsZXQgbyxuPTAsbT0wO2lmKHIuY2hpbGRyZW4uc29tZSgoZT0+e2NvbnN0e3dpZHRoOnQsaGVpZ2h0OnIscmVzb2x1dGlvbjpoLHg6Yyx5OmR9PWUsdT1jK2gqdCx5PWQtaCpyO3JldHVybiBpPj1jJiZpPD11JiZzPD1kJiZzPj15JiYobz1uZXcgcCh7eG1pbjpjLHltaW46eSx4bWF4OnUseW1heDpkLHNwYXRpYWxSZWZlcmVuY2U6YX0pLG49dCxtPXIsITApfSkpLCFvKXJldHVybiBudWxsO2NvbnN0IGg9by53aWR0aC9uLGM9TWF0aC5yb3VuZCgoaS1vLnhtaW4pL2gpLGQ9TWF0aC5yb3VuZCgoby55bWF4LXMpL2gpO3JldHVybntleHRlbnQ6byx3aWR0aDpuLGhlaWdodDptLHg6Yyx5OmR9fWFzeW5jIGRvUmVmcmVzaCgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfWlzVXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5zdHJhdGVneS51cGRhdGluZ3x8dGhpcy51cGRhdGVSZXF1ZXN0ZWR9ZmV0Y2hJbWFnZShlLHQscixpKXtyZXR1cm4gdGhpcy5sYXllci5mZXRjaEltYWdlQml0bWFwKGUsdCxyLHt0aW1lRXh0ZW50OnRoaXMudGltZUV4dGVudCwuLi5pfSl9fTtlKFthKCldLHkucHJvdG90eXBlLFwic3RyYXRlZ3lcIix2b2lkIDApLGUoW2EoKV0seS5wcm90b3R5cGUsXCJ1cGRhdGluZ1wiLHZvaWQgMCkseT1lKFtvKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuV01TTGF5ZXJWaWV3MkRcIildLHkpO2NvbnN0IGc9eTtleHBvcnR7ZyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2Rlc3Ryb3lNYXliZSBhcyB0fWZyb21cIi4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgb31mcm9tXCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtjb21iaW5lZFZpZXdMYXllclRpbWVFeHRlbnRQcm9wZXJ0eSBhcyBwfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L2NvbW1vblByb3BlcnRpZXMuanNcIjtpbXBvcnR7RXhwb3J0V01TSW1hZ2VQYXJhbWV0ZXJzIGFzIGF9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvRXhwb3J0V01TSW1hZ2VQYXJhbWV0ZXJzLmpzXCI7Y29uc3QgaT1pPT57bGV0IG09Y2xhc3MgZXh0ZW5kcyBpe2luaXRpYWxpemUoKXt0aGlzLmV4cG9ydEltYWdlUGFyYW1ldGVycz1uZXcgYSh7bGF5ZXI6dGhpcy5sYXllcn0pfWRlc3Ryb3koKXt0aGlzLmV4cG9ydEltYWdlUGFyYW1ldGVycz10KHRoaXMuZXhwb3J0SW1hZ2VQYXJhbWV0ZXJzKX1nZXQgZXhwb3J0SW1hZ2VWZXJzaW9uKCl7cmV0dXJuIHRoaXMuZXhwb3J0SW1hZ2VQYXJhbWV0ZXJzPy5jb21taXRQcm9wZXJ0eShcInZlcnNpb25cIiksdGhpcy5jb21taXRQcm9wZXJ0eShcInRpbWVFeHRlbnRcIiksKHRoaXMuX2dldChcImV4cG9ydEltYWdlVmVyc2lvblwiKXx8MCkrMX1mZXRjaFBvcHVwRmVhdHVyZXMoZSl7Y29uc3R7bGF5ZXI6dH09dGhpcztpZighZSlyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IHIoXCJ3bXNsYXllcnZpZXc6ZmV0Y2hQb3B1cEZlYXR1cmVzXCIsXCJOb3RoaW5nIHRvIGZldGNoIHdpdGhvdXQgYXJlYVwiLHtsYXllcjp0fSkpO2NvbnN0e3BvcHVwRW5hYmxlZDpvfT10O2lmKCFvKXJldHVybiBQcm9taXNlLnJlamVjdChuZXcgcihcIndtc2xheWVydmlldzpmZXRjaFBvcHVwRmVhdHVyZXNcIixcInBvcHVwRW5hYmxlZCBzaG91bGQgYmUgdHJ1ZVwiLHtwb3B1cEVuYWJsZWQ6b30pKTtjb25zdCBzPXRoaXMuY3JlYXRlRmV0Y2hQb3B1cEZlYXR1cmVzUXVlcnkoZSk7aWYoIXMpcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXSk7Y29uc3R7ZXh0ZW50OnAsd2lkdGg6YSxoZWlnaHQ6aSx4Om0seTpufT1zO2lmKCEocCYmYSYmaSkpdGhyb3cgbmV3IHIoXCJ3bXNsYXllcnZpZXc6ZmV0Y2hQb3B1cEZlYXR1cmVzXCIsXCJXTVNMYXllciBkb2VzIG5vdCBzdXBwb3J0IGZldGNoaW5nIGZlYXR1cmVzLlwiLHtleHRlbnQ6cCx3aWR0aDphLGhlaWdodDppfSk7cmV0dXJuIHQuZmV0Y2hGZWF0dXJlSW5mbyhwLGEsaSxtLG4pfX07cmV0dXJuIGUoW28oKV0sbS5wcm90b3R5cGUsXCJleHBvcnRJbWFnZVBhcmFtZXRlcnNcIix2b2lkIDApLGUoW28oe3JlYWRPbmx5OiEwfSldLG0ucHJvdG90eXBlLFwiZXhwb3J0SW1hZ2VWZXJzaW9uXCIsbnVsbCksZShbbygpXSxtLnByb3RvdHlwZSxcImxheWVyXCIsdm9pZCAwKSxlKFtvKHApXSxtLnByb3RvdHlwZSxcInRpbWVFeHRlbnRcIix2b2lkIDApLG09ZShbcyhcImVzcmkubGF5ZXJzLm1peGlucy5XTVNMYXllclZpZXdcIildLG0pLG19O2V4cG9ydHtpIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9