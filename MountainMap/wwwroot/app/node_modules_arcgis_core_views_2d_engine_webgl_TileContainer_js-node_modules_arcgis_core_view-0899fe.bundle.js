"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["node_modules_arcgis_core_views_2d_engine_webgl_TileContainer_js-node_modules_arcgis_core_view-0899fe"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./BitmapTileLayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _support_imageUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./support/imageUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js");
/* harmony import */ var _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../tiling/TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tiling/TileStrategy.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d=new Set([102113,102100,3857,3785,900913]),y=[0,0];let _=class extends((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_17__["default"])((0,_BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_9__.BitmapTileLayerView2D)((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_10__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_16__["default"])))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=this.tileMatrixSet?.tileInfo;e&&(this._tileInfoView=new _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_12__["default"](e),this._fetchQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_14__["default"]({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_15__["default"]({cachePolicy:"keep",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.addAttachHandles(this._updatingHandles.add((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this.doRefresh()))),super.attach())}detach(){super.detach(),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets?.some((t=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_8__.equals)(t.tileInfo?.spatialReference,e)))??!1}async doRefresh(){if(this.attached){if(this.suspended)return this._tileStrategy.clear(),void this.requestUpdate();this._fetchQueue.reset(),this._tileStrategy.refresh((e=>this._updatingHandles.addPromise(this._enqueueTileFetch(e))))}}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(y,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._updatingHandles.addPromise(this._enqueueTileFetch(t)),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once("detach",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s="tilemapCache"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_13__["default"](0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(n){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(n))throw n;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_13__["default"](i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_11__.resampleImage)(this._tileInfoView,r,s,e)}}throw n}return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_11__.resampleImage)(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once("attach",(()=>this.requestUpdate()))}catch(s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(s)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_8__.equals)(e.tileInfo?.spatialReference,t)));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>d.has(e.tileInfo?.spatialReference.wkid??-1)))),i}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],_.prototype,"tileMatrixSet",null),_=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.2d.layers.WMTSLayerView2D")],_);const w=_;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2VuZ2luZV93ZWJnbF9UaWxlQ29udGFpbmVyX2pzLW5vZGVfbW9kdWxlc19hcmNnaXNfY29yZV92aWV3LTA4OTlmZS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeU0saUlBQWlJLGdCQUFnQix3REFBQyxDQUFDLGVBQWUsNkJBQTZCLGtCQUFrQix5RUFBeUUsc0JBQXNCLE1BQU0sUUFBUSxpQ0FBaUMsa0pBQWtKLHVCQUF1QixxQ0FBcUMsb0NBQW9DLHdCQUF3QixtRUFBQyxZQUFZLG1EQUFDLE9BQU8sbURBQUMsS0FBSyxtREFBQyw4Q0FBOEMsR0FBRyx3REFBRyxtREFBbUQseUJBQXlCLGdFQUFDLFlBQVksbURBQUMsZ0NBQWdDLEtBQUssbUJBQW1CLHFCQUFxQix1QkFBdUIsUUFBUSwrQ0FBb0U7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ0o1b0M7QUFDQTtBQUNBO0FBQ0E7QUFDODVCLDBEQUEwRCxvQkFBb0IsNEVBQUMsQ0FBQyxnRkFBQyxDQUFDLGtFQUFDLENBQUMsNkRBQUMsS0FBSyxjQUFjLGtGQUFrRixvQkFBb0IseUVBQXlFLCtHQUErRyxVQUFVLCtHQUErRyxTQUFTLHFDQUFxQywyQkFBMkIsZ0VBQUMseUJBQXlCLDZEQUFDLEVBQUUsa0ZBQWtGLHlCQUF5QixnRUFBQyxFQUFFLHVJQUF1SSx1SkFBdUosU0FBUyxxSUFBcUksWUFBWSxxQkFBcUIsYUFBYSxxQkFBcUIsVUFBVSxxQkFBcUIsNEJBQTRCLHVEQUF1RCxrRkFBQyx1Q0FBdUMsa0JBQWtCLGtCQUFrQiw4RUFBOEUsdUhBQXVILGVBQWUsa0RBQWtELHVSQUF1UixlQUFlLHlIQUF5SCxzQkFBc0IsRUFBRSxrRUFBa0UsNkJBQTZCLEdBQUcsbUNBQW1DLFlBQVksMkRBQUMsVUFBVSxNQUFNLElBQUkseURBQXlELFNBQVMsZ0NBQWdDLFNBQVMsR0FBRyxtRUFBQyxZQUFZLFFBQVEsaURBQWlELE1BQU0sWUFBWSwyREFBQyw4QkFBOEIseUJBQXlCLEVBQUUsT0FBTyxzRUFBQyw0QkFBNEIsUUFBUSxPQUFPLHNFQUFDLDJCQUEyQixZQUFZLDBCQUEwQixxQ0FBcUMsMkJBQTJCLG9DQUFvQyxJQUFJLDJDQUEyQyxxS0FBcUssU0FBUyxtRUFBQyxLQUFLLHVEQUFDLDBCQUEwQixzQkFBc0IsdUJBQXVCLDREQUE0RCxTQUFTLEVBQUUsdUNBQXVDLG1DQUFtQyxpQ0FBaUMsZ0NBQWdDLGtGQUFDLG1DQUFtQyw0R0FBNEcsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksdUNBQXVDLHVEQUFDLEVBQUUsc0ZBQUMsNkNBQTZDLFVBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9UaWxlQ29udGFpbmVyLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvV01UU0xheWVyVmlldzJELmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBlfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL1dHTENvbnRhaW5lci5qc1wiO2ltcG9ydCBzIGZyb21cIi4vYnJ1c2hlcy9XR0xCcnVzaEluZm8uanNcIjtpbXBvcnQgdCBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hTdGVuY2lsLmpzXCI7Y29uc3Qgbj0oZSxyKT0+ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWwhPTA/ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWw6ZS5rZXkucm93LXIua2V5LnJvdyE9MD9lLmtleS5yb3ctci5rZXkucm93OmUua2V5LmNvbC1yLmtleS5jb2w7Y2xhc3MgaSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl90aWxlSW5mb1ZpZXc9ZX1yZW5kZXJDaGlsZHJlbihlKXt0aGlzLnNvcnRDaGlsZHJlbihuKSx0aGlzLnNldFN0ZW5jaWxSZWZlcmVuY2UoZSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe2NvbnN0e3N0YXRlOnJ9PWUscz1zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSk7cmV0dXJuIHMucmVxdWlyZWRMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0Q2xvc2VzdEluZm9Gb3JTY2FsZShyLnNjYWxlKS5sZXZlbCxzLmRpc3BsYXlMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2NhbGVUb1pvb20oci5zY2FsZSksc31wcmVwYXJlUmVuZGVyUGFzc2VzKHIpe2NvbnN0IG49c3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhyKTtyZXR1cm4gbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwic3RlbmNpbFwiLGJydXNoZXM6W3RdLGRyYXdQaGFzZTplLkRFQlVHfGUuTUFQfGUuSElHSExJR0hULHRhcmdldDooKT0+dGhpcy5nZXRTdGVuY2lsVGFyZ2V0KCl9KSksaGFzKFwiZXNyaS10aWxlcy1kZWJ1Z1wiKSYmbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwidGlsZUluZm9cIixicnVzaGVzOltzXSxkcmF3UGhhc2U6ZS5ERUJVRyx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW59KSksbn1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW59c2V0U3RlbmNpbFJlZmVyZW5jZShlKXtsZXQgcj0xO2Zvcihjb25zdCBzIG9mIHRoaXMuY2hpbGRyZW4pcy5zdGVuY2lsUmVmPXIrK319ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7aXNBYm9ydEVycm9yIGFzIGl9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7cHJvcGVydHkgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3Byb3BlcnR5LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtlcXVhbHMgYXMgYX1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydHtCaXRtYXBUaWxlTGF5ZXJWaWV3MkQgYXMgbH1mcm9tXCIuL0JpdG1hcFRpbGVMYXllclZpZXcyRC5qc1wiO2ltcG9ydHtMYXllclZpZXcyRE1peGluIGFzIG99ZnJvbVwiLi9MYXllclZpZXcyRC5qc1wiO2ltcG9ydHtyZXNhbXBsZUltYWdlIGFzIGh9ZnJvbVwiLi9zdXBwb3J0L2ltYWdlVXRpbHMuanNcIjtpbXBvcnQgbiBmcm9tXCIuLi90aWxpbmcvVGlsZUluZm9WaWV3LmpzXCI7aW1wb3J0IGMgZnJvbVwiLi4vdGlsaW5nL1RpbGVLZXkuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi90aWxpbmcvVGlsZVF1ZXVlLmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vdGlsaW5nL1RpbGVTdHJhdGVneS5qc1wiO2ltcG9ydCBmIGZyb21cIi4uLy4uL2xheWVycy9MYXllclZpZXcuanNcIjtpbXBvcnQgbSBmcm9tXCIuLi8uLi9sYXllcnMvUmVmcmVzaGFibGVMYXllclZpZXcuanNcIjtjb25zdCBkPW5ldyBTZXQoWzEwMjExMywxMDIxMDAsMzg1NywzNzg1LDkwMDkxM10pLHk9WzAsMF07bGV0IF89Y2xhc3MgZXh0ZW5kcyhtKGwobyhmKSkpKXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fdGlsZVN0cmF0ZWd5PW51bGwsdGhpcy5fZmV0Y2hRdWV1ZT1udWxsLHRoaXMubGF5ZXI9bnVsbH1nZXQgdGlsZU1hdHJpeFNldCgpe2NvbnN0IGU9dGhpcy5fZ2V0VGlsZU1hdHJpeFNldEJ5U3BhdGlhbFJlZmVyZW5jZSh0aGlzLmxheWVyLmFjdGl2ZUxheWVyKTtyZXR1cm4gZT8oZS5pZCE9PXRoaXMubGF5ZXIuYWN0aXZlTGF5ZXIudGlsZU1hdHJpeFNldElkJiYodGhpcy5sYXllci5hY3RpdmVMYXllci50aWxlTWF0cml4U2V0SWQ9ZS5pZCksZSk6bnVsbH11cGRhdGUoZSl7dGhpcy5fZmV0Y2hRdWV1ZS5wYXVzZSgpLHRoaXMuX2ZldGNoUXVldWUuc3RhdGU9ZS5zdGF0ZSx0aGlzLl90aWxlU3RyYXRlZ3kudXBkYXRlKGUpLHRoaXMuX2ZldGNoUXVldWUucmVzdW1lKCl9YXR0YWNoKCl7Y29uc3QgZT10aGlzLnRpbGVNYXRyaXhTZXQ/LnRpbGVJbmZvO2UmJih0aGlzLl90aWxlSW5mb1ZpZXc9bmV3IG4oZSksdGhpcy5fZmV0Y2hRdWV1ZT1uZXcgdSh7dGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlldyxjb25jdXJyZW5jeToxNixwcm9jZXNzOihlLHQpPT50aGlzLmZldGNoVGlsZShlLHQpfSksdGhpcy5fdGlsZVN0cmF0ZWd5PW5ldyBwKHtjYWNoZVBvbGljeTpcImtlZXBcIixyZXNhbXBsaW5nOiEwLGFjcXVpcmVUaWxlOmU9PnRoaXMuYWNxdWlyZVRpbGUoZSkscmVsZWFzZVRpbGU6ZT0+dGhpcy5yZWxlYXNlVGlsZShlKSx0aWxlSW5mb1ZpZXc6dGhpcy5fdGlsZUluZm9WaWV3fSksdGhpcy5hZGRBdHRhY2hIYW5kbGVzKHRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGQoKCgpPT5bdGhpcy5sYXllcj8uYWN0aXZlTGF5ZXI/LnN0eWxlSWQsdGhpcy50aWxlTWF0cml4U2V0XSksKCgpPT50aGlzLmRvUmVmcmVzaCgpKSkpLHN1cGVyLmF0dGFjaCgpKX1kZXRhY2goKXtzdXBlci5kZXRhY2goKSx0aGlzLl90aWxlU3RyYXRlZ3k/LmRlc3Ryb3koKSx0aGlzLl9mZXRjaFF1ZXVlPy5kZXN0cm95KCksdGhpcy5fZmV0Y2hRdWV1ZT10aGlzLl90aWxlU3RyYXRlZ3k9dGhpcy5fdGlsZUluZm9WaWV3PW51bGx9bW92ZVN0YXJ0KCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9dmlld0NoYW5nZSgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfW1vdmVFbmQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX1zdXBwb3J0c1NwYXRpYWxSZWZlcmVuY2UoZSl7cmV0dXJuIHRoaXMubGF5ZXIuYWN0aXZlTGF5ZXIudGlsZU1hdHJpeFNldHM/LnNvbWUoKHQ9PmEodC50aWxlSW5mbz8uc3BhdGlhbFJlZmVyZW5jZSxlKSkpPz8hMX1hc3luYyBkb1JlZnJlc2goKXtpZih0aGlzLmF0dGFjaGVkKXtpZih0aGlzLnN1c3BlbmRlZClyZXR1cm4gdGhpcy5fdGlsZVN0cmF0ZWd5LmNsZWFyKCksdm9pZCB0aGlzLnJlcXVlc3RVcGRhdGUoKTt0aGlzLl9mZXRjaFF1ZXVlLnJlc2V0KCksdGhpcy5fdGlsZVN0cmF0ZWd5LnJlZnJlc2goKGU9PnRoaXMuX3VwZGF0aW5nSGFuZGxlcy5hZGRQcm9taXNlKHRoaXMuX2VucXVldWVUaWxlRmV0Y2goZSkpKSl9fWFjcXVpcmVUaWxlKGUpe2NvbnN0IHQ9dGhpcy5fYml0bWFwVmlldy5jcmVhdGVUaWxlKGUpLGk9dC5iaXRtYXA7cmV0dXJuW2kueCxpLnldPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlQ29vcmRzKHksdC5rZXkpLGkucmVzb2x1dGlvbj10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZVJlc29sdXRpb24odC5rZXkpLFtpLndpZHRoLGkuaGVpZ2h0XT10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2l6ZSx0aGlzLl91cGRhdGluZ0hhbmRsZXMuYWRkUHJvbWlzZSh0aGlzLl9lbnF1ZXVlVGlsZUZldGNoKHQpKSx0aGlzLl9iaXRtYXBWaWV3LmFkZENoaWxkKHQpLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHR9cmVsZWFzZVRpbGUoZSl7dGhpcy5fZmV0Y2hRdWV1ZS5hYm9ydChlLmtleS5pZCksdGhpcy5fYml0bWFwVmlldy5yZW1vdmVDaGlsZChlKSxlLm9uY2UoXCJkZXRhY2hcIiwoKCk9PmUuZGVzdHJveSgpKSksdGhpcy5yZXF1ZXN0VXBkYXRlKCl9YXN5bmMgZmV0Y2hUaWxlKGUsdD17fSl7Y29uc3Qgcz1cInRpbGVtYXBDYWNoZVwiaW4gdGhpcy5sYXllcj90aGlzLmxheWVyLnRpbGVtYXBDYWNoZTpudWxsLHtzaWduYWw6cixyZXNhbXBsaW5nTGV2ZWw6YT0wfT10O2lmKCFzKXJldHVybiB0aGlzLl9mZXRjaEltYWdlKGUscik7Y29uc3QgbD1uZXcgYygwLDAsMCwwKTtsZXQgbzt0cnl7YXdhaXQgcy5mZXRjaEF2YWlsYWJpbGl0eVVwc2FtcGxlKGUubGV2ZWwsZS5yb3csZS5jb2wsbCx7c2lnbmFsOnJ9KSxvPWF3YWl0IHRoaXMuX2ZldGNoSW1hZ2UobCxyKX1jYXRjaChuKXtpZihpKG4pKXRocm93IG47aWYoYTwzKXtjb25zdCBpPXRoaXMuX3RpbGVJbmZvVmlldy5nZXRUaWxlUGFyZW50SWQoZS5pZCk7aWYoaSl7Y29uc3Qgcz1uZXcgYyhpKSxyPWF3YWl0IHRoaXMuZmV0Y2hUaWxlKHMsey4uLnQscmVzYW1wbGluZ0xldmVsOmErMX0pO3JldHVybiBoKHRoaXMuX3RpbGVJbmZvVmlldyxyLHMsZSl9fXRocm93IG59cmV0dXJuIGgodGhpcy5fdGlsZUluZm9WaWV3LG8sbCxlKX1jYW5SZXN1bWUoKXtjb25zdCBlPXN1cGVyLmNhblJlc3VtZSgpO3JldHVybiBlP251bGwhPT10aGlzLnRpbGVNYXRyaXhTZXQ6ZX1hc3luYyBfZW5xdWV1ZVRpbGVGZXRjaChlKXtpZighdGhpcy5fZmV0Y2hRdWV1ZS5oYXMoZS5rZXkuaWQpKXt0cnl7Y29uc3QgdD1hd2FpdCB0aGlzLl9mZXRjaFF1ZXVlLnB1c2goZS5rZXkpO2UuYml0bWFwLnNvdXJjZT10LGUuYml0bWFwLndpZHRoPXRoaXMuX3RpbGVJbmZvVmlldy50aWxlSW5mby5zaXplWzBdLGUuYml0bWFwLmhlaWdodD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2l6ZVsxXSxlLm9uY2UoXCJhdHRhY2hcIiwoKCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpKSl9Y2F0Y2gocyl7aShzKXx8dC5nZXRMb2dnZXIodGhpcykuZXJyb3Iocyl9dGhpcy5yZXF1ZXN0VXBkYXRlKCl9fWFzeW5jIF9mZXRjaEltYWdlKGUsdCl7cmV0dXJuIHRoaXMubGF5ZXIuZmV0Y2hJbWFnZUJpdG1hcFRpbGUoZS5sZXZlbCxlLnJvdyxlLmNvbCx7c2lnbmFsOnR9KX1fZ2V0VGlsZU1hdHJpeFNldEJ5U3BhdGlhbFJlZmVyZW5jZShlKXtjb25zdCB0PXRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlO2lmKCFlLnRpbGVNYXRyaXhTZXRzKXJldHVybiBudWxsO2xldCBpPWUudGlsZU1hdHJpeFNldHMuZmluZCgoZT0+YShlLnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLHQpKSk7cmV0dXJuIWkmJnQuaXNXZWJNZXJjYXRvciYmKGk9ZS50aWxlTWF0cml4U2V0cy5maW5kKChlPT5kLmhhcyhlLnRpbGVJbmZvPy5zcGF0aWFsUmVmZXJlbmNlLndraWQ/Py0xKSkpKSxpfX07ZShbcyh7cmVhZE9ubHk6ITB9KV0sXy5wcm90b3R5cGUsXCJ0aWxlTWF0cml4U2V0XCIsbnVsbCksXz1lKFtyKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuV01UU0xheWVyVmlldzJEXCIpXSxfKTtjb25zdCB3PV87ZXhwb3J0e3cgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=