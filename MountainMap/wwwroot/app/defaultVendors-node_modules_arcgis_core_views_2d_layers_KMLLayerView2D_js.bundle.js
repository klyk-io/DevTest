"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_views_2d_layers_KMLLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/layers/support/kmlUtils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/kmlUtils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   computeExtent: () => (/* binding */ j),
/* harmony export */   fetchService: () => (/* binding */ g),
/* harmony export */   getGraphics: () => (/* binding */ b),
/* harmony export */   parseKML: () => (/* binding */ d),
/* harmony export */   sublayersFromJSON: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config.js */ "./node_modules/@arcgis/core/config.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _PopupTemplate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../PopupTemplate.js */ "./node_modules/@arcgis/core/PopupTemplate.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../renderers/support/jsonUtils.js */ "./node_modules/@arcgis/core/renderers/support/jsonUtils.js");
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../rest/support/FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const c={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function d(e){const o=e.folders||[],t=o.slice(),r=new Map,n=new Map,i=new Map,f=new Map,a=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:f};(e.featureCollection?.layers||[]).forEach((e=>{const o=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(e);o.featureSet.features=[];const t=e.featureSet.geometryType;r.set(t,o);const a=e.layerDefinition.objectIdField;"esriGeometryPoint"===t?h(n,a,e.featureSet.features):"esriGeometryPolyline"===t?h(i,a,e.featureSet.features):"esriGeometryPolygon"===t&&h(f,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{a.set(e.id,e)})),o.forEach((o=>{o.networkLinkIds.forEach((r=>{const s=P(r,o.id,e.networkLinks);s&&t.push(s)}))})),t.forEach((e=>{if(e.featureInfos){e.points=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPoint")),e.polylines=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPolyline")),e.polygons=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPolygon")),e.mapImages=[];for(const o of e.featureInfos)switch(o.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const t=l[o.type].get(o.id);t&&e[c[o.type]]?.featureSet.features.push(t);break}case"GroundOverlay":{const t=a.get(o.id);t&&e.mapImages.push(t);break}}e.fullExtent=j([e])}}));const u=j(t);return{folders:o,sublayers:t,extent:u}}function g(t,s,i,f){const a=_kernel_js__WEBPACK_IMPORTED_MODULE_1__.id?.findCredential(t);t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.addQueryParameters)(t,{token:a?.token});const l=_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].kmlServiceUrl;return (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(l,{query:{url:t,model:"simple",folders:"",refresh:0!==i||void 0,outSR:JSON.stringify(s)},responseType:"json",signal:f})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,f=new Set(o.folders.map((e=>e.id)));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&f.has(i.id)&&(i.visible=r.includes(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers?.unshift(i)}else s.unshift(i)})),s}function h(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function G(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=G(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(e.featureSet).features,r=e.layerDefinition,s=(0,_renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__.fromJSON)(r.drawingInfo.renderer),n=_PopupTemplate_js__WEBPACK_IMPORTED_MODULE_2__["default"].fromJSON(e.popupInfo),i=[];for(const t of o){const e=await s.getSymbolAsync(t);t.symbol=e,t.popupTemplate=n,t.visible=!0,i.push(t)}return i}function j(e){const o=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.negativeInfinity),t=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.negativeInfinity);for(const r of e){if(r.polygons?.featureSet?.features)for(const e of r.polygons.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.polylines?.featureSet?.features)for(const e of r.polylines.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.points?.featureSet?.features)for(const e of r.points.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.mapImages)for(const e of r.mapImages)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.extent),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o)}return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.equals)(t,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.negativeInfinity)?void 0:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__["default"].WGS84}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/Bitmap.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bitmap: () => (/* binding */ b),
/* harmony export */   isImageSource: () => (/* binding */ f),
/* harmony export */   rasterize: () => (/* binding */ w)
/* harmony export */ });
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/vec2f32.js */ "./node_modules/@arcgis/core/chunks/vec2f32.js");
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./DisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js");
/* harmony import */ var _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ImageryBitmapSource.js */ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js");
/* harmony import */ var _webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../webgl/contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function f(t){return t&&"render"in t}function w(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.render(e.getContext("2d")),e}function v(t){return f(t)?t instanceof _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_5__["default"]?t.getRenderedRasterPixels()?.renderedRasterPixels:w(t):t}class b extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_4__.DisplayObject{constructor(t=null,e=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(s,i){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.createResolver)();return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(i,(()=>r.abort())),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.onAbortOrThrow)(r,(t=>h.reject(t))),this._uploadStatus={controller:r,resolver:h},this.source=s,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.g)(this.transforms.dvs),[s,a]=t.toScreenNoRotation([0,0],[this.x,this.y]),d=this.resolution/this.pixelRatio/t.resolution,l=d*this.width,c=d*this.height,_=Math.PI*this.rotation/180;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(s,a)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(l/2,c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.r)(e,e,-_),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(-l/2,-c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.l)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_3__.f)(l,c)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_1__.m)(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const i=v(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:s}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:i,texture:u,width:h,height:o},r),s.resolve(),this._uploadStatus=null}else this._texture.setData(i);this.ready()}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_0__.throwIfNotAbortError)(r)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_2__.c)()}}_createTexture(t){const e=this.immutable&&t.type===_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_6__.ContextType.WEBGL2,s=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_9__.TextureDescriptor;return s.internalFormat=e?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.SizedPixelFormat.RGBA8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,s.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE,s.isImmutable=e,s.width=this._sourceWidth,s.height=this._sourceHeight,new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_8__.Texture(t,s)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BitmapContainer: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _brushes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./brushes.js */ "./node_modules/@arcgis/core/views/2d/engine/brushes.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class a extends _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(s){const a=s.registerRenderPass({name:"bitmap",brushes:[_brushes_js__WEBPACK_IMPORTED_MODULE_0__.brushes.bitmap],target:()=>this.children,drawPhase:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(s),a]}_manageFade(){this.children.reduce(((e,r)=>e+(r.inFadeTransition?1:0)),0)>=2?(this.children.forEach((e=>e.blendFunction="additive")),this._hasCrossfade=!0):(this.children.forEach((e=>e.blendFunction="standard")),this._hasCrossfade=!1)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js ***!
  \*************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createProgramTemplate: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./sources/resolver.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/sources/resolver.js");
/* harmony import */ var _webgl_programUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../webgl/programUtils.js */ "./node_modules/@arcgis/core/views/webgl/programUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const e=r=>{let t="";t+=r[0].toUpperCase();for(let e=1;e<r.length;e++){const s=r[e];s===s.toUpperCase()?(t+="_",t+=s):t+=s.toUpperCase()}return t},s=r=>{const s={};for(const t in r){s[e(t)]=r[t]}return (0,_webgl_programUtils_js__WEBPACK_IMPORTED_MODULE_1__.glslifyDefineMap)(s)},o=(t,e,o,n)=>{const a=t+t.substring(t.lastIndexOf("/")),p=e+e.substring(e.lastIndexOf("/")),f=s(n);return{attributes:o,shaders:{vertexShader:f+(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.resolveIncludes)(`${a}.vert`),fragmentShader:f+(0,_sources_resolver_js__WEBPACK_IMPORTED_MODULE_0__.resolveIncludes)(`${p}.frag`)}}};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../layers/support/kmlUtils.js */ "./node_modules/@arcgis/core/layers/support/kmlUtils.js");
/* harmony import */ var _rest_utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../rest/utils.js */ "./node_modules/@arcgis/core/rest/utils.js");
/* harmony import */ var _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../support/GraphicsCollection.js */ "./node_modules/@arcgis/core/support/GraphicsCollection.js");
/* harmony import */ var _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../engine/Bitmap.js */ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js");
/* harmony import */ var _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../engine/BitmapContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./graphics/GraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js");
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _support_imageReprojection_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../support/imageReprojection.js */ "./node_modules/@arcgis/core/views/support/imageReprojection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__["default"])){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_18__.BitmapContainer,this._kmlVisualData=new C,this._fetchController=null,this.allVisiblePoints=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisiblePolylines=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisiblePolygons=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisibleMapImages=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"]}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:"graphic",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on("change",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new _support_imageReprojection_js__WEBPACK_IMPORTED_MODULE_23__.ImageReprojector}detach(){this._fetchController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.abortMaybe)(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._polygonsView),this._polylinesView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._polylinesView),this._pointsView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._pointsView),this._imageReprojector=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_17__.Bitmap(i.bitmapData);t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:o}=e;if(null!=s){if(null==t)throw new Error("Loading this network link requires a view state.");let n;if(await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.load)(),null!=a&&1!==a){const e=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__["default"](t.extent);e.expand(a),n=e}else n=t.extent;n=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(n,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__["default"].WGS84);const h=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(n,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__["default"].WebMercator),y=n.xmin,g=n.xmax,w=n.ymin,_=n.ymax,b=t.size[0]*t.pixelRatio,V=t.size[1]*t.pixelRatio,f=Math.max(h.width,h.height),v={"[bboxWest]":y.toString(),"[bboxEast]":g.toString(),"[bboxSouth]":w.toString(),"[bboxNorth]":_.toString(),"[lookatLon]":n.center.x.toString(),"[lookatLat]":n.center.y.toString(),"[lookatRange]":f.toString(),"[lookatTilt]":"0","[lookatHeading]":t.rotation.toString(),"[lookatTerrainLon]":n.center.x.toString(),"[lookatTerrainLat]":n.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":n.center.x.toString(),"[cameraLat]":n.center.y.toString(),"[cameraAlt]":f.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":b.toString(),"[vertPixels]":V.toString(),"[terrainEnabled]":"0","[clientVersion]":_kernel_js__WEBPACK_IMPORTED_MODULE_1__.version,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},S=e=>{for(const i in e){let t;for(t in v)e[i]=e[i].replace(t,v[t])}},I=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.queryToObject)(s);S(I);let x={};null!=o&&(x=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.queryToObject)(o),S(x));const C=(0,_rest_utils_js__WEBPACK_IMPORTED_MODULE_15__.parseUrl)(e.href);C.query={...C.query,...I,...x};return`${C.path}?${(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.objectToQuery)(I)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.points):[],a=s.polylines?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.polylines):[],o=s.polygons?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.fetchService)(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>(0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.parseKML)(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_pointsView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_polylinesView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_polygonsView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"updating",void 0),j=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.views.2d.layers.KMLLayerView2D")],j);const k=j;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BaseGraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/BaseGraphicContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__["default"]{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.MAP&&this._renderChildren(r),this.hasHighlight&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/support/imageReprojection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/support/imageReprojection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageReprojector: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layers/support/rasterFunctions/rasterProjectionHelper.js */ "./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js");
/* harmony import */ var _2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../2d/engine/Bitmap.js */ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js");
/* harmony import */ var _2d_engine_webgl_VertexStream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../2d/engine/webgl/VertexStream.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js");
/* harmony import */ var _2d_engine_webgl_shaders_MaterialPrograms_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../2d/engine/webgl/shaders/MaterialPrograms.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../webgl/FramebufferObject.js */ "./node_modules/@arcgis/core/views/webgl/FramebufferObject.js");
/* harmony import */ var _webgl_rasterUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../webgl/rasterUtils.js */ "./node_modules/@arcgis/core/views/webgl/rasterUtils.js");
/* harmony import */ var _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../webgl/RenderingContext.js */ "./node_modules/@arcgis/core/views/webgl/RenderingContext.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class l{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(l._instance)return l._instanceRefCount++,l._instance;l._instanceRefCount=1,l._instance=this,this._ownsRctx=!0;const t=document.createElement("canvas").getContext("webgl");t.getExtension("OES_texture_float"),this._rctx=new _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_10__.RenderingContext(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=(0,_2d_engine_webgl_shaders_MaterialPrograms_js__WEBPACK_IMPORTED_MODULE_6__.createProgramTemplate)("raster/reproject","raster/reproject",new Map([["a_position",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f("u_opacity",1),this._program.setUniform1i("u_image",0),this._program.setUniform1i("u_flipY",0),this._program.setUniform1i("u_transformGrid",1),this._quad=new _2d_engine_webgl_VertexStream_js__WEBPACK_IMPORTED_MODULE_5__["default"](this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.project)(t.extent,s),m=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__["default"]({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:_,y:g}=(0,_layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__.projectResolution)(m,s,t.extent);let l=(_+g)/2;const w=Math.round((o.xmax-o.xmin)/l),b=Math.round((o.ymax-o.ymin)/l);l=(o.width/w+o.height/b)/2;const j=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__["default"]({x:l,y:l,spatialReference:o.spatialReference}),D=(0,_layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__.getProjectionOffsetGrid)({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:j,hasWrapAround:!0,spacing:[16,16]}),R=(0,_webgl_rasterUtils_js__WEBPACK_IMPORTED_MODULE_9__.createTransformTexture)(this._rctx,D),C=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__.TextureDescriptor(w,b);C.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE;const T=new _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_8__.FramebufferObject(this._rctx,C);this._rctx.bindFramebuffer(T),this._rctx.setViewport(0,0,w,b),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(R,1),this._quad.bind();const{width:y=0,height:E=0}=t.texture.descriptor;if(this._program.setUniform2f("u_srcImageSize",y,E),this._program.setUniform2fv("u_transformSpacing",D.spacing),this._program.setUniform2fv("u_transformGridSize",D.size),this._program.setUniform2f("u_targetImageSize",w,b),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),R.dispose(),n){const{width:t,height:e}=T,r=new ImageData(t??0,e??0);T.readPixels(0,0,t??0,e??0,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelType.UNSIGNED_BYTE,r.data);const i=T.detachColorTexture(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.ColorAttachment.COLOR_ATTACHMENT0);return T.dispose(),{texture:i,extent:o,imageData:r}}const M=T.detachColorTexture(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.ColorAttachment.COLOR_ATTACHMENT0);return T.dispose(),{texture:M,extent:o}}reprojectBitmapData(t,e){const r=(0,_2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__.isImageSource)(t.bitmapData)?(0,_2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__.rasterize)(t.bitmapData):t.bitmapData,i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__.TextureDescriptor;i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE,i.width=t.bitmapData.width,i.height=t.bitmapData.height;const a=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_11__.Texture(this._rctx,i,r),o=this.reprojectTexture({texture:a,extent:t.extent},e,!0);o.texture.dispose();const m=document.createElement("canvas"),p=o.imageData;m.width=p.width,m.height=p.height;return m.getContext("2d").putImageData(p,0,0),{bitmapData:m,extent:o.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e,{responseType:"image"})).data,s=document.createElement("canvas");s.width=a.width,s.height=a.height;const n=s.getContext("2d");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(l._instanceRefCount--,0===l._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),l._instance=null)):(this._quad.dispose(),this._program.dispose())}}l._instanceRefCount=0;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/programUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/programUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   glslifyDefineMap: () => (/* binding */ n)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function e(e){const{options:n,value:o}=e;return"number"==typeof n[o]}function n(n){let o="";for(const t in n){const i=n[t];if("boolean"==typeof i)i&&(o+=`#define ${t}\n`);else if("number"==typeof i)o+=`#define ${t} ${i.toFixed()}\n`;else if("object"==typeof i)if(e(i)){const{value:e,options:n,namespace:f}=i,s=f?`${f}_`:"";for(const t in n)o+=`#define ${s}${t} ${n[t].toFixed()}\n`;o+=`#define ${t} ${s}${e}\n`}else{const e=i.options;let n=0;for(const t in e)o+=`#define ${e[t]} ${(n++).toFixed()}\n`;o+=`#define ${t} ${e[i.value]}\n`}}return o}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19LTUxMYXllclZpZXcyRF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQytrQixTQUFTLDRGQUE0RixjQUFjLHVGQUF1RixrRUFBa0UsK0NBQStDLFFBQVEsb0RBQUMsSUFBSSx5QkFBeUIsa0NBQWtDLFdBQVcsd0NBQXdDLHFLQUFxSyxtREFBbUQsY0FBYyxrQkFBa0IsOEJBQThCLGlDQUFpQyxhQUFhLEdBQUcsa0JBQWtCLG1CQUFtQixTQUFTLG9EQUFDLHlDQUF5QyxvREFBQywyQ0FBMkMsb0RBQUMsOENBQThDLDZDQUE2Qyw4RUFBOEUsNEJBQTRCLDZDQUE2QyxNQUFNLHFCQUFxQixvQkFBb0IsdUJBQXVCLE9BQU8scUJBQXFCLEdBQUcsYUFBYSxPQUFPLGdDQUFnQyxvQkFBb0IsUUFBUSwwQ0FBQyxvQkFBb0IsRUFBRSxxRUFBQyxJQUFJLGVBQWUsRUFBRSxRQUFRLGtEQUFDLGVBQWUsT0FBTyx1REFBQyxJQUFJLE9BQU8sOEVBQThFLDhCQUE4QixFQUFFLDRCQUE0QixlQUFlLG1EQUFtRCxzQkFBc0IsY0FBYyx3SUFBd0ksNEJBQTRCLHNEQUFzRCxrQkFBa0IsS0FBSyxrQkFBa0IsZUFBZSx5QkFBeUIsR0FBRyxnQkFBZ0IsTUFBTSx5Q0FBeUMsa0JBQWtCLGVBQWUsaURBQWlELG9CQUFvQixRQUFRLG9FQUFDLHVEQUF1RCx5RUFBQywyQkFBMkIseURBQUMsNEJBQTRCLGtCQUFrQixrQ0FBa0Msb0RBQW9ELFNBQVMsY0FBYyxRQUFRLDBFQUFDLENBQUMsZ0ZBQUMsSUFBSSwwRUFBQyxDQUFDLGdGQUFDLEVBQUUsa0JBQWtCLGtGQUFrRiw4RUFBQyxlQUFlLGtGQUFDLE1BQU0sb0ZBQW9GLDhFQUFDLGVBQWUsa0ZBQUMsTUFBTSw4RUFBOEUsOEVBQUMsZUFBZSxrRkFB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cUJBQXFCLDJDQUEyQyxrQ0FBa0MsMkJBQTJCLG1CQUFtQiw2Q0FBNkMsdUNBQXVDLHVCQUF1QixrQ0FBa0Msc0JBQXNCLElBQUksT0FBTyx5Q0FBeUMsVUFBVSxxTUFBcU0sc0JBQW9EOzs7Ozs7Ozs7Ozs7Ozs7QUNKMXFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNLGtCQUFrQixHQUFHLDRCQUE0QixjQUFjLFNBQVMsa0JBQWtCLGFBQWEseUNBQXlDLEVBQUUsS0FBSyx5Q0FBeUMsR0FBRyxFQUFFLFlBQVksSUFBSSxvQ0FBb0MsTUFBTSw4QkFBOEIsVUFBVSxFQUFFLE1BQU0sK0JBQStCLEVBQUUsRUFBRSxHQUFHLEVBQUUsZUFBZSxJQUFJLGNBQWMsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksS0FBSyxrQkFBa0IsUUFBUSwrQkFBK0IsTUFBTSxFQUFFLGdCQUFnQixJQUFJLGNBQWMsR0FBRyxFQUFFLFdBQVcsS0FBSyxTQUF1QyIsInNvdXJjZXMiOlsid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvc3VwcG9ydC9rbWxVdGlscy5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL0JpdG1hcC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL0JpdG1hcENvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL0ltYWdlcnlCaXRtYXBTb3VyY2UuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS93ZWJnbC9zaGFkZXJzL01hdGVyaWFsUHJvZ3JhbXMuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9LTUxMYXllclZpZXcyRC5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2dyYXBoaWNzL0dyYXBoaWNDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL3N1cHBvcnQvaW1hZ2VSZXByb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL3dlYmdsL3Byb2dyYW1VdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGUgZnJvbVwiLi4vLi4vY29uZmlnLmpzXCI7aW1wb3J0e2lkIGFzIG99ZnJvbVwiLi4vLi4va2VybmVsLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vUG9wdXBUZW1wbGF0ZS5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnR7Y2xvbmUgYXMgc31mcm9tXCIuLi8uLi9jb3JlL2xhbmcuanNcIjtpbXBvcnR7YWRkUXVlcnlQYXJhbWV0ZXJzIGFzIG59ZnJvbVwiLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydCBpIGZyb21cIi4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtpbXBvcnR7Y3JlYXRlIGFzIGYsbmVnYXRpdmVJbmZpbml0eSBhcyBhLGV4cGFuZFdpdGhBQUJCIGFzIGwsZXF1YWxzIGFzIHV9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2dldEJvdW5kc1hZWiBhcyBtfWZyb21cIi4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYm91bmRzVXRpbHMuanNcIjtpbXBvcnR7ZnJvbUpTT04gYXMgcH1mcm9tXCIuLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnQgeSBmcm9tXCIuLi8uLi9yZXN0L3N1cHBvcnQvRmVhdHVyZVNldC5qc1wiO2NvbnN0IGM9e2VzcmlHZW9tZXRyeVBvaW50OlwicG9pbnRzXCIsZXNyaUdlb21ldHJ5UG9seWxpbmU6XCJwb2x5bGluZXNcIixlc3JpR2VvbWV0cnlQb2x5Z29uOlwicG9seWdvbnNcIn07ZnVuY3Rpb24gZChlKXtjb25zdCBvPWUuZm9sZGVyc3x8W10sdD1vLnNsaWNlKCkscj1uZXcgTWFwLG49bmV3IE1hcCxpPW5ldyBNYXAsZj1uZXcgTWFwLGE9bmV3IE1hcCxsPXtlc3JpR2VvbWV0cnlQb2ludDpuLGVzcmlHZW9tZXRyeVBvbHlsaW5lOmksZXNyaUdlb21ldHJ5UG9seWdvbjpmfTsoZS5mZWF0dXJlQ29sbGVjdGlvbj8ubGF5ZXJzfHxbXSkuZm9yRWFjaCgoZT0+e2NvbnN0IG89cyhlKTtvLmZlYXR1cmVTZXQuZmVhdHVyZXM9W107Y29uc3QgdD1lLmZlYXR1cmVTZXQuZ2VvbWV0cnlUeXBlO3Iuc2V0KHQsbyk7Y29uc3QgYT1lLmxheWVyRGVmaW5pdGlvbi5vYmplY3RJZEZpZWxkO1wiZXNyaUdlb21ldHJ5UG9pbnRcIj09PXQ/aChuLGEsZS5mZWF0dXJlU2V0LmZlYXR1cmVzKTpcImVzcmlHZW9tZXRyeVBvbHlsaW5lXCI9PT10P2goaSxhLGUuZmVhdHVyZVNldC5mZWF0dXJlcyk6XCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI9PT10JiZoKGYsYSxlLmZlYXR1cmVTZXQuZmVhdHVyZXMpfSkpLGUuZ3JvdW5kT3ZlcmxheXMmJmUuZ3JvdW5kT3ZlcmxheXMuZm9yRWFjaCgoZT0+e2Euc2V0KGUuaWQsZSl9KSksby5mb3JFYWNoKChvPT57by5uZXR3b3JrTGlua0lkcy5mb3JFYWNoKChyPT57Y29uc3Qgcz1QKHIsby5pZCxlLm5ldHdvcmtMaW5rcyk7cyYmdC5wdXNoKHMpfSkpfSkpLHQuZm9yRWFjaCgoZT0+e2lmKGUuZmVhdHVyZUluZm9zKXtlLnBvaW50cz1zKHIuZ2V0KFwiZXNyaUdlb21ldHJ5UG9pbnRcIikpLGUucG9seWxpbmVzPXMoci5nZXQoXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiKSksZS5wb2x5Z29ucz1zKHIuZ2V0KFwiZXNyaUdlb21ldHJ5UG9seWdvblwiKSksZS5tYXBJbWFnZXM9W107Zm9yKGNvbnN0IG8gb2YgZS5mZWF0dXJlSW5mb3Mpc3dpdGNoKG8udHlwZSl7Y2FzZVwiZXNyaUdlb21ldHJ5UG9pbnRcIjpjYXNlXCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiOmNhc2VcImVzcmlHZW9tZXRyeVBvbHlnb25cIjp7Y29uc3QgdD1sW28udHlwZV0uZ2V0KG8uaWQpO3QmJmVbY1tvLnR5cGVdXT8uZmVhdHVyZVNldC5mZWF0dXJlcy5wdXNoKHQpO2JyZWFrfWNhc2VcIkdyb3VuZE92ZXJsYXlcIjp7Y29uc3QgdD1hLmdldChvLmlkKTt0JiZlLm1hcEltYWdlcy5wdXNoKHQpO2JyZWFrfX1lLmZ1bGxFeHRlbnQ9aihbZV0pfX0pKTtjb25zdCB1PWoodCk7cmV0dXJue2ZvbGRlcnM6byxzdWJsYXllcnM6dCxleHRlbnQ6dX19ZnVuY3Rpb24gZyh0LHMsaSxmKXtjb25zdCBhPW8/LmZpbmRDcmVkZW50aWFsKHQpO3Q9bih0LHt0b2tlbjphPy50b2tlbn0pO2NvbnN0IGw9ZS5rbWxTZXJ2aWNlVXJsO3JldHVybiByKGwse3F1ZXJ5Ont1cmw6dCxtb2RlbDpcInNpbXBsZVwiLGZvbGRlcnM6XCJcIixyZWZyZXNoOjAhPT1pfHx2b2lkIDAsb3V0U1I6SlNPTi5zdHJpbmdpZnkocyl9LHJlc3BvbnNlVHlwZTpcImpzb25cIixzaWduYWw6Zn0pfWZ1bmN0aW9uIFMoZSxvLHQ9bnVsbCxyPVtdKXtjb25zdCBzPVtdLG49e30saT1vLnN1YmxheWVycyxmPW5ldyBTZXQoby5mb2xkZXJzLm1hcCgoZT0+ZS5pZCkpKTtyZXR1cm4gaS5mb3JFYWNoKChvPT57Y29uc3QgaT1uZXcgZTtpZih0P2kucmVhZChvLHQpOmkucmVhZChvKSxyLmxlbmd0aCYmZi5oYXMoaS5pZCkmJihpLnZpc2libGU9ci5pbmNsdWRlcyhpLmlkKSksbltvLmlkXT1pLG51bGwhPW8ucGFyZW50Rm9sZGVySWQmJi0xIT09by5wYXJlbnRGb2xkZXJJZCl7Y29uc3QgZT1uW28ucGFyZW50Rm9sZGVySWRdO2Uuc3VibGF5ZXJzfHwoZS5zdWJsYXllcnM9W10pLGUuc3VibGF5ZXJzPy51bnNoaWZ0KGkpfWVsc2Ugcy51bnNoaWZ0KGkpfSkpLHN9ZnVuY3Rpb24gaChlLG8sdCl7dC5mb3JFYWNoKCh0PT57ZS5zZXQodC5hdHRyaWJ1dGVzW29dLHQpfSkpfWZ1bmN0aW9uIEcoZSxvKXtsZXQgdDtyZXR1cm4gby5zb21lKChvPT5vLmlkPT09ZSYmKHQ9bywhMCkpKSx0fWZ1bmN0aW9uIFAoZSxvLHQpe2NvbnN0IHI9RyhlLHQpO3JldHVybiByJiYoci5wYXJlbnRGb2xkZXJJZD1vLHIubmV0d29ya0xpbms9cikscn1hc3luYyBmdW5jdGlvbiBiKGUpe2NvbnN0IG89eS5mcm9tSlNPTihlLmZlYXR1cmVTZXQpLmZlYXR1cmVzLHI9ZS5sYXllckRlZmluaXRpb24scz1wKHIuZHJhd2luZ0luZm8ucmVuZGVyZXIpLG49dC5mcm9tSlNPTihlLnBvcHVwSW5mbyksaT1bXTtmb3IoY29uc3QgdCBvZiBvKXtjb25zdCBlPWF3YWl0IHMuZ2V0U3ltYm9sQXN5bmModCk7dC5zeW1ib2w9ZSx0LnBvcHVwVGVtcGxhdGU9bix0LnZpc2libGU9ITAsaS5wdXNoKHQpfXJldHVybiBpfWZ1bmN0aW9uIGooZSl7Y29uc3Qgbz1mKGEpLHQ9ZihhKTtmb3IoY29uc3QgciBvZiBlKXtpZihyLnBvbHlnb25zPy5mZWF0dXJlU2V0Py5mZWF0dXJlcylmb3IoY29uc3QgZSBvZiByLnBvbHlnb25zLmZlYXR1cmVTZXQuZmVhdHVyZXMpbShvLGUuZ2VvbWV0cnkpLGwodCxvKTtpZihyLnBvbHlsaW5lcz8uZmVhdHVyZVNldD8uZmVhdHVyZXMpZm9yKGNvbnN0IGUgb2Ygci5wb2x5bGluZXMuZmVhdHVyZVNldC5mZWF0dXJlcyltKG8sZS5nZW9tZXRyeSksbCh0LG8pO2lmKHIucG9pbnRzPy5mZWF0dXJlU2V0Py5mZWF0dXJlcylmb3IoY29uc3QgZSBvZiByLnBvaW50cy5mZWF0dXJlU2V0LmZlYXR1cmVzKW0obyxlLmdlb21ldHJ5KSxsKHQsbyk7aWYoci5tYXBJbWFnZXMpZm9yKGNvbnN0IGUgb2Ygci5tYXBJbWFnZXMpbShvLGUuZXh0ZW50KSxsKHQsbyl9cmV0dXJuIHUodCxhKT92b2lkIDA6e3htaW46dFswXSx5bWluOnRbMV0sem1pbjp0WzJdLHhtYXg6dFszXSx5bWF4OnRbNF0sem1heDp0WzVdLHNwYXRpYWxSZWZlcmVuY2U6aS5XR1M4NH19ZXhwb3J0e2ogYXMgY29tcHV0ZUV4dGVudCxnIGFzIGZldGNoU2VydmljZSxiIGFzIGdldEdyYXBoaWNzLGQgYXMgcGFyc2VLTUwsUyBhcyBzdWJsYXllcnNGcm9tSlNPTn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIHQsb25BYm9ydE9yVGhyb3cgYXMgZSx0aHJvd0lmTm90QWJvcnRFcnJvciBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e2cgYXMgaSxoIGFzIHIsciBhcyBoLGwgYXMgbyxtIGFzIHV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL21hdDMuanNcIjtpbXBvcnR7YyBhcyBhfWZyb21cIi4uLy4uLy4uL2NodW5rcy9tYXQzZjMyLmpzXCI7aW1wb3J0e2YgYXMgbn1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdmVjMmYzMi5qc1wiO2ltcG9ydHtEaXNwbGF5T2JqZWN0IGFzIGR9ZnJvbVwiLi9EaXNwbGF5T2JqZWN0LmpzXCI7aW1wb3J0IGwgZnJvbVwiLi9JbWFnZXJ5Qml0bWFwU291cmNlLmpzXCI7aW1wb3J0e0NvbnRleHRUeXBlIGFzIGN9ZnJvbVwiLi4vLi4vd2ViZ2wvY29udGV4dFV0aWxzLmpzXCI7aW1wb3J0e1NpemVkUGl4ZWxGb3JtYXQgYXMgXyxQaXhlbEZvcm1hdCBhcyBwLFRleHR1cmVXcmFwTW9kZSBhcyBtfWZyb21cIi4uLy4uL3dlYmdsL2VudW1zLmpzXCI7aW1wb3J0e1RleHR1cmUgYXMgeH1mcm9tXCIuLi8uLi93ZWJnbC9UZXh0dXJlLmpzXCI7aW1wb3J0e1RleHR1cmVEZXNjcmlwdG9yIGFzIGd9ZnJvbVwiLi4vLi4vd2ViZ2wvVGV4dHVyZURlc2NyaXB0b3IuanNcIjtmdW5jdGlvbiBmKHQpe3JldHVybiB0JiZcInJlbmRlclwiaW4gdH1mdW5jdGlvbiB3KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4gZS53aWR0aD10LndpZHRoLGUuaGVpZ2h0PXQuaGVpZ2h0LHQucmVuZGVyKGUuZ2V0Q29udGV4dChcIjJkXCIpKSxlfWZ1bmN0aW9uIHYodCl7cmV0dXJuIGYodCk/dCBpbnN0YW5jZW9mIGw/dC5nZXRSZW5kZXJlZFJhc3RlclBpeGVscygpPy5yZW5kZXJlZFJhc3RlclBpeGVsczp3KHQpOnR9Y2xhc3MgYiBleHRlbmRzIGR7Y29uc3RydWN0b3IodD1udWxsLGU9ITEpe3N1cGVyKCksdGhpcy5ibGVuZEZ1bmN0aW9uPVwic3RhbmRhcmRcIix0aGlzLl9zb3VyY2VXaWR0aD0wLHRoaXMuX3NvdXJjZUhlaWdodD0wLHRoaXMuX3RleHR1cmVJbnZhbGlkYXRlZD0hMSx0aGlzLl90ZXh0dXJlPW51bGwsdGhpcy5zdGVuY2lsUmVmPTAsdGhpcy5jb29yZFNjYWxlPVsxLDFdLHRoaXMuX2hlaWdodD12b2lkIDAsdGhpcy5waXhlbFJhdGlvPTEsdGhpcy5yZXNvbHV0aW9uPTAsdGhpcy5yb3RhdGlvbj0wLHRoaXMuX3NvdXJjZT1udWxsLHRoaXMuX3dpZHRoPXZvaWQgMCx0aGlzLng9MCx0aGlzLnk9MCx0aGlzLmltbXV0YWJsZT1lLHRoaXMuc291cmNlPXQsdGhpcy5yZXF1ZXN0UmVuZGVyPXRoaXMucmVxdWVzdFJlbmRlci5iaW5kKHRoaXMpfWRlc3Ryb3koKXt0aGlzLl90ZXh0dXJlJiYodGhpcy5fdGV4dHVyZS5kaXNwb3NlKCksdGhpcy5fdGV4dHVyZT1udWxsKSxudWxsIT10aGlzLl91cGxvYWRTdGF0dXMmJih0aGlzLl91cGxvYWRTdGF0dXMuY29udHJvbGxlci5hYm9ydCgpLHRoaXMuX3VwbG9hZFN0YXR1cz1udWxsKX1nZXQgaXNTb3VyY2VTY2FsZWQoKXtyZXR1cm4gdGhpcy53aWR0aCE9PXRoaXMuX3NvdXJjZVdpZHRofHx0aGlzLmhlaWdodCE9PXRoaXMuX3NvdXJjZUhlaWdodH1nZXQgaGVpZ2h0KCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuX2hlaWdodD90aGlzLl9oZWlnaHQ6dGhpcy5fc291cmNlSGVpZ2h0fXNldCBoZWlnaHQodCl7dGhpcy5faGVpZ2h0PXR9Z2V0IHNvdXJjZSgpe3JldHVybiB0aGlzLl9zb3VyY2V9c2V0IHNvdXJjZSh0KXtudWxsPT10JiZudWxsPT10aGlzLl9zb3VyY2V8fCh0aGlzLl9zb3VyY2U9dCx0aGlzLmludmFsaWRhdGVUZXh0dXJlKCksdGhpcy5yZXF1ZXN0UmVuZGVyKCkpfWdldCB3aWR0aCgpe3JldHVybiB2b2lkIDAhPT10aGlzLl93aWR0aD90aGlzLl93aWR0aDp0aGlzLl9zb3VyY2VXaWR0aH1zZXQgd2lkdGgodCl7dGhpcy5fd2lkdGg9dH1iZWZvcmVSZW5kZXIodCl7c3VwZXIuYmVmb3JlUmVuZGVyKHQpLHRoaXMudXBkYXRlVGV4dHVyZSh0KX1hc3luYyBzZXRTb3VyY2VBc3luYyhzLGkpe251bGwhPXRoaXMuX3VwbG9hZFN0YXR1cyYmdGhpcy5fdXBsb2FkU3RhdHVzLmNvbnRyb2xsZXIuYWJvcnQoKTtjb25zdCByPW5ldyBBYm9ydENvbnRyb2xsZXIsaD10KCk7cmV0dXJuIGUoaSwoKCk9PnIuYWJvcnQoKSkpLGUociwodD0+aC5yZWplY3QodCkpKSx0aGlzLl91cGxvYWRTdGF0dXM9e2NvbnRyb2xsZXI6cixyZXNvbHZlcjpofSx0aGlzLnNvdXJjZT1zLGgucHJvbWlzZX1pbnZhbGlkYXRlVGV4dHVyZSgpe3RoaXMuX3RleHR1cmVJbnZhbGlkYXRlZHx8KHRoaXMuX3RleHR1cmVJbnZhbGlkYXRlZD0hMCx0aGlzLl9zb3VyY2UgaW5zdGFuY2VvZiBIVE1MSW1hZ2VFbGVtZW50Pyh0aGlzLl9zb3VyY2VIZWlnaHQ9dGhpcy5fc291cmNlLm5hdHVyYWxIZWlnaHQsdGhpcy5fc291cmNlV2lkdGg9dGhpcy5fc291cmNlLm5hdHVyYWxXaWR0aCk6dGhpcy5fc291cmNlJiYodGhpcy5fc291cmNlSGVpZ2h0PXRoaXMuX3NvdXJjZS5oZWlnaHQsdGhpcy5fc291cmNlV2lkdGg9dGhpcy5fc291cmNlLndpZHRoKSl9dXBkYXRlVHJhbnNpdGlvblByb3BlcnRpZXModCxlKXt0Pj02NCYmKHRoaXMuZmFkZVRyYW5zaXRpb25FbmFibGVkPSExLHRoaXMuaW5GYWRlVHJhbnNpdGlvbj0hMSksc3VwZXIudXBkYXRlVHJhbnNpdGlvblByb3BlcnRpZXModCxlKX1zZXRUcmFuc2Zvcm0odCl7Y29uc3QgZT1pKHRoaXMudHJhbnNmb3Jtcy5kdnMpLFtzLGFdPXQudG9TY3JlZW5Ob1JvdGF0aW9uKFswLDBdLFt0aGlzLngsdGhpcy55XSksZD10aGlzLnJlc29sdXRpb24vdGhpcy5waXhlbFJhdGlvL3QucmVzb2x1dGlvbixsPWQqdGhpcy53aWR0aCxjPWQqdGhpcy5oZWlnaHQsXz1NYXRoLlBJKnRoaXMucm90YXRpb24vMTgwO3IoZSxlLG4ocyxhKSkscihlLGUsbihsLzIsYy8yKSksaChlLGUsLV8pLHIoZSxlLG4oLWwvMiwtYy8yKSksbyhlLGUsbihsLGMpKSx1KHRoaXMudHJhbnNmb3Jtcy5kdnMsdC5kaXNwbGF5Vmlld01hdDMsZSl9c2V0U2FtcGxpbmdQcm9maWxlKHQpe3RoaXMuX3RleHR1cmUmJih0Lm1pcHMmJiF0aGlzLl90ZXh0dXJlLmRlc2NyaXB0b3IuaGFzTWlwbWFwJiZ0aGlzLl90ZXh0dXJlLmdlbmVyYXRlTWlwbWFwKCksdGhpcy5fdGV4dHVyZS5zZXRTYW1wbGluZ01vZGUodC5zYW1wbGluZ01vZGUpKX1iaW5kKHQsZSl7dGhpcy5fdGV4dHVyZSYmdC5iaW5kVGV4dHVyZSh0aGlzLl90ZXh0dXJlLGUpfWFzeW5jIHVwZGF0ZVRleHR1cmUoe2NvbnRleHQ6dCxwYWludGVyOmV9KXtpZighdGhpcy5fdGV4dHVyZUludmFsaWRhdGVkKXJldHVybjtpZih0aGlzLl90ZXh0dXJlSW52YWxpZGF0ZWQ9ITEsdGhpcy5fdGV4dHVyZXx8KHRoaXMuX3RleHR1cmU9dGhpcy5fY3JlYXRlVGV4dHVyZSh0KSksIXRoaXMuc291cmNlKXJldHVybiB2b2lkIHRoaXMuX3RleHR1cmUuc2V0RGF0YShudWxsKTt0aGlzLl90ZXh0dXJlLnJlc2l6ZSh0aGlzLl9zb3VyY2VXaWR0aCx0aGlzLl9zb3VyY2VIZWlnaHQpO2NvbnN0IGk9dih0aGlzLnNvdXJjZSk7dHJ5e2lmKG51bGwhPXRoaXMuX3VwbG9hZFN0YXR1cyl7Y29uc3R7Y29udHJvbGxlcjp0LHJlc29sdmVyOnN9PXRoaXMuX3VwbG9hZFN0YXR1cyxyPXtzaWduYWw6dC5zaWduYWx9LHt3aWR0aDpoLGhlaWdodDpvfT10aGlzLHU9dGhpcy5fdGV4dHVyZSxhPWUudGV4dHVyZVVwbG9hZE1hbmFnZXI7YXdhaXQgYS5lbnF1ZXVlVGV4dHVyZVVwZGF0ZSh7ZGF0YTppLHRleHR1cmU6dSx3aWR0aDpoLGhlaWdodDpvfSxyKSxzLnJlc29sdmUoKSx0aGlzLl91cGxvYWRTdGF0dXM9bnVsbH1lbHNlIHRoaXMuX3RleHR1cmUuc2V0RGF0YShpKTt0aGlzLnJlYWR5KCl9Y2F0Y2gocil7cyhyKX19b25EZXRhY2goKXt0aGlzLmRlc3Ryb3koKX1fY3JlYXRlVHJhbnNmb3Jtcygpe3JldHVybntkdnM6YSgpfX1fY3JlYXRlVGV4dHVyZSh0KXtjb25zdCBlPXRoaXMuaW1tdXRhYmxlJiZ0LnR5cGU9PT1jLldFQkdMMixzPW5ldyBnO3JldHVybiBzLmludGVybmFsRm9ybWF0PWU/Xy5SR0JBODpwLlJHQkEscy53cmFwTW9kZT1tLkNMQU1QX1RPX0VER0Uscy5pc0ltbXV0YWJsZT1lLHMud2lkdGg9dGhpcy5fc291cmNlV2lkdGgscy5oZWlnaHQ9dGhpcy5fc291cmNlSGVpZ2h0LG5ldyB4KHQscyl9fWV4cG9ydHtiIGFzIEJpdG1hcCxmIGFzIGlzSW1hZ2VTb3VyY2UsdyBhcyByYXN0ZXJpemV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHticnVzaGVzIGFzIGV9ZnJvbVwiLi9icnVzaGVzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyByfWZyb21cIi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnQgcyBmcm9tXCIuL3dlYmdsL1dHTENvbnRhaW5lci5qc1wiO2NsYXNzIGEgZXh0ZW5kcyBze2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9oYXNDcm9zc2ZhZGU9ITF9Z2V0IHJlcXVpcmVzRGVkaWNhdGVkRkJPKCl7cmV0dXJuIHN1cGVyLnJlcXVpcmVzRGVkaWNhdGVkRkJPfHx0aGlzLl9oYXNDcm9zc2ZhZGV9YmVmb3JlUmVuZGVyKGUpe3N1cGVyLmJlZm9yZVJlbmRlcihlKSx0aGlzLl9tYW5hZ2VGYWRlKCl9cHJlcGFyZVJlbmRlclBhc3NlcyhzKXtjb25zdCBhPXMucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwiYml0bWFwXCIsYnJ1c2hlczpbZS5iaXRtYXBdLHRhcmdldDooKT0+dGhpcy5jaGlsZHJlbixkcmF3UGhhc2U6ci5NQVB9KTtyZXR1cm5bLi4uc3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhzKSxhXX1fbWFuYWdlRmFkZSgpe3RoaXMuY2hpbGRyZW4ucmVkdWNlKCgoZSxyKT0+ZSsoci5pbkZhZGVUcmFuc2l0aW9uPzE6MCkpLDApPj0yPyh0aGlzLmNoaWxkcmVuLmZvckVhY2goKGU9PmUuYmxlbmRGdW5jdGlvbj1cImFkZGl0aXZlXCIpKSx0aGlzLl9oYXNDcm9zc2ZhZGU9ITApOih0aGlzLmNoaWxkcmVuLmZvckVhY2goKGU9PmUuYmxlbmRGdW5jdGlvbj1cInN0YW5kYXJkXCIpKSx0aGlzLl9oYXNDcm9zc2ZhZGU9ITEpfX1leHBvcnR7YSBhcyBCaXRtYXBDb250YWluZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmNsYXNzIGx7Y29uc3RydWN0b3IobCxlLHQpe3RoaXMucGl4ZWxCbG9jaz1sLHRoaXMuZXh0ZW50PWUsdGhpcy5vcmlnaW5hbFBpeGVsQmxvY2s9dH1nZXQgd2lkdGgoKXtyZXR1cm4gbnVsbCE9dGhpcy5waXhlbEJsb2NrP3RoaXMucGl4ZWxCbG9jay53aWR0aDowfWdldCBoZWlnaHQoKXtyZXR1cm4gbnVsbCE9dGhpcy5waXhlbEJsb2NrP3RoaXMucGl4ZWxCbG9jay5oZWlnaHQ6MH1yZW5kZXIobCl7Y29uc3QgZT10aGlzLnBpeGVsQmxvY2s7aWYobnVsbD09ZSlyZXR1cm47Y29uc3QgdD10aGlzLmZpbHRlcih7ZXh0ZW50OnRoaXMuZXh0ZW50LHBpeGVsQmxvY2s6dGhpcy5vcmlnaW5hbFBpeGVsQmxvY2s/P2V9KTtpZihudWxsPT10LnBpeGVsQmxvY2spcmV0dXJuO3QucGl4ZWxCbG9jay5tYXNrSXNBbHBoYSYmKHQucGl4ZWxCbG9jay5wcmVtdWx0aXBseUFscGhhPSEwKTtjb25zdCBpPXQucGl4ZWxCbG9jay5nZXRBc1JHQkEoKSxoPWwuY3JlYXRlSW1hZ2VEYXRhKHQucGl4ZWxCbG9jay53aWR0aCx0LnBpeGVsQmxvY2suaGVpZ2h0KTtoLmRhdGEuc2V0KGkpLGwucHV0SW1hZ2VEYXRhKGgsMCwwKX1nZXRSZW5kZXJlZFJhc3RlclBpeGVscygpe2NvbnN0IGw9dGhpcy5maWx0ZXIoe2V4dGVudDp0aGlzLmV4dGVudCxwaXhlbEJsb2NrOnRoaXMucGl4ZWxCbG9ja30pO3JldHVybiBudWxsPT1sLnBpeGVsQmxvY2s/bnVsbDoobC5waXhlbEJsb2NrLm1hc2tJc0FscGhhJiYobC5waXhlbEJsb2NrLnByZW11bHRpcGx5QWxwaGE9ITApLHt3aWR0aDpsLnBpeGVsQmxvY2sud2lkdGgsaGVpZ2h0OmwucGl4ZWxCbG9jay5oZWlnaHQscmVuZGVyZWRSYXN0ZXJQaXhlbHM6bmV3IFVpbnQ4QXJyYXkobC5waXhlbEJsb2NrLmdldEFzUkdCQSgpLmJ1ZmZlcil9KX19ZXhwb3J0e2wgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3Jlc29sdmVJbmNsdWRlcyBhcyByfWZyb21cIi4vc291cmNlcy9yZXNvbHZlci5qc1wiO2ltcG9ydHtnbHNsaWZ5RGVmaW5lTWFwIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vd2ViZ2wvcHJvZ3JhbVV0aWxzLmpzXCI7Y29uc3QgZT1yPT57bGV0IHQ9XCJcIjt0Kz1yWzBdLnRvVXBwZXJDYXNlKCk7Zm9yKGxldCBlPTE7ZTxyLmxlbmd0aDtlKyspe2NvbnN0IHM9cltlXTtzPT09cy50b1VwcGVyQ2FzZSgpPyh0Kz1cIl9cIix0Kz1zKTp0Kz1zLnRvVXBwZXJDYXNlKCl9cmV0dXJuIHR9LHM9cj0+e2NvbnN0IHM9e307Zm9yKGNvbnN0IHQgaW4gcil7c1tlKHQpXT1yW3RdfXJldHVybiB0KHMpfSxvPSh0LGUsbyxuKT0+e2NvbnN0IGE9dCt0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKFwiL1wiKSkscD1lK2Uuc3Vic3RyaW5nKGUubGFzdEluZGV4T2YoXCIvXCIpKSxmPXMobik7cmV0dXJue2F0dHJpYnV0ZXM6byxzaGFkZXJzOnt2ZXJ0ZXhTaGFkZXI6ZityKGAke2F9LnZlcnRgKSxmcmFnbWVudFNoYWRlcjpmK3IoYCR7cH0uZnJhZ2ApfX19O2V4cG9ydHtvIGFzIGNyZWF0ZVByb2dyYW1UZW1wbGF0ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e3ZlcnNpb24gYXMgaX1mcm9tXCIuLi8uLi8uLi9rZXJuZWwuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi9jb3JlL0NvbGxlY3Rpb24uanNcIjtpbXBvcnR7YWJvcnRNYXliZSBhcyBzLGRlc3Ryb3lNYXliZSBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7d2F0Y2ggYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL3JlYWN0aXZlVXRpbHMuanNcIjtpbXBvcnR7cXVlcnlUb09iamVjdCBhcyBsLG9iamVjdFRvUXVlcnkgYXMgcn1mcm9tXCIuLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIG59ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnQgcCBmcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9FeHRlbnQuanNcIjtpbXBvcnR7bG9hZCBhcyBtLHByb2plY3QgYXMgY31mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9wcm9qZWN0aW9uLmpzXCI7aW1wb3J0IGQgZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZS5qc1wiO2ltcG9ydHtnZXRHcmFwaGljcyBhcyB5LGZldGNoU2VydmljZSBhcyBnLHBhcnNlS01MIGFzIHd9ZnJvbVwiLi4vLi4vLi4vbGF5ZXJzL3N1cHBvcnQva21sVXRpbHMuanNcIjtpbXBvcnR7cGFyc2VVcmwgYXMgdX1mcm9tXCIuLi8uLi8uLi9yZXN0L3V0aWxzLmpzXCI7aW1wb3J0e0dyYXBoaWNzQ29sbGVjdGlvbiBhcyBffWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvR3JhcGhpY3NDb2xsZWN0aW9uLmpzXCI7aW1wb3J0e0JpdG1hcCBhcyBifWZyb21cIi4uL2VuZ2luZS9CaXRtYXAuanNcIjtpbXBvcnR7Qml0bWFwQ29udGFpbmVyIGFzIFZ9ZnJvbVwiLi4vZW5naW5lL0JpdG1hcENvbnRhaW5lci5qc1wiO2ltcG9ydHtMYXllclZpZXcyRE1peGluIGFzIGZ9ZnJvbVwiLi9MYXllclZpZXcyRC5qc1wiO2ltcG9ydCB2IGZyb21cIi4vZ3JhcGhpY3MvR3JhcGhpY0NvbnRhaW5lci5qc1wiO2ltcG9ydCBTIGZyb21cIi4vZ3JhcGhpY3MvR3JhcGhpY3NWaWV3MkQuanNcIjtpbXBvcnQgSSBmcm9tXCIuLi8uLi9sYXllcnMvTGF5ZXJWaWV3LmpzXCI7aW1wb3J0e0ltYWdlUmVwcm9qZWN0b3IgYXMgeH1mcm9tXCIuLi8uLi9zdXBwb3J0L2ltYWdlUmVwcm9qZWN0aW9uLmpzXCI7Y2xhc3MgQ3tjb25zdHJ1Y3Rvcigpe3RoaXMuYWxsU3VibGF5ZXJzPW5ldyBNYXAsdGhpcy5hbGxQb2ludHM9W10sdGhpcy5hbGxQb2x5bGluZXM9W10sdGhpcy5hbGxQb2x5Z29ucz1bXSx0aGlzLmFsbE1hcEltYWdlcz1bXX19bGV0IGo9Y2xhc3MgZXh0ZW5kcyhmKEkpKXtjb25zdHJ1Y3Rvcigpe3N1cGVyKC4uLmFyZ3VtZW50cyksdGhpcy5fYml0bWFwSW5kZXg9bmV3IE1hcCx0aGlzLl9tYXBJbWFnZUNvbnRhaW5lcj1uZXcgVix0aGlzLl9rbWxWaXN1YWxEYXRhPW5ldyBDLHRoaXMuX2ZldGNoQ29udHJvbGxlcj1udWxsLHRoaXMuYWxsVmlzaWJsZVBvaW50cz1uZXcgXyx0aGlzLmFsbFZpc2libGVQb2x5bGluZXM9bmV3IF8sdGhpcy5hbGxWaXNpYmxlUG9seWdvbnM9bmV3IF8sdGhpcy5hbGxWaXNpYmxlTWFwSW1hZ2VzPW5ldyB0fWFzeW5jIGhpdFRlc3QoZSxpKXtjb25zdCB0PXRoaXMubGF5ZXI7cmV0dXJuW3RoaXMuX3BvaW50c1ZpZXc/LmhpdFRlc3QoZSksdGhpcy5fcG9seWxpbmVzVmlldz8uaGl0VGVzdChlKSx0aGlzLl9wb2x5Z29uc1ZpZXc/LmhpdFRlc3QoZSldLmZsYXQoKS5maWx0ZXIoQm9vbGVhbikubWFwKChpPT4oaS5sYXllcj10LGkuc291cmNlTGF5ZXI9dCx7dHlwZTpcImdyYXBoaWNcIixncmFwaGljOmksbGF5ZXI6dCxtYXBQb2ludDplfSkpKX11cGRhdGUoZSl7dGhpcy5fcG9seWdvbnNWaWV3JiZ0aGlzLl9wb2x5Z29uc1ZpZXcucHJvY2Vzc1VwZGF0ZShlKSx0aGlzLl9wb2x5bGluZXNWaWV3JiZ0aGlzLl9wb2x5bGluZXNWaWV3LnByb2Nlc3NVcGRhdGUoZSksdGhpcy5fcG9pbnRzVmlldyYmdGhpcy5fcG9pbnRzVmlldy5wcm9jZXNzVXBkYXRlKGUpfWF0dGFjaCgpe3RoaXMuX2ZldGNoQ29udHJvbGxlcj1uZXcgQWJvcnRDb250cm9sbGVyLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX21hcEltYWdlQ29udGFpbmVyKSx0aGlzLl9wb2x5Z29uc1ZpZXc9bmV3IFMoe3ZpZXc6dGhpcy52aWV3LGdyYXBoaWNzOnRoaXMuYWxsVmlzaWJsZVBvbHlnb25zLHJlcXVlc3RVcGRhdGVDYWxsYmFjazooKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCksY29udGFpbmVyOm5ldyB2KHRoaXMudmlldy5mZWF0dXJlc1RpbGluZ1NjaGVtZSl9KSx0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9wb2x5Z29uc1ZpZXcuY29udGFpbmVyKSx0aGlzLl9wb2x5bGluZXNWaWV3PW5ldyBTKHt2aWV3OnRoaXMudmlldyxncmFwaGljczp0aGlzLmFsbFZpc2libGVQb2x5bGluZXMscmVxdWVzdFVwZGF0ZUNhbGxiYWNrOigpPT50aGlzLnJlcXVlc3RVcGRhdGUoKSxjb250YWluZXI6bmV3IHYodGhpcy52aWV3LmZlYXR1cmVzVGlsaW5nU2NoZW1lKX0pLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX3BvbHlsaW5lc1ZpZXcuY29udGFpbmVyKSx0aGlzLl9wb2ludHNWaWV3PW5ldyBTKHt2aWV3OnRoaXMudmlldyxncmFwaGljczp0aGlzLmFsbFZpc2libGVQb2ludHMscmVxdWVzdFVwZGF0ZUNhbGxiYWNrOigpPT50aGlzLnJlcXVlc3RVcGRhdGUoKSxjb250YWluZXI6bmV3IHYodGhpcy52aWV3LmZlYXR1cmVzVGlsaW5nU2NoZW1lKX0pLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKHRoaXMuX3BvaW50c1ZpZXcuY29udGFpbmVyKSx0aGlzLmFkZEF0dGFjaEhhbmRsZXMoW3RoaXMuYWxsVmlzaWJsZU1hcEltYWdlcy5vbihcImNoYW5nZVwiLChlPT57ZS5hZGRlZC5mb3JFYWNoKChlPT50aGlzLl9hZGRNYXBJbWFnZShlKSkpLGUucmVtb3ZlZC5mb3JFYWNoKChlPT50aGlzLl9yZW1vdmVNYXBJbWFnZShlKSkpfSkpLG8oKCgpPT50aGlzLmxheWVyLnZpc2libGVTdWJsYXllcnMpLChlPT57Zm9yKGNvbnN0W2ksdF1vZiB0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFN1YmxheWVycyl0LnZpc2liaWxpdHk9MDtmb3IoY29uc3QgaSBvZiBlKXtjb25zdCBlPXRoaXMuX2ttbFZpc3VhbERhdGEuYWxsU3VibGF5ZXJzLmdldChpLmlkKTtlJiYoZS52aXNpYmlsaXR5PTEpfXRoaXMuX3JlZnJlc2hDb2xsZWN0aW9ucygpfSkpXSksdGhpcy5fdXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fZmV0Y2hTZXJ2aWNlKHRoaXMuX2ZldGNoQ29udHJvbGxlci5zaWduYWwpKSx0aGlzLl9pbWFnZVJlcHJvamVjdG9yPW5ldyB4fWRldGFjaCgpe3RoaXMuX2ZldGNoQ29udHJvbGxlcj1zKHRoaXMuX2ZldGNoQ29udHJvbGxlciksdGhpcy5fbWFwSW1hZ2VDb250YWluZXIucmVtb3ZlQWxsQ2hpbGRyZW4oKSx0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuX2JpdG1hcEluZGV4LmNsZWFyKCksdGhpcy5fcG9seWdvbnNWaWV3PWEodGhpcy5fcG9seWdvbnNWaWV3KSx0aGlzLl9wb2x5bGluZXNWaWV3PWEodGhpcy5fcG9seWxpbmVzVmlldyksdGhpcy5fcG9pbnRzVmlldz1hKHRoaXMuX3BvaW50c1ZpZXcpLHRoaXMuX2ltYWdlUmVwcm9qZWN0b3I9YSh0aGlzLl9pbWFnZVJlcHJvamVjdG9yKX1tb3ZlU3RhcnQoKXt9dmlld0NoYW5nZSgpe3RoaXMuX3BvbHlnb25zVmlldy52aWV3Q2hhbmdlKCksdGhpcy5fcG9seWxpbmVzVmlldy52aWV3Q2hhbmdlKCksdGhpcy5fcG9pbnRzVmlldy52aWV3Q2hhbmdlKCl9bW92ZUVuZCgpe31pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX3BvaW50c1ZpZXcudXBkYXRpbmd8fHRoaXMuX3BvbHlnb25zVmlldy51cGRhdGluZ3x8dGhpcy5fcG9seWxpbmVzVmlldy51cGRhdGluZ31fYWRkTWFwSW1hZ2UoZSl7KHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0fHx0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZT8uaXNXZWJNZXJjYXRvcikmJnRoaXMuX2ltYWdlUmVwcm9qZWN0b3IubG9hZEFuZFJlcHJvamVjdEJpdG1hcERhdGEoZS5ocmVmLHAuZnJvbUpTT04oZS5leHRlbnQpLHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlKS50aGVuKChpPT57Y29uc3QgdD1uZXcgYihpLmJpdG1hcERhdGEpO3QueD1pLmV4dGVudC54bWluLHQueT1pLmV4dGVudC55bWF4LHQucmVzb2x1dGlvbj1pLmV4dGVudC53aWR0aC9pLmJpdG1hcERhdGEud2lkdGgsdC5yb3RhdGlvbj1lLnJvdGF0aW9uLHRoaXMuX21hcEltYWdlQ29udGFpbmVyLmFkZENoaWxkKHQpLHRoaXMuX2JpdG1hcEluZGV4LnNldChlLHQpfSkpfWFzeW5jIF9nZXRWaWV3RGVwZW5kZW50VXJsKGUsdCl7Y29uc3R7dmlld0Zvcm1hdDpzLHZpZXdCb3VuZFNjYWxlOmEsaHR0cFF1ZXJ5Om99PWU7aWYobnVsbCE9cyl7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoXCJMb2FkaW5nIHRoaXMgbmV0d29yayBsaW5rIHJlcXVpcmVzIGEgdmlldyBzdGF0ZS5cIik7bGV0IG47aWYoYXdhaXQgbSgpLG51bGwhPWEmJjEhPT1hKXtjb25zdCBlPW5ldyBwKHQuZXh0ZW50KTtlLmV4cGFuZChhKSxuPWV9ZWxzZSBuPXQuZXh0ZW50O249YyhuLGQuV0dTODQpO2NvbnN0IGg9YyhuLGQuV2ViTWVyY2F0b3IpLHk9bi54bWluLGc9bi54bWF4LHc9bi55bWluLF89bi55bWF4LGI9dC5zaXplWzBdKnQucGl4ZWxSYXRpbyxWPXQuc2l6ZVsxXSp0LnBpeGVsUmF0aW8sZj1NYXRoLm1heChoLndpZHRoLGguaGVpZ2h0KSx2PXtcIltiYm94V2VzdF1cIjp5LnRvU3RyaW5nKCksXCJbYmJveEVhc3RdXCI6Zy50b1N0cmluZygpLFwiW2Jib3hTb3V0aF1cIjp3LnRvU3RyaW5nKCksXCJbYmJveE5vcnRoXVwiOl8udG9TdHJpbmcoKSxcIltsb29rYXRMb25dXCI6bi5jZW50ZXIueC50b1N0cmluZygpLFwiW2xvb2thdExhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbbG9va2F0UmFuZ2VdXCI6Zi50b1N0cmluZygpLFwiW2xvb2thdFRpbHRdXCI6XCIwXCIsXCJbbG9va2F0SGVhZGluZ11cIjp0LnJvdGF0aW9uLnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkxvbl1cIjpuLmNlbnRlci54LnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkxhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkFsdF1cIjpcIjBcIixcIltjYW1lcmFMb25dXCI6bi5jZW50ZXIueC50b1N0cmluZygpLFwiW2NhbWVyYUxhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbY2FtZXJhQWx0XVwiOmYudG9TdHJpbmcoKSxcIltob3JpekZvdl1cIjpcIjYwXCIsXCJbdmVydEZvdl1cIjpcIjYwXCIsXCJbaG9yaXpQaXhlbHNdXCI6Yi50b1N0cmluZygpLFwiW3ZlcnRQaXhlbHNdXCI6Vi50b1N0cmluZygpLFwiW3RlcnJhaW5FbmFibGVkXVwiOlwiMFwiLFwiW2NsaWVudFZlcnNpb25dXCI6aSxcIltrbWxWZXJzaW9uXVwiOlwiMi4yXCIsXCJbY2xpZW50TmFtZV1cIjpcIkFyY0dJUyBBUEkgZm9yIEphdmFTY3JpcHRcIixcIltsYW5ndWFnZV1cIjpcImVuLVVTXCJ9LFM9ZT0+e2Zvcihjb25zdCBpIGluIGUpe2xldCB0O2Zvcih0IGluIHYpZVtpXT1lW2ldLnJlcGxhY2UodCx2W3RdKX19LEk9bChzKTtTKEkpO2xldCB4PXt9O251bGwhPW8mJih4PWwobyksUyh4KSk7Y29uc3QgQz11KGUuaHJlZik7Qy5xdWVyeT17Li4uQy5xdWVyeSwuLi5JLC4uLnh9O3JldHVybmAke0MucGF0aH0/JHtyKEkpfWB9cmV0dXJuIGUuaHJlZn1hc3luYyBfZmV0Y2hTZXJ2aWNlKGUpe2NvbnN0IGk9bmV3IEM7YXdhaXQgdGhpcy5fbG9hZFZpc3VhbERhdGEodGhpcy5sYXllci51cmwsaSxlKSx0aGlzLl9rbWxWaXN1YWxEYXRhPWksdGhpcy5fcmVmcmVzaENvbGxlY3Rpb25zKCl9X3JlZnJlc2hDb2xsZWN0aW9ucygpe3RoaXMuYWxsVmlzaWJsZVBvaW50cy5yZW1vdmVBbGwoKSx0aGlzLmFsbFZpc2libGVQb2x5bGluZXMucmVtb3ZlQWxsKCksdGhpcy5hbGxWaXNpYmxlUG9seWdvbnMucmVtb3ZlQWxsKCksdGhpcy5hbGxWaXNpYmxlTWFwSW1hZ2VzLnJlbW92ZUFsbCgpLHRoaXMuYWxsVmlzaWJsZVBvaW50cy5hZGRNYW55KHRoaXMuX2ttbFZpc3VhbERhdGEuYWxsUG9pbnRzLmZpbHRlcigoZT0+dGhpcy5faXNTdWJsYXllclZpc2libGUoZS5zdWJsYXllcklkKSkpLm1hcCgoKHtpdGVtOmV9KT0+ZSkpKSx0aGlzLmFsbFZpc2libGVQb2x5bGluZXMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFBvbHlsaW5lcy5maWx0ZXIoKGU9PnRoaXMuX2lzU3VibGF5ZXJWaXNpYmxlKGUuc3VibGF5ZXJJZCkpKS5tYXAoKCh7aXRlbTplfSk9PmUpKSksdGhpcy5hbGxWaXNpYmxlUG9seWdvbnMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFBvbHlnb25zLmZpbHRlcigoZT0+dGhpcy5faXNTdWJsYXllclZpc2libGUoZS5zdWJsYXllcklkKSkpLm1hcCgoKHtpdGVtOmV9KT0+ZSkpKSx0aGlzLmFsbFZpc2libGVNYXBJbWFnZXMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbE1hcEltYWdlcy5maWx0ZXIoKGU9PnRoaXMuX2lzU3VibGF5ZXJWaXNpYmxlKGUuc3VibGF5ZXJJZCkpKS5tYXAoKCh7aXRlbTplfSk9PmUpKSl9X2lzU3VibGF5ZXJWaXNpYmxlKGUpe2NvbnN0IGk9dGhpcy5fa21sVmlzdWFsRGF0YS5hbGxTdWJsYXllcnMuZ2V0KGUpO3JldHVybiEhaT8udmlzaWJpbGl0eSYmKC0xPT09aS5wYXJlbnRGb2xkZXJJZHx8dGhpcy5faXNTdWJsYXllclZpc2libGUoaS5wYXJlbnRGb2xkZXJJZCkpfV9sb2FkVmlzdWFsRGF0YShlLGksdCl7cmV0dXJuIHRoaXMuX2ZldGNoUGFyc2VkS01MKGUsdCkudGhlbigoYXN5bmMgZT0+e2Zvcihjb25zdCBzIG9mIGUuc3VibGF5ZXJzKXtpLmFsbFN1YmxheWVycy5zZXQocy5pZCxzKTtjb25zdCBlPXMucG9pbnRzP2F3YWl0IHkocy5wb2ludHMpOltdLGE9cy5wb2x5bGluZXM/YXdhaXQgeShzLnBvbHlsaW5lcyk6W10sbz1zLnBvbHlnb25zP2F3YWl0IHkocy5wb2x5Z29ucyk6W10sbD1zLm1hcEltYWdlc3x8W107aWYoaS5hbGxQb2ludHMucHVzaCguLi5lLm1hcCgoZT0+KHtpdGVtOmUsc3VibGF5ZXJJZDpzLmlkfSkpKSksaS5hbGxQb2x5bGluZXMucHVzaCguLi5hLm1hcCgoZT0+KHtpdGVtOmUsc3VibGF5ZXJJZDpzLmlkfSkpKSksaS5hbGxQb2x5Z29ucy5wdXNoKC4uLm8ubWFwKChlPT4oe2l0ZW06ZSxzdWJsYXllcklkOnMuaWR9KSkpKSxpLmFsbE1hcEltYWdlcy5wdXNoKC4uLmwubWFwKChlPT4oe2l0ZW06ZSxzdWJsYXllcklkOnMuaWR9KSkpKSxzLm5ldHdvcmtMaW5rKXtjb25zdCBlPWF3YWl0IHRoaXMuX2dldFZpZXdEZXBlbmRlbnRVcmwocy5uZXR3b3JrTGluayx0aGlzLnZpZXcuc3RhdGUpO2F3YWl0IHRoaXMuX2xvYWRWaXN1YWxEYXRhKGUsaSx0KX19fSkpfV9mZXRjaFBhcnNlZEtNTChlLGkpe3JldHVybiBnKGUsdGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlLHRoaXMubGF5ZXIucmVmcmVzaEludGVydmFsLGkpLnRoZW4oKGU9PncoZS5kYXRhKSkpfV9yZW1vdmVNYXBJbWFnZShlKXtjb25zdCBpPXRoaXMuX2JpdG1hcEluZGV4LmdldChlKTtpJiYodGhpcy5fbWFwSW1hZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQoaSksdGhpcy5fYml0bWFwSW5kZXguZGVsZXRlKGUpKX19O2UoW24oKV0sai5wcm90b3R5cGUsXCJfcG9pbnRzVmlld1wiLHZvaWQgMCksZShbbigpXSxqLnByb3RvdHlwZSxcIl9wb2x5bGluZXNWaWV3XCIsdm9pZCAwKSxlKFtuKCldLGoucHJvdG90eXBlLFwiX3BvbHlnb25zVmlld1wiLHZvaWQgMCksZShbbigpXSxqLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSxqPWUoW2goXCJlc3JpLnZpZXdzLjJkLmxheWVycy5LTUxMYXllclZpZXcyRFwiKV0saik7Y29uc3Qgaz1qO2V4cG9ydHtrIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtXR0xEcmF3UGhhc2UgYXMgZX1mcm9tXCIuLi8uLi9lbmdpbmUvd2ViZ2wvZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL0Jhc2VHcmFwaGljQ29udGFpbmVyLmpzXCI7Y2xhc3MgaSBleHRlbmRzIHJ7cmVuZGVyQ2hpbGRyZW4ocil7dGhpcy5hdHRyaWJ1dGVWaWV3LnVwZGF0ZSgpLHRoaXMuY2hpbGRyZW4uc29tZSgoZT0+ZS5oYXNEYXRhKSkmJih0aGlzLmF0dHJpYnV0ZVZpZXcuYmluZFRleHR1cmVzKHIuY29udGV4dCwhMSksc3VwZXIucmVuZGVyQ2hpbGRyZW4ociksci5kcmF3UGhhc2U9PT1lLk1BUCYmdGhpcy5fcmVuZGVyQ2hpbGRyZW4ociksdGhpcy5oYXNIaWdobGlnaHQmJnIuZHJhd1BoYXNlPT09ZS5ISUdITElHSFQmJnRoaXMuX3JlbmRlckhpZ2hsaWdodChyKSx0aGlzLl9ib3VuZHNSZW5kZXJlciYmdGhpcy5fYm91bmRzUmVuZGVyZXIuZG9SZW5kZXIocikpfV9yZW5kZXJIaWdobGlnaHQoZSl7Y29uc3R7cGFpbnRlcjpyfT1lLGk9ci5lZmZlY3RzLmhpZ2hsaWdodDtpLmJpbmQoZSksdGhpcy5fcmVuZGVyQ2hpbGRyZW4oZSxpLmRlZmluZXMpLGkuZHJhdyhlKSxpLnVuYmluZCgpfX1leHBvcnR7aSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IGUgZnJvbVwiLi4vLi4vZ2VvbWV0cnkvUG9pbnQuanNcIjtpbXBvcnR7cHJvamVjdCBhcyByfWZyb21cIi4uLy4uL2dlb21ldHJ5L3Byb2plY3Rpb24uanNcIjtpbXBvcnR7cHJvamVjdFJlc29sdXRpb24gYXMgaSxnZXRQcm9qZWN0aW9uT2Zmc2V0R3JpZCBhcyBhfWZyb21cIi4uLy4uL2xheWVycy9zdXBwb3J0L3Jhc3RlckZ1bmN0aW9ucy9yYXN0ZXJQcm9qZWN0aW9uSGVscGVyLmpzXCI7aW1wb3J0e2lzSW1hZ2VTb3VyY2UgYXMgcyxyYXN0ZXJpemUgYXMgbn1mcm9tXCIuLi8yZC9lbmdpbmUvQml0bWFwLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vMmQvZW5naW5lL3dlYmdsL1ZlcnRleFN0cmVhbS5qc1wiO2ltcG9ydHtjcmVhdGVQcm9ncmFtVGVtcGxhdGUgYXMgbX1mcm9tXCIuLi8yZC9lbmdpbmUvd2ViZ2wvc2hhZGVycy9NYXRlcmlhbFByb2dyYW1zLmpzXCI7aW1wb3J0e1RleHR1cmVXcmFwTW9kZSBhcyBjLFBpeGVsRm9ybWF0IGFzIHAsUGl4ZWxUeXBlIGFzIGgsQ29sb3JBdHRhY2htZW50IGFzIHh9ZnJvbVwiLi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7RnJhbWVidWZmZXJPYmplY3QgYXMgdX1mcm9tXCIuLi93ZWJnbC9GcmFtZWJ1ZmZlck9iamVjdC5qc1wiO2ltcG9ydHtjcmVhdGVUcmFuc2Zvcm1UZXh0dXJlIGFzIGR9ZnJvbVwiLi4vd2ViZ2wvcmFzdGVyVXRpbHMuanNcIjtpbXBvcnR7UmVuZGVyaW5nQ29udGV4dCBhcyBffWZyb21cIi4uL3dlYmdsL1JlbmRlcmluZ0NvbnRleHQuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyBnfWZyb21cIi4uL3dlYmdsL1RleHR1cmUuanNcIjtpbXBvcnR7VGV4dHVyZURlc2NyaXB0b3IgYXMgZn1mcm9tXCIuLi93ZWJnbC9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2NsYXNzIGx7Y29uc3RydWN0b3IodCl7aWYodGhpcy5fb3duc1JjdHg9ITEsdCl0aGlzLl9vd25zUmN0eD0hMSx0aGlzLl9yY3R4PXQ7ZWxzZXtpZihsLl9pbnN0YW5jZSlyZXR1cm4gbC5faW5zdGFuY2VSZWZDb3VudCsrLGwuX2luc3RhbmNlO2wuX2luc3RhbmNlUmVmQ291bnQ9MSxsLl9pbnN0YW5jZT10aGlzLHRoaXMuX293bnNSY3R4PSEwO2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwid2ViZ2xcIik7dC5nZXRFeHRlbnNpb24oXCJPRVNfdGV4dHVyZV9mbG9hdFwiKSx0aGlzLl9yY3R4PW5ldyBfKHQse30pfWNvbnN0IGU9e2FwcGx5UHJvamVjdGlvbjohMCxiaWxpbmVhcjohMSxiaWN1YmljOiExfSxyPW0oXCJyYXN0ZXIvcmVwcm9qZWN0XCIsXCJyYXN0ZXIvcmVwcm9qZWN0XCIsbmV3IE1hcChbW1wiYV9wb3NpdGlvblwiLDBdXSksZSk7dGhpcy5fcHJvZ3JhbT10aGlzLl9yY3R4LnByb2dyYW1DYWNoZS5hY3F1aXJlKHIuc2hhZGVycy52ZXJ0ZXhTaGFkZXIsci5zaGFkZXJzLmZyYWdtZW50U2hhZGVyLHIuYXR0cmlidXRlcyksdGhpcy5fcmN0eC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pLHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybTFmKFwidV9vcGFjaXR5XCIsMSksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMWkoXCJ1X2ltYWdlXCIsMCksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMWkoXCJ1X2ZsaXBZXCIsMCksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMWkoXCJ1X3RyYW5zZm9ybUdyaWRcIiwxKSx0aGlzLl9xdWFkPW5ldyBvKHRoaXMuX3JjdHgsWzAsMCwxLDAsMCwxLDEsMV0pfXJlcHJvamVjdFRleHR1cmUodCxzLG49ITEpe2NvbnN0IG89cih0LmV4dGVudCxzKSxtPW5ldyBlKHt4Oih0LmV4dGVudC54bWF4LXQuZXh0ZW50LnhtaW4pL3QudGV4dHVyZS5kZXNjcmlwdG9yLndpZHRoLHk6KHQuZXh0ZW50LnltYXgtdC5leHRlbnQueW1pbikvdC50ZXh0dXJlLmRlc2NyaXB0b3IuaGVpZ2h0LHNwYXRpYWxSZWZlcmVuY2U6dC5leHRlbnQuc3BhdGlhbFJlZmVyZW5jZX0pLHt4Ol8seTpnfT1pKG0scyx0LmV4dGVudCk7bGV0IGw9KF8rZykvMjtjb25zdCB3PU1hdGgucm91bmQoKG8ueG1heC1vLnhtaW4pL2wpLGI9TWF0aC5yb3VuZCgoby55bWF4LW8ueW1pbikvbCk7bD0oby53aWR0aC93K28uaGVpZ2h0L2IpLzI7Y29uc3Qgaj1uZXcgZSh7eDpsLHk6bCxzcGF0aWFsUmVmZXJlbmNlOm8uc3BhdGlhbFJlZmVyZW5jZX0pLEQ9YSh7cHJvamVjdGVkRXh0ZW50Om8sc3JjQnVmZmVyRXh0ZW50OnQuZXh0ZW50LHBpeGVsU2l6ZTpqLGhhc1dyYXBBcm91bmQ6ITAsc3BhY2luZzpbMTYsMTZdfSksUj1kKHRoaXMuX3JjdHgsRCksQz1uZXcgZih3LGIpO0Mud3JhcE1vZGU9Yy5DTEFNUF9UT19FREdFO2NvbnN0IFQ9bmV3IHUodGhpcy5fcmN0eCxDKTt0aGlzLl9yY3R4LmJpbmRGcmFtZWJ1ZmZlcihUKSx0aGlzLl9yY3R4LnNldFZpZXdwb3J0KDAsMCx3LGIpLHRoaXMuX3JjdHgudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKSx0aGlzLl9yY3R4LmJpbmRUZXh0dXJlKHQudGV4dHVyZSwwKSx0aGlzLl9yY3R4LmJpbmRUZXh0dXJlKFIsMSksdGhpcy5fcXVhZC5iaW5kKCk7Y29uc3R7d2lkdGg6eT0wLGhlaWdodDpFPTB9PXQudGV4dHVyZS5kZXNjcmlwdG9yO2lmKHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybTJmKFwidV9zcmNJbWFnZVNpemVcIix5LEUpLHRoaXMuX3Byb2dyYW0uc2V0VW5pZm9ybTJmdihcInVfdHJhbnNmb3JtU3BhY2luZ1wiLEQuc3BhY2luZyksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMmZ2KFwidV90cmFuc2Zvcm1HcmlkU2l6ZVwiLEQuc2l6ZSksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMmYoXCJ1X3RhcmdldEltYWdlU2l6ZVwiLHcsYiksdGhpcy5fcXVhZC5kcmF3KCksdGhpcy5fcXVhZC51bmJpbmQoKSx0aGlzLl9yY3R4LnVzZVByb2dyYW0obnVsbCksdGhpcy5fcmN0eC5iaW5kRnJhbWVidWZmZXIobnVsbCksUi5kaXNwb3NlKCksbil7Y29uc3R7d2lkdGg6dCxoZWlnaHQ6ZX09VCxyPW5ldyBJbWFnZURhdGEodD8/MCxlPz8wKTtULnJlYWRQaXhlbHMoMCwwLHQ/PzAsZT8/MCxwLlJHQkEsaC5VTlNJR05FRF9CWVRFLHIuZGF0YSk7Y29uc3QgaT1ULmRldGFjaENvbG9yVGV4dHVyZSh4LkNPTE9SX0FUVEFDSE1FTlQwKTtyZXR1cm4gVC5kaXNwb3NlKCkse3RleHR1cmU6aSxleHRlbnQ6byxpbWFnZURhdGE6cn19Y29uc3QgTT1ULmRldGFjaENvbG9yVGV4dHVyZSh4LkNPTE9SX0FUVEFDSE1FTlQwKTtyZXR1cm4gVC5kaXNwb3NlKCkse3RleHR1cmU6TSxleHRlbnQ6b319cmVwcm9qZWN0Qml0bWFwRGF0YSh0LGUpe2NvbnN0IHI9cyh0LmJpdG1hcERhdGEpP24odC5iaXRtYXBEYXRhKTp0LmJpdG1hcERhdGEsaT1uZXcgZjtpLndyYXBNb2RlPWMuQ0xBTVBfVE9fRURHRSxpLndpZHRoPXQuYml0bWFwRGF0YS53aWR0aCxpLmhlaWdodD10LmJpdG1hcERhdGEuaGVpZ2h0O2NvbnN0IGE9bmV3IGcodGhpcy5fcmN0eCxpLHIpLG89dGhpcy5yZXByb2plY3RUZXh0dXJlKHt0ZXh0dXJlOmEsZXh0ZW50OnQuZXh0ZW50fSxlLCEwKTtvLnRleHR1cmUuZGlzcG9zZSgpO2NvbnN0IG09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSxwPW8uaW1hZ2VEYXRhO20ud2lkdGg9cC53aWR0aCxtLmhlaWdodD1wLmhlaWdodDtyZXR1cm4gbS5nZXRDb250ZXh0KFwiMmRcIikucHV0SW1hZ2VEYXRhKHAsMCwwKSx7Yml0bWFwRGF0YTptLGV4dGVudDpvLmV4dGVudH19YXN5bmMgbG9hZEFuZFJlcHJvamVjdEJpdG1hcERhdGEoZSxyLGkpe2NvbnN0IGE9KGF3YWl0IHQoZSx7cmVzcG9uc2VUeXBlOlwiaW1hZ2VcIn0pKS5kYXRhLHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtzLndpZHRoPWEud2lkdGgscy5oZWlnaHQ9YS5oZWlnaHQ7Y29uc3Qgbj1zLmdldENvbnRleHQoXCIyZFwiKTtuLmRyYXdJbWFnZShhLDAsMCk7Y29uc3Qgbz1uLmdldEltYWdlRGF0YSgwLDAscy53aWR0aCxzLmhlaWdodCk7aWYoci5zcGF0aWFsUmVmZXJlbmNlLmVxdWFscyhpKSlyZXR1cm57Yml0bWFwRGF0YTpvLGV4dGVudDpyfTtjb25zdCBtPXRoaXMucmVwcm9qZWN0Qml0bWFwRGF0YSh7Yml0bWFwRGF0YTpvLGV4dGVudDpyfSxpKTtyZXR1cm57Yml0bWFwRGF0YTptLmJpdG1hcERhdGEsZXh0ZW50Om0uZXh0ZW50fX1kZXN0cm95KCl7dGhpcy5fb3duc1JjdHg/KGwuX2luc3RhbmNlUmVmQ291bnQtLSwwPT09bC5faW5zdGFuY2VSZWZDb3VudCYmKHRoaXMuX3F1YWQuZGlzcG9zZSgpLHRoaXMuX3Byb2dyYW0uZGlzcG9zZSgpLHRoaXMuX3JjdHguZGlzcG9zZSgpLGwuX2luc3RhbmNlPW51bGwpKToodGhpcy5fcXVhZC5kaXNwb3NlKCksdGhpcy5fcHJvZ3JhbS5kaXNwb3NlKCkpfX1sLl9pbnN0YW5jZVJlZkNvdW50PTA7ZXhwb3J0e2wgYXMgSW1hZ2VSZXByb2plY3Rvcn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuZnVuY3Rpb24gZShlKXtjb25zdHtvcHRpb25zOm4sdmFsdWU6b309ZTtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgbltvXX1mdW5jdGlvbiBuKG4pe2xldCBvPVwiXCI7Zm9yKGNvbnN0IHQgaW4gbil7Y29uc3QgaT1uW3RdO2lmKFwiYm9vbGVhblwiPT10eXBlb2YgaSlpJiYobys9YCNkZWZpbmUgJHt0fVxcbmApO2Vsc2UgaWYoXCJudW1iZXJcIj09dHlwZW9mIGkpbys9YCNkZWZpbmUgJHt0fSAke2kudG9GaXhlZCgpfVxcbmA7ZWxzZSBpZihcIm9iamVjdFwiPT10eXBlb2YgaSlpZihlKGkpKXtjb25zdHt2YWx1ZTplLG9wdGlvbnM6bixuYW1lc3BhY2U6Zn09aSxzPWY/YCR7Zn1fYDpcIlwiO2Zvcihjb25zdCB0IGluIG4pbys9YCNkZWZpbmUgJHtzfSR7dH0gJHtuW3RdLnRvRml4ZWQoKX1cXG5gO28rPWAjZGVmaW5lICR7dH0gJHtzfSR7ZX1cXG5gfWVsc2V7Y29uc3QgZT1pLm9wdGlvbnM7bGV0IG49MDtmb3IoY29uc3QgdCBpbiBlKW8rPWAjZGVmaW5lICR7ZVt0XX0gJHsobisrKS50b0ZpeGVkKCl9XFxuYDtvKz1gI2RlZmluZSAke3R9ICR7ZVtpLnZhbHVlXX1cXG5gfX1yZXR1cm4gb31leHBvcnR7biBhcyBnbHNsaWZ5RGVmaW5lTWFwfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==