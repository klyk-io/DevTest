"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_data_FeatureStore_js"],{

/***/ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BBox: () => (/* binding */ Y),
/* harmony export */   PooledRBush: () => (/* binding */ s)
/* harmony export */ });
/* harmony import */ var _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../PooledArray.js */ "./node_modules/@arcgis/core/core/PooledArray.js");
/* harmony import */ var _chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/quickselect.js */ "./node_modules/@arcgis/core/chunks/quickselect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
class s{constructor(t=9,i){this._compareMinX=o,this._compareMinY=l,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),i&&("function"==typeof i?this._toBBox=i:this._initFormat(i)),this.clear()}destroy(){this.clear(),p.prune(),g.prune(),M.prune(),X.prune()}all(t){this._all(this._data,t)}search(t,i){let n=this._data;const e=this._toBBox;if(x(t,n))for(p.clear();n;){for(let s=0,h=n.children.length;s<h;s++){const h=n.children[s],a=n.leaf?e(h):h;x(t,a)&&(n.leaf?i(h):_(t,a)?this._all(h,i):p.push(h))}n=p.pop()}}collides(t){let i=this._data;const n=this._toBBox;if(!x(t,i))return!1;for(p.clear();i;){for(let e=0,s=i.children.length;e<s;e++){const s=i.children[e],h=i.leaf?n(s):s;if(x(t,h)){if(i.leaf||_(t,h))return!0;p.push(s)}}i=p.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let i=0,n=t.length;i<n;i++)this.insert(t[i]);return this}let i=this._build(t.slice(0,t.length),0,t.length-1,0);if(this._data.children.length)if(this._data.height===i.height)this._splitRoot(this._data,i);else{if(this._data.height<i.height){const t=this._data;this._data=i,i=t}this._insert(i,this._data.height-i.height-1,!0)}else this._data=i;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(i){if(!i)return this;let n,e=this._data,s=null,h=0,a=!1;const r=this._toBBox(i);for(M.clear(),X.clear();e||M.length>0;){if(e||(e=M.pop(),s=M.data[M.length-1],h=X.pop()??0,a=!0),e.leaf&&(n=(0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(e.children,i,e.children.length,e.indexHint),-1!==n))return e.children.splice(n,1),M.push(e),this._condense(M),this;a||e.leaf||!_(e,r)?s?(h++,e=s.children[h],a=!1):e=null:(M.push(e),X.push(h),h=0,s=e,e=e.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_all(t,i){let n=t;for(g.clear();n;){if(!0===n.leaf)for(const t of n.children)i(t);else g.pushArray(n.children);n=g.pop()??null}}_build(t,i,n,e){const s=n-i+1;let a=this._maxEntries;if(s<=a){const e=new w(t.slice(i,n+1));return h(e,this._toBBox),e}e||(e=Math.ceil(Math.log(s)/Math.log(a)),a=Math.ceil(s/a**(e-1)));const r=new b([]);r.height=e;const o=Math.ceil(s/a),l=o*Math.ceil(Math.sqrt(a));f(t,i,n,l,this._compareMinX);for(let h=i;h<=n;h+=l){const i=Math.min(h+l-1,n);f(t,h,i,o,this._compareMinY);for(let n=h;n<=i;n+=o){const s=Math.min(n+o-1,i);r.children.push(this._build(t,n,s,e-1))}}return h(r,this._toBBox),r}_chooseSubtree(t,i,n,e){for(;e.push(i),!0!==i.leaf&&e.length-1!==n;){let n,e=1/0,s=1/0;for(let h=0,a=i.children.length;h<a;h++){const a=i.children[h],r=c(a),o=d(t,a)-r;o<s?(s=o,e=r<e?r:e,n=a):o===s&&r<e&&(e=r,n=a)}i=n||i.children[0]}return i}_insert(t,i,n){const e=this._toBBox,s=n?t:e(t);M.clear();const h=this._chooseSubtree(s,this._data,i,M);for(h.children.push(t),r(h,s);i>=0&&M.data[i].children.length>this._maxEntries;)this._split(M,i),i--;this._adjustParentBBoxes(s,M,i)}_split(t,i){const n=t.data[i],e=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,e);const a=this._chooseSplitIndex(n,s,e);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const r=n.children.splice(a,n.children.length-a),o=n.leaf?new w(r):new b(r);o.height=n.height,h(n,this._toBBox),h(o,this._toBBox),i?t.data[i-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,i){this._data=new b([t,i]),this._data.height=t.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(t,i,n){let e,s,h;e=s=1/0;for(let r=i;r<=n-i;r++){const i=a(t,0,r,this._toBBox),o=a(t,r,n,this._toBBox),l=u(i,o),m=c(i)+c(o);l<e?(e=l,h=r,s=m<s?m:s):l===e&&m<s&&(s=m,h=r)}return h}_chooseSplitAxis(t,i,n){const e=t.leaf?this._compareMinX:o,s=t.leaf?this._compareMinY:l;this._allDistMargin(t,i,n,e)<this._allDistMargin(t,i,n,s)&&t.children.sort(e)}_allDistMargin(t,i,n,e){t.children.sort(e);const s=this._toBBox,h=a(t,0,i,s),o=a(t,n-i,n,s);let l=m(h)+m(o);for(let a=i;a<n-i;a++){const i=t.children[a];r(h,t.leaf?s(i):i),l+=m(h)}for(let a=n-i-1;a>=i;a--){const i=t.children[a];r(o,t.leaf?s(i):i),l+=m(o)}return l}_adjustParentBBoxes(t,i,n){for(let e=n;e>=0;e--)r(i.data[e],t)}_condense(i){for(let n=i.length-1;n>=0;n--){const e=i.data[n];if(0===e.children.length)if(n>0){const s=i.data[n-1],h=s.children;h.splice((0,_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(h,e,h.length,s.indexHint),1)}else this.clear();else h(e,this._toBBox)}}_initFormat(t){const i=["return a"," - b",";"];this._compareMinX=new Function("a","b",i.join(t[0])),this._compareMinY=new Function("a","b",i.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function h(t,i){a(t,0,t.children.length,i,t)}function a(t,i,n,e,s){s||(s=new w([])),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let h,a=i;a<n;a++)h=t.children[a],r(s,t.leaf?e(h):h);return s}function r(t,i){t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY)}function o(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,i){return(Math.max(i.maxX,t.maxX)-Math.min(i.minX,t.minX))*(Math.max(i.maxY,t.maxY)-Math.min(i.minY,t.minY))}function u(t,i){const n=Math.max(t.minX,i.minX),e=Math.max(t.minY,i.minY),s=Math.min(t.maxX,i.maxX),h=Math.min(t.maxY,i.maxY);return Math.max(0,s-n)*Math.max(0,h-e)}function _(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function x(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function f(t,i,n,s,h){const a=[i,n];for(;a.length;){const i=a.pop(),n=a.pop();if(i-n<=s)continue;const r=n+Math.ceil((i-n)/s/2)*s;(0,_chunks_quickselect_js__WEBPACK_IMPORTED_MODULE_2__.q)(t,r,n,i,h),a.push(n,r,r,i)}}const p=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],g=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],M=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"],X=new _PooledArray_js__WEBPACK_IMPORTED_MODULE_1__["default"]({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new _arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint}}class w extends B{constructor(t){super(),this.children=t,this.leaf=!0}}class b extends B{constructor(t){super(),this.children=t,this.leaf=!1}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/centroid.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/centroid.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getCentroidOptimizedGeometry: () => (/* binding */ n),
/* harmony export */   lineCentroid: () => (/* binding */ r)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function t(t,n){return t?n?4:3:n?3:2}function n(n,I,o,u,N){if(!I?.lengths.length)return null;const l="upperLeft"===N?.originPosition?-1:1;n.lengths.length&&(n.lengths.length=0),n.coords.length&&(n.coords.length=0);const s=n.coords,c=[],f=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:T,coords:i}=I,h=t(o,u);let g=0;for(const t of T){const n=e(f,i,g,t,o,u,l);n&&c.push(n),g+=t*h}if(c.sort(((t,n)=>{let e=l*t[2]-l*n[2];return 0===e&&o&&(e=t[4]-n[4]),e})),c.length){let t=6*c[0][2];s[0]=c[0][0]/t,s[1]=c[0][1]/t,o&&(t=6*c[0][4],s[2]=0!==t?c[0][3]/t:0),(s[0]<f[0]||s[0]>f[1]||s[1]<f[2]||s[1]>f[3]||o&&(s[2]<f[4]||s[2]>f[5]))&&(s.length=0)}if(!s.length){const t=I.lengths[0]?r(i,0,T[0],o,u):null;if(!t)return null;s[0]=t[0],s[1]=t[1],o&&t.length>2&&(s[2]=t[2])}return n}function e(n,e,r,I,o,u,N=1){const l=t(o,u);let s=r,c=r+l,f=0,T=0,i=0,h=0,g=0;for(let t=0,b=I-1;t<b;t++,s+=l,c+=l){const t=e[s],r=e[s+1],I=e[s+2],u=e[c],N=e[c+1],l=e[c+2];let E=t*N-u*r;h+=E,f+=(t+u)*E,T+=(r+N)*E,o&&(E=t*l-u*I,i+=(I+l)*E,g+=E),t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t),r<n[2]&&(n[2]=r),r>n[3]&&(n[3]=r),o&&(I<n[4]&&(n[4]=I),I>n[5]&&(n[5]=I))}if(h*N>0&&(h*=-1),g*N>0&&(g*=-1),!h)return null;const E=[f,T,.5*h];return o&&(E[3]=i,E[4]=.5*g),E}function r(n,e,r,l,s){const c=t(l,s);let f=e,T=e+c,i=0,h=0,g=0,E=0;for(let t=0,b=r-1;t<b;t++,f+=c,T+=c){const t=n[f],e=n[f+1],r=n[f+2],s=n[T],c=n[T+1],b=n[T+2],m=l?o(t,e,r,s,c,b):I(t,e,s,c);if(m)if(i+=m,l){const n=N(t,e,r,s,c,b);h+=m*n[0],g+=m*n[1],E+=m*n[2]}else{const n=u(t,e,s,c);h+=m*n[0],g+=m*n[1]}}return i>0?l?[h/i,g/i,E/i]:[h/i,g/i]:r>0?l?[n[e],n[e+1],n[e+2]]:[n[e],n[e+1]]:null}function I(t,n,e,r){const I=e-t,o=r-n;return Math.sqrt(I*I+o*o)}function o(t,n,e,r,I,o){const u=r-t,N=I-n,l=o-e;return Math.sqrt(u*u+N*N+l*l)}function u(t,n,e,r){return[t+.5*(e-t),n+.5*(r-n)]}function N(t,n,e,r,I,o){return[t+.5*(r-t),n+.5*(I-n),e+.5*(o-e)]}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BoundsStore: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/libs/rbush/PooledRBush.js */ "./node_modules/@arcgis/core/core/libs/rbush/PooledRBush.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i){n.minX=i[0],n.minY=i[1],n.maxX=i[2],n.maxY=i[3]}function e(i,s,d){t(s),i.search(n,d)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new _core_libs_rbush_PooledRBush_js__WEBPACK_IMPORTED_MODULE_1__.PooledRBush(9,(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-csp-restrictions")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach(((d,n)=>{i[s++]=n})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_2__.empty)();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),e(this._index,i,(i=>s(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ m)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _BoundsStore_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./BoundsStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/layers/graphics/data/geometryUtils.js");
/* harmony import */ var _optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./optimizedFeatureQueryEngineAdapter.js */ "./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const f=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__.create)();class m{constructor(e){this.geometryInfo=e,this._boundsStore=new _BoundsStore_js__WEBPACK_IMPORTED_MODULE_7__.BoundsStore,this._featuresById=new Map,this._markedIds=new Set,this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"],this.featureAdapter=_optimizedFeatureQueryEngineAdapter_js__WEBPACK_IMPORTED_MODULE_9__.optimizedFeatureQueryEngineAdapter}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach((t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,r,s,o]=this.fullBounds;return{xmin:t,ymin:r,xmax:s,ymax:o,spatialReference:(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_8__.cleanFromGeometryEngine)(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(t){const r=t.map((e=>this._upsert(e)));return this._emitChanged(),r.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const r of e){const e=this._boundsStore.get(r.objectId);e&&t((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_4__.fromRect)(f,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach((t=>e(t)))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,(e=>{t(this._featuresById.get(e))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let e=!1;this._featuresById.forEach(((t,r)=>{this._markedIds.has(r)||(e=!0,this._remove(t))})),this._markedIds.clear(),e&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(e){if(!e)return;const r=e.objectId;if(null==r)return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.layers.graphics.data.FeatureStore").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurestore:invalid-feature","feature id is missing",{feature:e}));const o=this._featuresById.get(r);let i;if(this._markedIds.add(r),o?(e.displayId=o.displayId,i=this._boundsStore.get(r),this._boundsStore.delete(r)):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(r,null),void this._featuresById.set(r,e);i=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_6__.getBoundsOptimizedGeometry)(null!=i?i:(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_5__.create)(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=i&&this._boundsStore.set(r,i),this._featuresById.set(r,e)}_upsert(e){const r=e?.objectId;if(null==r)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.layers.graphics.data.FeatureStore").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurestore:invalid-feature","feature id is missing",{feature:e})),null;const o=this._featuresById.get(r);if(!o)return this._add(e),e;this._markedIds.add(r);const{geometry:i,attributes:d}=e;for(const t in d)o.attributes[t]=d[t];return i&&(o.geometry=i,this._boundsStore.set(r,(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_6__.getBoundsOptimizedGeometry)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_5__.create)(),i,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),o}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._markedIds.delete(t),this._boundsStore.delete(t),this._featuresById.delete(t),e}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   optimizedFeatureQueryEngineAdapter: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _centroid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../centroid.js */ "./node_modules/@arcgis/core/layers/graphics/centroid.js");
/* harmony import */ var _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../OptimizedFeature.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedFeature.js");
/* harmony import */ var _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../OptimizedGeometry.js */ "./node_modules/@arcgis/core/layers/graphics/OptimizedGeometry.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const o={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,r)=>new _OptimizedFeature_js__WEBPACK_IMPORTED_MODULE_1__.OptimizedFeature(r,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(e,o)=>(null==e.centroid&&(e.centroid=(0,_centroid_js__WEBPACK_IMPORTED_MODULE_0__.getCentroidOptimizedGeometry)(new _OptimizedGeometry_js__WEBPACK_IMPORTED_MODULE_2__["default"],e.geometry,o.hasZ,o.hasM)),e.centroid)};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19kYXRhX0ZlYXR1cmVTdG9yZV9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN1SixRQUFRLG1CQUFtQixrT0FBa08sVUFBVSxxREFBcUQsT0FBTyx3QkFBd0IsWUFBWSxpQkFBaUIscUJBQXFCLHdCQUF3QixFQUFFLEVBQUUsZ0NBQWdDLElBQUksS0FBSyxzQ0FBc0Msc0RBQXNELFdBQVcsWUFBWSxpQkFBaUIscUJBQXFCLG9CQUFvQixjQUFjLEVBQUUsRUFBRSxnQ0FBZ0MsSUFBSSxLQUFLLHNDQUFzQyxXQUFXLDJCQUEyQixXQUFXLFVBQVUsU0FBUyxRQUFRLHlCQUF5Qiw4QkFBOEIsdUJBQXVCLElBQUksc0JBQXNCLFlBQVksc0RBQXNELDRGQUE0RixLQUFLLCtCQUErQixtQkFBbUIsaUJBQWlCLGdEQUFnRCxrQkFBa0IsWUFBWSxVQUFVLG1EQUFtRCxRQUFRLGlDQUFpQyxVQUFVLGtCQUFrQixtQ0FBbUMsd0JBQXdCLHdCQUF3QixjQUFjLEVBQUUsb0VBQW9FLHVEQUFDLG9IQUFvSCxxR0FBcUcsWUFBWSxTQUFTLGtCQUFrQixZQUFZLHlCQUF5QixVQUFVLFFBQVEsY0FBYyxFQUFFLEVBQUUsOENBQThDLDZCQUE2QixpQkFBaUIsZ0JBQWdCLGNBQWMsdUJBQXVCLFNBQVMsOEJBQThCLDJCQUEyQixrRUFBa0Usa0JBQWtCLFdBQVcsbURBQW1ELDZCQUE2QixZQUFZLEtBQUssTUFBTSwwQkFBMEIsNkJBQTZCLFlBQVksS0FBSyxNQUFNLDBCQUEwQix5Q0FBeUMsMkJBQTJCLHdCQUF3QixLQUFLLHNDQUFzQyxFQUFFLGtCQUFrQixnQ0FBZ0MsSUFBSSxLQUFLLHdDQUF3Qyw4Q0FBOEMsbUJBQW1CLFNBQVMsZUFBZSxnQ0FBZ0MsVUFBVSw4Q0FBOEMsOEJBQThCLGlEQUFpRCxzQkFBc0IsZ0NB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MEVBQUMsS0FBSyxPQUFPLGlDQUFpQyxXQUFXLDhCQUE4QixvQkFBb0IsY0FBYyxvQ0FBb0Msb0NBQW9DLHVEQUFDLEVBQUUsUUFBUSx5RUFBeUUsY0FBYyxrQ0FBa0Msc0RBQXNELGtCQUFrQixvQ0FBb0Msa0JBQWtCLGtDQUFrQyxtQkFBbUIsb0JBQW9CLG1CQUFtQixrQkFBa0IsMENBQTBDLEtBQUssNEVBQUMsUUFBUSxjQUFjLGlDQUFpQyxPQUFPLGlDQUFpQyxXQUFXLHNDQUFzQyxxQkFBcUIseUNBQXlDLDZCQUE2QixHQUFHLDJCQUEyQiw0REFBNEQsUUFBUSxTQUFTLG9DQUFvQywrQ0FBK0Msa0RBQWtELGVBQWUsbUNBQW1DLFFBQVEsYUFBYSxtQkFBbUIsdUJBQXVCLHVEQUFDLCtEQUErRCxzREFBQyx5REFBeUQsVUFBVSxHQUFHLGtDQUFrQyxNQUFNLDZQQUE2UCxFQUFFLHNGQUFDLFdBQVcsMkVBQUMsNkhBQTZILFdBQVcsb0JBQW9CLGtCQUFrQix1REFBQywrREFBK0Qsc0RBQUMseURBQXlELFVBQVUsUUFBUSxrQ0FBa0MsNEJBQTRCLHVCQUF1QixNQUFNLHdCQUF3QixHQUFHLHNDQUFzQyxnREFBZ0Qsc0ZBQUMsQ0FBQywyRUFBQyw4REFBOEQsV0FBVyxvREFBb0QsbUJBQW1CLDZGQUFrSDs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSm50SDtBQUNBO0FBQ0E7QUFDQTtBQUMrSixTQUFTLHlIQUF5SCxrRUFBQyw2R0FBNkcsMEVBQUMsS0FBSyw2REFBQyx5Q0FBeUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9saWJzL3JidXNoL1Bvb2xlZFJCdXNoLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvY2VudHJvaWQuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9kYXRhL0JvdW5kc1N0b3JlLmpzIiwid2VicGFjazovL21tLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9GZWF0dXJlU3RvcmUuanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9kYXRhL29wdGltaXplZEZlYXR1cmVRdWVyeUVuZ2luZUFkYXB0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpbmRleE9mIGFzIHQsUG9zaXRpb25IaW50IGFzIGl9ZnJvbVwiLi4vLi4vYXJyYXlVdGlscy5qc1wiO2ltcG9ydCBuIGZyb21cIi4uLy4uL1Bvb2xlZEFycmF5LmpzXCI7aW1wb3J0e3EgYXMgZX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvcXVpY2tzZWxlY3QuanNcIjtjbGFzcyBze2NvbnN0cnVjdG9yKHQ9OSxpKXt0aGlzLl9jb21wYXJlTWluWD1vLHRoaXMuX2NvbXBhcmVNaW5ZPWwsdGhpcy5fdG9CQm94PXQ9PnQsdGhpcy5fbWF4RW50cmllcz1NYXRoLm1heCg0LHR8fDkpLHRoaXMuX21pbkVudHJpZXM9TWF0aC5tYXgoMixNYXRoLmNlaWwoLjQqdGhpcy5fbWF4RW50cmllcykpLGkmJihcImZ1bmN0aW9uXCI9PXR5cGVvZiBpP3RoaXMuX3RvQkJveD1pOnRoaXMuX2luaXRGb3JtYXQoaSkpLHRoaXMuY2xlYXIoKX1kZXN0cm95KCl7dGhpcy5jbGVhcigpLHAucHJ1bmUoKSxnLnBydW5lKCksTS5wcnVuZSgpLFgucHJ1bmUoKX1hbGwodCl7dGhpcy5fYWxsKHRoaXMuX2RhdGEsdCl9c2VhcmNoKHQsaSl7bGV0IG49dGhpcy5fZGF0YTtjb25zdCBlPXRoaXMuX3RvQkJveDtpZih4KHQsbikpZm9yKHAuY2xlYXIoKTtuOyl7Zm9yKGxldCBzPTAsaD1uLmNoaWxkcmVuLmxlbmd0aDtzPGg7cysrKXtjb25zdCBoPW4uY2hpbGRyZW5bc10sYT1uLmxlYWY/ZShoKTpoO3godCxhKSYmKG4ubGVhZj9pKGgpOl8odCxhKT90aGlzLl9hbGwoaCxpKTpwLnB1c2goaCkpfW49cC5wb3AoKX19Y29sbGlkZXModCl7bGV0IGk9dGhpcy5fZGF0YTtjb25zdCBuPXRoaXMuX3RvQkJveDtpZigheCh0LGkpKXJldHVybiExO2ZvcihwLmNsZWFyKCk7aTspe2ZvcihsZXQgZT0wLHM9aS5jaGlsZHJlbi5sZW5ndGg7ZTxzO2UrKyl7Y29uc3Qgcz1pLmNoaWxkcmVuW2VdLGg9aS5sZWFmP24ocyk6cztpZih4KHQsaCkpe2lmKGkubGVhZnx8Xyh0LGgpKXJldHVybiEwO3AucHVzaChzKX19aT1wLnBvcCgpfXJldHVybiExfWxvYWQodCl7aWYoIXQubGVuZ3RoKXJldHVybiB0aGlzO2lmKHQubGVuZ3RoPHRoaXMuX21pbkVudHJpZXMpe2ZvcihsZXQgaT0wLG49dC5sZW5ndGg7aTxuO2krKyl0aGlzLmluc2VydCh0W2ldKTtyZXR1cm4gdGhpc31sZXQgaT10aGlzLl9idWlsZCh0LnNsaWNlKDAsdC5sZW5ndGgpLDAsdC5sZW5ndGgtMSwwKTtpZih0aGlzLl9kYXRhLmNoaWxkcmVuLmxlbmd0aClpZih0aGlzLl9kYXRhLmhlaWdodD09PWkuaGVpZ2h0KXRoaXMuX3NwbGl0Um9vdCh0aGlzLl9kYXRhLGkpO2Vsc2V7aWYodGhpcy5fZGF0YS5oZWlnaHQ8aS5oZWlnaHQpe2NvbnN0IHQ9dGhpcy5fZGF0YTt0aGlzLl9kYXRhPWksaT10fXRoaXMuX2luc2VydChpLHRoaXMuX2RhdGEuaGVpZ2h0LWkuaGVpZ2h0LTEsITApfWVsc2UgdGhpcy5fZGF0YT1pO3JldHVybiB0aGlzfWluc2VydCh0KXtyZXR1cm4gdCYmdGhpcy5faW5zZXJ0KHQsdGhpcy5fZGF0YS5oZWlnaHQtMSksdGhpc31jbGVhcigpe3JldHVybiB0aGlzLl9kYXRhPW5ldyB3KFtdKSx0aGlzfXJlbW92ZShpKXtpZighaSlyZXR1cm4gdGhpcztsZXQgbixlPXRoaXMuX2RhdGEscz1udWxsLGg9MCxhPSExO2NvbnN0IHI9dGhpcy5fdG9CQm94KGkpO2ZvcihNLmNsZWFyKCksWC5jbGVhcigpO2V8fE0ubGVuZ3RoPjA7KXtpZihlfHwoZT1NLnBvcCgpLHM9TS5kYXRhW00ubGVuZ3RoLTFdLGg9WC5wb3AoKT8/MCxhPSEwKSxlLmxlYWYmJihuPXQoZS5jaGlsZHJlbixpLGUuY2hpbGRyZW4ubGVuZ3RoLGUuaW5kZXhIaW50KSwtMSE9PW4pKXJldHVybiBlLmNoaWxkcmVuLnNwbGljZShuLDEpLE0ucHVzaChlKSx0aGlzLl9jb25kZW5zZShNKSx0aGlzO2F8fGUubGVhZnx8IV8oZSxyKT9zPyhoKyssZT1zLmNoaWxkcmVuW2hdLGE9ITEpOmU9bnVsbDooTS5wdXNoKGUpLFgucHVzaChoKSxoPTAscz1lLGU9ZS5jaGlsZHJlblswXSl9cmV0dXJuIHRoaXN9dG9KU09OKCl7cmV0dXJuIHRoaXMuX2RhdGF9ZnJvbUpTT04odCl7cmV0dXJuIHRoaXMuX2RhdGE9dCx0aGlzfV9hbGwodCxpKXtsZXQgbj10O2ZvcihnLmNsZWFyKCk7bjspe2lmKCEwPT09bi5sZWFmKWZvcihjb25zdCB0IG9mIG4uY2hpbGRyZW4paSh0KTtlbHNlIGcucHVzaEFycmF5KG4uY2hpbGRyZW4pO249Zy5wb3AoKT8/bnVsbH19X2J1aWxkKHQsaSxuLGUpe2NvbnN0IHM9bi1pKzE7bGV0IGE9dGhpcy5fbWF4RW50cmllcztpZihzPD1hKXtjb25zdCBlPW5ldyB3KHQuc2xpY2UoaSxuKzEpKTtyZXR1cm4gaChlLHRoaXMuX3RvQkJveCksZX1lfHwoZT1NYXRoLmNlaWwoTWF0aC5sb2cocykvTWF0aC5sb2coYSkpLGE9TWF0aC5jZWlsKHMvYSoqKGUtMSkpKTtjb25zdCByPW5ldyBiKFtdKTtyLmhlaWdodD1lO2NvbnN0IG89TWF0aC5jZWlsKHMvYSksbD1vKk1hdGguY2VpbChNYXRoLnNxcnQoYSkpO2YodCxpLG4sbCx0aGlzLl9jb21wYXJlTWluWCk7Zm9yKGxldCBoPWk7aDw9bjtoKz1sKXtjb25zdCBpPU1hdGgubWluKGgrbC0xLG4pO2YodCxoLGksbyx0aGlzLl9jb21wYXJlTWluWSk7Zm9yKGxldCBuPWg7bjw9aTtuKz1vKXtjb25zdCBzPU1hdGgubWluKG4rby0xLGkpO3IuY2hpbGRyZW4ucHVzaCh0aGlzLl9idWlsZCh0LG4scyxlLTEpKX19cmV0dXJuIGgocix0aGlzLl90b0JCb3gpLHJ9X2Nob29zZVN1YnRyZWUodCxpLG4sZSl7Zm9yKDtlLnB1c2goaSksITAhPT1pLmxlYWYmJmUubGVuZ3RoLTEhPT1uOyl7bGV0IG4sZT0xLzAscz0xLzA7Zm9yKGxldCBoPTAsYT1pLmNoaWxkcmVuLmxlbmd0aDtoPGE7aCsrKXtjb25zdCBhPWkuY2hpbGRyZW5baF0scj1jKGEpLG89ZCh0LGEpLXI7bzxzPyhzPW8sZT1yPGU/cjplLG49YSk6bz09PXMmJnI8ZSYmKGU9cixuPWEpfWk9bnx8aS5jaGlsZHJlblswXX1yZXR1cm4gaX1faW5zZXJ0KHQsaSxuKXtjb25zdCBlPXRoaXMuX3RvQkJveCxzPW4/dDplKHQpO00uY2xlYXIoKTtjb25zdCBoPXRoaXMuX2Nob29zZVN1YnRyZWUocyx0aGlzLl9kYXRhLGksTSk7Zm9yKGguY2hpbGRyZW4ucHVzaCh0KSxyKGgscyk7aT49MCYmTS5kYXRhW2ldLmNoaWxkcmVuLmxlbmd0aD50aGlzLl9tYXhFbnRyaWVzOyl0aGlzLl9zcGxpdChNLGkpLGktLTt0aGlzLl9hZGp1c3RQYXJlbnRCQm94ZXMocyxNLGkpfV9zcGxpdCh0LGkpe2NvbnN0IG49dC5kYXRhW2ldLGU9bi5jaGlsZHJlbi5sZW5ndGgscz10aGlzLl9taW5FbnRyaWVzO3RoaXMuX2Nob29zZVNwbGl0QXhpcyhuLHMsZSk7Y29uc3QgYT10aGlzLl9jaG9vc2VTcGxpdEluZGV4KG4scyxlKTtpZighYSlyZXR1cm4gdm9pZCBjb25zb2xlLmxvZyhcIiAgRXJyb3I6IGFzc2VydGlvbiBmYWlsZWQgYXQgUG9vbGVkUkJ1c2guX3NwbGl0OiBubyB2YWxpZCBzcGxpdCBpbmRleFwiKTtjb25zdCByPW4uY2hpbGRyZW4uc3BsaWNlKGEsbi5jaGlsZHJlbi5sZW5ndGgtYSksbz1uLmxlYWY/bmV3IHcocik6bmV3IGIocik7by5oZWlnaHQ9bi5oZWlnaHQsaChuLHRoaXMuX3RvQkJveCksaChvLHRoaXMuX3RvQkJveCksaT90LmRhdGFbaS0xXS5jaGlsZHJlbi5wdXNoKG8pOnRoaXMuX3NwbGl0Um9vdChuLG8pfV9zcGxpdFJvb3QodCxpKXt0aGlzLl9kYXRhPW5ldyBiKFt0LGldKSx0aGlzLl9kYXRhLmhlaWdodD10LmhlaWdodCsxLGgodGhpcy5fZGF0YSx0aGlzLl90b0JCb3gpfV9jaG9vc2VTcGxpdEluZGV4KHQsaSxuKXtsZXQgZSxzLGg7ZT1zPTEvMDtmb3IobGV0IHI9aTtyPD1uLWk7cisrKXtjb25zdCBpPWEodCwwLHIsdGhpcy5fdG9CQm94KSxvPWEodCxyLG4sdGhpcy5fdG9CQm94KSxsPXUoaSxvKSxtPWMoaSkrYyhvKTtsPGU/KGU9bCxoPXIscz1tPHM/bTpzKTpsPT09ZSYmbTxzJiYocz1tLGg9cil9cmV0dXJuIGh9X2Nob29zZVNwbGl0QXhpcyh0LGksbil7Y29uc3QgZT10LmxlYWY/dGhpcy5fY29tcGFyZU1pblg6byxzPXQubGVhZj90aGlzLl9jb21wYXJlTWluWTpsO3RoaXMuX2FsbERpc3RNYXJnaW4odCxpLG4sZSk8dGhpcy5fYWxsRGlzdE1hcmdpbih0LGksbixzKSYmdC5jaGlsZHJlbi5zb3J0KGUpfV9hbGxEaXN0TWFyZ2luKHQsaSxuLGUpe3QuY2hpbGRyZW4uc29ydChlKTtjb25zdCBzPXRoaXMuX3RvQkJveCxoPWEodCwwLGkscyksbz1hKHQsbi1pLG4scyk7bGV0IGw9bShoKSttKG8pO2ZvcihsZXQgYT1pO2E8bi1pO2ErKyl7Y29uc3QgaT10LmNoaWxkcmVuW2FdO3IoaCx0LmxlYWY/cyhpKTppKSxsKz1tKGgpfWZvcihsZXQgYT1uLWktMTthPj1pO2EtLSl7Y29uc3QgaT10LmNoaWxkcmVuW2FdO3Iobyx0LmxlYWY/cyhpKTppKSxsKz1tKG8pfXJldHVybiBsfV9hZGp1c3RQYXJlbnRCQm94ZXModCxpLG4pe2ZvcihsZXQgZT1uO2U+PTA7ZS0tKXIoaS5kYXRhW2VdLHQpfV9jb25kZW5zZShpKXtmb3IobGV0IG49aS5sZW5ndGgtMTtuPj0wO24tLSl7Y29uc3QgZT1pLmRhdGFbbl07aWYoMD09PWUuY2hpbGRyZW4ubGVuZ3RoKWlmKG4+MCl7Y29uc3Qgcz1pLmRhdGFbbi0xXSxoPXMuY2hpbGRyZW47aC5zcGxpY2UodChoLGUsaC5sZW5ndGgscy5pbmRleEhpbnQpLDEpfWVsc2UgdGhpcy5jbGVhcigpO2Vsc2UgaChlLHRoaXMuX3RvQkJveCl9fV9pbml0Rm9ybWF0KHQpe2NvbnN0IGk9W1wicmV0dXJuIGFcIixcIiAtIGJcIixcIjtcIl07dGhpcy5fY29tcGFyZU1pblg9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGkuam9pbih0WzBdKSksdGhpcy5fY29tcGFyZU1pblk9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGkuam9pbih0WzFdKSksdGhpcy5fdG9CQm94PW5ldyBGdW5jdGlvbihcImFcIixcInJldHVybiB7bWluWDogYVwiK3RbMF0rXCIsIG1pblk6IGFcIit0WzFdK1wiLCBtYXhYOiBhXCIrdFsyXStcIiwgbWF4WTogYVwiK3RbM10rXCJ9O1wiKX19ZnVuY3Rpb24gaCh0LGkpe2EodCwwLHQuY2hpbGRyZW4ubGVuZ3RoLGksdCl9ZnVuY3Rpb24gYSh0LGksbixlLHMpe3N8fChzPW5ldyB3KFtdKSkscy5taW5YPTEvMCxzLm1pblk9MS8wLHMubWF4WD0tMS8wLHMubWF4WT0tMS8wO2ZvcihsZXQgaCxhPWk7YTxuO2ErKyloPXQuY2hpbGRyZW5bYV0scihzLHQubGVhZj9lKGgpOmgpO3JldHVybiBzfWZ1bmN0aW9uIHIodCxpKXt0Lm1pblg9TWF0aC5taW4odC5taW5YLGkubWluWCksdC5taW5ZPU1hdGgubWluKHQubWluWSxpLm1pblkpLHQubWF4WD1NYXRoLm1heCh0Lm1heFgsaS5tYXhYKSx0Lm1heFk9TWF0aC5tYXgodC5tYXhZLGkubWF4WSl9ZnVuY3Rpb24gbyh0LGkpe3JldHVybiB0Lm1pblgtaS5taW5YfWZ1bmN0aW9uIGwodCxpKXtyZXR1cm4gdC5taW5ZLWkubWluWX1mdW5jdGlvbiBjKHQpe3JldHVybih0Lm1heFgtdC5taW5YKSoodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gbSh0KXtyZXR1cm4gdC5tYXhYLXQubWluWCsodC5tYXhZLXQubWluWSl9ZnVuY3Rpb24gZCh0LGkpe3JldHVybihNYXRoLm1heChpLm1heFgsdC5tYXhYKS1NYXRoLm1pbihpLm1pblgsdC5taW5YKSkqKE1hdGgubWF4KGkubWF4WSx0Lm1heFkpLU1hdGgubWluKGkubWluWSx0Lm1pblkpKX1mdW5jdGlvbiB1KHQsaSl7Y29uc3Qgbj1NYXRoLm1heCh0Lm1pblgsaS5taW5YKSxlPU1hdGgubWF4KHQubWluWSxpLm1pblkpLHM9TWF0aC5taW4odC5tYXhYLGkubWF4WCksaD1NYXRoLm1pbih0Lm1heFksaS5tYXhZKTtyZXR1cm4gTWF0aC5tYXgoMCxzLW4pKk1hdGgubWF4KDAsaC1lKX1mdW5jdGlvbiBfKHQsaSl7cmV0dXJuIHQubWluWDw9aS5taW5YJiZ0Lm1pblk8PWkubWluWSYmaS5tYXhYPD10Lm1heFgmJmkubWF4WTw9dC5tYXhZfWZ1bmN0aW9uIHgodCxpKXtyZXR1cm4gaS5taW5YPD10Lm1heFgmJmkubWluWTw9dC5tYXhZJiZpLm1heFg+PXQubWluWCYmaS5tYXhZPj10Lm1pbll9ZnVuY3Rpb24gZih0LGksbixzLGgpe2NvbnN0IGE9W2ksbl07Zm9yKDthLmxlbmd0aDspe2NvbnN0IGk9YS5wb3AoKSxuPWEucG9wKCk7aWYoaS1uPD1zKWNvbnRpbnVlO2NvbnN0IHI9bitNYXRoLmNlaWwoKGktbikvcy8yKSpzO2UodCxyLG4saSxoKSxhLnB1c2gobixyLHIsaSl9fWNvbnN0IHA9bmV3IG4sZz1uZXcgbixNPW5ldyBuLFg9bmV3IG4oe2RlYWxsb2NhdG9yOnZvaWQgMH0pO2NsYXNzIFl7Y29uc3RydWN0b3IoKXt0aGlzLm1pblg9MS8wLHRoaXMubWluWT0xLzAsdGhpcy5tYXhYPS0xLzAsdGhpcy5tYXhZPS0xLzB9fWNsYXNzIEIgZXh0ZW5kcyBZe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLmhlaWdodD0xLHRoaXMuaW5kZXhIaW50PW5ldyBpfX1jbGFzcyB3IGV4dGVuZHMgQntjb25zdHJ1Y3Rvcih0KXtzdXBlcigpLHRoaXMuY2hpbGRyZW49dCx0aGlzLmxlYWY9ITB9fWNsYXNzIGIgZXh0ZW5kcyBCe2NvbnN0cnVjdG9yKHQpe3N1cGVyKCksdGhpcy5jaGlsZHJlbj10LHRoaXMubGVhZj0hMX19ZXhwb3J0e1kgYXMgQkJveCxzIGFzIFBvb2xlZFJCdXNofTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiB0KHQsbil7cmV0dXJuIHQ/bj80OjM6bj8zOjJ9ZnVuY3Rpb24gbihuLEksbyx1LE4pe2lmKCFJPy5sZW5ndGhzLmxlbmd0aClyZXR1cm4gbnVsbDtjb25zdCBsPVwidXBwZXJMZWZ0XCI9PT1OPy5vcmlnaW5Qb3NpdGlvbj8tMToxO24ubGVuZ3Rocy5sZW5ndGgmJihuLmxlbmd0aHMubGVuZ3RoPTApLG4uY29vcmRzLmxlbmd0aCYmKG4uY29vcmRzLmxlbmd0aD0wKTtjb25zdCBzPW4uY29vcmRzLGM9W10sZj1vP1tOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLE51bWJlci5QT1NJVElWRV9JTkZJTklUWSxOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV06W051bWJlci5QT1NJVElWRV9JTkZJTklUWSxOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLE51bWJlci5ORUdBVElWRV9JTkZJTklUWV0se2xlbmd0aHM6VCxjb29yZHM6aX09SSxoPXQobyx1KTtsZXQgZz0wO2Zvcihjb25zdCB0IG9mIFQpe2NvbnN0IG49ZShmLGksZyx0LG8sdSxsKTtuJiZjLnB1c2gobiksZys9dCpofWlmKGMuc29ydCgoKHQsbik9PntsZXQgZT1sKnRbMl0tbCpuWzJdO3JldHVybiAwPT09ZSYmbyYmKGU9dFs0XS1uWzRdKSxlfSkpLGMubGVuZ3RoKXtsZXQgdD02KmNbMF1bMl07c1swXT1jWzBdWzBdL3Qsc1sxXT1jWzBdWzFdL3QsbyYmKHQ9NipjWzBdWzRdLHNbMl09MCE9PXQ/Y1swXVszXS90OjApLChzWzBdPGZbMF18fHNbMF0+ZlsxXXx8c1sxXTxmWzJdfHxzWzFdPmZbM118fG8mJihzWzJdPGZbNF18fHNbMl0+Zls1XSkpJiYocy5sZW5ndGg9MCl9aWYoIXMubGVuZ3RoKXtjb25zdCB0PUkubGVuZ3Roc1swXT9yKGksMCxUWzBdLG8sdSk6bnVsbDtpZighdClyZXR1cm4gbnVsbDtzWzBdPXRbMF0sc1sxXT10WzFdLG8mJnQubGVuZ3RoPjImJihzWzJdPXRbMl0pfXJldHVybiBufWZ1bmN0aW9uIGUobixlLHIsSSxvLHUsTj0xKXtjb25zdCBsPXQobyx1KTtsZXQgcz1yLGM9citsLGY9MCxUPTAsaT0wLGg9MCxnPTA7Zm9yKGxldCB0PTAsYj1JLTE7dDxiO3QrKyxzKz1sLGMrPWwpe2NvbnN0IHQ9ZVtzXSxyPWVbcysxXSxJPWVbcysyXSx1PWVbY10sTj1lW2MrMV0sbD1lW2MrMl07bGV0IEU9dCpOLXUqcjtoKz1FLGYrPSh0K3UpKkUsVCs9KHIrTikqRSxvJiYoRT10KmwtdSpJLGkrPShJK2wpKkUsZys9RSksdDxuWzBdJiYoblswXT10KSx0Pm5bMV0mJihuWzFdPXQpLHI8blsyXSYmKG5bMl09cikscj5uWzNdJiYoblszXT1yKSxvJiYoSTxuWzRdJiYobls0XT1JKSxJPm5bNV0mJihuWzVdPUkpKX1pZihoKk4+MCYmKGgqPS0xKSxnKk4+MCYmKGcqPS0xKSwhaClyZXR1cm4gbnVsbDtjb25zdCBFPVtmLFQsLjUqaF07cmV0dXJuIG8mJihFWzNdPWksRVs0XT0uNSpnKSxFfWZ1bmN0aW9uIHIobixlLHIsbCxzKXtjb25zdCBjPXQobCxzKTtsZXQgZj1lLFQ9ZStjLGk9MCxoPTAsZz0wLEU9MDtmb3IobGV0IHQ9MCxiPXItMTt0PGI7dCsrLGYrPWMsVCs9Yyl7Y29uc3QgdD1uW2ZdLGU9bltmKzFdLHI9bltmKzJdLHM9bltUXSxjPW5bVCsxXSxiPW5bVCsyXSxtPWw/byh0LGUscixzLGMsYik6SSh0LGUscyxjKTtpZihtKWlmKGkrPW0sbCl7Y29uc3Qgbj1OKHQsZSxyLHMsYyxiKTtoKz1tKm5bMF0sZys9bSpuWzFdLEUrPW0qblsyXX1lbHNle2NvbnN0IG49dSh0LGUscyxjKTtoKz1tKm5bMF0sZys9bSpuWzFdfX1yZXR1cm4gaT4wP2w/W2gvaSxnL2ksRS9pXTpbaC9pLGcvaV06cj4wP2w/W25bZV0sbltlKzFdLG5bZSsyXV06W25bZV0sbltlKzFdXTpudWxsfWZ1bmN0aW9uIEkodCxuLGUscil7Y29uc3QgST1lLXQsbz1yLW47cmV0dXJuIE1hdGguc3FydChJKkkrbypvKX1mdW5jdGlvbiBvKHQsbixlLHIsSSxvKXtjb25zdCB1PXItdCxOPUktbixsPW8tZTtyZXR1cm4gTWF0aC5zcXJ0KHUqdStOKk4rbCpsKX1mdW5jdGlvbiB1KHQsbixlLHIpe3JldHVyblt0Ky41KihlLXQpLG4rLjUqKHItbildfWZ1bmN0aW9uIE4odCxuLGUscixJLG8pe3JldHVyblt0Ky41KihyLXQpLG4rLjUqKEktbiksZSsuNSooby1lKV19ZXhwb3J0e24gYXMgZ2V0Q2VudHJvaWRPcHRpbWl6ZWRHZW9tZXRyeSxyIGFzIGxpbmVDZW50cm9pZH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0IGhhcyBmcm9tXCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtQb29sZWRSQnVzaCBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvbGlicy9yYnVzaC9Qb29sZWRSQnVzaC5qc1wiO2ltcG9ydHtlbXB0eSBhcyBzfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ1JlY3QuanNcIjtjb25zdCBkPTVlNCxuPXttaW5YOjAsbWluWTowLG1heFg6MCxtYXhZOjB9O2Z1bmN0aW9uIHQoaSl7bi5taW5YPWlbMF0sbi5taW5ZPWlbMV0sbi5tYXhYPWlbMl0sbi5tYXhZPWlbM119ZnVuY3Rpb24gZShpLHMsZCl7dChzKSxpLnNlYXJjaChuLGQpfWNsYXNzIG97Y29uc3RydWN0b3IoKXt0aGlzLl9pbmRleEludmFsaWQ9ITEsdGhpcy5fYm91bmRzVG9Mb2FkPVtdLHRoaXMuX2JvdW5kc0J5SWQ9bmV3IE1hcCx0aGlzLl9pZEJ5Qm91bmRzPW5ldyBNYXAsdGhpcy5faW5kZXg9bmV3IGkoOSxoYXMoXCJlc3JpLWNzcC1yZXN0cmljdGlvbnNcIik/aT0+KHttaW5YOmlbMF0sbWluWTppWzFdLG1heFg6aVsyXSxtYXhZOmlbM119KTpbXCJbMF1cIixcIlsxXVwiLFwiWzJdXCIsXCJbM11cIl0pLHRoaXMuX2xvYWRJbmRleD0oKT0+e2lmKHRoaXMuX2luZGV4SW52YWxpZCl7Y29uc3QgaT1uZXcgQXJyYXkodGhpcy5faWRCeUJvdW5kcy5zaXplKTtsZXQgcz0wO3RoaXMuX2lkQnlCb3VuZHMuZm9yRWFjaCgoKGQsbik9PntpW3MrK109bn0pKSx0aGlzLl9pbmRleEludmFsaWQ9ITEsdGhpcy5faW5kZXguY2xlYXIoKSx0aGlzLl9pbmRleC5sb2FkKGkpfWVsc2UgdGhpcy5fYm91bmRzVG9Mb2FkLmxlbmd0aCYmKHRoaXMuX2luZGV4LmxvYWQoQXJyYXkuZnJvbShuZXcgU2V0KHRoaXMuX2JvdW5kc1RvTG9hZC5maWx0ZXIoKGk9PnRoaXMuX2lkQnlCb3VuZHMuaGFzKGkpKSkpKSksdGhpcy5fYm91bmRzVG9Mb2FkLmxlbmd0aD0wKX19Z2V0IGZ1bGxCb3VuZHMoKXtpZighdGhpcy5fYm91bmRzQnlJZC5zaXplKXJldHVybiBudWxsO2NvbnN0IGk9cygpO2Zvcihjb25zdCBzIG9mIHRoaXMuX2JvdW5kc0J5SWQudmFsdWVzKCkpcyYmKGlbMF09TWF0aC5taW4oc1swXSxpWzBdKSxpWzFdPU1hdGgubWluKHNbMV0saVsxXSksaVsyXT1NYXRoLm1heChzWzJdLGlbMl0pLGlbM109TWF0aC5tYXgoc1szXSxpWzNdKSk7cmV0dXJuIGl9Z2V0IHZhbGlkKCl7cmV0dXJuIXRoaXMuX2luZGV4SW52YWxpZH1jbGVhcigpe3RoaXMuX2luZGV4SW52YWxpZD0hMSx0aGlzLl9ib3VuZHNUb0xvYWQubGVuZ3RoPTAsdGhpcy5fYm91bmRzQnlJZC5jbGVhcigpLHRoaXMuX2lkQnlCb3VuZHMuY2xlYXIoKSx0aGlzLl9pbmRleC5jbGVhcigpfWRlbGV0ZShpKXtjb25zdCBzPXRoaXMuX2JvdW5kc0J5SWQuZ2V0KGkpO3RoaXMuX2JvdW5kc0J5SWQuZGVsZXRlKGkpLHMmJih0aGlzLl9pZEJ5Qm91bmRzLmRlbGV0ZShzKSx0aGlzLl9pbmRleEludmFsaWR8fHRoaXMuX2luZGV4LnJlbW92ZShzKSl9Zm9yRWFjaEluQm91bmRzKGkscyl7dGhpcy5fbG9hZEluZGV4KCksZSh0aGlzLl9pbmRleCxpLChpPT5zKHRoaXMuX2lkQnlCb3VuZHMuZ2V0KGkpKSkpfWdldChpKXtyZXR1cm4gdGhpcy5fYm91bmRzQnlJZC5nZXQoaSl9aGFzKGkpe3JldHVybiB0aGlzLl9ib3VuZHNCeUlkLmhhcyhpKX1pbnZhbGlkYXRlSW5kZXgoKXt0aGlzLl9pbmRleEludmFsaWR8fCh0aGlzLl9pbmRleEludmFsaWQ9ITAsdGhpcy5fYm91bmRzVG9Mb2FkLmxlbmd0aD0wKX1zZXQoaSxzKXtpZighdGhpcy5faW5kZXhJbnZhbGlkKXtjb25zdCBzPXRoaXMuX2JvdW5kc0J5SWQuZ2V0KGkpO3MmJih0aGlzLl9pbmRleC5yZW1vdmUocyksdGhpcy5faWRCeUJvdW5kcy5kZWxldGUocykpfXRoaXMuX2JvdW5kc0J5SWQuc2V0KGkscykscyYmKHRoaXMuX2lkQnlCb3VuZHMuc2V0KHMsaSksdGhpcy5faW5kZXhJbnZhbGlkfHwodGhpcy5fYm91bmRzVG9Mb2FkLnB1c2gocyksdGhpcy5fYm91bmRzVG9Mb2FkLmxlbmd0aD5kJiZ0aGlzLl9sb2FkSW5kZXgoKSkpfX1leHBvcnR7byBhcyBCb3VuZHNTdG9yZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2lzU29tZSBhcyBlfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvRXJyb3IuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi9jb3JlL0V2ZW50ZWQuanNcIjtpbXBvcnQgcyBmcm9tXCIuLi8uLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgbyxmcm9tUmVjdCBhcyBpfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvYWFCb3VuZGluZ0JveC5qc1wiO2ltcG9ydHtjcmVhdGUgYXMgbn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2dldEJvdW5kc09wdGltaXplZEdlb21ldHJ5IGFzIGF9ZnJvbVwiLi4vZmVhdHVyZUNvbnZlcnNpb25VdGlscy5qc1wiO2ltcG9ydHtCb3VuZHNTdG9yZSBhcyBkfWZyb21cIi4vQm91bmRzU3RvcmUuanNcIjtpbXBvcnR7Y2xlYW5Gcm9tR2VvbWV0cnlFbmdpbmUgYXMgdX1mcm9tXCIuL2dlb21ldHJ5VXRpbHMuanNcIjtpbXBvcnR7b3B0aW1pemVkRmVhdHVyZVF1ZXJ5RW5naW5lQWRhcHRlciBhcyBofWZyb21cIi4vb3B0aW1pemVkRmVhdHVyZVF1ZXJ5RW5naW5lQWRhcHRlci5qc1wiO2NvbnN0IGY9bygpO2NsYXNzIG17Y29uc3RydWN0b3IoZSl7dGhpcy5nZW9tZXRyeUluZm89ZSx0aGlzLl9ib3VuZHNTdG9yZT1uZXcgZCx0aGlzLl9mZWF0dXJlc0J5SWQ9bmV3IE1hcCx0aGlzLl9tYXJrZWRJZHM9bmV3IFNldCx0aGlzLmV2ZW50cz1uZXcgcix0aGlzLmZlYXR1cmVBZGFwdGVyPWh9Z2V0IGdlb21ldHJ5VHlwZSgpe3JldHVybiB0aGlzLmdlb21ldHJ5SW5mby5nZW9tZXRyeVR5cGV9Z2V0IGhhc00oKXtyZXR1cm4gdGhpcy5nZW9tZXRyeUluZm8uaGFzTX1nZXQgaGFzWigpe3JldHVybiB0aGlzLmdlb21ldHJ5SW5mby5oYXNafWdldCBudW1GZWF0dXJlcygpe3JldHVybiB0aGlzLl9mZWF0dXJlc0J5SWQuc2l6ZX1nZXQgZnVsbEJvdW5kcygpe3JldHVybiB0aGlzLl9ib3VuZHNTdG9yZS5mdWxsQm91bmRzfWdldCBzdG9yZVN0YXRpc3RpY3MoKXtsZXQgZT0wO3JldHVybiB0aGlzLl9mZWF0dXJlc0J5SWQuZm9yRWFjaCgodD0+e251bGwhPXQuZ2VvbWV0cnkmJnQuZ2VvbWV0cnkuY29vcmRzJiYoZSs9dC5nZW9tZXRyeS5jb29yZHMubGVuZ3RoKX0pKSx7ZmVhdHVyZUNvdW50OnRoaXMuX2ZlYXR1cmVzQnlJZC5zaXplLHZlcnRleENvdW50OmUvKHRoaXMuaGFzWj90aGlzLmhhc00/NDozOnRoaXMuaGFzTT8zOjIpfX1nZXRGdWxsRXh0ZW50KGUpe2lmKG51bGw9PXRoaXMuZnVsbEJvdW5kcylyZXR1cm4gbnVsbDtjb25zdFt0LHIscyxvXT10aGlzLmZ1bGxCb3VuZHM7cmV0dXJue3htaW46dCx5bWluOnIseG1heDpzLHltYXg6byxzcGF0aWFsUmVmZXJlbmNlOnUoZSl9fWFkZChlKXt0aGlzLl9hZGQoZSksdGhpcy5fZW1pdENoYW5nZWQoKX1hZGRNYW55KGUpe2Zvcihjb25zdCB0IG9mIGUpdGhpcy5fYWRkKHQpO3RoaXMuX2VtaXRDaGFuZ2VkKCl9dXBzZXJ0TWFueSh0KXtjb25zdCByPXQubWFwKChlPT50aGlzLl91cHNlcnQoZSkpKTtyZXR1cm4gdGhpcy5fZW1pdENoYW5nZWQoKSxyLmZpbHRlcihlKX1jbGVhcigpe3RoaXMuX2ZlYXR1cmVzQnlJZC5jbGVhcigpLHRoaXMuX2JvdW5kc1N0b3JlLmNsZWFyKCksdGhpcy5fZW1pdENoYW5nZWQoKX1yZW1vdmVCeUlkKGUpe2NvbnN0IHQ9dGhpcy5fZmVhdHVyZXNCeUlkLmdldChlKTtyZXR1cm4gdD8odGhpcy5fcmVtb3ZlKHQpLHRoaXMuX2VtaXRDaGFuZ2VkKCksdCk6bnVsbH1yZW1vdmVNYW55QnlJZChlKXt0aGlzLl9ib3VuZHNTdG9yZS5pbnZhbGlkYXRlSW5kZXgoKTtmb3IoY29uc3QgdCBvZiBlKXtjb25zdCBlPXRoaXMuX2ZlYXR1cmVzQnlJZC5nZXQodCk7ZSYmdGhpcy5fcmVtb3ZlKGUpfXRoaXMuX2VtaXRDaGFuZ2VkKCl9Zm9yRWFjaEJvdW5kcyhlLHQpe2Zvcihjb25zdCByIG9mIGUpe2NvbnN0IGU9dGhpcy5fYm91bmRzU3RvcmUuZ2V0KHIub2JqZWN0SWQpO2UmJnQoaShmLGUpKX19Z2V0RmVhdHVyZShlKXtyZXR1cm4gdGhpcy5fZmVhdHVyZXNCeUlkLmdldChlKX1oYXMoZSl7cmV0dXJuIHRoaXMuX2ZlYXR1cmVzQnlJZC5oYXMoZSl9Zm9yRWFjaChlKXt0aGlzLl9mZWF0dXJlc0J5SWQuZm9yRWFjaCgodD0+ZSh0KSkpfWZvckVhY2hJbkJvdW5kcyhlLHQpe3RoaXMuX2JvdW5kc1N0b3JlLmZvckVhY2hJbkJvdW5kcyhlLChlPT57dCh0aGlzLl9mZWF0dXJlc0J5SWQuZ2V0KGUpKX0pKX1zdGFydE1hcmtpbmdVc2VkRmVhdHVyZXMoKXt0aGlzLl9ib3VuZHNTdG9yZS5pbnZhbGlkYXRlSW5kZXgoKSx0aGlzLl9tYXJrZWRJZHMuY2xlYXIoKX1zd2VlcCgpe2xldCBlPSExO3RoaXMuX2ZlYXR1cmVzQnlJZC5mb3JFYWNoKCgodCxyKT0+e3RoaXMuX21hcmtlZElkcy5oYXMocil8fChlPSEwLHRoaXMuX3JlbW92ZSh0KSl9KSksdGhpcy5fbWFya2VkSWRzLmNsZWFyKCksZSYmdGhpcy5fZW1pdENoYW5nZWQoKX1fZW1pdENoYW5nZWQoKXt0aGlzLmV2ZW50cy5lbWl0KFwiY2hhbmdlZFwiLHZvaWQgMCl9X2FkZChlKXtpZighZSlyZXR1cm47Y29uc3Qgcj1lLm9iamVjdElkO2lmKG51bGw9PXIpcmV0dXJuIHZvaWQgcy5nZXRMb2dnZXIoXCJlc3JpLmxheWVycy5ncmFwaGljcy5kYXRhLkZlYXR1cmVTdG9yZVwiKS5lcnJvcihuZXcgdChcImZlYXR1cmVzdG9yZTppbnZhbGlkLWZlYXR1cmVcIixcImZlYXR1cmUgaWQgaXMgbWlzc2luZ1wiLHtmZWF0dXJlOmV9KSk7Y29uc3Qgbz10aGlzLl9mZWF0dXJlc0J5SWQuZ2V0KHIpO2xldCBpO2lmKHRoaXMuX21hcmtlZElkcy5hZGQociksbz8oZS5kaXNwbGF5SWQ9by5kaXNwbGF5SWQsaT10aGlzLl9ib3VuZHNTdG9yZS5nZXQociksdGhpcy5fYm91bmRzU3RvcmUuZGVsZXRlKHIpKTpudWxsIT10aGlzLm9uRmVhdHVyZUFkZCYmdGhpcy5vbkZlYXR1cmVBZGQoZSksIWUuZ2VvbWV0cnk/LmNvb3Jkcz8ubGVuZ3RoKXJldHVybiB0aGlzLl9ib3VuZHNTdG9yZS5zZXQocixudWxsKSx2b2lkIHRoaXMuX2ZlYXR1cmVzQnlJZC5zZXQocixlKTtpPWEobnVsbCE9aT9pOm4oKSxlLmdlb21ldHJ5LHRoaXMuZ2VvbWV0cnlJbmZvLmhhc1osdGhpcy5nZW9tZXRyeUluZm8uaGFzTSksbnVsbCE9aSYmdGhpcy5fYm91bmRzU3RvcmUuc2V0KHIsaSksdGhpcy5fZmVhdHVyZXNCeUlkLnNldChyLGUpfV91cHNlcnQoZSl7Y29uc3Qgcj1lPy5vYmplY3RJZDtpZihudWxsPT1yKXJldHVybiBzLmdldExvZ2dlcihcImVzcmkubGF5ZXJzLmdyYXBoaWNzLmRhdGEuRmVhdHVyZVN0b3JlXCIpLmVycm9yKG5ldyB0KFwiZmVhdHVyZXN0b3JlOmludmFsaWQtZmVhdHVyZVwiLFwiZmVhdHVyZSBpZCBpcyBtaXNzaW5nXCIse2ZlYXR1cmU6ZX0pKSxudWxsO2NvbnN0IG89dGhpcy5fZmVhdHVyZXNCeUlkLmdldChyKTtpZighbylyZXR1cm4gdGhpcy5fYWRkKGUpLGU7dGhpcy5fbWFya2VkSWRzLmFkZChyKTtjb25zdHtnZW9tZXRyeTppLGF0dHJpYnV0ZXM6ZH09ZTtmb3IoY29uc3QgdCBpbiBkKW8uYXR0cmlidXRlc1t0XT1kW3RdO3JldHVybiBpJiYoby5nZW9tZXRyeT1pLHRoaXMuX2JvdW5kc1N0b3JlLnNldChyLGEobigpLGksdGhpcy5nZW9tZXRyeUluZm8uaGFzWix0aGlzLmdlb21ldHJ5SW5mby5oYXNNKT8/bnVsbCkpLG99X3JlbW92ZShlKXtudWxsIT10aGlzLm9uRmVhdHVyZVJlbW92ZSYmdGhpcy5vbkZlYXR1cmVSZW1vdmUoZSk7Y29uc3QgdD1lLm9iamVjdElkO3JldHVybiB0aGlzLl9tYXJrZWRJZHMuZGVsZXRlKHQpLHRoaXMuX2JvdW5kc1N0b3JlLmRlbGV0ZSh0KSx0aGlzLl9mZWF0dXJlc0J5SWQuZGVsZXRlKHQpLGV9fWV4cG9ydHttIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRDZW50cm9pZE9wdGltaXplZEdlb21ldHJ5IGFzIHR9ZnJvbVwiLi4vY2VudHJvaWQuanNcIjtpbXBvcnR7T3B0aW1pemVkRmVhdHVyZSBhcyBlfWZyb21cIi4uL09wdGltaXplZEZlYXR1cmUuanNcIjtpbXBvcnQgciBmcm9tXCIuLi9PcHRpbWl6ZWRHZW9tZXRyeS5qc1wiO2NvbnN0IG89e2dldE9iamVjdElkOnQ9PnQub2JqZWN0SWQsZ2V0QXR0cmlidXRlczp0PT50LmF0dHJpYnV0ZXMsZ2V0QXR0cmlidXRlOih0LGUpPT50LmF0dHJpYnV0ZXNbZV0sY2xvbmVXaXRoR2VvbWV0cnk6KHQscik9Pm5ldyBlKHIsdC5hdHRyaWJ1dGVzLG51bGwsdC5vYmplY3RJZCksZ2V0R2VvbWV0cnk6dD0+dC5nZW9tZXRyeSxnZXRDZW50cm9pZDooZSxvKT0+KG51bGw9PWUuY2VudHJvaWQmJihlLmNlbnRyb2lkPXQobmV3IHIsZS5nZW9tZXRyeSxvLmhhc1osby5oYXNNKSksZS5jZW50cm9pZCl9O2V4cG9ydHtvIGFzIG9wdGltaXplZEZlYXR1cmVRdWVyeUVuZ2luZUFkYXB0ZXJ9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9