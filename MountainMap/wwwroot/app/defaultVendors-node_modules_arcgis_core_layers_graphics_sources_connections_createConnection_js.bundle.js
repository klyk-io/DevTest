"use strict";
(self["webpackChunkmm"] = self["webpackChunkmm"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__.WebSocketConnection{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if("attributes"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to parse message",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:"json",...this._config.customParameters},s=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__["default"])(e.path,{query:r,responseType:"json"}),o=(await s).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:s,token:o}=r,n=this._inferWebSocketBaseUrl(s);return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.addQueryParameters)(`${n}/subscribe`,{outSR:""+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes("wss"))return t;return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Unable to infer WebSocket url",e)),null}async _setFilter(e,t){const i=this._websocket;if(null==i||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.createResolver)(),u=()=>{a||(this.destroyed||this._websocket!==i||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Server timed out when setting filter")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to set service filter",t.error)),this._set("errorString",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(i),a=!0,c.resolve())};return i.onmessage=l,i.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(e?.geometry)try{const t=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__.fromJSON)(e.geometry);if("extent"!==t.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"](`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(i){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when setting connection geometryDefinition",i))}return e?.where&&"1 = 1"!==e.where&&"1=1"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(",")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],i=this._relatedFeatures.get(o);if(!i)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;const{attributes:n,geometry:a}=i;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Found malformed feature - no geometry found",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),s=this._queryArchive(t);await r;const o=await s;if(!o)return;for(const i of o.features)this.onFeature(this._enrich(i))}catch(e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when querying buddy services",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default)({url:e}),{capabilities:r}=await t.load(),s=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,i=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=s?a*n:a,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"];if(h.outFields=this._config.outFields??["*"],h.where=this._config.filter?.where??"1=1",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__["default"].fromJSON(this._config.spatialReference),i&&(h.returnCentroid=!0),s&&(h.maxRecordCountFactor=n),o)return h.num=l,t.destroy(),this._queryPages(e,h);const d=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],s=0){t.start=null!=t.num?s*t.num:null;const{data:o}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&s<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,s+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,s=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[s];t.set(e,o)}this._relatedFeatures=t}};g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.graphics.sources.connections.GeoEventConnection")],g);const y=g;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebSocketConnection: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
var h;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(h||(h={}));let d=class extends _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(e){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__.getGeometryZScaler)(t,s,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return"connected";case h.CLOSING:case h.CLOSED:return"disconnected"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.addQueryParameters)(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange("connectionStatus")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void this.destroy()):(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.after)(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Failed to parse message, invalid JSON",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&"object"==typeof r||(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - malformed message",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),"json"!==r.format&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - format is not set",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set filter, but server doesn't support it")),a&&r.outFields!==a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set outFields, but server doesn't support it")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:"json",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),"type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t="Encountered an error over WebSocket connection";this._set("errorString",t),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",t)}_onClose(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"connectionStatus",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"errorString",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.layers.graphics.sources.connections.WebSocketConnection")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConnection: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeoEventConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/ClientSideConnection.js */ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
function o(o,r,s,i,c,a,m,p){const f={source:o,sourceSpatialReference:r,spatialReference:s,geometryType:i,filter:c,maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!o)return new _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__.ClientSideConnection(f);return o.path.startsWith("wss://")||o.path.startsWith("ws://")?new _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__.WebSocketConnection(f):new _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__["default"](f)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/ClientSideConnection.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClientSideConnection: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__["default"]{constructor(e){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__.getGeometryZScaler)(r,s,t)}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if("type"in e)switch(e.type){case"features":case"featureResult":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"connectionStatus",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"errorString",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.support.ClientSideConnection")],c);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/StreamConnection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/StreamConnection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.28/esri/copyright.txt for details.
*/
let c=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("stream-connection",this.errorString):null}onFeature(r){this.emit("data-received",r)}onMessage(r){this.emit("message-received",r)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],c.prototype,"connectionError",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.support.StreamConnection")],c);const i=c;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19zb3VyY2VzX2Nvbm5lY3Rpb25zX2NyZWF0ZUNvbm5lY3Rpb25fanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeTFCLGVBQWUsd0NBQXdDLG9CQUFvQix5RUFBQyxDQUFDLGVBQWUsT0FBTyxVQUFVLDJEQUEyRCxjQUFjLGdFQUFnRSx5QkFBeUIsdURBQUMseU1BQXlNLDRFQUE0RSxpSkFBaUosTUFBTSxxQkFBcUIsY0FBYyxxQ0FBcUMsY0FBYyxxQkFBcUIsTUFBTSxJQUFJLCtFQUErRSxTQUFTLFlBQVksdURBQUMsMkJBQTJCLHNEQUFDLHFEQUFxRCxrQkFBa0IsdUJBQXVCLGlDQUFpQyxTQUFTLDBDQUEwQyxHQUFHLHVEQUFDLFNBQVMsNEJBQTRCLG1CQUFtQixtQ0FBbUMsd0JBQXdCLGNBQWMsZUFBZSxvQ0FBb0MsT0FBTyxxRUFBQyxJQUFJLEVBQUUsYUFBYSx3QkFBd0IsRUFBRSwwQkFBMEIsNEJBQTRCLCtDQUErQyxPQUFPLHVEQUFDLDJCQUEyQixzREFBQyxnRUFBZ0Usc0JBQXNCLHdCQUF3QixvQ0FBb0Msd0JBQXdCLGtDQUFrQyxFQUFFLFNBQVMsUUFBUSxxRUFBQyxVQUFVLHlDQUF5Qyx1REFBQywyQkFBMkIsc0RBQUMsNEVBQTRFLE9BQU8sMkJBQTJCLHFCQUFxQix1REFBQywyQkFBMkIsc0RBQUMsMEhBQTBILFFBQVEsK0VBQStFLHlEQUF5RCxzQkFBc0IsV0FBVyw2QkFBNkIsbUJBQW1CLFFBQVEseUVBQUMsYUFBYSwrQkFBK0Isc0RBQUMsbUNBQW1DLE9BQU8sR0FBRyxvREFBb0QsU0FBUyx1REFBQywyQkFBMkIsc0RBQUMsNkZBQTZGLDRHQUE0RyxXQUFXLG1DQUFtQywyR0FBMkcsYUFBYSx1REFBQyxnSEFBZ0gsTUFBTSx3QkFBd0IsR0FBRyxzQ0FB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NEMsYUFBYSw2QkFBNkIsYUFBYSxrQ0FBa0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVkseUNBQXlDLHVEQUFDLEVBQUUsc0ZBQUMsNkNBQTZDLFVBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL2Nvbm5lY3Rpb25zL0dlb0V2ZW50Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvV2ViU29ja2V0Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvY3JlYXRlQ29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9tbS8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL3N1cHBvcnQvQ2xpZW50U2lkZUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbW0vLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjgvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi8uLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0IHIgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2NyZWF0ZVJlc29sdmVyIGFzIG99ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7YWRkUXVlcnlQYXJhbWV0ZXJzIGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBufWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7V2ViU29ja2V0Q29ubmVjdGlvbiBhcyBhfWZyb21cIi4vV2ViU29ja2V0Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtleGVjdXRlUXVlcnkgYXMgY31mcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3F1ZXJ5L29wZXJhdGlvbnMvcXVlcnkuanNcIjtpbXBvcnQgdSBmcm9tXCIuLi8uLi8uLi8uLi9yZXN0L3N1cHBvcnQvUXVlcnkuanNcIjtpbXBvcnR7ZnJvbUpTT04gYXMgbH1mcm9tXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2pzb25VdGlscy5qc1wiO2ltcG9ydCBmIGZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtjb25zdCBoPTFlNCxkPXttYXhRdWVyeURlcHRoOjUsbWF4UmVjb3JkQ291bnRGYWN0b3I6M307bGV0IGc9Y2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKGUpe3N1cGVyKHsuLi5kLC4uLmV9KSx0aGlzLl9idWRkeVNlcnZpY2VzUXVlcnk9bnVsbCx0aGlzLl9yZWxhdGVkRmVhdHVyZXM9bnVsbH1hc3luYyBfb3Blbigpe2NvbnN0IGU9YXdhaXQgdGhpcy5fZmV0Y2hTZXJ2aWNlRGVmaW5pdGlvbih0aGlzLl9jb25maWcuc291cmNlKTtlLnRpbWVJbmZvLnRyYWNrSWRGaWVsZHx8cy5nZXRMb2dnZXIodGhpcykud2FybihcIkdlb0V2ZW50IHNlcnZpY2Ugd2FzIGNvbmZpZ3VyZWQgd2l0aG91dCBhIFRyYWNrSWRGaWVsZC4gVGhpcyBtYXkgcmVzdWx0IGluIGNlcnRhaW4gZnVuY3Rpb25hbGl0eSBiZWluZyBkaXNhYmxlZC4gVGhlIHB1cmdlT3B0aW9ucy5tYXhPYnNlcnZhdGlvbnMgcHJvcGVydHkgd2lsbCBoYXZlIG5vIGVmZmVjdC5cIik7Y29uc3QgdD10aGlzLl9mZXRjaFdlYlNvY2tldFVybChlLnN0cmVhbVVybHMsdGhpcy5fY29uZmlnLnNwYXRpYWxSZWZlcmVuY2UpO3RoaXMuX2J1ZGR5U2VydmljZXNRdWVyeXx8KHRoaXMuX2J1ZGR5U2VydmljZXNRdWVyeT10aGlzLl9xdWVyeUJ1ZGR5U2VydmljZXMoKSksYXdhaXQgdGhpcy5fYnVkZHlTZXJ2aWNlc1F1ZXJ5LGF3YWl0IHRoaXMuX3RyeUNyZWF0ZVdlYlNvY2tldCh0KTtjb25zdHtmaWx0ZXI6cixvdXRGaWVsZHM6b309dGhpcy5fY29uZmlnO3RoaXMuZGVzdHJveWVkfHx0aGlzLl9zZXRGaWx0ZXIocixvKX1fb25NZXNzYWdlKGUpe2lmKFwiYXR0cmlidXRlc1wiaW4gZSl7bGV0IG87dHJ5e289dGhpcy5fZW5yaWNoKGUpLG51bGwhPXRoaXMuX2ZlYXR1cmVaU2NhbGVyJiZ0aGlzLl9mZWF0dXJlWlNjYWxlcihvLmdlb21ldHJ5KX1jYXRjaCh0KXtyZXR1cm4gdm9pZCBzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBwYXJzZSBtZXNzYWdlXCIsdCkpfXRoaXMub25GZWF0dXJlKG8pfWVsc2UgdGhpcy5vbk1lc3NhZ2UoZSl9YXN5bmMgX2ZldGNoU2VydmljZURlZmluaXRpb24oZSl7Y29uc3Qgcj17ZjpcImpzb25cIiwuLi50aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVyc30scz10KGUucGF0aCx7cXVlcnk6cixyZXNwb25zZVR5cGU6XCJqc29uXCJ9KSxvPShhd2FpdCBzKS5kYXRhO3JldHVybiB0aGlzLl9zZXJ2aWNlRGVmaW5pdGlvbj1vLG99X2ZldGNoV2ViU29ja2V0VXJsKGUsdCl7Y29uc3Qgcj1lWzBdLHt1cmxzOnMsdG9rZW46b309cixuPXRoaXMuX2luZmVyV2ViU29ja2V0QmFzZVVybChzKTtyZXR1cm4gaShgJHtufS9zdWJzY3JpYmVgLHtvdXRTUjpcIlwiK3Qud2tpZCx0b2tlbjpvfSl9X2luZmVyV2ViU29ja2V0QmFzZVVybChlKXtpZigxPT09ZS5sZW5ndGgpcmV0dXJuIGVbMF07Zm9yKGNvbnN0IHQgb2YgZSlpZih0LmluY2x1ZGVzKFwid3NzXCIpKXJldHVybiB0O3JldHVybiBzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIlVuYWJsZSB0byBpbmZlciBXZWJTb2NrZXQgdXJsXCIsZSkpLG51bGx9YXN5bmMgX3NldEZpbHRlcihlLHQpe2NvbnN0IGk9dGhpcy5fd2Vic29ja2V0O2lmKG51bGw9PWl8fG51bGw9PWUmJm51bGw9PXQpcmV0dXJuO2NvbnN0IG49SlNPTi5zdHJpbmdpZnkoe2ZpbHRlcjp0aGlzLl9zZXJpYWxpemVGaWx0ZXIoZSx0KX0pO2xldCBhPSExO2NvbnN0IGM9bygpLHU9KCk9PnthfHwodGhpcy5kZXN0cm95ZWR8fHRoaXMuX3dlYnNvY2tldCE9PWl8fHMuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiU2VydmVyIHRpbWVkIG91dCB3aGVuIHNldHRpbmcgZmlsdGVyXCIpKSxjLnJlamVjdCgpKX0sbD1lPT57Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7dC5maWx0ZXImJih0LmVycm9yJiYocy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJGYWlsZWQgdG8gc2V0IHNlcnZpY2UgZmlsdGVyXCIsdC5lcnJvcikpLHRoaXMuX3NldChcImVycm9yU3RyaW5nXCIsYENvdWxkIG5vdCBzZXQgc2VydmljZSBmaWx0ZXIgLSAke3QuZXJyb3J9YCksYy5yZWplY3QodC5lcnJvcikpLHRoaXMuX3NldFdlYlNvY2tldEpTT05QYXJzZUhhbmRsZXIoaSksYT0hMCxjLnJlc29sdmUoKSl9O3JldHVybiBpLm9ubWVzc2FnZT1sLGkuc2VuZChuKSxzZXRUaW1lb3V0KHUsaCksYy5wcm9taXNlfV9zZXJpYWxpemVGaWx0ZXIoZSx0KXtjb25zdCBvPXt9O2lmKG51bGw9PWUmJm51bGw9PXQpcmV0dXJuIG87aWYoZT8uZ2VvbWV0cnkpdHJ5e2NvbnN0IHQ9bChlLmdlb21ldHJ5KTtpZihcImV4dGVudFwiIT09dC50eXBlKXRocm93IG5ldyByKGBFeHBlY3RlZCBleHRlbnQgYnV0IGZvdW5kIHR5cGUgJHt0LnR5cGV9YCk7by5nZW9tZXRyeT1KU09OLnN0cmluZ2lmeSh0LnNoaWZ0Q2VudHJhbE1lcmlkaWFuKCkpfWNhdGNoKGkpe3MuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiRW5jb3VudGVyZWQgYW4gZXJyb3Igd2hlbiBzZXR0aW5nIGNvbm5lY3Rpb24gZ2VvbWV0cnlEZWZpbml0aW9uXCIsaSkpfXJldHVybiBlPy53aGVyZSYmXCIxID0gMVwiIT09ZS53aGVyZSYmXCIxPTFcIiE9PWUud2hlcmUmJihvLndoZXJlPWUud2hlcmUpLG51bGwhPXQmJihvLm91dEZpZWxkcz10LmpvaW4oXCIsXCIpKSxvfV9lbnJpY2goZSl7aWYoIXRoaXMuX3JlbGF0ZWRGZWF0dXJlcylyZXR1cm4gZTtjb25zdCB0PXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLnJlbGF0ZWRGZWF0dXJlcy5qb2luRmllbGQsbz1lLmF0dHJpYnV0ZXNbdF0saT10aGlzLl9yZWxhdGVkRmVhdHVyZXMuZ2V0KG8pO2lmKCFpKXJldHVybiBzLmdldExvZ2dlcih0aGlzKS53YXJuKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiRmVhdHVyZSBqb2luIGZhaWxlZC4gSXMgdGhlIGpvaW4gZmllbGQgY29uZmlndXJlZCBjb3JyZWN0bHk/XCIsZSksZTtjb25zdHthdHRyaWJ1dGVzOm4sZ2VvbWV0cnk6YX09aTtmb3IoY29uc3QgciBpbiBuKWUuYXR0cmlidXRlc1tyXT1uW3JdO3JldHVybiBhJiYoZS5nZW9tZXRyeT1hKSxlLmdlb21ldHJ5fHxlLmNlbnRyb2lkfHxzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZvdW5kIG1hbGZvcm1lZCBmZWF0dXJlIC0gbm8gZ2VvbWV0cnkgZm91bmRcIixlKSksZX1hc3luYyBfcXVlcnlCdWRkeVNlcnZpY2VzKCl7dHJ5e2NvbnN0e3JlbGF0ZWRGZWF0dXJlczplLGtlZXBMYXRlc3RBcmNoaXZlOnR9PXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLHI9dGhpcy5fcXVlcnlSZWxhdGVkRmVhdHVyZXMoZSkscz10aGlzLl9xdWVyeUFyY2hpdmUodCk7YXdhaXQgcjtjb25zdCBvPWF3YWl0IHM7aWYoIW8pcmV0dXJuO2Zvcihjb25zdCBpIG9mIG8uZmVhdHVyZXMpdGhpcy5vbkZlYXR1cmUodGhpcy5fZW5yaWNoKGkpKX1jYXRjaChlKXtzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gcXVlcnlpbmcgYnVkZHkgc2VydmljZXNcIix7ZXJyb3I6ZX0pKX19YXN5bmMgX3F1ZXJ5UmVsYXRlZEZlYXR1cmVzKGUpe2lmKCFlKXJldHVybjtjb25zdCB0PWF3YWl0IHRoaXMuX3F1ZXJ5QnVkZHkoZS5mZWF0dXJlc1VybCk7dGhpcy5fYWRkUmVsYXRlZEZlYXR1cmVzKHQpfWFzeW5jIF9xdWVyeUFyY2hpdmUoZSl7aWYoZSlyZXR1cm4gdGhpcy5fcXVlcnlCdWRkeShlLmZlYXR1cmVzVXJsKX1hc3luYyBfcXVlcnlCdWRkeShlKXtjb25zdCB0PW5ldygoYXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vRmVhdHVyZUxheWVyLmpzXCIpKS5kZWZhdWx0KSh7dXJsOmV9KSx7Y2FwYWJpbGl0aWVzOnJ9PWF3YWl0IHQubG9hZCgpLHM9ci5xdWVyeS5zdXBwb3J0c01heFJlY29yZENvdW50RmFjdG9yLG89ci5xdWVyeS5zdXBwb3J0c1BhZ2luYXRpb24saT1yLnF1ZXJ5LnN1cHBvcnRzQ2VudHJvaWQsbj10aGlzLl9jb25maWcubWF4UmVjb3JkQ291bnRGYWN0b3IsYT10LmNhcGFiaWxpdGllcy5xdWVyeS5tYXhSZWNvcmRDb3VudCxsPXM/YSpuOmEsaD1uZXcgdTtpZihoLm91dEZpZWxkcz10aGlzLl9jb25maWcub3V0RmllbGRzPz9bXCIqXCJdLGgud2hlcmU9dGhpcy5fY29uZmlnLmZpbHRlcj8ud2hlcmU/P1wiMT0xXCIsaC5yZXR1cm5HZW9tZXRyeT0hMCxoLnJldHVybkV4Y2VlZGVkTGltaXRGZWF0dXJlcz0hMCxoLm91dFNwYXRpYWxSZWZlcmVuY2U9Zi5mcm9tSlNPTih0aGlzLl9jb25maWcuc3BhdGlhbFJlZmVyZW5jZSksaSYmKGgucmV0dXJuQ2VudHJvaWQ9ITApLHMmJihoLm1heFJlY29yZENvdW50RmFjdG9yPW4pLG8pcmV0dXJuIGgubnVtPWwsdC5kZXN0cm95KCksdGhpcy5fcXVlcnlQYWdlcyhlLGgpO2NvbnN0IGQ9YXdhaXQgYyhlLGgsdGhpcy5fY29uZmlnLnNvdXJjZVNwYXRpYWxSZWZlcmVuY2UpO3JldHVybiB0LmRlc3Ryb3koKSxkLmRhdGF9YXN5bmMgX3F1ZXJ5UGFnZXMoZSx0LHI9W10scz0wKXt0LnN0YXJ0PW51bGwhPXQubnVtP3MqdC5udW06bnVsbDtjb25zdHtkYXRhOm99PWF3YWl0IGMoZSx0LHRoaXMuX2NvbmZpZy5zb3VyY2VTcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gby5leGNlZWRlZFRyYW5zZmVyTGltaXQmJnM8KHRoaXMuX2NvbmZpZy5tYXhRdWVyeURlcHRoPz8wKT8oby5mZWF0dXJlcy5mb3JFYWNoKChlPT5yLnB1c2goZSkpKSx0aGlzLl9xdWVyeVBhZ2VzKGUsdCxyLHMrMSkpOihyLmZvckVhY2goKGU9Pm8uZmVhdHVyZXMucHVzaChlKSkpLG8pfV9hZGRSZWxhdGVkRmVhdHVyZXMoZSl7Y29uc3QgdD1uZXcgTWFwLHI9ZS5mZWF0dXJlcyxzPXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLnJlbGF0ZWRGZWF0dXJlcy5qb2luRmllbGQ7Zm9yKGNvbnN0IG8gb2Ygcil7Y29uc3QgZT1vLmF0dHJpYnV0ZXNbc107dC5zZXQoZSxvKX10aGlzLl9yZWxhdGVkRmVhdHVyZXM9dH19O2c9ZShbbihcImVzcmkubGF5ZXJzLmdyYXBoaWNzLnNvdXJjZXMuY29ubmVjdGlvbnMuR2VvRXZlbnRDb25uZWN0aW9uXCIpXSxnKTtjb25zdCB5PWc7ZXhwb3J0e3kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2FmdGVyIGFzIHMsY3JlYXRlUmVzb2x2ZXIgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHthZGRRdWVyeVBhcmFtZXRlcnMgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnQgbCBmcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanNcIjt2YXIgaDshZnVuY3Rpb24oZSl7ZVtlLkNPTk5FQ1RJTkc9MF09XCJDT05ORUNUSU5HXCIsZVtlLk9QRU49MV09XCJPUEVOXCIsZVtlLkNMT1NJTkc9Ml09XCJDTE9TSU5HXCIsZVtlLkNMT1NFRD0zXT1cIkNMT1NFRFwifShofHwoaD17fSkpO2xldCBkPWNsYXNzIGV4dGVuZHMgbHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXM9W10sdGhpcy5lcnJvclN0cmluZz1udWxsO2NvbnN0e2dlb21ldHJ5VHlwZTp0LHNwYXRpYWxSZWZlcmVuY2U6byxzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOnN9PWU7dGhpcy5fY29uZmlnPWUsdGhpcy5fZmVhdHVyZVpTY2FsZXI9YSh0LHMsbyksdGhpcy5fb3BlbigpfWFzeW5jIF9vcGVuKCl7YXdhaXQgdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KCksdGhpcy5kZXN0cm95ZWR8fGF3YWl0IHRoaXMuX2hhbmRzaGFrZSgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksbnVsbCE9dGhpcy5fd2Vic29ja2V0JiYodGhpcy5fd2Vic29ja2V0Lm9ub3Blbj1udWxsLHRoaXMuX3dlYnNvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fd2Vic29ja2V0Lm9uZXJyb3I9bnVsbCx0aGlzLl93ZWJzb2NrZXQub25tZXNzYWdlPW51bGwsdGhpcy5fd2Vic29ja2V0LmNsb3NlKCkpLHRoaXMuX3dlYnNvY2tldD1udWxsfWdldCBjb25uZWN0aW9uU3RhdHVzKCl7aWYobnVsbD09dGhpcy5fd2Vic29ja2V0KXJldHVyblwiZGlzY29ubmVjdGVkXCI7c3dpdGNoKHRoaXMuX3dlYnNvY2tldC5yZWFkeVN0YXRlKXtjYXNlIGguQ09OTkVDVElORzpjYXNlIGguT1BFTjpyZXR1cm5cImNvbm5lY3RlZFwiO2Nhc2UgaC5DTE9TSU5HOmNhc2UgaC5DTE9TRUQ6cmV0dXJuXCJkaXNjb25uZWN0ZWRcIn19c2VuZE1lc3NhZ2VUb1NvY2tldChlKXtudWxsIT10aGlzLl93ZWJzb2NrZXQ/dGhpcy5fd2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZSkpOnRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMucHVzaChlKX1zZW5kTWVzc2FnZVRvQ2xpZW50KGUpe3RoaXMuX29uTWVzc2FnZShlKX11cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe3RoaXMuX2NvbmZpZy5jdXN0b21QYXJhbWV0ZXJzPWUsbnVsbCE9dGhpcy5fd2Vic29ja2V0JiZ0aGlzLl93ZWJzb2NrZXQuY2xvc2UoKX1hc3luYyBfdHJ5Q3JlYXRlV2ViU29ja2V0KGU9dGhpcy5fY29uZmlnLnNvdXJjZS5wYXRoLHI9MWUzLGk9MCl7dHJ5e2lmKHRoaXMuZGVzdHJveWVkKXJldHVybjtjb25zdCB0PW4oZSx0aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVycz8/e30pO3RoaXMuX3dlYnNvY2tldD1hd2FpdCB0aGlzLl9jcmVhdGVXZWJTb2NrZXQodCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJjb25uZWN0aW9uU3RhdHVzXCIpfWNhdGNoKGMpe2NvbnN0IG49ci8xZTM7cmV0dXJuIHRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyYmaT49dGhpcy5fY29uZmlnLm1heFJlY29ubmVjdGlvbkF0dGVtcHRzPyhvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJFeGNlZWRlZCBtYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyBhdHRlbXB0cy4gTm8gZnVydGhlciBhdHRlbXB0cyB3aWxsIGJlIG1hZGVcIikpLHZvaWQgdGhpcy5kZXN0cm95KCkpOihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYEZhaWxlZCB0byBjb25uZWN0LiBBdHRlbXB0aW5nIHRvIHJlY29ubmVjdCBpbiAke259c2AsYykpLGF3YWl0IHMociksdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KGUsTWF0aC5taW4oMS41KnIsMWUzKnRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25JbnRlcnZhbCksaSsxKSl9fV9zZXRXZWJTb2NrZXRKU09OUGFyc2VIYW5kbGVyKGUpe2Uub25tZXNzYWdlPWU9Pnt0cnl7Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7dGhpcy5fb25NZXNzYWdlKHQpfWNhdGNoKHMpe3JldHVybiB2b2lkIG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBwYXJzZSBtZXNzYWdlLCBpbnZhbGlkIEpTT05cIix7ZXJyb3I6c30pKX19fV9jcmVhdGVXZWJTb2NrZXQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxvKT0+e2NvbnN0IHM9bmV3IFdlYlNvY2tldChlKTtzLm9ub3Blbj0oKT0+e2lmKHMub25vcGVuPW51bGwsdGhpcy5kZXN0cm95ZWQpcmV0dXJuIHMub25jbG9zZT1udWxsLHZvaWQgcy5jbG9zZSgpO3Mub25jbG9zZT1lPT50aGlzLl9vbkNsb3NlKGUpLHMub25lcnJvcj1lPT50aGlzLl9vbkVycm9yKGUpLHRoaXMuX3NldFdlYlNvY2tldEpTT05QYXJzZUhhbmRsZXIocyksdChzKX0scy5vbmNsb3NlPWU9PntzLm9ub3Blbj1zLm9uY2xvc2U9bnVsbCxvKGUpfX0pKX1hc3luYyBfaGFuZHNoYWtlKGU9MWU0KXtjb25zdCBzPXRoaXMuX3dlYnNvY2tldDtpZihudWxsPT1zKXJldHVybjtjb25zdCBuPXIoKSxpPXMub25tZXNzYWdlLHtmaWx0ZXI6YyxvdXRGaWVsZHM6YSxzcGF0aWFsUmVmZXJlbmNlOmx9PXRoaXMuX2NvbmZpZztyZXR1cm4gbi50aW1lb3V0KGUpLHMub25tZXNzYWdlPWU9PntsZXQgcj1udWxsO3RyeXtyPUpTT04ucGFyc2UoZS5kYXRhKX1jYXRjaChoKXt9ciYmXCJvYmplY3RcIj09dHlwZW9mIHJ8fChvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJQcm90b2NvbCB2aW9sYXRpb24uIEhhbmRzaGFrZSBmYWlsZWQgLSBtYWxmb3JtZWQgbWVzc2FnZVwiLGUuZGF0YSkpLG4ucmVqZWN0KCksdGhpcy5kZXN0cm95KCkpLHIuc3BhdGlhbFJlZmVyZW5jZT8ud2tpZCE9PWw/LndraWQmJihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYFByb3RvY29sIHZpb2xhdGlvbi4gSGFuZHNoYWtlIGZhaWxlZCAtIGV4cGVjdGVkIHdraWQgb2YgJHtsLndraWR9YCxlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxcImpzb25cIiE9PXIuZm9ybWF0JiYoby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLFwiUHJvdG9jb2wgdmlvbGF0aW9uLiBIYW5kc2hha2UgZmFpbGVkIC0gZm9ybWF0IGlzIG5vdCBzZXRcIixlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxjJiZyLmZpbHRlciE9PWMmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBmaWx0ZXIsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxhJiZyLm91dEZpZWxkcyE9PWEmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBvdXRGaWVsZHMsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxzLm9ubWVzc2FnZT1pO2Zvcihjb25zdCB0IG9mIHRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMpcy5zZW5kKEpTT04uc3RyaW5naWZ5KHQpKTt0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzPVtdLG4ucmVzb2x2ZSgpfSxzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbHRlcjpjLG91dEZpZWxkczphLGZvcm1hdDpcImpzb25cIixzcGF0aWFsUmVmZXJlbmNlOnt3a2lkOmwud2tpZH19KSksbi5wcm9taXNlfV9vbk1lc3NhZ2UoZSl7aWYodGhpcy5vbk1lc3NhZ2UoZSksXCJ0eXBlXCJpbiBlKXN3aXRjaChlLnR5cGUpe2Nhc2VcImZlYXR1cmVzXCI6Y2FzZVwiZmVhdHVyZVJlc3VsdFwiOmZvcihjb25zdCB0IG9mIGUuZmVhdHVyZXMpbnVsbCE9dGhpcy5fZmVhdHVyZVpTY2FsZXImJnRoaXMuX2ZlYXR1cmVaU2NhbGVyKHQuZ2VvbWV0cnkpLHRoaXMub25GZWF0dXJlKHQpfX1fb25FcnJvcihlKXtjb25zdCB0PVwiRW5jb3VudGVyZWQgYW4gZXJyb3Igb3ZlciBXZWJTb2NrZXQgY29ubmVjdGlvblwiO3RoaXMuX3NldChcImVycm9yU3RyaW5nXCIsdCksby5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLHQpfV9vbkNsb3NlKGUpe3RoaXMuX3dlYnNvY2tldD1udWxsLHRoaXMubm90aWZ5Q2hhbmdlKFwiY29ubmVjdGlvblN0YXR1c1wiKSwxZTMhPT1lLmNvZGUmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixgV2ViU29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHkgd2l0aCBlcnJvciBjb2RlICR7ZS5jb2RlfWApLHRoaXMuZGVzdHJveWVkfHx0aGlzLl9vcGVuKCl9fTtlKFtpKCldLGQucHJvdG90eXBlLFwiY29ubmVjdGlvblN0YXR1c1wiLG51bGwpLGUoW2koKV0sZC5wcm90b3R5cGUsXCJlcnJvclN0cmluZ1wiLHZvaWQgMCksZD1lKFtjKFwiZXNyaS5sYXllcnMuZ3JhcGhpY3Muc291cmNlcy5jb25uZWN0aW9ucy5XZWJTb2NrZXRDb25uZWN0aW9uXCIpXSxkKTtleHBvcnR7ZCBhcyBXZWJTb2NrZXRDb25uZWN0aW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuL0dlb0V2ZW50Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtXZWJTb2NrZXRDb25uZWN0aW9uIGFzIHR9ZnJvbVwiLi9XZWJTb2NrZXRDb25uZWN0aW9uLmpzXCI7aW1wb3J0e0NsaWVudFNpZGVDb25uZWN0aW9uIGFzIG59ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9DbGllbnRTaWRlQ29ubmVjdGlvbi5qc1wiO2Z1bmN0aW9uIG8obyxyLHMsaSxjLGEsbSxwKXtjb25zdCBmPXtzb3VyY2U6byxzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOnIsc3BhdGlhbFJlZmVyZW5jZTpzLGdlb21ldHJ5VHlwZTppLGZpbHRlcjpjLG1heFJlY29ubmVjdGlvbkF0dGVtcHRzOmEsbWF4UmVjb25uZWN0aW9uSW50ZXJ2YWw6bSxjdXN0b21QYXJhbWV0ZXJzOnB9O2lmKCFvKXJldHVybiBuZXcgbihmKTtyZXR1cm4gby5wYXRoLnN0YXJ0c1dpdGgoXCJ3c3M6Ly9cIil8fG8ucGF0aC5zdGFydHNXaXRoKFwid3M6Ly9cIik/bmV3IHQoZik6bmV3IGUoZil9ZXhwb3J0e28gYXMgY3JlYXRlQ29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yOC9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIG99ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnQgcyBmcm9tXCIuL1N0cmVhbUNvbm5lY3Rpb24uanNcIjtsZXQgYz1jbGFzcyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmNvbm5lY3Rpb25TdGF0dXM9XCJjb25uZWN0ZWRcIix0aGlzLmVycm9yU3RyaW5nPW51bGw7Y29uc3R7Z2VvbWV0cnlUeXBlOnIsc3BhdGlhbFJlZmVyZW5jZTp0LHNvdXJjZVNwYXRpYWxSZWZlcmVuY2U6c309ZTt0aGlzLl9mZWF0dXJlWlNjYWxlcj1vKHIscyx0KX11cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe31zZW5kTWVzc2FnZVRvU29ja2V0KGUpe31zZW5kTWVzc2FnZVRvQ2xpZW50KGUpe2lmKFwidHlwZVwiaW4gZSlzd2l0Y2goZS50eXBlKXtjYXNlXCJmZWF0dXJlc1wiOmNhc2VcImZlYXR1cmVSZXN1bHRcIjpmb3IoY29uc3QgciBvZiBlLmZlYXR1cmVzKW51bGwhPXRoaXMuX2ZlYXR1cmVaU2NhbGVyJiZ0aGlzLl9mZWF0dXJlWlNjYWxlcihyLmdlb21ldHJ5KSx0aGlzLm9uRmVhdHVyZShyKX10aGlzLm9uTWVzc2FnZShlKX19O2UoW3IoKV0sYy5wcm90b3R5cGUsXCJjb25uZWN0aW9uU3RhdHVzXCIsdm9pZCAwKSxlKFtyKCldLGMucHJvdG90eXBlLFwiZXJyb3JTdHJpbmdcIix2b2lkIDApLGM9ZShbdChcImVzcmkubGF5ZXJzLnN1cHBvcnQuQ2xpZW50U2lkZUNvbm5lY3Rpb25cIildLGMpO2V4cG9ydHtjIGFzIENsaWVudFNpZGVDb25uZWN0aW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI4L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtsZXQgYz1jbGFzcyBleHRlbmRzIG8uRXZlbnRlZEFjY2Vzc29ye2Rlc3Ryb3koKXt0aGlzLmVtaXQoXCJkZXN0cm95XCIpfWdldCBjb25uZWN0aW9uRXJyb3IoKXtyZXR1cm4gdGhpcy5lcnJvclN0cmluZz9uZXcgZShcInN0cmVhbS1jb25uZWN0aW9uXCIsdGhpcy5lcnJvclN0cmluZyk6bnVsbH1vbkZlYXR1cmUocil7dGhpcy5lbWl0KFwiZGF0YS1yZWNlaXZlZFwiLHIpfW9uTWVzc2FnZShyKXt0aGlzLmVtaXQoXCJtZXNzYWdlLXJlY2VpdmVkXCIscil9fTtyKFtzKHtyZWFkT25seTohMH0pXSxjLnByb3RvdHlwZSxcImNvbm5lY3Rpb25FcnJvclwiLG51bGwpLGM9cihbdChcImVzcmkubGF5ZXJzLnN1cHBvcnQuU3RyZWFtQ29ubmVjdGlvblwiKV0sYyk7Y29uc3QgaT1jO2V4cG9ydHtpIGFzIGRlZmF1bHR9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9