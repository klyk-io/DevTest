/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/quill@1.3.7/themes/bubble.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import extend from"extend";import Emitter from"../core/emitter";import BaseTheme,{BaseTooltip}from"./base";import{Range}from"../core/selection";import icons from"../ui/icons";const TOOLBAR_CONFIG=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class BubbleTheme extends BaseTheme{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=TOOLBAR_CONFIG),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new BubbleTooltip(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),icons),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),icons)}}BubbleTheme.DEFAULTS=extend(!0,{},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});class BubbleTooltip extends BaseTooltip{constructor(t,e){super(t,e),this.quill.on(Emitter.events.EDITOR_CHANGE,(t,e,i,l)=>{if(t===Emitter.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&l===Emitter.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=this.root.offsetWidth+"px";let t=this.quill.getLines(e.index,e.length);if(1===t.length)this.position(this.quill.getBounds(e));else{let i=t[t.length-1],l=this.quill.getIndex(i),o=Math.min(i.length()-1,e.index+e.length-l),s=this.quill.getBounds(new Range(l,o));this.position(s)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Emitter.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;let t=this.quill.getSelection();null!=t&&this.position(this.quill.getBounds(t))},1)})}cancel(){this.show()}position(t){let e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===e)return e;i.style.marginLeft=-1*e-i.offsetWidth/2+"px"}}BubbleTooltip.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");export{BubbleTooltip,BubbleTheme as default};
//# sourceMappingURL=/sm/53e95702e1b1ef0e5c7c1e793724550838c50e8c91b3c9ebb7231b7da743b79a.map