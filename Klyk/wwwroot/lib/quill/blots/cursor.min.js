/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/quill@1.3.7/blots/cursor.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Parchment from"parchment";import TextBlot from"./text";class Cursor extends Parchment.Embed{static value(){}constructor(t,e){super(t),this.selection=e,this.textNode=document.createTextNode(Cursor.CONTENTS),this.domNode.appendChild(this.textNode),this._length=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this._length)return super.format(t,e);let r=this,s=0;for(;null!=r&&r.statics.scope!==Parchment.Scope.BLOCK_BLOT;)s+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=Cursor.CONTENTS.length,r.optimize(),r.formatAt(s,Cursor.CONTENTS.length,t,e),this._length=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this._length}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return;let t,e,r,s=this.textNode,o=this.selection.getNativeRange();for(null!=o&&o.start.node===s&&o.end.node===s&&([t,e,r]=[s,o.start.offset,o.end.offset]);null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==Cursor.CONTENTS){let e=this.textNode.data.split(Cursor.CONTENTS).join("");this.next instanceof TextBlot?(t=this.next.domNode,this.next.insertAt(0,e),this.textNode.data=Cursor.CONTENTS):(this.textNode.data=e,this.parent.insertBefore(Parchment.create(this.textNode),this),this.textNode=document.createTextNode(Cursor.CONTENTS),this.domNode.appendChild(this.textNode))}return this.remove(),null!=e?([e,r]=[e,r].map(function(e){return Math.max(0,Math.min(t.data.length,e-1))}),{startNode:t,startOffset:e,endNode:t,endOffset:r}):void 0}update(t,e){if(t.some(t=>"characterData"===t.type&&t.target===this.textNode)){let t=this.restore();t&&(e.range=t)}}value(){return""}}Cursor.blotName="cursor",Cursor.className="ql-cursor",Cursor.tagName="span",Cursor.CONTENTS="\ufeff";export default Cursor;
//# sourceMappingURL=/sm/26139a95a69f6a00d6767f43974a307280805acf6c4bcb4f7af15534413d6f35.map