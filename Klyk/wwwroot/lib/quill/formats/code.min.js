/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/quill@1.3.7/formats/code.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Delta from"quill-delta";import Parchment from"parchment";import Block from"../blots/block";import Inline from"../blots/inline";import TextBlot from"../blots/text";class Code extends Inline{}Code.blotName="code",Code.tagName="CODE";class CodeBlock extends Block{static create(t){let e=super.create(t);return e.setAttribute("spellcheck",!1),e}static formats(){return!0}delta(){let t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((t,e)=>t.insert(e).insert("\n",this.formats()),new Delta)}format(t,e){if(t===this.statics.blotName&&e)return;let[o]=this.descendant(TextBlot,this.length()-1);null!=o&&o.deleteAt(o.length()-1,1),super.format(t,e)}formatAt(t,e,o,n){if(0===e)return;if(null==Parchment.query(o,Parchment.Scope.BLOCK)||o===this.statics.blotName&&n===this.statics.formats(this.domNode))return;let i=this.newlineIndex(t);if(i<0||i>=t+e)return;let l=this.newlineIndex(t,!0)+1,s=i-l+1,r=this.isolate(l,s),a=r.next;r.format(o,n),a instanceof CodeBlock&&a.formatAt(0,t-l+e-s,o,n)}insertAt(t,e,o){if(null!=o)return;let[n,i]=this.descendant(TextBlot,t);n.insertAt(i,e)}length(){let t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}newlineIndex(t,e=!1){if(e)return this.domNode.textContent.slice(0,t).lastIndexOf("\n");{let e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}}optimize(t){this.domNode.textContent.endsWith("\n")||this.appendChild(Parchment.create("text","\n")),super.optimize(t);let e=this.next;null!=e&&e.prev===this&&e.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===e.statics.formats(e.domNode)&&(e.optimize(t),e.moveChildren(this),e.remove())}replace(t){super.replace(t),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(t){let e=Parchment.find(t);null==e?t.parentNode.removeChild(t):e instanceof Parchment.Embed?e.remove():e.unwrap()})}}CodeBlock.blotName="code-block",CodeBlock.tagName="PRE",CodeBlock.TAB="  ";export{Code,CodeBlock as default};
//# sourceMappingURL=/sm/69f97d67dfa412cdb817e069d996e51cc68ac2aa2be2969cae2e0694c35ed961.map