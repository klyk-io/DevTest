/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/quill@1.3.7/modules/syntax.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import Parchment from"parchment";import Quill from"../core/quill";import Module from"../core/module";import CodeBlock from"../formats/code";class SyntaxCodeBlock extends CodeBlock{replaceWith(t){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(t)}highlight(t){let e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}SyntaxCodeBlock.className="ql-syntax";let CodeToken=new Parchment.Attributor.Class("token","hljs",{scope:Parchment.Scope.INLINE});class Syntax extends Module{static register(){Quill.register(CodeToken,!0),Quill.register(SyntaxCodeBlock,!0)}constructor(t,e){if(super(t,e),"function"!=typeof this.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");let l=null;this.quill.on(Quill.events.SCROLL_OPTIMIZE,()=>{clearTimeout(l),l=setTimeout(()=>{this.highlight(),l=null},this.options.interval)}),this.highlight()}highlight(){if(this.quill.selection.composing)return;this.quill.update(Quill.sources.USER);let t=this.quill.getSelection();this.quill.scroll.descendants(SyntaxCodeBlock).forEach(t=>{t.highlight(this.options.highlight)}),this.quill.update(Quill.sources.SILENT),null!=t&&this.quill.setSelection(t,Quill.sources.SILENT)}}Syntax.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3};export{SyntaxCodeBlock as CodeBlock,CodeToken,Syntax as default};
//# sourceMappingURL=/sm/e566cadd0ebeae4b8e88e15465ed58c81222be07bb893bb705ac523bb5b0dd8f.map