"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["defaultVendors-node_modules_arcgis_core_views_webgl_FramebufferObject_js-node_modules_arcgis_-0ab0e1"],{

/***/ "./node_modules/@arcgis/core/views/webgl/BufferObject.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/BufferObject.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BufferObject: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./checkWebGLError.js */ "./node_modules/@arcgis/core/views/webgl/checkWebGLError.js");
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const h=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.webgl.BufferObject");class c{static createIndex(e,t,r){return new c(e,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ELEMENT_ARRAY_BUFFER,t,r)}static createVertex(e,t,r){return new c(e,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ARRAY_BUFFER,t,r)}static createUniform(e,t,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)throw new Error("Uniform buffers are supported in WebGL2 only!");return new c(e,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.UNIFORM_BUFFER,t,r)}static createPixelPack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_6__.Usage.STREAM_READ,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)throw new Error("Pixel pack buffers are supported in WebGL2 only!");const i=new c(e,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.PIXEL_PACK_BUFFER,t);return r&&i.setSize(r),i}static createPixelUnpack(e,t=_enums_js__WEBPACK_IMPORTED_MODULE_6__.Usage.STREAM_DRAW,r){if(e.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)throw new Error("Pixel unpack buffers are supported in WebGL2 only!");return new c(e,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.PIXEL_UNPACK_BUFFER,t,r)}constructor(e,t,r,i){this._context=e,this.bufferType=t,this.usage=r,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ResourceType.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.checkWebGLError)(this._context.gl),i&&this.setData(i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteLength(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ELEMENT_ARRAY_BUFFER?this._indexType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.DataType.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ELEMENT_ARRAY_BUFFER||this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ARRAY_BUFFER}dispose(){if(this._context?.gl){if(this._glName){this._context.gl.deleteBuffer(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ResourceType.BufferObject,this),this._context=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.nullifyNonNullableForDispose)(this._context)}else this._glName&&h.warn("Leaked WebGL buffer object")}setSize(e,t=null){if(e<=0&&h.error("Buffer size needs to be positive!"),this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ELEMENT_ARRAY_BUFFER&&null!=t)switch(this._indexType=t,t){case _enums_js__WEBPACK_IMPORTED_MODULE_6__.DataType.UNSIGNED_SHORT:e*=2;break;case _enums_js__WEBPACK_IMPORTED_MODULE_6__.DataType.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.ELEMENT_ARRAY_BUFFER&&((0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__.isUint16Array)(e)&&(t/=2,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_6__.DataType.UNSIGNED_SHORT),(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_3__.isUint32Array)(e)&&(t/=4,this._indexType=_enums_js__WEBPACK_IMPORTED_MODULE_6__.DataType.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e,t=null){this._size=e;const r=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const i=this._context.gl;null!=t?i.bufferData(this.bufferType,t,this.usage):i.bufferData(this.bufferType,e,this.usage),(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.checkWebGLError)(i),this._isVAOAware&&this._context.bindVAO(r)}setSubData(e,t,r,i){if(!e)return;(t<0||t*e.BYTES_PER_ELEMENT>=this.byteLength)&&h.error("offset is out of range!"),r>=i&&h.error("end must be bigger than start!"),(t+(i-r))*e.BYTES_PER_ELEMENT>this.byteLength&&h.error("An attempt to write beyond the end of the buffer!");const s=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const a=this._context.gl;if(this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,r,i-r);else{const s=0===r&&i===e.length?e:e.subarray(r,i);a.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,s)}(0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.checkWebGLError)(a),this._isVAOAware&&this._context.bindVAO(s)}getSubData(e,t=0,r,i){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)return void h.error("Get buffer subdata is supported in WebGL2 only!");if(r<0||i<0)return void h.error("Problem getting subdata: offset and length were less than zero!");const s=E(e)?e.BYTES_PER_ELEMENT:1;if(s*((r??0)+(i??0))>e.byteLength)return void h.error("Problem getting subdata: offset and length exceeded destination size!");t+s*(i??0)>this.byteLength&&h.warn("Potential problem getting subdata: requested data exceeds buffer size!");const n=this._context.gl;this._context.bindBuffer(this,_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.COPY_READ_BUFFER),n.getBufferSubData(_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.COPY_READ_BUFFER,t,e,r,i),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.COPY_READ_BUFFER)}async getSubDataAsync(e,t=0,r,i){this._context.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2?(await this._context.clientWaitAsync(),this.getSubData(e,t,r,i)):h.error("Get buffer subdata is supported in WebGL2 only!")}}function E(t){return (0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isArrayLike)(t)}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/FramebufferObject.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/FramebufferObject.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FramebufferObject: () => (/* binding */ x),
/* harmony export */   ensureAttachmentMaxSize: () => (/* binding */ R)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _BufferObject_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BufferObject.js */ "./node_modules/@arcgis/core/views/webgl/BufferObject.js");
/* harmony import */ var _checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./checkWebGLError.js */ "./node_modules/@arcgis/core/views/webgl/checkWebGLError.js");
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./GLObjectType.js */ "./node_modules/@arcgis/core/views/webgl/GLObjectType.js");
/* harmony import */ var _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Renderbuffer.js */ "./node_modules/@arcgis/core/views/webgl/Renderbuffer.js");
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const E=_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.webgl.FramebufferObject");class x{constructor(t,e,i=null){this._context=t,this._glName=null,this._colorAttachments=new Map,this._depthBuffer=null,this._stencilBuffer=null,this._depthStencilTexture=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ResourceType.FramebufferObject,this);const r=g(e)?e:new _Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture(this._context,e);if(this._colorAttachments.set(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0,r),this._validateTextureDescriptor(r.descriptor),this._validateColorAttachmentPoint(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0),null!=i)if(b(i))this._context.capabilities.depthTexture||console.error("Setting the depth/stencil texture as an attachment requires WEBGL_depth_texture or WebGL2"),this._depthStencilTexture=g(i)?i:new _Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture(this._context,i),this._validateTextureDescriptor(this._depthStencilTexture.descriptor);else{const t=A(i)?i:new _Renderbuffer_js__WEBPACK_IMPORTED_MODULE_8__.Renderbuffer(this._context,i),e=t.descriptor;e.internalFormat===_enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.STENCIL_INDEX8?this._stencilBuffer=t:this._depthBuffer=t,this._validateRenderBufferDescriptor(e)}}dispose(){if(0===this._colorAttachments.size&&!this._glName)return;const t=this._context.getBoundFramebufferObject();if(this._colorAttachments.forEach(((t,e)=>this.detachColorTexture(e)?.dispose())),this.detachDepthStencilBuffer()?.dispose(),this.detachDepthStencilTexture()?.dispose(),this._glName){this._context.gl.deleteFramebuffer(this._glName),this._glName=null}this._context.bindFramebuffer(t),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ResourceType.FramebufferObject,this)}get glName(){return this._glName}get colorTexture(){return this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0)}get depthStencilAttachment(){return this._depthStencilTexture||this._depthBuffer||this._stencilBuffer}get depthStencilTexture(){return this._depthStencilTexture}get width(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0);return t?.descriptor?.width??0}get height(){const t=this._colorAttachments.get(_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0);return t?.descriptor?.height??0}get gpuMemoryUsage(){return[...this._colorAttachments].reduce(((t,[e,i])=>t+i.gpuMemoryUsage),this.depthStencilAttachment?.gpuMemoryUsage??0)}getColorTexture(t){const e=this._colorAttachments.get(t);return e&&g(e)?e:null}attachColorTexture(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0){if(!t)return;this._validateColorAttachmentPoint(e);const i=t.descriptor;this._validateTextureDescriptor(i),this.detachColorTexture(e)?.dispose(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,e)),this._colorAttachments.set(e,t)}detachColorTexture(t=_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0){const e=this._colorAttachments.get(t);if(e)return this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t)),this._colorAttachments.delete(t),e}setColorTextureTarget(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0){const i=this._colorAttachments.get(e);i&&this._framebufferTexture2D(i.glName,e,t)}attachDepthStencil(t){if(t)switch(t.type){case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_7__.GLObjectType.Texture:return this._attachDepthStencilTexture(t);case _GLObjectType_js__WEBPACK_IMPORTED_MODULE_7__.GLObjectType.RenderBuffer:return this._attachDepthStencilBuffer(t)}}_attachDepthStencilTexture(t){if(null==t)return;const e=t.descriptor;e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.PixelFormat.DEPTH_STENCIL&&e.pixelFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.PixelFormat.DEPTH24_STENCIL8&&console.error("Depth/Stencil texture must have a pixel type of DEPTH_STENCIL!"),e.dataType!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.PixelType.UNSIGNED_INT_24_8&&console.error("Depth/Stencil texture must have data type of UNSIGNED_INT_24_8!"),this._context.capabilities.depthTexture||console.error("Extension WEBGL_depth_texture isn't supported therefore it is no possible to set the depth/stencil texture!"),this._validateTextureDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(t.glName,_enums_js__WEBPACK_IMPORTED_MODULE_6__.DepthStencilAttachment)),this._depthStencilTexture?.dispose(),this._depthStencilTexture=t}detachDepthStencilTexture(){const t=this._depthStencilTexture;return t&&this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,_enums_js__WEBPACK_IMPORTED_MODULE_6__.DepthStencilAttachment)),this._depthStencilTexture=null,t}_attachDepthStencilBuffer(t){if(null==t)return;const e=t.descriptor;if(e.internalFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_STENCIL&&e.internalFormat!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_COMPONENT16&&console.error("Depth/Stencil buffer must have correct internalFormat"),this._validateRenderBufferDescriptor(e),this._disposeDepthStencilAttachments(),this._initialized){this._context.bindFramebuffer(this);const i=this._context.gl,r=this._getGLAttachmentPoint(e);i.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER,r,i.RENDERBUFFER,t.glName)}this._depthBuffer?.dispose(),this._depthBuffer=t}detachDepthStencilBuffer(){const t=this._depthBuffer;if(t&&this._initialized){this._context.bindFramebuffer(this);const e=this._context.gl,i=this._getGLAttachmentPoint(t.descriptor);e.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER,i,e.RENDERBUFFER,null),t.dispose()}return this._depthBuffer=null,t}copyToTexture(t,e,i,r,s,h,n){(t<0||e<0||s<0||h<0)&&console.error("Offsets cannot be negative!"),(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!");const o=n.descriptor;n.descriptor.target!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_2D&&console.error("Texture target must be TEXTURE_2D!"),(null==o?.width||null==o?.height||t+i>this.width||e+r>this.height||s+i>o.width||h+r>o.height)&&console.error("Bad dimensions, the current input values will attempt to read or copy out of bounds!");const c=this._context,a=c.bindTexture(n,_Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture.TEXTURE_UNIT_FOR_UPDATES);c.setActiveTexture(_Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture.TEXTURE_UNIT_FOR_UPDATES),c.bindFramebuffer(this),c.gl.copyTexSubImage2D(_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_2D,0,s,h,t,e,i,r),c.bindTexture(a,_Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture.TEXTURE_UNIT_FOR_UPDATES)}readPixels(t,e,i,r,s,h,n){(i<=0||r<=0)&&console.error("Copy width and height must be greater than zero!"),n||console.error("Target memory is not initialized!"),this._context.bindFramebuffer(this);this._context.gl.readPixels(t,e,i,r,s,h,n)}async readPixelsAsync(t,e,h,n,o,c,a){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_5__.ContextType.WEBGL2)return (0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.webglDebugEnabled)()&&console.warn("Attempting to read pixels using pixel buffer object without WebGL2"),void this.readPixels(t,e,h,n,o,c,a);const u=this._context.gl,_=_BufferObject_js__WEBPACK_IMPORTED_MODULE_3__.BufferObject.createPixelPack(this._context,_enums_js__WEBPACK_IMPORTED_MODULE_6__.Usage.STREAM_READ,a.byteLength);this._context.bindBuffer(_),this._context.bindFramebuffer(this),u.readPixels(t,e,h,n,o,c,0),this._context.unbindBuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.BufferType.PIXEL_PACK_BUFFER),await _.getSubDataAsync(a),_.dispose()}resize(t,e){if(this.width===t&&this.height===e)return;const i={width:t,height:e};R(i,this._context.parameters.maxTextureSize),this._colorAttachments.forEach((t=>t.resize(i.width,i.height))),this._depthStencilTexture?.resize(i.width,i.height),this._initialized&&(R(i,this._context.parameters.maxRenderbufferSize),this._depthBuffer?.resize(i.width,i.height),this._stencilBuffer?.resize(i.width,i.height),this._context.getBoundFramebufferObject()===this&&this._context.bindFramebuffer(null),this._initialized=!1)}initializeAndBind(t=_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER){const e=this._context.gl;if(this._initialized)return void e.bindFramebuffer(t,this.glName);this._glName&&e.deleteFramebuffer(this._glName);const i=e.createFramebuffer();e.bindFramebuffer(t,i),this._colorAttachments.forEach(((e,i)=>this._framebufferTexture2D(e.glName,i,N(e),t)));const s=this._depthBuffer||this._stencilBuffer;if(s){const i=this._getGLAttachmentPoint(s.descriptor);e.framebufferRenderbuffer(t,i,e.RENDERBUFFER,s.glName)}else this._depthStencilTexture&&this._framebufferTexture2D(this._depthStencilTexture.glName,e.DEPTH_STENCIL_ATTACHMENT,N(this._depthStencilTexture),t);if((0,_checkWebGLError_js__WEBPACK_IMPORTED_MODULE_4__.webglDebugEnabled)()){e.checkFramebufferStatus(t)!==e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer is incomplete!")}this._glName=i,this._initialized=!0}_framebufferTexture2D(t,e=_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0,i=_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_2D,r=_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER,s=0){this._context.gl.framebufferTexture2D(r,e,i,t,s)}_disposeDepthStencilAttachments(){const t=this._context.gl;if(this._depthBuffer){if(this._initialized){this._context.bindFramebuffer(this);const e=this._getGLAttachmentPoint(this._depthBuffer.descriptor);t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER,e,t.RENDERBUFFER,null)}this._depthBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.disposeMaybe)(this._depthBuffer)}this._stencilBuffer&&(this._initialized&&(this._context.bindFramebuffer(this),t.framebufferRenderbuffer(_enums_js__WEBPACK_IMPORTED_MODULE_6__.FramebufferTarget.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,null)),this._stencilBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.disposeMaybe)(this._stencilBuffer)),this._depthStencilTexture&&(this._initialized&&(this._context.bindFramebuffer(this),this._framebufferTexture2D(null,t.DEPTH_STENCIL_ATTACHMENT)),this._depthStencilTexture=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.disposeMaybe)(this._depthStencilTexture))}_validateTextureDescriptor(t){t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_2D&&t.target!==_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_CUBE_MAP&&console.error("Texture type must be TEXTURE_2D or TEXTURE_CUBE_MAP!"),R(t,this._context.parameters.maxTextureSize),this._validateBufferDimensions(t)}_validateRenderBufferDescriptor(t){R(t,this._context.parameters.maxRenderbufferSize),this._validateBufferDimensions(t)}_validateBufferDimensions(t){t.width<=0&&(t.width=this.width),t.height<=0&&(t.height=this.height),this.width>0&&this.height>0&&(this.width===t.width&&this.height===t.height||console.error("Attachment size must match framebuffer size!"))}_getGLAttachmentPoint(t){switch(t.internalFormat){case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_COMPONENT16:case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_COMPONENT24:case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_COMPONENT32F:return this._context.gl.DEPTH_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH24_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH32F_STENCIL8:case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.DEPTH_STENCIL:return this._context.gl.DEPTH_STENCIL_ATTACHMENT;case _enums_js__WEBPACK_IMPORTED_MODULE_6__.RenderbufferFormat.STENCIL_INDEX8:return this._context.gl.STENCIL_ATTACHMENT}}_validateColorAttachmentPoint(e){if(-1===x._MAX_COLOR_ATTACHMENTS){const t=this._context.capabilities.drawBuffers;if(t){const e=this._context.gl;x._MAX_COLOR_ATTACHMENTS=e.getParameter(t.MAX_COLOR_ATTACHMENTS)}else x._MAX_COLOR_ATTACHMENTS=1}const i=e-_enums_js__WEBPACK_IMPORTED_MODULE_6__.ColorAttachment.COLOR_ATTACHMENT0;i+1>x._MAX_COLOR_ATTACHMENTS&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.webgl.FrameBufferObject").error("esri.FrameBufferObject",`illegal attachment point for color attachment: ${i+1}. Implementation supports up to ${x._MAX_COLOR_ATTACHMENTS} color attachments`)}}function g(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_7__.GLObjectType.Texture}function A(t){return null!=t&&"type"in t&&t.type===_GLObjectType_js__WEBPACK_IMPORTED_MODULE_7__.GLObjectType.RenderBuffer}function b(t){return g(t)||null!=t&&"pixelFormat"in t}function R(t,e){const i=Math.max(t.width,t.height);if(i>e){E.warn(`Resizing FBO attachment size ${t.width}x${t.height} to device limit ${e}`);const r=e/i;return t.width=Math.round(t.width*r),t.height=Math.round(t.height*r),!1}return!0}function N(t){return t.descriptor.target===_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_CUBE_MAP?_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X:_enums_js__WEBPACK_IMPORTED_MODULE_6__.TextureType.TEXTURE_2D}x._MAX_COLOR_ATTACHMENTS=-1;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/Renderbuffer.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/Renderbuffer.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Renderbuffer: () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _GLObjectType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./GLObjectType.js */ "./node_modules/@arcgis/core/views/webgl/GLObjectType.js");
/* harmony import */ var _RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./RenderbufferDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class n{constructor(e,i){this._context=e,this._descriptor=i,this.type=_GLObjectType_js__WEBPACK_IMPORTED_MODULE_3__.GLObjectType.RenderBuffer,this._context.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_2__.ResourceType.Renderbuffer,this);const n=this._context.gl;this.glName=n.createRenderbuffer(),this._context.bindRenderbuffer(this);const{width:o,height:h,internalFormat:c,multisampled:f}=i;if(f){if(this._context.type!==_contextUtils_js__WEBPACK_IMPORTED_MODULE_1__.ContextType.WEBGL2)throw new Error("Multisampled renderbuffers are not supported in WebGL1!");n.renderbufferStorageMultisample(n.RENDERBUFFER,this.samples,c,o,h)}else n.renderbufferStorage(n.RENDERBUFFER,c,o,h)}get descriptor(){return this._descriptor}get samples(){const e=this._descriptor.samples,t=this._context.parameters.maxSamples;return e?Math.min(e,t):t}get gpuMemoryUsage(){return (0,_RenderbufferDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.estimateMemory)(this._descriptor)}resize(e,t){const r=this._descriptor;if(r.width===e&&r.height===t)return;r.width=e,r.height=t;const s=this._context.gl;if(this._context.bindRenderbuffer(this),r.multisampled){s.renderbufferStorageMultisample(s.RENDERBUFFER,this.samples,r.internalFormat,r.width,r.height)}else s.renderbufferStorage(s.RENDERBUFFER,r.internalFormat,r.width,r.height)}dispose(){this._context&&(this._context.gl.deleteRenderbuffer(this.glName),this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_2__.ResourceType.Renderbuffer,this),this._context=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.nullifyNonNullableForDispose)(this._context))}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/RenderbufferDescriptor.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RenderbufferDescriptor: () => (/* binding */ i),
/* harmony export */   estimateMemory: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Util.js */ "./node_modules/@arcgis/core/views/webgl/Util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class i{constructor(t,i,h=i){this.internalFormat=t,this.width=i,this.height=h,this.multisampled=!1,this.samples=1}}function h(i){return i.width<=0||i.height<=0||null==i.internalFormat?0:i.width*i.height*(0,_Util_js__WEBPACK_IMPORTED_MODULE_0__.getBytesPerElementFormat)(i.internalFormat)}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VertexArrayObject: () => (/* binding */ u)
/* harmony export */ });
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/typedArrayUtil.js */ "./node_modules/@arcgis/core/core/typedArrayUtil.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _Util_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Util.js */ "./node_modules/@arcgis/core/views/webgl/Util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const f=_core_Logger_js__WEBPACK_IMPORTED_MODULE_0__["default"].getLogger("esri.views.webgl.VertexArrayObject");let u=class{constructor(t,e,i,r,n=null){this._context=t,this._locations=e,this._layout=i,this._buffers=r,this._indexBuffer=n,this._glName=null,this._initialized=!1,t.instanceCounter.increment(_enums_js__WEBPACK_IMPORTED_MODULE_3__.ResourceType.VertexArrayObject,this)}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get byteSize(){return Object.keys(this._buffers).reduce(((t,e)=>t+this._buffers[e].byteLength),null!=this._indexBuffer?this._indexBuffer.byteLength:0)}get layout(){return this._layout}get locations(){return this._locations}get memoryEstimate(){return this.byteSize+(Object.keys(this._buffers).length+(this._indexBuffer?1:0))*_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_2__.typedArrayStaticSize}dispose(){if(this._context){this._context.getBoundVAO()===this&&this._context.bindVAO(null);for(const t in this._buffers)this._buffers[t]?.dispose(),delete this._buffers[t];this._indexBuffer=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.disposeMaybe)(this._indexBuffer),this.disposeVAOOnly()}else(this._glName||Object.getOwnPropertyNames(this._buffers).length>0)&&f.warn("Leaked WebGL VAO")}disposeVAOOnly(){if(this._glName){const t=this._context?.capabilities?.vao;t.deleteVertexArray(this._glName),this._glName=null}this._context.instanceCounter.decrement(_enums_js__WEBPACK_IMPORTED_MODULE_3__.ResourceType.VertexArrayObject,this),this._context=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.nullifyNonNullableForDispose)(this._context)}initialize(){if(this._initialized)return;const t=this._context.capabilities.vao;if(t){const e=t.createVertexArray();t.bindVertexArray(e),this._bindLayout(),t.bindVertexArray(null),this._glName=e}this._initialized=!0}bind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:t,_layout:e,_indexBuffer:i}=this;t||f.error("Vertex buffer dictionary is empty!");const r=this._context.gl;for(const s in t){const i=t[s];i||f.error("Vertex buffer is uninitialized!");const r=e[s];r||f.error("Vertex element descriptor is empty!"),(0,_Util_js__WEBPACK_IMPORTED_MODULE_4__.bindVertexBufferLayout)(this._context,this._locations,i,r)}if(null!=i){!!this._context.capabilities.vao?r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,i.glName):this._context.bindBuffer(i)}}unbind(){this.initialize();const t=this._context.capabilities.vao;t?t.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:t,_layout:e}=this;t||f.error("Vertex buffer dictionary is empty!");for(const i in t){const r=t[i];r||f.error("Vertex buffer is uninitialized!");const s=e[i];(0,_Util_js__WEBPACK_IMPORTED_MODULE_4__.unbindVertexBufferLayout)(this._context,this._locations,r,s)}null!=this._indexBuffer&&this._context.unbindBuffer(this._indexBuffer.bufferType)}};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzX3dlYmdsX0ZyYW1lYnVmZmVyT2JqZWN0X2pzLW5vZGVfbW9kdWxlc19hcmNnaXNfLTBhYjBlMS5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN3YSxRQUFRLHVEQUFDLDRDQUE0QyxRQUFRLDBCQUEwQixlQUFlLGlEQUFDLDJCQUEyQiwyQkFBMkIsZUFBZSxpREFBQyxtQkFBbUIsNEJBQTRCLFlBQVkseURBQUMseUVBQXlFLGVBQWUsaURBQUMscUJBQXFCLDJCQUEyQiw0Q0FBQyxnQkFBZ0IsWUFBWSx5REFBQyw0RUFBNEUsZ0JBQWdCLGlEQUFDLHNCQUFzQix5QkFBeUIsNkJBQTZCLDRDQUFDLGdCQUFnQixZQUFZLHlEQUFDLDhFQUE4RSxlQUFlLGlEQUFDLDBCQUEwQixxQkFBcUIsa0lBQWtJLG1EQUFDLGlFQUFpRSxvRUFBQyxzQ0FBc0MsYUFBYSxvQkFBb0IsV0FBVyxrQkFBa0IsZ0JBQWdCLHVCQUF1QixpQkFBaUIseUJBQXlCLGlEQUFDLHdDQUF3QywrQ0FBQyxtREFBbUQsa0JBQWtCLHlCQUF5QixpREFBQyx5Q0FBeUMsaURBQUMsY0FBYyxVQUFVLHNCQUFzQixpQkFBaUIsOERBQThELHdDQUF3QyxtREFBQyxrQ0FBa0MsNEVBQUMsZ0JBQWdCLHdEQUF3RCxrQkFBa0Isd0VBQXdFLGlEQUFDLDJEQUEyRCxLQUFLLCtDQUFDLHFCQUFxQixNQUFNLEtBQUssK0NBQUMsbUJBQW1CLHVCQUF1QixXQUFXLGFBQWEsbUJBQW1CLGtCQUFrQixpREFBQyx3QkFBd0Isc0VBQUMsMkJBQTJCLCtDQUFDLGlCQUFpQixzRUFBQywyQkFBMkIsK0NBQUMseUNBQXlDLHlCQUF5QixhQUFhLG9DQUFvQyw2RUFBNkUseUJBQXlCLDhGQUE4RixvRUFBQywrQ0FBK0Msb0JBQW9CLGFBQWEsOE9BQThPLG9DQUFvQyw2RUFBNkUs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QixxQkFBcUIsaUZBQWlGLHlFQUFDLENBQUMsVUFBVSxrQkFBa0IsZ0VBQWdFLGlGQUFpRixrQkFBa0IsNERBQUMsMENBQTBDLG1HQUFtRyxpQkFBaUIsaUJBQWlCLHlDQUF5QyxvREFBb0Qsd0NBQXdDLG1EQUFDLHVDQUF1Qyw0RUFBQyxnQkFBZ0IsYUFBYSw0QkFBNEIsdUNBQXVDLE1BQU0sOEJBQThCLCtFQUErRSxxQkFBcUIsT0FBTyxrQkFBa0IsdUNBQXVDLGtGQUFrRixjQUFjLE1BQU0sb0NBQW9DLE1BQU0saURBQWlELHlCQUF5QixrQkFBa0IsYUFBYSw4Q0FBOEMsYUFBYSxrREFBa0QsZ0VBQUMsb0NBQW9DLFlBQVksNEdBQTRHLFNBQVMsa0JBQWtCLHVDQUF1QywrQ0FBK0MsZ0JBQWdCLE1BQU0scUJBQXFCLE1BQU0saURBQWlELGtCQUFrQixhQUFhLDhDQUE4QyxhQUFhLGtFQUFDLG9DQUFvQyxvRkFBbUgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy93ZWJnbC9CdWZmZXJPYmplY3QuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3Mvd2ViZ2wvRnJhbWVidWZmZXJPYmplY3QuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3Mvd2ViZ2wvUmVuZGVyYnVmZmVyLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL3dlYmdsL1JlbmRlcmJ1ZmZlckRlc2NyaXB0b3IuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3Mvd2ViZ2wvVmVydGV4QXJyYXlPYmplY3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtpc0FycmF5TGlrZSBhcyBlfWZyb21cIi4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e251bGxpZnlOb25OdWxsYWJsZUZvckRpc3Bvc2UgYXMgcn1mcm9tXCIuLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e2lzVWludDE2QXJyYXkgYXMgaSxpc1VpbnQzMkFycmF5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS90eXBlZEFycmF5VXRpbC5qc1wiO2ltcG9ydHtjaGVja1dlYkdMRXJyb3IgYXMgbn1mcm9tXCIuL2NoZWNrV2ViR0xFcnJvci5qc1wiO2ltcG9ydHtDb250ZXh0VHlwZSBhcyBvfWZyb21cIi4vY29udGV4dFV0aWxzLmpzXCI7aW1wb3J0e0J1ZmZlclR5cGUgYXMgYSxVc2FnZSBhcyBmLFJlc291cmNlVHlwZSBhcyB1LERhdGFUeXBlIGFzIF99ZnJvbVwiLi9lbnVtcy5qc1wiO2NvbnN0IGg9dC5nZXRMb2dnZXIoXCJlc3JpLnZpZXdzLndlYmdsLkJ1ZmZlck9iamVjdFwiKTtjbGFzcyBje3N0YXRpYyBjcmVhdGVJbmRleChlLHQscil7cmV0dXJuIG5ldyBjKGUsYS5FTEVNRU5UX0FSUkFZX0JVRkZFUix0LHIpfXN0YXRpYyBjcmVhdGVWZXJ0ZXgoZSx0LHIpe3JldHVybiBuZXcgYyhlLGEuQVJSQVlfQlVGRkVSLHQscil9c3RhdGljIGNyZWF0ZVVuaWZvcm0oZSx0LHIpe2lmKGUudHlwZSE9PW8uV0VCR0wyKXRocm93IG5ldyBFcnJvcihcIlVuaWZvcm0gYnVmZmVycyBhcmUgc3VwcG9ydGVkIGluIFdlYkdMMiBvbmx5IVwiKTtyZXR1cm4gbmV3IGMoZSxhLlVOSUZPUk1fQlVGRkVSLHQscil9c3RhdGljIGNyZWF0ZVBpeGVsUGFjayhlLHQ9Zi5TVFJFQU1fUkVBRCxyKXtpZihlLnR5cGUhPT1vLldFQkdMMil0aHJvdyBuZXcgRXJyb3IoXCJQaXhlbCBwYWNrIGJ1ZmZlcnMgYXJlIHN1cHBvcnRlZCBpbiBXZWJHTDIgb25seSFcIik7Y29uc3QgaT1uZXcgYyhlLGEuUElYRUxfUEFDS19CVUZGRVIsdCk7cmV0dXJuIHImJmkuc2V0U2l6ZShyKSxpfXN0YXRpYyBjcmVhdGVQaXhlbFVucGFjayhlLHQ9Zi5TVFJFQU1fRFJBVyxyKXtpZihlLnR5cGUhPT1vLldFQkdMMil0aHJvdyBuZXcgRXJyb3IoXCJQaXhlbCB1bnBhY2sgYnVmZmVycyBhcmUgc3VwcG9ydGVkIGluIFdlYkdMMiBvbmx5IVwiKTtyZXR1cm4gbmV3IGMoZSxhLlBJWEVMX1VOUEFDS19CVUZGRVIsdCxyKX1jb25zdHJ1Y3RvcihlLHQscixpKXt0aGlzLl9jb250ZXh0PWUsdGhpcy5idWZmZXJUeXBlPXQsdGhpcy51c2FnZT1yLHRoaXMuX2dsTmFtZT1udWxsLHRoaXMuX3NpemU9LTEsdGhpcy5faW5kZXhUeXBlPXZvaWQgMCxlLmluc3RhbmNlQ291bnRlci5pbmNyZW1lbnQodS5CdWZmZXJPYmplY3QsdGhpcyksdGhpcy5fZ2xOYW1lPXRoaXMuX2NvbnRleHQuZ2wuY3JlYXRlQnVmZmVyKCksbih0aGlzLl9jb250ZXh0LmdsKSxpJiZ0aGlzLnNldERhdGEoaSl9Z2V0IGdsTmFtZSgpe3JldHVybiB0aGlzLl9nbE5hbWV9Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5fc2l6ZX1nZXQgaW5kZXhUeXBlKCl7cmV0dXJuIHRoaXMuX2luZGV4VHlwZX1nZXQgYnl0ZUxlbmd0aCgpe3JldHVybiB0aGlzLmJ1ZmZlclR5cGU9PT1hLkVMRU1FTlRfQVJSQVlfQlVGRkVSP3RoaXMuX2luZGV4VHlwZT09PV8uVU5TSUdORURfSU5UPzQqdGhpcy5fc2l6ZToyKnRoaXMuX3NpemU6dGhpcy5fc2l6ZX1nZXQgX2lzVkFPQXdhcmUoKXtyZXR1cm4gdGhpcy5idWZmZXJUeXBlPT09YS5FTEVNRU5UX0FSUkFZX0JVRkZFUnx8dGhpcy5idWZmZXJUeXBlPT09YS5BUlJBWV9CVUZGRVJ9ZGlzcG9zZSgpe2lmKHRoaXMuX2NvbnRleHQ/LmdsKXtpZih0aGlzLl9nbE5hbWUpe3RoaXMuX2NvbnRleHQuZ2wuZGVsZXRlQnVmZmVyKHRoaXMuX2dsTmFtZSksdGhpcy5fZ2xOYW1lPW51bGx9dGhpcy5fY29udGV4dC5pbnN0YW5jZUNvdW50ZXIuZGVjcmVtZW50KHUuQnVmZmVyT2JqZWN0LHRoaXMpLHRoaXMuX2NvbnRleHQ9cih0aGlzLl9jb250ZXh0KX1lbHNlIHRoaXMuX2dsTmFtZSYmaC53YXJuKFwiTGVha2VkIFdlYkdMIGJ1ZmZlciBvYmplY3RcIil9c2V0U2l6ZShlLHQ9bnVsbCl7aWYoZTw9MCYmaC5lcnJvcihcIkJ1ZmZlciBzaXplIG5lZWRzIHRvIGJlIHBvc2l0aXZlIVwiKSx0aGlzLmJ1ZmZlclR5cGU9PT1hLkVMRU1FTlRfQVJSQVlfQlVGRkVSJiZudWxsIT10KXN3aXRjaCh0aGlzLl9pbmRleFR5cGU9dCx0KXtjYXNlIF8uVU5TSUdORURfU0hPUlQ6ZSo9MjticmVhaztjYXNlIF8uVU5TSUdORURfSU5UOmUqPTR9dGhpcy5fc2V0QnVmZmVyRGF0YShlKX1zZXREYXRhKGUpe2lmKCFlKXJldHVybjtsZXQgdD1lLmJ5dGVMZW5ndGg7dGhpcy5idWZmZXJUeXBlPT09YS5FTEVNRU5UX0FSUkFZX0JVRkZFUiYmKGkoZSkmJih0Lz0yLHRoaXMuX2luZGV4VHlwZT1fLlVOU0lHTkVEX1NIT1JUKSxzKGUpJiYodC89NCx0aGlzLl9pbmRleFR5cGU9Xy5VTlNJR05FRF9JTlQpKSx0aGlzLl9zZXRCdWZmZXJEYXRhKHQsZSl9X3NldEJ1ZmZlckRhdGEoZSx0PW51bGwpe3RoaXMuX3NpemU9ZTtjb25zdCByPXRoaXMuX2NvbnRleHQuZ2V0Qm91bmRWQU8oKTt0aGlzLl9pc1ZBT0F3YXJlJiZ0aGlzLl9jb250ZXh0LmJpbmRWQU8obnVsbCksdGhpcy5fY29udGV4dC5iaW5kQnVmZmVyKHRoaXMpO2NvbnN0IGk9dGhpcy5fY29udGV4dC5nbDtudWxsIT10P2kuYnVmZmVyRGF0YSh0aGlzLmJ1ZmZlclR5cGUsdCx0aGlzLnVzYWdlKTppLmJ1ZmZlckRhdGEodGhpcy5idWZmZXJUeXBlLGUsdGhpcy51c2FnZSksbihpKSx0aGlzLl9pc1ZBT0F3YXJlJiZ0aGlzLl9jb250ZXh0LmJpbmRWQU8ocil9c2V0U3ViRGF0YShlLHQscixpKXtpZighZSlyZXR1cm47KHQ8MHx8dCplLkJZVEVTX1BFUl9FTEVNRU5UPj10aGlzLmJ5dGVMZW5ndGgpJiZoLmVycm9yKFwib2Zmc2V0IGlzIG91dCBvZiByYW5nZSFcIikscj49aSYmaC5lcnJvcihcImVuZCBtdXN0IGJlIGJpZ2dlciB0aGFuIHN0YXJ0IVwiKSwodCsoaS1yKSkqZS5CWVRFU19QRVJfRUxFTUVOVD50aGlzLmJ5dGVMZW5ndGgmJmguZXJyb3IoXCJBbiBhdHRlbXB0IHRvIHdyaXRlIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBidWZmZXIhXCIpO2NvbnN0IHM9dGhpcy5fY29udGV4dC5nZXRCb3VuZFZBTygpO3RoaXMuX2lzVkFPQXdhcmUmJnRoaXMuX2NvbnRleHQuYmluZFZBTyhudWxsKSx0aGlzLl9jb250ZXh0LmJpbmRCdWZmZXIodGhpcyk7Y29uc3QgYT10aGlzLl9jb250ZXh0LmdsO2lmKHRoaXMuX2NvbnRleHQudHlwZT09PW8uV0VCR0wyKWEuYnVmZmVyU3ViRGF0YSh0aGlzLmJ1ZmZlclR5cGUsdCplLkJZVEVTX1BFUl9FTEVNRU5ULGUscixpLXIpO2Vsc2V7Y29uc3Qgcz0wPT09ciYmaT09PWUubGVuZ3RoP2U6ZS5zdWJhcnJheShyLGkpO2EuYnVmZmVyU3ViRGF0YSh0aGlzLmJ1ZmZlclR5cGUsdCplLkJZVEVTX1BFUl9FTEVNRU5ULHMpfW4oYSksdGhpcy5faXNWQU9Bd2FyZSYmdGhpcy5fY29udGV4dC5iaW5kVkFPKHMpfWdldFN1YkRhdGEoZSx0PTAscixpKXtpZih0aGlzLl9jb250ZXh0LnR5cGUhPT1vLldFQkdMMilyZXR1cm4gdm9pZCBoLmVycm9yKFwiR2V0IGJ1ZmZlciBzdWJkYXRhIGlzIHN1cHBvcnRlZCBpbiBXZWJHTDIgb25seSFcIik7aWYocjwwfHxpPDApcmV0dXJuIHZvaWQgaC5lcnJvcihcIlByb2JsZW0gZ2V0dGluZyBzdWJkYXRhOiBvZmZzZXQgYW5kIGxlbmd0aCB3ZXJlIGxlc3MgdGhhbiB6ZXJvIVwiKTtjb25zdCBzPUUoZSk/ZS5CWVRFU19QRVJfRUxFTUVOVDoxO2lmKHMqKChyPz8wKSsoaT8/MCkpPmUuYnl0ZUxlbmd0aClyZXR1cm4gdm9pZCBoLmVycm9yKFwiUHJvYmxlbSBnZXR0aW5nIHN1YmRhdGE6IG9mZnNldCBhbmQgbGVuZ3RoIGV4Y2VlZGVkIGRlc3RpbmF0aW9uIHNpemUhXCIpO3QrcyooaT8/MCk+dGhpcy5ieXRlTGVuZ3RoJiZoLndhcm4oXCJQb3RlbnRpYWwgcHJvYmxlbSBnZXR0aW5nIHN1YmRhdGE6IHJlcXVlc3RlZCBkYXRhIGV4Y2VlZHMgYnVmZmVyIHNpemUhXCIpO2NvbnN0IG49dGhpcy5fY29udGV4dC5nbDt0aGlzLl9jb250ZXh0LmJpbmRCdWZmZXIodGhpcyxhLkNPUFlfUkVBRF9CVUZGRVIpLG4uZ2V0QnVmZmVyU3ViRGF0YShhLkNPUFlfUkVBRF9CVUZGRVIsdCxlLHIsaSksdGhpcy5fY29udGV4dC51bmJpbmRCdWZmZXIoYS5DT1BZX1JFQURfQlVGRkVSKX1hc3luYyBnZXRTdWJEYXRhQXN5bmMoZSx0PTAscixpKXt0aGlzLl9jb250ZXh0LnR5cGU9PT1vLldFQkdMMj8oYXdhaXQgdGhpcy5fY29udGV4dC5jbGllbnRXYWl0QXN5bmMoKSx0aGlzLmdldFN1YkRhdGEoZSx0LHIsaSkpOmguZXJyb3IoXCJHZXQgYnVmZmVyIHN1YmRhdGEgaXMgc3VwcG9ydGVkIGluIFdlYkdMMiBvbmx5IVwiKX19ZnVuY3Rpb24gRSh0KXtyZXR1cm4gZSh0KX1leHBvcnR7YyBhcyBCdWZmZXJPYmplY3R9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydFwiLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnQgdCBmcm9tXCIuLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtkaXNwb3NlTWF5YmUgYXMgZX1mcm9tXCIuLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e0J1ZmZlck9iamVjdCBhcyBpfWZyb21cIi4vQnVmZmVyT2JqZWN0LmpzXCI7aW1wb3J0e3dlYmdsRGVidWdFbmFibGVkIGFzIHJ9ZnJvbVwiLi9jaGVja1dlYkdMRXJyb3IuanNcIjtpbXBvcnR7Q29udGV4dFR5cGUgYXMgc31mcm9tXCIuL2NvbnRleHRVdGlscy5qc1wiO2ltcG9ydHtSZXNvdXJjZVR5cGUgYXMgaCxDb2xvckF0dGFjaG1lbnQgYXMgbixSZW5kZXJidWZmZXJGb3JtYXQgYXMgbyxQaXhlbEZvcm1hdCBhcyBjLFBpeGVsVHlwZSBhcyBhLERlcHRoU3RlbmNpbEF0dGFjaG1lbnQgYXMgdSxGcmFtZWJ1ZmZlclRhcmdldCBhcyBfLFRleHR1cmVUeXBlIGFzIGYsVXNhZ2UgYXMgbCxCdWZmZXJUeXBlIGFzIFR9ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtHTE9iamVjdFR5cGUgYXMgZH1mcm9tXCIuL0dMT2JqZWN0VHlwZS5qc1wiO2ltcG9ydHtSZW5kZXJidWZmZXIgYXMgbX1mcm9tXCIuL1JlbmRlcmJ1ZmZlci5qc1wiO2ltcG9ydHtUZXh0dXJlIGFzIHB9ZnJvbVwiLi9UZXh0dXJlLmpzXCI7Y29uc3QgRT10LmdldExvZ2dlcihcImVzcmkudmlld3Mud2ViZ2wuRnJhbWVidWZmZXJPYmplY3RcIik7Y2xhc3MgeHtjb25zdHJ1Y3Rvcih0LGUsaT1udWxsKXt0aGlzLl9jb250ZXh0PXQsdGhpcy5fZ2xOYW1lPW51bGwsdGhpcy5fY29sb3JBdHRhY2htZW50cz1uZXcgTWFwLHRoaXMuX2RlcHRoQnVmZmVyPW51bGwsdGhpcy5fc3RlbmNpbEJ1ZmZlcj1udWxsLHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmU9bnVsbCx0aGlzLl9pbml0aWFsaXplZD0hMSx0Lmluc3RhbmNlQ291bnRlci5pbmNyZW1lbnQoaC5GcmFtZWJ1ZmZlck9iamVjdCx0aGlzKTtjb25zdCByPWcoZSk/ZTpuZXcgcCh0aGlzLl9jb250ZXh0LGUpO2lmKHRoaXMuX2NvbG9yQXR0YWNobWVudHMuc2V0KG4uQ09MT1JfQVRUQUNITUVOVDAsciksdGhpcy5fdmFsaWRhdGVUZXh0dXJlRGVzY3JpcHRvcihyLmRlc2NyaXB0b3IpLHRoaXMuX3ZhbGlkYXRlQ29sb3JBdHRhY2htZW50UG9pbnQobi5DT0xPUl9BVFRBQ0hNRU5UMCksbnVsbCE9aSlpZihiKGkpKXRoaXMuX2NvbnRleHQuY2FwYWJpbGl0aWVzLmRlcHRoVGV4dHVyZXx8Y29uc29sZS5lcnJvcihcIlNldHRpbmcgdGhlIGRlcHRoL3N0ZW5jaWwgdGV4dHVyZSBhcyBhbiBhdHRhY2htZW50IHJlcXVpcmVzIFdFQkdMX2RlcHRoX3RleHR1cmUgb3IgV2ViR0wyXCIpLHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmU9ZyhpKT9pOm5ldyBwKHRoaXMuX2NvbnRleHQsaSksdGhpcy5fdmFsaWRhdGVUZXh0dXJlRGVzY3JpcHRvcih0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlLmRlc2NyaXB0b3IpO2Vsc2V7Y29uc3QgdD1BKGkpP2k6bmV3IG0odGhpcy5fY29udGV4dCxpKSxlPXQuZGVzY3JpcHRvcjtlLmludGVybmFsRm9ybWF0PT09by5TVEVOQ0lMX0lOREVYOD90aGlzLl9zdGVuY2lsQnVmZmVyPXQ6dGhpcy5fZGVwdGhCdWZmZXI9dCx0aGlzLl92YWxpZGF0ZVJlbmRlckJ1ZmZlckRlc2NyaXB0b3IoZSl9fWRpc3Bvc2UoKXtpZigwPT09dGhpcy5fY29sb3JBdHRhY2htZW50cy5zaXplJiYhdGhpcy5fZ2xOYW1lKXJldHVybjtjb25zdCB0PXRoaXMuX2NvbnRleHQuZ2V0Qm91bmRGcmFtZWJ1ZmZlck9iamVjdCgpO2lmKHRoaXMuX2NvbG9yQXR0YWNobWVudHMuZm9yRWFjaCgoKHQsZSk9PnRoaXMuZGV0YWNoQ29sb3JUZXh0dXJlKGUpPy5kaXNwb3NlKCkpKSx0aGlzLmRldGFjaERlcHRoU3RlbmNpbEJ1ZmZlcigpPy5kaXNwb3NlKCksdGhpcy5kZXRhY2hEZXB0aFN0ZW5jaWxUZXh0dXJlKCk/LmRpc3Bvc2UoKSx0aGlzLl9nbE5hbWUpe3RoaXMuX2NvbnRleHQuZ2wuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5fZ2xOYW1lKSx0aGlzLl9nbE5hbWU9bnVsbH10aGlzLl9jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlcih0KSx0aGlzLl9jb250ZXh0Lmluc3RhbmNlQ291bnRlci5kZWNyZW1lbnQoaC5GcmFtZWJ1ZmZlck9iamVjdCx0aGlzKX1nZXQgZ2xOYW1lKCl7cmV0dXJuIHRoaXMuX2dsTmFtZX1nZXQgY29sb3JUZXh0dXJlKCl7cmV0dXJuIHRoaXMuX2NvbG9yQXR0YWNobWVudHMuZ2V0KG4uQ09MT1JfQVRUQUNITUVOVDApfWdldCBkZXB0aFN0ZW5jaWxBdHRhY2htZW50KCl7cmV0dXJuIHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmV8fHRoaXMuX2RlcHRoQnVmZmVyfHx0aGlzLl9zdGVuY2lsQnVmZmVyfWdldCBkZXB0aFN0ZW5jaWxUZXh0dXJlKCl7cmV0dXJuIHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmV9Z2V0IHdpZHRoKCl7Y29uc3QgdD10aGlzLl9jb2xvckF0dGFjaG1lbnRzLmdldChuLkNPTE9SX0FUVEFDSE1FTlQwKTtyZXR1cm4gdD8uZGVzY3JpcHRvcj8ud2lkdGg/PzB9Z2V0IGhlaWdodCgpe2NvbnN0IHQ9dGhpcy5fY29sb3JBdHRhY2htZW50cy5nZXQobi5DT0xPUl9BVFRBQ0hNRU5UMCk7cmV0dXJuIHQ/LmRlc2NyaXB0b3I/LmhlaWdodD8/MH1nZXQgZ3B1TWVtb3J5VXNhZ2UoKXtyZXR1cm5bLi4udGhpcy5fY29sb3JBdHRhY2htZW50c10ucmVkdWNlKCgodCxbZSxpXSk9PnQraS5ncHVNZW1vcnlVc2FnZSksdGhpcy5kZXB0aFN0ZW5jaWxBdHRhY2htZW50Py5ncHVNZW1vcnlVc2FnZT8/MCl9Z2V0Q29sb3JUZXh0dXJlKHQpe2NvbnN0IGU9dGhpcy5fY29sb3JBdHRhY2htZW50cy5nZXQodCk7cmV0dXJuIGUmJmcoZSk/ZTpudWxsfWF0dGFjaENvbG9yVGV4dHVyZSh0LGU9bi5DT0xPUl9BVFRBQ0hNRU5UMCl7aWYoIXQpcmV0dXJuO3RoaXMuX3ZhbGlkYXRlQ29sb3JBdHRhY2htZW50UG9pbnQoZSk7Y29uc3QgaT10LmRlc2NyaXB0b3I7dGhpcy5fdmFsaWRhdGVUZXh0dXJlRGVzY3JpcHRvcihpKSx0aGlzLmRldGFjaENvbG9yVGV4dHVyZShlKT8uZGlzcG9zZSgpLHRoaXMuX2luaXRpYWxpemVkJiYodGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyksdGhpcy5fZnJhbWVidWZmZXJUZXh0dXJlMkQodC5nbE5hbWUsZSkpLHRoaXMuX2NvbG9yQXR0YWNobWVudHMuc2V0KGUsdCl9ZGV0YWNoQ29sb3JUZXh0dXJlKHQ9bi5DT0xPUl9BVFRBQ0hNRU5UMCl7Y29uc3QgZT10aGlzLl9jb2xvckF0dGFjaG1lbnRzLmdldCh0KTtpZihlKXJldHVybiB0aGlzLl9pbml0aWFsaXplZCYmKHRoaXMuX2NvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMpLHRoaXMuX2ZyYW1lYnVmZmVyVGV4dHVyZTJEKG51bGwsdCkpLHRoaXMuX2NvbG9yQXR0YWNobWVudHMuZGVsZXRlKHQpLGV9c2V0Q29sb3JUZXh0dXJlVGFyZ2V0KHQsZT1uLkNPTE9SX0FUVEFDSE1FTlQwKXtjb25zdCBpPXRoaXMuX2NvbG9yQXR0YWNobWVudHMuZ2V0KGUpO2kmJnRoaXMuX2ZyYW1lYnVmZmVyVGV4dHVyZTJEKGkuZ2xOYW1lLGUsdCl9YXR0YWNoRGVwdGhTdGVuY2lsKHQpe2lmKHQpc3dpdGNoKHQudHlwZSl7Y2FzZSBkLlRleHR1cmU6cmV0dXJuIHRoaXMuX2F0dGFjaERlcHRoU3RlbmNpbFRleHR1cmUodCk7Y2FzZSBkLlJlbmRlckJ1ZmZlcjpyZXR1cm4gdGhpcy5fYXR0YWNoRGVwdGhTdGVuY2lsQnVmZmVyKHQpfX1fYXR0YWNoRGVwdGhTdGVuY2lsVGV4dHVyZSh0KXtpZihudWxsPT10KXJldHVybjtjb25zdCBlPXQuZGVzY3JpcHRvcjtlLnBpeGVsRm9ybWF0IT09Yy5ERVBUSF9TVEVOQ0lMJiZlLnBpeGVsRm9ybWF0IT09Yy5ERVBUSDI0X1NURU5DSUw4JiZjb25zb2xlLmVycm9yKFwiRGVwdGgvU3RlbmNpbCB0ZXh0dXJlIG11c3QgaGF2ZSBhIHBpeGVsIHR5cGUgb2YgREVQVEhfU1RFTkNJTCFcIiksZS5kYXRhVHlwZSE9PWEuVU5TSUdORURfSU5UXzI0XzgmJmNvbnNvbGUuZXJyb3IoXCJEZXB0aC9TdGVuY2lsIHRleHR1cmUgbXVzdCBoYXZlIGRhdGEgdHlwZSBvZiBVTlNJR05FRF9JTlRfMjRfOCFcIiksdGhpcy5fY29udGV4dC5jYXBhYmlsaXRpZXMuZGVwdGhUZXh0dXJlfHxjb25zb2xlLmVycm9yKFwiRXh0ZW5zaW9uIFdFQkdMX2RlcHRoX3RleHR1cmUgaXNuJ3Qgc3VwcG9ydGVkIHRoZXJlZm9yZSBpdCBpcyBubyBwb3NzaWJsZSB0byBzZXQgdGhlIGRlcHRoL3N0ZW5jaWwgdGV4dHVyZSFcIiksdGhpcy5fdmFsaWRhdGVUZXh0dXJlRGVzY3JpcHRvcihlKSx0aGlzLl9kaXNwb3NlRGVwdGhTdGVuY2lsQXR0YWNobWVudHMoKSx0aGlzLl9pbml0aWFsaXplZCYmKHRoaXMuX2NvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMpLHRoaXMuX2ZyYW1lYnVmZmVyVGV4dHVyZTJEKHQuZ2xOYW1lLHUpKSx0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlPy5kaXNwb3NlKCksdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZT10fWRldGFjaERlcHRoU3RlbmNpbFRleHR1cmUoKXtjb25zdCB0PXRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmU7cmV0dXJuIHQmJnRoaXMuX2luaXRpYWxpemVkJiYodGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyksdGhpcy5fZnJhbWVidWZmZXJUZXh0dXJlMkQobnVsbCx1KSksdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZT1udWxsLHR9X2F0dGFjaERlcHRoU3RlbmNpbEJ1ZmZlcih0KXtpZihudWxsPT10KXJldHVybjtjb25zdCBlPXQuZGVzY3JpcHRvcjtpZihlLmludGVybmFsRm9ybWF0IT09by5ERVBUSF9TVEVOQ0lMJiZlLmludGVybmFsRm9ybWF0IT09by5ERVBUSF9DT01QT05FTlQxNiYmY29uc29sZS5lcnJvcihcIkRlcHRoL1N0ZW5jaWwgYnVmZmVyIG11c3QgaGF2ZSBjb3JyZWN0IGludGVybmFsRm9ybWF0XCIpLHRoaXMuX3ZhbGlkYXRlUmVuZGVyQnVmZmVyRGVzY3JpcHRvcihlKSx0aGlzLl9kaXNwb3NlRGVwdGhTdGVuY2lsQXR0YWNobWVudHMoKSx0aGlzLl9pbml0aWFsaXplZCl7dGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyk7Y29uc3QgaT10aGlzLl9jb250ZXh0LmdsLHI9dGhpcy5fZ2V0R0xBdHRhY2htZW50UG9pbnQoZSk7aS5mcmFtZWJ1ZmZlclJlbmRlcmJ1ZmZlcihfLkZSQU1FQlVGRkVSLHIsaS5SRU5ERVJCVUZGRVIsdC5nbE5hbWUpfXRoaXMuX2RlcHRoQnVmZmVyPy5kaXNwb3NlKCksdGhpcy5fZGVwdGhCdWZmZXI9dH1kZXRhY2hEZXB0aFN0ZW5jaWxCdWZmZXIoKXtjb25zdCB0PXRoaXMuX2RlcHRoQnVmZmVyO2lmKHQmJnRoaXMuX2luaXRpYWxpemVkKXt0aGlzLl9jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlcih0aGlzKTtjb25zdCBlPXRoaXMuX2NvbnRleHQuZ2wsaT10aGlzLl9nZXRHTEF0dGFjaG1lbnRQb2ludCh0LmRlc2NyaXB0b3IpO2UuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoXy5GUkFNRUJVRkZFUixpLGUuUkVOREVSQlVGRkVSLG51bGwpLHQuZGlzcG9zZSgpfXJldHVybiB0aGlzLl9kZXB0aEJ1ZmZlcj1udWxsLHR9Y29weVRvVGV4dHVyZSh0LGUsaSxyLHMsaCxuKXsodDwwfHxlPDB8fHM8MHx8aDwwKSYmY29uc29sZS5lcnJvcihcIk9mZnNldHMgY2Fubm90IGJlIG5lZ2F0aXZlIVwiKSwoaTw9MHx8cjw9MCkmJmNvbnNvbGUuZXJyb3IoXCJDb3B5IHdpZHRoIGFuZCBoZWlnaHQgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybyFcIik7Y29uc3Qgbz1uLmRlc2NyaXB0b3I7bi5kZXNjcmlwdG9yLnRhcmdldCE9PWYuVEVYVFVSRV8yRCYmY29uc29sZS5lcnJvcihcIlRleHR1cmUgdGFyZ2V0IG11c3QgYmUgVEVYVFVSRV8yRCFcIiksKG51bGw9PW8/LndpZHRofHxudWxsPT1vPy5oZWlnaHR8fHQraT50aGlzLndpZHRofHxlK3I+dGhpcy5oZWlnaHR8fHMraT5vLndpZHRofHxoK3I+by5oZWlnaHQpJiZjb25zb2xlLmVycm9yKFwiQmFkIGRpbWVuc2lvbnMsIHRoZSBjdXJyZW50IGlucHV0IHZhbHVlcyB3aWxsIGF0dGVtcHQgdG8gcmVhZCBvciBjb3B5IG91dCBvZiBib3VuZHMhXCIpO2NvbnN0IGM9dGhpcy5fY29udGV4dCxhPWMuYmluZFRleHR1cmUobixwLlRFWFRVUkVfVU5JVF9GT1JfVVBEQVRFUyk7Yy5zZXRBY3RpdmVUZXh0dXJlKHAuVEVYVFVSRV9VTklUX0ZPUl9VUERBVEVTKSxjLmJpbmRGcmFtZWJ1ZmZlcih0aGlzKSxjLmdsLmNvcHlUZXhTdWJJbWFnZTJEKGYuVEVYVFVSRV8yRCwwLHMsaCx0LGUsaSxyKSxjLmJpbmRUZXh0dXJlKGEscC5URVhUVVJFX1VOSVRfRk9SX1VQREFURVMpfXJlYWRQaXhlbHModCxlLGkscixzLGgsbil7KGk8PTB8fHI8PTApJiZjb25zb2xlLmVycm9yKFwiQ29weSB3aWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8hXCIpLG58fGNvbnNvbGUuZXJyb3IoXCJUYXJnZXQgbWVtb3J5IGlzIG5vdCBpbml0aWFsaXplZCFcIiksdGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyk7dGhpcy5fY29udGV4dC5nbC5yZWFkUGl4ZWxzKHQsZSxpLHIscyxoLG4pfWFzeW5jIHJlYWRQaXhlbHNBc3luYyh0LGUsaCxuLG8sYyxhKXtpZih0aGlzLl9jb250ZXh0LnR5cGUhPT1zLldFQkdMMilyZXR1cm4gcigpJiZjb25zb2xlLndhcm4oXCJBdHRlbXB0aW5nIHRvIHJlYWQgcGl4ZWxzIHVzaW5nIHBpeGVsIGJ1ZmZlciBvYmplY3Qgd2l0aG91dCBXZWJHTDJcIiksdm9pZCB0aGlzLnJlYWRQaXhlbHModCxlLGgsbixvLGMsYSk7Y29uc3QgdT10aGlzLl9jb250ZXh0LmdsLF89aS5jcmVhdGVQaXhlbFBhY2sodGhpcy5fY29udGV4dCxsLlNUUkVBTV9SRUFELGEuYnl0ZUxlbmd0aCk7dGhpcy5fY29udGV4dC5iaW5kQnVmZmVyKF8pLHRoaXMuX2NvbnRleHQuYmluZEZyYW1lYnVmZmVyKHRoaXMpLHUucmVhZFBpeGVscyh0LGUsaCxuLG8sYywwKSx0aGlzLl9jb250ZXh0LnVuYmluZEJ1ZmZlcihULlBJWEVMX1BBQ0tfQlVGRkVSKSxhd2FpdCBfLmdldFN1YkRhdGFBc3luYyhhKSxfLmRpc3Bvc2UoKX1yZXNpemUodCxlKXtpZih0aGlzLndpZHRoPT09dCYmdGhpcy5oZWlnaHQ9PT1lKXJldHVybjtjb25zdCBpPXt3aWR0aDp0LGhlaWdodDplfTtSKGksdGhpcy5fY29udGV4dC5wYXJhbWV0ZXJzLm1heFRleHR1cmVTaXplKSx0aGlzLl9jb2xvckF0dGFjaG1lbnRzLmZvckVhY2goKHQ9PnQucmVzaXplKGkud2lkdGgsaS5oZWlnaHQpKSksdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZT8ucmVzaXplKGkud2lkdGgsaS5oZWlnaHQpLHRoaXMuX2luaXRpYWxpemVkJiYoUihpLHRoaXMuX2NvbnRleHQucGFyYW1ldGVycy5tYXhSZW5kZXJidWZmZXJTaXplKSx0aGlzLl9kZXB0aEJ1ZmZlcj8ucmVzaXplKGkud2lkdGgsaS5oZWlnaHQpLHRoaXMuX3N0ZW5jaWxCdWZmZXI/LnJlc2l6ZShpLndpZHRoLGkuaGVpZ2h0KSx0aGlzLl9jb250ZXh0LmdldEJvdW5kRnJhbWVidWZmZXJPYmplY3QoKT09PXRoaXMmJnRoaXMuX2NvbnRleHQuYmluZEZyYW1lYnVmZmVyKG51bGwpLHRoaXMuX2luaXRpYWxpemVkPSExKX1pbml0aWFsaXplQW5kQmluZCh0PV8uRlJBTUVCVUZGRVIpe2NvbnN0IGU9dGhpcy5fY29udGV4dC5nbDtpZih0aGlzLl9pbml0aWFsaXplZClyZXR1cm4gdm9pZCBlLmJpbmRGcmFtZWJ1ZmZlcih0LHRoaXMuZ2xOYW1lKTt0aGlzLl9nbE5hbWUmJmUuZGVsZXRlRnJhbWVidWZmZXIodGhpcy5fZ2xOYW1lKTtjb25zdCBpPWUuY3JlYXRlRnJhbWVidWZmZXIoKTtlLmJpbmRGcmFtZWJ1ZmZlcih0LGkpLHRoaXMuX2NvbG9yQXR0YWNobWVudHMuZm9yRWFjaCgoKGUsaSk9PnRoaXMuX2ZyYW1lYnVmZmVyVGV4dHVyZTJEKGUuZ2xOYW1lLGksTihlKSx0KSkpO2NvbnN0IHM9dGhpcy5fZGVwdGhCdWZmZXJ8fHRoaXMuX3N0ZW5jaWxCdWZmZXI7aWYocyl7Y29uc3QgaT10aGlzLl9nZXRHTEF0dGFjaG1lbnRQb2ludChzLmRlc2NyaXB0b3IpO2UuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIodCxpLGUuUkVOREVSQlVGRkVSLHMuZ2xOYW1lKX1lbHNlIHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmUmJnRoaXMuX2ZyYW1lYnVmZmVyVGV4dHVyZTJEKHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmUuZ2xOYW1lLGUuREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5ULE4odGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZSksdCk7aWYocigpKXtlLmNoZWNrRnJhbWVidWZmZXJTdGF0dXModCkhPT1lLkZSQU1FQlVGRkVSX0NPTVBMRVRFJiZjb25zb2xlLmVycm9yKFwiRnJhbWVidWZmZXIgaXMgaW5jb21wbGV0ZSFcIil9dGhpcy5fZ2xOYW1lPWksdGhpcy5faW5pdGlhbGl6ZWQ9ITB9X2ZyYW1lYnVmZmVyVGV4dHVyZTJEKHQsZT1uLkNPTE9SX0FUVEFDSE1FTlQwLGk9Zi5URVhUVVJFXzJELHI9Xy5GUkFNRUJVRkZFUixzPTApe3RoaXMuX2NvbnRleHQuZ2wuZnJhbWVidWZmZXJUZXh0dXJlMkQocixlLGksdCxzKX1fZGlzcG9zZURlcHRoU3RlbmNpbEF0dGFjaG1lbnRzKCl7Y29uc3QgdD10aGlzLl9jb250ZXh0LmdsO2lmKHRoaXMuX2RlcHRoQnVmZmVyKXtpZih0aGlzLl9pbml0aWFsaXplZCl7dGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyk7Y29uc3QgZT10aGlzLl9nZXRHTEF0dGFjaG1lbnRQb2ludCh0aGlzLl9kZXB0aEJ1ZmZlci5kZXNjcmlwdG9yKTt0LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKF8uRlJBTUVCVUZGRVIsZSx0LlJFTkRFUkJVRkZFUixudWxsKX10aGlzLl9kZXB0aEJ1ZmZlcj1lKHRoaXMuX2RlcHRoQnVmZmVyKX10aGlzLl9zdGVuY2lsQnVmZmVyJiYodGhpcy5faW5pdGlhbGl6ZWQmJih0aGlzLl9jb250ZXh0LmJpbmRGcmFtZWJ1ZmZlcih0aGlzKSx0LmZyYW1lYnVmZmVyUmVuZGVyYnVmZmVyKF8uRlJBTUVCVUZGRVIsdC5TVEVOQ0lMX0FUVEFDSE1FTlQsdC5SRU5ERVJCVUZGRVIsbnVsbCkpLHRoaXMuX3N0ZW5jaWxCdWZmZXI9ZSh0aGlzLl9zdGVuY2lsQnVmZmVyKSksdGhpcy5fZGVwdGhTdGVuY2lsVGV4dHVyZSYmKHRoaXMuX2luaXRpYWxpemVkJiYodGhpcy5fY29udGV4dC5iaW5kRnJhbWVidWZmZXIodGhpcyksdGhpcy5fZnJhbWVidWZmZXJUZXh0dXJlMkQobnVsbCx0LkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCkpLHRoaXMuX2RlcHRoU3RlbmNpbFRleHR1cmU9ZSh0aGlzLl9kZXB0aFN0ZW5jaWxUZXh0dXJlKSl9X3ZhbGlkYXRlVGV4dHVyZURlc2NyaXB0b3IodCl7dC50YXJnZXQhPT1mLlRFWFRVUkVfMkQmJnQudGFyZ2V0IT09Zi5URVhUVVJFX0NVQkVfTUFQJiZjb25zb2xlLmVycm9yKFwiVGV4dHVyZSB0eXBlIG11c3QgYmUgVEVYVFVSRV8yRCBvciBURVhUVVJFX0NVQkVfTUFQIVwiKSxSKHQsdGhpcy5fY29udGV4dC5wYXJhbWV0ZXJzLm1heFRleHR1cmVTaXplKSx0aGlzLl92YWxpZGF0ZUJ1ZmZlckRpbWVuc2lvbnModCl9X3ZhbGlkYXRlUmVuZGVyQnVmZmVyRGVzY3JpcHRvcih0KXtSKHQsdGhpcy5fY29udGV4dC5wYXJhbWV0ZXJzLm1heFJlbmRlcmJ1ZmZlclNpemUpLHRoaXMuX3ZhbGlkYXRlQnVmZmVyRGltZW5zaW9ucyh0KX1fdmFsaWRhdGVCdWZmZXJEaW1lbnNpb25zKHQpe3Qud2lkdGg8PTAmJih0LndpZHRoPXRoaXMud2lkdGgpLHQuaGVpZ2h0PD0wJiYodC5oZWlnaHQ9dGhpcy5oZWlnaHQpLHRoaXMud2lkdGg+MCYmdGhpcy5oZWlnaHQ+MCYmKHRoaXMud2lkdGg9PT10LndpZHRoJiZ0aGlzLmhlaWdodD09PXQuaGVpZ2h0fHxjb25zb2xlLmVycm9yKFwiQXR0YWNobWVudCBzaXplIG11c3QgbWF0Y2ggZnJhbWVidWZmZXIgc2l6ZSFcIikpfV9nZXRHTEF0dGFjaG1lbnRQb2ludCh0KXtzd2l0Y2godC5pbnRlcm5hbEZvcm1hdCl7Y2FzZSBvLkRFUFRIX0NPTVBPTkVOVDE2OmNhc2Ugby5ERVBUSF9DT01QT05FTlQyNDpjYXNlIG8uREVQVEhfQ09NUE9ORU5UMzJGOnJldHVybiB0aGlzLl9jb250ZXh0LmdsLkRFUFRIX0FUVEFDSE1FTlQ7Y2FzZSBvLkRFUFRIMjRfU1RFTkNJTDg6Y2FzZSBvLkRFUFRIMzJGX1NURU5DSUw4OmNhc2Ugby5ERVBUSF9TVEVOQ0lMOnJldHVybiB0aGlzLl9jb250ZXh0LmdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVDtjYXNlIG8uU1RFTkNJTF9JTkRFWDg6cmV0dXJuIHRoaXMuX2NvbnRleHQuZ2wuU1RFTkNJTF9BVFRBQ0hNRU5UfX1fdmFsaWRhdGVDb2xvckF0dGFjaG1lbnRQb2ludChlKXtpZigtMT09PXguX01BWF9DT0xPUl9BVFRBQ0hNRU5UUyl7Y29uc3QgdD10aGlzLl9jb250ZXh0LmNhcGFiaWxpdGllcy5kcmF3QnVmZmVycztpZih0KXtjb25zdCBlPXRoaXMuX2NvbnRleHQuZ2w7eC5fTUFYX0NPTE9SX0FUVEFDSE1FTlRTPWUuZ2V0UGFyYW1ldGVyKHQuTUFYX0NPTE9SX0FUVEFDSE1FTlRTKX1lbHNlIHguX01BWF9DT0xPUl9BVFRBQ0hNRU5UUz0xfWNvbnN0IGk9ZS1uLkNPTE9SX0FUVEFDSE1FTlQwO2krMT54Ll9NQVhfQ09MT1JfQVRUQUNITUVOVFMmJnQuZ2V0TG9nZ2VyKFwiZXNyaS52aWV3cy53ZWJnbC5GcmFtZUJ1ZmZlck9iamVjdFwiKS5lcnJvcihcImVzcmkuRnJhbWVCdWZmZXJPYmplY3RcIixgaWxsZWdhbCBhdHRhY2htZW50IHBvaW50IGZvciBjb2xvciBhdHRhY2htZW50OiAke2krMX0uIEltcGxlbWVudGF0aW9uIHN1cHBvcnRzIHVwIHRvICR7eC5fTUFYX0NPTE9SX0FUVEFDSE1FTlRTfSBjb2xvciBhdHRhY2htZW50c2ApfX1mdW5jdGlvbiBnKHQpe3JldHVybiBudWxsIT10JiZcInR5cGVcImluIHQmJnQudHlwZT09PWQuVGV4dHVyZX1mdW5jdGlvbiBBKHQpe3JldHVybiBudWxsIT10JiZcInR5cGVcImluIHQmJnQudHlwZT09PWQuUmVuZGVyQnVmZmVyfWZ1bmN0aW9uIGIodCl7cmV0dXJuIGcodCl8fG51bGwhPXQmJlwicGl4ZWxGb3JtYXRcImluIHR9ZnVuY3Rpb24gUih0LGUpe2NvbnN0IGk9TWF0aC5tYXgodC53aWR0aCx0LmhlaWdodCk7aWYoaT5lKXtFLndhcm4oYFJlc2l6aW5nIEZCTyBhdHRhY2htZW50IHNpemUgJHt0LndpZHRofXgke3QuaGVpZ2h0fSB0byBkZXZpY2UgbGltaXQgJHtlfWApO2NvbnN0IHI9ZS9pO3JldHVybiB0LndpZHRoPU1hdGgucm91bmQodC53aWR0aCpyKSx0LmhlaWdodD1NYXRoLnJvdW5kKHQuaGVpZ2h0KnIpLCExfXJldHVybiEwfWZ1bmN0aW9uIE4odCl7cmV0dXJuIHQuZGVzY3JpcHRvci50YXJnZXQ9PT1mLlRFWFRVUkVfQ1VCRV9NQVA/Zi5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1g6Zi5URVhUVVJFXzJEfXguX01BWF9DT0xPUl9BVFRBQ0hNRU5UUz0tMTtleHBvcnR7eCBhcyBGcmFtZWJ1ZmZlck9iamVjdCxSIGFzIGVuc3VyZUF0dGFjaG1lbnRNYXhTaXplfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7bnVsbGlmeU5vbk51bGxhYmxlRm9yRGlzcG9zZSBhcyBlfWZyb21cIi4uLy4uL2NvcmUvbWF5YmUuanNcIjtpbXBvcnR7Q29udGV4dFR5cGUgYXMgdH1mcm9tXCIuL2NvbnRleHRVdGlscy5qc1wiO2ltcG9ydHtSZXNvdXJjZVR5cGUgYXMgcn1mcm9tXCIuL2VudW1zLmpzXCI7aW1wb3J0e0dMT2JqZWN0VHlwZSBhcyBzfWZyb21cIi4vR0xPYmplY3RUeXBlLmpzXCI7aW1wb3J0e2VzdGltYXRlTWVtb3J5IGFzIGl9ZnJvbVwiLi9SZW5kZXJidWZmZXJEZXNjcmlwdG9yLmpzXCI7Y2xhc3Mgbntjb25zdHJ1Y3RvcihlLGkpe3RoaXMuX2NvbnRleHQ9ZSx0aGlzLl9kZXNjcmlwdG9yPWksdGhpcy50eXBlPXMuUmVuZGVyQnVmZmVyLHRoaXMuX2NvbnRleHQuaW5zdGFuY2VDb3VudGVyLmluY3JlbWVudChyLlJlbmRlcmJ1ZmZlcix0aGlzKTtjb25zdCBuPXRoaXMuX2NvbnRleHQuZ2w7dGhpcy5nbE5hbWU9bi5jcmVhdGVSZW5kZXJidWZmZXIoKSx0aGlzLl9jb250ZXh0LmJpbmRSZW5kZXJidWZmZXIodGhpcyk7Y29uc3R7d2lkdGg6byxoZWlnaHQ6aCxpbnRlcm5hbEZvcm1hdDpjLG11bHRpc2FtcGxlZDpmfT1pO2lmKGYpe2lmKHRoaXMuX2NvbnRleHQudHlwZSE9PXQuV0VCR0wyKXRocm93IG5ldyBFcnJvcihcIk11bHRpc2FtcGxlZCByZW5kZXJidWZmZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGluIFdlYkdMMSFcIik7bi5yZW5kZXJidWZmZXJTdG9yYWdlTXVsdGlzYW1wbGUobi5SRU5ERVJCVUZGRVIsdGhpcy5zYW1wbGVzLGMsbyxoKX1lbHNlIG4ucmVuZGVyYnVmZmVyU3RvcmFnZShuLlJFTkRFUkJVRkZFUixjLG8saCl9Z2V0IGRlc2NyaXB0b3IoKXtyZXR1cm4gdGhpcy5fZGVzY3JpcHRvcn1nZXQgc2FtcGxlcygpe2NvbnN0IGU9dGhpcy5fZGVzY3JpcHRvci5zYW1wbGVzLHQ9dGhpcy5fY29udGV4dC5wYXJhbWV0ZXJzLm1heFNhbXBsZXM7cmV0dXJuIGU/TWF0aC5taW4oZSx0KTp0fWdldCBncHVNZW1vcnlVc2FnZSgpe3JldHVybiBpKHRoaXMuX2Rlc2NyaXB0b3IpfXJlc2l6ZShlLHQpe2NvbnN0IHI9dGhpcy5fZGVzY3JpcHRvcjtpZihyLndpZHRoPT09ZSYmci5oZWlnaHQ9PT10KXJldHVybjtyLndpZHRoPWUsci5oZWlnaHQ9dDtjb25zdCBzPXRoaXMuX2NvbnRleHQuZ2w7aWYodGhpcy5fY29udGV4dC5iaW5kUmVuZGVyYnVmZmVyKHRoaXMpLHIubXVsdGlzYW1wbGVkKXtzLnJlbmRlcmJ1ZmZlclN0b3JhZ2VNdWx0aXNhbXBsZShzLlJFTkRFUkJVRkZFUix0aGlzLnNhbXBsZXMsci5pbnRlcm5hbEZvcm1hdCxyLndpZHRoLHIuaGVpZ2h0KX1lbHNlIHMucmVuZGVyYnVmZmVyU3RvcmFnZShzLlJFTkRFUkJVRkZFUixyLmludGVybmFsRm9ybWF0LHIud2lkdGgsci5oZWlnaHQpfWRpc3Bvc2UoKXt0aGlzLl9jb250ZXh0JiYodGhpcy5fY29udGV4dC5nbC5kZWxldGVSZW5kZXJidWZmZXIodGhpcy5nbE5hbWUpLHRoaXMuX2NvbnRleHQuaW5zdGFuY2VDb3VudGVyLmRlY3JlbWVudChyLlJlbmRlcmJ1ZmZlcix0aGlzKSx0aGlzLl9jb250ZXh0PWUodGhpcy5fY29udGV4dCkpfX1leHBvcnR7biBhcyBSZW5kZXJidWZmZXJ9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRCeXRlc1BlckVsZW1lbnRGb3JtYXQgYXMgdH1mcm9tXCIuL1V0aWwuanNcIjtjbGFzcyBpe2NvbnN0cnVjdG9yKHQsaSxoPWkpe3RoaXMuaW50ZXJuYWxGb3JtYXQ9dCx0aGlzLndpZHRoPWksdGhpcy5oZWlnaHQ9aCx0aGlzLm11bHRpc2FtcGxlZD0hMSx0aGlzLnNhbXBsZXM9MX19ZnVuY3Rpb24gaChpKXtyZXR1cm4gaS53aWR0aDw9MHx8aS5oZWlnaHQ8PTB8fG51bGw9PWkuaW50ZXJuYWxGb3JtYXQ/MDppLndpZHRoKmkuaGVpZ2h0KnQoaS5pbnRlcm5hbEZvcm1hdCl9ZXhwb3J0e2kgYXMgUmVuZGVyYnVmZmVyRGVzY3JpcHRvcixoIGFzIGVzdGltYXRlTWVtb3J5fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgdCBmcm9tXCIuLi8uLi9jb3JlL0xvZ2dlci5qc1wiO2ltcG9ydHtkaXNwb3NlTWF5YmUgYXMgZSxudWxsaWZ5Tm9uTnVsbGFibGVGb3JEaXNwb3NlIGFzIGl9ZnJvbVwiLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHt0eXBlZEFycmF5U3RhdGljU2l6ZSBhcyByfWZyb21cIi4uLy4uL2NvcmUvdHlwZWRBcnJheVV0aWwuanNcIjtpbXBvcnR7UmVzb3VyY2VUeXBlIGFzIHN9ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtiaW5kVmVydGV4QnVmZmVyTGF5b3V0IGFzIG4sdW5iaW5kVmVydGV4QnVmZmVyTGF5b3V0IGFzIG99ZnJvbVwiLi9VdGlsLmpzXCI7Y29uc3QgZj10LmdldExvZ2dlcihcImVzcmkudmlld3Mud2ViZ2wuVmVydGV4QXJyYXlPYmplY3RcIik7bGV0IHU9Y2xhc3N7Y29uc3RydWN0b3IodCxlLGkscixuPW51bGwpe3RoaXMuX2NvbnRleHQ9dCx0aGlzLl9sb2NhdGlvbnM9ZSx0aGlzLl9sYXlvdXQ9aSx0aGlzLl9idWZmZXJzPXIsdGhpcy5faW5kZXhCdWZmZXI9bix0aGlzLl9nbE5hbWU9bnVsbCx0aGlzLl9pbml0aWFsaXplZD0hMSx0Lmluc3RhbmNlQ291bnRlci5pbmNyZW1lbnQocy5WZXJ0ZXhBcnJheU9iamVjdCx0aGlzKX1nZXQgZ2xOYW1lKCl7cmV0dXJuIHRoaXMuX2dsTmFtZX1nZXQgY29udGV4dCgpe3JldHVybiB0aGlzLl9jb250ZXh0fWdldCB2ZXJ0ZXhCdWZmZXJzKCl7cmV0dXJuIHRoaXMuX2J1ZmZlcnN9Z2V0IGluZGV4QnVmZmVyKCl7cmV0dXJuIHRoaXMuX2luZGV4QnVmZmVyfWdldCBieXRlU2l6ZSgpe3JldHVybiBPYmplY3Qua2V5cyh0aGlzLl9idWZmZXJzKS5yZWR1Y2UoKCh0LGUpPT50K3RoaXMuX2J1ZmZlcnNbZV0uYnl0ZUxlbmd0aCksbnVsbCE9dGhpcy5faW5kZXhCdWZmZXI/dGhpcy5faW5kZXhCdWZmZXIuYnl0ZUxlbmd0aDowKX1nZXQgbGF5b3V0KCl7cmV0dXJuIHRoaXMuX2xheW91dH1nZXQgbG9jYXRpb25zKCl7cmV0dXJuIHRoaXMuX2xvY2F0aW9uc31nZXQgbWVtb3J5RXN0aW1hdGUoKXtyZXR1cm4gdGhpcy5ieXRlU2l6ZSsoT2JqZWN0LmtleXModGhpcy5fYnVmZmVycykubGVuZ3RoKyh0aGlzLl9pbmRleEJ1ZmZlcj8xOjApKSpyfWRpc3Bvc2UoKXtpZih0aGlzLl9jb250ZXh0KXt0aGlzLl9jb250ZXh0LmdldEJvdW5kVkFPKCk9PT10aGlzJiZ0aGlzLl9jb250ZXh0LmJpbmRWQU8obnVsbCk7Zm9yKGNvbnN0IHQgaW4gdGhpcy5fYnVmZmVycyl0aGlzLl9idWZmZXJzW3RdPy5kaXNwb3NlKCksZGVsZXRlIHRoaXMuX2J1ZmZlcnNbdF07dGhpcy5faW5kZXhCdWZmZXI9ZSh0aGlzLl9pbmRleEJ1ZmZlciksdGhpcy5kaXNwb3NlVkFPT25seSgpfWVsc2UodGhpcy5fZ2xOYW1lfHxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLl9idWZmZXJzKS5sZW5ndGg+MCkmJmYud2FybihcIkxlYWtlZCBXZWJHTCBWQU9cIil9ZGlzcG9zZVZBT09ubHkoKXtpZih0aGlzLl9nbE5hbWUpe2NvbnN0IHQ9dGhpcy5fY29udGV4dD8uY2FwYWJpbGl0aWVzPy52YW87dC5kZWxldGVWZXJ0ZXhBcnJheSh0aGlzLl9nbE5hbWUpLHRoaXMuX2dsTmFtZT1udWxsfXRoaXMuX2NvbnRleHQuaW5zdGFuY2VDb3VudGVyLmRlY3JlbWVudChzLlZlcnRleEFycmF5T2JqZWN0LHRoaXMpLHRoaXMuX2NvbnRleHQ9aSh0aGlzLl9jb250ZXh0KX1pbml0aWFsaXplKCl7aWYodGhpcy5faW5pdGlhbGl6ZWQpcmV0dXJuO2NvbnN0IHQ9dGhpcy5fY29udGV4dC5jYXBhYmlsaXRpZXMudmFvO2lmKHQpe2NvbnN0IGU9dC5jcmVhdGVWZXJ0ZXhBcnJheSgpO3QuYmluZFZlcnRleEFycmF5KGUpLHRoaXMuX2JpbmRMYXlvdXQoKSx0LmJpbmRWZXJ0ZXhBcnJheShudWxsKSx0aGlzLl9nbE5hbWU9ZX10aGlzLl9pbml0aWFsaXplZD0hMH1iaW5kKCl7dGhpcy5pbml0aWFsaXplKCk7Y29uc3QgdD10aGlzLl9jb250ZXh0LmNhcGFiaWxpdGllcy52YW87dD90LmJpbmRWZXJ0ZXhBcnJheSh0aGlzLmdsTmFtZSk6KHRoaXMuX2NvbnRleHQuYmluZFZBTyhudWxsKSx0aGlzLl9iaW5kTGF5b3V0KCkpfV9iaW5kTGF5b3V0KCl7Y29uc3R7X2J1ZmZlcnM6dCxfbGF5b3V0OmUsX2luZGV4QnVmZmVyOml9PXRoaXM7dHx8Zi5lcnJvcihcIlZlcnRleCBidWZmZXIgZGljdGlvbmFyeSBpcyBlbXB0eSFcIik7Y29uc3Qgcj10aGlzLl9jb250ZXh0LmdsO2Zvcihjb25zdCBzIGluIHQpe2NvbnN0IGk9dFtzXTtpfHxmLmVycm9yKFwiVmVydGV4IGJ1ZmZlciBpcyB1bmluaXRpYWxpemVkIVwiKTtjb25zdCByPWVbc107cnx8Zi5lcnJvcihcIlZlcnRleCBlbGVtZW50IGRlc2NyaXB0b3IgaXMgZW1wdHkhXCIpLG4odGhpcy5fY29udGV4dCx0aGlzLl9sb2NhdGlvbnMsaSxyKX1pZihudWxsIT1pKXshIXRoaXMuX2NvbnRleHQuY2FwYWJpbGl0aWVzLnZhbz9yLmJpbmRCdWZmZXIoci5FTEVNRU5UX0FSUkFZX0JVRkZFUixpLmdsTmFtZSk6dGhpcy5fY29udGV4dC5iaW5kQnVmZmVyKGkpfX11bmJpbmQoKXt0aGlzLmluaXRpYWxpemUoKTtjb25zdCB0PXRoaXMuX2NvbnRleHQuY2FwYWJpbGl0aWVzLnZhbzt0P3QuYmluZFZlcnRleEFycmF5KG51bGwpOnRoaXMuX3VuYmluZExheW91dCgpfV91bmJpbmRMYXlvdXQoKXtjb25zdHtfYnVmZmVyczp0LF9sYXlvdXQ6ZX09dGhpczt0fHxmLmVycm9yKFwiVmVydGV4IGJ1ZmZlciBkaWN0aW9uYXJ5IGlzIGVtcHR5IVwiKTtmb3IoY29uc3QgaSBpbiB0KXtjb25zdCByPXRbaV07cnx8Zi5lcnJvcihcIlZlcnRleCBidWZmZXIgaXMgdW5pbml0aWFsaXplZCFcIik7Y29uc3Qgcz1lW2ldO28odGhpcy5fY29udGV4dCx0aGlzLl9sb2NhdGlvbnMscixzKX1udWxsIT10aGlzLl9pbmRleEJ1ZmZlciYmdGhpcy5fY29udGV4dC51bmJpbmRCdWZmZXIodGhpcy5faW5kZXhCdWZmZXIuYnVmZmVyVHlwZSl9fTtleHBvcnR7dSBhcyBWZXJ0ZXhBcnJheU9iamVjdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=