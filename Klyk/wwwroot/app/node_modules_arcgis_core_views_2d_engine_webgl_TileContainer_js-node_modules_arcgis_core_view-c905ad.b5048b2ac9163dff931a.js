"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["node_modules_arcgis_core_views_2d_engine_webgl_TileContainer_js-node_modules_arcgis_core_view-c905ad"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TileContainer.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./brushes/WGLBrushInfo.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushInfo.js");
/* harmony import */ var _brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./brushes/WGLBrushStencil.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/brushes/WGLBrushStencil.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const n=(e,r)=>e.key.level-r.key.level!=0?e.key.level-r.key.level:e.key.row-r.key.row!=0?e.key.row-r.key.row:e.key.col-r.key.col;class i extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(e){super(),this._tileInfoView=e}get requiresDedicatedFBO(){return!1}renderChildren(e){this.sortChildren(n),this.setStencilReference(e),super.renderChildren(e)}createRenderParams(e){const{state:r}=e,s=super.createRenderParams(e);return s.requiredLevel=this._tileInfoView.getClosestInfoForScale(r.scale).level,s.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(r.scale),s}prepareRenderPasses(r){const n=super.prepareRenderPasses(r);return n.push(r.registerRenderPass({name:"stencil",brushes:[_brushes_WGLBrushStencil_js__WEBPACK_IMPORTED_MODULE_4__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP|_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.HIGHLIGHT,target:()=>this.getStencilTarget()})),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-tiles-debug")&&n.push(r.registerRenderPass({name:"tileInfo",brushes:[_brushes_WGLBrushInfo_js__WEBPACK_IMPORTED_MODULE_3__["default"]],drawPhase:_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.DEBUG,target:()=>this.children})),n}getStencilTarget(){return this.children}setStencilReference(e){let r=1;for(const s of this.children)s.stencilRef=r++}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/TiledDisplayObject.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   TiledDisplayObject: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../DisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class r extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_1__.DisplayObject{constructor(t,s,i,r,h,o,n=h,a=o){super(),this.triangleCountReportedInDebug=0,this.triangleCount=0,this.texture=null,this.key=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_2__["default"](t),this.resolution=s,this.x=i,this.y=r,this.width=h,this.height=o,this.rangeX=n,this.rangeY=a}destroy(){this.texture&&(this.texture.dispose(),this.texture=null)}setTransform(i){const e=this.resolution/(i.resolution*i.pixelRatio),r=this.transforms.tileMat3,[h,o]=i.toScreenNoRotation([0,0],[this.x,this.y]),n=this.width/this.rangeX*e,a=this.height/this.rangeY*e;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.s)(r,n,0,0,0,a,0,h,o,1),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_0__.m)(this.transforms.dvs,i.displayViewMat3,r)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/WMTSLayerView2D.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ g)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./BitmapTileLayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./support/imageUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js");
/* harmony import */ var _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../tiling/TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../tiling/TileStrategy.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const d=[102113,102100,3857,3785,900913],_=[0,0];let w=class extends((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_18__["default"])((0,_BitmapTileLayerView2D_js__WEBPACK_IMPORTED_MODULE_10__.BitmapTileLayerView2D)((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_11__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_17__["default"])))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this._tileRequests=new Map,this.layer=null}get tileMatrixSet(){const e=this._getTileMatrixSetBySpatialReference(this.layer.activeLayer);return e?(e.id!==this.layer.activeLayer.tileMatrixSetId&&(this.layer.activeLayer.tileMatrixSetId=e.id),e):null}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=this.tileMatrixSet?.tileInfo;e&&(this._tileInfoView=new _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_13__["default"](e),this._fetchQueue=new _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_15__["default"]({tileInfoView:this._tileInfoView,concurrency:16,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_16__["default"]({cachePolicy:"keep",resampling:!0,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.addAttachHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.watch)((()=>[this.layer?.activeLayer?.styleId,this.tileMatrixSet]),(()=>this._refresh()))),super.attach())}detach(){super.detach(),this._tileStrategy?.destroy(),this._fetchQueue?.destroy(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once("detach",(()=>e.destroy())),this.requestUpdate()}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}async doRefresh(){!this.attached||this.updateRequested||this.suspended||this._refresh()}isUpdating(){return this._fetchQueue?.updating??!1}async fetchTile(e,t={}){const s="tilemapCache"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:a=0}=t;if(!s)return this._fetchImage(e,r);const l=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__["default"](0,0,0,0);let o;try{await s.fetchAvailabilityUpsample(e.level,e.row,e.col,l,{signal:r}),o=await this._fetchImage(l,r)}catch(h){if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(h))throw h;if(a<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_14__["default"](i),r=await this.fetchTile(s,{...t,resamplingLevel:a+1});return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__.resampleImage)(this._tileInfoView,r,s,e)}}throw h}return (0,_support_imageUtils_js__WEBPACK_IMPORTED_MODULE_12__.resampleImage)(this._tileInfoView,o,l,e)}canResume(){const e=super.canResume();return e?null!==this.tileMatrixSet:e}supportsSpatialReference(e){return this.layer.activeLayer.tileMatrixSets?.some((t=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__.equals)(t.tileInfo?.spatialReference,e)))??!1}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once("attach",(()=>this.requestUpdate()))}catch(s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(s)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchImageBitmapTile(e.level,e.row,e.col,{signal:t})}_refresh(){this._fetchQueue.reset(),this._tileStrategy.refresh((e=>{if(!e.bitmap.source)return;const t={id:e.key.id,fulfilled:!1,promise:this._fetchQueue.push(e.key).then((t=>{e.bitmap.source=t})).catch((t=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(t)||(e.bitmap.source=null)})).finally((()=>{e.requestRender(),t.fulfilled=!0}))};this._tileRequests.set(e,t)}))}_getTileMatrixSetBySpatialReference(e){const t=this.view.spatialReference;if(!e.tileMatrixSets)return null;let i=e.tileMatrixSets.find((e=>(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_9__.equals)(e.tileInfo?.spatialReference,t)));return!i&&t.isWebMercator&&(i=e.tileMatrixSets.find((e=>d.includes(e.tileInfo?.spatialReference.wkid??-1)))),i}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)()],w.prototype,"_fetchQueue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_4__.property)({readOnly:!0})],w.prototype,"tileMatrixSet",null),w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.2d.layers.WMTSLayerView2D")],w);const g=w;


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2VuZ2luZV93ZWJnbF9UaWxlQ29udGFpbmVyX2pzLW5vZGVfbW9kdWxlc19hcmNnaXNfY29yZV92aWV3LWM5MDVhZC5iNTA0OGIyYWM5MTYzZGZmOTMxYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5TSxpSUFBaUksZ0JBQWdCLHdEQUFDLENBQUMsZUFBZSw2QkFBNkIsMkJBQTJCLFNBQVMsa0JBQWtCLHlFQUF5RSxzQkFBc0IsTUFBTSxRQUFRLGlDQUFpQyxrSkFBa0osdUJBQXVCLHFDQUFxQyxvQ0FBb0Msd0JBQXdCLG1FQUFDLFlBQVksbURBQUMsT0FBTyxtREFBQyxLQUFLLG1EQUFDLDhDQUE4QyxHQUFHLHdEQUFHLG1EQUFtRCx5QkFBeUIsZ0VBQUMsWUFBWSxtREFBQyxnQ0FBZ0MsS0FBSyxtQkFBbUIscUJBQXFCLHVCQUF1QixRQUFRLCtDQUFvRTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSmhyQztBQUNBO0FBQ0E7QUFDQTtBQUNpSixnQkFBZ0IsNERBQUMsQ0FBQyxpQ0FBaUMsZ0dBQWdHLDBEQUFDLCtGQUErRixVQUFVLHlEQUF5RCxnQkFBZ0Isd0xBQXdMLGtEQUFDLHNCQUFzQixrREFBQywyQ0FBMkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKbHZCO0FBQ0E7QUFDQTtBQUNBO0FBQ3E5QixpREFBaUQsb0JBQW9CLDRFQUFDLENBQUMsaUZBQUMsQ0FBQyxrRUFBQyxDQUFDLDZEQUFDLEtBQUssY0FBYyw2R0FBNkcsb0JBQW9CLHlFQUF5RSwrR0FBK0csVUFBVSwrR0FBK0csU0FBUyxxQ0FBcUMsMkJBQTJCLGdFQUFDLHlCQUF5Qiw2REFBQyxFQUFFLGtGQUFrRix5QkFBeUIsZ0VBQUMsRUFBRSx1SUFBdUksd0JBQXdCLDZEQUFDLHFHQUFxRyxTQUFTLHFJQUFxSSxZQUFZLHFCQUFxQixhQUFhLHFCQUFxQixVQUFVLHFCQUFxQixlQUFlLHlIQUF5SCxlQUFlLGtEQUFrRCxxUEFBcVAsa0JBQWtCLHNFQUFzRSxhQUFhLHNDQUFzQyxzQkFBc0IsRUFBRSxrRUFBa0UsNkJBQTZCLEdBQUcsbUNBQW1DLFlBQVksMkRBQUMsVUFBVSxNQUFNLElBQUkseURBQXlELFNBQVMsZ0NBQWdDLFNBQVMsR0FBRyxtRUFBQyxZQUFZLFFBQVEsaURBQWlELE1BQU0sWUFBWSwyREFBQyw4QkFBOEIseUJBQXlCLEVBQUUsT0FBTyxzRUFBQyw0QkFBNEIsUUFBUSxPQUFPLHNFQUFDLDJCQUEyQixZQUFZLDBCQUEwQixxQ0FBcUMsNEJBQTRCLHVEQUF1RCxrRkFBQyx1Q0FBdUMsMkJBQTJCLG9DQUFvQyxJQUFJLDJDQUEyQyxxS0FBcUssU0FBUyxtRUFBQyxLQUFLLHVEQUFDLDBCQUEwQixzQkFBc0IsdUJBQXVCLDREQUE0RCxTQUFTLEVBQUUsV0FBVyx5REFBeUQsMkJBQTJCLFNBQVMsd0VBQXdFLGtCQUFrQixjQUFjLG1FQUFDLDRCQUE0QixpQkFBaUIsaUNBQWlDLElBQUksNEJBQTRCLEdBQUcsdUNBQXVDLG1DQUFtQyxpQ0FBaUMsZ0NBQWdDLGtGQUFDLG1DQUFtQyxpSEFBaUgsdURBQUMsRUFBRSxzRkFBQyxzQ0FBc0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksdUNBQXVDLHVEQUFDLEVBQUUsc0ZBQUMsNkNBQTZDLFVBQStCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL1RpbGVDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL3dlYmdsL1RpbGVkRGlzcGxheU9iamVjdC5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvV01UU0xheWVyVmlldzJELmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgaGFzIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e1dHTERyYXdQaGFzZSBhcyBlfWZyb21cIi4vZW51bXMuanNcIjtpbXBvcnQgciBmcm9tXCIuL1dHTENvbnRhaW5lci5qc1wiO2ltcG9ydCBzIGZyb21cIi4vYnJ1c2hlcy9XR0xCcnVzaEluZm8uanNcIjtpbXBvcnQgdCBmcm9tXCIuL2JydXNoZXMvV0dMQnJ1c2hTdGVuY2lsLmpzXCI7Y29uc3Qgbj0oZSxyKT0+ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWwhPTA/ZS5rZXkubGV2ZWwtci5rZXkubGV2ZWw6ZS5rZXkucm93LXIua2V5LnJvdyE9MD9lLmtleS5yb3ctci5rZXkucm93OmUua2V5LmNvbC1yLmtleS5jb2w7Y2xhc3MgaSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLl90aWxlSW5mb1ZpZXc9ZX1nZXQgcmVxdWlyZXNEZWRpY2F0ZWRGQk8oKXtyZXR1cm4hMX1yZW5kZXJDaGlsZHJlbihlKXt0aGlzLnNvcnRDaGlsZHJlbihuKSx0aGlzLnNldFN0ZW5jaWxSZWZlcmVuY2UoZSksc3VwZXIucmVuZGVyQ2hpbGRyZW4oZSl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe2NvbnN0e3N0YXRlOnJ9PWUscz1zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSk7cmV0dXJuIHMucmVxdWlyZWRMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0Q2xvc2VzdEluZm9Gb3JTY2FsZShyLnNjYWxlKS5sZXZlbCxzLmRpc3BsYXlMZXZlbD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2NhbGVUb1pvb20oci5zY2FsZSksc31wcmVwYXJlUmVuZGVyUGFzc2VzKHIpe2NvbnN0IG49c3VwZXIucHJlcGFyZVJlbmRlclBhc3NlcyhyKTtyZXR1cm4gbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwic3RlbmNpbFwiLGJydXNoZXM6W3RdLGRyYXdQaGFzZTplLkRFQlVHfGUuTUFQfGUuSElHSExJR0hULHRhcmdldDooKT0+dGhpcy5nZXRTdGVuY2lsVGFyZ2V0KCl9KSksaGFzKFwiZXNyaS10aWxlcy1kZWJ1Z1wiKSYmbi5wdXNoKHIucmVnaXN0ZXJSZW5kZXJQYXNzKHtuYW1lOlwidGlsZUluZm9cIixicnVzaGVzOltzXSxkcmF3UGhhc2U6ZS5ERUJVRyx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW59KSksbn1nZXRTdGVuY2lsVGFyZ2V0KCl7cmV0dXJuIHRoaXMuY2hpbGRyZW59c2V0U3RlbmNpbFJlZmVyZW5jZShlKXtsZXQgcj0xO2Zvcihjb25zdCBzIG9mIHRoaXMuY2hpbGRyZW4pcy5zdGVuY2lsUmVmPXIrK319ZXhwb3J0e2kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e3MgYXMgdCxtIGFzIHN9ZnJvbVwiLi4vLi4vLi4vLi4vY2h1bmtzL21hdDMuanNcIjtpbXBvcnR7RGlzcGxheU9iamVjdCBhcyBpfWZyb21cIi4uL0Rpc3BsYXlPYmplY3QuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi90aWxpbmcvVGlsZUtleS5qc1wiO2NsYXNzIHIgZXh0ZW5kcyBpe2NvbnN0cnVjdG9yKHQscyxpLHIsaCxvLG49aCxhPW8pe3N1cGVyKCksdGhpcy50cmlhbmdsZUNvdW50UmVwb3J0ZWRJbkRlYnVnPTAsdGhpcy50cmlhbmdsZUNvdW50PTAsdGhpcy50ZXh0dXJlPW51bGwsdGhpcy5rZXk9bmV3IGUodCksdGhpcy5yZXNvbHV0aW9uPXMsdGhpcy54PWksdGhpcy55PXIsdGhpcy53aWR0aD1oLHRoaXMuaGVpZ2h0PW8sdGhpcy5yYW5nZVg9bix0aGlzLnJhbmdlWT1hfWRlc3Ryb3koKXt0aGlzLnRleHR1cmUmJih0aGlzLnRleHR1cmUuZGlzcG9zZSgpLHRoaXMudGV4dHVyZT1udWxsKX1zZXRUcmFuc2Zvcm0oaSl7Y29uc3QgZT10aGlzLnJlc29sdXRpb24vKGkucmVzb2x1dGlvbippLnBpeGVsUmF0aW8pLHI9dGhpcy50cmFuc2Zvcm1zLnRpbGVNYXQzLFtoLG9dPWkudG9TY3JlZW5Ob1JvdGF0aW9uKFswLDBdLFt0aGlzLngsdGhpcy55XSksbj10aGlzLndpZHRoL3RoaXMucmFuZ2VYKmUsYT10aGlzLmhlaWdodC90aGlzLnJhbmdlWSplO3QocixuLDAsMCwwLGEsMCxoLG8sMSkscyh0aGlzLnRyYW5zZm9ybXMuZHZzLGkuZGlzcGxheVZpZXdNYXQzLHIpfX1leHBvcnR7ciBhcyBUaWxlZERpc3BsYXlPYmplY3R9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2lzQWJvcnRFcnJvciBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvcHJvbWlzZVV0aWxzLmpzXCI7aW1wb3J0e3dhdGNoIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBhfWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIGx9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Qml0bWFwVGlsZUxheWVyVmlldzJEIGFzIG99ZnJvbVwiLi9CaXRtYXBUaWxlTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBofWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnR7cmVzYW1wbGVJbWFnZSBhcyBjfWZyb21cIi4vc3VwcG9ydC9pbWFnZVV0aWxzLmpzXCI7aW1wb3J0IG4gZnJvbVwiLi4vdGlsaW5nL1RpbGVJbmZvVmlldy5qc1wiO2ltcG9ydCB1IGZyb21cIi4uL3RpbGluZy9UaWxlS2V5LmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vdGlsaW5nL1RpbGVRdWV1ZS5qc1wiO2ltcG9ydCBmIGZyb21cIi4uL3RpbGluZy9UaWxlU3RyYXRlZ3kuanNcIjtpbXBvcnQgbSBmcm9tXCIuLi8uLi9sYXllcnMvTGF5ZXJWaWV3LmpzXCI7aW1wb3J0IHkgZnJvbVwiLi4vLi4vbGF5ZXJzL1JlZnJlc2hhYmxlTGF5ZXJWaWV3LmpzXCI7Y29uc3QgZD1bMTAyMTEzLDEwMjEwMCwzODU3LDM3ODUsOTAwOTEzXSxfPVswLDBdO2xldCB3PWNsYXNzIGV4dGVuZHMoeShvKGgobSkpKSl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX3RpbGVTdHJhdGVneT1udWxsLHRoaXMuX2ZldGNoUXVldWU9bnVsbCx0aGlzLl90aWxlUmVxdWVzdHM9bmV3IE1hcCx0aGlzLmxheWVyPW51bGx9Z2V0IHRpbGVNYXRyaXhTZXQoKXtjb25zdCBlPXRoaXMuX2dldFRpbGVNYXRyaXhTZXRCeVNwYXRpYWxSZWZlcmVuY2UodGhpcy5sYXllci5hY3RpdmVMYXllcik7cmV0dXJuIGU/KGUuaWQhPT10aGlzLmxheWVyLmFjdGl2ZUxheWVyLnRpbGVNYXRyaXhTZXRJZCYmKHRoaXMubGF5ZXIuYWN0aXZlTGF5ZXIudGlsZU1hdHJpeFNldElkPWUuaWQpLGUpOm51bGx9dXBkYXRlKGUpe3RoaXMuX2ZldGNoUXVldWUucGF1c2UoKSx0aGlzLl9mZXRjaFF1ZXVlLnN0YXRlPWUuc3RhdGUsdGhpcy5fdGlsZVN0cmF0ZWd5LnVwZGF0ZShlKSx0aGlzLl9mZXRjaFF1ZXVlLnJlc3VtZSgpfWF0dGFjaCgpe2NvbnN0IGU9dGhpcy50aWxlTWF0cml4U2V0Py50aWxlSW5mbztlJiYodGhpcy5fdGlsZUluZm9WaWV3PW5ldyBuKGUpLHRoaXMuX2ZldGNoUXVldWU9bmV3IHAoe3RpbGVJbmZvVmlldzp0aGlzLl90aWxlSW5mb1ZpZXcsY29uY3VycmVuY3k6MTYscHJvY2VzczooZSx0KT0+dGhpcy5mZXRjaFRpbGUoZSx0KX0pLHRoaXMuX3RpbGVTdHJhdGVneT1uZXcgZih7Y2FjaGVQb2xpY3k6XCJrZWVwXCIscmVzYW1wbGluZzohMCxhY3F1aXJlVGlsZTplPT50aGlzLmFjcXVpcmVUaWxlKGUpLHJlbGVhc2VUaWxlOmU9PnRoaXMucmVsZWFzZVRpbGUoZSksdGlsZUluZm9WaWV3OnRoaXMuX3RpbGVJbmZvVmlld30pLHRoaXMuYWRkQXR0YWNoSGFuZGxlcyhzKCgoKT0+W3RoaXMubGF5ZXI/LmFjdGl2ZUxheWVyPy5zdHlsZUlkLHRoaXMudGlsZU1hdHJpeFNldF0pLCgoKT0+dGhpcy5fcmVmcmVzaCgpKSkpLHN1cGVyLmF0dGFjaCgpKX1kZXRhY2goKXtzdXBlci5kZXRhY2goKSx0aGlzLl90aWxlU3RyYXRlZ3k/LmRlc3Ryb3koKSx0aGlzLl9mZXRjaFF1ZXVlPy5kZXN0cm95KCksdGhpcy5fZmV0Y2hRdWV1ZT10aGlzLl90aWxlU3RyYXRlZ3k9dGhpcy5fdGlsZUluZm9WaWV3PW51bGx9bW92ZVN0YXJ0KCl7dGhpcy5yZXF1ZXN0VXBkYXRlKCl9dmlld0NoYW5nZSgpe3RoaXMucmVxdWVzdFVwZGF0ZSgpfW1vdmVFbmQoKXt0aGlzLnJlcXVlc3RVcGRhdGUoKX1yZWxlYXNlVGlsZShlKXt0aGlzLl9mZXRjaFF1ZXVlLmFib3J0KGUua2V5LmlkKSx0aGlzLl9iaXRtYXBWaWV3LnJlbW92ZUNoaWxkKGUpLGUub25jZShcImRldGFjaFwiLCgoKT0+ZS5kZXN0cm95KCkpKSx0aGlzLnJlcXVlc3RVcGRhdGUoKX1hY3F1aXJlVGlsZShlKXtjb25zdCB0PXRoaXMuX2JpdG1hcFZpZXcuY3JlYXRlVGlsZShlKSxpPXQuYml0bWFwO3JldHVybltpLngsaS55XT10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZUNvb3JkcyhfLHQua2V5KSxpLnJlc29sdXRpb249dGhpcy5fdGlsZUluZm9WaWV3LmdldFRpbGVSZXNvbHV0aW9uKHQua2V5KSxbaS53aWR0aCxpLmhlaWdodF09dGhpcy5fdGlsZUluZm9WaWV3LnRpbGVJbmZvLnNpemUsdGhpcy5fZW5xdWV1ZVRpbGVGZXRjaCh0KSx0aGlzLl9iaXRtYXBWaWV3LmFkZENoaWxkKHQpLHRoaXMucmVxdWVzdFVwZGF0ZSgpLHR9YXN5bmMgZG9SZWZyZXNoKCl7IXRoaXMuYXR0YWNoZWR8fHRoaXMudXBkYXRlUmVxdWVzdGVkfHx0aGlzLnN1c3BlbmRlZHx8dGhpcy5fcmVmcmVzaCgpfWlzVXBkYXRpbmcoKXtyZXR1cm4gdGhpcy5fZmV0Y2hRdWV1ZT8udXBkYXRpbmc/PyExfWFzeW5jIGZldGNoVGlsZShlLHQ9e30pe2NvbnN0IHM9XCJ0aWxlbWFwQ2FjaGVcImluIHRoaXMubGF5ZXI/dGhpcy5sYXllci50aWxlbWFwQ2FjaGU6bnVsbCx7c2lnbmFsOnIscmVzYW1wbGluZ0xldmVsOmE9MH09dDtpZighcylyZXR1cm4gdGhpcy5fZmV0Y2hJbWFnZShlLHIpO2NvbnN0IGw9bmV3IHUoMCwwLDAsMCk7bGV0IG87dHJ5e2F3YWl0IHMuZmV0Y2hBdmFpbGFiaWxpdHlVcHNhbXBsZShlLmxldmVsLGUucm93LGUuY29sLGwse3NpZ25hbDpyfSksbz1hd2FpdCB0aGlzLl9mZXRjaEltYWdlKGwscil9Y2F0Y2goaCl7aWYoaShoKSl0aHJvdyBoO2lmKGE8Myl7Y29uc3QgaT10aGlzLl90aWxlSW5mb1ZpZXcuZ2V0VGlsZVBhcmVudElkKGUuaWQpO2lmKGkpe2NvbnN0IHM9bmV3IHUoaSkscj1hd2FpdCB0aGlzLmZldGNoVGlsZShzLHsuLi50LHJlc2FtcGxpbmdMZXZlbDphKzF9KTtyZXR1cm4gYyh0aGlzLl90aWxlSW5mb1ZpZXcscixzLGUpfX10aHJvdyBofXJldHVybiBjKHRoaXMuX3RpbGVJbmZvVmlldyxvLGwsZSl9Y2FuUmVzdW1lKCl7Y29uc3QgZT1zdXBlci5jYW5SZXN1bWUoKTtyZXR1cm4gZT9udWxsIT09dGhpcy50aWxlTWF0cml4U2V0OmV9c3VwcG9ydHNTcGF0aWFsUmVmZXJlbmNlKGUpe3JldHVybiB0aGlzLmxheWVyLmFjdGl2ZUxheWVyLnRpbGVNYXRyaXhTZXRzPy5zb21lKCh0PT5sKHQudGlsZUluZm8/LnNwYXRpYWxSZWZlcmVuY2UsZSkpKT8/ITF9YXN5bmMgX2VucXVldWVUaWxlRmV0Y2goZSl7aWYoIXRoaXMuX2ZldGNoUXVldWUuaGFzKGUua2V5LmlkKSl7dHJ5e2NvbnN0IHQ9YXdhaXQgdGhpcy5fZmV0Y2hRdWV1ZS5wdXNoKGUua2V5KTtlLmJpdG1hcC5zb3VyY2U9dCxlLmJpdG1hcC53aWR0aD10aGlzLl90aWxlSW5mb1ZpZXcudGlsZUluZm8uc2l6ZVswXSxlLmJpdG1hcC5oZWlnaHQ9dGhpcy5fdGlsZUluZm9WaWV3LnRpbGVJbmZvLnNpemVbMV0sZS5vbmNlKFwiYXR0YWNoXCIsKCgpPT50aGlzLnJlcXVlc3RVcGRhdGUoKSkpfWNhdGNoKHMpe2kocyl8fHQuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKHMpfXRoaXMucmVxdWVzdFVwZGF0ZSgpfX1hc3luYyBfZmV0Y2hJbWFnZShlLHQpe3JldHVybiB0aGlzLmxheWVyLmZldGNoSW1hZ2VCaXRtYXBUaWxlKGUubGV2ZWwsZS5yb3csZS5jb2wse3NpZ25hbDp0fSl9X3JlZnJlc2goKXt0aGlzLl9mZXRjaFF1ZXVlLnJlc2V0KCksdGhpcy5fdGlsZVN0cmF0ZWd5LnJlZnJlc2goKGU9PntpZighZS5iaXRtYXAuc291cmNlKXJldHVybjtjb25zdCB0PXtpZDplLmtleS5pZCxmdWxmaWxsZWQ6ITEscHJvbWlzZTp0aGlzLl9mZXRjaFF1ZXVlLnB1c2goZS5rZXkpLnRoZW4oKHQ9PntlLmJpdG1hcC5zb3VyY2U9dH0pKS5jYXRjaCgodD0+e2kodCl8fChlLmJpdG1hcC5zb3VyY2U9bnVsbCl9KSkuZmluYWxseSgoKCk9PntlLnJlcXVlc3RSZW5kZXIoKSx0LmZ1bGZpbGxlZD0hMH0pKX07dGhpcy5fdGlsZVJlcXVlc3RzLnNldChlLHQpfSkpfV9nZXRUaWxlTWF0cml4U2V0QnlTcGF0aWFsUmVmZXJlbmNlKGUpe2NvbnN0IHQ9dGhpcy52aWV3LnNwYXRpYWxSZWZlcmVuY2U7aWYoIWUudGlsZU1hdHJpeFNldHMpcmV0dXJuIG51bGw7bGV0IGk9ZS50aWxlTWF0cml4U2V0cy5maW5kKChlPT5sKGUudGlsZUluZm8/LnNwYXRpYWxSZWZlcmVuY2UsdCkpKTtyZXR1cm4haSYmdC5pc1dlYk1lcmNhdG9yJiYoaT1lLnRpbGVNYXRyaXhTZXRzLmZpbmQoKGU9PmQuaW5jbHVkZXMoZS50aWxlSW5mbz8uc3BhdGlhbFJlZmVyZW5jZS53a2lkPz8tMSkpKSksaX19O2UoW3IoKV0sdy5wcm90b3R5cGUsXCJfZmV0Y2hRdWV1ZVwiLHZvaWQgMCksZShbcih7cmVhZE9ubHk6ITB9KV0sdy5wcm90b3R5cGUsXCJ0aWxlTWF0cml4U2V0XCIsbnVsbCksdz1lKFthKFwiZXNyaS52aWV3cy4yZC5sYXllcnMuV01UU0xheWVyVmlldzJEXCIpXSx3KTtjb25zdCBnPXc7ZXhwb3J0e2cgYXMgZGVmYXVsdH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=