"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_data_QueryEngine_js"],{

/***/ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/sql/WhereClauseCache.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WhereClauseCache: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../LRUCache.js */ "./node_modules/@arcgis/core/core/LRUCache.js");
/* harmony import */ var _WhereClause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WhereClause.js */ "./node_modules/@arcgis/core/core/sql/WhereClause.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class c{constructor(e,c){this._cache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(e),this._invalidCache=new _LRUCache_js__WEBPACK_IMPORTED_MODULE_0__.LRUCache(c)}get(t,c){const i=`${c.uid}:${t}`,r=this._cache.get(i);if(r)return r;if(void 0!==this._invalidCache.get(i))return null;try{const r=_WhereClause_js__WEBPACK_IMPORTED_MODULE_1__.WhereClause.create(t,c);return this._cache.put(i,r),r}catch{return this._invalidCache.put(i,null),null}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ n)
/* harmony export */ });
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class n{constructor(s,a,l){this._fieldDataCache=new Map,this._returnDistinctMap=new Map,this.returnDistinctValues=s.returnDistinctValues??!1,this.fieldsIndex=l,this.featureAdapter=a;const r=s.outFields;if(r&&!r.includes("*")){this.outFields=r;let s=0;for(const a of r){const r=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getExpressionFromFieldName)(a),n=this.fieldsIndex.get(r),u=n?null:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(r,l),d=n?n.name:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getAliasFromFieldName)(a)||"FIELD_EXP_"+s++;this._fieldDataCache.set(a,{alias:d,clause:u})}}}countDistinctValues(t){return this.returnDistinctValues?(t.forEach((t=>this.getAttributes(t))),this._returnDistinctMap.size):t.length}getAttributes(t){const e=this._processAttributesForOutFields(t);return this._processAttributesForDistinctValues(e)}getFieldValue(t,i,s){const a=s?s.name:i;let l=null;return this._fieldDataCache.has(a)?l=this._fieldDataCache.get(a)?.clause:s||(l=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex),this._fieldDataCache.set(a,{alias:a,clause:l})),s?this.featureAdapter.getAttribute(t,a):l?.calculateValue(t,this.featureAdapter)}getDataValues(t,e){const i=e.normalizationType,s=e.normalizationTotal;return t.map((t=>{let r=e.field&&this.getFieldValue(t,e.field,this.fieldsIndex.get(e.field));if(e.field2&&(r=`${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(r)}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(this.getFieldValue(t,e.field2,this.fieldsIndex.get(e.field2)))}`,e.field3&&(r=`${r}${e.fieldDelimiter}${(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.processNullValue)(this.getFieldValue(t,e.field3,this.fieldsIndex.get(e.field3)))}`)),i&&Number.isFinite(r)){const a="field"===i&&e.normalizationField?this.getFieldValue(t,e.normalizationField,this.fieldsIndex.get(e.normalizationField)):null;r=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_2__.getNormalizedValue)(r,i,a,s)}return r}))}async getExpressionValues(t,e,i,a){const{arcadeUtils:l}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_3__.loadArcade)(),n=l.hasGeometryOperations(e);n&&await l.enableGeometryOperations();const u=l.createFunction(e),d=i&&l.getViewInfo(i),o={fields:this.fieldsIndex.fields};return t.map((t=>{const e={attributes:this.featureAdapter.getAttributes(t),layer:o,geometry:n?{...(0,_utils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometry)(a.geometryType,a.hasZ,a.hasM,this.featureAdapter.getGeometry(t)),spatialReference:i?.spatialReference}:null},r=l.createExecContext(e,d);return l.executeFunction(u,r)}))}validateItem(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testFeature(t,this.featureAdapter)??!1}validateItems(t,i){return this._fieldDataCache.has(i)||this._fieldDataCache.set(i,{alias:i,clause:(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_0__.getWhereClause)(i,this.fieldsIndex)}),this._fieldDataCache.get(i)?.clause?.testSet(t,this.featureAdapter)??!1}_processAttributesForOutFields(t){const e=this.outFields;if(!e||!e.length)return this.featureAdapter.getAttributes(t);const i={};for(const s of e){const{alias:e,clause:a}=this._fieldDataCache.get(s);i[e]=a?a.calculateValue(t,this.featureAdapter):this.featureAdapter.getAttribute(t,e)}return i}_processAttributesForDistinctValues(t){if(null==t||!this.returnDistinctValues)return t;const e=this.outFields,i=[];if(e)for(const l of e){const{alias:e}=this._fieldDataCache.get(l);i.push(t[e])}else for(const l in t)i.push(t[l]);const s=`${(e||["*"]).join(",")}=${i.join(",")}`;let a=this._returnDistinctMap.get(s)||0;return this._returnDistinctMap.set(s,++a),a>1?null:t}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Feature: () => (/* binding */ K),
/* harmony export */   QueryEngine: () => (/* binding */ ee)
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/MemCache.js */ "./node_modules/@arcgis/core/core/MemCache.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/unitUtils.js */ "./node_modules/@arcgis/core/core/unitUtils.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./attributeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./QueryEngineCapabilities.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js");
/* harmony import */ var _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./QueryEngineResult.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js");
/* harmony import */ var _spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./spatialQuerySupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/spatialQuerySupport.js");
/* harmony import */ var _timeSupport_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./timeSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/timeSupport.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../views/support/Scheduler.js */ "./node_modules/@arcgis/core/views/support/Scheduler.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function $(e){return null!=e&&e.every((e=>"exceedslimit"!==e.statisticType))}const W="feature-store:unsupported-query";class K{constructor(e,t=null,i,s,r){this.attributes=e,this.geometry=i,this.centroid=s,this.filterFlags=r,this.groupId=-1,this.displayId=t}}const X=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__.MemCacheStorage(2e6);let Y=0;class ee{constructor(e){this._geometryQueryCache=null,this._changeHandle=null,this.capabilities={query:_QueryEngineCapabilities_js__WEBPACK_IMPORTED_MODULE_16__.queryCapabilities},this.geometryType=e.geometryType,this.hasM=!!e.hasM,this.hasZ=!!e.hasZ,this.objectIdField=e.objectIdField,this.spatialReference=e.spatialReference,this.definitionExpression=e.definitionExpression,this.featureStore=e.featureStore,this.aggregateAdapter=e.aggregateAdapter,this._changeHandle=this.featureStore.events.on("changed",(()=>this.clearCache())),this.timeInfo=e.timeInfo,e.cacheSpatialQueries&&(this._geometryQueryCache=new _core_MemCache_js__WEBPACK_IMPORTED_MODULE_4__.MemCache(Y+++"$$",X)),this.fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_21__["default"](e.fields),e.scheduler&&e.priority&&(this._frameTask=e.scheduler.registerTask(e.priority))}destroy(){this._frameTask=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.removeMaybe)(this._frameTask),this.clearCache(),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._geometryQueryCache),this._changeHandle=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.removeMaybe)(this._changeHandle),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this.fieldsIndex)}get featureAdapter(){return this.featureStore.featureAdapter}clearCache(){this._geometryQueryCache?.clear(),this._allFeaturesPromise=null,this._timeExtentPromise=null}async executeQuery(e,t){try{return(await this._executeQuery(e,{},t)).createQueryResponse()}catch(i){if(i!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw i;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForCount(e={},t){try{return(await this._executeQuery(e,{returnGeometry:!1,returnCentroid:!1,outSR:null},t)).createQueryResponseForCount()}catch(i){if(i!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw i;return 0}}async executeQueryForExtent(e,t){const i=e.outSR;try{const s=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),r=s.size;if(!r)return{count:0,extent:null};return{count:r,extent:await this._getBounds(s.items,s.spatialReference,i||this.spatialReference)}}catch(s){if(s===_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)return{count:0,extent:null};throw s}}async executeQueryForIds(e,t){return this.executeQueryForIdSet(e,t).then((e=>Array.from(e)))}async executeQueryForIdSet(e,t){try{const i=await this._executeQuery(e,{returnGeometry:!0,returnCentroid:!1,outSR:null},t),s=i.items,r=new Set;return await this._reschedule((()=>{for(const e of s)r.add(i.featureAdapter.getObjectId(e))}),t),r}catch(i){if(i===_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)return new Set;throw i}}async executeQueryForSnapping(e,t){const{point:i,distance:s,returnEdge:r,returnVertex:a}=e;if(!r&&!a)return{candidates:[]};const n=await this._reschedule((()=>this._checkQuerySupport(e.query)),t),u=!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(i.spatialReference,this.spatialReference);u&&await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(i.spatialReference,this.spatialReference);const o="number"==typeof s?s:s.x,l="number"==typeof s?s:s.y,c={xmin:i.x-o,xmax:i.x+o,ymin:i.y-l,ymax:i.y+l,spatialReference:i.spatialReference},h=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(c,this.spatialReference):c;if(!h)return{candidates:[]};const p=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(i),null,{signal:t}))[0],m=(await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_11__.normalizeCentralMeridian)((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.fromJSON)(h),null,{signal:t}))[0];if(null==p||null==m)return{candidates:[]};const f=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(m.toJSON()))),t),n,this);await this._reschedule((()=>this._executeObjectIdsQuery(f)),t),await this._reschedule((()=>this._executeTimeQuery(f)),t),await this._reschedule((()=>this._executeAttributesQuery(f)),t);const d=p.toJSON(),y=u?(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(d,this.spatialReference):d,_=u?Math.max(h.xmax-h.xmin,h.ymax-h.ymin)/2:s;return f.createSnappingResponse({...e,point:y,distance:_},i.spatialReference)}async executeQueryForLatestObservations(e,t){if(!this.timeInfo||!this.timeInfo.trackIdField)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Missing timeInfo or timeInfo.trackIdField",{query:e,timeInfo:this.timeInfo});try{const i=await this._executeQuery(e,{},t);return await this._reschedule((()=>this._filterLatest(i)),t),i.createQueryResponse()}catch(s){if(s!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw s;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this).createQueryResponse()}}async executeQueryForSummaryStatistics(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createSummaryStatisticsResponse(t)}async executeQueryForUniqueValues(e={},t,i){const{field:s,field2:r,field3:a,valueExpression:n}=t;return(await this._getQueryEngineResultForStats(e,{field:s,field2:r,field3:a,valueExpression:n},i)).createUniqueValuesResponse(t)}async executeQueryForClassBreaks(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createClassBreaksResponse(t)}async executeQueryForHistogram(e={},t,i){const{field:s,normalizationField:r,valueExpression:a}=t;return(await this._getQueryEngineResultForStats(e,{field:s,normalizationField:r,valueExpression:a},i)).createHistogramResponse(t)}async fetchRecomputedExtents(e){const[t,i]=await Promise.all(["getFullExtent"in this.featureStore&&this.featureStore.getFullExtent?Promise.resolve(this.featureStore.getFullExtent(this.spatialReference)):this._getBounds(await this._getAllFeatures(),this.spatialReference,this.spatialReference),null!=this._timeExtentPromise?this._timeExtentPromise:this._timeExtentPromise=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_19__.getTimeExtent)(this.timeInfo,this.featureStore)]);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(e),{fullExtent:t,timeExtent:i}}async _getBounds(e,t,i){const s=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.set)((0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(),_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.NEGATIVE_INFINITY);await this.featureStore.forEachBounds(e,(e=>(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(s,e)));const r={xmin:s[0],ymin:s[1],xmax:s[3],ymax:s[4],spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.cleanFromGeometryEngine)(this.spatialReference)};this.hasZ&&isFinite(s[2])&&isFinite(s[5])&&(r.zmin=s[2],r.zmax=s[5]);const a=(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(r,t,i);if(a.spatialReference=(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.cleanFromGeometryEngine)(i),a.xmax-a.xmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.xmin-=e,a.xmax+=e}if(a.ymax-a.ymin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.ymin-=e,a.ymax+=e}if(this.hasZ&&null!=a.zmin&&null!=a.zmax&&a.zmax-a.zmin==0){const e=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_6__.getMetersPerUnitForSR)(a.spatialReference);a.zmin-=e,a.zmax+=e}return a}async _schedule(e,t){return null!=this._frameTask?this._frameTask.schedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__.noBudget)}async _reschedule(e,t){return null!=this._frameTask?this._frameTask.reschedule(e,t):e(_views_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_23__.noBudget)}async _getAllFeaturesQueryEngineResult(e){return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(await this._getAllFeatures(),e,this)}async _getAllFeatures(){if(null==this._allFeaturesPromise){const e=[];this._allFeaturesPromise=(async()=>{await this.featureStore.forEach((t=>e.push(t)))})().then((()=>e))}const e=this._allFeaturesPromise,t=await e;return e===this._allFeaturesPromise?t.slice():this._getAllFeatures()}async _executeQuery(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e),e=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkQuerySupport(e)),i),e={...e,...t};const r=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),a=await this._reschedule((()=>this._executeGeometryQuery(e,r,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(a)),i),await this._reschedule((()=>this._executeObjectIdsQuery(a)),i),await this._reschedule((()=>this._executeTimeQuery(a)),i),await this._reschedule((()=>this._executeAttributesQuery(a)),i),a}async _executeSceneFilterQuery(e,t){if(null==e.sceneFilter)return null;const{outSR:i,returnGeometry:s,returnCentroid:r}=e,a=this.featureStore.featureSpatialReference,n=e.sceneFilter.geometry,u=null==a||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(a,n.spatialReference)?n:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(n,a);if(!u)return null;const o=s||r,l=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.isValid)(i)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,i)&&o?async e=>this._project(e,i):e=>e,c=this.featureAdapter,h=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(u))),t);if("disjoint"===e.sceneFilter.spatialRelationship){if(!h.length)return null;const i=new Set;for(const e of h)i.add(c.getObjectId(e));const s=await this._reschedule((()=>this._getAllFeatures()),t),r=await this._reschedule((async()=>{const r=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)("esriSpatialRelDisjoint",u,this.geometryType,this.hasZ,this.hasM),a=e=>!i.has(c.getObjectId(e))||r(c.getGeometry(e)),n=await this._runSpatialFilter(s,a,t);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(n,e,this)}),t);return l(r)}if(!h.length)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this);if(this._canExecuteSinglePass(u,e))return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(h,e,this));const p=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)("esriSpatialRelContains",u,this.geometryType,this.hasZ,this.hasM),m=await this._runSpatialFilter(h,(e=>p(c.getGeometry(e))),t);return l(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(m,e,this))}async _executeGeometryQuery(i,s,r){if(null!=s&&0===s.items.length)return s;i=null!=s?s.query:i;const{geometry:a,outSR:n,spatialRel:u,returnGeometry:o,returnCentroid:l}=i,c=this.featureStore.featureSpatialReference,h=!a||null==c||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(c,a.spatialReference)?a:(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.project)(a,c),p=o||l,m=(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.isValid)(n)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,n),f=this._geometryQueryCache&&null==s?m&&p?JSON.stringify({originalFilterGeometry:a,spatialRelationship:u,outSpatialReference:n}):JSON.stringify({originalFilterGeometry:a,spatialRelationship:u}):null,d=f?this._geometryQueryCache.get(f):null;if(null!=d)return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(d,i,this);const y=async e=>(m&&p&&await this._project(e,n),f&&this._geometryQueryCache.put(f,e.items,e.items.length+1),e);if(!h)return y(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const g=this.featureAdapter;let _=await this._reschedule((()=>this._searchFeatures(this._getQueryBBoxes(a))),r);if("esriSpatialRelDisjoint"===u){if(!_.length)return y(null!=s?s:await this._getAllFeaturesQueryEngineResult(i));const e=new Set;for(const i of _)e.add(g.getObjectId(i));const t=null!=s?s.items:await this._reschedule((()=>this._getAllFeatures()),r),a=await this._reschedule((async()=>{const s=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)(u,h,this.geometryType,this.hasZ,this.hasM),a=t=>!e.has(g.getObjectId(t))||s(g.getGeometry(t)),n=await this._runSpatialFilter(t,a,r);return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(n,i,this)}),r);return y(a)}if(null!=s){const i=new _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.PositionHint;_=_.filter((e=>(0,_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.indexOf)(s.items,e,s.items.length,i)>=0))}if(!_.length){const e=new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],i,this);return f&&this._geometryQueryCache.put(f,e.items,1),e}if(this._canExecuteSinglePass(h,i))return y(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(_,i,this));const x=await (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.getSpatialQueryOperator)(u,h,this.geometryType,this.hasZ,this.hasM),w=await this._runSpatialFilter(_,(e=>x(g.getGeometry(e))),r);return y(new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult(w,i,this))}_executeAggregateIdsQuery(e){if(0===e.items.length||!e.query.aggregateIds||!e.query.aggregateIds.length||null==this.aggregateAdapter)return;const t=new Set;for(const s of e.query.aggregateIds){this.aggregateAdapter.getFeatureObjectIds(s).forEach((e=>t.add(e)))}const i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeObjectIdsQuery(e){if(0===e.items.length||!e.query.objectIds||!e.query.objectIds.length)return;const t=new Set(e.query.objectIds),i=this.featureAdapter.getObjectId;e.items=e.items.filter((e=>t.has(i(e))))}_executeTimeQuery(e){if(0===e.items.length)return;const t=(0,_timeSupport_js__WEBPACK_IMPORTED_MODULE_19__.getTimeOperator)(this.timeInfo,e.query.timeExtent,this.featureAdapter);null!=t&&(e.items=e.items.filter(t))}_executeAttributesQuery(e){if(0===e.items.length)return;const t=(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.getWhereClause)(e.query.where,this.fieldsIndex);if(t){if(!t.isStandardized)throw new TypeError("Where clause is not standardized");e.items=e.items.filter((e=>t.testFeature(e,this.featureAdapter)))}}async _runSpatialFilter(e,t,i){if(!t)return e;if(null==this._frameTask)return e.filter((e=>t(e)));let s=0;const r=new Array,a=async n=>{for(;s<e.length;){const u=e[s++];t(u)&&(r.push(u),n.madeProgress()),n.done&&await this._reschedule((e=>a(e)),i)}};return this._reschedule((e=>a(e)),i).then((()=>r))}_filterLatest(e){const{trackIdField:t,startTimeField:i,endTimeField:s}=this.timeInfo,r=s||i,a=new Map,n=this.featureAdapter.getAttribute;for(const u of e.items){const e=n(u,t),i=n(u,r),s=a.get(e);(!s||i>n(s,r))&&a.set(e,u)}e.items=Array.from(a.values())}_canExecuteSinglePass(e,t){const{spatialRel:i}=t;return (0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.canQueryWithRBush)(e)&&("esriSpatialRelEnvelopeIntersects"===i||"esriGeometryPoint"===this.geometryType&&("esriSpatialRelIntersects"===i||"esriSpatialRelContains"===i||"esriSpatialRelWithin"===i))}async _project(e,t){if(!t||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_12__.equals)(this.spatialReference,t))return e;const i=this.featureAdapter,s=await (0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.projectMany)(e.items.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.getGeometry)(this.geometryType,this.hasZ,this.hasM,i.getGeometry(e)))),this.spatialReference,t);return e.items=s.map(((t,s)=>i.cloneWithGeometry(e.items[s],(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_13__.convertFromGeometry)(t,this.hasZ,this.hasM)))),e}_getQueryBBoxes(e){if((0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.canQueryWithRBush)(e)){if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.isExtent)(e))return[(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.fromValues)(e.xmin,e.ymin,e.xmax,e.ymax)];if((0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_10__.isPolygon)(e))return e.rings.map((e=>(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.fromValues)(Math.min(e[0][0],e[2][0]),Math.min(e[0][1],e[2][1]),Math.max(e[0][0],e[2][0]),Math.max(e[0][1],e[2][1]))))}return[(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_9__.getBoundsXY)((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_8__.create)(),e)]}async _searchFeatures(e){const t=new Set;await Promise.all(e.map((e=>this.featureStore.forEachInBounds(e,(e=>t.add(e))))));const i=Array.from(t.values());return t.clear(),i}async _checkStatisticsSupport(e,t){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text||e.outStatistics||e.groupByFieldsForStatistics||e.having||e.orderByFields)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Unsupported query options",{query:e});return this._checkAttributesQuerySupport(e),Promise.all([this._checkStatisticsParamsSupport(t,e),(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.checkSpatialQuerySupport)(e,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(this.spatialReference,e.outSR)]).then((()=>e))}async _checkStatisticsParamsSupport(e,t){let s=[];if(e.valueExpression){const{arcadeUtils:t}=await (0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_22__.loadArcade)();s=t.extractFieldNames(e.valueExpression)}if(e.field&&s.push(e.field),e.field2&&s.push(e.field2),e.field3&&s.push(e.field3),e.normalizationField&&s.push(e.normalizationField),!s.length&&!e.valueExpression)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"field or valueExpression is required",{params:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,s,{errorMessage:"Cannot calculate statistics for missing fields",query:t}),(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFieldTypes)(this.fieldsIndex,s,{expressionName:"statistics",query:t})}async _checkQuerySupport(e){if((e.distance??0)<0||null!=e.geometryPrecision||e.multipatchOption||e.pixelSize||e.relationParam||e.text)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"Unsupported query options",{query:e});return this._checkAttributesQuerySupport(e),this._checkStatisticsQuerySupport(e),Promise.all([(0,_spatialQuerySupport_js__WEBPACK_IMPORTED_MODULE_18__.checkSpatialQuerySupport)(e,this.geometryType,this.spatialReference),(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_15__.checkProjectionSupport)(this.spatialReference,e.outSR)]).then((()=>e))}_checkAttributesQuerySupport(e){const{outFields:t,orderByFields:s,returnDistinctValues:r,outStatistics:a}=e,n=a?a.map((e=>e.outStatisticFieldName&&e.outStatisticFieldName.toLowerCase())).filter(Boolean):[];if(s&&s.length>0){const t=" asc",i=" desc",r=s.map((e=>{const s=e.toLowerCase();return s.includes(t)?s.split(t)[0]:s.includes(i)?s.split(i)[0]:e})).filter((e=>!n.includes(e)));(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,r,{expressionName:"orderByFields",query:e})}if(t&&t.length>0)(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,t,{expressionName:"outFields",query:e});else if(r)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"outFields should be specified for returnDistinctValues",{query:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateWhere)(this.fieldsIndex,e.where,e)}_checkStatisticsQuerySupport(e){const{outStatistics:t,groupByFieldsForStatistics:s,having:r}=e,a=s&&s.length,n=t&&t.length;if(r){if(!a||!n)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"outStatistics and groupByFieldsForStatistics should be specified with having",{query:e});(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateHaving)(this.fieldsIndex,r,t,e)}if(n){if(!$(t))return;const r=t.map((e=>e.onStatisticField)).filter(Boolean);(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,r,{expressionName:"onStatisticFields",query:e}),a&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validateFields)(this.fieldsIndex,s,{expressionName:"groupByFieldsForStatistics",query:e});const n=new Set([..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validNumericTypesKebabDict.jsonValues,..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validDateTypesKebabDict.jsonValues]),u=new Intl.ListFormat("en-US",{type:"conjunction"}).format([..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validNumericTypesKebabDict.apiValues,..._attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.validDateTypesKebabDict.apiValues]);for(const s of t){const{onStatisticField:t,statisticType:r}=s;if(("percentile_disc"===r||"percentile_cont"===r)&&"statisticParameters"in s){const{statisticParameters:t}=s;if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,"statisticParameters should be set for percentile type",{definition:s,query:e})}else if("count"!==r&&"min"!==r&&"max"!==r&&t&&(0,_attributeSupport_js__WEBPACK_IMPORTED_MODULE_14__.hasInvalidFieldType)(t,this.fieldsIndex,n))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](W,`outStatistics with '${r}' statistic type, only supports ${u} field types`,{definition:s,query:e})}}}async _getQueryEngineResultForStats(e,t,i){e=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(e);try{e=await this._schedule((()=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_20__.normalizeQuery)(e,this.definitionExpression,this.spatialReference)),i),e=await this._reschedule((()=>this._checkStatisticsSupport(e,t)),i);const s=await this._reschedule((()=>this._executeSceneFilterQuery(e,i)),i),r=await this._reschedule((()=>this._executeGeometryQuery(e,s,i)),i);return await this._reschedule((()=>this._executeAggregateIdsQuery(r)),i),await this._reschedule((()=>this._executeObjectIdsQuery(r)),i),await this._reschedule((()=>this._executeTimeQuery(r)),i),await this._reschedule((()=>this._executeAttributesQuery(r)),i),r}catch(r){if(r!==_utils_js__WEBPACK_IMPORTED_MODULE_20__.QUERY_ENGINE_EMPTY_RESULT)throw r;return new _QueryEngineResult_js__WEBPACK_IMPORTED_MODULE_17__.QueryEngineResult([],e,this)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineCapabilities.js ***!
  \***********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   queryCapabilities: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const t={supportsStatistics:!0,supportsPercentileStatistics:!0,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsCentroid:!0,supportsCacheHint:!1,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsQuantizationEditMode:!1,supportsQueryGeometry:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsMaxRecordCountFactor:!1,supportsStandardizedQueriesOnly:!0,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!0,supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,maxRecordCountFactor:void 0,maxRecordCount:void 0,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0};


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/QueryEngineResult.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   QueryEngineResult: () => (/* binding */ z)
/* harmony export */ });
/* harmony import */ var _geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../geometry/support/centroid.js */ "./node_modules/@arcgis/core/geometry/support/centroid.js");
/* harmony import */ var _geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../geometry/support/extentUtils.js */ "./node_modules/@arcgis/core/geometry/support/extentUtils.js");
/* harmony import */ var _geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/quantizationUtils.js */ "./node_modules/@arcgis/core/geometry/support/quantizationUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./AttributesBuilder.js */ "./node_modules/@arcgis/core/layers/graphics/data/AttributesBuilder.js");
/* harmony import */ var _projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./SnappingCandidate.js */ "./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/layers/graphics/data/utils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../statistics/utils.js */ "./node_modules/@arcgis/core/statistics/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class z{constructor(e,t,s){this.items=e,this.query=t,this.geometryType=s.geometryType,this.hasM=s.hasM,this.hasZ=s.hasZ,this.fieldsIndex=s.fieldsIndex,this.objectIdField=s.objectIdField,this.spatialReference=s.spatialReference,this.featureAdapter=s.featureAdapter}get size(){return this.items.length}createQueryResponseForCount(){const e=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](this.query,this.featureAdapter,this.fieldsIndex);if(!this.query.outStatistics)return e.countDistinctValues(this.items);const{groupByFieldsForStatistics:t,having:s,outStatistics:i}=this.query,a=t?.length;if(!!!a)return 1;const r=new Map,n=new Map,l=new Set;for(const o of i){const{statisticType:i}=o,a="exceedslimit"!==i?o.onStatisticField:void 0;if(!n.has(a)){const s=[];for(const i of t){const t=this._getAttributeValues(e,i,r);s.push(t)}n.set(a,this._calculateUniqueValues(s,e.returnDistinctValues))}const u=n.get(a);for(const t in u){const{data:i,items:a}=u[t],r=i.join(",");s&&!e.validateItems(a,s)||l.add(r)}}return l.size}async createQueryResponse(){let e;if(this.query.outStatistics){e=this.query.outStatistics.some((e=>"exceedslimit"===e.statisticType))?this._createExceedsLimitQueryResponse(this.query):await this._createStatisticsQueryResponse(this.query)}else e=this._createFeatureQueryResponse(this.query);if(this.query.returnQueryGeometry){const t=this.query.geometry;(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.isValid)(this.query.outSR)&&!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.equals)(t.spatialReference,this.query.outSR)?e.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__.project)(t,t.spatialReference,this.query.outSR)}):e.queryGeometry=(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)({spatialReference:this.query.outSR,...t})}return e}createSnappingResponse(e,t){const s=this.featureAdapter,i=b(this.hasZ,this.hasM),{point:a,mode:r}=e,n="number"==typeof e.distance?e.distance:e.distance.x,o="number"==typeof e.distance?e.distance:e.distance.y,l={candidates:[]},d="esriGeometryPolygon"===this.geometryType,m=this._getPointCreator(r,this.spatialReference,t),h=new A(null,0),g=new A(null,0),f={x:0,y:0,z:0};for(const p of this.items){const t=s.getGeometry(p);if(null==t)continue;const{coords:r,lengths:y}=t;if(h.coords=r,g.coords=r,e.returnEdge){let e=0;for(let t=0;t<y.length;t++){const r=y[t];for(let t=0;t<r;t++,e+=i){const c=h;if(c.coordsIndex=e,t!==r-1){const t=g;t.coordsIndex=e+i;const r=f;R(f,a,c,t);const d=(a.x-r.x)/n,h=(a.y-r.y)/o,y=d*d+h*h;y<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__.makeEdgeCandidate)(s.getObjectId(p),m(r),Math.sqrt(y),m(c),m(t)))}}}}if(e.returnVertex){const e=d?r.length-i:r.length;for(let t=0;t<e;t+=i){const e=h;e.coordsIndex=t;const i=(a.x-e.x)/n,r=(a.y-e.y)/o,u=i*i+r*r;u<=1&&l.candidates.push((0,_SnappingCandidate_js__WEBPACK_IMPORTED_MODULE_6__.makeVertexCandidate)(s.getObjectId(p),m(e),Math.sqrt(u)))}}}return l.candidates.sort(((e,t)=>e.distance-t.distance)),l}_getPointCreator(e,t,s){const i=null==s||(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_3__.equals)(t,s)?e=>e:e=>(0,_projectionSupport_js__WEBPACK_IMPORTED_MODULE_5__.project)(e,t,s),{hasZ:a}=this,r=0;return"3d"===e?a?({x:e,y:t,z:s})=>i({x:e,y:t,z:s}):({x:e,y:t})=>i({x:e,y:t,z:r}):({x:e,y:t})=>i({x:e,y:t})}async createSummaryStatisticsResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,minValue:n,maxValue:o,scale:l}=e,u=this.fieldsIndex.isDateField(t),c=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:l}),d=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.isNullCountSupported)({normalizationType:a,normalizationField:i,minValue:n,maxValue:o}),m=this.fieldsIndex.get(t),h={value:.5,fieldType:m?.type},I=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__.isStringField)(m)?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStringStatistics)({values:c,supportsNullCount:d,percentileParams:h}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStatistics)({values:c,minValue:n,maxValue:o,useSampleStdDev:!a,supportsNullCount:d,percentileParams:h});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.processSummaryStatisticsResult)(I,u)}async createUniqueValuesResponse(e){const{field:t,valueExpression:s,domains:i,returnAllCodedValues:a,scale:r}=e,n=await this._getDataValues({field:t,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:s,scale:r}),o=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateUniqueValuesCount)(n);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.createUVResult)(o,i,a,e.fieldDelimiter)}async createClassBreaksResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c,scale:d}=e,m=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d}),h=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateClassBreaks)(m,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numClasses:c});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.resolveCBResult)(h,n)}async createHistogramResponse(e){const{field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c,scale:d}=e,m=await this._getDataValues({field:t,valueExpression:s,normalizationField:i,normalizationType:a,normalizationTotal:r,scale:d});return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateHistogram)(m,{field:t,normalizationField:i,normalizationType:a,normalizationTotal:r,classificationMethod:n,standardDeviationInterval:o,minValue:l,maxValue:u,numBins:c})}_sortFeatures(e,t,s){if(e.length>1&&t&&t.length)for(const i of t.reverse()){const t=i.split(" "),a=t[0],r=this.fieldsIndex.get(a),n=!!t[1]&&"desc"===t[1].toLowerCase(),o=(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.getAttributeComparator)(r?.type,n);e.sort(((e,t)=>{const i=s(e,a,r),n=s(t,a,r);return o(i,n)}))}}_createFeatureQueryResponse(e){const t=this.items,{geometryType:s,hasM:i,hasZ:r,objectIdField:n,spatialReference:o}=this,{outFields:l,outSR:u,quantizationParameters:c,resultRecordCount:m,resultOffset:h,returnZ:g,returnM:f}=e,p=null!=m&&t.length>(h||0)+m,y=l&&(l.includes("*")?[...this.fieldsIndex.fields]:l.map((e=>this.fieldsIndex.get(e))));return{exceededTransferLimit:p,features:this._createFeatures(e,t),fields:y,geometryType:s,hasM:i&&f,hasZ:r&&g,objectIdFieldName:n,spatialReference:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.cleanFromGeometryEngine)(u||o),transform:c&&(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.toQuantizationTransform)(c)||null}}_createFeatures(e,t){const s=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](e,this.featureAdapter,this.fieldsIndex),{hasM:i,hasZ:r}=this,{orderByFields:n,quantizationParameters:l,returnGeometry:u,returnCentroid:c,maxAllowableOffset:d,resultOffset:g,resultRecordCount:f,returnZ:p=!1,returnM:y=!1}=e,x=r&&p,I=i&&y;let T=[],V=0;const F=[...t];if(this._sortFeatures(F,n,((e,t,i)=>s.getFieldValue(e,t,i))),u||c){const e=(0,_geometry_support_quantizationUtils_js__WEBPACK_IMPORTED_MODULE_2__.toQuantizationTransform)(l)??void 0;if(u&&!c)for(const t of F)T[V++]={attributes:s.getAttributes(t),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,x,I)};else if(!u&&c)for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e)};else for(const t of F)T[V++]={attributes:s.getAttributes(t),centroid:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.transformCentroid)(this,this.featureAdapter.getCentroid(t,this),e),geometry:(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(this.geometryType,this.hasZ,this.hasM,this.featureAdapter.getGeometry(t),d,e,x,I)}}else for(const a of F){const e=s.getAttributes(a);e&&(T[V++]={attributes:e})}const S=g||0;if(null!=f){const e=S+f;T=T.slice(S,Math.min(T.length,e))}return T}_createExceedsLimitQueryResponse(e){let t=!1,s=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;for(const r of e.outStatistics??[])if("exceedslimit"===r.statisticType){s=null!=r.maxPointCount?r.maxPointCount:Number.POSITIVE_INFINITY,i=null!=r.maxRecordCount?r.maxRecordCount:Number.POSITIVE_INFINITY,a=null!=r.maxVertexCount?r.maxVertexCount:Number.POSITIVE_INFINITY;break}if("esriGeometryPoint"===this.geometryType)t=this.items.length>s;else if(this.items.length>i)t=!0;else{const e=b(this.hasZ,this.hasM),s=this.featureAdapter;t=this.items.reduce(((e,t)=>{const i=s.getGeometry(t);return e+(null!=i&&i.coords.length||0)}),0)/e>a}return{fields:[{name:"exceedslimit",type:"esriFieldTypeInteger",alias:"exceedslimit",sqlType:"sqlTypeInteger",domain:null,defaultValue:null}],features:[{attributes:{exceedslimit:Number(t)}}]}}async _createStatisticsQueryResponse(e){const t={attributes:{}},s=[],i=new Map,a=new Map,r=new Map,n=new Map,l=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](e,this.featureAdapter,this.fieldsIndex),u=e.outStatistics,{groupByFieldsForStatistics:c,having:d,orderByFields:m}=e,h=c&&c.length,g=!!h,f=g?c[0]:null,p=g&&!this.fieldsIndex.get(f);for(const o of u??[]){const{outStatisticFieldName:e,statisticType:u}=o,m=o,y="exceedslimit"!==u?o.onStatisticField:void 0,x="percentile_disc"===u||"percentile_cont"===u,I="EnvelopeAggregate"===u||"CentroidAggregate"===u||"ConvexHullAggregate"===u,T=g&&1===h&&(y===f||p)&&"count"===u;if(g){if(!r.has(y)){const e=[];for(const t of c){const s=this._getAttributeValues(l,t,i);e.push(s)}r.set(y,this._calculateUniqueValues(e,!I&&l.returnDistinctValues))}const t=r.get(y);for(const s in t){const{count:a,data:r,items:o,itemPositions:u}=t[s],h=r.join(",");if(!d||l.validateItems(o,d)){const t=n.get(h)||{attributes:{}};if(I){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,o);t.aggregateGeometries[s]=e}else{let s=null;if(T)s=a;else{const e=this._getAttributeValues(l,y,i),t=u.map((t=>e[t]));s=x&&"statisticParameters"in m?this._getPercentileValue(m,t):this._getStatisticValue(m,t,null,l.returnDistinctValues)}t.attributes[e]=s}let s=0;c.forEach(((e,i)=>t.attributes[this.fieldsIndex.get(e)?e:"EXPR_"+ ++s]=r[i])),n.set(h,t)}}}else if(I){t.aggregateGeometries||(t.aggregateGeometries={});const{aggregateGeometries:e,outStatisticFieldName:s}=await this._getAggregateGeometry(m,this.items);t.aggregateGeometries[s]=e}else{const s=this._getAttributeValues(l,y,i);t.attributes[e]=x&&"statisticParameters"in m?this._getPercentileValue(m,s):this._getStatisticValue(m,s,a,l.returnDistinctValues)}s.push({name:e,alias:e,type:"esriFieldTypeDouble"})}const y=g?Array.from(n.values()):[t];return this._sortFeatures(y,m,((e,t)=>e.attributes[t])),{fields:s,features:y}}async _getAggregateGeometry(a,r){const{convexHull:n,union:o}=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js")),{statisticType:l,outStatisticFieldName:u}=a,{featureAdapter:c,spatialReference:d,geometryType:h,hasZ:g,hasM:f}=this,p=r.map((e=>(0,_utils_js__WEBPACK_IMPORTED_MODULE_7__.getGeometry)(h,g,f,c.getGeometry(e)))),y=n(d,p,!0)[0],x={aggregateGeometries:null,outStatisticFieldName:null};if("EnvelopeAggregate"===l){const e=y?(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getPolygonExtent)(y):(0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometryExtent)(o(d,p));x.aggregateGeometries={...e,spatialReference:d},x.outStatisticFieldName=u||"extent"}else if("CentroidAggregate"===l){const s=y?(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__.polygonCentroid)(y):(0,_geometry_support_centroid_js__WEBPACK_IMPORTED_MODULE_0__.extentCentroid)((0,_geometry_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_1__.getGeometryExtent)(o(d,p)));x.aggregateGeometries={x:s[0],y:s[1],spatialReference:d},x.outStatisticFieldName=u||"centroid"}else"ConvexHullAggregate"===l&&(x.aggregateGeometries=y,x.outStatisticFieldName=u||"convexHull");return x}_getStatisticValue(e,t,s,i){const{onStatisticField:a,statisticType:r}=e;let n=null;n=s?.has(a)?s.get(a):(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_8__.isStringField)(this.fieldsIndex.get(a))?(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStringStatistics)({values:t,returnDistinct:i}):(0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculateStatistics)({values:i?[...new Set(t)]:t,minValue:null,maxValue:null,useSampleStdDev:!0}),s&&s.set(a,n);return n["var"===r?"variance":r]}_getPercentileValue(e,t){const{onStatisticField:s,statisticParameters:i,statisticType:a}=e,{value:r,orderBy:n}=i,o=this.fieldsIndex.get(s);return (0,_statistics_utils_js__WEBPACK_IMPORTED_MODULE_9__.calculatePercentile)(t,{value:r,orderBy:n,fieldType:o?.type,isDiscrete:"percentile_disc"===a})}_getAttributeValues(e,t,s){if(s.has(t))return s.get(t);const i=this.fieldsIndex.get(t),a=this.items.map((s=>e.getFieldValue(s,t,i)));return s.set(t,a),a}_calculateUniqueValues(e,t){const s={},i=this.items,a=i.length;for(let r=0;r<a;r++){const a=i[r],n=[];for(const t of e)n.push(t[r]);const o=n.join(",");null==s[o]?s[o]={count:1,data:n,items:[a],itemPositions:[r]}:(t||s[o].count++,s[o].items.push(a),s[o].itemPositions.push(r))}return s}async _getDataValues(e){const t=new _AttributesBuilder_js__WEBPACK_IMPORTED_MODULE_4__["default"](this.query,this.featureAdapter,this.fieldsIndex),{valueExpression:s,scale:i}=e,a=s?{viewingMode:"map",scale:i,spatialReference:this.query.outSR||this.spatialReference}:null;return s?t.getExpressionValues(this.items,s,a,{geometryType:this.geometryType,hasZ:this.hasZ,hasM:this.hasM}):t.getDataValues(this.items,{field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,normalizationField:e.normalizationField,normalizationType:e.normalizationType,normalizationTotal:e.normalizationTotal})}}function R(e,t,s,i){const a=i.x-s.x,r=i.y-s.y,n=a*a+r*r,o=(t.x-s.x)*a+(t.y-s.y)*r,l=Math.min(1,Math.max(0,o/n));e.x=s.x+a*l,e.y=s.y+r*l}function b(e,t){return e?t?4:3:t?3:2}class A{constructor(e,t){this.coords=e,this.coordsIndex=t}get x(){return this.coords[this.coordsIndex]}get y(){return this.coords[this.coordsIndex+1]}get z(){return this.coords[this.coordsIndex+2]}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/SnappingCandidate.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   makeEdgeCandidate: () => (/* binding */ e),
/* harmony export */   makeVertexCandidate: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(t,e,r){return{objectId:t,target:e,distance:r,type:"vertex"}}function e(t,e,r,n,d,a=!1){return{objectId:t,target:e,distance:r,type:"edge",start:n,end:d,draped:a}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/data/attributeSupport.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getAliasFromFieldName: () => (/* binding */ v),
/* harmony export */   getExpressionFromFieldName: () => (/* binding */ w),
/* harmony export */   getWhereClause: () => (/* binding */ y),
/* harmony export */   hasInvalidFieldType: () => (/* binding */ F),
/* harmony export */   validDateTypesKebabDict: () => (/* binding */ l),
/* harmony export */   validGuidTypesKebabDict: () => (/* binding */ d),
/* harmony export */   validNumericTypesKebabDict: () => (/* binding */ a),
/* harmony export */   validStringTypesKebabDict: () => (/* binding */ o),
/* harmony export */   validateFieldTypes: () => (/* binding */ x),
/* harmony export */   validateFields: () => (/* binding */ m),
/* harmony export */   validateHaving: () => (/* binding */ f),
/* harmony export */   validateWhere: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/jsonMap.js */ "./node_modules/@arcgis/core/core/jsonMap.js");
/* harmony import */ var _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/sql/WhereClauseCache.js */ "./node_modules/@arcgis/core/core/sql/WhereClauseCache.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const n=new _core_sql_WhereClauseCache_js__WEBPACK_IMPORTED_MODULE_2__.WhereClauseCache(50,500),r="feature-store:unsupported-query",t=" as ",o=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeString:"string"}),a=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeOID:"oid",esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long"}),l=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeDate:"date"}),d=new _core_jsonMap_js__WEBPACK_IMPORTED_MODULE_1__.JSONMap({esriFieldTypeGUID:"guid",esriFieldTypeGlobalId:"global-id"}),p=new Set([...a.jsonValues,...l.jsonValues,...o.jsonValues,...d.jsonValues]),u=new Intl.ListFormat("en-US",{type:"conjunction"}).format([...a.apiValues,...l.apiValues,...o.apiValues,...d.apiValues]);function g(s,i,n={}){const t=y(s,i);if(!t)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,"invalid SQL expression",{expression:s});const o=n.expressionName||"expression";if(n.validateStandardized&&!t.isStandardized)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,`${o} is not standard`,{expression:s});if(n.validateAggregate&&!t.isAggregate)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,`${o} does not contain a valid aggregate function`,{expression:s});return t.fieldNames}function c(e,s,i){if(!s)return!0;const n="where clause",r=g(s,e,{validateStandardized:!0,expressionName:n});return m(e,r,{expressionName:n,query:i}),x(e,r,{expressionName:n,query:i}),!0}function f(s,i,t,o){if(!i)return!0;const a="having",l=g(i,s,{validateAggregate:!0,expressionName:a});m(s,l,{expressionName:a,query:o}),x(s,l,{expressionName:a,query:o});const d=n.get(i,s),p=d?.getExpressions().every((e=>{const{aggregateType:i,field:n}=e,r=s.get(n)?.name;return t.some((e=>{const{onStatisticField:n,statisticType:t}=e,o=s.get(n)?.name;return o===r&&t.toLowerCase().trim()===i}))}));if(!p)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,"expressions in having should also exist in outStatistics",{having:i});return!0}function y(e,s){return e?n.get(e,s):null}function m(e,s,i={}){i.errorMessage||(i.errorMessage=i.expressionName?`${i.expressionName} contains invalid fields`:"Fields are invalid"),h(e,s,((e,s)=>s.has(e)),i)}function x(e,s,i={}){i.errorMessage||(i.errorMessage=i.expressionName?`${i.expressionName} only supports ${u} field types`:`Only ${u} field types are supported`),h(e,s,((e,s)=>!F(e,s)),i)}function h(s,i,n,t={}){const o=t.verifyExpression??!0,a=[];for(const e of i){const i=n(e,s);if("*"!==e&&!i)if(o){const i=w(e);try{h(s,g(i,s,{validateStandardized:!0}),n,t)}catch(l){const s=l?.details;if(s?.expression)throw l;s?.invalidFields?a.push(...s.invalidFields):a.push(e)}}else a.push(e)}if(a.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,t.errorMessage,{invalidFields:a,query:t.query})}function w(e){return e.split(t)[0]}function v(e){return e.split(t)[1]}function F(e,s,i=p){const n=s.get(e);return!!n&&!i.has(n.type)}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19kYXRhX1F1ZXJ5RW5naW5lX2pzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUN5RixRQUFRLGlCQUFpQixnQkFBZ0Isa0RBQUMsMkJBQTJCLGtEQUFDLElBQUksU0FBUyxXQUFXLE1BQU0sR0FBRyxFQUFFLHVCQUF1QixjQUFjLGtEQUFrRCxJQUFJLFFBQVEsd0RBQUMsYUFBYSw4QkFBOEIsTUFBTSw2Q0FBMkU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKbGE7QUFDQTtBQUNBO0FBQ0E7QUFDbVQsUUFBUSxtQkFBbUIsMkpBQTJKLG9CQUFvQix3QkFBd0IsaUJBQWlCLFFBQVEsa0JBQWtCLFFBQVEsZ0ZBQUMsdUNBQXVDLG9FQUFDLGlCQUFpQiwyRUFBQyxzQkFBc0IsNEJBQTRCLGlCQUFpQixJQUFJLHVCQUF1QiwrR0FBK0csaUJBQWlCLCtDQUErQyxtREFBbUQscUJBQXFCLG1CQUFtQixXQUFXLCtFQUErRSxvRUFBQyxpREFBaUQsaUJBQWlCLG9GQUFvRixtQkFBbUIsbURBQW1ELGtCQUFrQiwyRUFBMkUsbUJBQW1CLHNFQUFDLElBQUksRUFBRSxpQkFBaUIsRUFBRSxzRUFBQyxnRUFBZ0Usa0JBQWtCLEVBQUUsRUFBRSxpQkFBaUIsRUFBRSxzRUFBQyxnRUFBZ0UsMkJBQTJCLHFJQUFxSSxFQUFFLHdFQUFDLFVBQVUsU0FBUyxHQUFHLG1DQUFtQyxNQUFNLGNBQWMsT0FBTyxzRUFBQyxnQ0FBZ0Msc0NBQXNDLHFEQUFxRCxnQ0FBZ0Msa0JBQWtCLFNBQVMsb0VBQW9FLEdBQUcsc0RBQUMsdUdBQXVHLE1BQU0sNEJBQTRCLDhCQUE4QixHQUFHLGtCQUFrQixnRUFBZ0UsZUFBZSxvRUFBQyxxQkFBcUIsOEVBQThFLG1CQUFtQixnRUFBZ0UsZUFBZSxvRUFBQyxxQkFBcUIsMEVBQTBFLGtDQUFrQyx1QkFB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LDBFQUEwRSxtQkFBbUIsRUFBRSxvREFBb0Qsa0JBQWtCLGdCQUFnQixHQUFHLHFCQUFxQixHQUFHLHNEQUFzRCxxQkFBcUIsRUFBRSxvQ0FBb0Msa0JBQWtCLGVBQWUscUJBQXFCLGFBQWEsSUFBSSxXQUFXLHdCQUF3QixPQUFPLFNBQVMsbUJBQW1CLHlCQUF5Qix1REFBdUQsZUFBZSxzQkFBc0Isc0RBQUMsbUJBQW1CLDhCQUE4QixFQUFFLGNBQWMscUJBQXFCLGNBQWMscUJBQXFCLG9CQUFvQixpQkFBaUIsMEJBQXNWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvY29yZS9zcWwvV2hlcmVDbGF1c2VDYWNoZS5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9BdHRyaWJ1dGVzQnVpbGRlci5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZS5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZUNhcGFiaWxpdGllcy5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9RdWVyeUVuZ2luZVJlc3VsdC5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9TbmFwcGluZ0NhbmRpZGF0ZS5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3MvZGF0YS9hdHRyaWJ1dGVTdXBwb3J0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7TFJVQ2FjaGUgYXMgdH1mcm9tXCIuLi9MUlVDYWNoZS5qc1wiO2ltcG9ydHtXaGVyZUNsYXVzZSBhcyBlfWZyb21cIi4vV2hlcmVDbGF1c2UuanNcIjtjbGFzcyBje2NvbnN0cnVjdG9yKGUsYyl7dGhpcy5fY2FjaGU9bmV3IHQoZSksdGhpcy5faW52YWxpZENhY2hlPW5ldyB0KGMpfWdldCh0LGMpe2NvbnN0IGk9YCR7Yy51aWR9OiR7dH1gLHI9dGhpcy5fY2FjaGUuZ2V0KGkpO2lmKHIpcmV0dXJuIHI7aWYodm9pZCAwIT09dGhpcy5faW52YWxpZENhY2hlLmdldChpKSlyZXR1cm4gbnVsbDt0cnl7Y29uc3Qgcj1lLmNyZWF0ZSh0LGMpO3JldHVybiB0aGlzLl9jYWNoZS5wdXQoaSxyKSxyfWNhdGNoe3JldHVybiB0aGlzLl9pbnZhbGlkQ2FjaGUucHV0KGksbnVsbCksbnVsbH19fWV4cG9ydHtjIGFzIFdoZXJlQ2xhdXNlQ2FjaGV9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtnZXRFeHByZXNzaW9uRnJvbUZpZWxkTmFtZSBhcyB0LGdldFdoZXJlQ2xhdXNlIGFzIGUsZ2V0QWxpYXNGcm9tRmllbGROYW1lIGFzIGl9ZnJvbVwiLi9hdHRyaWJ1dGVTdXBwb3J0LmpzXCI7aW1wb3J0e2dldEdlb21ldHJ5IGFzIHN9ZnJvbVwiLi91dGlscy5qc1wiO2ltcG9ydHtwcm9jZXNzTnVsbFZhbHVlIGFzIGEsZ2V0Tm9ybWFsaXplZFZhbHVlIGFzIGx9ZnJvbVwiLi4vLi4vLi4vc3RhdGlzdGljcy91dGlscy5qc1wiO2ltcG9ydHtsb2FkQXJjYWRlIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9hcmNhZGVPbkRlbWFuZC5qc1wiO2NsYXNzIG57Y29uc3RydWN0b3IocyxhLGwpe3RoaXMuX2ZpZWxkRGF0YUNhY2hlPW5ldyBNYXAsdGhpcy5fcmV0dXJuRGlzdGluY3RNYXA9bmV3IE1hcCx0aGlzLnJldHVybkRpc3RpbmN0VmFsdWVzPXMucmV0dXJuRGlzdGluY3RWYWx1ZXM/PyExLHRoaXMuZmllbGRzSW5kZXg9bCx0aGlzLmZlYXR1cmVBZGFwdGVyPWE7Y29uc3Qgcj1zLm91dEZpZWxkcztpZihyJiYhci5pbmNsdWRlcyhcIipcIikpe3RoaXMub3V0RmllbGRzPXI7bGV0IHM9MDtmb3IoY29uc3QgYSBvZiByKXtjb25zdCByPXQoYSksbj10aGlzLmZpZWxkc0luZGV4LmdldChyKSx1PW4/bnVsbDplKHIsbCksZD1uP24ubmFtZTppKGEpfHxcIkZJRUxEX0VYUF9cIitzKys7dGhpcy5fZmllbGREYXRhQ2FjaGUuc2V0KGEse2FsaWFzOmQsY2xhdXNlOnV9KX19fWNvdW50RGlzdGluY3RWYWx1ZXModCl7cmV0dXJuIHRoaXMucmV0dXJuRGlzdGluY3RWYWx1ZXM/KHQuZm9yRWFjaCgodD0+dGhpcy5nZXRBdHRyaWJ1dGVzKHQpKSksdGhpcy5fcmV0dXJuRGlzdGluY3RNYXAuc2l6ZSk6dC5sZW5ndGh9Z2V0QXR0cmlidXRlcyh0KXtjb25zdCBlPXRoaXMuX3Byb2Nlc3NBdHRyaWJ1dGVzRm9yT3V0RmllbGRzKHQpO3JldHVybiB0aGlzLl9wcm9jZXNzQXR0cmlidXRlc0ZvckRpc3RpbmN0VmFsdWVzKGUpfWdldEZpZWxkVmFsdWUodCxpLHMpe2NvbnN0IGE9cz9zLm5hbWU6aTtsZXQgbD1udWxsO3JldHVybiB0aGlzLl9maWVsZERhdGFDYWNoZS5oYXMoYSk/bD10aGlzLl9maWVsZERhdGFDYWNoZS5nZXQoYSk/LmNsYXVzZTpzfHwobD1lKGksdGhpcy5maWVsZHNJbmRleCksdGhpcy5fZmllbGREYXRhQ2FjaGUuc2V0KGEse2FsaWFzOmEsY2xhdXNlOmx9KSkscz90aGlzLmZlYXR1cmVBZGFwdGVyLmdldEF0dHJpYnV0ZSh0LGEpOmw/LmNhbGN1bGF0ZVZhbHVlKHQsdGhpcy5mZWF0dXJlQWRhcHRlcil9Z2V0RGF0YVZhbHVlcyh0LGUpe2NvbnN0IGk9ZS5ub3JtYWxpemF0aW9uVHlwZSxzPWUubm9ybWFsaXphdGlvblRvdGFsO3JldHVybiB0Lm1hcCgodD0+e2xldCByPWUuZmllbGQmJnRoaXMuZ2V0RmllbGRWYWx1ZSh0LGUuZmllbGQsdGhpcy5maWVsZHNJbmRleC5nZXQoZS5maWVsZCkpO2lmKGUuZmllbGQyJiYocj1gJHthKHIpfSR7ZS5maWVsZERlbGltaXRlcn0ke2EodGhpcy5nZXRGaWVsZFZhbHVlKHQsZS5maWVsZDIsdGhpcy5maWVsZHNJbmRleC5nZXQoZS5maWVsZDIpKSl9YCxlLmZpZWxkMyYmKHI9YCR7cn0ke2UuZmllbGREZWxpbWl0ZXJ9JHthKHRoaXMuZ2V0RmllbGRWYWx1ZSh0LGUuZmllbGQzLHRoaXMuZmllbGRzSW5kZXguZ2V0KGUuZmllbGQzKSkpfWApKSxpJiZOdW1iZXIuaXNGaW5pdGUocikpe2NvbnN0IGE9XCJmaWVsZFwiPT09aSYmZS5ub3JtYWxpemF0aW9uRmllbGQ/dGhpcy5nZXRGaWVsZFZhbHVlKHQsZS5ub3JtYWxpemF0aW9uRmllbGQsdGhpcy5maWVsZHNJbmRleC5nZXQoZS5ub3JtYWxpemF0aW9uRmllbGQpKTpudWxsO3I9bChyLGksYSxzKX1yZXR1cm4gcn0pKX1hc3luYyBnZXRFeHByZXNzaW9uVmFsdWVzKHQsZSxpLGEpe2NvbnN0e2FyY2FkZVV0aWxzOmx9PWF3YWl0IHIoKSxuPWwuaGFzR2VvbWV0cnlPcGVyYXRpb25zKGUpO24mJmF3YWl0IGwuZW5hYmxlR2VvbWV0cnlPcGVyYXRpb25zKCk7Y29uc3QgdT1sLmNyZWF0ZUZ1bmN0aW9uKGUpLGQ9aSYmbC5nZXRWaWV3SW5mbyhpKSxvPXtmaWVsZHM6dGhpcy5maWVsZHNJbmRleC5maWVsZHN9O3JldHVybiB0Lm1hcCgodD0+e2NvbnN0IGU9e2F0dHJpYnV0ZXM6dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRBdHRyaWJ1dGVzKHQpLGxheWVyOm8sZ2VvbWV0cnk6bj97Li4ucyhhLmdlb21ldHJ5VHlwZSxhLmhhc1osYS5oYXNNLHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0R2VvbWV0cnkodCkpLHNwYXRpYWxSZWZlcmVuY2U6aT8uc3BhdGlhbFJlZmVyZW5jZX06bnVsbH0scj1sLmNyZWF0ZUV4ZWNDb250ZXh0KGUsZCk7cmV0dXJuIGwuZXhlY3V0ZUZ1bmN0aW9uKHUscil9KSl9dmFsaWRhdGVJdGVtKHQsaSl7cmV0dXJuIHRoaXMuX2ZpZWxkRGF0YUNhY2hlLmhhcyhpKXx8dGhpcy5fZmllbGREYXRhQ2FjaGUuc2V0KGkse2FsaWFzOmksY2xhdXNlOmUoaSx0aGlzLmZpZWxkc0luZGV4KX0pLHRoaXMuX2ZpZWxkRGF0YUNhY2hlLmdldChpKT8uY2xhdXNlPy50ZXN0RmVhdHVyZSh0LHRoaXMuZmVhdHVyZUFkYXB0ZXIpPz8hMX12YWxpZGF0ZUl0ZW1zKHQsaSl7cmV0dXJuIHRoaXMuX2ZpZWxkRGF0YUNhY2hlLmhhcyhpKXx8dGhpcy5fZmllbGREYXRhQ2FjaGUuc2V0KGkse2FsaWFzOmksY2xhdXNlOmUoaSx0aGlzLmZpZWxkc0luZGV4KX0pLHRoaXMuX2ZpZWxkRGF0YUNhY2hlLmdldChpKT8uY2xhdXNlPy50ZXN0U2V0KHQsdGhpcy5mZWF0dXJlQWRhcHRlcik/PyExfV9wcm9jZXNzQXR0cmlidXRlc0Zvck91dEZpZWxkcyh0KXtjb25zdCBlPXRoaXMub3V0RmllbGRzO2lmKCFlfHwhZS5sZW5ndGgpcmV0dXJuIHRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0QXR0cmlidXRlcyh0KTtjb25zdCBpPXt9O2Zvcihjb25zdCBzIG9mIGUpe2NvbnN0e2FsaWFzOmUsY2xhdXNlOmF9PXRoaXMuX2ZpZWxkRGF0YUNhY2hlLmdldChzKTtpW2VdPWE/YS5jYWxjdWxhdGVWYWx1ZSh0LHRoaXMuZmVhdHVyZUFkYXB0ZXIpOnRoaXMuZmVhdHVyZUFkYXB0ZXIuZ2V0QXR0cmlidXRlKHQsZSl9cmV0dXJuIGl9X3Byb2Nlc3NBdHRyaWJ1dGVzRm9yRGlzdGluY3RWYWx1ZXModCl7aWYobnVsbD09dHx8IXRoaXMucmV0dXJuRGlzdGluY3RWYWx1ZXMpcmV0dXJuIHQ7Y29uc3QgZT10aGlzLm91dEZpZWxkcyxpPVtdO2lmKGUpZm9yKGNvbnN0IGwgb2YgZSl7Y29uc3R7YWxpYXM6ZX09dGhpcy5fZmllbGREYXRhQ2FjaGUuZ2V0KGwpO2kucHVzaCh0W2VdKX1lbHNlIGZvcihjb25zdCBsIGluIHQpaS5wdXNoKHRbbF0pO2NvbnN0IHM9YCR7KGV8fFtcIipcIl0pLmpvaW4oXCIsXCIpfT0ke2kuam9pbihcIixcIil9YDtsZXQgYT10aGlzLl9yZXR1cm5EaXN0aW5jdE1hcC5nZXQocyl8fDA7cmV0dXJuIHRoaXMuX3JldHVybkRpc3RpbmN0TWFwLnNldChzLCsrYSksYT4xP251bGw6dH19ZXhwb3J0e24gYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e1Bvc2l0aW9uSGludCBhcyBlLGluZGV4T2YgYXMgdH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e2Nsb25lIGFzIHN9ZnJvbVwiLi4vLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e3JlbW92ZU1heWJlIGFzIHIsZGVzdHJveU1heWJlIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtNZW1DYWNoZVN0b3JhZ2UgYXMgbixNZW1DYWNoZSBhcyB1fWZyb21cIi4uLy4uLy4uL2NvcmUvTWVtQ2FjaGUuanNcIjtpbXBvcnR7dGhyb3dJZkFib3J0ZWQgYXMgb31mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtnZXRNZXRlcnNQZXJVbml0Rm9yU1IgYXMgbH1mcm9tXCIuLi8uLi8uLi9jb3JlL3VuaXRVdGlscy5qc1wiO2ltcG9ydHtzZXQgYXMgYyxORUdBVElWRV9JTkZJTklUWSBhcyBoLGNyZWF0ZSBhcyBwLGV4cGFuZFdpdGhBQUJCIGFzIG19ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9hYUJvdW5kaW5nQm94LmpzXCI7aW1wb3J0e2Zyb21WYWx1ZXMgYXMgZixjcmVhdGUgYXMgZH1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdSZWN0LmpzXCI7aW1wb3J0e2dldEJvdW5kc1hZIGFzIHl9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9ib3VuZHNVdGlscy5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBnLGlzRXh0ZW50IGFzIF8saXNQb2x5Z29uIGFzIHh9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9qc29uVXRpbHMuanNcIjtpbXBvcnR7bm9ybWFsaXplQ2VudHJhbE1lcmlkaWFuIGFzIHd9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9ub3JtYWxpemVVdGlscy5qc1wiO2ltcG9ydHtlcXVhbHMgYXMgUyxpc1ZhbGlkIGFzIEZ9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9zcGF0aWFsUmVmZXJlbmNlVXRpbHMuanNcIjtpbXBvcnR7Y29udmVydEZyb21HZW9tZXRyeSBhcyBSfWZyb21cIi4uL2ZlYXR1cmVDb252ZXJzaW9uVXRpbHMuanNcIjtpbXBvcnR7Z2V0V2hlcmVDbGF1c2UgYXMgUSx2YWxpZGF0ZUZpZWxkcyBhcyBJLHZhbGlkYXRlRmllbGRUeXBlcyBhcyBqLHZhbGlkYXRlV2hlcmUgYXMgRSx2YWxpZGF0ZUhhdmluZyBhcyBBLHZhbGlkTnVtZXJpY1R5cGVzS2ViYWJEaWN0IGFzIGIsdmFsaWREYXRlVHlwZXNLZWJhYkRpY3QgYXMgcSxoYXNJbnZhbGlkRmllbGRUeXBlIGFzIEN9ZnJvbVwiLi9hdHRyaWJ1dGVTdXBwb3J0LmpzXCI7aW1wb3J0e2NoZWNrUHJvamVjdGlvblN1cHBvcnQgYXMgUCxwcm9qZWN0IGFzIFQscHJvamVjdE1hbnkgYXMgQn1mcm9tXCIuL3Byb2plY3Rpb25TdXBwb3J0LmpzXCI7aW1wb3J0e3F1ZXJ5Q2FwYWJpbGl0aWVzIGFzIGt9ZnJvbVwiLi9RdWVyeUVuZ2luZUNhcGFiaWxpdGllcy5qc1wiO2ltcG9ydHtRdWVyeUVuZ2luZVJlc3VsdCBhcyB2fWZyb21cIi4vUXVlcnlFbmdpbmVSZXN1bHQuanNcIjtpbXBvcnR7Z2V0U3BhdGlhbFF1ZXJ5T3BlcmF0b3IgYXMgeixjYW5RdWVyeVdpdGhSQnVzaCBhcyBPLGNoZWNrU3BhdGlhbFF1ZXJ5U3VwcG9ydCBhcyBHfWZyb21cIi4vc3BhdGlhbFF1ZXJ5U3VwcG9ydC5qc1wiO2ltcG9ydHtnZXRUaW1lRXh0ZW50IGFzIE0sZ2V0VGltZU9wZXJhdG9yIGFzIFV9ZnJvbVwiLi90aW1lU3VwcG9ydC5qc1wiO2ltcG9ydHtRVUVSWV9FTkdJTkVfRU1QVFlfUkVTVUxUIGFzIE4sY2xlYW5Gcm9tR2VvbWV0cnlFbmdpbmUgYXMgWixub3JtYWxpemVRdWVyeSBhcyBWLGdldEdlb21ldHJ5IGFzIEh9ZnJvbVwiLi91dGlscy5qc1wiO2ltcG9ydCBMIGZyb21cIi4uLy4uL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtpbXBvcnR7bG9hZEFyY2FkZSBhcyBEfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvYXJjYWRlT25EZW1hbmQuanNcIjtpbXBvcnR7bm9CdWRnZXQgYXMgSn1mcm9tXCIuLi8uLi8uLi92aWV3cy9zdXBwb3J0L1NjaGVkdWxlci5qc1wiO2Z1bmN0aW9uICQoZSl7cmV0dXJuIG51bGwhPWUmJmUuZXZlcnkoKGU9PlwiZXhjZWVkc2xpbWl0XCIhPT1lLnN0YXRpc3RpY1R5cGUpKX1jb25zdCBXPVwiZmVhdHVyZS1zdG9yZTp1bnN1cHBvcnRlZC1xdWVyeVwiO2NsYXNzIEt7Y29uc3RydWN0b3IoZSx0PW51bGwsaSxzLHIpe3RoaXMuYXR0cmlidXRlcz1lLHRoaXMuZ2VvbWV0cnk9aSx0aGlzLmNlbnRyb2lkPXMsdGhpcy5maWx0ZXJGbGFncz1yLHRoaXMuZ3JvdXBJZD0tMSx0aGlzLmRpc3BsYXlJZD10fX1jb25zdCBYPW5ldyBuKDJlNik7bGV0IFk9MDtjbGFzcyBlZXtjb25zdHJ1Y3RvcihlKXt0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGU9bnVsbCx0aGlzLl9jaGFuZ2VIYW5kbGU9bnVsbCx0aGlzLmNhcGFiaWxpdGllcz17cXVlcnk6a30sdGhpcy5nZW9tZXRyeVR5cGU9ZS5nZW9tZXRyeVR5cGUsdGhpcy5oYXNNPSEhZS5oYXNNLHRoaXMuaGFzWj0hIWUuaGFzWix0aGlzLm9iamVjdElkRmllbGQ9ZS5vYmplY3RJZEZpZWxkLHRoaXMuc3BhdGlhbFJlZmVyZW5jZT1lLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5kZWZpbml0aW9uRXhwcmVzc2lvbj1lLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuZmVhdHVyZVN0b3JlPWUuZmVhdHVyZVN0b3JlLHRoaXMuYWdncmVnYXRlQWRhcHRlcj1lLmFnZ3JlZ2F0ZUFkYXB0ZXIsdGhpcy5fY2hhbmdlSGFuZGxlPXRoaXMuZmVhdHVyZVN0b3JlLmV2ZW50cy5vbihcImNoYW5nZWRcIiwoKCk9PnRoaXMuY2xlYXJDYWNoZSgpKSksdGhpcy50aW1lSW5mbz1lLnRpbWVJbmZvLGUuY2FjaGVTcGF0aWFsUXVlcmllcyYmKHRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZT1uZXcgdShZKysrXCIkJFwiLFgpKSx0aGlzLmZpZWxkc0luZGV4PW5ldyBMKGUuZmllbGRzKSxlLnNjaGVkdWxlciYmZS5wcmlvcml0eSYmKHRoaXMuX2ZyYW1lVGFzaz1lLnNjaGVkdWxlci5yZWdpc3RlclRhc2soZS5wcmlvcml0eSkpfWRlc3Ryb3koKXt0aGlzLl9mcmFtZVRhc2s9cih0aGlzLl9mcmFtZVRhc2spLHRoaXMuY2xlYXJDYWNoZSgpLGEodGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlKSx0aGlzLl9jaGFuZ2VIYW5kbGU9cih0aGlzLl9jaGFuZ2VIYW5kbGUpLGEodGhpcy5maWVsZHNJbmRleCl9Z2V0IGZlYXR1cmVBZGFwdGVyKCl7cmV0dXJuIHRoaXMuZmVhdHVyZVN0b3JlLmZlYXR1cmVBZGFwdGVyfWNsZWFyQ2FjaGUoKXt0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGU/LmNsZWFyKCksdGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlPW51bGwsdGhpcy5fdGltZUV4dGVudFByb21pc2U9bnVsbH1hc3luYyBleGVjdXRlUXVlcnkoZSx0KXt0cnl7cmV0dXJuKGF3YWl0IHRoaXMuX2V4ZWN1dGVRdWVyeShlLHt9LHQpKS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9Y2F0Y2goaSl7aWYoaSE9PU4pdGhyb3cgaTtyZXR1cm4gbmV3IHYoW10sZSx0aGlzKS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvckNvdW50KGU9e30sdCl7dHJ5e3JldHVybihhd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7cmV0dXJuR2VvbWV0cnk6ITEscmV0dXJuQ2VudHJvaWQ6ITEsb3V0U1I6bnVsbH0sdCkpLmNyZWF0ZVF1ZXJ5UmVzcG9uc2VGb3JDb3VudCgpfWNhdGNoKGkpe2lmKGkhPT1OKXRocm93IGk7cmV0dXJuIDB9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvckV4dGVudChlLHQpe2NvbnN0IGk9ZS5vdXRTUjt0cnl7Y29uc3Qgcz1hd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7cmV0dXJuR2VvbWV0cnk6ITAscmV0dXJuQ2VudHJvaWQ6ITEsb3V0U1I6bnVsbH0sdCkscj1zLnNpemU7aWYoIXIpcmV0dXJue2NvdW50OjAsZXh0ZW50Om51bGx9O3JldHVybntjb3VudDpyLGV4dGVudDphd2FpdCB0aGlzLl9nZXRCb3VuZHMocy5pdGVtcyxzLnNwYXRpYWxSZWZlcmVuY2UsaXx8dGhpcy5zcGF0aWFsUmVmZXJlbmNlKX19Y2F0Y2gocyl7aWYocz09PU4pcmV0dXJue2NvdW50OjAsZXh0ZW50Om51bGx9O3Rocm93IHN9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvcklkcyhlLHQpe3JldHVybiB0aGlzLmV4ZWN1dGVRdWVyeUZvcklkU2V0KGUsdCkudGhlbigoZT0+QXJyYXkuZnJvbShlKSkpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvcklkU2V0KGUsdCl7dHJ5e2NvbnN0IGk9YXdhaXQgdGhpcy5fZXhlY3V0ZVF1ZXJ5KGUse3JldHVybkdlb21ldHJ5OiEwLHJldHVybkNlbnRyb2lkOiExLG91dFNSOm51bGx9LHQpLHM9aS5pdGVtcyxyPW5ldyBTZXQ7cmV0dXJuIGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT57Zm9yKGNvbnN0IGUgb2YgcylyLmFkZChpLmZlYXR1cmVBZGFwdGVyLmdldE9iamVjdElkKGUpKX0pLHQpLHJ9Y2F0Y2goaSl7aWYoaT09PU4pcmV0dXJuIG5ldyBTZXQ7dGhyb3cgaX19YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yU25hcHBpbmcoZSx0KXtjb25zdHtwb2ludDppLGRpc3RhbmNlOnMscmV0dXJuRWRnZTpyLHJldHVyblZlcnRleDphfT1lO2lmKCFyJiYhYSlyZXR1cm57Y2FuZGlkYXRlczpbXX07Y29uc3Qgbj1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fY2hlY2tRdWVyeVN1cHBvcnQoZS5xdWVyeSkpLHQpLHU9IVMoaS5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSk7dSYmYXdhaXQgUChpLnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTtjb25zdCBvPVwibnVtYmVyXCI9PXR5cGVvZiBzP3M6cy54LGw9XCJudW1iZXJcIj09dHlwZW9mIHM/czpzLnksYz17eG1pbjppLngtbyx4bWF4OmkueCtvLHltaW46aS55LWwseW1heDppLnkrbCxzcGF0aWFsUmVmZXJlbmNlOmkuc3BhdGlhbFJlZmVyZW5jZX0saD11P1QoYyx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpOmM7aWYoIWgpcmV0dXJue2NhbmRpZGF0ZXM6W119O2NvbnN0IHA9KGF3YWl0IHcoZyhpKSxudWxsLHtzaWduYWw6dH0pKVswXSxtPShhd2FpdCB3KGcoaCksbnVsbCx7c2lnbmFsOnR9KSlbMF07aWYobnVsbD09cHx8bnVsbD09bSlyZXR1cm57Y2FuZGlkYXRlczpbXX07Y29uc3QgZj1uZXcgdihhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fc2VhcmNoRmVhdHVyZXModGhpcy5fZ2V0UXVlcnlCQm94ZXMobS50b0pTT04oKSkpKSx0KSxuLHRoaXMpO2F3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlT2JqZWN0SWRzUXVlcnkoZikpLHQpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlVGltZVF1ZXJ5KGYpKSx0KSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShmKSksdCk7Y29uc3QgZD1wLnRvSlNPTigpLHk9dT9UKGQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlKTpkLF89dT9NYXRoLm1heChoLnhtYXgtaC54bWluLGgueW1heC1oLnltaW4pLzI6cztyZXR1cm4gZi5jcmVhdGVTbmFwcGluZ1Jlc3BvbnNlKHsuLi5lLHBvaW50OnksZGlzdGFuY2U6X30saS5zcGF0aWFsUmVmZXJlbmNlKX1hc3luYyBleGVjdXRlUXVlcnlGb3JMYXRlc3RPYnNlcnZhdGlvbnMoZSx0KXtpZighdGhpcy50aW1lSW5mb3x8IXRoaXMudGltZUluZm8udHJhY2tJZEZpZWxkKXRocm93IG5ldyBpKFcsXCJNaXNzaW5nIHRpbWVJbmZvIG9yIHRpbWVJbmZvLnRyYWNrSWRGaWVsZFwiLHtxdWVyeTplLHRpbWVJbmZvOnRoaXMudGltZUluZm99KTt0cnl7Y29uc3QgaT1hd2FpdCB0aGlzLl9leGVjdXRlUXVlcnkoZSx7fSx0KTtyZXR1cm4gYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2ZpbHRlckxhdGVzdChpKSksdCksaS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9Y2F0Y2gocyl7aWYocyE9PU4pdGhyb3cgcztyZXR1cm4gbmV3IHYoW10sZSx0aGlzKS5jcmVhdGVRdWVyeVJlc3BvbnNlKCl9fWFzeW5jIGV4ZWN1dGVRdWVyeUZvclN1bW1hcnlTdGF0aXN0aWNzKGU9e30sdCxpKXtjb25zdHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfT10O3JldHVybihhd2FpdCB0aGlzLl9nZXRRdWVyeUVuZ2luZVJlc3VsdEZvclN0YXRzKGUse2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9LGkpKS5jcmVhdGVTdW1tYXJ5U3RhdGlzdGljc1Jlc3BvbnNlKHQpfWFzeW5jIGV4ZWN1dGVRdWVyeUZvclVuaXF1ZVZhbHVlcyhlPXt9LHQsaSl7Y29uc3R7ZmllbGQ6cyxmaWVsZDI6cixmaWVsZDM6YSx2YWx1ZUV4cHJlc3Npb246bn09dDtyZXR1cm4oYXdhaXQgdGhpcy5fZ2V0UXVlcnlFbmdpbmVSZXN1bHRGb3JTdGF0cyhlLHtmaWVsZDpzLGZpZWxkMjpyLGZpZWxkMzphLHZhbHVlRXhwcmVzc2lvbjpufSxpKSkuY3JlYXRlVW5pcXVlVmFsdWVzUmVzcG9uc2UodCl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9yQ2xhc3NCcmVha3MoZT17fSx0LGkpe2NvbnN0e2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9PXQ7cmV0dXJuKGF3YWl0IHRoaXMuX2dldFF1ZXJ5RW5naW5lUmVzdWx0Rm9yU3RhdHMoZSx7ZmllbGQ6cyxub3JtYWxpemF0aW9uRmllbGQ6cix2YWx1ZUV4cHJlc3Npb246YX0saSkpLmNyZWF0ZUNsYXNzQnJlYWtzUmVzcG9uc2UodCl9YXN5bmMgZXhlY3V0ZVF1ZXJ5Rm9ySGlzdG9ncmFtKGU9e30sdCxpKXtjb25zdHtmaWVsZDpzLG5vcm1hbGl6YXRpb25GaWVsZDpyLHZhbHVlRXhwcmVzc2lvbjphfT10O3JldHVybihhd2FpdCB0aGlzLl9nZXRRdWVyeUVuZ2luZVJlc3VsdEZvclN0YXRzKGUse2ZpZWxkOnMsbm9ybWFsaXphdGlvbkZpZWxkOnIsdmFsdWVFeHByZXNzaW9uOmF9LGkpKS5jcmVhdGVIaXN0b2dyYW1SZXNwb25zZSh0KX1hc3luYyBmZXRjaFJlY29tcHV0ZWRFeHRlbnRzKGUpe2NvbnN0W3QsaV09YXdhaXQgUHJvbWlzZS5hbGwoW1wiZ2V0RnVsbEV4dGVudFwiaW4gdGhpcy5mZWF0dXJlU3RvcmUmJnRoaXMuZmVhdHVyZVN0b3JlLmdldEZ1bGxFeHRlbnQ/UHJvbWlzZS5yZXNvbHZlKHRoaXMuZmVhdHVyZVN0b3JlLmdldEZ1bGxFeHRlbnQodGhpcy5zcGF0aWFsUmVmZXJlbmNlKSk6dGhpcy5fZ2V0Qm91bmRzKGF3YWl0IHRoaXMuX2dldEFsbEZlYXR1cmVzKCksdGhpcy5zcGF0aWFsUmVmZXJlbmNlLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSksbnVsbCE9dGhpcy5fdGltZUV4dGVudFByb21pc2U/dGhpcy5fdGltZUV4dGVudFByb21pc2U6dGhpcy5fdGltZUV4dGVudFByb21pc2U9TSh0aGlzLnRpbWVJbmZvLHRoaXMuZmVhdHVyZVN0b3JlKV0pO3JldHVybiBvKGUpLHtmdWxsRXh0ZW50OnQsdGltZUV4dGVudDppfX1hc3luYyBfZ2V0Qm91bmRzKGUsdCxpKXtjb25zdCBzPWMocCgpLGgpO2F3YWl0IHRoaXMuZmVhdHVyZVN0b3JlLmZvckVhY2hCb3VuZHMoZSwoZT0+bShzLGUpKSk7Y29uc3Qgcj17eG1pbjpzWzBdLHltaW46c1sxXSx4bWF4OnNbM10seW1heDpzWzRdLHNwYXRpYWxSZWZlcmVuY2U6Wih0aGlzLnNwYXRpYWxSZWZlcmVuY2UpfTt0aGlzLmhhc1omJmlzRmluaXRlKHNbMl0pJiZpc0Zpbml0ZShzWzVdKSYmKHIuem1pbj1zWzJdLHIuem1heD1zWzVdKTtjb25zdCBhPVQocix0LGkpO2lmKGEuc3BhdGlhbFJlZmVyZW5jZT1aKGkpLGEueG1heC1hLnhtaW49PTApe2NvbnN0IGU9bChhLnNwYXRpYWxSZWZlcmVuY2UpO2EueG1pbi09ZSxhLnhtYXgrPWV9aWYoYS55bWF4LWEueW1pbj09MCl7Y29uc3QgZT1sKGEuc3BhdGlhbFJlZmVyZW5jZSk7YS55bWluLT1lLGEueW1heCs9ZX1pZih0aGlzLmhhc1omJm51bGwhPWEuem1pbiYmbnVsbCE9YS56bWF4JiZhLnptYXgtYS56bWluPT0wKXtjb25zdCBlPWwoYS5zcGF0aWFsUmVmZXJlbmNlKTthLnptaW4tPWUsYS56bWF4Kz1lfXJldHVybiBhfWFzeW5jIF9zY2hlZHVsZShlLHQpe3JldHVybiBudWxsIT10aGlzLl9mcmFtZVRhc2s/dGhpcy5fZnJhbWVUYXNrLnNjaGVkdWxlKGUsdCk6ZShKKX1hc3luYyBfcmVzY2hlZHVsZShlLHQpe3JldHVybiBudWxsIT10aGlzLl9mcmFtZVRhc2s/dGhpcy5fZnJhbWVUYXNrLnJlc2NoZWR1bGUoZSx0KTplKEopfWFzeW5jIF9nZXRBbGxGZWF0dXJlc1F1ZXJ5RW5naW5lUmVzdWx0KGUpe3JldHVybiBuZXcgdihhd2FpdCB0aGlzLl9nZXRBbGxGZWF0dXJlcygpLGUsdGhpcyl9YXN5bmMgX2dldEFsbEZlYXR1cmVzKCl7aWYobnVsbD09dGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlKXtjb25zdCBlPVtdO3RoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZT0oYXN5bmMoKT0+e2F3YWl0IHRoaXMuZmVhdHVyZVN0b3JlLmZvckVhY2goKHQ9PmUucHVzaCh0KSkpfSkoKS50aGVuKCgoKT0+ZSkpfWNvbnN0IGU9dGhpcy5fYWxsRmVhdHVyZXNQcm9taXNlLHQ9YXdhaXQgZTtyZXR1cm4gZT09PXRoaXMuX2FsbEZlYXR1cmVzUHJvbWlzZT90LnNsaWNlKCk6dGhpcy5fZ2V0QWxsRmVhdHVyZXMoKX1hc3luYyBfZXhlY3V0ZVF1ZXJ5KGUsdCxpKXtlPXMoZSksZT1hd2FpdCB0aGlzLl9zY2hlZHVsZSgoKCk9PlYoZSx0aGlzLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpLGkpLGU9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2NoZWNrUXVlcnlTdXBwb3J0KGUpKSxpKSxlPXsuLi5lLC4uLnR9O2NvbnN0IHI9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVTY2VuZUZpbHRlclF1ZXJ5KGUsaSkpLGkpLGE9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVHZW9tZXRyeVF1ZXJ5KGUscixpKSksaSk7cmV0dXJuIGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlQWdncmVnYXRlSWRzUXVlcnkoYSkpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlT2JqZWN0SWRzUXVlcnkoYSkpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlVGltZVF1ZXJ5KGEpKSxpKSxhd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUF0dHJpYnV0ZXNRdWVyeShhKSksaSksYX1hc3luYyBfZXhlY3V0ZVNjZW5lRmlsdGVyUXVlcnkoZSx0KXtpZihudWxsPT1lLnNjZW5lRmlsdGVyKXJldHVybiBudWxsO2NvbnN0e291dFNSOmkscmV0dXJuR2VvbWV0cnk6cyxyZXR1cm5DZW50cm9pZDpyfT1lLGE9dGhpcy5mZWF0dXJlU3RvcmUuZmVhdHVyZVNwYXRpYWxSZWZlcmVuY2Usbj1lLnNjZW5lRmlsdGVyLmdlb21ldHJ5LHU9bnVsbD09YXx8UyhhLG4uc3BhdGlhbFJlZmVyZW5jZSk/bjpUKG4sYSk7aWYoIXUpcmV0dXJuIG51bGw7Y29uc3Qgbz1zfHxyLGw9RihpKSYmIVModGhpcy5zcGF0aWFsUmVmZXJlbmNlLGkpJiZvP2FzeW5jIGU9PnRoaXMuX3Byb2plY3QoZSxpKTplPT5lLGM9dGhpcy5mZWF0dXJlQWRhcHRlcixoPWF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9zZWFyY2hGZWF0dXJlcyh0aGlzLl9nZXRRdWVyeUJCb3hlcyh1KSkpLHQpO2lmKFwiZGlzam9pbnRcIj09PWUuc2NlbmVGaWx0ZXIuc3BhdGlhbFJlbGF0aW9uc2hpcCl7aWYoIWgubGVuZ3RoKXJldHVybiBudWxsO2NvbnN0IGk9bmV3IFNldDtmb3IoY29uc3QgZSBvZiBoKWkuYWRkKGMuZ2V0T2JqZWN0SWQoZSkpO2NvbnN0IHM9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2dldEFsbEZlYXR1cmVzKCkpLHQpLHI9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoYXN5bmMoKT0+e2NvbnN0IHI9YXdhaXQgeihcImVzcmlTcGF0aWFsUmVsRGlzam9pbnRcIix1LHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00pLGE9ZT0+IWkuaGFzKGMuZ2V0T2JqZWN0SWQoZSkpfHxyKGMuZ2V0R2VvbWV0cnkoZSkpLG49YXdhaXQgdGhpcy5fcnVuU3BhdGlhbEZpbHRlcihzLGEsdCk7cmV0dXJuIG5ldyB2KG4sZSx0aGlzKX0pLHQpO3JldHVybiBsKHIpfWlmKCFoLmxlbmd0aClyZXR1cm4gbmV3IHYoW10sZSx0aGlzKTtpZih0aGlzLl9jYW5FeGVjdXRlU2luZ2xlUGFzcyh1LGUpKXJldHVybiBsKG5ldyB2KGgsZSx0aGlzKSk7Y29uc3QgcD1hd2FpdCB6KFwiZXNyaVNwYXRpYWxSZWxDb250YWluc1wiLHUsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSksbT1hd2FpdCB0aGlzLl9ydW5TcGF0aWFsRmlsdGVyKGgsKGU9PnAoYy5nZXRHZW9tZXRyeShlKSkpLHQpO3JldHVybiBsKG5ldyB2KG0sZSx0aGlzKSl9YXN5bmMgX2V4ZWN1dGVHZW9tZXRyeVF1ZXJ5KGkscyxyKXtpZihudWxsIT1zJiYwPT09cy5pdGVtcy5sZW5ndGgpcmV0dXJuIHM7aT1udWxsIT1zP3MucXVlcnk6aTtjb25zdHtnZW9tZXRyeTphLG91dFNSOm4sc3BhdGlhbFJlbDp1LHJldHVybkdlb21ldHJ5Om8scmV0dXJuQ2VudHJvaWQ6bH09aSxjPXRoaXMuZmVhdHVyZVN0b3JlLmZlYXR1cmVTcGF0aWFsUmVmZXJlbmNlLGg9IWF8fG51bGw9PWN8fFMoYyxhLnNwYXRpYWxSZWZlcmVuY2UpP2E6VChhLGMpLHA9b3x8bCxtPUYobikmJiFTKHRoaXMuc3BhdGlhbFJlZmVyZW5jZSxuKSxmPXRoaXMuX2dlb21ldHJ5UXVlcnlDYWNoZSYmbnVsbD09cz9tJiZwP0pTT04uc3RyaW5naWZ5KHtvcmlnaW5hbEZpbHRlckdlb21ldHJ5OmEsc3BhdGlhbFJlbGF0aW9uc2hpcDp1LG91dFNwYXRpYWxSZWZlcmVuY2U6bn0pOkpTT04uc3RyaW5naWZ5KHtvcmlnaW5hbEZpbHRlckdlb21ldHJ5OmEsc3BhdGlhbFJlbGF0aW9uc2hpcDp1fSk6bnVsbCxkPWY/dGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlLmdldChmKTpudWxsO2lmKG51bGwhPWQpcmV0dXJuIG5ldyB2KGQsaSx0aGlzKTtjb25zdCB5PWFzeW5jIGU9PihtJiZwJiZhd2FpdCB0aGlzLl9wcm9qZWN0KGUsbiksZiYmdGhpcy5fZ2VvbWV0cnlRdWVyeUNhY2hlLnB1dChmLGUuaXRlbXMsZS5pdGVtcy5sZW5ndGgrMSksZSk7aWYoIWgpcmV0dXJuIHkobnVsbCE9cz9zOmF3YWl0IHRoaXMuX2dldEFsbEZlYXR1cmVzUXVlcnlFbmdpbmVSZXN1bHQoaSkpO2NvbnN0IGc9dGhpcy5mZWF0dXJlQWRhcHRlcjtsZXQgXz1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fc2VhcmNoRmVhdHVyZXModGhpcy5fZ2V0UXVlcnlCQm94ZXMoYSkpKSxyKTtpZihcImVzcmlTcGF0aWFsUmVsRGlzam9pbnRcIj09PXUpe2lmKCFfLmxlbmd0aClyZXR1cm4geShudWxsIT1zP3M6YXdhaXQgdGhpcy5fZ2V0QWxsRmVhdHVyZXNRdWVyeUVuZ2luZVJlc3VsdChpKSk7Y29uc3QgZT1uZXcgU2V0O2Zvcihjb25zdCBpIG9mIF8pZS5hZGQoZy5nZXRPYmplY3RJZChpKSk7Y29uc3QgdD1udWxsIT1zP3MuaXRlbXM6YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2dldEFsbEZlYXR1cmVzKCkpLHIpLGE9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoYXN5bmMoKT0+e2NvbnN0IHM9YXdhaXQgeih1LGgsdGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSksYT10PT4hZS5oYXMoZy5nZXRPYmplY3RJZCh0KSl8fHMoZy5nZXRHZW9tZXRyeSh0KSksbj1hd2FpdCB0aGlzLl9ydW5TcGF0aWFsRmlsdGVyKHQsYSxyKTtyZXR1cm4gbmV3IHYobixpLHRoaXMpfSkscik7cmV0dXJuIHkoYSl9aWYobnVsbCE9cyl7Y29uc3QgaT1uZXcgZTtfPV8uZmlsdGVyKChlPT50KHMuaXRlbXMsZSxzLml0ZW1zLmxlbmd0aCxpKT49MCkpfWlmKCFfLmxlbmd0aCl7Y29uc3QgZT1uZXcgdihbXSxpLHRoaXMpO3JldHVybiBmJiZ0aGlzLl9nZW9tZXRyeVF1ZXJ5Q2FjaGUucHV0KGYsZS5pdGVtcywxKSxlfWlmKHRoaXMuX2NhbkV4ZWN1dGVTaW5nbGVQYXNzKGgsaSkpcmV0dXJuIHkobmV3IHYoXyxpLHRoaXMpKTtjb25zdCB4PWF3YWl0IHoodSxoLHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00pLHc9YXdhaXQgdGhpcy5fcnVuU3BhdGlhbEZpbHRlcihfLChlPT54KGcuZ2V0R2VvbWV0cnkoZSkpKSxyKTtyZXR1cm4geShuZXcgdih3LGksdGhpcykpfV9leGVjdXRlQWdncmVnYXRlSWRzUXVlcnkoZSl7aWYoMD09PWUuaXRlbXMubGVuZ3RofHwhZS5xdWVyeS5hZ2dyZWdhdGVJZHN8fCFlLnF1ZXJ5LmFnZ3JlZ2F0ZUlkcy5sZW5ndGh8fG51bGw9PXRoaXMuYWdncmVnYXRlQWRhcHRlcilyZXR1cm47Y29uc3QgdD1uZXcgU2V0O2Zvcihjb25zdCBzIG9mIGUucXVlcnkuYWdncmVnYXRlSWRzKXt0aGlzLmFnZ3JlZ2F0ZUFkYXB0ZXIuZ2V0RmVhdHVyZU9iamVjdElkcyhzKS5mb3JFYWNoKChlPT50LmFkZChlKSkpfWNvbnN0IGk9dGhpcy5mZWF0dXJlQWRhcHRlci5nZXRPYmplY3RJZDtlLml0ZW1zPWUuaXRlbXMuZmlsdGVyKChlPT50LmhhcyhpKGUpKSkpfV9leGVjdXRlT2JqZWN0SWRzUXVlcnkoZSl7aWYoMD09PWUuaXRlbXMubGVuZ3RofHwhZS5xdWVyeS5vYmplY3RJZHN8fCFlLnF1ZXJ5Lm9iamVjdElkcy5sZW5ndGgpcmV0dXJuO2NvbnN0IHQ9bmV3IFNldChlLnF1ZXJ5Lm9iamVjdElkcyksaT10aGlzLmZlYXR1cmVBZGFwdGVyLmdldE9iamVjdElkO2UuaXRlbXM9ZS5pdGVtcy5maWx0ZXIoKGU9PnQuaGFzKGkoZSkpKSl9X2V4ZWN1dGVUaW1lUXVlcnkoZSl7aWYoMD09PWUuaXRlbXMubGVuZ3RoKXJldHVybjtjb25zdCB0PVUodGhpcy50aW1lSW5mbyxlLnF1ZXJ5LnRpbWVFeHRlbnQsdGhpcy5mZWF0dXJlQWRhcHRlcik7bnVsbCE9dCYmKGUuaXRlbXM9ZS5pdGVtcy5maWx0ZXIodCkpfV9leGVjdXRlQXR0cmlidXRlc1F1ZXJ5KGUpe2lmKDA9PT1lLml0ZW1zLmxlbmd0aClyZXR1cm47Y29uc3QgdD1RKGUucXVlcnkud2hlcmUsdGhpcy5maWVsZHNJbmRleCk7aWYodCl7aWYoIXQuaXNTdGFuZGFyZGl6ZWQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIldoZXJlIGNsYXVzZSBpcyBub3Qgc3RhbmRhcmRpemVkXCIpO2UuaXRlbXM9ZS5pdGVtcy5maWx0ZXIoKGU9PnQudGVzdEZlYXR1cmUoZSx0aGlzLmZlYXR1cmVBZGFwdGVyKSkpfX1hc3luYyBfcnVuU3BhdGlhbEZpbHRlcihlLHQsaSl7aWYoIXQpcmV0dXJuIGU7aWYobnVsbD09dGhpcy5fZnJhbWVUYXNrKXJldHVybiBlLmZpbHRlcigoZT0+dChlKSkpO2xldCBzPTA7Y29uc3Qgcj1uZXcgQXJyYXksYT1hc3luYyBuPT57Zm9yKDtzPGUubGVuZ3RoOyl7Y29uc3QgdT1lW3MrK107dCh1KSYmKHIucHVzaCh1KSxuLm1hZGVQcm9ncmVzcygpKSxuLmRvbmUmJmF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKGU9PmEoZSkpLGkpfX07cmV0dXJuIHRoaXMuX3Jlc2NoZWR1bGUoKGU9PmEoZSkpLGkpLnRoZW4oKCgpPT5yKSl9X2ZpbHRlckxhdGVzdChlKXtjb25zdHt0cmFja0lkRmllbGQ6dCxzdGFydFRpbWVGaWVsZDppLGVuZFRpbWVGaWVsZDpzfT10aGlzLnRpbWVJbmZvLHI9c3x8aSxhPW5ldyBNYXAsbj10aGlzLmZlYXR1cmVBZGFwdGVyLmdldEF0dHJpYnV0ZTtmb3IoY29uc3QgdSBvZiBlLml0ZW1zKXtjb25zdCBlPW4odSx0KSxpPW4odSxyKSxzPWEuZ2V0KGUpOyghc3x8aT5uKHMscikpJiZhLnNldChlLHUpfWUuaXRlbXM9QXJyYXkuZnJvbShhLnZhbHVlcygpKX1fY2FuRXhlY3V0ZVNpbmdsZVBhc3MoZSx0KXtjb25zdHtzcGF0aWFsUmVsOml9PXQ7cmV0dXJuIE8oZSkmJihcImVzcmlTcGF0aWFsUmVsRW52ZWxvcGVJbnRlcnNlY3RzXCI9PT1pfHxcImVzcmlHZW9tZXRyeVBvaW50XCI9PT10aGlzLmdlb21ldHJ5VHlwZSYmKFwiZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzXCI9PT1pfHxcImVzcmlTcGF0aWFsUmVsQ29udGFpbnNcIj09PWl8fFwiZXNyaVNwYXRpYWxSZWxXaXRoaW5cIj09PWkpKX1hc3luYyBfcHJvamVjdChlLHQpe2lmKCF0fHxTKHRoaXMuc3BhdGlhbFJlZmVyZW5jZSx0KSlyZXR1cm4gZTtjb25zdCBpPXRoaXMuZmVhdHVyZUFkYXB0ZXIscz1hd2FpdCBCKGUuaXRlbXMubWFwKChlPT5IKHRoaXMuZ2VvbWV0cnlUeXBlLHRoaXMuaGFzWix0aGlzLmhhc00saS5nZXRHZW9tZXRyeShlKSkpKSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdCk7cmV0dXJuIGUuaXRlbXM9cy5tYXAoKCh0LHMpPT5pLmNsb25lV2l0aEdlb21ldHJ5KGUuaXRlbXNbc10sUih0LHRoaXMuaGFzWix0aGlzLmhhc00pKSkpLGV9X2dldFF1ZXJ5QkJveGVzKGUpe2lmKE8oZSkpe2lmKF8oZSkpcmV0dXJuW2YoZS54bWluLGUueW1pbixlLnhtYXgsZS55bWF4KV07aWYoeChlKSlyZXR1cm4gZS5yaW5ncy5tYXAoKGU9PmYoTWF0aC5taW4oZVswXVswXSxlWzJdWzBdKSxNYXRoLm1pbihlWzBdWzFdLGVbMl1bMV0pLE1hdGgubWF4KGVbMF1bMF0sZVsyXVswXSksTWF0aC5tYXgoZVswXVsxXSxlWzJdWzFdKSkpKX1yZXR1cm5beShkKCksZSldfWFzeW5jIF9zZWFyY2hGZWF0dXJlcyhlKXtjb25zdCB0PW5ldyBTZXQ7YXdhaXQgUHJvbWlzZS5hbGwoZS5tYXAoKGU9PnRoaXMuZmVhdHVyZVN0b3JlLmZvckVhY2hJbkJvdW5kcyhlLChlPT50LmFkZChlKSkpKSkpO2NvbnN0IGk9QXJyYXkuZnJvbSh0LnZhbHVlcygpKTtyZXR1cm4gdC5jbGVhcigpLGl9YXN5bmMgX2NoZWNrU3RhdGlzdGljc1N1cHBvcnQoZSx0KXtpZigoZS5kaXN0YW5jZT8/MCk8MHx8bnVsbCE9ZS5nZW9tZXRyeVByZWNpc2lvbnx8ZS5tdWx0aXBhdGNoT3B0aW9ufHxlLnBpeGVsU2l6ZXx8ZS5yZWxhdGlvblBhcmFtfHxlLnRleHR8fGUub3V0U3RhdGlzdGljc3x8ZS5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljc3x8ZS5oYXZpbmd8fGUub3JkZXJCeUZpZWxkcyl0aHJvdyBuZXcgaShXLFwiVW5zdXBwb3J0ZWQgcXVlcnkgb3B0aW9uc1wiLHtxdWVyeTplfSk7cmV0dXJuIHRoaXMuX2NoZWNrQXR0cmlidXRlc1F1ZXJ5U3VwcG9ydChlKSxQcm9taXNlLmFsbChbdGhpcy5fY2hlY2tTdGF0aXN0aWNzUGFyYW1zU3VwcG9ydCh0LGUpLEcoZSx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpLFAodGhpcy5zcGF0aWFsUmVmZXJlbmNlLGUub3V0U1IpXSkudGhlbigoKCk9PmUpKX1hc3luYyBfY2hlY2tTdGF0aXN0aWNzUGFyYW1zU3VwcG9ydChlLHQpe2xldCBzPVtdO2lmKGUudmFsdWVFeHByZXNzaW9uKXtjb25zdHthcmNhZGVVdGlsczp0fT1hd2FpdCBEKCk7cz10LmV4dHJhY3RGaWVsZE5hbWVzKGUudmFsdWVFeHByZXNzaW9uKX1pZihlLmZpZWxkJiZzLnB1c2goZS5maWVsZCksZS5maWVsZDImJnMucHVzaChlLmZpZWxkMiksZS5maWVsZDMmJnMucHVzaChlLmZpZWxkMyksZS5ub3JtYWxpemF0aW9uRmllbGQmJnMucHVzaChlLm5vcm1hbGl6YXRpb25GaWVsZCksIXMubGVuZ3RoJiYhZS52YWx1ZUV4cHJlc3Npb24pdGhyb3cgbmV3IGkoVyxcImZpZWxkIG9yIHZhbHVlRXhwcmVzc2lvbiBpcyByZXF1aXJlZFwiLHtwYXJhbXM6ZX0pO0kodGhpcy5maWVsZHNJbmRleCxzLHtlcnJvck1lc3NhZ2U6XCJDYW5ub3QgY2FsY3VsYXRlIHN0YXRpc3RpY3MgZm9yIG1pc3NpbmcgZmllbGRzXCIscXVlcnk6dH0pLGoodGhpcy5maWVsZHNJbmRleCxzLHtleHByZXNzaW9uTmFtZTpcInN0YXRpc3RpY3NcIixxdWVyeTp0fSl9YXN5bmMgX2NoZWNrUXVlcnlTdXBwb3J0KGUpe2lmKChlLmRpc3RhbmNlPz8wKTwwfHxudWxsIT1lLmdlb21ldHJ5UHJlY2lzaW9ufHxlLm11bHRpcGF0Y2hPcHRpb258fGUucGl4ZWxTaXplfHxlLnJlbGF0aW9uUGFyYW18fGUudGV4dCl0aHJvdyBuZXcgaShXLFwiVW5zdXBwb3J0ZWQgcXVlcnkgb3B0aW9uc1wiLHtxdWVyeTplfSk7cmV0dXJuIHRoaXMuX2NoZWNrQXR0cmlidXRlc1F1ZXJ5U3VwcG9ydChlKSx0aGlzLl9jaGVja1N0YXRpc3RpY3NRdWVyeVN1cHBvcnQoZSksUHJvbWlzZS5hbGwoW0coZSx0aGlzLmdlb21ldHJ5VHlwZSx0aGlzLnNwYXRpYWxSZWZlcmVuY2UpLFAodGhpcy5zcGF0aWFsUmVmZXJlbmNlLGUub3V0U1IpXSkudGhlbigoKCk9PmUpKX1fY2hlY2tBdHRyaWJ1dGVzUXVlcnlTdXBwb3J0KGUpe2NvbnN0e291dEZpZWxkczp0LG9yZGVyQnlGaWVsZHM6cyxyZXR1cm5EaXN0aW5jdFZhbHVlczpyLG91dFN0YXRpc3RpY3M6YX09ZSxuPWE/YS5tYXAoKGU9PmUub3V0U3RhdGlzdGljRmllbGROYW1lJiZlLm91dFN0YXRpc3RpY0ZpZWxkTmFtZS50b0xvd2VyQ2FzZSgpKSkuZmlsdGVyKEJvb2xlYW4pOltdO2lmKHMmJnMubGVuZ3RoPjApe2NvbnN0IHQ9XCIgYXNjXCIsaT1cIiBkZXNjXCIscj1zLm1hcCgoZT0+e2NvbnN0IHM9ZS50b0xvd2VyQ2FzZSgpO3JldHVybiBzLmluY2x1ZGVzKHQpP3Muc3BsaXQodClbMF06cy5pbmNsdWRlcyhpKT9zLnNwbGl0KGkpWzBdOmV9KSkuZmlsdGVyKChlPT4hbi5pbmNsdWRlcyhlKSkpO0kodGhpcy5maWVsZHNJbmRleCxyLHtleHByZXNzaW9uTmFtZTpcIm9yZGVyQnlGaWVsZHNcIixxdWVyeTplfSl9aWYodCYmdC5sZW5ndGg+MClJKHRoaXMuZmllbGRzSW5kZXgsdCx7ZXhwcmVzc2lvbk5hbWU6XCJvdXRGaWVsZHNcIixxdWVyeTplfSk7ZWxzZSBpZihyKXRocm93IG5ldyBpKFcsXCJvdXRGaWVsZHMgc2hvdWxkIGJlIHNwZWNpZmllZCBmb3IgcmV0dXJuRGlzdGluY3RWYWx1ZXNcIix7cXVlcnk6ZX0pO0UodGhpcy5maWVsZHNJbmRleCxlLndoZXJlLGUpfV9jaGVja1N0YXRpc3RpY3NRdWVyeVN1cHBvcnQoZSl7Y29uc3R7b3V0U3RhdGlzdGljczp0LGdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzOnMsaGF2aW5nOnJ9PWUsYT1zJiZzLmxlbmd0aCxuPXQmJnQubGVuZ3RoO2lmKHIpe2lmKCFhfHwhbil0aHJvdyBuZXcgaShXLFwib3V0U3RhdGlzdGljcyBhbmQgZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3Mgc2hvdWxkIGJlIHNwZWNpZmllZCB3aXRoIGhhdmluZ1wiLHtxdWVyeTplfSk7QSh0aGlzLmZpZWxkc0luZGV4LHIsdCxlKX1pZihuKXtpZighJCh0KSlyZXR1cm47Y29uc3Qgcj10Lm1hcCgoZT0+ZS5vblN0YXRpc3RpY0ZpZWxkKSkuZmlsdGVyKEJvb2xlYW4pO0kodGhpcy5maWVsZHNJbmRleCxyLHtleHByZXNzaW9uTmFtZTpcIm9uU3RhdGlzdGljRmllbGRzXCIscXVlcnk6ZX0pLGEmJkkodGhpcy5maWVsZHNJbmRleCxzLHtleHByZXNzaW9uTmFtZTpcImdyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzXCIscXVlcnk6ZX0pO2NvbnN0IG49bmV3IFNldChbLi4uYi5qc29uVmFsdWVzLC4uLnEuanNvblZhbHVlc10pLHU9bmV3IEludGwuTGlzdEZvcm1hdChcImVuLVVTXCIse3R5cGU6XCJjb25qdW5jdGlvblwifSkuZm9ybWF0KFsuLi5iLmFwaVZhbHVlcywuLi5xLmFwaVZhbHVlc10pO2Zvcihjb25zdCBzIG9mIHQpe2NvbnN0e29uU3RhdGlzdGljRmllbGQ6dCxzdGF0aXN0aWNUeXBlOnJ9PXM7aWYoKFwicGVyY2VudGlsZV9kaXNjXCI9PT1yfHxcInBlcmNlbnRpbGVfY29udFwiPT09cikmJlwic3RhdGlzdGljUGFyYW1ldGVyc1wiaW4gcyl7Y29uc3R7c3RhdGlzdGljUGFyYW1ldGVyczp0fT1zO2lmKCF0KXRocm93IG5ldyBpKFcsXCJzdGF0aXN0aWNQYXJhbWV0ZXJzIHNob3VsZCBiZSBzZXQgZm9yIHBlcmNlbnRpbGUgdHlwZVwiLHtkZWZpbml0aW9uOnMscXVlcnk6ZX0pfWVsc2UgaWYoXCJjb3VudFwiIT09ciYmXCJtaW5cIiE9PXImJlwibWF4XCIhPT1yJiZ0JiZDKHQsdGhpcy5maWVsZHNJbmRleCxuKSl0aHJvdyBuZXcgaShXLGBvdXRTdGF0aXN0aWNzIHdpdGggJyR7cn0nIHN0YXRpc3RpYyB0eXBlLCBvbmx5IHN1cHBvcnRzICR7dX0gZmllbGQgdHlwZXNgLHtkZWZpbml0aW9uOnMscXVlcnk6ZX0pfX19YXN5bmMgX2dldFF1ZXJ5RW5naW5lUmVzdWx0Rm9yU3RhdHMoZSx0LGkpe2U9cyhlKTt0cnl7ZT1hd2FpdCB0aGlzLl9zY2hlZHVsZSgoKCk9PlYoZSx0aGlzLmRlZmluaXRpb25FeHByZXNzaW9uLHRoaXMuc3BhdGlhbFJlZmVyZW5jZSkpLGkpLGU9YXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2NoZWNrU3RhdGlzdGljc1N1cHBvcnQoZSx0KSksaSk7Y29uc3Qgcz1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZVNjZW5lRmlsdGVyUXVlcnkoZSxpKSksaSkscj1hd2FpdCB0aGlzLl9yZXNjaGVkdWxlKCgoKT0+dGhpcy5fZXhlY3V0ZUdlb21ldHJ5UXVlcnkoZSxzLGkpKSxpKTtyZXR1cm4gYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVBZ2dyZWdhdGVJZHNRdWVyeShyKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVPYmplY3RJZHNRdWVyeShyKSksaSksYXdhaXQgdGhpcy5fcmVzY2hlZHVsZSgoKCk9PnRoaXMuX2V4ZWN1dGVUaW1lUXVlcnkocikpLGkpLGF3YWl0IHRoaXMuX3Jlc2NoZWR1bGUoKCgpPT50aGlzLl9leGVjdXRlQXR0cmlidXRlc1F1ZXJ5KHIpKSxpKSxyfWNhdGNoKHIpe2lmKHIhPT1OKXRocm93IHI7cmV0dXJuIG5ldyB2KFtdLGUsdGhpcyl9fX1leHBvcnR7SyBhcyBGZWF0dXJlLGVlIGFzIFF1ZXJ5RW5naW5lfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jb25zdCB0PXtzdXBwb3J0c1N0YXRpc3RpY3M6ITAsc3VwcG9ydHNQZXJjZW50aWxlU3RhdGlzdGljczohMCxzdXBwb3J0c1NwYXRpYWxBZ2dyZWdhdGlvblN0YXRpc3RpY3M6ITEsc3VwcG9ydGVkU3BhdGlhbEFnZ3JlZ2F0aW9uU3RhdGlzdGljczp7ZW52ZWxvcGU6ITEsY2VudHJvaWQ6ITEsY29udmV4SHVsbDohMX0sc3VwcG9ydHNDZW50cm9pZDohMCxzdXBwb3J0c0NhY2hlSGludDohMSxzdXBwb3J0c0Rpc3RhbmNlOiEwLHN1cHBvcnRzRGlzdGluY3Q6ITAsc3VwcG9ydHNFeHRlbnQ6ITAsc3VwcG9ydHNHZW9tZXRyeVByb3BlcnRpZXM6ITEsc3VwcG9ydHNIYXZpbmdDbGF1c2U6ITAsc3VwcG9ydHNPcmRlckJ5OiEwLHN1cHBvcnRzUGFnaW5hdGlvbjohMCxzdXBwb3J0c1F1YW50aXphdGlvbjohMCxzdXBwb3J0c1F1YW50aXphdGlvbkVkaXRNb2RlOiExLHN1cHBvcnRzUXVlcnlHZW9tZXRyeTohMCxzdXBwb3J0c1Jlc3VsdFR5cGU6ITEsc3VwcG9ydHNTcWxFeHByZXNzaW9uOiEwLHN1cHBvcnRzTWF4UmVjb3JkQ291bnRGYWN0b3I6ITEsc3VwcG9ydHNTdGFuZGFyZGl6ZWRRdWVyaWVzT25seTohMCxzdXBwb3J0c1RvcEZlYXR1cmVzUXVlcnk6ITEsc3VwcG9ydHNRdWVyeUJ5T3RoZXJzOiEwLHN1cHBvcnRzSGlzdG9yaWNNb21lbnQ6ITEsc3VwcG9ydHNGb3JtYXRQQkY6ITEsc3VwcG9ydHNEaXNqb2ludFNwYXRpYWxSZWxhdGlvbnNoaXA6ITAsc3VwcG9ydHNEZWZhdWx0U3BhdGlhbFJlZmVyZW5jZTohMSxzdXBwb3J0c0Z1bGxUZXh0U2VhcmNoOiExLHN1cHBvcnRzQ29tcGFjdEdlb21ldHJ5OiExLG1heFJlY29yZENvdW50RmFjdG9yOnZvaWQgMCxtYXhSZWNvcmRDb3VudDp2b2lkIDAsc3RhbmRhcmRNYXhSZWNvcmRDb3VudDp2b2lkIDAsdGlsZU1heFJlY29yZENvdW50OnZvaWQgMH07ZXhwb3J0e3QgYXMgcXVlcnlDYXBhYmlsaXRpZXN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtwb2x5Z29uQ2VudHJvaWQgYXMgZSxleHRlbnRDZW50cm9pZCBhcyB0fWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvY2VudHJvaWQuanNcIjtpbXBvcnR7Z2V0UG9seWdvbkV4dGVudCBhcyBzLGdldEdlb21ldHJ5RXh0ZW50IGFzIGl9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9leHRlbnRVdGlscy5qc1wiO2ltcG9ydHt0b1F1YW50aXphdGlvblRyYW5zZm9ybSBhcyBhfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvcXVhbnRpemF0aW9uVXRpbHMuanNcIjtpbXBvcnR7aXNWYWxpZCBhcyByLGVxdWFscyBhcyBufWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi9BdHRyaWJ1dGVzQnVpbGRlci5qc1wiO2ltcG9ydHtwcm9qZWN0IGFzIGx9ZnJvbVwiLi9wcm9qZWN0aW9uU3VwcG9ydC5qc1wiO2ltcG9ydHttYWtlRWRnZUNhbmRpZGF0ZSBhcyB1LG1ha2VWZXJ0ZXhDYW5kaWRhdGUgYXMgY31mcm9tXCIuL1NuYXBwaW5nQ2FuZGlkYXRlLmpzXCI7aW1wb3J0e2NsZWFuRnJvbUdlb21ldHJ5RW5naW5lIGFzIGQsZ2V0R2VvbWV0cnkgYXMgbSx0cmFuc2Zvcm1DZW50cm9pZCBhcyBofWZyb21cIi4vdXRpbHMuanNcIjtpbXBvcnR7aXNTdHJpbmdGaWVsZCBhcyBnfWZyb21cIi4uLy4uL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2ltcG9ydHtpc051bGxDb3VudFN1cHBvcnRlZCBhcyBmLGNhbGN1bGF0ZVN0cmluZ1N0YXRpc3RpY3MgYXMgcCxjYWxjdWxhdGVTdGF0aXN0aWNzIGFzIHkscHJvY2Vzc1N1bW1hcnlTdGF0aXN0aWNzUmVzdWx0IGFzIHgsY2FsY3VsYXRlVW5pcXVlVmFsdWVzQ291bnQgYXMgSSxjcmVhdGVVVlJlc3VsdCBhcyBULGNhbGN1bGF0ZUNsYXNzQnJlYWtzIGFzIFYscmVzb2x2ZUNCUmVzdWx0IGFzIEYsY2FsY3VsYXRlSGlzdG9ncmFtIGFzIFMsZ2V0QXR0cmlidXRlQ29tcGFyYXRvciBhcyBfLGNhbGN1bGF0ZVBlcmNlbnRpbGUgYXMgdn1mcm9tXCIuLi8uLi8uLi9zdGF0aXN0aWNzL3V0aWxzLmpzXCI7Y2xhc3Mgentjb25zdHJ1Y3RvcihlLHQscyl7dGhpcy5pdGVtcz1lLHRoaXMucXVlcnk9dCx0aGlzLmdlb21ldHJ5VHlwZT1zLmdlb21ldHJ5VHlwZSx0aGlzLmhhc009cy5oYXNNLHRoaXMuaGFzWj1zLmhhc1osdGhpcy5maWVsZHNJbmRleD1zLmZpZWxkc0luZGV4LHRoaXMub2JqZWN0SWRGaWVsZD1zLm9iamVjdElkRmllbGQsdGhpcy5zcGF0aWFsUmVmZXJlbmNlPXMuc3BhdGlhbFJlZmVyZW5jZSx0aGlzLmZlYXR1cmVBZGFwdGVyPXMuZmVhdHVyZUFkYXB0ZXJ9Z2V0IHNpemUoKXtyZXR1cm4gdGhpcy5pdGVtcy5sZW5ndGh9Y3JlYXRlUXVlcnlSZXNwb25zZUZvckNvdW50KCl7Y29uc3QgZT1uZXcgbyh0aGlzLnF1ZXJ5LHRoaXMuZmVhdHVyZUFkYXB0ZXIsdGhpcy5maWVsZHNJbmRleCk7aWYoIXRoaXMucXVlcnkub3V0U3RhdGlzdGljcylyZXR1cm4gZS5jb3VudERpc3RpbmN0VmFsdWVzKHRoaXMuaXRlbXMpO2NvbnN0e2dyb3VwQnlGaWVsZHNGb3JTdGF0aXN0aWNzOnQsaGF2aW5nOnMsb3V0U3RhdGlzdGljczppfT10aGlzLnF1ZXJ5LGE9dD8ubGVuZ3RoO2lmKCEhIWEpcmV0dXJuIDE7Y29uc3Qgcj1uZXcgTWFwLG49bmV3IE1hcCxsPW5ldyBTZXQ7Zm9yKGNvbnN0IG8gb2YgaSl7Y29uc3R7c3RhdGlzdGljVHlwZTppfT1vLGE9XCJleGNlZWRzbGltaXRcIiE9PWk/by5vblN0YXRpc3RpY0ZpZWxkOnZvaWQgMDtpZighbi5oYXMoYSkpe2NvbnN0IHM9W107Zm9yKGNvbnN0IGkgb2YgdCl7Y29uc3QgdD10aGlzLl9nZXRBdHRyaWJ1dGVWYWx1ZXMoZSxpLHIpO3MucHVzaCh0KX1uLnNldChhLHRoaXMuX2NhbGN1bGF0ZVVuaXF1ZVZhbHVlcyhzLGUucmV0dXJuRGlzdGluY3RWYWx1ZXMpKX1jb25zdCB1PW4uZ2V0KGEpO2Zvcihjb25zdCB0IGluIHUpe2NvbnN0e2RhdGE6aSxpdGVtczphfT11W3RdLHI9aS5qb2luKFwiLFwiKTtzJiYhZS52YWxpZGF0ZUl0ZW1zKGEscyl8fGwuYWRkKHIpfX1yZXR1cm4gbC5zaXplfWFzeW5jIGNyZWF0ZVF1ZXJ5UmVzcG9uc2UoKXtsZXQgZTtpZih0aGlzLnF1ZXJ5Lm91dFN0YXRpc3RpY3Mpe2U9dGhpcy5xdWVyeS5vdXRTdGF0aXN0aWNzLnNvbWUoKGU9PlwiZXhjZWVkc2xpbWl0XCI9PT1lLnN0YXRpc3RpY1R5cGUpKT90aGlzLl9jcmVhdGVFeGNlZWRzTGltaXRRdWVyeVJlc3BvbnNlKHRoaXMucXVlcnkpOmF3YWl0IHRoaXMuX2NyZWF0ZVN0YXRpc3RpY3NRdWVyeVJlc3BvbnNlKHRoaXMucXVlcnkpfWVsc2UgZT10aGlzLl9jcmVhdGVGZWF0dXJlUXVlcnlSZXNwb25zZSh0aGlzLnF1ZXJ5KTtpZih0aGlzLnF1ZXJ5LnJldHVyblF1ZXJ5R2VvbWV0cnkpe2NvbnN0IHQ9dGhpcy5xdWVyeS5nZW9tZXRyeTtyKHRoaXMucXVlcnkub3V0U1IpJiYhbih0LnNwYXRpYWxSZWZlcmVuY2UsdGhpcy5xdWVyeS5vdXRTUik/ZS5xdWVyeUdlb21ldHJ5PWQoe3NwYXRpYWxSZWZlcmVuY2U6dGhpcy5xdWVyeS5vdXRTUiwuLi5sKHQsdC5zcGF0aWFsUmVmZXJlbmNlLHRoaXMucXVlcnkub3V0U1IpfSk6ZS5xdWVyeUdlb21ldHJ5PWQoe3NwYXRpYWxSZWZlcmVuY2U6dGhpcy5xdWVyeS5vdXRTUiwuLi50fSl9cmV0dXJuIGV9Y3JlYXRlU25hcHBpbmdSZXNwb25zZShlLHQpe2NvbnN0IHM9dGhpcy5mZWF0dXJlQWRhcHRlcixpPWIodGhpcy5oYXNaLHRoaXMuaGFzTSkse3BvaW50OmEsbW9kZTpyfT1lLG49XCJudW1iZXJcIj09dHlwZW9mIGUuZGlzdGFuY2U/ZS5kaXN0YW5jZTplLmRpc3RhbmNlLngsbz1cIm51bWJlclwiPT10eXBlb2YgZS5kaXN0YW5jZT9lLmRpc3RhbmNlOmUuZGlzdGFuY2UueSxsPXtjYW5kaWRhdGVzOltdfSxkPVwiZXNyaUdlb21ldHJ5UG9seWdvblwiPT09dGhpcy5nZW9tZXRyeVR5cGUsbT10aGlzLl9nZXRQb2ludENyZWF0b3Iocix0aGlzLnNwYXRpYWxSZWZlcmVuY2UsdCksaD1uZXcgQShudWxsLDApLGc9bmV3IEEobnVsbCwwKSxmPXt4OjAseTowLHo6MH07Zm9yKGNvbnN0IHAgb2YgdGhpcy5pdGVtcyl7Y29uc3QgdD1zLmdldEdlb21ldHJ5KHApO2lmKG51bGw9PXQpY29udGludWU7Y29uc3R7Y29vcmRzOnIsbGVuZ3Roczp5fT10O2lmKGguY29vcmRzPXIsZy5jb29yZHM9cixlLnJldHVybkVkZ2Upe2xldCBlPTA7Zm9yKGxldCB0PTA7dDx5Lmxlbmd0aDt0Kyspe2NvbnN0IHI9eVt0XTtmb3IobGV0IHQ9MDt0PHI7dCsrLGUrPWkpe2NvbnN0IGM9aDtpZihjLmNvb3Jkc0luZGV4PWUsdCE9PXItMSl7Y29uc3QgdD1nO3QuY29vcmRzSW5kZXg9ZStpO2NvbnN0IHI9ZjtSKGYsYSxjLHQpO2NvbnN0IGQ9KGEueC1yLngpL24saD0oYS55LXIueSkvbyx5PWQqZCtoKmg7eTw9MSYmbC5jYW5kaWRhdGVzLnB1c2godShzLmdldE9iamVjdElkKHApLG0ociksTWF0aC5zcXJ0KHkpLG0oYyksbSh0KSkpfX19fWlmKGUucmV0dXJuVmVydGV4KXtjb25zdCBlPWQ/ci5sZW5ndGgtaTpyLmxlbmd0aDtmb3IobGV0IHQ9MDt0PGU7dCs9aSl7Y29uc3QgZT1oO2UuY29vcmRzSW5kZXg9dDtjb25zdCBpPShhLngtZS54KS9uLHI9KGEueS1lLnkpL28sdT1pKmkrcipyO3U8PTEmJmwuY2FuZGlkYXRlcy5wdXNoKGMocy5nZXRPYmplY3RJZChwKSxtKGUpLE1hdGguc3FydCh1KSkpfX19cmV0dXJuIGwuY2FuZGlkYXRlcy5zb3J0KCgoZSx0KT0+ZS5kaXN0YW5jZS10LmRpc3RhbmNlKSksbH1fZ2V0UG9pbnRDcmVhdG9yKGUsdCxzKXtjb25zdCBpPW51bGw9PXN8fG4odCxzKT9lPT5lOmU9PmwoZSx0LHMpLHtoYXNaOmF9PXRoaXMscj0wO3JldHVyblwiM2RcIj09PWU/YT8oe3g6ZSx5OnQsejpzfSk9Pmkoe3g6ZSx5OnQsejpzfSk6KHt4OmUseTp0fSk9Pmkoe3g6ZSx5OnQsejpyfSk6KHt4OmUseTp0fSk9Pmkoe3g6ZSx5OnR9KX1hc3luYyBjcmVhdGVTdW1tYXJ5U3RhdGlzdGljc1Jlc3BvbnNlKGUpe2NvbnN0e2ZpZWxkOnQsdmFsdWVFeHByZXNzaW9uOnMsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixtaW5WYWx1ZTpuLG1heFZhbHVlOm8sc2NhbGU6bH09ZSx1PXRoaXMuZmllbGRzSW5kZXguaXNEYXRlRmllbGQodCksYz1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsc2NhbGU6bH0pLGQ9Zih7bm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uRmllbGQ6aSxtaW5WYWx1ZTpuLG1heFZhbHVlOm99KSxtPXRoaXMuZmllbGRzSW5kZXguZ2V0KHQpLGg9e3ZhbHVlOi41LGZpZWxkVHlwZTptPy50eXBlfSxJPWcobSk/cCh7dmFsdWVzOmMsc3VwcG9ydHNOdWxsQ291bnQ6ZCxwZXJjZW50aWxlUGFyYW1zOmh9KTp5KHt2YWx1ZXM6YyxtaW5WYWx1ZTpuLG1heFZhbHVlOm8sdXNlU2FtcGxlU3RkRGV2OiFhLHN1cHBvcnRzTnVsbENvdW50OmQscGVyY2VudGlsZVBhcmFtczpofSk7cmV0dXJuIHgoSSx1KX1hc3luYyBjcmVhdGVVbmlxdWVWYWx1ZXNSZXNwb25zZShlKXtjb25zdHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLGRvbWFpbnM6aSxyZXR1cm5BbGxDb2RlZFZhbHVlczphLHNjYWxlOnJ9PWUsbj1hd2FpdCB0aGlzLl9nZXREYXRhVmFsdWVzKHtmaWVsZDp0LGZpZWxkMjplLmZpZWxkMixmaWVsZDM6ZS5maWVsZDMsZmllbGREZWxpbWl0ZXI6ZS5maWVsZERlbGltaXRlcix2YWx1ZUV4cHJlc3Npb246cyxzY2FsZTpyfSksbz1JKG4pO3JldHVybiBUKG8saSxhLGUuZmllbGREZWxpbWl0ZXIpfWFzeW5jIGNyZWF0ZUNsYXNzQnJlYWtzUmVzcG9uc2UoZSl7Y29uc3R7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLGNsYXNzaWZpY2F0aW9uTWV0aG9kOm4sc3RhbmRhcmREZXZpYXRpb25JbnRlcnZhbDpvLG1pblZhbHVlOmwsbWF4VmFsdWU6dSxudW1DbGFzc2VzOmMsc2NhbGU6ZH09ZSxtPWF3YWl0IHRoaXMuX2dldERhdGFWYWx1ZXMoe2ZpZWxkOnQsdmFsdWVFeHByZXNzaW9uOnMsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixzY2FsZTpkfSksaD1WKG0se2ZpZWxkOnQsbm9ybWFsaXphdGlvbkZpZWxkOmksbm9ybWFsaXphdGlvblR5cGU6YSxub3JtYWxpemF0aW9uVG90YWw6cixjbGFzc2lmaWNhdGlvbk1ldGhvZDpuLHN0YW5kYXJkRGV2aWF0aW9uSW50ZXJ2YWw6byxtaW5WYWx1ZTpsLG1heFZhbHVlOnUsbnVtQ2xhc3NlczpjfSk7cmV0dXJuIEYoaCxuKX1hc3luYyBjcmVhdGVIaXN0b2dyYW1SZXNwb25zZShlKXtjb25zdHtmaWVsZDp0LHZhbHVlRXhwcmVzc2lvbjpzLG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsY2xhc3NpZmljYXRpb25NZXRob2Q6bixzdGFuZGFyZERldmlhdGlvbkludGVydmFsOm8sbWluVmFsdWU6bCxtYXhWYWx1ZTp1LG51bUJpbnM6YyxzY2FsZTpkfT1lLG09YXdhaXQgdGhpcy5fZ2V0RGF0YVZhbHVlcyh7ZmllbGQ6dCx2YWx1ZUV4cHJlc3Npb246cyxub3JtYWxpemF0aW9uRmllbGQ6aSxub3JtYWxpemF0aW9uVHlwZTphLG5vcm1hbGl6YXRpb25Ub3RhbDpyLHNjYWxlOmR9KTtyZXR1cm4gUyhtLHtmaWVsZDp0LG5vcm1hbGl6YXRpb25GaWVsZDppLG5vcm1hbGl6YXRpb25UeXBlOmEsbm9ybWFsaXphdGlvblRvdGFsOnIsY2xhc3NpZmljYXRpb25NZXRob2Q6bixzdGFuZGFyZERldmlhdGlvbkludGVydmFsOm8sbWluVmFsdWU6bCxtYXhWYWx1ZTp1LG51bUJpbnM6Y30pfV9zb3J0RmVhdHVyZXMoZSx0LHMpe2lmKGUubGVuZ3RoPjEmJnQmJnQubGVuZ3RoKWZvcihjb25zdCBpIG9mIHQucmV2ZXJzZSgpKXtjb25zdCB0PWkuc3BsaXQoXCIgXCIpLGE9dFswXSxyPXRoaXMuZmllbGRzSW5kZXguZ2V0KGEpLG49ISF0WzFdJiZcImRlc2NcIj09PXRbMV0udG9Mb3dlckNhc2UoKSxvPV8ocj8udHlwZSxuKTtlLnNvcnQoKChlLHQpPT57Y29uc3QgaT1zKGUsYSxyKSxuPXModCxhLHIpO3JldHVybiBvKGksbil9KSl9fV9jcmVhdGVGZWF0dXJlUXVlcnlSZXNwb25zZShlKXtjb25zdCB0PXRoaXMuaXRlbXMse2dlb21ldHJ5VHlwZTpzLGhhc006aSxoYXNaOnIsb2JqZWN0SWRGaWVsZDpuLHNwYXRpYWxSZWZlcmVuY2U6b309dGhpcyx7b3V0RmllbGRzOmwsb3V0U1I6dSxxdWFudGl6YXRpb25QYXJhbWV0ZXJzOmMscmVzdWx0UmVjb3JkQ291bnQ6bSxyZXN1bHRPZmZzZXQ6aCxyZXR1cm5aOmcscmV0dXJuTTpmfT1lLHA9bnVsbCE9bSYmdC5sZW5ndGg+KGh8fDApK20seT1sJiYobC5pbmNsdWRlcyhcIipcIik/Wy4uLnRoaXMuZmllbGRzSW5kZXguZmllbGRzXTpsLm1hcCgoZT0+dGhpcy5maWVsZHNJbmRleC5nZXQoZSkpKSk7cmV0dXJue2V4Y2VlZGVkVHJhbnNmZXJMaW1pdDpwLGZlYXR1cmVzOnRoaXMuX2NyZWF0ZUZlYXR1cmVzKGUsdCksZmllbGRzOnksZ2VvbWV0cnlUeXBlOnMsaGFzTTppJiZmLGhhc1o6ciYmZyxvYmplY3RJZEZpZWxkTmFtZTpuLHNwYXRpYWxSZWZlcmVuY2U6ZCh1fHxvKSx0cmFuc2Zvcm06YyYmYShjKXx8bnVsbH19X2NyZWF0ZUZlYXR1cmVzKGUsdCl7Y29uc3Qgcz1uZXcgbyhlLHRoaXMuZmVhdHVyZUFkYXB0ZXIsdGhpcy5maWVsZHNJbmRleCkse2hhc006aSxoYXNaOnJ9PXRoaXMse29yZGVyQnlGaWVsZHM6bixxdWFudGl6YXRpb25QYXJhbWV0ZXJzOmwscmV0dXJuR2VvbWV0cnk6dSxyZXR1cm5DZW50cm9pZDpjLG1heEFsbG93YWJsZU9mZnNldDpkLHJlc3VsdE9mZnNldDpnLHJlc3VsdFJlY29yZENvdW50OmYscmV0dXJuWjpwPSExLHJldHVybk06eT0hMX09ZSx4PXImJnAsST1pJiZ5O2xldCBUPVtdLFY9MDtjb25zdCBGPVsuLi50XTtpZih0aGlzLl9zb3J0RmVhdHVyZXMoRixuLCgoZSx0LGkpPT5zLmdldEZpZWxkVmFsdWUoZSx0LGkpKSksdXx8Yyl7Y29uc3QgZT1hKGwpPz92b2lkIDA7aWYodSYmIWMpZm9yKGNvbnN0IHQgb2YgRilUW1YrK109e2F0dHJpYnV0ZXM6cy5nZXRBdHRyaWJ1dGVzKHQpLGdlb21ldHJ5Om0odGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSx0aGlzLmZlYXR1cmVBZGFwdGVyLmdldEdlb21ldHJ5KHQpLGQsZSx4LEkpfTtlbHNlIGlmKCF1JiZjKWZvcihjb25zdCB0IG9mIEYpVFtWKytdPXthdHRyaWJ1dGVzOnMuZ2V0QXR0cmlidXRlcyh0KSxjZW50cm9pZDpoKHRoaXMsdGhpcy5mZWF0dXJlQWRhcHRlci5nZXRDZW50cm9pZCh0LHRoaXMpLGUpfTtlbHNlIGZvcihjb25zdCB0IG9mIEYpVFtWKytdPXthdHRyaWJ1dGVzOnMuZ2V0QXR0cmlidXRlcyh0KSxjZW50cm9pZDpoKHRoaXMsdGhpcy5mZWF0dXJlQWRhcHRlci5nZXRDZW50cm9pZCh0LHRoaXMpLGUpLGdlb21ldHJ5Om0odGhpcy5nZW9tZXRyeVR5cGUsdGhpcy5oYXNaLHRoaXMuaGFzTSx0aGlzLmZlYXR1cmVBZGFwdGVyLmdldEdlb21ldHJ5KHQpLGQsZSx4LEkpfX1lbHNlIGZvcihjb25zdCBhIG9mIEYpe2NvbnN0IGU9cy5nZXRBdHRyaWJ1dGVzKGEpO2UmJihUW1YrK109e2F0dHJpYnV0ZXM6ZX0pfWNvbnN0IFM9Z3x8MDtpZihudWxsIT1mKXtjb25zdCBlPVMrZjtUPVQuc2xpY2UoUyxNYXRoLm1pbihULmxlbmd0aCxlKSl9cmV0dXJuIFR9X2NyZWF0ZUV4Y2VlZHNMaW1pdFF1ZXJ5UmVzcG9uc2UoZSl7bGV0IHQ9ITEscz1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksaT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksYT1OdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7Zm9yKGNvbnN0IHIgb2YgZS5vdXRTdGF0aXN0aWNzPz9bXSlpZihcImV4Y2VlZHNsaW1pdFwiPT09ci5zdGF0aXN0aWNUeXBlKXtzPW51bGwhPXIubWF4UG9pbnRDb3VudD9yLm1heFBvaW50Q291bnQ6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLGk9bnVsbCE9ci5tYXhSZWNvcmRDb3VudD9yLm1heFJlY29yZENvdW50Ok51bWJlci5QT1NJVElWRV9JTkZJTklUWSxhPW51bGwhPXIubWF4VmVydGV4Q291bnQ/ci5tYXhWZXJ0ZXhDb3VudDpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7YnJlYWt9aWYoXCJlc3JpR2VvbWV0cnlQb2ludFwiPT09dGhpcy5nZW9tZXRyeVR5cGUpdD10aGlzLml0ZW1zLmxlbmd0aD5zO2Vsc2UgaWYodGhpcy5pdGVtcy5sZW5ndGg+aSl0PSEwO2Vsc2V7Y29uc3QgZT1iKHRoaXMuaGFzWix0aGlzLmhhc00pLHM9dGhpcy5mZWF0dXJlQWRhcHRlcjt0PXRoaXMuaXRlbXMucmVkdWNlKCgoZSx0KT0+e2NvbnN0IGk9cy5nZXRHZW9tZXRyeSh0KTtyZXR1cm4gZSsobnVsbCE9aSYmaS5jb29yZHMubGVuZ3RofHwwKX0pLDApL2U+YX1yZXR1cm57ZmllbGRzOlt7bmFtZTpcImV4Y2VlZHNsaW1pdFwiLHR5cGU6XCJlc3JpRmllbGRUeXBlSW50ZWdlclwiLGFsaWFzOlwiZXhjZWVkc2xpbWl0XCIsc3FsVHlwZTpcInNxbFR5cGVJbnRlZ2VyXCIsZG9tYWluOm51bGwsZGVmYXVsdFZhbHVlOm51bGx9XSxmZWF0dXJlczpbe2F0dHJpYnV0ZXM6e2V4Y2VlZHNsaW1pdDpOdW1iZXIodCl9fV19fWFzeW5jIF9jcmVhdGVTdGF0aXN0aWNzUXVlcnlSZXNwb25zZShlKXtjb25zdCB0PXthdHRyaWJ1dGVzOnt9fSxzPVtdLGk9bmV3IE1hcCxhPW5ldyBNYXAscj1uZXcgTWFwLG49bmV3IE1hcCxsPW5ldyBvKGUsdGhpcy5mZWF0dXJlQWRhcHRlcix0aGlzLmZpZWxkc0luZGV4KSx1PWUub3V0U3RhdGlzdGljcyx7Z3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3M6YyxoYXZpbmc6ZCxvcmRlckJ5RmllbGRzOm19PWUsaD1jJiZjLmxlbmd0aCxnPSEhaCxmPWc/Y1swXTpudWxsLHA9ZyYmIXRoaXMuZmllbGRzSW5kZXguZ2V0KGYpO2Zvcihjb25zdCBvIG9mIHU/P1tdKXtjb25zdHtvdXRTdGF0aXN0aWNGaWVsZE5hbWU6ZSxzdGF0aXN0aWNUeXBlOnV9PW8sbT1vLHk9XCJleGNlZWRzbGltaXRcIiE9PXU/by5vblN0YXRpc3RpY0ZpZWxkOnZvaWQgMCx4PVwicGVyY2VudGlsZV9kaXNjXCI9PT11fHxcInBlcmNlbnRpbGVfY29udFwiPT09dSxJPVwiRW52ZWxvcGVBZ2dyZWdhdGVcIj09PXV8fFwiQ2VudHJvaWRBZ2dyZWdhdGVcIj09PXV8fFwiQ29udmV4SHVsbEFnZ3JlZ2F0ZVwiPT09dSxUPWcmJjE9PT1oJiYoeT09PWZ8fHApJiZcImNvdW50XCI9PT11O2lmKGcpe2lmKCFyLmhhcyh5KSl7Y29uc3QgZT1bXTtmb3IoY29uc3QgdCBvZiBjKXtjb25zdCBzPXRoaXMuX2dldEF0dHJpYnV0ZVZhbHVlcyhsLHQsaSk7ZS5wdXNoKHMpfXIuc2V0KHksdGhpcy5fY2FsY3VsYXRlVW5pcXVlVmFsdWVzKGUsIUkmJmwucmV0dXJuRGlzdGluY3RWYWx1ZXMpKX1jb25zdCB0PXIuZ2V0KHkpO2Zvcihjb25zdCBzIGluIHQpe2NvbnN0e2NvdW50OmEsZGF0YTpyLGl0ZW1zOm8saXRlbVBvc2l0aW9uczp1fT10W3NdLGg9ci5qb2luKFwiLFwiKTtpZighZHx8bC52YWxpZGF0ZUl0ZW1zKG8sZCkpe2NvbnN0IHQ9bi5nZXQoaCl8fHthdHRyaWJ1dGVzOnt9fTtpZihJKXt0LmFnZ3JlZ2F0ZUdlb21ldHJpZXN8fCh0LmFnZ3JlZ2F0ZUdlb21ldHJpZXM9e30pO2NvbnN0e2FnZ3JlZ2F0ZUdlb21ldHJpZXM6ZSxvdXRTdGF0aXN0aWNGaWVsZE5hbWU6c309YXdhaXQgdGhpcy5fZ2V0QWdncmVnYXRlR2VvbWV0cnkobSxvKTt0LmFnZ3JlZ2F0ZUdlb21ldHJpZXNbc109ZX1lbHNle2xldCBzPW51bGw7aWYoVClzPWE7ZWxzZXtjb25zdCBlPXRoaXMuX2dldEF0dHJpYnV0ZVZhbHVlcyhsLHksaSksdD11Lm1hcCgodD0+ZVt0XSkpO3M9eCYmXCJzdGF0aXN0aWNQYXJhbWV0ZXJzXCJpbiBtP3RoaXMuX2dldFBlcmNlbnRpbGVWYWx1ZShtLHQpOnRoaXMuX2dldFN0YXRpc3RpY1ZhbHVlKG0sdCxudWxsLGwucmV0dXJuRGlzdGluY3RWYWx1ZXMpfXQuYXR0cmlidXRlc1tlXT1zfWxldCBzPTA7Yy5mb3JFYWNoKCgoZSxpKT0+dC5hdHRyaWJ1dGVzW3RoaXMuZmllbGRzSW5kZXguZ2V0KGUpP2U6XCJFWFBSX1wiKyArK3NdPXJbaV0pKSxuLnNldChoLHQpfX19ZWxzZSBpZihJKXt0LmFnZ3JlZ2F0ZUdlb21ldHJpZXN8fCh0LmFnZ3JlZ2F0ZUdlb21ldHJpZXM9e30pO2NvbnN0e2FnZ3JlZ2F0ZUdlb21ldHJpZXM6ZSxvdXRTdGF0aXN0aWNGaWVsZE5hbWU6c309YXdhaXQgdGhpcy5fZ2V0QWdncmVnYXRlR2VvbWV0cnkobSx0aGlzLml0ZW1zKTt0LmFnZ3JlZ2F0ZUdlb21ldHJpZXNbc109ZX1lbHNle2NvbnN0IHM9dGhpcy5fZ2V0QXR0cmlidXRlVmFsdWVzKGwseSxpKTt0LmF0dHJpYnV0ZXNbZV09eCYmXCJzdGF0aXN0aWNQYXJhbWV0ZXJzXCJpbiBtP3RoaXMuX2dldFBlcmNlbnRpbGVWYWx1ZShtLHMpOnRoaXMuX2dldFN0YXRpc3RpY1ZhbHVlKG0scyxhLGwucmV0dXJuRGlzdGluY3RWYWx1ZXMpfXMucHVzaCh7bmFtZTplLGFsaWFzOmUsdHlwZTpcImVzcmlGaWVsZFR5cGVEb3VibGVcIn0pfWNvbnN0IHk9Zz9BcnJheS5mcm9tKG4udmFsdWVzKCkpOlt0XTtyZXR1cm4gdGhpcy5fc29ydEZlYXR1cmVzKHksbSwoKGUsdCk9PmUuYXR0cmlidXRlc1t0XSkpLHtmaWVsZHM6cyxmZWF0dXJlczp5fX1hc3luYyBfZ2V0QWdncmVnYXRlR2VvbWV0cnkoYSxyKXtjb25zdHtjb252ZXhIdWxsOm4sdW5pb246b309YXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vZ2VvbWV0cnkvZ2VvbWV0cnlFbmdpbmVKU09OLmpzXCIpLHtzdGF0aXN0aWNUeXBlOmwsb3V0U3RhdGlzdGljRmllbGROYW1lOnV9PWEse2ZlYXR1cmVBZGFwdGVyOmMsc3BhdGlhbFJlZmVyZW5jZTpkLGdlb21ldHJ5VHlwZTpoLGhhc1o6ZyxoYXNNOmZ9PXRoaXMscD1yLm1hcCgoZT0+bShoLGcsZixjLmdldEdlb21ldHJ5KGUpKSkpLHk9bihkLHAsITApWzBdLHg9e2FnZ3JlZ2F0ZUdlb21ldHJpZXM6bnVsbCxvdXRTdGF0aXN0aWNGaWVsZE5hbWU6bnVsbH07aWYoXCJFbnZlbG9wZUFnZ3JlZ2F0ZVwiPT09bCl7Y29uc3QgZT15P3MoeSk6aShvKGQscCkpO3guYWdncmVnYXRlR2VvbWV0cmllcz17Li4uZSxzcGF0aWFsUmVmZXJlbmNlOmR9LHgub3V0U3RhdGlzdGljRmllbGROYW1lPXV8fFwiZXh0ZW50XCJ9ZWxzZSBpZihcIkNlbnRyb2lkQWdncmVnYXRlXCI9PT1sKXtjb25zdCBzPXk/ZSh5KTp0KGkobyhkLHApKSk7eC5hZ2dyZWdhdGVHZW9tZXRyaWVzPXt4OnNbMF0seTpzWzFdLHNwYXRpYWxSZWZlcmVuY2U6ZH0seC5vdXRTdGF0aXN0aWNGaWVsZE5hbWU9dXx8XCJjZW50cm9pZFwifWVsc2VcIkNvbnZleEh1bGxBZ2dyZWdhdGVcIj09PWwmJih4LmFnZ3JlZ2F0ZUdlb21ldHJpZXM9eSx4Lm91dFN0YXRpc3RpY0ZpZWxkTmFtZT11fHxcImNvbnZleEh1bGxcIik7cmV0dXJuIHh9X2dldFN0YXRpc3RpY1ZhbHVlKGUsdCxzLGkpe2NvbnN0e29uU3RhdGlzdGljRmllbGQ6YSxzdGF0aXN0aWNUeXBlOnJ9PWU7bGV0IG49bnVsbDtuPXM/LmhhcyhhKT9zLmdldChhKTpnKHRoaXMuZmllbGRzSW5kZXguZ2V0KGEpKT9wKHt2YWx1ZXM6dCxyZXR1cm5EaXN0aW5jdDppfSk6eSh7dmFsdWVzOmk/Wy4uLm5ldyBTZXQodCldOnQsbWluVmFsdWU6bnVsbCxtYXhWYWx1ZTpudWxsLHVzZVNhbXBsZVN0ZERldjohMH0pLHMmJnMuc2V0KGEsbik7cmV0dXJuIG5bXCJ2YXJcIj09PXI/XCJ2YXJpYW5jZVwiOnJdfV9nZXRQZXJjZW50aWxlVmFsdWUoZSx0KXtjb25zdHtvblN0YXRpc3RpY0ZpZWxkOnMsc3RhdGlzdGljUGFyYW1ldGVyczppLHN0YXRpc3RpY1R5cGU6YX09ZSx7dmFsdWU6cixvcmRlckJ5Om59PWksbz10aGlzLmZpZWxkc0luZGV4LmdldChzKTtyZXR1cm4gdih0LHt2YWx1ZTpyLG9yZGVyQnk6bixmaWVsZFR5cGU6bz8udHlwZSxpc0Rpc2NyZXRlOlwicGVyY2VudGlsZV9kaXNjXCI9PT1hfSl9X2dldEF0dHJpYnV0ZVZhbHVlcyhlLHQscyl7aWYocy5oYXModCkpcmV0dXJuIHMuZ2V0KHQpO2NvbnN0IGk9dGhpcy5maWVsZHNJbmRleC5nZXQodCksYT10aGlzLml0ZW1zLm1hcCgocz0+ZS5nZXRGaWVsZFZhbHVlKHMsdCxpKSkpO3JldHVybiBzLnNldCh0LGEpLGF9X2NhbGN1bGF0ZVVuaXF1ZVZhbHVlcyhlLHQpe2NvbnN0IHM9e30saT10aGlzLml0ZW1zLGE9aS5sZW5ndGg7Zm9yKGxldCByPTA7cjxhO3IrKyl7Y29uc3QgYT1pW3JdLG49W107Zm9yKGNvbnN0IHQgb2YgZSluLnB1c2godFtyXSk7Y29uc3Qgbz1uLmpvaW4oXCIsXCIpO251bGw9PXNbb10/c1tvXT17Y291bnQ6MSxkYXRhOm4saXRlbXM6W2FdLGl0ZW1Qb3NpdGlvbnM6W3JdfToodHx8c1tvXS5jb3VudCsrLHNbb10uaXRlbXMucHVzaChhKSxzW29dLml0ZW1Qb3NpdGlvbnMucHVzaChyKSl9cmV0dXJuIHN9YXN5bmMgX2dldERhdGFWYWx1ZXMoZSl7Y29uc3QgdD1uZXcgbyh0aGlzLnF1ZXJ5LHRoaXMuZmVhdHVyZUFkYXB0ZXIsdGhpcy5maWVsZHNJbmRleCkse3ZhbHVlRXhwcmVzc2lvbjpzLHNjYWxlOml9PWUsYT1zP3t2aWV3aW5nTW9kZTpcIm1hcFwiLHNjYWxlOmksc3BhdGlhbFJlZmVyZW5jZTp0aGlzLnF1ZXJ5Lm91dFNSfHx0aGlzLnNwYXRpYWxSZWZlcmVuY2V9Om51bGw7cmV0dXJuIHM/dC5nZXRFeHByZXNzaW9uVmFsdWVzKHRoaXMuaXRlbXMscyxhLHtnZW9tZXRyeVR5cGU6dGhpcy5nZW9tZXRyeVR5cGUsaGFzWjp0aGlzLmhhc1osaGFzTTp0aGlzLmhhc019KTp0LmdldERhdGFWYWx1ZXModGhpcy5pdGVtcyx7ZmllbGQ6ZS5maWVsZCxmaWVsZDI6ZS5maWVsZDIsZmllbGQzOmUuZmllbGQzLGZpZWxkRGVsaW1pdGVyOmUuZmllbGREZWxpbWl0ZXIsbm9ybWFsaXphdGlvbkZpZWxkOmUubm9ybWFsaXphdGlvbkZpZWxkLG5vcm1hbGl6YXRpb25UeXBlOmUubm9ybWFsaXphdGlvblR5cGUsbm9ybWFsaXphdGlvblRvdGFsOmUubm9ybWFsaXphdGlvblRvdGFsfSl9fWZ1bmN0aW9uIFIoZSx0LHMsaSl7Y29uc3QgYT1pLngtcy54LHI9aS55LXMueSxuPWEqYStyKnIsbz0odC54LXMueCkqYSsodC55LXMueSkqcixsPU1hdGgubWluKDEsTWF0aC5tYXgoMCxvL24pKTtlLng9cy54K2EqbCxlLnk9cy55K3IqbH1mdW5jdGlvbiBiKGUsdCl7cmV0dXJuIGU/dD80OjM6dD8zOjJ9Y2xhc3MgQXtjb25zdHJ1Y3RvcihlLHQpe3RoaXMuY29vcmRzPWUsdGhpcy5jb29yZHNJbmRleD10fWdldCB4KCl7cmV0dXJuIHRoaXMuY29vcmRzW3RoaXMuY29vcmRzSW5kZXhdfWdldCB5KCl7cmV0dXJuIHRoaXMuY29vcmRzW3RoaXMuY29vcmRzSW5kZXgrMV19Z2V0IHooKXtyZXR1cm4gdGhpcy5jb29yZHNbdGhpcy5jb29yZHNJbmRleCsyXX19ZXhwb3J0e3ogYXMgUXVlcnlFbmdpbmVSZXN1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHQodCxlLHIpe3JldHVybntvYmplY3RJZDp0LHRhcmdldDplLGRpc3RhbmNlOnIsdHlwZTpcInZlcnRleFwifX1mdW5jdGlvbiBlKHQsZSxyLG4sZCxhPSExKXtyZXR1cm57b2JqZWN0SWQ6dCx0YXJnZXQ6ZSxkaXN0YW5jZTpyLHR5cGU6XCJlZGdlXCIsc3RhcnQ6bixlbmQ6ZCxkcmFwZWQ6YX19ZXhwb3J0e2UgYXMgbWFrZUVkZ2VDYW5kaWRhdGUsdCBhcyBtYWtlVmVydGV4Q2FuZGlkYXRlfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e0pTT05NYXAgYXMgc31mcm9tXCIuLi8uLi8uLi9jb3JlL2pzb25NYXAuanNcIjtpbXBvcnR7V2hlcmVDbGF1c2VDYWNoZSBhcyBpfWZyb21cIi4uLy4uLy4uL2NvcmUvc3FsL1doZXJlQ2xhdXNlQ2FjaGUuanNcIjtjb25zdCBuPW5ldyBpKDUwLDUwMCkscj1cImZlYXR1cmUtc3RvcmU6dW5zdXBwb3J0ZWQtcXVlcnlcIix0PVwiIGFzIFwiLG89bmV3IHMoe2VzcmlGaWVsZFR5cGVTdHJpbmc6XCJzdHJpbmdcIn0pLGE9bmV3IHMoe2VzcmlGaWVsZFR5cGVPSUQ6XCJvaWRcIixlc3JpRmllbGRUeXBlU21hbGxJbnRlZ2VyOlwic21hbGwtaW50ZWdlclwiLGVzcmlGaWVsZFR5cGVJbnRlZ2VyOlwiaW50ZWdlclwiLGVzcmlGaWVsZFR5cGVTaW5nbGU6XCJzaW5nbGVcIixlc3JpRmllbGRUeXBlRG91YmxlOlwiZG91YmxlXCIsZXNyaUZpZWxkVHlwZUxvbmc6XCJsb25nXCJ9KSxsPW5ldyBzKHtlc3JpRmllbGRUeXBlRGF0ZTpcImRhdGVcIn0pLGQ9bmV3IHMoe2VzcmlGaWVsZFR5cGVHVUlEOlwiZ3VpZFwiLGVzcmlGaWVsZFR5cGVHbG9iYWxJZDpcImdsb2JhbC1pZFwifSkscD1uZXcgU2V0KFsuLi5hLmpzb25WYWx1ZXMsLi4ubC5qc29uVmFsdWVzLC4uLm8uanNvblZhbHVlcywuLi5kLmpzb25WYWx1ZXNdKSx1PW5ldyBJbnRsLkxpc3RGb3JtYXQoXCJlbi1VU1wiLHt0eXBlOlwiY29uanVuY3Rpb25cIn0pLmZvcm1hdChbLi4uYS5hcGlWYWx1ZXMsLi4ubC5hcGlWYWx1ZXMsLi4uby5hcGlWYWx1ZXMsLi4uZC5hcGlWYWx1ZXNdKTtmdW5jdGlvbiBnKHMsaSxuPXt9KXtjb25zdCB0PXkocyxpKTtpZighdCl0aHJvdyBuZXcgZShyLFwiaW52YWxpZCBTUUwgZXhwcmVzc2lvblwiLHtleHByZXNzaW9uOnN9KTtjb25zdCBvPW4uZXhwcmVzc2lvbk5hbWV8fFwiZXhwcmVzc2lvblwiO2lmKG4udmFsaWRhdGVTdGFuZGFyZGl6ZWQmJiF0LmlzU3RhbmRhcmRpemVkKXRocm93IG5ldyBlKHIsYCR7b30gaXMgbm90IHN0YW5kYXJkYCx7ZXhwcmVzc2lvbjpzfSk7aWYobi52YWxpZGF0ZUFnZ3JlZ2F0ZSYmIXQuaXNBZ2dyZWdhdGUpdGhyb3cgbmV3IGUocixgJHtvfSBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgYWdncmVnYXRlIGZ1bmN0aW9uYCx7ZXhwcmVzc2lvbjpzfSk7cmV0dXJuIHQuZmllbGROYW1lc31mdW5jdGlvbiBjKGUscyxpKXtpZighcylyZXR1cm4hMDtjb25zdCBuPVwid2hlcmUgY2xhdXNlXCIscj1nKHMsZSx7dmFsaWRhdGVTdGFuZGFyZGl6ZWQ6ITAsZXhwcmVzc2lvbk5hbWU6bn0pO3JldHVybiBtKGUscix7ZXhwcmVzc2lvbk5hbWU6bixxdWVyeTppfSkseChlLHIse2V4cHJlc3Npb25OYW1lOm4scXVlcnk6aX0pLCEwfWZ1bmN0aW9uIGYocyxpLHQsbyl7aWYoIWkpcmV0dXJuITA7Y29uc3QgYT1cImhhdmluZ1wiLGw9ZyhpLHMse3ZhbGlkYXRlQWdncmVnYXRlOiEwLGV4cHJlc3Npb25OYW1lOmF9KTttKHMsbCx7ZXhwcmVzc2lvbk5hbWU6YSxxdWVyeTpvfSkseChzLGwse2V4cHJlc3Npb25OYW1lOmEscXVlcnk6b30pO2NvbnN0IGQ9bi5nZXQoaSxzKSxwPWQ/LmdldEV4cHJlc3Npb25zKCkuZXZlcnkoKGU9Pntjb25zdHthZ2dyZWdhdGVUeXBlOmksZmllbGQ6bn09ZSxyPXMuZ2V0KG4pPy5uYW1lO3JldHVybiB0LnNvbWUoKGU9Pntjb25zdHtvblN0YXRpc3RpY0ZpZWxkOm4sc3RhdGlzdGljVHlwZTp0fT1lLG89cy5nZXQobik/Lm5hbWU7cmV0dXJuIG89PT1yJiZ0LnRvTG93ZXJDYXNlKCkudHJpbSgpPT09aX0pKX0pKTtpZighcCl0aHJvdyBuZXcgZShyLFwiZXhwcmVzc2lvbnMgaW4gaGF2aW5nIHNob3VsZCBhbHNvIGV4aXN0IGluIG91dFN0YXRpc3RpY3NcIix7aGF2aW5nOml9KTtyZXR1cm4hMH1mdW5jdGlvbiB5KGUscyl7cmV0dXJuIGU/bi5nZXQoZSxzKTpudWxsfWZ1bmN0aW9uIG0oZSxzLGk9e30pe2kuZXJyb3JNZXNzYWdlfHwoaS5lcnJvck1lc3NhZ2U9aS5leHByZXNzaW9uTmFtZT9gJHtpLmV4cHJlc3Npb25OYW1lfSBjb250YWlucyBpbnZhbGlkIGZpZWxkc2A6XCJGaWVsZHMgYXJlIGludmFsaWRcIiksaChlLHMsKChlLHMpPT5zLmhhcyhlKSksaSl9ZnVuY3Rpb24geChlLHMsaT17fSl7aS5lcnJvck1lc3NhZ2V8fChpLmVycm9yTWVzc2FnZT1pLmV4cHJlc3Npb25OYW1lP2Ake2kuZXhwcmVzc2lvbk5hbWV9IG9ubHkgc3VwcG9ydHMgJHt1fSBmaWVsZCB0eXBlc2A6YE9ubHkgJHt1fSBmaWVsZCB0eXBlcyBhcmUgc3VwcG9ydGVkYCksaChlLHMsKChlLHMpPT4hRihlLHMpKSxpKX1mdW5jdGlvbiBoKHMsaSxuLHQ9e30pe2NvbnN0IG89dC52ZXJpZnlFeHByZXNzaW9uPz8hMCxhPVtdO2Zvcihjb25zdCBlIG9mIGkpe2NvbnN0IGk9bihlLHMpO2lmKFwiKlwiIT09ZSYmIWkpaWYobyl7Y29uc3QgaT13KGUpO3RyeXtoKHMsZyhpLHMse3ZhbGlkYXRlU3RhbmRhcmRpemVkOiEwfSksbix0KX1jYXRjaChsKXtjb25zdCBzPWw/LmRldGFpbHM7aWYocz8uZXhwcmVzc2lvbil0aHJvdyBsO3M/LmludmFsaWRGaWVsZHM/YS5wdXNoKC4uLnMuaW52YWxpZEZpZWxkcyk6YS5wdXNoKGUpfX1lbHNlIGEucHVzaChlKX1pZihhLmxlbmd0aCl0aHJvdyBuZXcgZShyLHQuZXJyb3JNZXNzYWdlLHtpbnZhbGlkRmllbGRzOmEscXVlcnk6dC5xdWVyeX0pfWZ1bmN0aW9uIHcoZSl7cmV0dXJuIGUuc3BsaXQodClbMF19ZnVuY3Rpb24gdihlKXtyZXR1cm4gZS5zcGxpdCh0KVsxXX1mdW5jdGlvbiBGKGUscyxpPXApe2NvbnN0IG49cy5nZXQoZSk7cmV0dXJuISFuJiYhaS5oYXMobi50eXBlKX1leHBvcnR7diBhcyBnZXRBbGlhc0Zyb21GaWVsZE5hbWUsdyBhcyBnZXRFeHByZXNzaW9uRnJvbUZpZWxkTmFtZSx5IGFzIGdldFdoZXJlQ2xhdXNlLEYgYXMgaGFzSW52YWxpZEZpZWxkVHlwZSxsIGFzIHZhbGlkRGF0ZVR5cGVzS2ViYWJEaWN0LGQgYXMgdmFsaWRHdWlkVHlwZXNLZWJhYkRpY3QsYSBhcyB2YWxpZE51bWVyaWNUeXBlc0tlYmFiRGljdCxvIGFzIHZhbGlkU3RyaW5nVHlwZXNLZWJhYkRpY3QseCBhcyB2YWxpZGF0ZUZpZWxkVHlwZXMsbSBhcyB2YWxpZGF0ZUZpZWxkcyxmIGFzIHZhbGlkYXRlSGF2aW5nLGMgYXMgdmFsaWRhdGVXaGVyZX07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=