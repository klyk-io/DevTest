"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["node_modules_arcgis_core_views_2d_layers_features_processors_HeatmapProcessor_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js ***!
  \****************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ p)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/HandleOwner.js */ "./node_modules/@arcgis/core/core/HandleOwner.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let s=class extends _core_HandleOwner_js__WEBPACK_IMPORTED_MODULE_1__.HandleOwner{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const e=this.get("tileStore.tileScheme.spatialReference");return e&&e.toJSON()||null}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({readOnly:!0})],s.prototype,"supportsTileUpdates",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"remoteClient",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"service",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)()],s.prototype,"spatialReference",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0})],s.prototype,"tileStore",void 0),s=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.views.2d.layers.features.processors.BaseProcessor")],s);const p=s;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/processors/HeatmapProcessor.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../core/accessorSupport/diffUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/diffUtils.js");
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../renderers/support/heatmapUtils.js */ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/* harmony import */ var _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./BaseProcessor.js */ "./node_modules/@arcgis/core/views/2d/layers/features/processors/BaseProcessor.js");
/* harmony import */ var _support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../support/tileUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class d{constructor(e,t){this.offset=e,this.extent=t}}function l(e){const t=e.key,s=new Map,r=256,i=_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_10__.TILE_SIZE,a=e.tileInfoView.tileInfo.isWrappable;return s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,-1,a).id,new d([-i,-i],[i-r,i-r,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,0,-1,a).id,new d([0,-i],[0,i-r,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,-1,a).id,new d([i,-i],[0,i-r,r,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,0,a).id,new d([-i,0],[i-r,0,i,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,0,a).id,new d([i,0],[0,0,r,i])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,-1,1,a).id,new d([-i,i],[i-r,0,i,r])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,0,1,a).id,new d([0,i],[0,0,i,r])),s.set((0,_support_tileUtils_js__WEBPACK_IMPORTED_MODULE_12__.getPow2NeighborKey)(t,1,1,a).id,new d([i,i],[0,0,r,r])),s}let p=class extends _BaseProcessor_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(){super(...arguments),this.type="heatmap",this._tileKeyToFeatureSets=new Map}initialize(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])}async update(e,t){const s=t.schema.processors[0];if("heatmap"!==s.type)return;(0,_core_accessorSupport_diffUtils_js__WEBPACK_IMPORTED_MODULE_8__.diff)(this._schema,s)&&(e.mesh=!0,this._schema=s)}onTileUpdate(e){for(const t of e.removed)this._tileKeyToFeatureSets.delete(t.key.id)}onTileClear(e){const t={clear:!0};return this._tileKeyToFeatureSets.delete(e.key.id),this.remoteClient.invoke("tileRenderer.onTileData",{tileKey:e.id,data:t})}async onTileMessage(e,s,r){this._tileKeyToFeatureSets.has(e.key.id)||this._tileKeyToFeatureSets.set(e.key.id,new Map);const o=this._tileKeyToFeatureSets.get(e.key.id);if(o&&null!=s.addOrUpdate&&s.addOrUpdate.hasFeatures&&o.set(s.addOrUpdate.instance,s),s.end){const s=[],o=l(e);this._tileKeyToFeatureSets.forEach(((r,i)=>{if(i===e.key.id)r.forEach((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.applySome)(e.addOrUpdate,(e=>s.push(e)))));else if(o.has(i)){const e=o.get(i),[a,n]=e.offset;r.forEach((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.applySome)(e.addOrUpdate,(e=>{const t=e.transform(a,n,1,1);s.push(t)}))))}}));const a=(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_9__.calculateHeatmapIntensityInfoReaders)(s,this._schema.mesh,512,512),n={tileKey:e.key.id,intensityInfo:a},d=[a.matrix];return this.remoteClient.invoke("tileRenderer.onTileData",n,{...r,transferList:d})}}onTileError(e,t,s){return this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:e.id,error:t},s)}};p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.2d.layers.features.processors.HeatmapProcessor")],p);const c=p;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/support/tileUtils.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getPow2NeighborKey: () => (/* binding */ o)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function o(o,l,c,r){const e=o.clone(),n=1<<e.level,t=e.col+l,w=e.row+c;return r&&t<0?(e.col=t+n,e.world-=1):t>=n?(e.col=t-n,e.world+=1):e.col=t,e.row=w,e}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19mZWF0dXJlc19wcm9jZXNzb3JzX0hlYXRtYXBQcm9jZXNzb3JfanMuYjAwNDgxNDRlYjk2YTA2MjZhMTEuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUMyYSxvQkFBb0IsNkRBQUMsQ0FBQyxjQUFjLFdBQVcsMEJBQTBCLFNBQVMsdUJBQXVCLDBEQUEwRCw2QkFBNkIsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVksMkNBQTJDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIsc0NBQXNDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIsaUNBQWlDLHVEQUFDLEVBQUUsc0ZBQUMseUNBQXlDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIsa0NBQWtDLHVEQUFDLEVBQUUsc0ZBQUMsRUFBRSxpQkFBaUIscUNBQXFDLHVEQUFDLEVBQUUsc0ZBQUMsK0RBQStELFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSmppQztBQUNBO0FBQ0E7QUFDQTtBQUN3dUIsUUFBUSxpQkFBaUIsNkJBQTZCLGNBQWMsZ0NBQWdDLG9FQUFDLHVDQUF1QyxhQUFhLDBFQUFDLG1EQUFtRCwwRUFBQywrQ0FBK0MsMEVBQUMsK0NBQStDLDBFQUFDLCtDQUErQywwRUFBQywyQ0FBMkMsMEVBQUMsK0NBQStDLDBFQUFDLDJDQUEyQywwRUFBQyx1Q0FBdUMsb0JBQW9CLDBEQUFDLENBQUMsY0FBYywyRUFBMkUsYUFBYSw2RUFBNkUsa0JBQWtCLCtCQUErQiw2QkFBNkIsd0VBQUMsNkNBQTZDLGdCQUFnQixxRUFBcUUsZUFBZSxTQUFTLFVBQVUsdUdBQXVHLG9CQUFvQixFQUFFLDJCQUEyQiwyRkFBMkYsaURBQWlELDZGQUE2RixrQkFBa0IsNENBQTRDLDhCQUE4Qix5REFBQyxpQ0FBaUMsa0JBQWtCLGdDQUFnQyxjQUFjLHlEQUFDLG9CQUFvQiw2QkFBNkIsVUFBVSxNQUFNLEdBQUcsUUFBUSx3R0FBQyxpQ0FBaUMsaUNBQWlDLGNBQWMsNkRBQTZELG9CQUFvQixHQUFHLG1CQUFtQiw0REFBNEQscUJBQXFCLE1BQU0sRUFBRSx1REFBQyxFQUFFLHNGQUFDLGtFQUFrRSxVQUErQjs7Ozs7Ozs7Ozs7Ozs7O0FDSm5yRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtREFBbUQsbUZBQW1IIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2ZlYXR1cmVzL3Byb2Nlc3NvcnMvQmFzZVByb2Nlc3Nvci5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9sYXllcnMvZmVhdHVyZXMvcHJvY2Vzc29ycy9IZWF0bWFwUHJvY2Vzc29yLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2xheWVycy9mZWF0dXJlcy9zdXBwb3J0L3RpbGVVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e0hhbmRsZU93bmVyIGFzIHJ9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9IYW5kbGVPd25lci5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyB0fWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7bGV0IHM9Y2xhc3MgZXh0ZW5kcyBye2luaXRpYWxpemUoKXt9ZGVzdHJveSgpe31nZXQgc3VwcG9ydHNUaWxlVXBkYXRlcygpe3JldHVybiExfWdldCBzcGF0aWFsUmVmZXJlbmNlKCl7Y29uc3QgZT10aGlzLmdldChcInRpbGVTdG9yZS50aWxlU2NoZW1lLnNwYXRpYWxSZWZlcmVuY2VcIik7cmV0dXJuIGUmJmUudG9KU09OKCl8fG51bGx9fTtlKFt0KHtyZWFkT25seTohMH0pXSxzLnByb3RvdHlwZSxcInN1cHBvcnRzVGlsZVVwZGF0ZXNcIixudWxsKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwicmVtb3RlQ2xpZW50XCIsdm9pZCAwKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwic2VydmljZVwiLHZvaWQgMCksZShbdCgpXSxzLnByb3RvdHlwZSxcInNwYXRpYWxSZWZlcmVuY2VcIixudWxsKSxlKFt0KHtjb25zdHJ1Y3RPbmx5OiEwfSldLHMucHJvdG90eXBlLFwidGlsZUluZm9cIix2b2lkIDApLGUoW3Qoe2NvbnN0cnVjdE9ubHk6ITB9KV0scy5wcm90b3R5cGUsXCJ0aWxlU3RvcmVcIix2b2lkIDApLHM9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLmZlYXR1cmVzLnByb2Nlc3NvcnMuQmFzZVByb2Nlc3NvclwiKV0scyk7Y29uc3QgcD1zO2V4cG9ydHtwIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7YXBwbHlTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBzfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7ZGlmZiBhcyByfWZyb21cIi4uLy4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RpZmZVdGlscy5qc1wiO2ltcG9ydHtjYWxjdWxhdGVIZWF0bWFwSW50ZW5zaXR5SW5mb1JlYWRlcnMgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi8uLi9yZW5kZXJlcnMvc3VwcG9ydC9oZWF0bWFwVXRpbHMuanNcIjtpbXBvcnR7VElMRV9TSVpFIGFzIG99ZnJvbVwiLi4vLi4vLi4vZW5naW5lL3dlYmdsL2RlZmluaXRpb25zLmpzXCI7aW1wb3J0IGEgZnJvbVwiLi9CYXNlUHJvY2Vzc29yLmpzXCI7aW1wb3J0e2dldFBvdzJOZWlnaGJvcktleSBhcyBufWZyb21cIi4uL3N1cHBvcnQvdGlsZVV0aWxzLmpzXCI7Y2xhc3MgZHtjb25zdHJ1Y3RvcihlLHQpe3RoaXMub2Zmc2V0PWUsdGhpcy5leHRlbnQ9dH19ZnVuY3Rpb24gbChlKXtjb25zdCB0PWUua2V5LHM9bmV3IE1hcCxyPTI1NixpPW8sYT1lLnRpbGVJbmZvVmlldy50aWxlSW5mby5pc1dyYXBwYWJsZTtyZXR1cm4gcy5zZXQobih0LC0xLC0xLGEpLmlkLG5ldyBkKFstaSwtaV0sW2ktcixpLXIsaSxpXSkpLHMuc2V0KG4odCwwLC0xLGEpLmlkLG5ldyBkKFswLC1pXSxbMCxpLXIsaSxpXSkpLHMuc2V0KG4odCwxLC0xLGEpLmlkLG5ldyBkKFtpLC1pXSxbMCxpLXIscixpXSkpLHMuc2V0KG4odCwtMSwwLGEpLmlkLG5ldyBkKFstaSwwXSxbaS1yLDAsaSxpXSkpLHMuc2V0KG4odCwxLDAsYSkuaWQsbmV3IGQoW2ksMF0sWzAsMCxyLGldKSkscy5zZXQobih0LC0xLDEsYSkuaWQsbmV3IGQoWy1pLGldLFtpLXIsMCxpLHJdKSkscy5zZXQobih0LDAsMSxhKS5pZCxuZXcgZChbMCxpXSxbMCwwLGkscl0pKSxzLnNldChuKHQsMSwxLGEpLmlkLG5ldyBkKFtpLGldLFswLDAscixyXSkpLHN9bGV0IHA9Y2xhc3MgZXh0ZW5kcyBhe2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLnR5cGU9XCJoZWF0bWFwXCIsdGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHM9bmV3IE1hcH1pbml0aWFsaXplKCl7dGhpcy5oYW5kbGVzLmFkZChbdGhpcy50aWxlU3RvcmUub24oXCJ1cGRhdGVcIix0aGlzLm9uVGlsZVVwZGF0ZS5iaW5kKHRoaXMpKV0pfWFzeW5jIHVwZGF0ZShlLHQpe2NvbnN0IHM9dC5zY2hlbWEucHJvY2Vzc29yc1swXTtpZihcImhlYXRtYXBcIiE9PXMudHlwZSlyZXR1cm47cih0aGlzLl9zY2hlbWEscykmJihlLm1lc2g9ITAsdGhpcy5fc2NoZW1hPXMpfW9uVGlsZVVwZGF0ZShlKXtmb3IoY29uc3QgdCBvZiBlLnJlbW92ZWQpdGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuZGVsZXRlKHQua2V5LmlkKX1vblRpbGVDbGVhcihlKXtjb25zdCB0PXtjbGVhcjohMH07cmV0dXJuIHRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmRlbGV0ZShlLmtleS5pZCksdGhpcy5yZW1vdGVDbGllbnQuaW52b2tlKFwidGlsZVJlbmRlcmVyLm9uVGlsZURhdGFcIix7dGlsZUtleTplLmlkLGRhdGE6dH0pfWFzeW5jIG9uVGlsZU1lc3NhZ2UoZSxzLHIpe3RoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmhhcyhlLmtleS5pZCl8fHRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLnNldChlLmtleS5pZCxuZXcgTWFwKTtjb25zdCBvPXRoaXMuX3RpbGVLZXlUb0ZlYXR1cmVTZXRzLmdldChlLmtleS5pZCk7aWYobyYmbnVsbCE9cy5hZGRPclVwZGF0ZSYmcy5hZGRPclVwZGF0ZS5oYXNGZWF0dXJlcyYmby5zZXQocy5hZGRPclVwZGF0ZS5pbnN0YW5jZSxzKSxzLmVuZCl7Y29uc3Qgcz1bXSxvPWwoZSk7dGhpcy5fdGlsZUtleVRvRmVhdHVyZVNldHMuZm9yRWFjaCgoKHIsaSk9PntpZihpPT09ZS5rZXkuaWQpci5mb3JFYWNoKChlPT50KGUuYWRkT3JVcGRhdGUsKGU9PnMucHVzaChlKSkpKSk7ZWxzZSBpZihvLmhhcyhpKSl7Y29uc3QgZT1vLmdldChpKSxbYSxuXT1lLm9mZnNldDtyLmZvckVhY2goKGU9PnQoZS5hZGRPclVwZGF0ZSwoZT0+e2NvbnN0IHQ9ZS50cmFuc2Zvcm0oYSxuLDEsMSk7cy5wdXNoKHQpfSkpKSl9fSkpO2NvbnN0IGE9aShzLHRoaXMuX3NjaGVtYS5tZXNoLDUxMiw1MTIpLG49e3RpbGVLZXk6ZS5rZXkuaWQsaW50ZW5zaXR5SW5mbzphfSxkPVthLm1hdHJpeF07cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVEYXRhXCIsbix7Li4ucix0cmFuc2Zlckxpc3Q6ZH0pfX1vblRpbGVFcnJvcihlLHQscyl7cmV0dXJuIHRoaXMucmVtb3RlQ2xpZW50Lmludm9rZShcInRpbGVSZW5kZXJlci5vblRpbGVFcnJvclwiLHt0aWxlS2V5OmUuaWQsZXJyb3I6dH0scyl9fTtwPWUoW3MoXCJlc3JpLnZpZXdzLjJkLmxheWVycy5mZWF0dXJlcy5wcm9jZXNzb3JzLkhlYXRtYXBQcm9jZXNzb3JcIildLHApO2NvbnN0IGM9cDtleHBvcnR7YyBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5mdW5jdGlvbiBvKG8sbCxjLHIpe2NvbnN0IGU9by5jbG9uZSgpLG49MTw8ZS5sZXZlbCx0PWUuY29sK2wsdz1lLnJvdytjO3JldHVybiByJiZ0PDA/KGUuY29sPXQrbixlLndvcmxkLT0xKTp0Pj1uPyhlLmNvbD10LW4sZS53b3JsZCs9MSk6ZS5jb2w9dCxlLnJvdz13LGV9ZXhwb3J0e28gYXMgZ2V0UG93Mk5laWdoYm9yS2V5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==