"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["node_modules_arcgis_core_views_2d_layers_MapNotesLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GroupContainer: () => (/* binding */ r)
/* harmony export */ });
/* harmony import */ var _WGLContainer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class r extends _WGLContainer_js__WEBPACK_IMPORTED_MODULE_0__["default"]{constructor(){super(...arguments),this._prevFBO=void 0,this.requiresDedicatedFBO=!1}dispose(){}doRender(e){const r=this.createRenderParams(e),{context:o,painter:s,profiler:n}=r;this._prevFBO=o.getBoundFramebufferObject(),n.recordContainerStart(this.name);const i=this._getFbo(r),a=s.getRenderTarget();o.bindFramebuffer(i),s.setRenderTarget(i),o.setDepthWriteEnabled(!0),o.setColorMask(!0,!0,!0,!0),o.setClearColor(0,0,0,0),o.setClearDepth(1),o.clear(o.gl.COLOR_BUFFER_BIT|o.gl.DEPTH_BUFFER_BIT),o.setDepthWriteEnabled(!1);for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(r);for(const t of this.children)t.afterRender(e);s.setRenderTarget(a),s.releaseFbo(i),o.bindFramebuffer(this._prevFBO),s.beforeRenderLayer(r,this._clippingInfos?255:0,this.computedOpacity),i.colorTexture&&(o.setStencilTestEnabled(!1),o.setStencilWriteMask(0),s.blitTexture(o,i.colorTexture,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.TextureSamplingMode.NEAREST)),s.compositeLayer(r,this.computedOpacity),n.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:t,painter:r}=e,{width:o,height:s}=t.getViewport();return r.acquireFbo(o,s)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/MapNotesLayerView2D.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _engine_Container_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../engine/Container.js */ "./node_modules/@arcgis/core/views/2d/engine/Container.js");
/* harmony import */ var _engine_webgl_GroupContainer_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../engine/webgl/GroupContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/GroupContainer.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./graphics/GraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js");
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const u="sublayers",f="layerView",m=Object.freeze({remove(){},pause(){},resume(){}});let w=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_12__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_15__["default"])){constructor(){super(...arguments),this._highlightIds=new Map,this.container=new _engine_webgl_GroupContainer_js__WEBPACK_IMPORTED_MODULE_11__.GroupContainer}async fetchPopupFeatures(e){return Array.from(this.graphicsViews(),(i=>i.hitTest(e).filter((e=>!!e.popupTemplate)))).flat()}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}async hitTest(e,i){return Array.from(this.graphicsViews(),(i=>{const s=i.hitTest(e);if(null!=this._graphicsViewsFeatureCollectionMap){const e=this._graphicsViewsFeatureCollectionMap.get(i);for(const i of s)!i.popupTemplate&&e.popupTemplate&&(i.popupTemplate=e.popupTemplate),i.sourceLayer=i.layer=this.layer}return s})).flat().map((i=>({type:"graphic",graphic:i,layer:this.layer,mapPoint:e})))}highlight(e){let r;"number"==typeof e?r=[e]:e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]?r=[e.uid]:Array.isArray(e)&&e.length>0?r="number"==typeof e[0]?e:e.map((e=>e&&e.uid)):_core_Collection_js__WEBPACK_IMPORTED_MODULE_3__["default"].isCollection(e)&&(r=e.map((e=>e&&e.uid)).toArray());const a=r?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_2__.isSome);return a?.length?(this._addHighlight(a),{remove:()=>{this._removeHighlight(a)}}):m}update(e){for(const i of this.graphicsViews())i.processUpdate(e)}attach(){const e=this.view,i=()=>this.requestUpdate(),s=this.layer.featureCollections;if(null!=s&&s.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const t of s){const s=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.view.featuresTilingScheme),a=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__["default"]({view:e,graphics:t.source,renderer:t.renderer,requestUpdateCallback:i,container:s});this._graphicsViewsFeatureCollectionMap.set(a,t),this.container.addChild(a.container),this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>t.visible),(e=>a.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>a.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial)],f)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.on)((()=>this.layer.sublayers),"change",(()=>this._createGraphicsViews()),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),u)}detach(){this._destroyGraphicsViews(),this.removeHandles(u)}moveStart(){}moveEnd(){}viewChange(){for(const e of this.graphicsViews())e.viewChange()}isUpdating(){for(const e of this.graphicsViews())if(e.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(f);for(const e of this.graphicsViews())e.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const e=[],i=this.view,s=()=>this.requestUpdate();for(const t of this.layer.sublayers){const a=new _engine_Container_js__WEBPACK_IMPORTED_MODULE_10__.Container,o=new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_13__["default"](this.view.featuresTilingScheme);o.fadeTransitionEnabled=!0;const l=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_14__["default"]({view:i,graphics:t.graphics,requestUpdateCallback:s,container:o});this.addHandles([t.on("graphic-update",l.graphicUpdateHandler),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>t.visible),(e=>l.container.visible=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>l.updating),(()=>this.notifyChange("updating")),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.initial)],f),a.addChild(l.container),this.container.addChild(a),e.push(l)}this._graphicsViews=e,this._updateHighlight()}_addHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i);this._highlightIds.set(i,e+1)}else this._highlightIds.set(i,1);this._updateHighlight()}_removeHighlight(e){for(const i of e)if(this._highlightIds.has(i)){const e=this._highlightIds.get(i)-1;0===e?this._highlightIds.delete(i):this._highlightIds.set(i,e)}this._updateHighlight()}_updateHighlight(){const e=Array.from(this._highlightIds.keys());for(const i of this.graphicsViews())i.setHighlight(e)}};w=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.MapNotesLayerView2D")],w);const y=w;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./BaseGraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/BaseGraphicContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class i extends _BaseGraphicContainer_js__WEBPACK_IMPORTED_MODULE_1__["default"]{renderChildren(r){this.attributeView.update(),this.children.some((e=>e.hasData))&&(this.attributeView.bindTextures(r.context,!1),super.renderChildren(r),r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.MAP&&this._renderChildren(r),this.hasHighlight()&&r.drawPhase===_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_0__.WGLDrawPhase.HIGHLIGHT&&this._renderHighlight(r),this._boundsRenderer&&this._boundsRenderer.doRender(r))}_renderHighlight(e){const{painter:r}=e,i=r.effects.highlight;i.bind(e),this._renderChildren(e,i.defines),i.draw(e),i.unbind()}}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19NYXBOb3Rlc0xheWVyVmlldzJEX2pzLjQyM2RlYjRmM2IwY2YxNWViZTIzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQytGLGdCQUFnQix3REFBQyxDQUFDLGNBQWMsc0VBQXNFLFdBQVcsWUFBWSxvQ0FBb0MsK0JBQStCLEdBQUcsOEVBQThFLDhDQUE4Qyw2TkFBNk4sK0NBQStDLGdEQUFnRCw4Q0FBOEMsaVBBQWlQLGdFQUFDLDJFQUEyRSxzQkFBc0IsT0FBTyxzR0FBc0csV0FBVyxNQUFNLG9CQUFvQixJQUFJLGlCQUFpQixpQkFBaUIsMEJBQXNEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnowQztBQUNBO0FBQ0E7QUFDQTtBQUM2d0IsbURBQW1ELFVBQVUsVUFBVSxZQUFZLEVBQUUsb0JBQW9CLGtFQUFDLENBQUMsNkRBQUMsR0FBRyxjQUFjLGtFQUFrRSw0RUFBQyxDQUFDLDRCQUE0QixnR0FBZ0csaUJBQWlCLGdLQUFnSyxtQkFBbUIsNENBQTRDLHFCQUFxQixrREFBa0QsdURBQXVELHVIQUF1SCxTQUFTLG9CQUFvQixxREFBcUQsSUFBSSxhQUFhLE1BQU0sc0NBQXNDLG1EQUFDLHVGQUF1RiwyREFBQyxxREFBcUQsa0JBQWtCLHVEQUFDLEVBQUUseUNBQXlDLFlBQVksMEJBQTBCLElBQUksVUFBVSx1REFBdUQsU0FBUyw2RUFBNkUsc0JBQXNCLGdEQUFnRCxrQkFBa0IsWUFBWSxzRUFBQyx1Q0FBdUMsb0VBQUMsRUFBRSxpRkFBaUYsRUFBRSx1R0FBdUcsNkRBQUMsNENBQTRDLDJEQUFDLEVBQUUsNkRBQUMsc0RBQXNELDJEQUFDLE1BQU0sd0JBQXdCLGlEQUFpRCwwREFBQyx3RUFBd0UsZ0dBQWdHLEtBQUssU0FBUyxtREFBbUQsYUFBYSxXQUFXLGFBQWEsbURBQW1ELGFBQWEsMkRBQTJELFNBQVMsd0JBQXdCLHlEQUF5RCxnREFBZ0Qsc0VBQXNFLHVCQUF1QixrRUFBa0Usa0RBQWtELHFDQUFxQyxZQUFZLDREQUFDLE9BQU8sc0VBQUMsaUNBQWlDLDJCQUEyQixZQUFZLG9FQUFDLEVBQUUsK0RBQStELEVBQUUsK0RBQStELDZEQUFDLDRDQUE0QywyREFBQyxFQUFFLDZEQUFDLHNEQUFzRCwyREFBQyxtRUFBbUUsOENBQThDLGlCQUFpQiwrQ0FBK0Msa0NBQWtDLDhCQUE4QixpQ0FBaUMsd0JBQXdCLG9CQUFvQiwrQ0FBK0Msb0NBQW9DLCtEQUErRCx3QkFBd0IsbUJBQW1CLDhDQUE4Qyx3REFBd0QsRUFBRSx1REFBQyxFQUFFLHNGQUFDLGlEQUFpRCxVQUErQjs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcDFJO0FBQ0E7QUFDQTtBQUNBO0FBQ29HLGdCQUFnQixnRUFBQyxDQUFDLGtCQUFrQixxSkFBcUosZ0VBQUMsaUVBQWlFLGdFQUFDLDZGQUE2RixvQkFBb0IsTUFBTSxVQUFVLHlCQUF5QixrRUFBdUYiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvd2ViZ2wvR3JvdXBDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL01hcE5vdGVzTGF5ZXJWaWV3MkQuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL2dyYXBoaWNzL0dyYXBoaWNDb250YWluZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4vV0dMQ29udGFpbmVyLmpzXCI7aW1wb3J0e1RleHR1cmVTYW1wbGluZ01vZGUgYXMgdH1mcm9tXCIuLi8uLi8uLi93ZWJnbC9lbnVtcy5qc1wiO2NsYXNzIHIgZXh0ZW5kcyBle2NvbnN0cnVjdG9yKCl7c3VwZXIoLi4uYXJndW1lbnRzKSx0aGlzLl9wcmV2RkJPPXZvaWQgMCx0aGlzLnJlcXVpcmVzRGVkaWNhdGVkRkJPPSExfWRpc3Bvc2UoKXt9ZG9SZW5kZXIoZSl7Y29uc3Qgcj10aGlzLmNyZWF0ZVJlbmRlclBhcmFtcyhlKSx7Y29udGV4dDpvLHBhaW50ZXI6cyxwcm9maWxlcjpufT1yO3RoaXMuX3ByZXZGQk89by5nZXRCb3VuZEZyYW1lYnVmZmVyT2JqZWN0KCksbi5yZWNvcmRDb250YWluZXJTdGFydCh0aGlzLm5hbWUpO2NvbnN0IGk9dGhpcy5fZ2V0RmJvKHIpLGE9cy5nZXRSZW5kZXJUYXJnZXQoKTtvLmJpbmRGcmFtZWJ1ZmZlcihpKSxzLnNldFJlbmRlclRhcmdldChpKSxvLnNldERlcHRoV3JpdGVFbmFibGVkKCEwKSxvLnNldENvbG9yTWFzayghMCwhMCwhMCwhMCksby5zZXRDbGVhckNvbG9yKDAsMCwwLDApLG8uc2V0Q2xlYXJEZXB0aCgxKSxvLmNsZWFyKG8uZ2wuQ09MT1JfQlVGRkVSX0JJVHxvLmdsLkRFUFRIX0JVRkZFUl9CSVQpLG8uc2V0RGVwdGhXcml0ZUVuYWJsZWQoITEpO2Zvcihjb25zdCB0IG9mIHRoaXMuY2hpbGRyZW4pdC5iZWZvcmVSZW5kZXIoZSk7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jaGlsZHJlbil0LnByb2Nlc3NSZW5kZXIocik7Zm9yKGNvbnN0IHQgb2YgdGhpcy5jaGlsZHJlbil0LmFmdGVyUmVuZGVyKGUpO3Muc2V0UmVuZGVyVGFyZ2V0KGEpLHMucmVsZWFzZUZibyhpKSxvLmJpbmRGcmFtZWJ1ZmZlcih0aGlzLl9wcmV2RkJPKSxzLmJlZm9yZVJlbmRlckxheWVyKHIsdGhpcy5fY2xpcHBpbmdJbmZvcz8yNTU6MCx0aGlzLmNvbXB1dGVkT3BhY2l0eSksaS5jb2xvclRleHR1cmUmJihvLnNldFN0ZW5jaWxUZXN0RW5hYmxlZCghMSksby5zZXRTdGVuY2lsV3JpdGVNYXNrKDApLHMuYmxpdFRleHR1cmUobyxpLmNvbG9yVGV4dHVyZSx0Lk5FQVJFU1QpKSxzLmNvbXBvc2l0ZUxheWVyKHIsdGhpcy5jb21wdXRlZE9wYWNpdHkpLG4ucmVjb3JkQ29udGFpbmVyRW5kKCl9Y3JlYXRlUmVuZGVyUGFyYW1zKGUpe3JldHVybnsuLi5zdXBlci5jcmVhdGVSZW5kZXJQYXJhbXMoZSksYmxlbmRNb2RlOnRoaXMuYmxlbmRNb2RlLGVmZmVjdHM6dGhpcy5jb21wdXRlZEVmZmVjdHMsZ2xvYmFsT3BhY2l0eToxfX1fZ2V0RmJvKGUpe2NvbnN0e2NvbnRleHQ6dCxwYWludGVyOnJ9PWUse3dpZHRoOm8saGVpZ2h0OnN9PXQuZ2V0Vmlld3BvcnQoKTtyZXR1cm4gci5hY3F1aXJlRmJvKG8scyl9fWV4cG9ydHtyIGFzIEdyb3VwQ29udGFpbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyBlfWZyb21cIi4uLy4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi8uLi9HcmFwaGljLmpzXCI7aW1wb3J0e2lzU29tZSBhcyBzfWZyb21cIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uL2NvcmUvQ29sbGVjdGlvbi5qc1wiO2ltcG9ydHt3YXRjaCBhcyByLG9uIGFzIGEsaW5pdGlhbCBhcyBofWZyb21cIi4uLy4uLy4uL2NvcmUvcmVhY3RpdmVVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtDb250YWluZXIgYXMgbn1mcm9tXCIuLi9lbmdpbmUvQ29udGFpbmVyLmpzXCI7aW1wb3J0e0dyb3VwQ29udGFpbmVyIGFzIGx9ZnJvbVwiLi4vZW5naW5lL3dlYmdsL0dyb3VwQ29udGFpbmVyLmpzXCI7aW1wb3J0e0xheWVyVmlldzJETWl4aW4gYXMgcH1mcm9tXCIuL0xheWVyVmlldzJELmpzXCI7aW1wb3J0IGMgZnJvbVwiLi9ncmFwaGljcy9HcmFwaGljQ29udGFpbmVyLmpzXCI7aW1wb3J0IGcgZnJvbVwiLi9ncmFwaGljcy9HcmFwaGljc1ZpZXcyRC5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uL2xheWVycy9MYXllclZpZXcuanNcIjtjb25zdCB1PVwic3VibGF5ZXJzXCIsZj1cImxheWVyVmlld1wiLG09T2JqZWN0LmZyZWV6ZSh7cmVtb3ZlKCl7fSxwYXVzZSgpe30scmVzdW1lKCl7fX0pO2xldCB3PWNsYXNzIGV4dGVuZHMocChkKSl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2hpZ2hsaWdodElkcz1uZXcgTWFwLHRoaXMuY29udGFpbmVyPW5ldyBsfWFzeW5jIGZldGNoUG9wdXBGZWF0dXJlcyhlKXtyZXR1cm4gQXJyYXkuZnJvbSh0aGlzLmdyYXBoaWNzVmlld3MoKSwoaT0+aS5oaXRUZXN0KGUpLmZpbHRlcigoZT0+ISFlLnBvcHVwVGVtcGxhdGUpKSkpLmZsYXQoKX0qZ3JhcGhpY3NWaWV3cygpe251bGw9PXRoaXMuX2dyYXBoaWNzVmlld3NGZWF0dXJlQ29sbGVjdGlvbk1hcD9udWxsPT10aGlzLl9ncmFwaGljc1ZpZXdzP3lpZWxkKltdOnlpZWxkKnRoaXMuX2dyYXBoaWNzVmlld3M6eWllbGQqdGhpcy5fZ3JhcGhpY3NWaWV3c0ZlYXR1cmVDb2xsZWN0aW9uTWFwLmtleXMoKX1hc3luYyBoaXRUZXN0KGUsaSl7cmV0dXJuIEFycmF5LmZyb20odGhpcy5ncmFwaGljc1ZpZXdzKCksKGk9Pntjb25zdCBzPWkuaGl0VGVzdChlKTtpZihudWxsIT10aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXApe2NvbnN0IGU9dGhpcy5fZ3JhcGhpY3NWaWV3c0ZlYXR1cmVDb2xsZWN0aW9uTWFwLmdldChpKTtmb3IoY29uc3QgaSBvZiBzKSFpLnBvcHVwVGVtcGxhdGUmJmUucG9wdXBUZW1wbGF0ZSYmKGkucG9wdXBUZW1wbGF0ZT1lLnBvcHVwVGVtcGxhdGUpLGkuc291cmNlTGF5ZXI9aS5sYXllcj10aGlzLmxheWVyfXJldHVybiBzfSkpLmZsYXQoKS5tYXAoKGk9Pih7dHlwZTpcImdyYXBoaWNcIixncmFwaGljOmksbGF5ZXI6dGhpcy5sYXllcixtYXBQb2ludDplfSkpKX1oaWdobGlnaHQoZSl7bGV0IHI7XCJudW1iZXJcIj09dHlwZW9mIGU/cj1bZV06ZSBpbnN0YW5jZW9mIGk/cj1bZS51aWRdOkFycmF5LmlzQXJyYXkoZSkmJmUubGVuZ3RoPjA/cj1cIm51bWJlclwiPT10eXBlb2YgZVswXT9lOmUubWFwKChlPT5lJiZlLnVpZCkpOnQuaXNDb2xsZWN0aW9uKGUpJiYocj1lLm1hcCgoZT0+ZSYmZS51aWQpKS50b0FycmF5KCkpO2NvbnN0IGE9cj8uZmlsdGVyKHMpO3JldHVybiBhPy5sZW5ndGg/KHRoaXMuX2FkZEhpZ2hsaWdodChhKSx7cmVtb3ZlOigpPT57dGhpcy5fcmVtb3ZlSGlnaGxpZ2h0KGEpfX0pOm19dXBkYXRlKGUpe2Zvcihjb25zdCBpIG9mIHRoaXMuZ3JhcGhpY3NWaWV3cygpKWkucHJvY2Vzc1VwZGF0ZShlKX1hdHRhY2goKXtjb25zdCBlPXRoaXMudmlldyxpPSgpPT50aGlzLnJlcXVlc3RVcGRhdGUoKSxzPXRoaXMubGF5ZXIuZmVhdHVyZUNvbGxlY3Rpb25zO2lmKG51bGwhPXMmJnMubGVuZ3RoKXt0aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXA9bmV3IE1hcDtmb3IoY29uc3QgdCBvZiBzKXtjb25zdCBzPW5ldyBjKHRoaXMudmlldy5mZWF0dXJlc1RpbGluZ1NjaGVtZSksYT1uZXcgZyh7dmlldzplLGdyYXBoaWNzOnQuc291cmNlLHJlbmRlcmVyOnQucmVuZGVyZXIscmVxdWVzdFVwZGF0ZUNhbGxiYWNrOmksY29udGFpbmVyOnN9KTt0aGlzLl9ncmFwaGljc1ZpZXdzRmVhdHVyZUNvbGxlY3Rpb25NYXAuc2V0KGEsdCksdGhpcy5jb250YWluZXIuYWRkQ2hpbGQoYS5jb250YWluZXIpLHRoaXMuYWRkSGFuZGxlcyhbcigoKCk9PnQudmlzaWJsZSksKGU9PmEuY29udGFpbmVyLnZpc2libGU9ZSksaCkscigoKCk9PmEudXBkYXRpbmcpLCgoKT0+dGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKSksaCldLGYpfXRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpfWVsc2UgbnVsbCE9dGhpcy5sYXllci5zdWJsYXllcnMmJnRoaXMuYWRkSGFuZGxlcyhhKCgoKT0+dGhpcy5sYXllci5zdWJsYXllcnMpLFwiY2hhbmdlXCIsKCgpPT50aGlzLl9jcmVhdGVHcmFwaGljc1ZpZXdzKCkpLHtvbkxpc3RlbmVyQWRkOigpPT50aGlzLl9jcmVhdGVHcmFwaGljc1ZpZXdzKCksb25MaXN0ZW5lclJlbW92ZTooKT0+dGhpcy5fZGVzdHJveUdyYXBoaWNzVmlld3MoKX0pLHUpfWRldGFjaCgpe3RoaXMuX2Rlc3Ryb3lHcmFwaGljc1ZpZXdzKCksdGhpcy5yZW1vdmVIYW5kbGVzKHUpfW1vdmVTdGFydCgpe31tb3ZlRW5kKCl7fXZpZXdDaGFuZ2UoKXtmb3IoY29uc3QgZSBvZiB0aGlzLmdyYXBoaWNzVmlld3MoKSllLnZpZXdDaGFuZ2UoKX1pc1VwZGF0aW5nKCl7Zm9yKGNvbnN0IGUgb2YgdGhpcy5ncmFwaGljc1ZpZXdzKCkpaWYoZS51cGRhdGluZylyZXR1cm4hMDtyZXR1cm4hMX1fZGVzdHJveUdyYXBoaWNzVmlld3MoKXt0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMucmVtb3ZlSGFuZGxlcyhmKTtmb3IoY29uc3QgZSBvZiB0aGlzLmdyYXBoaWNzVmlld3MoKSllLmRlc3Ryb3koKTt0aGlzLl9ncmFwaGljc1ZpZXdzPW51bGwsdGhpcy5fZ3JhcGhpY3NWaWV3c0ZlYXR1cmVDb2xsZWN0aW9uTWFwPW51bGx9X2NyZWF0ZUdyYXBoaWNzVmlld3MoKXtpZih0aGlzLl9kZXN0cm95R3JhcGhpY3NWaWV3cygpLG51bGw9PXRoaXMubGF5ZXIuc3VibGF5ZXJzKXJldHVybjtjb25zdCBlPVtdLGk9dGhpcy52aWV3LHM9KCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpO2Zvcihjb25zdCB0IG9mIHRoaXMubGF5ZXIuc3VibGF5ZXJzKXtjb25zdCBhPW5ldyBuLG89bmV3IGModGhpcy52aWV3LmZlYXR1cmVzVGlsaW5nU2NoZW1lKTtvLmZhZGVUcmFuc2l0aW9uRW5hYmxlZD0hMDtjb25zdCBsPW5ldyBnKHt2aWV3OmksZ3JhcGhpY3M6dC5ncmFwaGljcyxyZXF1ZXN0VXBkYXRlQ2FsbGJhY2s6cyxjb250YWluZXI6b30pO3RoaXMuYWRkSGFuZGxlcyhbdC5vbihcImdyYXBoaWMtdXBkYXRlXCIsbC5ncmFwaGljVXBkYXRlSGFuZGxlcikscigoKCk9PnQudmlzaWJsZSksKGU9PmwuY29udGFpbmVyLnZpc2libGU9ZSksaCkscigoKCk9PmwudXBkYXRpbmcpLCgoKT0+dGhpcy5ub3RpZnlDaGFuZ2UoXCJ1cGRhdGluZ1wiKSksaCldLGYpLGEuYWRkQ2hpbGQobC5jb250YWluZXIpLHRoaXMuY29udGFpbmVyLmFkZENoaWxkKGEpLGUucHVzaChsKX10aGlzLl9ncmFwaGljc1ZpZXdzPWUsdGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCl9X2FkZEhpZ2hsaWdodChlKXtmb3IoY29uc3QgaSBvZiBlKWlmKHRoaXMuX2hpZ2hsaWdodElkcy5oYXMoaSkpe2NvbnN0IGU9dGhpcy5faGlnaGxpZ2h0SWRzLmdldChpKTt0aGlzLl9oaWdobGlnaHRJZHMuc2V0KGksZSsxKX1lbHNlIHRoaXMuX2hpZ2hsaWdodElkcy5zZXQoaSwxKTt0aGlzLl91cGRhdGVIaWdobGlnaHQoKX1fcmVtb3ZlSGlnaGxpZ2h0KGUpe2Zvcihjb25zdCBpIG9mIGUpaWYodGhpcy5faGlnaGxpZ2h0SWRzLmhhcyhpKSl7Y29uc3QgZT10aGlzLl9oaWdobGlnaHRJZHMuZ2V0KGkpLTE7MD09PWU/dGhpcy5faGlnaGxpZ2h0SWRzLmRlbGV0ZShpKTp0aGlzLl9oaWdobGlnaHRJZHMuc2V0KGksZSl9dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCl9X3VwZGF0ZUhpZ2hsaWdodCgpe2NvbnN0IGU9QXJyYXkuZnJvbSh0aGlzLl9oaWdobGlnaHRJZHMua2V5cygpKTtmb3IoY29uc3QgaSBvZiB0aGlzLmdyYXBoaWNzVmlld3MoKSlpLnNldEhpZ2hsaWdodChlKX19O3c9ZShbbyhcImVzcmkudmlld3MuMmQubGF5ZXJzLk1hcE5vdGVzTGF5ZXJWaWV3MkRcIildLHcpO2NvbnN0IHk9dztleHBvcnR7eSBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7V0dMRHJhd1BoYXNlIGFzIGV9ZnJvbVwiLi4vLi4vZW5naW5lL3dlYmdsL2VudW1zLmpzXCI7aW1wb3J0IHIgZnJvbVwiLi9CYXNlR3JhcGhpY0NvbnRhaW5lci5qc1wiO2NsYXNzIGkgZXh0ZW5kcyBye3JlbmRlckNoaWxkcmVuKHIpe3RoaXMuYXR0cmlidXRlVmlldy51cGRhdGUoKSx0aGlzLmNoaWxkcmVuLnNvbWUoKGU9PmUuaGFzRGF0YSkpJiYodGhpcy5hdHRyaWJ1dGVWaWV3LmJpbmRUZXh0dXJlcyhyLmNvbnRleHQsITEpLHN1cGVyLnJlbmRlckNoaWxkcmVuKHIpLHIuZHJhd1BoYXNlPT09ZS5NQVAmJnRoaXMuX3JlbmRlckNoaWxkcmVuKHIpLHRoaXMuaGFzSGlnaGxpZ2h0KCkmJnIuZHJhd1BoYXNlPT09ZS5ISUdITElHSFQmJnRoaXMuX3JlbmRlckhpZ2hsaWdodChyKSx0aGlzLl9ib3VuZHNSZW5kZXJlciYmdGhpcy5fYm91bmRzUmVuZGVyZXIuZG9SZW5kZXIocikpfV9yZW5kZXJIaWdobGlnaHQoZSl7Y29uc3R7cGFpbnRlcjpyfT1lLGk9ci5lZmZlY3RzLmhpZ2hsaWdodDtpLmJpbmQoZSksdGhpcy5fcmVuZGVyQ2hpbGRyZW4oZSxpLmRlZmluZXMpLGkuZHJhdyhlKSxpLnVuYmluZCgpfX1leHBvcnR7aSBhcyBkZWZhdWx0fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==