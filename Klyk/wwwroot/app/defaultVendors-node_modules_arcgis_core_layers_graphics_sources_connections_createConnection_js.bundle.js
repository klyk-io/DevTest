"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["defaultVendors-node_modules_arcgis_core_layers_graphics_sources_connections_createConnection_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js":
/*!*********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js ***!
  \*********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ y)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../../rest/query/operations/query.js */ "./node_modules/@arcgis/core/rest/query/operations/query.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const h=1e4,d={maxQueryDepth:5,maxRecordCountFactor:3};let g=class extends _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_11__.WebSocketConnection{constructor(e){super({...d,...e}),this._buddyServicesQuery=null,this._relatedFeatures=null}async _open(){const e=await this._fetchServiceDefinition(this._config.source);e.timeInfo.trackIdField||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("GeoEvent service was configured without a TrackIdField. This may result in certain functionality being disabled. The purgeOptions.maxObservations property will have no effect.");const t=this._fetchWebSocketUrl(e.streamUrls,this._config.spatialReference);this._buddyServicesQuery||(this._buddyServicesQuery=this._queryBuddyServices()),await this._buddyServicesQuery,await this._tryCreateWebSocket(t);const{filter:r,outFields:o}=this._config;this.destroyed||this._setFilter(r,o)}_onMessage(e){if("attributes"in e){let o;try{o=this._enrich(e),null!=this._featureZScaler&&this._featureZScaler(o.geometry)}catch(t){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to parse message",t))}this.onFeature(o)}else this.onMessage(e)}async _fetchServiceDefinition(e){const r={f:"json",...this._config.customParameters},s=(0,_request_js__WEBPACK_IMPORTED_MODULE_2__["default"])(e.path,{query:r,responseType:"json"}),o=(await s).data;return this._serviceDefinition=o,o}_fetchWebSocketUrl(e,t){const r=e[0],{urls:s,token:o}=r,n=this._inferWebSocketBaseUrl(s);return (0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_6__.addQueryParameters)(`${n}/subscribe`,{outSR:""+t.wkid,token:o})}_inferWebSocketBaseUrl(e){if(1===e.length)return e[0];for(const t of e)if(t.includes("wss"))return t;return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Unable to infer WebSocket url",e)),null}async _setFilter(e,t){const i=this._websocket;if(null==i||null==e&&null==t)return;const n=JSON.stringify({filter:this._serializeFilter(e,t)});let a=!1;const c=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.createResolver)(),u=()=>{a||(this.destroyed||this._websocket!==i||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Server timed out when setting filter")),c.reject())},l=e=>{const t=JSON.parse(e.data);t.filter&&(t.error&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Failed to set service filter",t.error)),this._set("errorString",`Could not set service filter - ${t.error}`),c.reject(t.error)),this._setWebSocketJSONParseHandler(i),a=!0,c.resolve())};return i.onmessage=l,i.send(n),setTimeout(u,h),c.promise}_serializeFilter(e,t){const o={};if(null==e&&null==t)return o;if(null!=e&&e.geometry)try{const t=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_14__.fromJSON)(e.geometry);if("extent"!==t.type)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"](`Expected extent but found type ${t.type}`);o.geometry=JSON.stringify(t.shiftCentralMeridian())}catch(i){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when setting connection geometryDefinition",i))}return null!=e&&e.where&&"1 = 1"!==e.where&&"1=1"!==e.where&&(o.where=e.where),null!=t&&(o.outFields=t.join(",")),o}_enrich(e){if(!this._relatedFeatures)return e;const t=this._serviceDefinition.relatedFeatures.joinField,o=e.attributes[t],i=this._relatedFeatures.get(o);if(!i)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).warn("geoevent-connection","Feature join failed. Is the join field configured correctly?",e),e;const{attributes:n,geometry:a}=i;for(const r in n)e.attributes[r]=n[r];return a&&(e.geometry=a),e.geometry||e.centroid||_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Found malformed feature - no geometry found",e)),e}async _queryBuddyServices(){try{const{relatedFeatures:e,keepLatestArchive:t}=this._serviceDefinition,r=this._queryRelatedFeatures(e),s=this._queryArchive(t);await r;const o=await s;if(!o)return;for(const i of o.features)this.onFeature(this._enrich(i))}catch(e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_4__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_3__["default"]("geoevent-connection","Encountered an error when querying buddy services",{error:e}))}}async _queryRelatedFeatures(e){if(!e)return;const t=await this._queryBuddy(e.featuresUrl);this._addRelatedFeatures(t)}async _queryArchive(e){if(e)return this._queryBuddy(e.featuresUrl)}async _queryBuddy(e){const t=new((await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../../FeatureLayer.js */ "./node_modules/@arcgis/core/layers/FeatureLayer.js"))).default)({url:e}),{capabilities:r}=await t.load(),s=r.query.supportsMaxRecordCountFactor,o=r.query.supportsPagination,i=r.query.supportsCentroid,n=this._config.maxRecordCountFactor,a=t.capabilities.query.maxRecordCount,l=s?a*n:a,h=new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"];if(h.outFields=this._config.outFields??["*"],h.where=this._config.filter?.where??"1=1",h.returnGeometry=!0,h.returnExceededLimitFeatures=!0,h.outSpatialReference=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_15__["default"].fromJSON(this._config.spatialReference),i&&(h.returnCentroid=!0),s&&(h.maxRecordCountFactor=n),o)return h.num=l,t.destroy(),this._queryPages(e,h);const d=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,h,this._config.sourceSpatialReference);return t.destroy(),d.data}async _queryPages(e,t,r=[],s=0){t.start=null!=t.num?s*t.num:null;const{data:o}=await (0,_rest_query_operations_query_js__WEBPACK_IMPORTED_MODULE_12__.executeQuery)(e,t,this._config.sourceSpatialReference);return o.exceededTransferLimit&&s<(this._config.maxQueryDepth??0)?(o.features.forEach((e=>r.push(e))),this._queryPages(e,t,r,s+1)):(r.forEach((e=>o.features.push(e))),o)}_addRelatedFeatures(e){const t=new Map,r=e.features,s=this._serviceDefinition.relatedFeatures.joinField;for(const o of r){const e=o.attributes[s];t.set(e,o)}this._relatedFeatures=t}};g=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.layers.graphics.sources.connections.GeoEventConnection")],g);const y=g;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebSocketConnection: () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../support/StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
var h;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSING=2]="CLOSING",e[e.CLOSED=3]="CLOSED"}(h||(h={}));let d=class extends _support_StreamConnection_js__WEBPACK_IMPORTED_MODULE_11__["default"]{constructor(e){super(),this._outstandingMessages=[],this.errorString=null;const{geometryType:t,spatialReference:o,sourceSpatialReference:s}=e;this._config=e,this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_10__.getGeometryZScaler)(t,s,o),this._open()}async _open(){await this._tryCreateWebSocket(),this.destroyed||await this._handshake()}destroy(){super.destroy(),null!=this._websocket&&(this._websocket.onopen=null,this._websocket.onclose=null,this._websocket.onerror=null,this._websocket.onmessage=null,this._websocket.close()),this._websocket=null}get connectionStatus(){if(null==this._websocket)return"disconnected";switch(this._websocket.readyState){case h.CONNECTING:case h.OPEN:return"connected";case h.CLOSING:case h.CLOSED:return"disconnected"}}sendMessageToSocket(e){null!=this._websocket?this._websocket.send(JSON.stringify(e)):this._outstandingMessages.push(e)}sendMessageToClient(e){this._onMessage(e)}updateCustomParameters(e){this._config.customParameters=e,null!=this._websocket&&this._websocket.close()}async _tryCreateWebSocket(e=this._config.source.path,r=1e3,i=0){try{if(this.destroyed)return;const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.addQueryParameters)(e,this._config.customParameters??{});this._websocket=await this._createWebSocket(t),this.notifyChange("connectionStatus")}catch(c){const n=r/1e3;return this._config.maxReconnectionAttempts&&i>=this._config.maxReconnectionAttempts?(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Exceeded maxReconnectionAttempts attempts. No further attempts will be made")),void this.destroy()):(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Failed to connect. Attempting to reconnect in ${n}s`,c)),await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.after)(r),this._tryCreateWebSocket(e,Math.min(1.5*r,1e3*this._config.maxReconnectionInterval),i+1))}}_setWebSocketJSONParseHandler(e){e.onmessage=e=>{try{const t=JSON.parse(e.data);this._onMessage(t)}catch(s){return void _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Failed to parse message, invalid JSON",{error:s}))}}}_createWebSocket(e){return new Promise(((t,o)=>{const s=new WebSocket(e);s.onopen=()=>{if(s.onopen=null,this.destroyed)return s.onclose=null,void s.close();s.onclose=e=>this._onClose(e),s.onerror=e=>this._onError(e),this._setWebSocketJSONParseHandler(s),t(s)},s.onclose=e=>{s.onopen=s.onclose=null,o(e)}}))}async _handshake(e=1e4){const s=this._websocket;if(null==s)return;const n=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.createResolver)(),i=s.onmessage,{filter:c,outFields:a,spatialReference:l}=this._config;return n.timeout(e),s.onmessage=e=>{let r=null;try{r=JSON.parse(e.data)}catch(h){}r&&"object"==typeof r||(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - malformed message",e.data)),n.reject(),this.destroy()),r.spatialReference?.wkid!==l?.wkid&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection",`Protocol violation. Handshake failed - expected wkid of ${l.wkid}`,e.data)),n.reject(),this.destroy()),"json"!==r.format&&(_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Protocol violation. Handshake failed - format is not set",e.data)),n.reject(),this.destroy()),c&&r.filter!==c&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set filter, but server doesn't support it")),a&&r.outFields!==a&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("websocket-connection","Tried to set outFields, but server doesn't support it")),s.onmessage=i;for(const t of this._outstandingMessages)s.send(JSON.stringify(t));this._outstandingMessages=[],n.resolve()},s.send(JSON.stringify({filter:c,outFields:a,format:"json",spatialReference:{wkid:l.wkid}})),n.promise}_onMessage(e){if(this.onMessage(e),"type"in e)switch(e.type){case"features":case"featureResult":for(const t of e.features)null!=this._featureZScaler&&this._featureZScaler(t.geometry),this.onFeature(t)}}_onError(e){const t="Encountered an error over WebSocket connection";this._set("errorString",t),_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",t)}_onClose(e){this._websocket=null,this.notifyChange("connectionStatus"),1e3!==e.code&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger(this).error("websocket-connection",`WebSocket closed unexpectedly with error code ${e.code}`),this.destroyed||this._open()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"connectionStatus",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],d.prototype,"errorString",void 0),d=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.layers.graphics.sources.connections.WebSocketConnection")],d);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/connections/createConnection.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createConnection: () => (/* binding */ o)
/* harmony export */ });
/* harmony import */ var _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./GeoEventConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/GeoEventConnection.js");
/* harmony import */ var _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./WebSocketConnection.js */ "./node_modules/@arcgis/core/layers/graphics/sources/connections/WebSocketConnection.js");
/* harmony import */ var _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../support/ClientSideConnection.js */ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function o(o,r,s,i,c,a,m,p){const f={source:o,sourceSpatialReference:r,spatialReference:s,geometryType:i,filter:c,maxReconnectionAttempts:a,maxReconnectionInterval:m,customParameters:p};if(!o)return new _support_ClientSideConnection_js__WEBPACK_IMPORTED_MODULE_2__.ClientSideConnection(f);return o.path.startsWith("wss://")||o.path.startsWith("ws://")?new _WebSocketConnection_js__WEBPACK_IMPORTED_MODULE_1__.WebSocketConnection(f):new _GeoEventConnection_js__WEBPACK_IMPORTED_MODULE_0__["default"](f)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/ClientSideConnection.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/ClientSideConnection.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ClientSideConnection: () => (/* binding */ c)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/zscale.js */ "./node_modules/@arcgis/core/geometry/support/zscale.js");
/* harmony import */ var _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./StreamConnection.js */ "./node_modules/@arcgis/core/layers/support/StreamConnection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let c=class extends _StreamConnection_js__WEBPACK_IMPORTED_MODULE_7__["default"]{constructor(e){super(),this.connectionStatus="connected",this.errorString=null;const{geometryType:r,spatialReference:t,sourceSpatialReference:s}=e;this._featureZScaler=(0,_geometry_support_zscale_js__WEBPACK_IMPORTED_MODULE_6__.getGeometryZScaler)(r,s,t)}updateCustomParameters(e){}sendMessageToSocket(e){}sendMessageToClient(e){if("type"in e)switch(e.type){case"features":case"featureResult":for(const r of e.features)null!=this._featureZScaler&&this._featureZScaler(r.geometry),this.onFeature(r)}this.onMessage(e)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"connectionStatus",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_1__.property)()],c.prototype,"errorString",void 0),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_5__.subclass)("esri.layers.support.ClientSideConnection")],c);


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/StreamConnection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/StreamConnection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ i)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
let c=class extends _core_Evented_js__WEBPACK_IMPORTED_MODULE_2__["default"].EventedAccessor{destroy(){this.emit("destroy")}get connectionError(){return this.errorString?new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("stream-connection",this.errorString):null}onFeature(r){this.emit("data-received",r)}onMessage(r){this.emit("message-received",r)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({readOnly:!0})],c.prototype,"connectionError",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.layers.support.StreamConnection")],c);const i=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/operations/urlUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/operations/urlUtils.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   mapParameters: () => (/* binding */ t)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function t(n){const o={};for(const e in n){if("declaredClass"===e)continue;const r=n[e];if(null!=r&&"function"!=typeof r)if(Array.isArray(r)){o[e]=[];for(let n=0;n<r.length;n++)o[e][n]=t(r[n])}else"object"==typeof r?r.toJSON&&(o[e]=JSON.stringify(r)):o[e]=r}return o}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/query/operations/query.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/query/operations/query.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   encodeGeometry: () => (/* binding */ s),
/* harmony export */   executeQuery: () => (/* binding */ m),
/* harmony export */   executeQueryForCount: () => (/* binding */ p),
/* harmony export */   executeQueryForExtent: () => (/* binding */ S),
/* harmony export */   executeQueryForIds: () => (/* binding */ d),
/* harmony export */   executeQueryPBF: () => (/* binding */ c),
/* harmony export */   executeQueryPBFBuffer: () => (/* binding */ f),
/* harmony export */   queryToQueryStringParameters: () => (/* binding */ y),
/* harmony export */   runQuery: () => (/* binding */ x)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../geometry/support/normalizeUtils.js */ "./node_modules/@arcgis/core/geometry/support/normalizeUtils.js");
/* harmony import */ var _operations_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../operations/urlUtils.js */ "./node_modules/@arcgis/core/rest/operations/urlUtils.js");
/* harmony import */ var _pbfQueryUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pbfQueryUtils.js */ "./node_modules/@arcgis/core/rest/query/operations/pbfQueryUtils.js");
/* harmony import */ var _queryZScale_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./queryZScale.js */ "./node_modules/@arcgis/core/rest/query/operations/queryZScale.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const l="Layer does not support extent calculation.";function s(t,e){if(e&&"extent"===t.type)return`${t.xmin},${t.ymin},${t.xmax},${t.ymax}`;if(e&&"point"===t.type)return`${t.x},${t.y}`;const n=t.toJSON();return delete n.spatialReference,JSON.stringify(n)}function y(t,e){const n=t.geometry,i=t.toJSON();delete i.compactGeometryEnabled,delete i.defaultSpatialReferenceEnabled;const a=i;let o,u,l;if(null!=n&&(u=n.spatialReference,l=n.spatialReference.wkid||JSON.stringify(n.spatialReference),a.geometryType=(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_2__.getJsonType)(n),a.geometry=s(n,t.compactGeometryEnabled),a.inSR=l),i.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=i.groupByFieldsForStatistics.join(",")),i.objectIds&&(a.objectIds=i.objectIds.join(",")),i.orderByFields&&(a.orderByFields=i.orderByFields.join(",")),!i.outFields||!i.returnDistinctValues&&(e?.returnCountOnly||e?.returnExtentOnly||e?.returnIdsOnly)?delete a.outFields:i.outFields.includes("*")?a.outFields="*":a.outFields=i.outFields.join(","),i.outSR?(a.outSR=i.outSR.wkid||JSON.stringify(i.outSR),o=t.outSpatialReference):n&&(i.returnGeometry||i.returnCentroid)&&(a.outSR=a.inSR,o=u),i.returnGeometry&&delete i.returnGeometry,i.outStatistics&&(a.outStatistics=JSON.stringify(i.outStatistics)),i.fullText&&(a.fullText=JSON.stringify(i.fullText)),i.pixelSize&&(a.pixelSize=JSON.stringify(i.pixelSize)),i.quantizationParameters&&(t.defaultSpatialReferenceEnabled&&null!=u&&null!=t.quantizationParameters&&null!=t.quantizationParameters.extent&&u.equals(t.quantizationParameters.extent.spatialReference)&&delete i.quantizationParameters.extent.spatialReference,a.quantizationParameters=JSON.stringify(i.quantizationParameters)),i.parameterValues&&(a.parameterValues=JSON.stringify(i.parameterValues)),i.rangeValues&&(a.rangeValues=JSON.stringify(i.rangeValues)),i.dynamicDataSource&&(a.layer=JSON.stringify({source:i.dynamicDataSource}),delete i.dynamicDataSource),i.timeExtent){const t=i.timeExtent,{start:e,end:n}=t;null==e&&null==n||(a.time=e===n?e:`${e??"null"},${n??"null"}`),delete i.timeExtent}return t.defaultSpatialReferenceEnabled&&null!=u&&null!=o&&u.equals(o)&&(a.defaultSR=a.inSR,delete a.inSR,delete a.outSR),a}async function m(t,e,n,r){const i=null!=e.timeExtent&&e.timeExtent.isEmpty?{data:{features:[]}}:await x(t,e,"json",r);return (0,_queryZScale_js__WEBPACK_IMPORTED_MODULE_6__.applyFeatureSetZUnitScaling)(e,n,i.data),i}async function c(t,e,n,r){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:n.createFeatureResult()};const i=await f(t,e,r),a=i;return a.data=(0,_pbfQueryUtils_js__WEBPACK_IMPORTED_MODULE_5__.parsePBFFeatureQuery)(i.data,n),a}function f(t,e,n){return x(t,e,"pbf",n)}function d(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):x(t,e,"json",n,{returnIdsOnly:!0})}function p(t,e,n){return null!=e.timeExtent&&e.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):x(t,e,"json",n,{returnIdsOnly:!0,returnCountOnly:!0})}async function S(t,e,n){if(null!=e.timeExtent&&e.timeExtent.isEmpty)return{data:{count:0,extent:null}};const r=await x(t,e,"json",n,{returnExtentOnly:!0,returnCountOnly:!0}),i=r.data;if(i.hasOwnProperty("extent"))return r;if(i.features)throw new Error(l);if(i.hasOwnProperty("count"))throw new Error(l);return r}async function x(r,o,u,l={},s={}){const m="string"==typeof r?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__.urlToObject)(r):r,c=o.geometry?[o.geometry]:[];l.responseType="pbf"===u?"array-buffer":"json";const f=await (0,_geometry_support_normalizeUtils_js__WEBPACK_IMPORTED_MODULE_3__.normalizeCentralMeridian)(c,null,l),d=f&&f[0];null!=d&&((o=o.clone()).geometry=d);const p=(0,_operations_urlUtils_js__WEBPACK_IMPORTED_MODULE_4__.mapParameters)({...m.query,f:u,...s,...y(o,s)});return (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_1__.join)(m.path,E(o,s)?"query3d":"query"),{...l,query:{...p,...l.query}})}function E(t,e){return null!=t.formatOf3DObjects&&!(e.returnCountOnly||e.returnExtentOnly||e.returnIdsOnly)}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19zb3VyY2VzX2Nvbm5lY3Rpb25zX2NyZWF0ZUNvbm5lY3Rpb25fanMuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDeTFCLGVBQWUsd0NBQXdDLG9CQUFvQix5RUFBQyxDQUFDLGVBQWUsT0FBTyxVQUFVLDJEQUEyRCxjQUFjLGdFQUFnRSx5QkFBeUIsdURBQUMseU1BQXlNLDRFQUE0RSxpSkFBaUosTUFBTSxxQkFBcUIsY0FBYyxxQ0FBcUMsY0FBYyxxQkFBcUIsTUFBTSxJQUFJLCtFQUErRSxTQUFTLFlBQVksdURBQUMsMkJBQTJCLHNEQUFDLHFEQUFxRCxrQkFBa0IsdUJBQXVCLGlDQUFpQyxTQUFTLDBDQUEwQyxHQUFHLHVEQUFDLFNBQVMsNEJBQTRCLG1CQUFtQixtQ0FBbUMsd0JBQXdCLGNBQWMsZUFBZSxvQ0FBb0MsT0FBTyxxRUFBQyxJQUFJLEVBQUUsYUFBYSx3QkFBd0IsRUFBRSwwQkFBMEIsNEJBQTRCLCtDQUErQyxPQUFPLHVEQUFDLDJCQUEyQixzREFBQyxnRUFBZ0Usc0JBQXNCLHdCQUF3QixvQ0FBb0Msd0JBQXdCLGtDQUFrQyxFQUFFLFNBQVMsUUFBUSxxRUFBQyxVQUFVLHlDQUF5Qyx1REFBQywyQkFBMkIsc0RBQUMsNEVBQTRFLE9BQU8sMkJBQTJCLHFCQUFxQix1REFBQywyQkFBMkIsc0RBQUMsMEhBQTBILFFBQVEsK0VBQStFLHlEQUF5RCxzQkFBc0IsV0FBVyw2QkFBNkIsMkJBQTJCLFFBQVEseUVBQUMsYUFBYSwrQkFBK0Isc0RBQUMsbUNBQW1DLE9BQU8sR0FBRyxvREFBb0QsU0FBUyx1REFBQywyQkFBMkIsc0RBQUMsNkZBQTZGLG9IQUFvSCxXQUFXLG1DQUFtQywyR0FBMkcsYUFBYSx1REFBQyxnSEFBZ0gsTUFBTSx3QkFBd0IsR0FBRyxzQ0FBc0MsaURBQWlELHVEQUFDLDJCQUEyQixzREFBQywyRUFBMkUsNEJBQTRCLElBQUksTUFBTSxzQ0FBc0MsaUZBQWlGLFFBQVEsZ0JBQWdCLGFBQWEsMERBQTBELFNBQVMsdURBQUMsMkJBQTJCLHNEQUFDLDRFQUE0RSxRQUFRLElBQUksK0JBQStCLGFBQWEsOENBQThDLDRCQUE0Qix1QkFBdUIsNENBQTRDLHFCQUFxQixtQkFBbUIsMEtBQWtDLFlBQVksTUFBTSxHQUFHLGVBQWUseU1BQXlNLCtEQUFDLENBQUMsa0tBQWtLLHNFQUFDLG1KQUFtSixjQUFjLDhFQUFDLDBDQUEwQywwQkFBMEIsZ0NBQWdDLGlDQUFpQyxNQUFNLE9BQU8sT0FBTyw4RUFBQywwQ0FBMEMsMEtBQTBLLHVCQUF1QixpRkFBaUYsa0JBQWtCLHdCQUF3QixXQUFXLDBCQUEwQixFQUFFLHVEQUFDLEVBQUUsdUZBQUMsb0VBQW9FLFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKMXlMO0FBQ0E7QUFDQTtBQUNBO0FBQzByQixNQUFNLGFBQWEsa0dBQWtHLFNBQVMsR0FBRyxvQkFBb0IscUVBQUMsQ0FBQyxlQUFlLDJEQUEyRCxNQUFNLDJEQUEyRCxHQUFHLG9DQUFvQyxnRkFBQyxxQkFBcUIsY0FBYyx5RUFBeUUsVUFBVSwyTUFBMk0sdUJBQXVCLDhDQUE4QyxtQ0FBbUMsZ0RBQWdELG1EQUFtRCx1QkFBdUIsZ0dBQWdHLHVCQUF1QixtQkFBbUIsMEJBQTBCLCtFQUErRSxnRUFBZ0UsSUFBSSx5QkFBeUIsUUFBUSxxRUFBQyxvQ0FBb0MsRUFBRSxxRkFBcUYsU0FBUyxjQUFjLHNGQUFzRix1REFBQywyQkFBMkIsc0RBQUMsOEhBQThILHVEQUFDLDJCQUEyQixzREFBQyx5RUFBeUUsRUFBRSxhQUFhLDREQUFDLCtGQUErRixpQ0FBaUMsZ0JBQWdCLElBQUksMkJBQTJCLG1CQUFtQixTQUFTLFlBQVksdURBQUMsMkJBQTJCLHNEQUFDLGlFQUFpRSxRQUFRLEtBQUssb0JBQW9CLDRCQUE0Qix5QkFBeUIsY0FBYyxxRUFBcUUsdUdBQXVHLGVBQWUsOEJBQThCLEdBQUcsd0JBQXdCLHdCQUF3QixrQkFBa0IsUUFBUSxxRUFBQyxrQkFBa0Isd0NBQXdDLGNBQWMsb0NBQW9DLFdBQVcsSUFBSSxxQkFBcUIsVUFBVSx3QkFBd0IsdURBQUMsMkJBQTJCLHNEQUFDLDRKQUE0Six1REFBQywyQkFBMkIsc0RBQUMsbUZBQW1GLE9BQU8sMERBQTBELHVEQUFDLDJCQUEyQixzREFBQyx3SUFBd0ksdURBQUMsMkJBQTJCLHNEQUFDLG1HQUFtRyx1REFBQywyQkFBMkIsc0RBQUMsZ0dBQWdHLG1FQUFtRSx5Q0FBeUMsd0JBQXdCLHFEQUFxRCxhQUFhLGFBQWEsY0FBYywrQ0FBK0MsNklBQTZJLFlBQVkseURBQXlELDJCQUEyQix1REFBQyxpREFBaUQsWUFBWSx5RUFBeUUsdURBQUMsK0ZBQStGLE9BQU8sa0NBQWtDLHVEQUFDLEVBQUUsc0ZBQUMseUNBQXlDLHVEQUFDLEVBQUUsc0ZBQUMsd0NBQXdDLHVEQUFDLEVBQUUsc0ZBQUMscUVBQXNHOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKdjhKO0FBQ0E7QUFDQTtBQUNBO0FBQ3NMLDRCQUE0QixTQUFTLHFKQUFxSixpQkFBaUIsa0ZBQUMsSUFBSSxtRUFBbUUsd0VBQUMsUUFBUSw4REFBQyxJQUFrQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKcmY7QUFDQTtBQUNBO0FBQ0E7QUFDK1osb0JBQW9CLDREQUFDLENBQUMsZUFBZSxnRUFBZ0UsTUFBTSwyREFBMkQsR0FBRyxxQkFBcUIsK0VBQUMsUUFBUSwyQkFBMkIsd0JBQXdCLHVCQUF1Qiw2QkFBNkIsNElBQTRJLG9CQUFvQix1REFBQyxFQUFFLHNGQUFDLDJDQUEyQyx1REFBQyxFQUFFLHNGQUFDLHdDQUF3Qyx1REFBQyxFQUFFLHNGQUFDLGlEQUFtRjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNKL2hDO0FBQ0E7QUFDQTtBQUNBO0FBQzRYLG9CQUFvQix3REFBQyxpQkFBaUIsVUFBVSxxQkFBcUIsc0JBQXNCLDRCQUE0QixzREFBQyw0Q0FBNEMsYUFBYSw2QkFBNkIsYUFBYSxrQ0FBa0MsdURBQUMsRUFBRSxzRkFBQyxFQUFFLFlBQVkseUNBQXlDLHVEQUFDLEVBQUUsc0ZBQUMsNkNBQTZDLFVBQStCOzs7Ozs7Ozs7Ozs7Ozs7QUNKcHdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxXQUFXLGtCQUFrQixnQ0FBZ0MsYUFBYSxzREFBc0QsUUFBUSxZQUFZLFdBQVcsb0JBQW9CLGlFQUFpRSxTQUFvQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnRTO0FBQ0E7QUFDQTtBQUNBO0FBQ3ViLHFEQUFxRCxnQkFBZ0IsaUNBQWlDLE9BQU8sR0FBRyxPQUFPLEdBQUcsT0FBTyxHQUFHLE9BQU8sRUFBRSxnQ0FBZ0MsSUFBSSxHQUFHLElBQUksRUFBRSxtQkFBbUIsbURBQW1ELGdCQUFnQixnQ0FBZ0Msd0VBQXdFLFVBQVUsVUFBVSwrR0FBK0csMkVBQUMseXlDQUF5eUMsMkJBQTJCLDRDQUE0QyxzQkFBc0IsY0FBYyxHQUFHLHFDQUFxQyxVQUFVLEdBQUcsVUFBVSx1QkFBdUIsNEhBQTRILDBCQUEwQixrREFBa0QsTUFBTSxhQUFhLHVCQUF1QixPQUFPLDRFQUFDLGVBQWUsMEJBQTBCLG1EQUFtRCw4QkFBOEIsMkJBQTJCLGNBQWMsdUVBQUMsYUFBYSxrQkFBa0Isc0JBQXNCLGtCQUFrQixpRUFBaUUsTUFBTSxjQUFjLGtCQUFrQixpQkFBaUIsRUFBRSxrQkFBa0IsaUVBQWlFLE1BQU0sU0FBUyxrQkFBa0Isb0NBQW9DLEVBQUUsd0JBQXdCLG1EQUFtRCxNQUFNLHNCQUFzQiw4QkFBOEIsdUNBQXVDLFdBQVcsdUNBQXVDLGlDQUFpQyxnREFBZ0QsU0FBUywyQkFBMkIsS0FBSyxFQUFFLDJCQUEyQiw4REFBQyxtQ0FBbUMsK0NBQStDLGNBQWMsNkZBQUMscUJBQXFCLG9DQUFvQyxRQUFRLHNFQUFDLEVBQUUsOEJBQThCLEVBQUUsT0FBTyx1REFBQyxDQUFDLHVEQUFDLG1DQUFtQyxZQUFZLGlCQUFpQixFQUFFLGdCQUFnQiw0RkFBdVQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9jb25uZWN0aW9ucy9HZW9FdmVudENvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvY29ubmVjdGlvbnMvV2ViU29ja2V0Q29ubmVjdGlvbi5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS9sYXllcnMvZ3JhcGhpY3Mvc291cmNlcy9jb25uZWN0aW9ucy9jcmVhdGVDb25uZWN0aW9uLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L0NsaWVudFNpZGVDb25uZWN0aW9uLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvcmVzdC9vcGVyYXRpb25zL3VybFV0aWxzLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9xdWVyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9nZW9tZXRyeS5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi8uLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IHMgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9Mb2dnZXIuanNcIjtpbXBvcnR7Y3JlYXRlUmVzb2x2ZXIgYXMgb31mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHthZGRRdWVyeVBhcmFtZXRlcnMgYXMgaX1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9lbnN1cmVUeXBlLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2FycmF5VXRpbHMuanNcIjtpbXBvcnRcIi4uLy4uLy4uLy4uL2NvcmUvaGFzLmpzXCI7aW1wb3J0e3N1YmNsYXNzIGFzIG59ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9zdWJjbGFzcy5qc1wiO2ltcG9ydHtXZWJTb2NrZXRDb25uZWN0aW9uIGFzIGF9ZnJvbVwiLi9XZWJTb2NrZXRDb25uZWN0aW9uLmpzXCI7aW1wb3J0e2V4ZWN1dGVRdWVyeSBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL3Jlc3QvcXVlcnkvb3BlcmF0aW9ucy9xdWVyeS5qc1wiO2ltcG9ydCB1IGZyb21cIi4uLy4uLy4uLy4uL3Jlc3Qvc3VwcG9ydC9RdWVyeS5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBsfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7aW1wb3J0IGYgZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvU3BhdGlhbFJlZmVyZW5jZS5qc1wiO2NvbnN0IGg9MWU0LGQ9e21heFF1ZXJ5RGVwdGg6NSxtYXhSZWNvcmRDb3VudEZhY3RvcjozfTtsZXQgZz1jbGFzcyBleHRlbmRzIGF7Y29uc3RydWN0b3IoZSl7c3VwZXIoey4uLmQsLi4uZX0pLHRoaXMuX2J1ZGR5U2VydmljZXNRdWVyeT1udWxsLHRoaXMuX3JlbGF0ZWRGZWF0dXJlcz1udWxsfWFzeW5jIF9vcGVuKCl7Y29uc3QgZT1hd2FpdCB0aGlzLl9mZXRjaFNlcnZpY2VEZWZpbml0aW9uKHRoaXMuX2NvbmZpZy5zb3VyY2UpO2UudGltZUluZm8udHJhY2tJZEZpZWxkfHxzLmdldExvZ2dlcih0aGlzKS53YXJuKFwiR2VvRXZlbnQgc2VydmljZSB3YXMgY29uZmlndXJlZCB3aXRob3V0IGEgVHJhY2tJZEZpZWxkLiBUaGlzIG1heSByZXN1bHQgaW4gY2VydGFpbiBmdW5jdGlvbmFsaXR5IGJlaW5nIGRpc2FibGVkLiBUaGUgcHVyZ2VPcHRpb25zLm1heE9ic2VydmF0aW9ucyBwcm9wZXJ0eSB3aWxsIGhhdmUgbm8gZWZmZWN0LlwiKTtjb25zdCB0PXRoaXMuX2ZldGNoV2ViU29ja2V0VXJsKGUuc3RyZWFtVXJscyx0aGlzLl9jb25maWcuc3BhdGlhbFJlZmVyZW5jZSk7dGhpcy5fYnVkZHlTZXJ2aWNlc1F1ZXJ5fHwodGhpcy5fYnVkZHlTZXJ2aWNlc1F1ZXJ5PXRoaXMuX3F1ZXJ5QnVkZHlTZXJ2aWNlcygpKSxhd2FpdCB0aGlzLl9idWRkeVNlcnZpY2VzUXVlcnksYXdhaXQgdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KHQpO2NvbnN0e2ZpbHRlcjpyLG91dEZpZWxkczpvfT10aGlzLl9jb25maWc7dGhpcy5kZXN0cm95ZWR8fHRoaXMuX3NldEZpbHRlcihyLG8pfV9vbk1lc3NhZ2UoZSl7aWYoXCJhdHRyaWJ1dGVzXCJpbiBlKXtsZXQgbzt0cnl7bz10aGlzLl9lbnJpY2goZSksbnVsbCE9dGhpcy5fZmVhdHVyZVpTY2FsZXImJnRoaXMuX2ZlYXR1cmVaU2NhbGVyKG8uZ2VvbWV0cnkpfWNhdGNoKHQpe3JldHVybiB2b2lkIHMuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiRmFpbGVkIHRvIHBhcnNlIG1lc3NhZ2VcIix0KSl9dGhpcy5vbkZlYXR1cmUobyl9ZWxzZSB0aGlzLm9uTWVzc2FnZShlKX1hc3luYyBfZmV0Y2hTZXJ2aWNlRGVmaW5pdGlvbihlKXtjb25zdCByPXtmOlwianNvblwiLC4uLnRoaXMuX2NvbmZpZy5jdXN0b21QYXJhbWV0ZXJzfSxzPXQoZS5wYXRoLHtxdWVyeTpyLHJlc3BvbnNlVHlwZTpcImpzb25cIn0pLG89KGF3YWl0IHMpLmRhdGE7cmV0dXJuIHRoaXMuX3NlcnZpY2VEZWZpbml0aW9uPW8sb31fZmV0Y2hXZWJTb2NrZXRVcmwoZSx0KXtjb25zdCByPWVbMF0se3VybHM6cyx0b2tlbjpvfT1yLG49dGhpcy5faW5mZXJXZWJTb2NrZXRCYXNlVXJsKHMpO3JldHVybiBpKGAke259L3N1YnNjcmliZWAse291dFNSOlwiXCIrdC53a2lkLHRva2VuOm99KX1faW5mZXJXZWJTb2NrZXRCYXNlVXJsKGUpe2lmKDE9PT1lLmxlbmd0aClyZXR1cm4gZVswXTtmb3IoY29uc3QgdCBvZiBlKWlmKHQuaW5jbHVkZXMoXCJ3c3NcIikpcmV0dXJuIHQ7cmV0dXJuIHMuZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyByKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiVW5hYmxlIHRvIGluZmVyIFdlYlNvY2tldCB1cmxcIixlKSksbnVsbH1hc3luYyBfc2V0RmlsdGVyKGUsdCl7Y29uc3QgaT10aGlzLl93ZWJzb2NrZXQ7aWYobnVsbD09aXx8bnVsbD09ZSYmbnVsbD09dClyZXR1cm47Y29uc3Qgbj1KU09OLnN0cmluZ2lmeSh7ZmlsdGVyOnRoaXMuX3NlcmlhbGl6ZUZpbHRlcihlLHQpfSk7bGV0IGE9ITE7Y29uc3QgYz1vKCksdT0oKT0+e2F8fCh0aGlzLmRlc3Ryb3llZHx8dGhpcy5fd2Vic29ja2V0IT09aXx8cy5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHIoXCJnZW9ldmVudC1jb25uZWN0aW9uXCIsXCJTZXJ2ZXIgdGltZWQgb3V0IHdoZW4gc2V0dGluZyBmaWx0ZXJcIikpLGMucmVqZWN0KCkpfSxsPWU9Pntjb25zdCB0PUpTT04ucGFyc2UoZS5kYXRhKTt0LmZpbHRlciYmKHQuZXJyb3ImJihzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBzZXQgc2VydmljZSBmaWx0ZXJcIix0LmVycm9yKSksdGhpcy5fc2V0KFwiZXJyb3JTdHJpbmdcIixgQ291bGQgbm90IHNldCBzZXJ2aWNlIGZpbHRlciAtICR7dC5lcnJvcn1gKSxjLnJlamVjdCh0LmVycm9yKSksdGhpcy5fc2V0V2ViU29ja2V0SlNPTlBhcnNlSGFuZGxlcihpKSxhPSEwLGMucmVzb2x2ZSgpKX07cmV0dXJuIGkub25tZXNzYWdlPWwsaS5zZW5kKG4pLHNldFRpbWVvdXQodSxoKSxjLnByb21pc2V9X3NlcmlhbGl6ZUZpbHRlcihlLHQpe2NvbnN0IG89e307aWYobnVsbD09ZSYmbnVsbD09dClyZXR1cm4gbztpZihudWxsIT1lJiZlLmdlb21ldHJ5KXRyeXtjb25zdCB0PWwoZS5nZW9tZXRyeSk7aWYoXCJleHRlbnRcIiE9PXQudHlwZSl0aHJvdyBuZXcgcihgRXhwZWN0ZWQgZXh0ZW50IGJ1dCBmb3VuZCB0eXBlICR7dC50eXBlfWApO28uZ2VvbWV0cnk9SlNPTi5zdHJpbmdpZnkodC5zaGlmdENlbnRyYWxNZXJpZGlhbigpKX1jYXRjaChpKXtzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gc2V0dGluZyBjb25uZWN0aW9uIGdlb21ldHJ5RGVmaW5pdGlvblwiLGkpKX1yZXR1cm4gbnVsbCE9ZSYmZS53aGVyZSYmXCIxID0gMVwiIT09ZS53aGVyZSYmXCIxPTFcIiE9PWUud2hlcmUmJihvLndoZXJlPWUud2hlcmUpLG51bGwhPXQmJihvLm91dEZpZWxkcz10LmpvaW4oXCIsXCIpKSxvfV9lbnJpY2goZSl7aWYoIXRoaXMuX3JlbGF0ZWRGZWF0dXJlcylyZXR1cm4gZTtjb25zdCB0PXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLnJlbGF0ZWRGZWF0dXJlcy5qb2luRmllbGQsbz1lLmF0dHJpYnV0ZXNbdF0saT10aGlzLl9yZWxhdGVkRmVhdHVyZXMuZ2V0KG8pO2lmKCFpKXJldHVybiBzLmdldExvZ2dlcih0aGlzKS53YXJuKFwiZ2VvZXZlbnQtY29ubmVjdGlvblwiLFwiRmVhdHVyZSBqb2luIGZhaWxlZC4gSXMgdGhlIGpvaW4gZmllbGQgY29uZmlndXJlZCBjb3JyZWN0bHk/XCIsZSksZTtjb25zdHthdHRyaWJ1dGVzOm4sZ2VvbWV0cnk6YX09aTtmb3IoY29uc3QgciBpbiBuKWUuYXR0cmlidXRlc1tyXT1uW3JdO3JldHVybiBhJiYoZS5nZW9tZXRyeT1hKSxlLmdlb21ldHJ5fHxlLmNlbnRyb2lkfHxzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkZvdW5kIG1hbGZvcm1lZCBmZWF0dXJlIC0gbm8gZ2VvbWV0cnkgZm91bmRcIixlKSksZX1hc3luYyBfcXVlcnlCdWRkeVNlcnZpY2VzKCl7dHJ5e2NvbnN0e3JlbGF0ZWRGZWF0dXJlczplLGtlZXBMYXRlc3RBcmNoaXZlOnR9PXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLHI9dGhpcy5fcXVlcnlSZWxhdGVkRmVhdHVyZXMoZSkscz10aGlzLl9xdWVyeUFyY2hpdmUodCk7YXdhaXQgcjtjb25zdCBvPWF3YWl0IHM7aWYoIW8pcmV0dXJuO2Zvcihjb25zdCBpIG9mIG8uZmVhdHVyZXMpdGhpcy5vbkZlYXR1cmUodGhpcy5fZW5yaWNoKGkpKX1jYXRjaChlKXtzLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgcihcImdlb2V2ZW50LWNvbm5lY3Rpb25cIixcIkVuY291bnRlcmVkIGFuIGVycm9yIHdoZW4gcXVlcnlpbmcgYnVkZHkgc2VydmljZXNcIix7ZXJyb3I6ZX0pKX19YXN5bmMgX3F1ZXJ5UmVsYXRlZEZlYXR1cmVzKGUpe2lmKCFlKXJldHVybjtjb25zdCB0PWF3YWl0IHRoaXMuX3F1ZXJ5QnVkZHkoZS5mZWF0dXJlc1VybCk7dGhpcy5fYWRkUmVsYXRlZEZlYXR1cmVzKHQpfWFzeW5jIF9xdWVyeUFyY2hpdmUoZSl7aWYoZSlyZXR1cm4gdGhpcy5fcXVlcnlCdWRkeShlLmZlYXR1cmVzVXJsKX1hc3luYyBfcXVlcnlCdWRkeShlKXtjb25zdCB0PW5ldygoYXdhaXQgaW1wb3J0KFwiLi4vLi4vLi4vRmVhdHVyZUxheWVyLmpzXCIpKS5kZWZhdWx0KSh7dXJsOmV9KSx7Y2FwYWJpbGl0aWVzOnJ9PWF3YWl0IHQubG9hZCgpLHM9ci5xdWVyeS5zdXBwb3J0c01heFJlY29yZENvdW50RmFjdG9yLG89ci5xdWVyeS5zdXBwb3J0c1BhZ2luYXRpb24saT1yLnF1ZXJ5LnN1cHBvcnRzQ2VudHJvaWQsbj10aGlzLl9jb25maWcubWF4UmVjb3JkQ291bnRGYWN0b3IsYT10LmNhcGFiaWxpdGllcy5xdWVyeS5tYXhSZWNvcmRDb3VudCxsPXM/YSpuOmEsaD1uZXcgdTtpZihoLm91dEZpZWxkcz10aGlzLl9jb25maWcub3V0RmllbGRzPz9bXCIqXCJdLGgud2hlcmU9dGhpcy5fY29uZmlnLmZpbHRlcj8ud2hlcmU/P1wiMT0xXCIsaC5yZXR1cm5HZW9tZXRyeT0hMCxoLnJldHVybkV4Y2VlZGVkTGltaXRGZWF0dXJlcz0hMCxoLm91dFNwYXRpYWxSZWZlcmVuY2U9Zi5mcm9tSlNPTih0aGlzLl9jb25maWcuc3BhdGlhbFJlZmVyZW5jZSksaSYmKGgucmV0dXJuQ2VudHJvaWQ9ITApLHMmJihoLm1heFJlY29yZENvdW50RmFjdG9yPW4pLG8pcmV0dXJuIGgubnVtPWwsdC5kZXN0cm95KCksdGhpcy5fcXVlcnlQYWdlcyhlLGgpO2NvbnN0IGQ9YXdhaXQgYyhlLGgsdGhpcy5fY29uZmlnLnNvdXJjZVNwYXRpYWxSZWZlcmVuY2UpO3JldHVybiB0LmRlc3Ryb3koKSxkLmRhdGF9YXN5bmMgX3F1ZXJ5UGFnZXMoZSx0LHI9W10scz0wKXt0LnN0YXJ0PW51bGwhPXQubnVtP3MqdC5udW06bnVsbDtjb25zdHtkYXRhOm99PWF3YWl0IGMoZSx0LHRoaXMuX2NvbmZpZy5zb3VyY2VTcGF0aWFsUmVmZXJlbmNlKTtyZXR1cm4gby5leGNlZWRlZFRyYW5zZmVyTGltaXQmJnM8KHRoaXMuX2NvbmZpZy5tYXhRdWVyeURlcHRoPz8wKT8oby5mZWF0dXJlcy5mb3JFYWNoKChlPT5yLnB1c2goZSkpKSx0aGlzLl9xdWVyeVBhZ2VzKGUsdCxyLHMrMSkpOihyLmZvckVhY2goKGU9Pm8uZmVhdHVyZXMucHVzaChlKSkpLG8pfV9hZGRSZWxhdGVkRmVhdHVyZXMoZSl7Y29uc3QgdD1uZXcgTWFwLHI9ZS5mZWF0dXJlcyxzPXRoaXMuX3NlcnZpY2VEZWZpbml0aW9uLnJlbGF0ZWRGZWF0dXJlcy5qb2luRmllbGQ7Zm9yKGNvbnN0IG8gb2Ygcil7Y29uc3QgZT1vLmF0dHJpYnV0ZXNbc107dC5zZXQoZSxvKX10aGlzLl9yZWxhdGVkRmVhdHVyZXM9dH19O2c9ZShbbihcImVzcmkubGF5ZXJzLmdyYXBoaWNzLnNvdXJjZXMuY29ubmVjdGlvbnMuR2VvRXZlbnRDb25uZWN0aW9uXCIpXSxnKTtjb25zdCB5PWc7ZXhwb3J0e3kgYXMgZGVmYXVsdH07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi8uLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCBvIGZyb21cIi4uLy4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e2FmdGVyIGFzIHMsY3JlYXRlUmVzb2x2ZXIgYXMgcn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHthZGRRdWVyeVBhcmFtZXRlcnMgYXMgbn1mcm9tXCIuLi8uLi8uLi8uLi9jb3JlL3VybFV0aWxzLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIGl9ZnJvbVwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi8uLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyBjfWZyb21cIi4uLy4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIGF9ZnJvbVwiLi4vLi4vLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnQgbCBmcm9tXCIuLi8uLi8uLi9zdXBwb3J0L1N0cmVhbUNvbm5lY3Rpb24uanNcIjt2YXIgaDshZnVuY3Rpb24oZSl7ZVtlLkNPTk5FQ1RJTkc9MF09XCJDT05ORUNUSU5HXCIsZVtlLk9QRU49MV09XCJPUEVOXCIsZVtlLkNMT1NJTkc9Ml09XCJDTE9TSU5HXCIsZVtlLkNMT1NFRD0zXT1cIkNMT1NFRFwifShofHwoaD17fSkpO2xldCBkPWNsYXNzIGV4dGVuZHMgbHtjb25zdHJ1Y3RvcihlKXtzdXBlcigpLHRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXM9W10sdGhpcy5lcnJvclN0cmluZz1udWxsO2NvbnN0e2dlb21ldHJ5VHlwZTp0LHNwYXRpYWxSZWZlcmVuY2U6byxzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOnN9PWU7dGhpcy5fY29uZmlnPWUsdGhpcy5fZmVhdHVyZVpTY2FsZXI9YSh0LHMsbyksdGhpcy5fb3BlbigpfWFzeW5jIF9vcGVuKCl7YXdhaXQgdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KCksdGhpcy5kZXN0cm95ZWR8fGF3YWl0IHRoaXMuX2hhbmRzaGFrZSgpfWRlc3Ryb3koKXtzdXBlci5kZXN0cm95KCksbnVsbCE9dGhpcy5fd2Vic29ja2V0JiYodGhpcy5fd2Vic29ja2V0Lm9ub3Blbj1udWxsLHRoaXMuX3dlYnNvY2tldC5vbmNsb3NlPW51bGwsdGhpcy5fd2Vic29ja2V0Lm9uZXJyb3I9bnVsbCx0aGlzLl93ZWJzb2NrZXQub25tZXNzYWdlPW51bGwsdGhpcy5fd2Vic29ja2V0LmNsb3NlKCkpLHRoaXMuX3dlYnNvY2tldD1udWxsfWdldCBjb25uZWN0aW9uU3RhdHVzKCl7aWYobnVsbD09dGhpcy5fd2Vic29ja2V0KXJldHVyblwiZGlzY29ubmVjdGVkXCI7c3dpdGNoKHRoaXMuX3dlYnNvY2tldC5yZWFkeVN0YXRlKXtjYXNlIGguQ09OTkVDVElORzpjYXNlIGguT1BFTjpyZXR1cm5cImNvbm5lY3RlZFwiO2Nhc2UgaC5DTE9TSU5HOmNhc2UgaC5DTE9TRUQ6cmV0dXJuXCJkaXNjb25uZWN0ZWRcIn19c2VuZE1lc3NhZ2VUb1NvY2tldChlKXtudWxsIT10aGlzLl93ZWJzb2NrZXQ/dGhpcy5fd2Vic29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoZSkpOnRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMucHVzaChlKX1zZW5kTWVzc2FnZVRvQ2xpZW50KGUpe3RoaXMuX29uTWVzc2FnZShlKX11cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe3RoaXMuX2NvbmZpZy5jdXN0b21QYXJhbWV0ZXJzPWUsbnVsbCE9dGhpcy5fd2Vic29ja2V0JiZ0aGlzLl93ZWJzb2NrZXQuY2xvc2UoKX1hc3luYyBfdHJ5Q3JlYXRlV2ViU29ja2V0KGU9dGhpcy5fY29uZmlnLnNvdXJjZS5wYXRoLHI9MWUzLGk9MCl7dHJ5e2lmKHRoaXMuZGVzdHJveWVkKXJldHVybjtjb25zdCB0PW4oZSx0aGlzLl9jb25maWcuY3VzdG9tUGFyYW1ldGVycz8/e30pO3RoaXMuX3dlYnNvY2tldD1hd2FpdCB0aGlzLl9jcmVhdGVXZWJTb2NrZXQodCksdGhpcy5ub3RpZnlDaGFuZ2UoXCJjb25uZWN0aW9uU3RhdHVzXCIpfWNhdGNoKGMpe2NvbnN0IG49ci8xZTM7cmV0dXJuIHRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyYmaT49dGhpcy5fY29uZmlnLm1heFJlY29ubmVjdGlvbkF0dGVtcHRzPyhvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJFeGNlZWRlZCBtYXhSZWNvbm5lY3Rpb25BdHRlbXB0cyBhdHRlbXB0cy4gTm8gZnVydGhlciBhdHRlbXB0cyB3aWxsIGJlIG1hZGVcIikpLHZvaWQgdGhpcy5kZXN0cm95KCkpOihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYEZhaWxlZCB0byBjb25uZWN0LiBBdHRlbXB0aW5nIHRvIHJlY29ubmVjdCBpbiAke259c2AsYykpLGF3YWl0IHMociksdGhpcy5fdHJ5Q3JlYXRlV2ViU29ja2V0KGUsTWF0aC5taW4oMS41KnIsMWUzKnRoaXMuX2NvbmZpZy5tYXhSZWNvbm5lY3Rpb25JbnRlcnZhbCksaSsxKSl9fV9zZXRXZWJTb2NrZXRKU09OUGFyc2VIYW5kbGVyKGUpe2Uub25tZXNzYWdlPWU9Pnt0cnl7Y29uc3QgdD1KU09OLnBhcnNlKGUuZGF0YSk7dGhpcy5fb25NZXNzYWdlKHQpfWNhdGNoKHMpe3JldHVybiB2b2lkIG8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIkZhaWxlZCB0byBwYXJzZSBtZXNzYWdlLCBpbnZhbGlkIEpTT05cIix7ZXJyb3I6c30pKX19fV9jcmVhdGVXZWJTb2NrZXQoZSl7cmV0dXJuIG5ldyBQcm9taXNlKCgodCxvKT0+e2NvbnN0IHM9bmV3IFdlYlNvY2tldChlKTtzLm9ub3Blbj0oKT0+e2lmKHMub25vcGVuPW51bGwsdGhpcy5kZXN0cm95ZWQpcmV0dXJuIHMub25jbG9zZT1udWxsLHZvaWQgcy5jbG9zZSgpO3Mub25jbG9zZT1lPT50aGlzLl9vbkNsb3NlKGUpLHMub25lcnJvcj1lPT50aGlzLl9vbkVycm9yKGUpLHRoaXMuX3NldFdlYlNvY2tldEpTT05QYXJzZUhhbmRsZXIocyksdChzKX0scy5vbmNsb3NlPWU9PntzLm9ub3Blbj1zLm9uY2xvc2U9bnVsbCxvKGUpfX0pKX1hc3luYyBfaGFuZHNoYWtlKGU9MWU0KXtjb25zdCBzPXRoaXMuX3dlYnNvY2tldDtpZihudWxsPT1zKXJldHVybjtjb25zdCBuPXIoKSxpPXMub25tZXNzYWdlLHtmaWx0ZXI6YyxvdXRGaWVsZHM6YSxzcGF0aWFsUmVmZXJlbmNlOmx9PXRoaXMuX2NvbmZpZztyZXR1cm4gbi50aW1lb3V0KGUpLHMub25tZXNzYWdlPWU9PntsZXQgcj1udWxsO3RyeXtyPUpTT04ucGFyc2UoZS5kYXRhKX1jYXRjaChoKXt9ciYmXCJvYmplY3RcIj09dHlwZW9mIHJ8fChvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsXCJQcm90b2NvbCB2aW9sYXRpb24uIEhhbmRzaGFrZSBmYWlsZWQgLSBtYWxmb3JtZWQgbWVzc2FnZVwiLGUuZGF0YSkpLG4ucmVqZWN0KCksdGhpcy5kZXN0cm95KCkpLHIuc3BhdGlhbFJlZmVyZW5jZT8ud2tpZCE9PWw/LndraWQmJihvLmdldExvZ2dlcih0aGlzKS5lcnJvcihuZXcgdChcIndlYnNvY2tldC1jb25uZWN0aW9uXCIsYFByb3RvY29sIHZpb2xhdGlvbi4gSGFuZHNoYWtlIGZhaWxlZCAtIGV4cGVjdGVkIHdraWQgb2YgJHtsLndraWR9YCxlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxcImpzb25cIiE9PXIuZm9ybWF0JiYoby5nZXRMb2dnZXIodGhpcykuZXJyb3IobmV3IHQoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLFwiUHJvdG9jb2wgdmlvbGF0aW9uLiBIYW5kc2hha2UgZmFpbGVkIC0gZm9ybWF0IGlzIG5vdCBzZXRcIixlLmRhdGEpKSxuLnJlamVjdCgpLHRoaXMuZGVzdHJveSgpKSxjJiZyLmZpbHRlciE9PWMmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBmaWx0ZXIsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxhJiZyLm91dEZpZWxkcyE9PWEmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKG5ldyB0KFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixcIlRyaWVkIHRvIHNldCBvdXRGaWVsZHMsIGJ1dCBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IGl0XCIpKSxzLm9ubWVzc2FnZT1pO2Zvcihjb25zdCB0IG9mIHRoaXMuX291dHN0YW5kaW5nTWVzc2FnZXMpcy5zZW5kKEpTT04uc3RyaW5naWZ5KHQpKTt0aGlzLl9vdXRzdGFuZGluZ01lc3NhZ2VzPVtdLG4ucmVzb2x2ZSgpfSxzLnNlbmQoSlNPTi5zdHJpbmdpZnkoe2ZpbHRlcjpjLG91dEZpZWxkczphLGZvcm1hdDpcImpzb25cIixzcGF0aWFsUmVmZXJlbmNlOnt3a2lkOmwud2tpZH19KSksbi5wcm9taXNlfV9vbk1lc3NhZ2UoZSl7aWYodGhpcy5vbk1lc3NhZ2UoZSksXCJ0eXBlXCJpbiBlKXN3aXRjaChlLnR5cGUpe2Nhc2VcImZlYXR1cmVzXCI6Y2FzZVwiZmVhdHVyZVJlc3VsdFwiOmZvcihjb25zdCB0IG9mIGUuZmVhdHVyZXMpbnVsbCE9dGhpcy5fZmVhdHVyZVpTY2FsZXImJnRoaXMuX2ZlYXR1cmVaU2NhbGVyKHQuZ2VvbWV0cnkpLHRoaXMub25GZWF0dXJlKHQpfX1fb25FcnJvcihlKXtjb25zdCB0PVwiRW5jb3VudGVyZWQgYW4gZXJyb3Igb3ZlciBXZWJTb2NrZXQgY29ubmVjdGlvblwiO3RoaXMuX3NldChcImVycm9yU3RyaW5nXCIsdCksby5nZXRMb2dnZXIodGhpcykuZXJyb3IoXCJ3ZWJzb2NrZXQtY29ubmVjdGlvblwiLHQpfV9vbkNsb3NlKGUpe3RoaXMuX3dlYnNvY2tldD1udWxsLHRoaXMubm90aWZ5Q2hhbmdlKFwiY29ubmVjdGlvblN0YXR1c1wiKSwxZTMhPT1lLmNvZGUmJm8uZ2V0TG9nZ2VyKHRoaXMpLmVycm9yKFwid2Vic29ja2V0LWNvbm5lY3Rpb25cIixgV2ViU29ja2V0IGNsb3NlZCB1bmV4cGVjdGVkbHkgd2l0aCBlcnJvciBjb2RlICR7ZS5jb2RlfWApLHRoaXMuZGVzdHJveWVkfHx0aGlzLl9vcGVuKCl9fTtlKFtpKCldLGQucHJvdG90eXBlLFwiY29ubmVjdGlvblN0YXR1c1wiLG51bGwpLGUoW2koKV0sZC5wcm90b3R5cGUsXCJlcnJvclN0cmluZ1wiLHZvaWQgMCksZD1lKFtjKFwiZXNyaS5sYXllcnMuZ3JhcGhpY3Muc291cmNlcy5jb25uZWN0aW9ucy5XZWJTb2NrZXRDb25uZWN0aW9uXCIpXSxkKTtleHBvcnR7ZCBhcyBXZWJTb2NrZXRDb25uZWN0aW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnQgZSBmcm9tXCIuL0dlb0V2ZW50Q29ubmVjdGlvbi5qc1wiO2ltcG9ydHtXZWJTb2NrZXRDb25uZWN0aW9uIGFzIHR9ZnJvbVwiLi9XZWJTb2NrZXRDb25uZWN0aW9uLmpzXCI7aW1wb3J0e0NsaWVudFNpZGVDb25uZWN0aW9uIGFzIG59ZnJvbVwiLi4vLi4vLi4vc3VwcG9ydC9DbGllbnRTaWRlQ29ubmVjdGlvbi5qc1wiO2Z1bmN0aW9uIG8obyxyLHMsaSxjLGEsbSxwKXtjb25zdCBmPXtzb3VyY2U6byxzb3VyY2VTcGF0aWFsUmVmZXJlbmNlOnIsc3BhdGlhbFJlZmVyZW5jZTpzLGdlb21ldHJ5VHlwZTppLGZpbHRlcjpjLG1heFJlY29ubmVjdGlvbkF0dGVtcHRzOmEsbWF4UmVjb25uZWN0aW9uSW50ZXJ2YWw6bSxjdXN0b21QYXJhbWV0ZXJzOnB9O2lmKCFvKXJldHVybiBuZXcgbihmKTtyZXR1cm4gby5wYXRoLnN0YXJ0c1dpdGgoXCJ3c3M6Ly9cIil8fG8ucGF0aC5zdGFydHNXaXRoKFwid3M6Ly9cIik/bmV3IHQoZik6bmV3IGUoZil9ZXhwb3J0e28gYXMgY3JlYXRlQ29ubmVjdGlvbn07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e18gYXMgZX1mcm9tXCIuLi8uLi9jaHVua3MvdHNsaWIuZXM2LmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHJ9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtpbXBvcnR7Z2V0R2VvbWV0cnlaU2NhbGVyIGFzIG99ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC96c2NhbGUuanNcIjtpbXBvcnQgcyBmcm9tXCIuL1N0cmVhbUNvbm5lY3Rpb24uanNcIjtsZXQgYz1jbGFzcyBleHRlbmRzIHN7Y29uc3RydWN0b3IoZSl7c3VwZXIoKSx0aGlzLmNvbm5lY3Rpb25TdGF0dXM9XCJjb25uZWN0ZWRcIix0aGlzLmVycm9yU3RyaW5nPW51bGw7Y29uc3R7Z2VvbWV0cnlUeXBlOnIsc3BhdGlhbFJlZmVyZW5jZTp0LHNvdXJjZVNwYXRpYWxSZWZlcmVuY2U6c309ZTt0aGlzLl9mZWF0dXJlWlNjYWxlcj1vKHIscyx0KX11cGRhdGVDdXN0b21QYXJhbWV0ZXJzKGUpe31zZW5kTWVzc2FnZVRvU29ja2V0KGUpe31zZW5kTWVzc2FnZVRvQ2xpZW50KGUpe2lmKFwidHlwZVwiaW4gZSlzd2l0Y2goZS50eXBlKXtjYXNlXCJmZWF0dXJlc1wiOmNhc2VcImZlYXR1cmVSZXN1bHRcIjpmb3IoY29uc3QgciBvZiBlLmZlYXR1cmVzKW51bGwhPXRoaXMuX2ZlYXR1cmVaU2NhbGVyJiZ0aGlzLl9mZWF0dXJlWlNjYWxlcihyLmdlb21ldHJ5KSx0aGlzLm9uRmVhdHVyZShyKX10aGlzLm9uTWVzc2FnZShlKX19O2UoW3IoKV0sYy5wcm90b3R5cGUsXCJjb25uZWN0aW9uU3RhdHVzXCIsdm9pZCAwKSxlKFtyKCldLGMucHJvdG90eXBlLFwiZXJyb3JTdHJpbmdcIix2b2lkIDApLGM9ZShbdChcImVzcmkubGF5ZXJzLnN1cHBvcnQuQ2xpZW50U2lkZUNvbm5lY3Rpb25cIildLGMpO2V4cG9ydHtjIGFzIENsaWVudFNpZGVDb25uZWN0aW9ufTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7XyBhcyByfWZyb21cIi4uLy4uL2NodW5rcy90c2xpYi5lczYuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi9jb3JlL0Vycm9yLmpzXCI7aW1wb3J0IG8gZnJvbVwiLi4vLi4vY29yZS9FdmVudGVkLmpzXCI7aW1wb3J0e3Byb3BlcnR5IGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZGVjb3JhdG9ycy9wcm9wZXJ0eS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hY2Nlc3NvclN1cHBvcnQvZW5zdXJlVHlwZS5qc1wiO2ltcG9ydFwiLi4vLi4vY29yZS9hcnJheVV0aWxzLmpzXCI7aW1wb3J0XCIuLi8uLi9jb3JlL2hhcy5qc1wiO2ltcG9ydHtzdWJjbGFzcyBhcyB0fWZyb21cIi4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvc3ViY2xhc3MuanNcIjtsZXQgYz1jbGFzcyBleHRlbmRzIG8uRXZlbnRlZEFjY2Vzc29ye2Rlc3Ryb3koKXt0aGlzLmVtaXQoXCJkZXN0cm95XCIpfWdldCBjb25uZWN0aW9uRXJyb3IoKXtyZXR1cm4gdGhpcy5lcnJvclN0cmluZz9uZXcgZShcInN0cmVhbS1jb25uZWN0aW9uXCIsdGhpcy5lcnJvclN0cmluZyk6bnVsbH1vbkZlYXR1cmUocil7dGhpcy5lbWl0KFwiZGF0YS1yZWNlaXZlZFwiLHIpfW9uTWVzc2FnZShyKXt0aGlzLmVtaXQoXCJtZXNzYWdlLXJlY2VpdmVkXCIscil9fTtyKFtzKHtyZWFkT25seTohMH0pXSxjLnByb3RvdHlwZSxcImNvbm5lY3Rpb25FcnJvclwiLG51bGwpLGM9cihbdChcImVzcmkubGF5ZXJzLnN1cHBvcnQuU3RyZWFtQ29ubmVjdGlvblwiKV0sYyk7Y29uc3QgaT1jO2V4cG9ydHtpIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmZ1bmN0aW9uIHQobil7Y29uc3Qgbz17fTtmb3IoY29uc3QgZSBpbiBuKXtpZihcImRlY2xhcmVkQ2xhc3NcIj09PWUpY29udGludWU7Y29uc3Qgcj1uW2VdO2lmKG51bGwhPXImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHIpaWYoQXJyYXkuaXNBcnJheShyKSl7b1tlXT1bXTtmb3IobGV0IG49MDtuPHIubGVuZ3RoO24rKylvW2VdW25dPXQocltuXSl9ZWxzZVwib2JqZWN0XCI9PXR5cGVvZiByP3IudG9KU09OJiYob1tlXT1KU09OLnN0cmluZ2lmeShyKSk6b1tlXT1yfXJldHVybiBvfWV4cG9ydHt0IGFzIG1hcFBhcmFtZXRlcnN9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCB0IGZyb21cIi4uLy4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnR7dXJsVG9PYmplY3QgYXMgZSxqb2luIGFzIG59ZnJvbVwiLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtnZXRKc29uVHlwZSBhcyByfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvanNvblV0aWxzLmpzXCI7aW1wb3J0e25vcm1hbGl6ZUNlbnRyYWxNZXJpZGlhbiBhcyBpfWZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvbm9ybWFsaXplVXRpbHMuanNcIjtpbXBvcnR7bWFwUGFyYW1ldGVycyBhcyBhfWZyb21cIi4uLy4uL29wZXJhdGlvbnMvdXJsVXRpbHMuanNcIjtpbXBvcnR7cGFyc2VQQkZGZWF0dXJlUXVlcnkgYXMgb31mcm9tXCIuL3BiZlF1ZXJ5VXRpbHMuanNcIjtpbXBvcnR7YXBwbHlGZWF0dXJlU2V0WlVuaXRTY2FsaW5nIGFzIHV9ZnJvbVwiLi9xdWVyeVpTY2FsZS5qc1wiO2NvbnN0IGw9XCJMYXllciBkb2VzIG5vdCBzdXBwb3J0IGV4dGVudCBjYWxjdWxhdGlvbi5cIjtmdW5jdGlvbiBzKHQsZSl7aWYoZSYmXCJleHRlbnRcIj09PXQudHlwZSlyZXR1cm5gJHt0LnhtaW59LCR7dC55bWlufSwke3QueG1heH0sJHt0LnltYXh9YDtpZihlJiZcInBvaW50XCI9PT10LnR5cGUpcmV0dXJuYCR7dC54fSwke3QueX1gO2NvbnN0IG49dC50b0pTT04oKTtyZXR1cm4gZGVsZXRlIG4uc3BhdGlhbFJlZmVyZW5jZSxKU09OLnN0cmluZ2lmeShuKX1mdW5jdGlvbiB5KHQsZSl7Y29uc3Qgbj10Lmdlb21ldHJ5LGk9dC50b0pTT04oKTtkZWxldGUgaS5jb21wYWN0R2VvbWV0cnlFbmFibGVkLGRlbGV0ZSBpLmRlZmF1bHRTcGF0aWFsUmVmZXJlbmNlRW5hYmxlZDtjb25zdCBhPWk7bGV0IG8sdSxsO2lmKG51bGwhPW4mJih1PW4uc3BhdGlhbFJlZmVyZW5jZSxsPW4uc3BhdGlhbFJlZmVyZW5jZS53a2lkfHxKU09OLnN0cmluZ2lmeShuLnNwYXRpYWxSZWZlcmVuY2UpLGEuZ2VvbWV0cnlUeXBlPXIobiksYS5nZW9tZXRyeT1zKG4sdC5jb21wYWN0R2VvbWV0cnlFbmFibGVkKSxhLmluU1I9bCksaS5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljcyYmKGEuZ3JvdXBCeUZpZWxkc0ZvclN0YXRpc3RpY3M9aS5ncm91cEJ5RmllbGRzRm9yU3RhdGlzdGljcy5qb2luKFwiLFwiKSksaS5vYmplY3RJZHMmJihhLm9iamVjdElkcz1pLm9iamVjdElkcy5qb2luKFwiLFwiKSksaS5vcmRlckJ5RmllbGRzJiYoYS5vcmRlckJ5RmllbGRzPWkub3JkZXJCeUZpZWxkcy5qb2luKFwiLFwiKSksIWkub3V0RmllbGRzfHwhaS5yZXR1cm5EaXN0aW5jdFZhbHVlcyYmKGU/LnJldHVybkNvdW50T25seXx8ZT8ucmV0dXJuRXh0ZW50T25seXx8ZT8ucmV0dXJuSWRzT25seSk/ZGVsZXRlIGEub3V0RmllbGRzOmkub3V0RmllbGRzLmluY2x1ZGVzKFwiKlwiKT9hLm91dEZpZWxkcz1cIipcIjphLm91dEZpZWxkcz1pLm91dEZpZWxkcy5qb2luKFwiLFwiKSxpLm91dFNSPyhhLm91dFNSPWkub3V0U1Iud2tpZHx8SlNPTi5zdHJpbmdpZnkoaS5vdXRTUiksbz10Lm91dFNwYXRpYWxSZWZlcmVuY2UpOm4mJihpLnJldHVybkdlb21ldHJ5fHxpLnJldHVybkNlbnRyb2lkKSYmKGEub3V0U1I9YS5pblNSLG89dSksaS5yZXR1cm5HZW9tZXRyeSYmZGVsZXRlIGkucmV0dXJuR2VvbWV0cnksaS5vdXRTdGF0aXN0aWNzJiYoYS5vdXRTdGF0aXN0aWNzPUpTT04uc3RyaW5naWZ5KGkub3V0U3RhdGlzdGljcykpLGkuZnVsbFRleHQmJihhLmZ1bGxUZXh0PUpTT04uc3RyaW5naWZ5KGkuZnVsbFRleHQpKSxpLnBpeGVsU2l6ZSYmKGEucGl4ZWxTaXplPUpTT04uc3RyaW5naWZ5KGkucGl4ZWxTaXplKSksaS5xdWFudGl6YXRpb25QYXJhbWV0ZXJzJiYodC5kZWZhdWx0U3BhdGlhbFJlZmVyZW5jZUVuYWJsZWQmJm51bGwhPXUmJm51bGwhPXQucXVhbnRpemF0aW9uUGFyYW1ldGVycyYmbnVsbCE9dC5xdWFudGl6YXRpb25QYXJhbWV0ZXJzLmV4dGVudCYmdS5lcXVhbHModC5xdWFudGl6YXRpb25QYXJhbWV0ZXJzLmV4dGVudC5zcGF0aWFsUmVmZXJlbmNlKSYmZGVsZXRlIGkucXVhbnRpemF0aW9uUGFyYW1ldGVycy5leHRlbnQuc3BhdGlhbFJlZmVyZW5jZSxhLnF1YW50aXphdGlvblBhcmFtZXRlcnM9SlNPTi5zdHJpbmdpZnkoaS5xdWFudGl6YXRpb25QYXJhbWV0ZXJzKSksaS5wYXJhbWV0ZXJWYWx1ZXMmJihhLnBhcmFtZXRlclZhbHVlcz1KU09OLnN0cmluZ2lmeShpLnBhcmFtZXRlclZhbHVlcykpLGkucmFuZ2VWYWx1ZXMmJihhLnJhbmdlVmFsdWVzPUpTT04uc3RyaW5naWZ5KGkucmFuZ2VWYWx1ZXMpKSxpLmR5bmFtaWNEYXRhU291cmNlJiYoYS5sYXllcj1KU09OLnN0cmluZ2lmeSh7c291cmNlOmkuZHluYW1pY0RhdGFTb3VyY2V9KSxkZWxldGUgaS5keW5hbWljRGF0YVNvdXJjZSksaS50aW1lRXh0ZW50KXtjb25zdCB0PWkudGltZUV4dGVudCx7c3RhcnQ6ZSxlbmQ6bn09dDtudWxsPT1lJiZudWxsPT1ufHwoYS50aW1lPWU9PT1uP2U6YCR7ZT8/XCJudWxsXCJ9LCR7bj8/XCJudWxsXCJ9YCksZGVsZXRlIGkudGltZUV4dGVudH1yZXR1cm4gdC5kZWZhdWx0U3BhdGlhbFJlZmVyZW5jZUVuYWJsZWQmJm51bGwhPXUmJm51bGwhPW8mJnUuZXF1YWxzKG8pJiYoYS5kZWZhdWx0U1I9YS5pblNSLGRlbGV0ZSBhLmluU1IsZGVsZXRlIGEub3V0U1IpLGF9YXN5bmMgZnVuY3Rpb24gbSh0LGUsbixyKXtjb25zdCBpPW51bGwhPWUudGltZUV4dGVudCYmZS50aW1lRXh0ZW50LmlzRW1wdHk/e2RhdGE6e2ZlYXR1cmVzOltdfX06YXdhaXQgeCh0LGUsXCJqc29uXCIscik7cmV0dXJuIHUoZSxuLGkuZGF0YSksaX1hc3luYyBmdW5jdGlvbiBjKHQsZSxuLHIpe2lmKG51bGwhPWUudGltZUV4dGVudCYmZS50aW1lRXh0ZW50LmlzRW1wdHkpcmV0dXJue2RhdGE6bi5jcmVhdGVGZWF0dXJlUmVzdWx0KCl9O2NvbnN0IGk9YXdhaXQgZih0LGUsciksYT1pO3JldHVybiBhLmRhdGE9byhpLmRhdGEsbiksYX1mdW5jdGlvbiBmKHQsZSxuKXtyZXR1cm4geCh0LGUsXCJwYmZcIixuKX1mdW5jdGlvbiBkKHQsZSxuKXtyZXR1cm4gbnVsbCE9ZS50aW1lRXh0ZW50JiZlLnRpbWVFeHRlbnQuaXNFbXB0eT9Qcm9taXNlLnJlc29sdmUoe2RhdGE6e29iamVjdElkczpbXX19KTp4KHQsZSxcImpzb25cIixuLHtyZXR1cm5JZHNPbmx5OiEwfSl9ZnVuY3Rpb24gcCh0LGUsbil7cmV0dXJuIG51bGwhPWUudGltZUV4dGVudCYmZS50aW1lRXh0ZW50LmlzRW1wdHk/UHJvbWlzZS5yZXNvbHZlKHtkYXRhOntjb3VudDowfX0pOngodCxlLFwianNvblwiLG4se3JldHVybklkc09ubHk6ITAscmV0dXJuQ291bnRPbmx5OiEwfSl9YXN5bmMgZnVuY3Rpb24gUyh0LGUsbil7aWYobnVsbCE9ZS50aW1lRXh0ZW50JiZlLnRpbWVFeHRlbnQuaXNFbXB0eSlyZXR1cm57ZGF0YTp7Y291bnQ6MCxleHRlbnQ6bnVsbH19O2NvbnN0IHI9YXdhaXQgeCh0LGUsXCJqc29uXCIsbix7cmV0dXJuRXh0ZW50T25seTohMCxyZXR1cm5Db3VudE9ubHk6ITB9KSxpPXIuZGF0YTtpZihpLmhhc093blByb3BlcnR5KFwiZXh0ZW50XCIpKXJldHVybiByO2lmKGkuZmVhdHVyZXMpdGhyb3cgbmV3IEVycm9yKGwpO2lmKGkuaGFzT3duUHJvcGVydHkoXCJjb3VudFwiKSl0aHJvdyBuZXcgRXJyb3IobCk7cmV0dXJuIHJ9YXN5bmMgZnVuY3Rpb24geChyLG8sdSxsPXt9LHM9e30pe2NvbnN0IG09XCJzdHJpbmdcIj09dHlwZW9mIHI/ZShyKTpyLGM9by5nZW9tZXRyeT9bby5nZW9tZXRyeV06W107bC5yZXNwb25zZVR5cGU9XCJwYmZcIj09PXU/XCJhcnJheS1idWZmZXJcIjpcImpzb25cIjtjb25zdCBmPWF3YWl0IGkoYyxudWxsLGwpLGQ9ZiYmZlswXTtudWxsIT1kJiYoKG89by5jbG9uZSgpKS5nZW9tZXRyeT1kKTtjb25zdCBwPWEoey4uLm0ucXVlcnksZjp1LC4uLnMsLi4ueShvLHMpfSk7cmV0dXJuIHQobihtLnBhdGgsRShvLHMpP1wicXVlcnkzZFwiOlwicXVlcnlcIiksey4uLmwscXVlcnk6ey4uLnAsLi4ubC5xdWVyeX19KX1mdW5jdGlvbiBFKHQsZSl7cmV0dXJuIG51bGwhPXQuZm9ybWF0T2YzRE9iamVjdHMmJiEoZS5yZXR1cm5Db3VudE9ubHl8fGUucmV0dXJuRXh0ZW50T25seXx8ZS5yZXR1cm5JZHNPbmx5KX1leHBvcnR7cyBhcyBlbmNvZGVHZW9tZXRyeSxtIGFzIGV4ZWN1dGVRdWVyeSxwIGFzIGV4ZWN1dGVRdWVyeUZvckNvdW50LFMgYXMgZXhlY3V0ZVF1ZXJ5Rm9yRXh0ZW50LGQgYXMgZXhlY3V0ZVF1ZXJ5Rm9ySWRzLGMgYXMgZXhlY3V0ZVF1ZXJ5UEJGLGYgYXMgZXhlY3V0ZVF1ZXJ5UEJGQnVmZmVyLHkgYXMgcXVlcnlUb1F1ZXJ5U3RyaW5nUGFyYW1ldGVycyx4IGFzIHJ1blF1ZXJ5fTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==