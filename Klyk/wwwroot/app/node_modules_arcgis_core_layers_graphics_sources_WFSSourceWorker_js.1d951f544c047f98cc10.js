"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["node_modules_arcgis_core_layers_graphics_sources_WFSSourceWorker_js"],{

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js":
/*!******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ d)
/* harmony export */ });
/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/asyncUtils.js */ "./node_modules/@arcgis/core/core/asyncUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../data/FeatureStore.js */ "./node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js");
/* harmony import */ var _data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../data/projectionSupport.js */ "./node_modules/@arcgis/core/layers/graphics/data/projectionSupport.js");
/* harmony import */ var _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../data/QueryEngine.js */ "./node_modules/@arcgis/core/layers/graphics/data/QueryEngine.js");
/* harmony import */ var _geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./geojson/geojson.js */ "./node_modules/@arcgis/core/layers/graphics/sources/geojson/geojson.js");
/* harmony import */ var _support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./support/sourceUtils.js */ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js");
/* harmony import */ var _ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../ogc/wfsUtils.js */ "./node_modules/@arcgis/core/layers/ogc/wfsUtils.js");
/* harmony import */ var _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/FieldsIndex.js */ "./node_modules/@arcgis/core/layers/support/FieldsIndex.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class d{constructor(){this._queryEngine=null,this._customParameters=null,this._snapshotFeatures=async e=>{const{objectIdField:t}=this._queryEngine,r=await (0,_ogc_wfsUtils_js__WEBPACK_IMPORTED_MODULE_11__.getFeature)(this._getFeatureUrl??"",this._featureType.typeName,this._getFeatureOutputFormat,{customParameters:this._customParameters,dateFields:this._queryEngine.fieldsIndex.dateFields.map((e=>e.name)),signal:e});await (0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.validateGeoJSON)(r),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(e);const a=(0,_geojson_geojson_js__WEBPACK_IMPORTED_MODULE_9__.createOptimizedFeatures)(r,{geometryType:this._queryEngine.geometryType,hasZ:!1,objectIdField:t});if(!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.equals)(this._queryEngine.spatialReference,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84))for(const s of a)null!=s.geometry&&(s.geometry=(0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertFromGeometry)((0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.project)((0,_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_5__.convertToGeometry)(s.geometry,this._queryEngine.geometryType,!1,!1),_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,this._queryEngine.spatialReference)));let p=1;for(const s of a){const e={};(0,_support_sourceUtils_js__WEBPACK_IMPORTED_MODULE_10__.mixAttributes)(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==s.attributes[t]&&(s.objectId=s.attributes[t]=p++)}return a}}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,t){const{getFeatureUrl:r,getFeatureOutputFormat:a,spatialReference:i,fields:n,geometryType:o,featureType:u,objectIdField:h,customParameters:y}=e;this._featureType=u,this._customParameters=y,this._getFeatureUrl=r,this._getFeatureOutputFormat=a,this._fieldsIndex=new _support_FieldsIndex_js__WEBPACK_IMPORTED_MODULE_12__["default"](n),await this._checkProjection(i),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.throwIfAborted)(t),this._queryEngine=new _data_QueryEngine_js__WEBPACK_IMPORTED_MODULE_8__.QueryEngine({fields:n,geometryType:o,hasM:!1,hasZ:!1,objectIdField:h,spatialReference:i,timeInfo:null,featureStore:new _data_FeatureStore_js__WEBPACK_IMPORTED_MODULE_6__["default"]({geometryType:o,hasM:!1,hasZ:!1})});const l=await this._snapshotFeatures(t.signal);return this._queryEngine.featureStore.addMany(l),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(s){return this._customParameters=s,this._snapshotTask?.abort(),this._snapshotTask=(0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_0__.createTask)(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_3__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_2__["default"].getLogger("esri.layers.WFSLayer").error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("wfs-layer:getfeature-error","An error occurred during the GetFeature request",{error:e}))})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _checkProjection(e){try{await (0,_data_projectionSupport_js__WEBPACK_IMPORTED_MODULE_7__.checkProjectionSupport)(_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_4__.WGS84,e)}catch{throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("unsupported-projection","Projection not supported",{spatialReference:e})}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createFeatureEditErrorResult: () => (/* binding */ u),
/* harmony export */   createFeatureEditSuccessResult: () => (/* binding */ c),
/* harmony export */   loadGeometryEngineForSimplify: () => (/* binding */ y),
/* harmony export */   mixAttributes: () => (/* binding */ d),
/* harmony export */   simplify: () => (/* binding */ h)
/* harmony export */ });
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class o{constructor(){this.code=null,this.description=null}}class l{constructor(e){this.error=new o,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=e}}function u(e){return new l(e)}class a{constructor(e){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=e}}function c(e){return new a(e)}const f=new Set;function d(e,i,r,s=!1,o){f.clear();for(const l in r){const a=e.get(l);if(!a)continue;const c=r[l],d=m(a,c);if(d!==c&&o&&o.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:a,originalValue:c,sanitizedValue:d}}),f.add(a.name),a&&(s||a.editable)){const e=(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.validateFieldValue)(a,d);if(e)return u((0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.validationErrorToString)(e,a,d));i[a.name]=d}}for(const t of e?.requiredFields??[])if(!f.has(t.name))return u(`missing required field "${t.name}"`);return null}function m(e,t){let n=t;return"string"==typeof t&&(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isNumericField)(e)?n=parseFloat(t):null!=t&&(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.isStringField)(e)&&"string"!=typeof t&&(n=String(t)),(0,_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.sanitizeNullFieldValue)(n)}let p;function h(t,n){if(!t||!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(n))return t;if("rings"in t||"paths"in t){if(null==p)throw new TypeError("geometry engine not loaded");return p.simplify(n,t)}return t}async function g(){return null==p&&(p=await Promise.all(/*! import() */[__webpack_require__.e("defaultVendors-node_modules_arcgis_core_chunks_geometryEngineBase_js"), __webpack_require__.e("node_modules_arcgis_core_geometry_geometryEngineJSON_js-_997e1")]).then(__webpack_require__.bind(__webpack_require__, /*! ../../../../geometry/geometryEngineJSON.js */ "./node_modules/@arcgis/core/geometry/geometryEngineJSON.js"))),p}async function y(t,n){!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_0__.isValid)(t)||"esriGeometryPolygon"!==n&&"esriGeometryPolyline"!==n||await g()}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX2xheWVyc19ncmFwaGljc19zb3VyY2VzX1dGU1NvdXJjZVdvcmtlcl9qcy4xZDk1MWY1NDRjMDQ3Zjk4Y2MxMC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ215QixRQUFRLGNBQWMsb0ZBQW9GLE1BQU0sZ0JBQWdCLDJCQUEyQiw2REFBQyxrRkFBa0Ysc0hBQXNILEVBQUUsTUFBTSxvRUFBQyxJQUFJLHFFQUFDLElBQUksUUFBUSw0RUFBQyxJQUFJLG9FQUFvRSxFQUFFLElBQUksa0ZBQUMsb0NBQW9DLDZFQUFDLGlEQUFpRCwrRUFBQyxDQUFDLG1FQUFDLENBQUMsNkVBQUMsa0RBQWtELDZFQUFDLHVDQUF1QyxRQUFRLGtCQUFrQixXQUFXLHVFQUFDLDZHQUE2RyxVQUFVLFVBQVUsb0RBQW9ELGdCQUFnQixNQUFNLHFJQUFxSSxHQUFHLHdIQUF3SCxnRUFBQyxtQ0FBbUMscUVBQUMsMEJBQTBCLDZEQUFDLEVBQUUsMEdBQTBHLDZEQUFDLEVBQUUsK0JBQStCLEVBQUUsRUFBRSwrQ0FBK0Msa0RBQWtELHNFQUFzRSxtQkFBbUIsVUFBVSxzREFBQyxpRkFBaUYsd0JBQXdCLEtBQUssRUFBRSxxRkFBcUYsNEJBQTRCLEtBQUssRUFBRSw2RkFBNkYseUJBQXlCLEtBQUssRUFBRSwyRkFBMkYsc0JBQXNCLEtBQUssRUFBRSw4RkFBOEYsMEJBQTBCLEVBQUUsZ0dBQWdHLGlCQUFpQiwrRUFBK0UsK0RBQUMsOERBQThELG9GQUFvRixPQUFPLHVDQUF1QyxtRUFBQyxLQUFLLHVEQUFDLDZDQUE2QyxzREFBQyxpRkFBaUYsUUFBUSxHQUFHLHVDQUF1QyxzRUFBc0UsOEJBQThCLHFEQUFxRCxJQUFJLGlDQUFpQyxPQUFPLHFDQUFxQywwQkFBMEIsSUFBSSxNQUFNLGtGQUFDLENBQUMsNkVBQUMsSUFBSSxNQUFNLFVBQVUsc0RBQUMsc0RBQXNELG1CQUFtQixJQUF5Qjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDSnQwSDtBQUNBO0FBQ0E7QUFDQTtBQUNvUCxRQUFRLGNBQWMsc0NBQXNDLFFBQVEsZUFBZSxvSEFBb0gsY0FBYyxnQkFBZ0IsUUFBUSxlQUFlLGtFQUFrRSxjQUFjLGdCQUFnQixnQkFBZ0IseUJBQXlCLFVBQVUsa0JBQWtCLGlCQUFpQixlQUFlLHNCQUFzQixxQkFBcUIsbUdBQW1HLDBDQUEwQyxvQ0FBb0MsUUFBUSwwRUFBQyxNQUFNLGNBQWMsK0VBQUMsU0FBUyxhQUFhLDJGQUEyRixPQUFPLElBQUksWUFBWSxnQkFBZ0IsUUFBUSwwQkFBMEIsc0VBQUMsNkJBQTZCLHFFQUFDLHVDQUF1Qyw4RUFBQyxJQUFJLE1BQU0sZ0JBQWdCLFFBQVEsbUZBQUMsYUFBYSw2QkFBNkIsNkRBQTZELHVCQUF1QixTQUFTLG1CQUFtQix5QkFBeUIsd1hBQW9ELElBQUksc0JBQXNCLENBQUMsbUZBQUMsc0VBQXdOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvbGF5ZXJzL2dyYXBoaWNzL3NvdXJjZXMvV0ZTU291cmNlV29ya2VyLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL2xheWVycy9ncmFwaGljcy9zb3VyY2VzL3N1cHBvcnQvc291cmNlVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtjcmVhdGVUYXNrIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY29yZS9hc3luY1V0aWxzLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9FcnJvci5qc1wiO2ltcG9ydCByIGZyb21cIi4uLy4uLy4uL2NvcmUvTG9nZ2VyLmpzXCI7aW1wb3J0e3Rocm93SWZBYm9ydGVkIGFzIHMsaXNBYm9ydEVycm9yIGFzIGF9ZnJvbVwiLi4vLi4vLi4vY29yZS9wcm9taXNlVXRpbHMuanNcIjtpbXBvcnR7ZXF1YWxzIGFzIGksV0dTODQgYXMgbn1mcm9tXCIuLi8uLi8uLi9nZW9tZXRyeS9zdXBwb3J0L3NwYXRpYWxSZWZlcmVuY2VVdGlscy5qc1wiO2ltcG9ydHtjb252ZXJ0RnJvbUdlb21ldHJ5IGFzIG8sY29udmVydFRvR2VvbWV0cnkgYXMgdX1mcm9tXCIuLi9mZWF0dXJlQ29udmVyc2lvblV0aWxzLmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vZGF0YS9GZWF0dXJlU3RvcmUuanNcIjtpbXBvcnR7cHJvamVjdCBhcyBoLGNoZWNrUHJvamVjdGlvblN1cHBvcnQgYXMgeX1mcm9tXCIuLi9kYXRhL3Byb2plY3Rpb25TdXBwb3J0LmpzXCI7aW1wb3J0e1F1ZXJ5RW5naW5lIGFzIGN9ZnJvbVwiLi4vZGF0YS9RdWVyeUVuZ2luZS5qc1wiO2ltcG9ydHt2YWxpZGF0ZUdlb0pTT04gYXMgbCxjcmVhdGVPcHRpbWl6ZWRGZWF0dXJlcyBhcyBtfWZyb21cIi4vZ2VvanNvbi9nZW9qc29uLmpzXCI7aW1wb3J0e21peEF0dHJpYnV0ZXMgYXMgZ31mcm9tXCIuL3N1cHBvcnQvc291cmNlVXRpbHMuanNcIjtpbXBvcnR7Z2V0RmVhdHVyZSBhcyBffWZyb21cIi4uLy4uL29nYy93ZnNVdGlscy5qc1wiO2ltcG9ydCBmIGZyb21cIi4uLy4uL3N1cHBvcnQvRmllbGRzSW5kZXguanNcIjtjbGFzcyBke2NvbnN0cnVjdG9yKCl7dGhpcy5fcXVlcnlFbmdpbmU9bnVsbCx0aGlzLl9jdXN0b21QYXJhbWV0ZXJzPW51bGwsdGhpcy5fc25hcHNob3RGZWF0dXJlcz1hc3luYyBlPT57Y29uc3R7b2JqZWN0SWRGaWVsZDp0fT10aGlzLl9xdWVyeUVuZ2luZSxyPWF3YWl0IF8odGhpcy5fZ2V0RmVhdHVyZVVybD8/XCJcIix0aGlzLl9mZWF0dXJlVHlwZS50eXBlTmFtZSx0aGlzLl9nZXRGZWF0dXJlT3V0cHV0Rm9ybWF0LHtjdXN0b21QYXJhbWV0ZXJzOnRoaXMuX2N1c3RvbVBhcmFtZXRlcnMsZGF0ZUZpZWxkczp0aGlzLl9xdWVyeUVuZ2luZS5maWVsZHNJbmRleC5kYXRlRmllbGRzLm1hcCgoZT0+ZS5uYW1lKSksc2lnbmFsOmV9KTthd2FpdCBsKHIpLHMoZSk7Y29uc3QgYT1tKHIse2dlb21ldHJ5VHlwZTp0aGlzLl9xdWVyeUVuZ2luZS5nZW9tZXRyeVR5cGUsaGFzWjohMSxvYmplY3RJZEZpZWxkOnR9KTtpZighaSh0aGlzLl9xdWVyeUVuZ2luZS5zcGF0aWFsUmVmZXJlbmNlLG4pKWZvcihjb25zdCBzIG9mIGEpbnVsbCE9cy5nZW9tZXRyeSYmKHMuZ2VvbWV0cnk9byhoKHUocy5nZW9tZXRyeSx0aGlzLl9xdWVyeUVuZ2luZS5nZW9tZXRyeVR5cGUsITEsITEpLG4sdGhpcy5fcXVlcnlFbmdpbmUuc3BhdGlhbFJlZmVyZW5jZSkpKTtsZXQgcD0xO2Zvcihjb25zdCBzIG9mIGEpe2NvbnN0IGU9e307Zyh0aGlzLl9maWVsZHNJbmRleCxlLHMuYXR0cmlidXRlcywhMCkscy5hdHRyaWJ1dGVzPWUsbnVsbD09cy5hdHRyaWJ1dGVzW3RdJiYocy5vYmplY3RJZD1zLmF0dHJpYnV0ZXNbdF09cCsrKX1yZXR1cm4gYX19ZGVzdHJveSgpe3RoaXMuX3F1ZXJ5RW5naW5lPy5kZXN0cm95KCksdGhpcy5fcXVlcnlFbmdpbmU9bnVsbH1hc3luYyBsb2FkKGUsdCl7Y29uc3R7Z2V0RmVhdHVyZVVybDpyLGdldEZlYXR1cmVPdXRwdXRGb3JtYXQ6YSxzcGF0aWFsUmVmZXJlbmNlOmksZmllbGRzOm4sZ2VvbWV0cnlUeXBlOm8sZmVhdHVyZVR5cGU6dSxvYmplY3RJZEZpZWxkOmgsY3VzdG9tUGFyYW1ldGVyczp5fT1lO3RoaXMuX2ZlYXR1cmVUeXBlPXUsdGhpcy5fY3VzdG9tUGFyYW1ldGVycz15LHRoaXMuX2dldEZlYXR1cmVVcmw9cix0aGlzLl9nZXRGZWF0dXJlT3V0cHV0Rm9ybWF0PWEsdGhpcy5fZmllbGRzSW5kZXg9bmV3IGYobiksYXdhaXQgdGhpcy5fY2hlY2tQcm9qZWN0aW9uKGkpLHModCksdGhpcy5fcXVlcnlFbmdpbmU9bmV3IGMoe2ZpZWxkczpuLGdlb21ldHJ5VHlwZTpvLGhhc006ITEsaGFzWjohMSxvYmplY3RJZEZpZWxkOmgsc3BhdGlhbFJlZmVyZW5jZTppLHRpbWVJbmZvOm51bGwsZmVhdHVyZVN0b3JlOm5ldyBwKHtnZW9tZXRyeVR5cGU6byxoYXNNOiExLGhhc1o6ITF9KX0pO2NvbnN0IGw9YXdhaXQgdGhpcy5fc25hcHNob3RGZWF0dXJlcyh0LnNpZ25hbCk7cmV0dXJuIHRoaXMuX3F1ZXJ5RW5naW5lLmZlYXR1cmVTdG9yZS5hZGRNYW55KGwpLHtleHRlbnQ6KGF3YWl0IHRoaXMuX3F1ZXJ5RW5naW5lLmZldGNoUmVjb21wdXRlZEV4dGVudHMoKSkuZnVsbEV4dGVudH19YXN5bmMgYXBwbHlFZGl0cygpe3Rocm93IG5ldyB0KFwid2ZzLXNvdXJjZTplZGl0aW5nLW5vdC1zdXBwb3J0ZWRcIixcImFwcGx5RWRpdHMoKSBpcyBub3Qgc3VwcG9ydGVkIG9uIFdGU0xheWVyXCIpfWFzeW5jIHF1ZXJ5RmVhdHVyZXMoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnkoZSx0LnNpZ25hbCl9YXN5bmMgcXVlcnlGZWF0dXJlQ291bnQoZT17fSx0PXt9KXtyZXR1cm4gYXdhaXQgdGhpcy5fd2FpdFNuYXBzaG90Q29tcGxldGUoKSx0aGlzLl9xdWVyeUVuZ2luZS5leGVjdXRlUXVlcnlGb3JDb3VudChlLHQuc2lnbmFsKX1hc3luYyBxdWVyeU9iamVjdElkcyhlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvcklkcyhlLHQuc2lnbmFsKX1hc3luYyBxdWVyeUV4dGVudChlPXt9LHQ9e30pe3JldHVybiBhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHRoaXMuX3F1ZXJ5RW5naW5lLmV4ZWN1dGVRdWVyeUZvckV4dGVudChlLHQuc2lnbmFsKX1hc3luYyBxdWVyeVNuYXBwaW5nKGUsdD17fSl7cmV0dXJuIGF3YWl0IHRoaXMuX3dhaXRTbmFwc2hvdENvbXBsZXRlKCksdGhpcy5fcXVlcnlFbmdpbmUuZXhlY3V0ZVF1ZXJ5Rm9yU25hcHBpbmcoZSx0LnNpZ25hbCl9YXN5bmMgcmVmcmVzaChzKXtyZXR1cm4gdGhpcy5fY3VzdG9tUGFyYW1ldGVycz1zLHRoaXMuX3NuYXBzaG90VGFzaz8uYWJvcnQoKSx0aGlzLl9zbmFwc2hvdFRhc2s9ZSh0aGlzLl9zbmFwc2hvdEZlYXR1cmVzKSx0aGlzLl9zbmFwc2hvdFRhc2sucHJvbWlzZS50aGVuKChlPT57dGhpcy5fcXVlcnlFbmdpbmUuZmVhdHVyZVN0b3JlLmNsZWFyKCksZSYmdGhpcy5fcXVlcnlFbmdpbmUuZmVhdHVyZVN0b3JlLmFkZE1hbnkoZSl9KSwoZT0+e3RoaXMuX3F1ZXJ5RW5naW5lLmZlYXR1cmVTdG9yZS5jbGVhcigpLGEoZSl8fHIuZ2V0TG9nZ2VyKFwiZXNyaS5sYXllcnMuV0ZTTGF5ZXJcIikuZXJyb3IobmV3IHQoXCJ3ZnMtbGF5ZXI6Z2V0ZmVhdHVyZS1lcnJvclwiLFwiQW4gZXJyb3Igb2NjdXJyZWQgZHVyaW5nIHRoZSBHZXRGZWF0dXJlIHJlcXVlc3RcIix7ZXJyb3I6ZX0pKX0pKSxhd2FpdCB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpLHtleHRlbnQ6KGF3YWl0IHRoaXMuX3F1ZXJ5RW5naW5lLmZldGNoUmVjb21wdXRlZEV4dGVudHMoKSkuZnVsbEV4dGVudH19YXN5bmMgX3dhaXRTbmFwc2hvdENvbXBsZXRlKCl7aWYodGhpcy5fc25hcHNob3RUYXNrJiYhdGhpcy5fc25hcHNob3RUYXNrLmZpbmlzaGVkKXt0cnl7YXdhaXQgdGhpcy5fc25hcHNob3RUYXNrLnByb21pc2V9Y2F0Y2h7fXJldHVybiB0aGlzLl93YWl0U25hcHNob3RDb21wbGV0ZSgpfX1hc3luYyBfY2hlY2tQcm9qZWN0aW9uKGUpe3RyeXthd2FpdCB5KG4sZSl9Y2F0Y2h7dGhyb3cgbmV3IHQoXCJ1bnN1cHBvcnRlZC1wcm9qZWN0aW9uXCIsXCJQcm9qZWN0aW9uIG5vdCBzdXBwb3J0ZWRcIix7c3BhdGlhbFJlZmVyZW5jZTplfSl9fX1leHBvcnR7ZCBhcyBkZWZhdWx0fTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7aXNWYWxpZCBhcyBlfWZyb21cIi4uLy4uLy4uLy4uL2dlb21ldHJ5L3N1cHBvcnQvc3BhdGlhbFJlZmVyZW5jZVV0aWxzLmpzXCI7aW1wb3J0e3ZhbGlkYXRlRmllbGRWYWx1ZSBhcyB0LHZhbGlkYXRpb25FcnJvclRvU3RyaW5nIGFzIG4saXNOdW1lcmljRmllbGQgYXMgaSxpc1N0cmluZ0ZpZWxkIGFzIHIsc2FuaXRpemVOdWxsRmllbGRWYWx1ZSBhcyBzfWZyb21cIi4uLy4uLy4uL3N1cHBvcnQvZmllbGRVdGlscy5qc1wiO2NsYXNzIG97Y29uc3RydWN0b3IoKXt0aGlzLmNvZGU9bnVsbCx0aGlzLmRlc2NyaXB0aW9uPW51bGx9fWNsYXNzIGx7Y29uc3RydWN0b3IoZSl7dGhpcy5lcnJvcj1uZXcgbyx0aGlzLmdsb2JhbElkPW51bGwsdGhpcy5vYmplY3RJZD1udWxsLHRoaXMuc3VjY2Vzcz0hMSx0aGlzLnVuaXF1ZUlkPW51bGwsdGhpcy5lcnJvci5kZXNjcmlwdGlvbj1lfX1mdW5jdGlvbiB1KGUpe3JldHVybiBuZXcgbChlKX1jbGFzcyBhe2NvbnN0cnVjdG9yKGUpe3RoaXMuZ2xvYmFsSWQ9bnVsbCx0aGlzLnN1Y2Nlc3M9ITAsdGhpcy5vYmplY3RJZD10aGlzLnVuaXF1ZUlkPWV9fWZ1bmN0aW9uIGMoZSl7cmV0dXJuIG5ldyBhKGUpfWNvbnN0IGY9bmV3IFNldDtmdW5jdGlvbiBkKGUsaSxyLHM9ITEsbyl7Zi5jbGVhcigpO2Zvcihjb25zdCBsIGluIHIpe2NvbnN0IGE9ZS5nZXQobCk7aWYoIWEpY29udGludWU7Y29uc3QgYz1yW2xdLGQ9bShhLGMpO2lmKGQhPT1jJiZvJiZvLnB1c2goe25hbWU6XCJpbnZhbGlkLXZhbHVlLXR5cGVcIixtZXNzYWdlOlwiYXR0cmlidXRlIHZhbHVlIHdhcyBjb252ZXJ0ZWQgdG8gbWF0Y2ggdGhlIGZpZWxkIHR5cGVcIixkZXRhaWxzOntmaWVsZDphLG9yaWdpbmFsVmFsdWU6YyxzYW5pdGl6ZWRWYWx1ZTpkfX0pLGYuYWRkKGEubmFtZSksYSYmKHN8fGEuZWRpdGFibGUpKXtjb25zdCBlPXQoYSxkKTtpZihlKXJldHVybiB1KG4oZSxhLGQpKTtpW2EubmFtZV09ZH19Zm9yKGNvbnN0IHQgb2YgZT8ucmVxdWlyZWRGaWVsZHM/P1tdKWlmKCFmLmhhcyh0Lm5hbWUpKXJldHVybiB1KGBtaXNzaW5nIHJlcXVpcmVkIGZpZWxkIFwiJHt0Lm5hbWV9XCJgKTtyZXR1cm4gbnVsbH1mdW5jdGlvbiBtKGUsdCl7bGV0IG49dDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdCYmaShlKT9uPXBhcnNlRmxvYXQodCk6bnVsbCE9dCYmcihlKSYmXCJzdHJpbmdcIiE9dHlwZW9mIHQmJihuPVN0cmluZyh0KSkscyhuKX1sZXQgcDtmdW5jdGlvbiBoKHQsbil7aWYoIXR8fCFlKG4pKXJldHVybiB0O2lmKFwicmluZ3NcImluIHR8fFwicGF0aHNcImluIHQpe2lmKG51bGw9PXApdGhyb3cgbmV3IFR5cGVFcnJvcihcImdlb21ldHJ5IGVuZ2luZSBub3QgbG9hZGVkXCIpO3JldHVybiBwLnNpbXBsaWZ5KG4sdCl9cmV0dXJuIHR9YXN5bmMgZnVuY3Rpb24gZygpe3JldHVybiBudWxsPT1wJiYocD1hd2FpdCBpbXBvcnQoXCIuLi8uLi8uLi8uLi9nZW9tZXRyeS9nZW9tZXRyeUVuZ2luZUpTT04uanNcIikpLHB9YXN5bmMgZnVuY3Rpb24geSh0LG4peyFlKHQpfHxcImVzcmlHZW9tZXRyeVBvbHlnb25cIiE9PW4mJlwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIiE9PW58fGF3YWl0IGcoKX1leHBvcnR7dSBhcyBjcmVhdGVGZWF0dXJlRWRpdEVycm9yUmVzdWx0LGMgYXMgY3JlYXRlRmVhdHVyZUVkaXRTdWNjZXNzUmVzdWx0LHkgYXMgbG9hZEdlb21ldHJ5RW5naW5lRm9yU2ltcGxpZnksZCBhcyBtaXhBdHRyaWJ1dGVzLGggYXMgc2ltcGxpZnl9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9