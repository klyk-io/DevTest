"use strict";
(self["webpackChunkklyk"] = self["webpackChunkklyk"] || []).push([["defaultVendors-node_modules_arcgis_core_views_2d_layers_KMLLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/layers/support/kmlUtils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/kmlUtils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   computeExtent: () => (/* binding */ j),
/* harmony export */   fetchService: () => (/* binding */ g),
/* harmony export */   getGraphics: () => (/* binding */ b),
/* harmony export */   parseKML: () => (/* binding */ d),
/* harmony export */   sublayersFromJSON: () => (/* binding */ S)
/* harmony export */ });
/* harmony import */ var _config_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../config.js */ "./node_modules/@arcgis/core/config.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _PopupTemplate_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../PopupTemplate.js */ "./node_modules/@arcgis/core/PopupTemplate.js");
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../geometry/support/aaBoundingBox.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js");
/* harmony import */ var _geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../geometry/support/boundsUtils.js */ "./node_modules/@arcgis/core/geometry/support/boundsUtils.js");
/* harmony import */ var _renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../renderers/support/jsonUtils.js */ "./node_modules/@arcgis/core/renderers/support/jsonUtils.js");
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../rest/support/FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
const c={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function d(e){const o=e.folders||[],t=o.slice(),r=new Map,n=new Map,i=new Map,f=new Map,a=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:f};(e.featureCollection&&e.featureCollection.layers||[]).forEach((e=>{const o=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(e);o.featureSet.features=[];const t=e.featureSet.geometryType;r.set(t,o);const a=e.layerDefinition.objectIdField;"esriGeometryPoint"===t?G(n,a,e.featureSet.features):"esriGeometryPolyline"===t?G(i,a,e.featureSet.features):"esriGeometryPolygon"===t&&G(f,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{a.set(e.id,e)})),o.forEach((o=>{o.networkLinkIds.forEach((r=>{const s=P(r,o.id,e.networkLinks);s&&t.push(s)}))})),t.forEach((e=>{if(e.featureInfos){e.points=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPoint")),e.polylines=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPolyline")),e.polygons=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_4__.clone)(r.get("esriGeometryPolygon")),e.mapImages=[];for(const o of e.featureInfos)switch(o.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{const t=l[o.type].get(o.id);t&&e[c[o.type]]?.featureSet.features.push(t);break}case"GroundOverlay":{const t=a.get(o.id);t&&e.mapImages.push(t);break}}e.fullExtent=j([e])}}));const u=j(t);return{folders:o,sublayers:t,extent:u}}function g(t,s,i,f){const a=_kernel_js__WEBPACK_IMPORTED_MODULE_1__.id&&_kernel_js__WEBPACK_IMPORTED_MODULE_1__.id.findCredential(t);t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.addQueryParameters)(t,{token:a&&a.token});const l=_config_js__WEBPACK_IMPORTED_MODULE_0__["default"].kmlServiceUrl;return (0,_request_js__WEBPACK_IMPORTED_MODULE_3__["default"])(l,{query:{url:t,model:"simple",folders:"",refresh:0!==i||void 0,outSR:JSON.stringify(s)},responseType:"json",signal:f})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,f=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&f.includes(i.id)&&(i.visible=r.includes(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers?.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(e.featureSet).features,r=e.layerDefinition,s=(0,_renderers_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_9__.fromJSON)(r.drawingInfo.renderer),n=_PopupTemplate_js__WEBPACK_IMPORTED_MODULE_2__["default"].fromJSON(e.popupInfo),i=[];for(const t of o){const e=await s.getSymbolAsync(t);t.symbol=e,t.popupTemplate=n,t.visible=!0,i.push(t)}return i}function j(e){const o=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.NEGATIVE_INFINITY),t=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.NEGATIVE_INFINITY);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.geometry),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o);if(r.mapImages)for(const e of r.mapImages)(0,_geometry_support_boundsUtils_js__WEBPACK_IMPORTED_MODULE_8__.getBoundsXYZ)(o,e.extent),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.expandWithAABB)(t,o)}return (0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.equals)(t,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_7__.NEGATIVE_INFINITY)?void 0:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_6__["default"].WGS84}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js":
/*!*************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/Bitmap.js ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Bitmap: () => (/* binding */ T),
/* harmony export */   isImageSource: () => (/* binding */ w),
/* harmony export */   rasterize: () => (/* binding */ b)
/* harmony export */ });
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../chunks/mat3.js */ "./node_modules/@arcgis/core/chunks/mat3.js");
/* harmony import */ var _chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../chunks/mat3f32.js */ "./node_modules/@arcgis/core/chunks/mat3f32.js");
/* harmony import */ var _chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../chunks/vec2f32.js */ "./node_modules/@arcgis/core/chunks/vec2f32.js");
/* harmony import */ var _DisplayObject_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./DisplayObject.js */ "./node_modules/@arcgis/core/views/2d/engine/DisplayObject.js");
/* harmony import */ var _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./ImageryBitmapSource.js */ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js");
/* harmony import */ var _webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../webgl/contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function w(t){return t&&"render"in t}function b(t){const e=document.createElement("canvas");return e.width=t.width,e.height=t.height,t.render(e.getContext("2d")),e}function v(e){return w(e)?e instanceof _ImageryBitmapSource_js__WEBPACK_IMPORTED_MODULE_6__["default"]?(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.applySome)(e.getRenderedRasterPixels(),(t=>t.renderedRasterPixels)):b(e):e}class T extends _DisplayObject_js__WEBPACK_IMPORTED_MODULE_5__.DisplayObject{constructor(t=null,e=!1){super(),this.blendFunction="standard",this._sourceWidth=0,this._sourceHeight=0,this._textureInvalidated=!1,this._texture=null,this.stencilRef=0,this.coordScale=[1,1],this._height=void 0,this.pixelRatio=1,this.resolution=0,this.rotation=0,this._source=null,this._width=void 0,this.x=0,this.y=0,this.immutable=e,this.source=t,this.requestRender=this.requestRender.bind(this)}destroy(){this._texture&&(this._texture.dispose(),this._texture=null),null!=this._uploadStatus&&(this._uploadStatus.controller.abort(),this._uploadStatus=null)}get isSourceScaled(){return this.width!==this._sourceWidth||this.height!==this._sourceHeight}get height(){return void 0!==this._height?this._height:this._sourceHeight}set height(t){this._height=t}get source(){return this._source}set source(t){null==t&&null==this._source||(this._source=t,this.invalidateTexture(),this.requestRender())}get width(){return void 0!==this._width?this._width:this._sourceWidth}set width(t){this._width=t}beforeRender(t){super.beforeRender(t),this.updateTexture(t)}async setSourceAsync(t,i){null!=this._uploadStatus&&this._uploadStatus.controller.abort();const r=new AbortController,h=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.createResolver)();return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.onAbortOrThrow)(i,(()=>r.abort())),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.onAbortOrThrow)(r,(t=>h.reject(t))),this._uploadStatus={controller:r,resolver:h},this.source=t,h.promise}invalidateTexture(){this._textureInvalidated||(this._textureInvalidated=!0,this._source instanceof HTMLImageElement?(this._sourceHeight=this._source.naturalHeight,this._sourceWidth=this._source.naturalWidth):this._source&&(this._sourceHeight=this._source.height,this._sourceWidth=this._source.width))}updateTransitionProperties(t,e){t>=64&&(this.fadeTransitionEnabled=!1,this.inFadeTransition=!1),super.updateTransitionProperties(t,e)}setTransform(t){const e=(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.g)(this.transforms.dvs),[s,i]=t.toScreenNoRotation([0,0],[this.x,this.y]),n=this.resolution/this.pixelRatio/t.resolution,l=n*this.width,c=n*this.height,_=Math.PI*this.rotation/180;(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_4__.f)(s,i)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_4__.f)(l/2,c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.r)(e,e,-_),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.h)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_4__.f)(-l/2,-c/2)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.l)(e,e,(0,_chunks_vec2f32_js__WEBPACK_IMPORTED_MODULE_4__.f)(l,c)),(0,_chunks_mat3_js__WEBPACK_IMPORTED_MODULE_2__.m)(this.transforms.dvs,t.displayViewMat3,e)}setSamplingProfile(t){this._texture&&(t.mips&&!this._texture.descriptor.hasMipmap&&this._texture.generateMipmap(),this._texture.setSamplingMode(t.samplingMode))}bind(t,e){this._texture&&t.bindTexture(this._texture,e)}async updateTexture({context:t,painter:e}){if(!this._textureInvalidated)return;if(this._textureInvalidated=!1,this._texture||(this._texture=this._createTexture(t)),!this.source)return void this._texture.setData(null);this._texture.resize(this._sourceWidth,this._sourceHeight);const s=v(this.source);try{if(null!=this._uploadStatus){const{controller:t,resolver:i}=this._uploadStatus,r={signal:t.signal},{width:h,height:o}=this,u=this._texture,a=e.textureUploadManager;await a.enqueueTextureUpdate({data:s,texture:u,width:h,height:o},r),i.resolve(),this._uploadStatus=null}else this._texture.setData(s);this.ready()}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfNotAbortError)(r)}}onDetach(){this.destroy()}_createTransforms(){return{dvs:(0,_chunks_mat3f32_js__WEBPACK_IMPORTED_MODULE_3__.c)()}}_createTexture(t){const e=this.immutable&&t.type===_webgl_contextUtils_js__WEBPACK_IMPORTED_MODULE_7__.ContextType.WEBGL2,s=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_10__.TextureDescriptor;return s.internalFormat=e?_webgl_enums_js__WEBPACK_IMPORTED_MODULE_8__.SizedPixelFormat.RGBA8:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_8__.PixelFormat.RGBA,s.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_8__.TextureWrapMode.CLAMP_TO_EDGE,s.isImmutable=e,s.width=this._sourceWidth,s.height=this._sourceHeight,new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_9__.Texture(t,s)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BitmapContainer: () => (/* binding */ a)
/* harmony export */ });
/* harmony import */ var _brushes_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./brushes.js */ "./node_modules/@arcgis/core/views/2d/engine/brushes.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./webgl/WGLContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/WGLContainer.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class a extends _webgl_WGLContainer_js__WEBPACK_IMPORTED_MODULE_2__["default"]{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return this._hasCrossfade}beforeRender(e){super.beforeRender(e),this._manageFade()}prepareRenderPasses(r){const a=r.registerRenderPass({name:"bitmap",brushes:[_brushes_js__WEBPACK_IMPORTED_MODULE_0__.brushes.bitmap],target:()=>this.children,drawPhase:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_1__.WGLDrawPhase.MAP});return[...super.prepareRenderPasses(r),a]}_manageFade(){this.children.reduce(((e,s)=>e+(s.inFadeTransition?1:0)),0)>=2?(this.children.forEach((e=>e.blendFunction="additive")),this._hasCrossfade=!0):(this.children.forEach((e=>e.blendFunction="standard")),this._hasCrossfade=!1)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/ImageryBitmapSource.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ l)
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class l{constructor(l,e,t){this.pixelBlock=l,this.extent=e,this.originalPixelBlock=t}get width(){return null!=this.pixelBlock?this.pixelBlock.width:0}get height(){return null!=this.pixelBlock?this.pixelBlock.height:0}render(l){const e=this.pixelBlock;if(null==e)return;const t=this.filter({extent:this.extent,pixelBlock:this.originalPixelBlock??e});if(null==t.pixelBlock)return;t.pixelBlock.maskIsAlpha&&(t.pixelBlock.premultiplyAlpha=!0);const i=t.pixelBlock.getAsRGBA(),h=l.createImageData(t.pixelBlock.width,t.pixelBlock.height);h.data.set(i),l.putImageData(h,0,0)}getRenderedRasterPixels(){const l=this.filter({extent:this.extent,pixelBlock:this.pixelBlock});return null==l.pixelBlock?null:(l.pixelBlock.maskIsAlpha&&(l.pixelBlock.premultiplyAlpha=!0),{width:l.pixelBlock.width,height:l.pixelBlock.height,renderedRasterPixels:new Uint8Array(l.pixelBlock.getAsRGBA().buffer)})}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js ***!
  \*********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ k)
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _kernel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../kernel.js */ "./node_modules/@arcgis/core/kernel.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ "./node_modules/@arcgis/core/core/accessorSupport/ensureType.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../layers/support/kmlUtils.js */ "./node_modules/@arcgis/core/layers/support/kmlUtils.js");
/* harmony import */ var _rest_utils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../rest/utils.js */ "./node_modules/@arcgis/core/rest/utils.js");
/* harmony import */ var _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../support/GraphicsCollection.js */ "./node_modules/@arcgis/core/support/GraphicsCollection.js");
/* harmony import */ var _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../engine/Bitmap.js */ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js");
/* harmony import */ var _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../engine/BitmapContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/BitmapContainer.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./graphics/GraphicContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js");
/* harmony import */ var _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./graphics/GraphicsView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicsView2D.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _support_imageReprojection_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../support/imageReprojection.js */ "./node_modules/@arcgis/core/views/support/imageReprojection.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_19__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_22__["default"])){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new _engine_BitmapContainer_js__WEBPACK_IMPORTED_MODULE_18__.BitmapContainer,this._kmlVisualData=new C,this._fetchController=null,this.allVisiblePoints=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisiblePolylines=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisiblePolygons=new _support_GraphicsCollection_js__WEBPACK_IMPORTED_MODULE_16__.GraphicsCollection,this.allVisibleMapImages=new _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__["default"]}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:"graphic",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new _graphics_GraphicsView2D_js__WEBPACK_IMPORTED_MODULE_21__["default"]({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new _graphics_GraphicContainer_js__WEBPACK_IMPORTED_MODULE_20__["default"](this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on("change",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_4__.watch)((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new _support_imageReprojection_js__WEBPACK_IMPORTED_MODULE_23__.ImageReprojector}detach(){this._fetchController=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.abortMaybe)(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._polygonsView),this._polylinesView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._polylinesView),this._pointsView=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._pointsView),this._imageReprojector=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_3__.destroyMaybe)(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference?.isWGS84||this.view.spatialReference?.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__["default"].fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new _engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_17__.Bitmap(i.bitmapData);t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:s,viewBoundScale:a,httpQuery:o}=e;if(null!=s){if(null==t)throw new Error("Loading this network link requires a view state.");let n;if(await (0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.load)(),null!=a&&1!==a){const e=new _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_11__["default"](t.extent);e.expand(a),n=e}else n=t.extent;n=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(n,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__["default"].WGS84);const h=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_12__.project)(n,_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_13__["default"].WebMercator),y=n.xmin,g=n.xmax,w=n.ymin,_=n.ymax,b=t.size[0]*t.pixelRatio,V=t.size[1]*t.pixelRatio,f=Math.max(h.width,h.height),v={"[bboxWest]":y.toString(),"[bboxEast]":g.toString(),"[bboxSouth]":w.toString(),"[bboxNorth]":_.toString(),"[lookatLon]":n.center.x.toString(),"[lookatLat]":n.center.y.toString(),"[lookatRange]":f.toString(),"[lookatTilt]":"0","[lookatHeading]":t.rotation.toString(),"[lookatTerrainLon]":n.center.x.toString(),"[lookatTerrainLat]":n.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":n.center.x.toString(),"[cameraLat]":n.center.y.toString(),"[cameraAlt]":f.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":b.toString(),"[vertPixels]":V.toString(),"[terrainEnabled]":"0","[clientVersion]":_kernel_js__WEBPACK_IMPORTED_MODULE_1__.version,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},S=e=>{for(const i in e){let t;for(t in v)e[i]=e[i].replace(t,v[t])}},I=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.queryToObject)(s);S(I);let x={};null!=o&&(x=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.queryToObject)(o),S(x));const C=(0,_rest_utils_js__WEBPACK_IMPORTED_MODULE_15__.parseUrl)(e.href);C.query={...C.query,...I,...x};return`${C.path}?${(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_5__.objectToQuery)(I)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i?.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.points):[],a=s.polylines?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.polylines):[],o=s.polygons?await (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.getGraphics)(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return (0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.fetchService)(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>(0,_layers_support_kmlUtils_js__WEBPACK_IMPORTED_MODULE_14__.parseKML)(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_pointsView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_polylinesView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"_polygonsView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],j.prototype,"updating",void 0),j=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_10__.subclass)("esri.views.2d.layers.KMLLayerView2D")],j);const k=j;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/support/imageReprojection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/support/imageReprojection.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ImageReprojector: () => (/* binding */ l)
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/Point.js */ "./node_modules/@arcgis/core/geometry/Point.js");
/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry/projection.js */ "./node_modules/@arcgis/core/geometry/projection.js");
/* harmony import */ var _layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../layers/support/rasterFunctions/rasterProjectionHelper.js */ "./node_modules/@arcgis/core/layers/support/rasterFunctions/rasterProjectionHelper.js");
/* harmony import */ var _2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../2d/engine/Bitmap.js */ "./node_modules/@arcgis/core/views/2d/engine/Bitmap.js");
/* harmony import */ var _2d_engine_webgl_VertexStream_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../2d/engine/webgl/VertexStream.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/VertexStream.js");
/* harmony import */ var _2d_engine_webgl_shaders_MaterialPrograms_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../2d/engine/webgl/shaders/MaterialPrograms.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaders/MaterialPrograms.js");
/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../webgl/enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../webgl/FramebufferObject.js */ "./node_modules/@arcgis/core/views/webgl/FramebufferObject.js");
/* harmony import */ var _webgl_rasterUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../webgl/rasterUtils.js */ "./node_modules/@arcgis/core/views/webgl/rasterUtils.js");
/* harmony import */ var _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../webgl/RenderingContext.js */ "./node_modules/@arcgis/core/views/webgl/RenderingContext.js");
/* harmony import */ var _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../webgl/Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../webgl/TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
class l{constructor(t){if(this._ownsRctx=!1,t)this._ownsRctx=!1,this._rctx=t;else{if(l._instance)return l._instanceRefCount++,l._instance;l._instanceRefCount=1,l._instance=this,this._ownsRctx=!0;const t=document.createElement("canvas").getContext("webgl");t.getExtension("OES_texture_float"),this._rctx=new _webgl_RenderingContext_js__WEBPACK_IMPORTED_MODULE_10__.RenderingContext(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=(0,_2d_engine_webgl_shaders_MaterialPrograms_js__WEBPACK_IMPORTED_MODULE_6__.createProgramTemplate)("raster/reproject","raster/reproject",new Map([["a_position",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f("u_opacity",1),this._program.setUniform1i("u_image",0),this._program.setUniform1i("u_flipY",0),this._program.setUniform1i("u_transformGrid",1),this._quad=new _2d_engine_webgl_VertexStream_js__WEBPACK_IMPORTED_MODULE_5__["default"](this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_2__.project)(t.extent,s),m=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__["default"]({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:_,y:g}=(0,_layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__.projectResolution)(m,s,t.extent);let l=(_+g)/2;const w=Math.round((o.xmax-o.xmin)/l),b=Math.round((o.ymax-o.ymin)/l);l=(o.width/w+o.height/b)/2;const j=new _geometry_Point_js__WEBPACK_IMPORTED_MODULE_1__["default"]({x:l,y:l,spatialReference:o.spatialReference}),D=(0,_layers_support_rasterFunctions_rasterProjectionHelper_js__WEBPACK_IMPORTED_MODULE_3__.getProjectionOffsetGrid)({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:j,hasWrapAround:!0,spacing:[16,16]}),R=(0,_webgl_rasterUtils_js__WEBPACK_IMPORTED_MODULE_9__.createTransformTexture)(this._rctx,D),C=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__.TextureDescriptor(w,b);C.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE;const T=new _webgl_FramebufferObject_js__WEBPACK_IMPORTED_MODULE_8__.FramebufferObject(this._rctx,C);this._rctx.bindFramebuffer(T),this._rctx.setViewport(0,0,w,b),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(R,1),this._quad.bind();const{width:y=0,height:E=0}=t.texture.descriptor;if(this._program.setUniform2f("u_srcImageSize",y,E),this._program.setUniform2fv("u_transformSpacing",D.spacing),this._program.setUniform2fv("u_transformGridSize",D.size),this._program.setUniform2f("u_targetImageSize",w,b),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),R.dispose(),n){const{width:t,height:e}=T,r=new ImageData(t??0,e??0);T.readPixels(0,0,t??0,e??0,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelFormat.RGBA,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.PixelType.UNSIGNED_BYTE,r.data);const i=T.detachColorTexture(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.ColorAttachment.COLOR_ATTACHMENT0);return T.dispose(),{texture:i,extent:o,imageData:r}}const M=T.detachColorTexture(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.ColorAttachment.COLOR_ATTACHMENT0);return T.dispose(),{texture:M,extent:o}}reprojectBitmapData(t,e){const r=(0,_2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__.isImageSource)(t.bitmapData)?(0,_2d_engine_Bitmap_js__WEBPACK_IMPORTED_MODULE_4__.rasterize)(t.bitmapData):t.bitmapData,i=new _webgl_TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_12__.TextureDescriptor;i.wrapMode=_webgl_enums_js__WEBPACK_IMPORTED_MODULE_7__.TextureWrapMode.CLAMP_TO_EDGE,i.width=t.bitmapData.width,i.height=t.bitmapData.height;const a=new _webgl_Texture_js__WEBPACK_IMPORTED_MODULE_11__.Texture(this._rctx,i,r),o=this.reprojectTexture({texture:a,extent:t.extent},e,!0);o.texture.dispose();const m=document.createElement("canvas"),p=o.imageData;m.width=p.width,m.height=p.height;return m.getContext("2d").putImageData(p,0,0),{bitmapData:m,extent:o.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(e,{responseType:"image"})).data,s=document.createElement("canvas");s.width=a.width,s.height=a.height;const n=s.getContext("2d");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(l._instanceRefCount--,0===l._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),l._instance=null)):(this._quad.dispose(),this._program.dispose())}}l._instanceRefCount=0;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/webgl/rasterUtils.js":
/*!**************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/webgl/rasterUtils.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createColormapTexture: () => (/* binding */ l),
/* harmony export */   createRasterTexture: () => (/* binding */ c),
/* harmony export */   createTransformTexture: () => (/* binding */ m),
/* harmony export */   getBasicGridUniforms: () => (/* binding */ g),
/* harmony export */   getColormapUniforms: () => (/* binding */ p),
/* harmony export */   getCommonUniforms: () => (/* binding */ _),
/* harmony export */   getShadedReliefUniforms: () => (/* binding */ T),
/* harmony export */   getStretchUniforms: () => (/* binding */ A),
/* harmony export */   getUniformLocationInfos: () => (/* binding */ h),
/* harmony export */   setTextures: () => (/* binding */ O),
/* harmony export */   setUniforms: () => (/* binding */ E)
/* harmony export */ });
/* harmony import */ var _chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/vec2f64.js */ "./node_modules/@arcgis/core/chunks/vec2f64.js");
/* harmony import */ var _contextUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./contextUtils.js */ "./node_modules/@arcgis/core/views/webgl/contextUtils.js");
/* harmony import */ var _enums_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./enums.js */ "./node_modules/@arcgis/core/views/webgl/enums.js");
/* harmony import */ var _Texture_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Texture.js */ "./node_modules/@arcgis/core/views/webgl/Texture.js");
/* harmony import */ var _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./TextureDescriptor.js */ "./node_modules/@arcgis/core/views/webgl/TextureDescriptor.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.27/esri/copyright.txt for details.
*/
function c(e,s,c="nearest",m=!1){const l=!(m&&"u8"===s.pixelType),_=l?_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelType.FLOAT:_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelType.UNSIGNED_BYTE,p=null==s.pixels||0===s.pixels.length?null:l?s.getAsRGBAFloat():s.getAsRGBA(),g=e.capabilities.textureFloat?.textureFloatLinear,A=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.TextureDescriptor;return A.width=s.width,A.height=s.height,A.internalFormat=e.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_1__.ContextType.WEBGL2&&l?_enums_js__WEBPACK_IMPORTED_MODULE_2__.SizedPixelFormat.RGBA32F:_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,A.samplingMode=!g||"bilinear"!==c&&"cubic"!==c?_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureSamplingMode.NEAREST:_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureSamplingMode.LINEAR,A.dataType=_,A.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureWrapMode.CLAMP_TO_EDGE,new _Texture_js__WEBPACK_IMPORTED_MODULE_3__.Texture(e,A,p)}function m(e,s){const{spacing:c,offsets:m,coefficients:l,size:[_,p]}=s,g=c[0]>1,A=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.TextureDescriptor;A.width=g?4*_:_,A.height=p,A.internalFormat=e.type===_contextUtils_js__WEBPACK_IMPORTED_MODULE_1__.ContextType.WEBGL2?_enums_js__WEBPACK_IMPORTED_MODULE_2__.SizedPixelFormat.RGBA32F:_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,A.dataType=_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelType.FLOAT,A.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureSamplingMode.NEAREST,A.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureWrapMode.CLAMP_TO_EDGE;const T=new Float32Array(g?_*p*16:2*m.length);if(g&&null!=l)for(let t=0,n=0;t<l.length;t++)T[n++]=l[t],t%3==2&&(T[n++]=1);else for(let t=0;t<p;t++)for(let e=0;e<_;e++){const n=4*(t*_+e),r=2*(e*p+t);T[n]=m[r],T[n+1]=m[r+1],T[n+3]=-1===m[r]?0:1}return new _Texture_js__WEBPACK_IMPORTED_MODULE_3__.Texture(e,A,T)}function l(e,t){const n=new _TextureDescriptor_js__WEBPACK_IMPORTED_MODULE_4__.TextureDescriptor;return n.internalFormat=_enums_js__WEBPACK_IMPORTED_MODULE_2__.PixelFormat.RGBA,n.width=t.length/4,n.height=1,n.samplingMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureSamplingMode.NEAREST,n.wrapMode=_enums_js__WEBPACK_IMPORTED_MODULE_2__.TextureWrapMode.CLAMP_TO_EDGE,new _Texture_js__WEBPACK_IMPORTED_MODULE_3__.Texture(e,n,t)}function _(t,n,r,a=1,i=!0){return{u_flipY:i,u_applyTransform:!!t,u_opacity:a,u_transformSpacing:t?t.spacing:_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__.Z,u_transformGridSize:t?t.size:_chunks_vec2f64_js__WEBPACK_IMPORTED_MODULE_0__.Z,u_targetImageSize:n,u_srcImageSize:r}}function p(e,t){return{u_colormapOffset:t||0,u_colormapMaxIndex:e?e.length/4-1:0}}function g(e,t){return{u_scale:e,u_offset:t}}function A(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function T(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function h(e,t){const n=e.gl,r=t.glName,a=new Map;if(null==r)return a;const i=n.getProgramParameter(r,n.ACTIVE_UNIFORMS);let o;for(let s=0;s<i;s++)o=n.getActiveUniform(r,s),o&&a.set(o.name,{location:n.getUniformLocation(r,o.name),info:o});return a}function E(e,t,n){Object.keys(n).forEach((r=>{const a=t.get(r)||t.get(r+"[0]");a&&x(e,r,n[r],a)}))}function O(e,t,n,r){n.length===r.length&&(r.some((e=>null==e))||n.some((e=>null==e))||n.forEach(((n,a)=>{t.setUniform1i(n,a),e.bindTexture(r[a],a)})))}function x(e,t,n,r){if(null===r||null==n)return!1;const{info:a}=r;switch(a.type){case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT:a.size>1?e.setUniform1fv(t,n):e.setUniform1f(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT_VEC2:e.setUniform2fv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT_VEC3:e.setUniform3fv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT_VEC4:e.setUniform4fv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT_MAT3:e.setUniformMatrix3fv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.FLOAT_MAT4:e.setUniformMatrix4fv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.INT:a.size>1?e.setUniform1iv(t,n):e.setUniform1i(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.BOOL:e.setUniform1i(t,n?1:0);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.INT_VEC2:case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.BOOL_VEC2:e.setUniform2iv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.INT_VEC3:case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.BOOL_VEC3:e.setUniform3iv(t,n);break;case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.INT_VEC4:case _enums_js__WEBPACK_IMPORTED_MODULE_2__.UniformType.BOOL_VEC4:e.setUniform4iv(t,n);break;default:return!1}return!0}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdFZlbmRvcnMtbm9kZV9tb2R1bGVzX2FyY2dpc19jb3JlX3ZpZXdzXzJkX2xheWVyc19LTUxMYXllclZpZXcyRF9qcy5idW5kbGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ2dsQixTQUFTLDRGQUE0RixjQUFjLHVGQUF1RixrRUFBa0UsbUVBQW1FLFFBQVEsb0RBQUMsSUFBSSx5QkFBeUIsa0NBQWtDLFdBQVcsd0NBQXdDLHFLQUFxSyxtREFBbUQsY0FBYyxrQkFBa0IsOEJBQThCLGlDQUFpQyxhQUFhLEdBQUcsa0JBQWtCLG1CQUFtQixTQUFTLG9EQUFDLHlDQUF5QyxvREFBQywyQ0FBMkMsb0RBQUMsOENBQThDLDZDQUE2Qyw4RUFBOEUsNEJBQTRCLDZDQUE2QyxNQUFNLHFCQUFxQixvQkFBb0IsdUJBQXVCLE9BQU8scUJBQXFCLEdBQUcsYUFBYSxPQUFPLGdDQUFnQyxvQkFBb0IsUUFBUSwwQ0FBQyxFQUFFLDBDQUFDLG1CQUFtQixFQUFFLHFFQUFDLElBQUksaUJBQWlCLEVBQUUsUUFBUSxrREFBQyxlQUFlLE9BQU8sdURBQUMsSUFBSSxPQUFPLDhFQUE4RSw4QkFBOEIsRUFBRSw0QkFBNEIsZUFBZSwwQ0FBMEMsc0JBQXNCLGNBQWMsNklBQTZJLDRCQUE0QixzREFBc0Qsa0JBQWtCLEtBQUssa0JBQWtCLGVBQWUseUJBQXlCLEdBQUcsZ0JBQWdCLE1BQU0seUNBQXlDLGtCQUFrQixlQUFlLGlEQUFpRCxvQkFBb0IsUUFBUSxvRUFBQyx1REFBdUQseUVBQUMsMkJBQTJCLHlEQUFDLDRCQUE0QixrQkFBa0Isa0NBQWtDLG9EQUFvRCxTQUFTLGNBQWMsUUFBUSwwRUFBQyxDQUFDLGlGQUFDLElBQUksMEVBQUMsQ0FBQyxpRkFBQyxFQUFFLGtCQUFrQixtSEFBbUgsOEVBQUMsZUFBZSxrRkFBQyxNQUFNLHVIQUF1SCw4RUFBQyxlQUFlLGtGQUFDLE1BQU0sMkdBQTJHLDhF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ZS9sYXllcnMvc3VwcG9ydC9rbWxVdGlscy5qcyIsIndlYnBhY2s6Ly9rbHlrLy4vbm9kZV9tb2R1bGVzL0BhcmNnaXMvY29yZS92aWV3cy8yZC9lbmdpbmUvQml0bWFwLmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzLzJkL2VuZ2luZS9CaXRtYXBDb250YWluZXIuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvZW5naW5lL0ltYWdlcnlCaXRtYXBTb3VyY2UuanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3MvMmQvbGF5ZXJzL0tNTExheWVyVmlldzJELmpzIiwid2VicGFjazovL2tseWsvLi9ub2RlX21vZHVsZXMvQGFyY2dpcy9jb3JlL3ZpZXdzL3N1cHBvcnQvaW1hZ2VSZXByb2plY3Rpb24uanMiLCJ3ZWJwYWNrOi8va2x5ay8uL25vZGVfbW9kdWxlcy9AYXJjZ2lzL2NvcmUvdmlld3Mvd2ViZ2wvcmFzdGVyVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCBlIGZyb21cIi4uLy4uL2NvbmZpZy5qc1wiO2ltcG9ydHtpZCBhcyBvfWZyb21cIi4uLy4uL2tlcm5lbC5qc1wiO2ltcG9ydCB0IGZyb21cIi4uLy4uL1BvcHVwVGVtcGxhdGUuanNcIjtpbXBvcnQgciBmcm9tXCIuLi8uLi9yZXF1ZXN0LmpzXCI7aW1wb3J0e2Nsb25lIGFzIHN9ZnJvbVwiLi4vLi4vY29yZS9sYW5nLmpzXCI7aW1wb3J0e2FkZFF1ZXJ5UGFyYW1ldGVycyBhcyBufWZyb21cIi4uLy4uL2NvcmUvdXJsVXRpbHMuanNcIjtpbXBvcnQgaSBmcm9tXCIuLi8uLi9nZW9tZXRyeS9TcGF0aWFsUmVmZXJlbmNlLmpzXCI7aW1wb3J0e2NyZWF0ZSBhcyBmLE5FR0FUSVZFX0lORklOSVRZIGFzIGEsZXhwYW5kV2l0aEFBQkIgYXMgbCxlcXVhbHMgYXMgdX1mcm9tXCIuLi8uLi9nZW9tZXRyeS9zdXBwb3J0L2FhQm91bmRpbmdCb3guanNcIjtpbXBvcnR7Z2V0Qm91bmRzWFlaIGFzIHB9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvc3VwcG9ydC9ib3VuZHNVdGlscy5qc1wiO2ltcG9ydHtmcm9tSlNPTiBhcyBtfWZyb21cIi4uLy4uL3JlbmRlcmVycy9zdXBwb3J0L2pzb25VdGlscy5qc1wiO2ltcG9ydCB5IGZyb21cIi4uLy4uL3Jlc3Qvc3VwcG9ydC9GZWF0dXJlU2V0LmpzXCI7Y29uc3QgYz17ZXNyaUdlb21ldHJ5UG9pbnQ6XCJwb2ludHNcIixlc3JpR2VvbWV0cnlQb2x5bGluZTpcInBvbHlsaW5lc1wiLGVzcmlHZW9tZXRyeVBvbHlnb246XCJwb2x5Z29uc1wifTtmdW5jdGlvbiBkKGUpe2NvbnN0IG89ZS5mb2xkZXJzfHxbXSx0PW8uc2xpY2UoKSxyPW5ldyBNYXAsbj1uZXcgTWFwLGk9bmV3IE1hcCxmPW5ldyBNYXAsYT1uZXcgTWFwLGw9e2VzcmlHZW9tZXRyeVBvaW50Om4sZXNyaUdlb21ldHJ5UG9seWxpbmU6aSxlc3JpR2VvbWV0cnlQb2x5Z29uOmZ9OyhlLmZlYXR1cmVDb2xsZWN0aW9uJiZlLmZlYXR1cmVDb2xsZWN0aW9uLmxheWVyc3x8W10pLmZvckVhY2goKGU9Pntjb25zdCBvPXMoZSk7by5mZWF0dXJlU2V0LmZlYXR1cmVzPVtdO2NvbnN0IHQ9ZS5mZWF0dXJlU2V0Lmdlb21ldHJ5VHlwZTtyLnNldCh0LG8pO2NvbnN0IGE9ZS5sYXllckRlZmluaXRpb24ub2JqZWN0SWRGaWVsZDtcImVzcmlHZW9tZXRyeVBvaW50XCI9PT10P0cobixhLGUuZmVhdHVyZVNldC5mZWF0dXJlcyk6XCJlc3JpR2VvbWV0cnlQb2x5bGluZVwiPT09dD9HKGksYSxlLmZlYXR1cmVTZXQuZmVhdHVyZXMpOlwiZXNyaUdlb21ldHJ5UG9seWdvblwiPT09dCYmRyhmLGEsZS5mZWF0dXJlU2V0LmZlYXR1cmVzKX0pKSxlLmdyb3VuZE92ZXJsYXlzJiZlLmdyb3VuZE92ZXJsYXlzLmZvckVhY2goKGU9PnthLnNldChlLmlkLGUpfSkpLG8uZm9yRWFjaCgobz0+e28ubmV0d29ya0xpbmtJZHMuZm9yRWFjaCgocj0+e2NvbnN0IHM9UChyLG8uaWQsZS5uZXR3b3JrTGlua3MpO3MmJnQucHVzaChzKX0pKX0pKSx0LmZvckVhY2goKGU9PntpZihlLmZlYXR1cmVJbmZvcyl7ZS5wb2ludHM9cyhyLmdldChcImVzcmlHZW9tZXRyeVBvaW50XCIpKSxlLnBvbHlsaW5lcz1zKHIuZ2V0KFwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIikpLGUucG9seWdvbnM9cyhyLmdldChcImVzcmlHZW9tZXRyeVBvbHlnb25cIikpLGUubWFwSW1hZ2VzPVtdO2Zvcihjb25zdCBvIG9mIGUuZmVhdHVyZUluZm9zKXN3aXRjaChvLnR5cGUpe2Nhc2VcImVzcmlHZW9tZXRyeVBvaW50XCI6Y2FzZVwiZXNyaUdlb21ldHJ5UG9seWxpbmVcIjpjYXNlXCJlc3JpR2VvbWV0cnlQb2x5Z29uXCI6e2NvbnN0IHQ9bFtvLnR5cGVdLmdldChvLmlkKTt0JiZlW2Nbby50eXBlXV0/LmZlYXR1cmVTZXQuZmVhdHVyZXMucHVzaCh0KTticmVha31jYXNlXCJHcm91bmRPdmVybGF5XCI6e2NvbnN0IHQ9YS5nZXQoby5pZCk7dCYmZS5tYXBJbWFnZXMucHVzaCh0KTticmVha319ZS5mdWxsRXh0ZW50PWooW2VdKX19KSk7Y29uc3QgdT1qKHQpO3JldHVybntmb2xkZXJzOm8sc3VibGF5ZXJzOnQsZXh0ZW50OnV9fWZ1bmN0aW9uIGcodCxzLGksZil7Y29uc3QgYT1vJiZvLmZpbmRDcmVkZW50aWFsKHQpO3Q9bih0LHt0b2tlbjphJiZhLnRva2VufSk7Y29uc3QgbD1lLmttbFNlcnZpY2VVcmw7cmV0dXJuIHIobCx7cXVlcnk6e3VybDp0LG1vZGVsOlwic2ltcGxlXCIsZm9sZGVyczpcIlwiLHJlZnJlc2g6MCE9PWl8fHZvaWQgMCxvdXRTUjpKU09OLnN0cmluZ2lmeShzKX0scmVzcG9uc2VUeXBlOlwianNvblwiLHNpZ25hbDpmfSl9ZnVuY3Rpb24gUyhlLG8sdD1udWxsLHI9W10pe2NvbnN0IHM9W10sbj17fSxpPW8uc3VibGF5ZXJzLGY9by5mb2xkZXJzLm1hcCgoZT0+ZS5pZCkpO3JldHVybiBpLmZvckVhY2goKG89Pntjb25zdCBpPW5ldyBlO2lmKHQ/aS5yZWFkKG8sdCk6aS5yZWFkKG8pLHIubGVuZ3RoJiZmLmluY2x1ZGVzKGkuaWQpJiYoaS52aXNpYmxlPXIuaW5jbHVkZXMoaS5pZCkpLG5bby5pZF09aSxudWxsIT1vLnBhcmVudEZvbGRlcklkJiYtMSE9PW8ucGFyZW50Rm9sZGVySWQpe2NvbnN0IGU9bltvLnBhcmVudEZvbGRlcklkXTtlLnN1YmxheWVyc3x8KGUuc3VibGF5ZXJzPVtdKSxlLnN1YmxheWVycz8udW5zaGlmdChpKX1lbHNlIHMudW5zaGlmdChpKX0pKSxzfWZ1bmN0aW9uIEcoZSxvLHQpe3QuZm9yRWFjaCgodD0+e2Uuc2V0KHQuYXR0cmlidXRlc1tvXSx0KX0pKX1mdW5jdGlvbiBoKGUsbyl7bGV0IHQ7cmV0dXJuIG8uc29tZSgobz0+by5pZD09PWUmJih0PW8sITApKSksdH1mdW5jdGlvbiBQKGUsbyx0KXtjb25zdCByPWgoZSx0KTtyZXR1cm4gciYmKHIucGFyZW50Rm9sZGVySWQ9byxyLm5ldHdvcmtMaW5rPXIpLHJ9YXN5bmMgZnVuY3Rpb24gYihlKXtjb25zdCBvPXkuZnJvbUpTT04oZS5mZWF0dXJlU2V0KS5mZWF0dXJlcyxyPWUubGF5ZXJEZWZpbml0aW9uLHM9bShyLmRyYXdpbmdJbmZvLnJlbmRlcmVyKSxuPXQuZnJvbUpTT04oZS5wb3B1cEluZm8pLGk9W107Zm9yKGNvbnN0IHQgb2Ygbyl7Y29uc3QgZT1hd2FpdCBzLmdldFN5bWJvbEFzeW5jKHQpO3Quc3ltYm9sPWUsdC5wb3B1cFRlbXBsYXRlPW4sdC52aXNpYmxlPSEwLGkucHVzaCh0KX1yZXR1cm4gaX1mdW5jdGlvbiBqKGUpe2NvbnN0IG89ZihhKSx0PWYoYSk7Zm9yKGNvbnN0IHIgb2YgZSl7aWYoci5wb2x5Z29ucyYmci5wb2x5Z29ucy5mZWF0dXJlU2V0JiZyLnBvbHlnb25zLmZlYXR1cmVTZXQuZmVhdHVyZXMpZm9yKGNvbnN0IGUgb2Ygci5wb2x5Z29ucy5mZWF0dXJlU2V0LmZlYXR1cmVzKXAobyxlLmdlb21ldHJ5KSxsKHQsbyk7aWYoci5wb2x5bGluZXMmJnIucG9seWxpbmVzLmZlYXR1cmVTZXQmJnIucG9seWxpbmVzLmZlYXR1cmVTZXQuZmVhdHVyZXMpZm9yKGNvbnN0IGUgb2Ygci5wb2x5bGluZXMuZmVhdHVyZVNldC5mZWF0dXJlcylwKG8sZS5nZW9tZXRyeSksbCh0LG8pO2lmKHIucG9pbnRzJiZyLnBvaW50cy5mZWF0dXJlU2V0JiZyLnBvaW50cy5mZWF0dXJlU2V0LmZlYXR1cmVzKWZvcihjb25zdCBlIG9mIHIucG9pbnRzLmZlYXR1cmVTZXQuZmVhdHVyZXMpcChvLGUuZ2VvbWV0cnkpLGwodCxvKTtpZihyLm1hcEltYWdlcylmb3IoY29uc3QgZSBvZiByLm1hcEltYWdlcylwKG8sZS5leHRlbnQpLGwodCxvKX1yZXR1cm4gdSh0LGEpP3ZvaWQgMDp7eG1pbjp0WzBdLHltaW46dFsxXSx6bWluOnRbMl0seG1heDp0WzNdLHltYXg6dFs0XSx6bWF4OnRbNV0sc3BhdGlhbFJlZmVyZW5jZTppLldHUzg0fX1leHBvcnR7aiBhcyBjb21wdXRlRXh0ZW50LGcgYXMgZmV0Y2hTZXJ2aWNlLGIgYXMgZ2V0R3JhcGhpY3MsZCBhcyBwYXJzZUtNTCxTIGFzIHN1YmxheWVyc0Zyb21KU09OfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7YXBwbHlTb21lIGFzIHR9ZnJvbVwiLi4vLi4vLi4vY29yZS9tYXliZS5qc1wiO2ltcG9ydHtjcmVhdGVSZXNvbHZlciBhcyBlLG9uQWJvcnRPclRocm93IGFzIHMsdGhyb3dJZk5vdEFib3J0RXJyb3IgYXMgaX1mcm9tXCIuLi8uLi8uLi9jb3JlL3Byb21pc2VVdGlscy5qc1wiO2ltcG9ydHtnIGFzIHIsaCxyIGFzIG8sbCBhcyB1LG0gYXMgYX1mcm9tXCIuLi8uLi8uLi9jaHVua3MvbWF0My5qc1wiO2ltcG9ydHtjIGFzIG59ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL21hdDNmMzIuanNcIjtpbXBvcnR7ZiBhcyBkfWZyb21cIi4uLy4uLy4uL2NodW5rcy92ZWMyZjMyLmpzXCI7aW1wb3J0e0Rpc3BsYXlPYmplY3QgYXMgbH1mcm9tXCIuL0Rpc3BsYXlPYmplY3QuanNcIjtpbXBvcnQgYyBmcm9tXCIuL0ltYWdlcnlCaXRtYXBTb3VyY2UuanNcIjtpbXBvcnR7Q29udGV4dFR5cGUgYXMgX31mcm9tXCIuLi8uLi93ZWJnbC9jb250ZXh0VXRpbHMuanNcIjtpbXBvcnR7U2l6ZWRQaXhlbEZvcm1hdCBhcyBwLFBpeGVsRm9ybWF0IGFzIG0sVGV4dHVyZVdyYXBNb2RlIGFzIHh9ZnJvbVwiLi4vLi4vd2ViZ2wvZW51bXMuanNcIjtpbXBvcnR7VGV4dHVyZSBhcyBnfWZyb21cIi4uLy4uL3dlYmdsL1RleHR1cmUuanNcIjtpbXBvcnR7VGV4dHVyZURlc2NyaXB0b3IgYXMgZn1mcm9tXCIuLi8uLi93ZWJnbC9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2Z1bmN0aW9uIHcodCl7cmV0dXJuIHQmJlwicmVuZGVyXCJpbiB0fWZ1bmN0aW9uIGIodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3JldHVybiBlLndpZHRoPXQud2lkdGgsZS5oZWlnaHQ9dC5oZWlnaHQsdC5yZW5kZXIoZS5nZXRDb250ZXh0KFwiMmRcIikpLGV9ZnVuY3Rpb24gdihlKXtyZXR1cm4gdyhlKT9lIGluc3RhbmNlb2YgYz90KGUuZ2V0UmVuZGVyZWRSYXN0ZXJQaXhlbHMoKSwodD0+dC5yZW5kZXJlZFJhc3RlclBpeGVscykpOmIoZSk6ZX1jbGFzcyBUIGV4dGVuZHMgbHtjb25zdHJ1Y3Rvcih0PW51bGwsZT0hMSl7c3VwZXIoKSx0aGlzLmJsZW5kRnVuY3Rpb249XCJzdGFuZGFyZFwiLHRoaXMuX3NvdXJjZVdpZHRoPTAsdGhpcy5fc291cmNlSGVpZ2h0PTAsdGhpcy5fdGV4dHVyZUludmFsaWRhdGVkPSExLHRoaXMuX3RleHR1cmU9bnVsbCx0aGlzLnN0ZW5jaWxSZWY9MCx0aGlzLmNvb3JkU2NhbGU9WzEsMV0sdGhpcy5faGVpZ2h0PXZvaWQgMCx0aGlzLnBpeGVsUmF0aW89MSx0aGlzLnJlc29sdXRpb249MCx0aGlzLnJvdGF0aW9uPTAsdGhpcy5fc291cmNlPW51bGwsdGhpcy5fd2lkdGg9dm9pZCAwLHRoaXMueD0wLHRoaXMueT0wLHRoaXMuaW1tdXRhYmxlPWUsdGhpcy5zb3VyY2U9dCx0aGlzLnJlcXVlc3RSZW5kZXI9dGhpcy5yZXF1ZXN0UmVuZGVyLmJpbmQodGhpcyl9ZGVzdHJveSgpe3RoaXMuX3RleHR1cmUmJih0aGlzLl90ZXh0dXJlLmRpc3Bvc2UoKSx0aGlzLl90ZXh0dXJlPW51bGwpLG51bGwhPXRoaXMuX3VwbG9hZFN0YXR1cyYmKHRoaXMuX3VwbG9hZFN0YXR1cy5jb250cm9sbGVyLmFib3J0KCksdGhpcy5fdXBsb2FkU3RhdHVzPW51bGwpfWdldCBpc1NvdXJjZVNjYWxlZCgpe3JldHVybiB0aGlzLndpZHRoIT09dGhpcy5fc291cmNlV2lkdGh8fHRoaXMuaGVpZ2h0IT09dGhpcy5fc291cmNlSGVpZ2h0fWdldCBoZWlnaHQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5faGVpZ2h0P3RoaXMuX2hlaWdodDp0aGlzLl9zb3VyY2VIZWlnaHR9c2V0IGhlaWdodCh0KXt0aGlzLl9oZWlnaHQ9dH1nZXQgc291cmNlKCl7cmV0dXJuIHRoaXMuX3NvdXJjZX1zZXQgc291cmNlKHQpe251bGw9PXQmJm51bGw9PXRoaXMuX3NvdXJjZXx8KHRoaXMuX3NvdXJjZT10LHRoaXMuaW52YWxpZGF0ZVRleHR1cmUoKSx0aGlzLnJlcXVlc3RSZW5kZXIoKSl9Z2V0IHdpZHRoKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMuX3dpZHRoP3RoaXMuX3dpZHRoOnRoaXMuX3NvdXJjZVdpZHRofXNldCB3aWR0aCh0KXt0aGlzLl93aWR0aD10fWJlZm9yZVJlbmRlcih0KXtzdXBlci5iZWZvcmVSZW5kZXIodCksdGhpcy51cGRhdGVUZXh0dXJlKHQpfWFzeW5jIHNldFNvdXJjZUFzeW5jKHQsaSl7bnVsbCE9dGhpcy5fdXBsb2FkU3RhdHVzJiZ0aGlzLl91cGxvYWRTdGF0dXMuY29udHJvbGxlci5hYm9ydCgpO2NvbnN0IHI9bmV3IEFib3J0Q29udHJvbGxlcixoPWUoKTtyZXR1cm4gcyhpLCgoKT0+ci5hYm9ydCgpKSkscyhyLCh0PT5oLnJlamVjdCh0KSkpLHRoaXMuX3VwbG9hZFN0YXR1cz17Y29udHJvbGxlcjpyLHJlc29sdmVyOmh9LHRoaXMuc291cmNlPXQsaC5wcm9taXNlfWludmFsaWRhdGVUZXh0dXJlKCl7dGhpcy5fdGV4dHVyZUludmFsaWRhdGVkfHwodGhpcy5fdGV4dHVyZUludmFsaWRhdGVkPSEwLHRoaXMuX3NvdXJjZSBpbnN0YW5jZW9mIEhUTUxJbWFnZUVsZW1lbnQ/KHRoaXMuX3NvdXJjZUhlaWdodD10aGlzLl9zb3VyY2UubmF0dXJhbEhlaWdodCx0aGlzLl9zb3VyY2VXaWR0aD10aGlzLl9zb3VyY2UubmF0dXJhbFdpZHRoKTp0aGlzLl9zb3VyY2UmJih0aGlzLl9zb3VyY2VIZWlnaHQ9dGhpcy5fc291cmNlLmhlaWdodCx0aGlzLl9zb3VyY2VXaWR0aD10aGlzLl9zb3VyY2Uud2lkdGgpKX11cGRhdGVUcmFuc2l0aW9uUHJvcGVydGllcyh0LGUpe3Q+PTY0JiYodGhpcy5mYWRlVHJhbnNpdGlvbkVuYWJsZWQ9ITEsdGhpcy5pbkZhZGVUcmFuc2l0aW9uPSExKSxzdXBlci51cGRhdGVUcmFuc2l0aW9uUHJvcGVydGllcyh0LGUpfXNldFRyYW5zZm9ybSh0KXtjb25zdCBlPXIodGhpcy50cmFuc2Zvcm1zLmR2cyksW3MsaV09dC50b1NjcmVlbk5vUm90YXRpb24oWzAsMF0sW3RoaXMueCx0aGlzLnldKSxuPXRoaXMucmVzb2x1dGlvbi90aGlzLnBpeGVsUmF0aW8vdC5yZXNvbHV0aW9uLGw9bip0aGlzLndpZHRoLGM9bip0aGlzLmhlaWdodCxfPU1hdGguUEkqdGhpcy5yb3RhdGlvbi8xODA7aChlLGUsZChzLGkpKSxoKGUsZSxkKGwvMixjLzIpKSxvKGUsZSwtXyksaChlLGUsZCgtbC8yLC1jLzIpKSx1KGUsZSxkKGwsYykpLGEodGhpcy50cmFuc2Zvcm1zLmR2cyx0LmRpc3BsYXlWaWV3TWF0MyxlKX1zZXRTYW1wbGluZ1Byb2ZpbGUodCl7dGhpcy5fdGV4dHVyZSYmKHQubWlwcyYmIXRoaXMuX3RleHR1cmUuZGVzY3JpcHRvci5oYXNNaXBtYXAmJnRoaXMuX3RleHR1cmUuZ2VuZXJhdGVNaXBtYXAoKSx0aGlzLl90ZXh0dXJlLnNldFNhbXBsaW5nTW9kZSh0LnNhbXBsaW5nTW9kZSkpfWJpbmQodCxlKXt0aGlzLl90ZXh0dXJlJiZ0LmJpbmRUZXh0dXJlKHRoaXMuX3RleHR1cmUsZSl9YXN5bmMgdXBkYXRlVGV4dHVyZSh7Y29udGV4dDp0LHBhaW50ZXI6ZX0pe2lmKCF0aGlzLl90ZXh0dXJlSW52YWxpZGF0ZWQpcmV0dXJuO2lmKHRoaXMuX3RleHR1cmVJbnZhbGlkYXRlZD0hMSx0aGlzLl90ZXh0dXJlfHwodGhpcy5fdGV4dHVyZT10aGlzLl9jcmVhdGVUZXh0dXJlKHQpKSwhdGhpcy5zb3VyY2UpcmV0dXJuIHZvaWQgdGhpcy5fdGV4dHVyZS5zZXREYXRhKG51bGwpO3RoaXMuX3RleHR1cmUucmVzaXplKHRoaXMuX3NvdXJjZVdpZHRoLHRoaXMuX3NvdXJjZUhlaWdodCk7Y29uc3Qgcz12KHRoaXMuc291cmNlKTt0cnl7aWYobnVsbCE9dGhpcy5fdXBsb2FkU3RhdHVzKXtjb25zdHtjb250cm9sbGVyOnQscmVzb2x2ZXI6aX09dGhpcy5fdXBsb2FkU3RhdHVzLHI9e3NpZ25hbDp0LnNpZ25hbH0se3dpZHRoOmgsaGVpZ2h0Om99PXRoaXMsdT10aGlzLl90ZXh0dXJlLGE9ZS50ZXh0dXJlVXBsb2FkTWFuYWdlcjthd2FpdCBhLmVucXVldWVUZXh0dXJlVXBkYXRlKHtkYXRhOnMsdGV4dHVyZTp1LHdpZHRoOmgsaGVpZ2h0Om99LHIpLGkucmVzb2x2ZSgpLHRoaXMuX3VwbG9hZFN0YXR1cz1udWxsfWVsc2UgdGhpcy5fdGV4dHVyZS5zZXREYXRhKHMpO3RoaXMucmVhZHkoKX1jYXRjaChyKXtpKHIpfX1vbkRldGFjaCgpe3RoaXMuZGVzdHJveSgpfV9jcmVhdGVUcmFuc2Zvcm1zKCl7cmV0dXJue2R2czpuKCl9fV9jcmVhdGVUZXh0dXJlKHQpe2NvbnN0IGU9dGhpcy5pbW11dGFibGUmJnQudHlwZT09PV8uV0VCR0wyLHM9bmV3IGY7cmV0dXJuIHMuaW50ZXJuYWxGb3JtYXQ9ZT9wLlJHQkE4Om0uUkdCQSxzLndyYXBNb2RlPXguQ0xBTVBfVE9fRURHRSxzLmlzSW1tdXRhYmxlPWUscy53aWR0aD10aGlzLl9zb3VyY2VXaWR0aCxzLmhlaWdodD10aGlzLl9zb3VyY2VIZWlnaHQsbmV3IGcodCxzKX19ZXhwb3J0e1QgYXMgQml0bWFwLHcgYXMgaXNJbWFnZVNvdXJjZSxiIGFzIHJhc3Rlcml6ZX07XG4iLCIvKlxuQWxsIG1hdGVyaWFsIGNvcHlyaWdodCBFU1JJLCBBbGwgUmlnaHRzIFJlc2VydmVkLCB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cblNlZSBodHRwczovL2pzLmFyY2dpcy5jb20vNC4yNy9lc3JpL2NvcHlyaWdodC50eHQgZm9yIGRldGFpbHMuXG4qL1xuaW1wb3J0e2JydXNoZXMgYXMgZX1mcm9tXCIuL2JydXNoZXMuanNcIjtpbXBvcnR7V0dMRHJhd1BoYXNlIGFzIHN9ZnJvbVwiLi93ZWJnbC9lbnVtcy5qc1wiO2ltcG9ydCByIGZyb21cIi4vd2ViZ2wvV0dMQ29udGFpbmVyLmpzXCI7Y2xhc3MgYSBleHRlbmRzIHJ7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2hhc0Nyb3NzZmFkZT0hMX1nZXQgcmVxdWlyZXNEZWRpY2F0ZWRGQk8oKXtyZXR1cm4gdGhpcy5faGFzQ3Jvc3NmYWRlfWJlZm9yZVJlbmRlcihlKXtzdXBlci5iZWZvcmVSZW5kZXIoZSksdGhpcy5fbWFuYWdlRmFkZSgpfXByZXBhcmVSZW5kZXJQYXNzZXMocil7Y29uc3QgYT1yLnJlZ2lzdGVyUmVuZGVyUGFzcyh7bmFtZTpcImJpdG1hcFwiLGJydXNoZXM6W2UuYml0bWFwXSx0YXJnZXQ6KCk9PnRoaXMuY2hpbGRyZW4sZHJhd1BoYXNlOnMuTUFQfSk7cmV0dXJuWy4uLnN1cGVyLnByZXBhcmVSZW5kZXJQYXNzZXMociksYV19X21hbmFnZUZhZGUoKXt0aGlzLmNoaWxkcmVuLnJlZHVjZSgoKGUscyk9PmUrKHMuaW5GYWRlVHJhbnNpdGlvbj8xOjApKSwwKT49Mj8odGhpcy5jaGlsZHJlbi5mb3JFYWNoKChlPT5lLmJsZW5kRnVuY3Rpb249XCJhZGRpdGl2ZVwiKSksdGhpcy5faGFzQ3Jvc3NmYWRlPSEwKToodGhpcy5jaGlsZHJlbi5mb3JFYWNoKChlPT5lLmJsZW5kRnVuY3Rpb249XCJzdGFuZGFyZFwiKSksdGhpcy5faGFzQ3Jvc3NmYWRlPSExKX19ZXhwb3J0e2EgYXMgQml0bWFwQ29udGFpbmVyfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5jbGFzcyBse2NvbnN0cnVjdG9yKGwsZSx0KXt0aGlzLnBpeGVsQmxvY2s9bCx0aGlzLmV4dGVudD1lLHRoaXMub3JpZ2luYWxQaXhlbEJsb2NrPXR9Z2V0IHdpZHRoKCl7cmV0dXJuIG51bGwhPXRoaXMucGl4ZWxCbG9jaz90aGlzLnBpeGVsQmxvY2sud2lkdGg6MH1nZXQgaGVpZ2h0KCl7cmV0dXJuIG51bGwhPXRoaXMucGl4ZWxCbG9jaz90aGlzLnBpeGVsQmxvY2suaGVpZ2h0OjB9cmVuZGVyKGwpe2NvbnN0IGU9dGhpcy5waXhlbEJsb2NrO2lmKG51bGw9PWUpcmV0dXJuO2NvbnN0IHQ9dGhpcy5maWx0ZXIoe2V4dGVudDp0aGlzLmV4dGVudCxwaXhlbEJsb2NrOnRoaXMub3JpZ2luYWxQaXhlbEJsb2NrPz9lfSk7aWYobnVsbD09dC5waXhlbEJsb2NrKXJldHVybjt0LnBpeGVsQmxvY2subWFza0lzQWxwaGEmJih0LnBpeGVsQmxvY2sucHJlbXVsdGlwbHlBbHBoYT0hMCk7Y29uc3QgaT10LnBpeGVsQmxvY2suZ2V0QXNSR0JBKCksaD1sLmNyZWF0ZUltYWdlRGF0YSh0LnBpeGVsQmxvY2sud2lkdGgsdC5waXhlbEJsb2NrLmhlaWdodCk7aC5kYXRhLnNldChpKSxsLnB1dEltYWdlRGF0YShoLDAsMCl9Z2V0UmVuZGVyZWRSYXN0ZXJQaXhlbHMoKXtjb25zdCBsPXRoaXMuZmlsdGVyKHtleHRlbnQ6dGhpcy5leHRlbnQscGl4ZWxCbG9jazp0aGlzLnBpeGVsQmxvY2t9KTtyZXR1cm4gbnVsbD09bC5waXhlbEJsb2NrP251bGw6KGwucGl4ZWxCbG9jay5tYXNrSXNBbHBoYSYmKGwucGl4ZWxCbG9jay5wcmVtdWx0aXBseUFscGhhPSEwKSx7d2lkdGg6bC5waXhlbEJsb2NrLndpZHRoLGhlaWdodDpsLnBpeGVsQmxvY2suaGVpZ2h0LHJlbmRlcmVkUmFzdGVyUGl4ZWxzOm5ldyBVaW50OEFycmF5KGwucGl4ZWxCbG9jay5nZXRBc1JHQkEoKS5idWZmZXIpfSl9fWV4cG9ydHtsIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydHtfIGFzIGV9ZnJvbVwiLi4vLi4vLi4vY2h1bmtzL3RzbGliLmVzNi5qc1wiO2ltcG9ydHt2ZXJzaW9uIGFzIGl9ZnJvbVwiLi4vLi4vLi4va2VybmVsLmpzXCI7aW1wb3J0IHQgZnJvbVwiLi4vLi4vLi4vY29yZS9Db2xsZWN0aW9uLmpzXCI7aW1wb3J0e2Fib3J0TWF5YmUgYXMgcyxkZXN0cm95TWF5YmUgYXMgYX1mcm9tXCIuLi8uLi8uLi9jb3JlL21heWJlLmpzXCI7aW1wb3J0e3dhdGNoIGFzIG99ZnJvbVwiLi4vLi4vLi4vY29yZS9yZWFjdGl2ZVV0aWxzLmpzXCI7aW1wb3J0e3F1ZXJ5VG9PYmplY3QgYXMgbCxvYmplY3RUb1F1ZXJ5IGFzIHJ9ZnJvbVwiLi4vLi4vLi4vY29yZS91cmxVdGlscy5qc1wiO2ltcG9ydHtwcm9wZXJ0eSBhcyBufWZyb21cIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2RlY29yYXRvcnMvcHJvcGVydHkuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYWNjZXNzb3JTdXBwb3J0L2Vuc3VyZVR5cGUuanNcIjtpbXBvcnRcIi4uLy4uLy4uL2NvcmUvYXJyYXlVdGlscy5qc1wiO2ltcG9ydFwiLi4vLi4vLi4vY29yZS9oYXMuanNcIjtpbXBvcnR7c3ViY2xhc3MgYXMgaH1mcm9tXCIuLi8uLi8uLi9jb3JlL2FjY2Vzc29yU3VwcG9ydC9kZWNvcmF0b3JzL3N1YmNsYXNzLmpzXCI7aW1wb3J0IHAgZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvRXh0ZW50LmpzXCI7aW1wb3J0e2xvYWQgYXMgbSxwcm9qZWN0IGFzIGN9ZnJvbVwiLi4vLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydCBkIGZyb21cIi4uLy4uLy4uL2dlb21ldHJ5L1NwYXRpYWxSZWZlcmVuY2UuanNcIjtpbXBvcnR7Z2V0R3JhcGhpY3MgYXMgeSxmZXRjaFNlcnZpY2UgYXMgZyxwYXJzZUtNTCBhcyB3fWZyb21cIi4uLy4uLy4uL2xheWVycy9zdXBwb3J0L2ttbFV0aWxzLmpzXCI7aW1wb3J0e3BhcnNlVXJsIGFzIHV9ZnJvbVwiLi4vLi4vLi4vcmVzdC91dGlscy5qc1wiO2ltcG9ydHtHcmFwaGljc0NvbGxlY3Rpb24gYXMgX31mcm9tXCIuLi8uLi8uLi9zdXBwb3J0L0dyYXBoaWNzQ29sbGVjdGlvbi5qc1wiO2ltcG9ydHtCaXRtYXAgYXMgYn1mcm9tXCIuLi9lbmdpbmUvQml0bWFwLmpzXCI7aW1wb3J0e0JpdG1hcENvbnRhaW5lciBhcyBWfWZyb21cIi4uL2VuZ2luZS9CaXRtYXBDb250YWluZXIuanNcIjtpbXBvcnR7TGF5ZXJWaWV3MkRNaXhpbiBhcyBmfWZyb21cIi4vTGF5ZXJWaWV3MkQuanNcIjtpbXBvcnQgdiBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNDb250YWluZXIuanNcIjtpbXBvcnQgUyBmcm9tXCIuL2dyYXBoaWNzL0dyYXBoaWNzVmlldzJELmpzXCI7aW1wb3J0IEkgZnJvbVwiLi4vLi4vbGF5ZXJzL0xheWVyVmlldy5qc1wiO2ltcG9ydHtJbWFnZVJlcHJvamVjdG9yIGFzIHh9ZnJvbVwiLi4vLi4vc3VwcG9ydC9pbWFnZVJlcHJvamVjdGlvbi5qc1wiO2NsYXNzIEN7Y29uc3RydWN0b3IoKXt0aGlzLmFsbFN1YmxheWVycz1uZXcgTWFwLHRoaXMuYWxsUG9pbnRzPVtdLHRoaXMuYWxsUG9seWxpbmVzPVtdLHRoaXMuYWxsUG9seWdvbnM9W10sdGhpcy5hbGxNYXBJbWFnZXM9W119fWxldCBqPWNsYXNzIGV4dGVuZHMoZihJKSl7Y29uc3RydWN0b3IoKXtzdXBlciguLi5hcmd1bWVudHMpLHRoaXMuX2JpdG1hcEluZGV4PW5ldyBNYXAsdGhpcy5fbWFwSW1hZ2VDb250YWluZXI9bmV3IFYsdGhpcy5fa21sVmlzdWFsRGF0YT1uZXcgQyx0aGlzLl9mZXRjaENvbnRyb2xsZXI9bnVsbCx0aGlzLmFsbFZpc2libGVQb2ludHM9bmV3IF8sdGhpcy5hbGxWaXNpYmxlUG9seWxpbmVzPW5ldyBfLHRoaXMuYWxsVmlzaWJsZVBvbHlnb25zPW5ldyBfLHRoaXMuYWxsVmlzaWJsZU1hcEltYWdlcz1uZXcgdH1hc3luYyBoaXRUZXN0KGUsaSl7Y29uc3QgdD10aGlzLmxheWVyO3JldHVyblt0aGlzLl9wb2ludHNWaWV3Py5oaXRUZXN0KGUpLHRoaXMuX3BvbHlsaW5lc1ZpZXc/LmhpdFRlc3QoZSksdGhpcy5fcG9seWdvbnNWaWV3Py5oaXRUZXN0KGUpXS5mbGF0KCkuZmlsdGVyKEJvb2xlYW4pLm1hcCgoaT0+KGkubGF5ZXI9dCxpLnNvdXJjZUxheWVyPXQse3R5cGU6XCJncmFwaGljXCIsZ3JhcGhpYzppLGxheWVyOnQsbWFwUG9pbnQ6ZX0pKSl9dXBkYXRlKGUpe3RoaXMuX3BvbHlnb25zVmlldyYmdGhpcy5fcG9seWdvbnNWaWV3LnByb2Nlc3NVcGRhdGUoZSksdGhpcy5fcG9seWxpbmVzVmlldyYmdGhpcy5fcG9seWxpbmVzVmlldy5wcm9jZXNzVXBkYXRlKGUpLHRoaXMuX3BvaW50c1ZpZXcmJnRoaXMuX3BvaW50c1ZpZXcucHJvY2Vzc1VwZGF0ZShlKX1hdHRhY2goKXt0aGlzLl9mZXRjaENvbnRyb2xsZXI9bmV3IEFib3J0Q29udHJvbGxlcix0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9tYXBJbWFnZUNvbnRhaW5lciksdGhpcy5fcG9seWdvbnNWaWV3PW5ldyBTKHt2aWV3OnRoaXMudmlldyxncmFwaGljczp0aGlzLmFsbFZpc2libGVQb2x5Z29ucyxyZXF1ZXN0VXBkYXRlQ2FsbGJhY2s6KCk9PnRoaXMucmVxdWVzdFVwZGF0ZSgpLGNvbnRhaW5lcjpuZXcgdih0aGlzLnZpZXcuZmVhdHVyZXNUaWxpbmdTY2hlbWUpfSksdGhpcy5jb250YWluZXIuYWRkQ2hpbGQodGhpcy5fcG9seWdvbnNWaWV3LmNvbnRhaW5lciksdGhpcy5fcG9seWxpbmVzVmlldz1uZXcgUyh7dmlldzp0aGlzLnZpZXcsZ3JhcGhpY3M6dGhpcy5hbGxWaXNpYmxlUG9seWxpbmVzLHJlcXVlc3RVcGRhdGVDYWxsYmFjazooKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCksY29udGFpbmVyOm5ldyB2KHRoaXMudmlldy5mZWF0dXJlc1RpbGluZ1NjaGVtZSl9KSx0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9wb2x5bGluZXNWaWV3LmNvbnRhaW5lciksdGhpcy5fcG9pbnRzVmlldz1uZXcgUyh7dmlldzp0aGlzLnZpZXcsZ3JhcGhpY3M6dGhpcy5hbGxWaXNpYmxlUG9pbnRzLHJlcXVlc3RVcGRhdGVDYWxsYmFjazooKT0+dGhpcy5yZXF1ZXN0VXBkYXRlKCksY29udGFpbmVyOm5ldyB2KHRoaXMudmlldy5mZWF0dXJlc1RpbGluZ1NjaGVtZSl9KSx0aGlzLmNvbnRhaW5lci5hZGRDaGlsZCh0aGlzLl9wb2ludHNWaWV3LmNvbnRhaW5lciksdGhpcy5hZGRBdHRhY2hIYW5kbGVzKFt0aGlzLmFsbFZpc2libGVNYXBJbWFnZXMub24oXCJjaGFuZ2VcIiwoZT0+e2UuYWRkZWQuZm9yRWFjaCgoZT0+dGhpcy5fYWRkTWFwSW1hZ2UoZSkpKSxlLnJlbW92ZWQuZm9yRWFjaCgoZT0+dGhpcy5fcmVtb3ZlTWFwSW1hZ2UoZSkpKX0pKSxvKCgoKT0+dGhpcy5sYXllci52aXNpYmxlU3VibGF5ZXJzKSwoZT0+e2Zvcihjb25zdFtpLHRdb2YgdGhpcy5fa21sVmlzdWFsRGF0YS5hbGxTdWJsYXllcnMpdC52aXNpYmlsaXR5PTA7Zm9yKGNvbnN0IGkgb2YgZSl7Y29uc3QgZT10aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFN1YmxheWVycy5nZXQoaS5pZCk7ZSYmKGUudmlzaWJpbGl0eT0xKX10aGlzLl9yZWZyZXNoQ29sbGVjdGlvbnMoKX0pKV0pLHRoaXMudXBkYXRpbmdIYW5kbGVzLmFkZFByb21pc2UodGhpcy5fZmV0Y2hTZXJ2aWNlKHRoaXMuX2ZldGNoQ29udHJvbGxlci5zaWduYWwpKSx0aGlzLl9pbWFnZVJlcHJvamVjdG9yPW5ldyB4fWRldGFjaCgpe3RoaXMuX2ZldGNoQ29udHJvbGxlcj1zKHRoaXMuX2ZldGNoQ29udHJvbGxlciksdGhpcy5fbWFwSW1hZ2VDb250YWluZXIucmVtb3ZlQWxsQ2hpbGRyZW4oKSx0aGlzLmNvbnRhaW5lci5yZW1vdmVBbGxDaGlsZHJlbigpLHRoaXMuX2JpdG1hcEluZGV4LmNsZWFyKCksdGhpcy5fcG9seWdvbnNWaWV3PWEodGhpcy5fcG9seWdvbnNWaWV3KSx0aGlzLl9wb2x5bGluZXNWaWV3PWEodGhpcy5fcG9seWxpbmVzVmlldyksdGhpcy5fcG9pbnRzVmlldz1hKHRoaXMuX3BvaW50c1ZpZXcpLHRoaXMuX2ltYWdlUmVwcm9qZWN0b3I9YSh0aGlzLl9pbWFnZVJlcHJvamVjdG9yKX1tb3ZlU3RhcnQoKXt9dmlld0NoYW5nZSgpe3RoaXMuX3BvbHlnb25zVmlldy52aWV3Q2hhbmdlKCksdGhpcy5fcG9seWxpbmVzVmlldy52aWV3Q2hhbmdlKCksdGhpcy5fcG9pbnRzVmlldy52aWV3Q2hhbmdlKCl9bW92ZUVuZCgpe31pc1VwZGF0aW5nKCl7cmV0dXJuIHRoaXMuX3BvaW50c1ZpZXcudXBkYXRpbmd8fHRoaXMuX3BvbHlnb25zVmlldy51cGRhdGluZ3x8dGhpcy5fcG9seWxpbmVzVmlldy51cGRhdGluZ31fYWRkTWFwSW1hZ2UoZSl7KHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlPy5pc1dHUzg0fHx0aGlzLnZpZXcuc3BhdGlhbFJlZmVyZW5jZT8uaXNXZWJNZXJjYXRvcikmJnRoaXMuX2ltYWdlUmVwcm9qZWN0b3IubG9hZEFuZFJlcHJvamVjdEJpdG1hcERhdGEoZS5ocmVmLHAuZnJvbUpTT04oZS5leHRlbnQpLHRoaXMudmlldy5zcGF0aWFsUmVmZXJlbmNlKS50aGVuKChpPT57Y29uc3QgdD1uZXcgYihpLmJpdG1hcERhdGEpO3QueD1pLmV4dGVudC54bWluLHQueT1pLmV4dGVudC55bWF4LHQucmVzb2x1dGlvbj1pLmV4dGVudC53aWR0aC9pLmJpdG1hcERhdGEud2lkdGgsdC5yb3RhdGlvbj1lLnJvdGF0aW9uLHRoaXMuX21hcEltYWdlQ29udGFpbmVyLmFkZENoaWxkKHQpLHRoaXMuX2JpdG1hcEluZGV4LnNldChlLHQpfSkpfWFzeW5jIF9nZXRWaWV3RGVwZW5kZW50VXJsKGUsdCl7Y29uc3R7dmlld0Zvcm1hdDpzLHZpZXdCb3VuZFNjYWxlOmEsaHR0cFF1ZXJ5Om99PWU7aWYobnVsbCE9cyl7aWYobnVsbD09dCl0aHJvdyBuZXcgRXJyb3IoXCJMb2FkaW5nIHRoaXMgbmV0d29yayBsaW5rIHJlcXVpcmVzIGEgdmlldyBzdGF0ZS5cIik7bGV0IG47aWYoYXdhaXQgbSgpLG51bGwhPWEmJjEhPT1hKXtjb25zdCBlPW5ldyBwKHQuZXh0ZW50KTtlLmV4cGFuZChhKSxuPWV9ZWxzZSBuPXQuZXh0ZW50O249YyhuLGQuV0dTODQpO2NvbnN0IGg9YyhuLGQuV2ViTWVyY2F0b3IpLHk9bi54bWluLGc9bi54bWF4LHc9bi55bWluLF89bi55bWF4LGI9dC5zaXplWzBdKnQucGl4ZWxSYXRpbyxWPXQuc2l6ZVsxXSp0LnBpeGVsUmF0aW8sZj1NYXRoLm1heChoLndpZHRoLGguaGVpZ2h0KSx2PXtcIltiYm94V2VzdF1cIjp5LnRvU3RyaW5nKCksXCJbYmJveEVhc3RdXCI6Zy50b1N0cmluZygpLFwiW2Jib3hTb3V0aF1cIjp3LnRvU3RyaW5nKCksXCJbYmJveE5vcnRoXVwiOl8udG9TdHJpbmcoKSxcIltsb29rYXRMb25dXCI6bi5jZW50ZXIueC50b1N0cmluZygpLFwiW2xvb2thdExhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbbG9va2F0UmFuZ2VdXCI6Zi50b1N0cmluZygpLFwiW2xvb2thdFRpbHRdXCI6XCIwXCIsXCJbbG9va2F0SGVhZGluZ11cIjp0LnJvdGF0aW9uLnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkxvbl1cIjpuLmNlbnRlci54LnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkxhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbbG9va2F0VGVycmFpbkFsdF1cIjpcIjBcIixcIltjYW1lcmFMb25dXCI6bi5jZW50ZXIueC50b1N0cmluZygpLFwiW2NhbWVyYUxhdF1cIjpuLmNlbnRlci55LnRvU3RyaW5nKCksXCJbY2FtZXJhQWx0XVwiOmYudG9TdHJpbmcoKSxcIltob3JpekZvdl1cIjpcIjYwXCIsXCJbdmVydEZvdl1cIjpcIjYwXCIsXCJbaG9yaXpQaXhlbHNdXCI6Yi50b1N0cmluZygpLFwiW3ZlcnRQaXhlbHNdXCI6Vi50b1N0cmluZygpLFwiW3RlcnJhaW5FbmFibGVkXVwiOlwiMFwiLFwiW2NsaWVudFZlcnNpb25dXCI6aSxcIltrbWxWZXJzaW9uXVwiOlwiMi4yXCIsXCJbY2xpZW50TmFtZV1cIjpcIkFyY0dJUyBBUEkgZm9yIEphdmFTY3JpcHRcIixcIltsYW5ndWFnZV1cIjpcImVuLVVTXCJ9LFM9ZT0+e2Zvcihjb25zdCBpIGluIGUpe2xldCB0O2Zvcih0IGluIHYpZVtpXT1lW2ldLnJlcGxhY2UodCx2W3RdKX19LEk9bChzKTtTKEkpO2xldCB4PXt9O251bGwhPW8mJih4PWwobyksUyh4KSk7Y29uc3QgQz11KGUuaHJlZik7Qy5xdWVyeT17Li4uQy5xdWVyeSwuLi5JLC4uLnh9O3JldHVybmAke0MucGF0aH0/JHtyKEkpfWB9cmV0dXJuIGUuaHJlZn1hc3luYyBfZmV0Y2hTZXJ2aWNlKGUpe2NvbnN0IGk9bmV3IEM7YXdhaXQgdGhpcy5fbG9hZFZpc3VhbERhdGEodGhpcy5sYXllci51cmwsaSxlKSx0aGlzLl9rbWxWaXN1YWxEYXRhPWksdGhpcy5fcmVmcmVzaENvbGxlY3Rpb25zKCl9X3JlZnJlc2hDb2xsZWN0aW9ucygpe3RoaXMuYWxsVmlzaWJsZVBvaW50cy5yZW1vdmVBbGwoKSx0aGlzLmFsbFZpc2libGVQb2x5bGluZXMucmVtb3ZlQWxsKCksdGhpcy5hbGxWaXNpYmxlUG9seWdvbnMucmVtb3ZlQWxsKCksdGhpcy5hbGxWaXNpYmxlTWFwSW1hZ2VzLnJlbW92ZUFsbCgpLHRoaXMuYWxsVmlzaWJsZVBvaW50cy5hZGRNYW55KHRoaXMuX2ttbFZpc3VhbERhdGEuYWxsUG9pbnRzLmZpbHRlcigoZT0+dGhpcy5faXNTdWJsYXllclZpc2libGUoZS5zdWJsYXllcklkKSkpLm1hcCgoKHtpdGVtOmV9KT0+ZSkpKSx0aGlzLmFsbFZpc2libGVQb2x5bGluZXMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFBvbHlsaW5lcy5maWx0ZXIoKGU9PnRoaXMuX2lzU3VibGF5ZXJWaXNpYmxlKGUuc3VibGF5ZXJJZCkpKS5tYXAoKCh7aXRlbTplfSk9PmUpKSksdGhpcy5hbGxWaXNpYmxlUG9seWdvbnMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbFBvbHlnb25zLmZpbHRlcigoZT0+dGhpcy5faXNTdWJsYXllclZpc2libGUoZS5zdWJsYXllcklkKSkpLm1hcCgoKHtpdGVtOmV9KT0+ZSkpKSx0aGlzLmFsbFZpc2libGVNYXBJbWFnZXMuYWRkTWFueSh0aGlzLl9rbWxWaXN1YWxEYXRhLmFsbE1hcEltYWdlcy5maWx0ZXIoKGU9PnRoaXMuX2lzU3VibGF5ZXJWaXNpYmxlKGUuc3VibGF5ZXJJZCkpKS5tYXAoKCh7aXRlbTplfSk9PmUpKSl9X2lzU3VibGF5ZXJWaXNpYmxlKGUpe2NvbnN0IGk9dGhpcy5fa21sVmlzdWFsRGF0YS5hbGxTdWJsYXllcnMuZ2V0KGUpO3JldHVybiEhaT8udmlzaWJpbGl0eSYmKC0xPT09aS5wYXJlbnRGb2xkZXJJZHx8dGhpcy5faXNTdWJsYXllclZpc2libGUoaS5wYXJlbnRGb2xkZXJJZCkpfV9sb2FkVmlzdWFsRGF0YShlLGksdCl7cmV0dXJuIHRoaXMuX2ZldGNoUGFyc2VkS01MKGUsdCkudGhlbigoYXN5bmMgZT0+e2Zvcihjb25zdCBzIG9mIGUuc3VibGF5ZXJzKXtpLmFsbFN1YmxheWVycy5zZXQocy5pZCxzKTtjb25zdCBlPXMucG9pbnRzP2F3YWl0IHkocy5wb2ludHMpOltdLGE9cy5wb2x5bGluZXM/YXdhaXQgeShzLnBvbHlsaW5lcyk6W10sbz1zLnBvbHlnb25zP2F3YWl0IHkocy5wb2x5Z29ucyk6W10sbD1zLm1hcEltYWdlc3x8W107aWYoaS5hbGxQb2ludHMucHVzaCguLi5lLm1hcCgoZT0+KHtpdGVtOmUsc3VibGF5ZXJJZDpzLmlkfSkpKSksaS5hbGxQb2x5bGluZXMucHVzaCguLi5hLm1hcCgoZT0+KHtpdGVtOmUsc3VibGF5ZXJJZDpzLmlkfSkpKSksaS5hbGxQb2x5Z29ucy5wdXNoKC4uLm8ubWFwKChlPT4oe2l0ZW06ZSxzdWJsYXllcklkOnMuaWR9KSkpKSxpLmFsbE1hcEltYWdlcy5wdXNoKC4uLmwubWFwKChlPT4oe2l0ZW06ZSxzdWJsYXllcklkOnMuaWR9KSkpKSxzLm5ldHdvcmtMaW5rKXtjb25zdCBlPWF3YWl0IHRoaXMuX2dldFZpZXdEZXBlbmRlbnRVcmwocy5uZXR3b3JrTGluayx0aGlzLnZpZXcuc3RhdGUpO2F3YWl0IHRoaXMuX2xvYWRWaXN1YWxEYXRhKGUsaSx0KX19fSkpfV9mZXRjaFBhcnNlZEtNTChlLGkpe3JldHVybiBnKGUsdGhpcy5sYXllci5zcGF0aWFsUmVmZXJlbmNlLHRoaXMubGF5ZXIucmVmcmVzaEludGVydmFsLGkpLnRoZW4oKGU9PncoZS5kYXRhKSkpfV9yZW1vdmVNYXBJbWFnZShlKXtjb25zdCBpPXRoaXMuX2JpdG1hcEluZGV4LmdldChlKTtpJiYodGhpcy5fbWFwSW1hZ2VDb250YWluZXIucmVtb3ZlQ2hpbGQoaSksdGhpcy5fYml0bWFwSW5kZXguZGVsZXRlKGUpKX19O2UoW24oKV0sai5wcm90b3R5cGUsXCJfcG9pbnRzVmlld1wiLHZvaWQgMCksZShbbigpXSxqLnByb3RvdHlwZSxcIl9wb2x5bGluZXNWaWV3XCIsdm9pZCAwKSxlKFtuKCldLGoucHJvdG90eXBlLFwiX3BvbHlnb25zVmlld1wiLHZvaWQgMCksZShbbigpXSxqLnByb3RvdHlwZSxcInVwZGF0aW5nXCIsdm9pZCAwKSxqPWUoW2goXCJlc3JpLnZpZXdzLjJkLmxheWVycy5LTUxMYXllclZpZXcyRFwiKV0saik7Y29uc3Qgaz1qO2V4cG9ydHtrIGFzIGRlZmF1bHR9O1xuIiwiLypcbkFsbCBtYXRlcmlhbCBjb3B5cmlnaHQgRVNSSSwgQWxsIFJpZ2h0cyBSZXNlcnZlZCwgdW5sZXNzIG90aGVyd2lzZSBzcGVjaWZpZWQuXG5TZWUgaHR0cHM6Ly9qcy5hcmNnaXMuY29tLzQuMjcvZXNyaS9jb3B5cmlnaHQudHh0IGZvciBkZXRhaWxzLlxuKi9cbmltcG9ydCB0IGZyb21cIi4uLy4uL3JlcXVlc3QuanNcIjtpbXBvcnQgZSBmcm9tXCIuLi8uLi9nZW9tZXRyeS9Qb2ludC5qc1wiO2ltcG9ydHtwcm9qZWN0IGFzIHJ9ZnJvbVwiLi4vLi4vZ2VvbWV0cnkvcHJvamVjdGlvbi5qc1wiO2ltcG9ydHtwcm9qZWN0UmVzb2x1dGlvbiBhcyBpLGdldFByb2plY3Rpb25PZmZzZXRHcmlkIGFzIGF9ZnJvbVwiLi4vLi4vbGF5ZXJzL3N1cHBvcnQvcmFzdGVyRnVuY3Rpb25zL3Jhc3RlclByb2plY3Rpb25IZWxwZXIuanNcIjtpbXBvcnR7aXNJbWFnZVNvdXJjZSBhcyBzLHJhc3Rlcml6ZSBhcyBufWZyb21cIi4uLzJkL2VuZ2luZS9CaXRtYXAuanNcIjtpbXBvcnQgbyBmcm9tXCIuLi8yZC9lbmdpbmUvd2ViZ2wvVmVydGV4U3RyZWFtLmpzXCI7aW1wb3J0e2NyZWF0ZVByb2dyYW1UZW1wbGF0ZSBhcyBtfWZyb21cIi4uLzJkL2VuZ2luZS93ZWJnbC9zaGFkZXJzL01hdGVyaWFsUHJvZ3JhbXMuanNcIjtpbXBvcnR7VGV4dHVyZVdyYXBNb2RlIGFzIGMsUGl4ZWxGb3JtYXQgYXMgcCxQaXhlbFR5cGUgYXMgaCxDb2xvckF0dGFjaG1lbnQgYXMgeH1mcm9tXCIuLi93ZWJnbC9lbnVtcy5qc1wiO2ltcG9ydHtGcmFtZWJ1ZmZlck9iamVjdCBhcyB1fWZyb21cIi4uL3dlYmdsL0ZyYW1lYnVmZmVyT2JqZWN0LmpzXCI7aW1wb3J0e2NyZWF0ZVRyYW5zZm9ybVRleHR1cmUgYXMgZH1mcm9tXCIuLi93ZWJnbC9yYXN0ZXJVdGlscy5qc1wiO2ltcG9ydHtSZW5kZXJpbmdDb250ZXh0IGFzIF99ZnJvbVwiLi4vd2ViZ2wvUmVuZGVyaW5nQ29udGV4dC5qc1wiO2ltcG9ydHtUZXh0dXJlIGFzIGd9ZnJvbVwiLi4vd2ViZ2wvVGV4dHVyZS5qc1wiO2ltcG9ydHtUZXh0dXJlRGVzY3JpcHRvciBhcyBmfWZyb21cIi4uL3dlYmdsL1RleHR1cmVEZXNjcmlwdG9yLmpzXCI7Y2xhc3MgbHtjb25zdHJ1Y3Rvcih0KXtpZih0aGlzLl9vd25zUmN0eD0hMSx0KXRoaXMuX293bnNSY3R4PSExLHRoaXMuX3JjdHg9dDtlbHNle2lmKGwuX2luc3RhbmNlKXJldHVybiBsLl9pbnN0YW5jZVJlZkNvdW50KyssbC5faW5zdGFuY2U7bC5faW5zdGFuY2VSZWZDb3VudD0xLGwuX2luc3RhbmNlPXRoaXMsdGhpcy5fb3duc1JjdHg9ITA7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCJ3ZWJnbFwiKTt0LmdldEV4dGVuc2lvbihcIk9FU190ZXh0dXJlX2Zsb2F0XCIpLHRoaXMuX3JjdHg9bmV3IF8odCx7fSl9Y29uc3QgZT17YXBwbHlQcm9qZWN0aW9uOiEwLGJpbGluZWFyOiExLGJpY3ViaWM6ITF9LHI9bShcInJhc3Rlci9yZXByb2plY3RcIixcInJhc3Rlci9yZXByb2plY3RcIixuZXcgTWFwKFtbXCJhX3Bvc2l0aW9uXCIsMF1dKSxlKTt0aGlzLl9wcm9ncmFtPXRoaXMuX3JjdHgucHJvZ3JhbUNhY2hlLmFjcXVpcmUoci5zaGFkZXJzLnZlcnRleFNoYWRlcixyLnNoYWRlcnMuZnJhZ21lbnRTaGFkZXIsci5hdHRyaWJ1dGVzKSx0aGlzLl9yY3R4LnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMWYoXCJ1X29wYWNpdHlcIiwxKSx0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm0xaShcInVfaW1hZ2VcIiwwKSx0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm0xaShcInVfZmxpcFlcIiwwKSx0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm0xaShcInVfdHJhbnNmb3JtR3JpZFwiLDEpLHRoaXMuX3F1YWQ9bmV3IG8odGhpcy5fcmN0eCxbMCwwLDEsMCwwLDEsMSwxXSl9cmVwcm9qZWN0VGV4dHVyZSh0LHMsbj0hMSl7Y29uc3Qgbz1yKHQuZXh0ZW50LHMpLG09bmV3IGUoe3g6KHQuZXh0ZW50LnhtYXgtdC5leHRlbnQueG1pbikvdC50ZXh0dXJlLmRlc2NyaXB0b3Iud2lkdGgseToodC5leHRlbnQueW1heC10LmV4dGVudC55bWluKS90LnRleHR1cmUuZGVzY3JpcHRvci5oZWlnaHQsc3BhdGlhbFJlZmVyZW5jZTp0LmV4dGVudC5zcGF0aWFsUmVmZXJlbmNlfSkse3g6Xyx5Omd9PWkobSxzLHQuZXh0ZW50KTtsZXQgbD0oXytnKS8yO2NvbnN0IHc9TWF0aC5yb3VuZCgoby54bWF4LW8ueG1pbikvbCksYj1NYXRoLnJvdW5kKChvLnltYXgtby55bWluKS9sKTtsPShvLndpZHRoL3crby5oZWlnaHQvYikvMjtjb25zdCBqPW5ldyBlKHt4OmwseTpsLHNwYXRpYWxSZWZlcmVuY2U6by5zcGF0aWFsUmVmZXJlbmNlfSksRD1hKHtwcm9qZWN0ZWRFeHRlbnQ6byxzcmNCdWZmZXJFeHRlbnQ6dC5leHRlbnQscGl4ZWxTaXplOmosaGFzV3JhcEFyb3VuZDohMCxzcGFjaW5nOlsxNiwxNl19KSxSPWQodGhpcy5fcmN0eCxEKSxDPW5ldyBmKHcsYik7Qy53cmFwTW9kZT1jLkNMQU1QX1RPX0VER0U7Y29uc3QgVD1uZXcgdSh0aGlzLl9yY3R4LEMpO3RoaXMuX3JjdHguYmluZEZyYW1lYnVmZmVyKFQpLHRoaXMuX3JjdHguc2V0Vmlld3BvcnQoMCwwLHcsYiksdGhpcy5fcmN0eC51c2VQcm9ncmFtKHRoaXMuX3Byb2dyYW0pLHRoaXMuX3JjdHguYmluZFRleHR1cmUodC50ZXh0dXJlLDApLHRoaXMuX3JjdHguYmluZFRleHR1cmUoUiwxKSx0aGlzLl9xdWFkLmJpbmQoKTtjb25zdHt3aWR0aDp5PTAsaGVpZ2h0OkU9MH09dC50ZXh0dXJlLmRlc2NyaXB0b3I7aWYodGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMmYoXCJ1X3NyY0ltYWdlU2l6ZVwiLHksRSksdGhpcy5fcHJvZ3JhbS5zZXRVbmlmb3JtMmZ2KFwidV90cmFuc2Zvcm1TcGFjaW5nXCIsRC5zcGFjaW5nKSx0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm0yZnYoXCJ1X3RyYW5zZm9ybUdyaWRTaXplXCIsRC5zaXplKSx0aGlzLl9wcm9ncmFtLnNldFVuaWZvcm0yZihcInVfdGFyZ2V0SW1hZ2VTaXplXCIsdyxiKSx0aGlzLl9xdWFkLmRyYXcoKSx0aGlzLl9xdWFkLnVuYmluZCgpLHRoaXMuX3JjdHgudXNlUHJvZ3JhbShudWxsKSx0aGlzLl9yY3R4LmJpbmRGcmFtZWJ1ZmZlcihudWxsKSxSLmRpc3Bvc2UoKSxuKXtjb25zdHt3aWR0aDp0LGhlaWdodDplfT1ULHI9bmV3IEltYWdlRGF0YSh0Pz8wLGU/PzApO1QucmVhZFBpeGVscygwLDAsdD8/MCxlPz8wLHAuUkdCQSxoLlVOU0lHTkVEX0JZVEUsci5kYXRhKTtjb25zdCBpPVQuZGV0YWNoQ29sb3JUZXh0dXJlKHguQ09MT1JfQVRUQUNITUVOVDApO3JldHVybiBULmRpc3Bvc2UoKSx7dGV4dHVyZTppLGV4dGVudDpvLGltYWdlRGF0YTpyfX1jb25zdCBNPVQuZGV0YWNoQ29sb3JUZXh0dXJlKHguQ09MT1JfQVRUQUNITUVOVDApO3JldHVybiBULmRpc3Bvc2UoKSx7dGV4dHVyZTpNLGV4dGVudDpvfX1yZXByb2plY3RCaXRtYXBEYXRhKHQsZSl7Y29uc3Qgcj1zKHQuYml0bWFwRGF0YSk/bih0LmJpdG1hcERhdGEpOnQuYml0bWFwRGF0YSxpPW5ldyBmO2kud3JhcE1vZGU9Yy5DTEFNUF9UT19FREdFLGkud2lkdGg9dC5iaXRtYXBEYXRhLndpZHRoLGkuaGVpZ2h0PXQuYml0bWFwRGF0YS5oZWlnaHQ7Y29uc3QgYT1uZXcgZyh0aGlzLl9yY3R4LGksciksbz10aGlzLnJlcHJvamVjdFRleHR1cmUoe3RleHR1cmU6YSxleHRlbnQ6dC5leHRlbnR9LGUsITApO28udGV4dHVyZS5kaXNwb3NlKCk7Y29uc3QgbT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLHA9by5pbWFnZURhdGE7bS53aWR0aD1wLndpZHRoLG0uaGVpZ2h0PXAuaGVpZ2h0O3JldHVybiBtLmdldENvbnRleHQoXCIyZFwiKS5wdXRJbWFnZURhdGEocCwwLDApLHtiaXRtYXBEYXRhOm0sZXh0ZW50Om8uZXh0ZW50fX1hc3luYyBsb2FkQW5kUmVwcm9qZWN0Qml0bWFwRGF0YShlLHIsaSl7Y29uc3QgYT0oYXdhaXQgdChlLHtyZXNwb25zZVR5cGU6XCJpbWFnZVwifSkpLmRhdGEscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO3Mud2lkdGg9YS53aWR0aCxzLmhlaWdodD1hLmhlaWdodDtjb25zdCBuPXMuZ2V0Q29udGV4dChcIjJkXCIpO24uZHJhd0ltYWdlKGEsMCwwKTtjb25zdCBvPW4uZ2V0SW1hZ2VEYXRhKDAsMCxzLndpZHRoLHMuaGVpZ2h0KTtpZihyLnNwYXRpYWxSZWZlcmVuY2UuZXF1YWxzKGkpKXJldHVybntiaXRtYXBEYXRhOm8sZXh0ZW50OnJ9O2NvbnN0IG09dGhpcy5yZXByb2plY3RCaXRtYXBEYXRhKHtiaXRtYXBEYXRhOm8sZXh0ZW50OnJ9LGkpO3JldHVybntiaXRtYXBEYXRhOm0uYml0bWFwRGF0YSxleHRlbnQ6bS5leHRlbnR9fWRlc3Ryb3koKXt0aGlzLl9vd25zUmN0eD8obC5faW5zdGFuY2VSZWZDb3VudC0tLDA9PT1sLl9pbnN0YW5jZVJlZkNvdW50JiYodGhpcy5fcXVhZC5kaXNwb3NlKCksdGhpcy5fcHJvZ3JhbS5kaXNwb3NlKCksdGhpcy5fcmN0eC5kaXNwb3NlKCksbC5faW5zdGFuY2U9bnVsbCkpOih0aGlzLl9xdWFkLmRpc3Bvc2UoKSx0aGlzLl9wcm9ncmFtLmRpc3Bvc2UoKSl9fWwuX2luc3RhbmNlUmVmQ291bnQ9MDtleHBvcnR7bCBhcyBJbWFnZVJlcHJvamVjdG9yfTtcbiIsIi8qXG5BbGwgbWF0ZXJpYWwgY29weXJpZ2h0IEVTUkksIEFsbCBSaWdodHMgUmVzZXJ2ZWQsIHVubGVzcyBvdGhlcndpc2Ugc3BlY2lmaWVkLlxuU2VlIGh0dHBzOi8vanMuYXJjZ2lzLmNvbS80LjI3L2VzcmkvY29weXJpZ2h0LnR4dCBmb3IgZGV0YWlscy5cbiovXG5pbXBvcnR7WiBhcyBlfWZyb21cIi4uLy4uL2NodW5rcy92ZWMyZjY0LmpzXCI7aW1wb3J0e0NvbnRleHRUeXBlIGFzIHR9ZnJvbVwiLi9jb250ZXh0VXRpbHMuanNcIjtpbXBvcnR7UGl4ZWxUeXBlIGFzIG4sU2l6ZWRQaXhlbEZvcm1hdCBhcyByLFBpeGVsRm9ybWF0IGFzIGEsVGV4dHVyZVNhbXBsaW5nTW9kZSBhcyBpLFRleHR1cmVXcmFwTW9kZSBhcyBvLFVuaWZvcm1UeXBlIGFzIHN9ZnJvbVwiLi9lbnVtcy5qc1wiO2ltcG9ydHtUZXh0dXJlIGFzIHV9ZnJvbVwiLi9UZXh0dXJlLmpzXCI7aW1wb3J0e1RleHR1cmVEZXNjcmlwdG9yIGFzIGZ9ZnJvbVwiLi9UZXh0dXJlRGVzY3JpcHRvci5qc1wiO2Z1bmN0aW9uIGMoZSxzLGM9XCJuZWFyZXN0XCIsbT0hMSl7Y29uc3QgbD0hKG0mJlwidThcIj09PXMucGl4ZWxUeXBlKSxfPWw/bi5GTE9BVDpuLlVOU0lHTkVEX0JZVEUscD1udWxsPT1zLnBpeGVsc3x8MD09PXMucGl4ZWxzLmxlbmd0aD9udWxsOmw/cy5nZXRBc1JHQkFGbG9hdCgpOnMuZ2V0QXNSR0JBKCksZz1lLmNhcGFiaWxpdGllcy50ZXh0dXJlRmxvYXQ/LnRleHR1cmVGbG9hdExpbmVhcixBPW5ldyBmO3JldHVybiBBLndpZHRoPXMud2lkdGgsQS5oZWlnaHQ9cy5oZWlnaHQsQS5pbnRlcm5hbEZvcm1hdD1lLnR5cGU9PT10LldFQkdMMiYmbD9yLlJHQkEzMkY6YS5SR0JBLEEuc2FtcGxpbmdNb2RlPSFnfHxcImJpbGluZWFyXCIhPT1jJiZcImN1YmljXCIhPT1jP2kuTkVBUkVTVDppLkxJTkVBUixBLmRhdGFUeXBlPV8sQS53cmFwTW9kZT1vLkNMQU1QX1RPX0VER0UsbmV3IHUoZSxBLHApfWZ1bmN0aW9uIG0oZSxzKXtjb25zdHtzcGFjaW5nOmMsb2Zmc2V0czptLGNvZWZmaWNpZW50czpsLHNpemU6W18scF19PXMsZz1jWzBdPjEsQT1uZXcgZjtBLndpZHRoPWc/NCpfOl8sQS5oZWlnaHQ9cCxBLmludGVybmFsRm9ybWF0PWUudHlwZT09PXQuV0VCR0wyP3IuUkdCQTMyRjphLlJHQkEsQS5kYXRhVHlwZT1uLkZMT0FULEEuc2FtcGxpbmdNb2RlPWkuTkVBUkVTVCxBLndyYXBNb2RlPW8uQ0xBTVBfVE9fRURHRTtjb25zdCBUPW5ldyBGbG9hdDMyQXJyYXkoZz9fKnAqMTY6MiptLmxlbmd0aCk7aWYoZyYmbnVsbCE9bClmb3IobGV0IHQ9MCxuPTA7dDxsLmxlbmd0aDt0KyspVFtuKytdPWxbdF0sdCUzPT0yJiYoVFtuKytdPTEpO2Vsc2UgZm9yKGxldCB0PTA7dDxwO3QrKylmb3IobGV0IGU9MDtlPF87ZSsrKXtjb25zdCBuPTQqKHQqXytlKSxyPTIqKGUqcCt0KTtUW25dPW1bcl0sVFtuKzFdPW1bcisxXSxUW24rM109LTE9PT1tW3JdPzA6MX1yZXR1cm4gbmV3IHUoZSxBLFQpfWZ1bmN0aW9uIGwoZSx0KXtjb25zdCBuPW5ldyBmO3JldHVybiBuLmludGVybmFsRm9ybWF0PWEuUkdCQSxuLndpZHRoPXQubGVuZ3RoLzQsbi5oZWlnaHQ9MSxuLnNhbXBsaW5nTW9kZT1pLk5FQVJFU1Qsbi53cmFwTW9kZT1vLkNMQU1QX1RPX0VER0UsbmV3IHUoZSxuLHQpfWZ1bmN0aW9uIF8odCxuLHIsYT0xLGk9ITApe3JldHVybnt1X2ZsaXBZOmksdV9hcHBseVRyYW5zZm9ybTohIXQsdV9vcGFjaXR5OmEsdV90cmFuc2Zvcm1TcGFjaW5nOnQ/dC5zcGFjaW5nOmUsdV90cmFuc2Zvcm1HcmlkU2l6ZTp0P3Quc2l6ZTplLHVfdGFyZ2V0SW1hZ2VTaXplOm4sdV9zcmNJbWFnZVNpemU6cn19ZnVuY3Rpb24gcChlLHQpe3JldHVybnt1X2NvbG9ybWFwT2Zmc2V0OnR8fDAsdV9jb2xvcm1hcE1heEluZGV4OmU/ZS5sZW5ndGgvNC0xOjB9fWZ1bmN0aW9uIGcoZSx0KXtyZXR1cm57dV9zY2FsZTplLHVfb2Zmc2V0OnR9fWZ1bmN0aW9uIEEoZSl7cmV0dXJue3VfYmFuZENvdW50OmUuYmFuZENvdW50LHVfbWluT3V0cHV0OmUub3V0TWluLHVfbWF4T3V0cHV0OmUub3V0TWF4LHVfbWluQ3V0T2ZmOmUubWluQ3V0T2ZmLHVfbWF4Q3V0T2ZmOmUubWF4Q3V0T2ZmLHVfZmFjdG9yOmUuZmFjdG9yLHVfdXNlR2FtbWE6ZS51c2VHYW1tYSx1X2dhbW1hOmUuZ2FtbWEsdV9nYW1tYUNvcnJlY3Rpb246ZS5nYW1tYUNvcnJlY3Rpb259fWZ1bmN0aW9uIFQoZSl7cmV0dXJue3VfaGlsbHNoYWRlVHlwZTplLmhpbGxzaGFkZVR5cGUsdV9zaW5aY29zQXM6ZS5zaW5aY29zQXMsdV9zaW5ac2luQXM6ZS5zaW5ac2luQXMsdV9jb3NaczplLmNvc1pzLHVfd2VpZ2h0czplLndlaWdodHMsdV9mYWN0b3I6ZS5mYWN0b3IsdV9taW5WYWx1ZTplLm1pblZhbHVlLHVfbWF4VmFsdWU6ZS5tYXhWYWx1ZX19ZnVuY3Rpb24gaChlLHQpe2NvbnN0IG49ZS5nbCxyPXQuZ2xOYW1lLGE9bmV3IE1hcDtpZihudWxsPT1yKXJldHVybiBhO2NvbnN0IGk9bi5nZXRQcm9ncmFtUGFyYW1ldGVyKHIsbi5BQ1RJVkVfVU5JRk9STVMpO2xldCBvO2ZvcihsZXQgcz0wO3M8aTtzKyspbz1uLmdldEFjdGl2ZVVuaWZvcm0ocixzKSxvJiZhLnNldChvLm5hbWUse2xvY2F0aW9uOm4uZ2V0VW5pZm9ybUxvY2F0aW9uKHIsby5uYW1lKSxpbmZvOm99KTtyZXR1cm4gYX1mdW5jdGlvbiBFKGUsdCxuKXtPYmplY3Qua2V5cyhuKS5mb3JFYWNoKChyPT57Y29uc3QgYT10LmdldChyKXx8dC5nZXQocitcIlswXVwiKTthJiZ4KGUscixuW3JdLGEpfSkpfWZ1bmN0aW9uIE8oZSx0LG4scil7bi5sZW5ndGg9PT1yLmxlbmd0aCYmKHIuc29tZSgoZT0+bnVsbD09ZSkpfHxuLnNvbWUoKGU9Pm51bGw9PWUpKXx8bi5mb3JFYWNoKCgobixhKT0+e3Quc2V0VW5pZm9ybTFpKG4sYSksZS5iaW5kVGV4dHVyZShyW2FdLGEpfSkpKX1mdW5jdGlvbiB4KGUsdCxuLHIpe2lmKG51bGw9PT1yfHxudWxsPT1uKXJldHVybiExO2NvbnN0e2luZm86YX09cjtzd2l0Y2goYS50eXBlKXtjYXNlIHMuRkxPQVQ6YS5zaXplPjE/ZS5zZXRVbmlmb3JtMWZ2KHQsbik6ZS5zZXRVbmlmb3JtMWYodCxuKTticmVhaztjYXNlIHMuRkxPQVRfVkVDMjplLnNldFVuaWZvcm0yZnYodCxuKTticmVhaztjYXNlIHMuRkxPQVRfVkVDMzplLnNldFVuaWZvcm0zZnYodCxuKTticmVhaztjYXNlIHMuRkxPQVRfVkVDNDplLnNldFVuaWZvcm00ZnYodCxuKTticmVhaztjYXNlIHMuRkxPQVRfTUFUMzplLnNldFVuaWZvcm1NYXRyaXgzZnYodCxuKTticmVhaztjYXNlIHMuRkxPQVRfTUFUNDplLnNldFVuaWZvcm1NYXRyaXg0ZnYodCxuKTticmVhaztjYXNlIHMuSU5UOmEuc2l6ZT4xP2Uuc2V0VW5pZm9ybTFpdih0LG4pOmUuc2V0VW5pZm9ybTFpKHQsbik7YnJlYWs7Y2FzZSBzLkJPT0w6ZS5zZXRVbmlmb3JtMWkodCxuPzE6MCk7YnJlYWs7Y2FzZSBzLklOVF9WRUMyOmNhc2Ugcy5CT09MX1ZFQzI6ZS5zZXRVbmlmb3JtMml2KHQsbik7YnJlYWs7Y2FzZSBzLklOVF9WRUMzOmNhc2Ugcy5CT09MX1ZFQzM6ZS5zZXRVbmlmb3JtM2l2KHQsbik7YnJlYWs7Y2FzZSBzLklOVF9WRUM0OmNhc2Ugcy5CT09MX1ZFQzQ6ZS5zZXRVbmlmb3JtNGl2KHQsbik7YnJlYWs7ZGVmYXVsdDpyZXR1cm4hMX1yZXR1cm4hMH1leHBvcnR7bCBhcyBjcmVhdGVDb2xvcm1hcFRleHR1cmUsYyBhcyBjcmVhdGVSYXN0ZXJUZXh0dXJlLG0gYXMgY3JlYXRlVHJhbnNmb3JtVGV4dHVyZSxnIGFzIGdldEJhc2ljR3JpZFVuaWZvcm1zLHAgYXMgZ2V0Q29sb3JtYXBVbmlmb3JtcyxfIGFzIGdldENvbW1vblVuaWZvcm1zLFQgYXMgZ2V0U2hhZGVkUmVsaWVmVW5pZm9ybXMsQSBhcyBnZXRTdHJldGNoVW5pZm9ybXMsaCBhcyBnZXRVbmlmb3JtTG9jYXRpb25JbmZvcyxPIGFzIHNldFRleHR1cmVzLEUgYXMgc2V0VW5pZm9ybXN9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9