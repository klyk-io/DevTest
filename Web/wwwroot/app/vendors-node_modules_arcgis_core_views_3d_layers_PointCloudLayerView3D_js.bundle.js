"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkweb"] = self["webpackChunkweb"] || []).push([["vendors-node_modules_arcgis_core_views_3d_layers_PointCloudLayerView3D_js"],{

/***/ "./node_modules/@arcgis/core/chunks/PointRenderer.glsl.js":
/*!****************************************************************!*\
  !*** ./node_modules/@arcgis/core/chunks/PointRenderer.glsl.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"P\": () => (/* binding */ c),\n/* harmony export */   \"b\": () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\");\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\");\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\");\n/* harmony import */ var _views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/RgbaFloatEncoding.glsl.js\");\n/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderModules/interfaces.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/interfaces.js\");\n/* harmony import */ var _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\");\n/* harmony import */ var _views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../views/3d/webgl-engine/lib/VertexAttribute.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction s(s){const c=new _views_3d_webgl_engine_core_shaderModules_ShaderBuilder_js__WEBPACK_IMPORTED_MODULE_5__.ShaderBuilder,d=s.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__.ShaderOutput.Color,l=s.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__.ShaderOutput.Depth,p=s.output===_views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__.ShaderOutput.Highlight;return c.extensions.add(\"GL_OES_standard_derivatives\"),c.include(_views_3d_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_1__.Slice,s),c.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.POSITION,\"vec3\"),c.attributes.add(_views_3d_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_6__.VertexAttribute.COLOR,\"vec3\"),c.vertex.uniforms.add(\"modelView\",\"mat4\").add(\"proj\",\"mat4\").add(\"screenMinMaxSize\",\"vec2\").add(\"pointScale\",\"vec2\").add(\"clipMin\",\"vec3\").add(\"clipMax\",\"vec3\"),l?(c.vertex.uniforms.add(\"nearFar\",\"vec2\"),c.varyings.add(\"depth\",\"float\")):s.output!==_views_3d_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_0__.ShaderOutput.Highlight&&c.varyings.add(\"vColor\",\"vec3\"),c.vertex.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`\n    void main(void) {\n      // Move clipped points outside of clipspace\n      if (position.x < clipMin.x || position.y < clipMin.y || position.z < clipMin.z ||\n        position.x > clipMax.x || position.y > clipMax.y || position.z > clipMax.z) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      if (rejectBySlice(position)) {\n        gl_Position = vec4(0.0,0.0,0.0,2.0);\n        gl_PointSize = 0.0;\n        return;\n      }\n\n      // Position in camera space\n      vec4 camera = modelView * vec4(position, 1.0);\n\n      float pointSize = pointScale.x;\n      vec4 position = proj * camera;\n     ${s.drawScreenSize?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`\n      float clampedScreenSize = pointSize;`:_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`\n      float pointRadius = 0.5 * pointSize;\n      vec4 cameraOffset = camera + vec4(0.0, pointRadius, 0.0, 0.0);\n      vec4 positionOffset = proj * cameraOffset;\n      float radius = abs(positionOffset.y - position.y);\n      float viewHeight = pointScale.y;\n      // screen diameter = (2 * r / w) * (h / 2)\n      float screenPointSize = (radius / position.w) * viewHeight;\n      float clampedScreenSize = clamp(screenPointSize, screenMinMaxSize.x, screenMinMaxSize.y);\n      // Shift towards camera, to move rendered point out of terrain i.e. to\n      // the camera-facing end of the virtual point when considering it as a\n      // 3D sphere.\n      camera.xyz -= normalize(camera.xyz) * pointRadius * clampedScreenSize / screenPointSize;\n      position = proj * camera;`}\n\n     gl_PointSize = clampedScreenSize;\n     gl_Position = position;\n\n     ${l?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`depth = (-camera.z - nearFar[0]) / (nearFar[1] - nearFar[0]);`:\"\"}\n     ${d?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`vColor = color;`:\"\"}\n    }\n  `),c.fragment.include(_views_3d_webgl_engine_core_shaderLibrary_util_RgbaFloatEncoding_glsl_js__WEBPACK_IMPORTED_MODULE_3__.RgbaFloatEncoding,s),p&&c.include(_views_3d_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_2__.OutputHighlight),c.fragment.code.add(_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`\n    void main(void) {\n      vec2 vOffset = gl_PointCoord - vec2(0.5, 0.5);\n      float r2 = dot(vOffset, vOffset);\n\n      if (r2 > 0.25) {\n        discard;\n      }\n      ${l?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`gl_FragColor = float2rgba(depth);`:\"\"}\n      ${p?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`outputHighlight();`:\"\"}\n      ${d?_views_3d_webgl_engine_core_shaderModules_interfaces_js__WEBPACK_IMPORTED_MODULE_4__.glsl`gl_FragColor = vec4(vColor, 1.0);`:\"\"}\n    }\n  `),c}const c=Object.freeze({__proto__:null,build:s});\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/chunks/PointRenderer.glsl.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/PointCloudLayerView3D.js":
/*!****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/PointCloudLayerView3D.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ me)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/asyncUtils.js */ \"./node_modules/@arcgis/core/core/asyncUtils.js\");\n/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../core/Collection.js */ \"./node_modules/@arcgis/core/core/Collection.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ \"./node_modules/@arcgis/core/core/promiseUtils.js\");\n/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ \"./node_modules/@arcgis/core/core/reactiveUtils.js\");\n/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/screenUtils.js */ \"./node_modules/@arcgis/core/core/screenUtils.js\");\n/* harmony import */ var _core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/typedArrayUtil.js */ \"./node_modules/@arcgis/core/core/typedArrayUtil.js\");\n/* harmony import */ var _core_unitUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/unitUtils.js */ \"./node_modules/@arcgis/core/core/unitUtils.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ \"./node_modules/@arcgis/core/core/arrayUtils.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../chunks/vec3.js */ \"./node_modules/@arcgis/core/chunks/vec3.js\");\n/* harmony import */ var _chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../chunks/vec3f32.js */ \"./node_modules/@arcgis/core/chunks/vec3f32.js\");\n/* harmony import */ var _geometry_projection_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../geometry/projection.js */ \"./node_modules/@arcgis/core/geometry/projection.js\");\n/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingBox.js */ \"./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js\");\n/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../geometry/support/aaBoundingRect.js */ \"./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js\");\n/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../geometry/support/plane.js */ \"./node_modules/@arcgis/core/geometry/support/plane.js\");\n/* harmony import */ var _layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/graphics/dehydratedFeatures.js */ \"./node_modules/@arcgis/core/layers/graphics/dehydratedFeatures.js\");\n/* harmony import */ var _layers_support_CodedValue_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../layers/support/CodedValue.js */ \"./node_modules/@arcgis/core/layers/support/CodedValue.js\");\n/* harmony import */ var _layers_support_CodedValueDomain_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../layers/support/CodedValueDomain.js */ \"./node_modules/@arcgis/core/layers/support/CodedValueDomain.js\");\n/* harmony import */ var _layers_support_Domain_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../layers/support/Domain.js */ \"./node_modules/@arcgis/core/layers/support/Domain.js\");\n/* harmony import */ var _layers_support_InheritedDomain_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../layers/support/InheritedDomain.js */ \"./node_modules/@arcgis/core/layers/support/InheritedDomain.js\");\n/* harmony import */ var _layers_support_RangeDomain_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../../../layers/support/RangeDomain.js */ \"./node_modules/@arcgis/core/layers/support/RangeDomain.js\");\n/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ \"./node_modules/@arcgis/core/layers/support/fieldUtils.js\");\n/* harmony import */ var _layers_support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../../../layers/support/PromiseQueue.js */ \"./node_modules/@arcgis/core/layers/support/PromiseQueue.js\");\n/* harmony import */ var _symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../../../symbols/support/unitConversionUtils.js */ \"./node_modules/@arcgis/core/symbols/support/unitConversionUtils.js\");\n/* harmony import */ var _LayerView3D_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./LayerView3D.js */ \"./node_modules/@arcgis/core/views/3d/layers/LayerView3D.js\");\n/* harmony import */ var _PointCloudWorkerHandle_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./PointCloudWorkerHandle.js */ \"./node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js\");\n/* harmony import */ var _i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./i3s/I3SUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js\");\n/* harmony import */ var _i3s_LoDUtil_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./i3s/LoDUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js\");\n/* harmony import */ var _i3s_PagedNodeIndex_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./i3s/PagedNodeIndex.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js\");\n/* harmony import */ var _i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./i3s/PointCloudRendererUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js\");\n/* harmony import */ var _i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./i3s/PointCloudWorkerUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js\");\n/* harmony import */ var _i3s_PointGraphic_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./i3s/PointGraphic.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js\");\n/* harmony import */ var _i3s_PointRenderer_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./i3s/PointRenderer.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js\");\n/* harmony import */ var _support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./support/PopupSceneLayerView.js */ \"./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js\");\n/* harmony import */ var _support_extentUtils_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../support/extentUtils.js */ \"./node_modules/@arcgis/core/views/3d/support/extentUtils.js\");\n/* harmony import */ var _support_index_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../support/index.js */ \"./node_modules/@arcgis/core/views/3d/support/index.js\");\n/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../support/orientedBoundingBox.js */ \"./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js\");\n/* harmony import */ var _support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../support/updatingProperties.js */ \"./node_modules/@arcgis/core/views/3d/support/updatingProperties.js\");\n/* harmony import */ var _webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../webgl-engine/lib/RenderSlot.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderSlot.js\");\n/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../../layers/LayerView.js */ \"./node_modules/@arcgis/core/views/layers/LayerView.js\");\n/* harmony import */ var _support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../../support/layerViewUtils.js */ \"./node_modules/@arcgis/core/views/support/layerViewUtils.js\");\n/* harmony import */ var _support_Scheduler_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../../support/Scheduler.js */ \"./node_modules/@arcgis/core/views/support/Scheduler.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst ue=_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getLogger(\"esri.views.3d.layers.PointCloudLayerView3D\"),pe=8,ce=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_20__.create)();let _e=class extends((0,_support_PopupSceneLayerView_js__WEBPACK_IMPORTED_MODULE_39__.PopupSceneLayerView)((0,_LayerView3D_js__WEBPACK_IMPORTED_MODULE_30__.LayerView3D)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_45__[\"default\"]))){constructor(){super(...arguments),this.type=\"point-cloud-3d\",this.maximumPointCount=4e6,this.slicePlaneEnabled=!1,this._renderer=null,this._rendererAdded=!1,this._renderedNodes=new Set,this._nodeScales=new Map,this._updateViewNeeded=!0,this._lodFactor=1,this._maxLoggedBoxWarnings=5,this._pageMultiplier=1,this._nodeLoadEpoch=0,this._indexQueue=[],this._workQueue=new Array,this._idleQueue=new _layers_support_PromiseQueue_js__WEBPACK_IMPORTED_MODULE_28__.PromiseQueue,this._indexPagesLoading=new Map,this._loadingNodes=new Map,this._recalcWork=!0,this._layerIsVisible=!1,this._codedDomainPopulationPromise=null,this._codedDomainPopulationAbortController=null,this._totalWork=0,this._index=null,this._loadingInitNodePage=!1,this._nodeIdArray=[]}get pointScale(){const e=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getSplatSizeAlgorithm)(this.layer&&this.layer.renderer),t=1;return e&&null!=e.scaleFactor?e.scaleFactor:t}get useRealWorldSymbolSizes(){const e=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getFixedSizeAlgorithm)(this.layer&&this.layer.renderer),t=!1;return e&&null!=e.useRealWorldSymbolSizes?e.useRealWorldSymbolSizes:t}get pointSize(){const e=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getFixedSizeAlgorithm)(this.layer&&this.layer.renderer),t=0;return e&&null!=e.size?e.size:t}get inverseDensity(){const e=96;return this.layer&&this.layer.renderer?1*e/this.layer.renderer.pointsPerInch:5}get availableFields(){const e=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getRendererInfo)(this.layer),t=new Set;e.primaryAttribute&&t.add(e.primaryAttribute.name),e.modulationAttribute&&t.add(e.primaryAttribute.name);const i=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getFilterInfo)(this.layer);if(i)for(const r of i)t.add(r.attributeInfo.name);if(this.layer.outFields)for(const r of (0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_27__.unpackFieldNames)(this.layer.fieldsIndex,this.layer.outFields))t.add(r);return Array.from(t)}get _clippingBox(){if(!this.view||!this.view.clippingArea)return null;const e=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_18__.create)(),t=this.view.renderSpatialReference;return (0,_support_extentUtils_js__WEBPACK_IMPORTED_MODULE_40__.projectToBoundingBox)(this.view.clippingArea,e,t)?e:null}get _elevationOffset(){const e=this.layer&&this.layer.elevationInfo;if(e&&\"absolute-height\"===e.mode){const t=(0,_core_unitUtils_js__WEBPACK_IMPORTED_MODULE_9__.getMetersPerVerticalUnitForSR)(this.layer.spatialReference),i=(0,_symbols_support_unitConversionUtils_js__WEBPACK_IMPORTED_MODULE_29__.getMetersPerUnit)(e.unit);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.unwrapOr)(e.offset,0)*i/t}return 0}initialize(){const e=this.view.resourceController;this._worker=new _PointCloudWorkerHandle_js__WEBPACK_IMPORTED_MODULE_31__.PointCloudWorkerHandle((t=>e.schedule(t))),this.addResolvingPromise(this._worker.promise),this._tmpPoint=(0,_layers_graphics_dehydratedFeatures_js__WEBPACK_IMPORTED_MODULE_21__.makeDehydratedPoint)(0,0,0,this.layer.spatialReference),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkPointCloudLayerValid)(this.layer),(0,_i3s_I3SUtil_js__WEBPACK_IMPORTED_MODULE_32__.checkPointCloudLayerCompatibleWithView)(this.layer,this.view),this._indexRequester=e.createStreamDataRequester(_support_index_js__WEBPACK_IMPORTED_MODULE_41__.ClientType.I3S_INDEX),this._dataRequester=e.createStreamDataRequester(_support_index_js__WEBPACK_IMPORTED_MODULE_41__.ClientType.I3S_DATA),this._initRenderer();const t=this._initNodePages(),i=this.view.resourceController.memoryController;this._memCache=i.newCache(this.layer.uid),this.updatingHandles.add((()=>this._clippingBox),(()=>this._setUpdateViewNeeded()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this._elevationOffset),(()=>this._elevationOffsetChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.layer.renderer),(()=>this._rendererChanged()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.layer.filters),(()=>this._reload()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.layer.outFields),(()=>this._reload()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.layer.effectiveScaleRange),(()=>this._setUpdateViewNeeded())),this.updatingHandles.add((()=>this.view.state.contentCamera),(()=>this._setUpdateViewNeeded())),this.handles.add([this.view.basemapTerrain.on(\"scale-change\",(e=>this._scaleUpdateHandler(e))),i.events.on(\"quality-changed\",(()=>this._setUpdateViewNeeded()))]),this.addResolvingPromise(t),this.when((()=>{this.handles.add([e.scheduler.registerTask(_support_Scheduler_js__WEBPACK_IMPORTED_MODULE_47__.TaskPriority.POINT_CLOUD_LAYER,this),e.scheduler.registerIdleStateCallbacks((()=>this._idleBegin()),(()=>this._idleEnd())),this.updatingHandles.add((()=>this.suspended),(e=>{e?this._clearNodeState():this._setUpdateViewNeeded()}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial)])}),(()=>{this.updatingHandles.removeAll(),this.handles.removeAll()}))}_setUpdateViewNeeded(){this._updateViewNeeded=!0,this._updateLoading()}destroy(){this.cancelLoading(),this._worker&&(this._worker.destroy(),this._worker=null),this._destroyRenderer(),this._memCache.destroy(),this._memCache=null,this._codedDomainPopulationAbortController&&(this._codedDomainPopulationAbortController.abort(),this._codedDomainPopulationAbortController=null),this._codedDomainPopulationPromise=null}_initRenderer(){this._renderer=new _i3s_PointRenderer_js__WEBPACK_IMPORTED_MODULE_38__.PointRenderer({createGraphic:(e,t,i)=>this._createGraphic(e,t,i)}),this._renderer.layerUid=this.layer.uid,this.updatingHandles.add((()=>this._clippingBox),(e=>this._renderer.clippingBox=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.suspended),(e=>this._setPointsVisible(!e)),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.pointScale),(e=>this._renderer.scaleFactor=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this._renderer.minSizePx=Math.sqrt(2),this.updatingHandles.add((()=>this.useRealWorldSymbolSizes),(e=>this._renderer.useRealWorldSymbolSizes=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.pointSize),(e=>{const t=(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_7__.pt2px)(e);this._renderer.size=e,this._renderer.sizePx=t}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.slicePlaneEnabled),(e=>this._renderer.slicePlaneEnabled=e),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.inverseDensity),(()=>this._setUpdateViewNeeded()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.maximumPointCount),(()=>this._setUpdateViewNeeded()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial),this.updatingHandles.add((()=>this.view.qualitySettings.sceneService.pointCloud.lodFactor),(e=>{this._lodFactor=e,this._setUpdateViewNeeded()}),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_6__.initial)}_destroyRenderer(){this._renderer.removeAll(),this._setPointsVisible(!1)}_createGraphic(e,t,i){const r=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(e.pointIdFilterMap)?e.pointIdFilterMap[t]:t,s=this.view.computeMapPointFromVec3d(i),o=this._createGraphicAttributes(e,r);return new _i3s_PointGraphic_js__WEBPACK_IMPORTED_MODULE_37__.PointGraphic({pointCloudMetadata:{nodeId:e.id,pointIndexInNode:t,attributePointIndexInNode:r,epoch:this._nodeLoadEpoch},geometry:s,attributes:o,layer:this.layer,sourceLayer:this.layer})}_createGraphicAttributes(e,t){const i={};for(const r of e.attributes)this._encodeGraphicAttribute(r.attributeInfo,r.values,t,i);return i}_encodeGraphicAttribute(e,t,i,r){const s=e.storageInfo&&e.storageInfo.attributeValues,o=s?s.valuesPerElement:1;if(1===o)r[e.name]=t[i];else if(\"UInt8\"===s.valueType&&o<=4){let s=0;const n=i*o;for(let e=n;e<n+o;e++)s=(s<<8)+t[e];r[e.name]=s}else r[e.name]=void 0}_setPointsVisible(e){e&&!this._rendererAdded?(this.view._stage.addRenderPlugin([_webgl_engine_lib_RenderSlot_js__WEBPACK_IMPORTED_MODULE_44__.RenderSlot.OPAQUE_PLUGIN],this._renderer),this._rendererAdded=!0):!e&&this._rendererAdded&&(this.view._stage.removeRenderPlugin(this._renderer),this._rendererAdded=!1)}_rendererChanged(){this._renderer.useFixedSizes=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.rendererUsesFixedSizes)(this.layer.renderer),this._reload()}_reload(){this._clearNodeState(),this._memCache.clear(),this._setUpdateViewNeeded()}_elevationOffsetChanged(){this._clearNodeState(),this._memCache.clear(),this._initNodePages()}_scaleUpdateHandler(e){const t=this.layer.effectiveScaleRange;(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_46__.isScaleRangeActive)(t.minScale,t.maxScale)?(0,_geometry_projection_js__WEBPACK_IMPORTED_MODULE_17__.projectBoundingRect)(e.extent,e.spatialReference,fe,this.layer.spatialReference)&&(this._nodeScales.forEach(((t,i)=>{if(!this._renderedNodes.has(i))return void this._nodeScales.delete(i);const r=this._index.getNode(i);(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_19__.containsPoint)(fe,r.obb.center)&&this._nodeScales.set(i,e.scale)})),this._setUpdateViewNeeded()):this._nodeScales.clear()}_displayNodes(e){this._workQueue=(0,_i3s_LoDUtil_js__WEBPACK_IMPORTED_MODULE_33__.nodeDiff)([...this._renderedNodes],e,this._index),(0,_i3s_LoDUtil_js__WEBPACK_IMPORTED_MODULE_33__.sortFrontToBack)(this._workQueue,this.view.state.contentCamera.viewForward,this._index),(0,_i3s_LoDUtil_js__WEBPACK_IMPORTED_MODULE_33__.splitWorkEntries)(this._workQueue,pe,this._index),this._updateQueues(),this._totalWork=this._computeWork(),this._updateLoading(),this._layerIsVisible=e.length>0||this._loadingInitNodePage,this.notifyChange(\"suspended\")}cancelLoading(){this._cancelNodeLoading(),this._cancelIndexLoading()}_cancelNodeLoading(){const e=new Array;this._loadingNodes.forEach((({abortController:t})=>e.push(t))),this._loadingNodes.clear();for(const t of e)t.abort();this._workQueue=[],this._idleQueue.cancelAll(),this._totalWork=this._computeWork(),this._updateLoading()}_updateQueues(){const e=new Set;this._workQueue.forEach((t=>t.load.forEach((t=>e.add(t)))));const t=new Array,i=new Map;this._loadingNodes.forEach(((r,s)=>{e.has(s)?i.set(s,r):t.push(r)})),this._loadingNodes=i;for(const{abortController:r}of t)r.abort();this._workQueue=this._workQueue.filter((e=>{for(const t of e.load)if(this._loadingNodes.has(t))return this._recalcWork=!0,!1;return!0})),this._totalWork=this._computeWork(),this._updateLoading()}_cancelIndexLoading(){this._indexQueue=[],this._indexPagesLoading.forEach((({abortController:e})=>e.abort())),this._indexPagesLoading.clear(),this._totalWork=this._computeWork(),this._updateLoading()}_clearNodeState(){this._nodeLoadEpoch++,this._renderedNodes.forEach((e=>this._removeFromRenderer(e))),this._cancelNodeLoading()}_idleBegin(){this._setUpdateViewNeeded()}_idleEnd(){this._setUpdateViewNeeded()}get running(){return this.suspended?this._updateViewNeeded:this._updateViewNeeded||this._indexQueue.length>0||this._workQueue.length>0||this._idleQueue.running}runTask(e){if(this.suspended){if(this._updateViewNeeded){this._updateViewNeeded=!1;const e=this._isRootNodeVisible();e!==this._layerIsVisible&&(this._layerIsVisible=e,this.notifyChange(\"suspended\")),this._updateLoading()}}else{for(e.run((()=>this._updateWorkQueues()));this._indexQueue.length>0&&e.run((()=>this._processIndexQueue())););this._processWorkQueue(e),this._idleQueue.runTask(e)}}_processIndexQueue(){const e=this._indexQueue.shift(),t=this._loadNodePage(e);return this._indexPagesLoading.set(e,t),t.promise.then((t=>{this._index.addPage(e,t,this._elevationOffset),this._setUpdateViewNeeded()})).then((()=>{this._indexPagesLoading.delete(e)}),(()=>{this._indexPagesLoading.delete(e)})),!0}_processWorkQueue(e){for(;!e.done;){const t=this._scheduleWorkEntry();if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(t))return;this._processWorkEntry(t),e.madeProgress()}}_scheduleWorkEntry(){let e=this._workQueue.length;for(;e--;){const e=this._workQueue.shift();if(!e.remove.find((e=>!this._renderedNodes.has(e))))return e;this._workQueue.push(e)}return null}_processWorkEntry(e){if(0!==e.load.length)Promise.all(e.load.map((e=>{const t=new AbortController,i=this._memCache.pop(e.toString());return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(i)?this._loadingNodes.set(e,{abortController:t,promise:Promise.resolve(i)}):this._loadingNodes.has(e)||this._loadingNodes.set(e,{abortController:t,promise:this._loadNode(e,t.signal)}),this._loadingNodes.get(e).promise}))).then((t=>{for(let i=0;i<e.load.length;i++)if(t[i]){const r=this._setupRendererData(e.load[i],t[i]);this._addToRenderer(r)}for(const i of e.remove)this._removeFromRenderer(i)})).catch((()=>{})).then((()=>{for(const t of e.load)this._loadingNodes.delete(t);this._updateLoading(),this._recalcWork&&!this._idleQueue.running&&0===this._indexQueue.length&&0===this._loadingNodes.size&&(this._recalcWork=!1,this._setUpdateViewNeeded())})),this._updateLoading();else for(const t of e.remove)this._removeFromRenderer(t)}async _populateClassCodeCodedDomain(e,i){const r=\"CLASS_CODE\",s=this.layer.fieldsIndex.get(r);if(!s||s.domain)return;if(-1===e.indexOf(s.name))return;const o=await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__.result)(this.layer.queryCachedStatistics(r,{signal:i}));if(!1===o.ok)return;const n=o.value,a=n&&n.labels&&n.labels.labels;a&&Array.isArray(a)&&(s.domain=new _layers_support_CodedValueDomain_js__WEBPACK_IMPORTED_MODULE_23__[\"default\"]({name:\"CLASS_CODE\",codedValues:a.map((e=>new _layers_support_CodedValue_js__WEBPACK_IMPORTED_MODULE_22__[\"default\"]({code:e.value,name:e.label})))}))}async prepareFetchPopupFeatures(e){return this._codedDomainPopulationPromise||(this._codedDomainPopulationAbortController=new AbortController,this._codedDomainPopulationPromise=this._populateClassCodeCodedDomain(e,this._codedDomainPopulationAbortController.signal).then((()=>{this._codedDomainPopulationAbortController=null}))),this._codedDomainPopulationPromise}async whenGraphicAttributes(e,t){const r=this._splitGraphicsPerNode(e),s=this.layer.attributeStorageInfo,o=t.map((e=>(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getAttributeInfo)(s,e))),n=async(e,t)=>{const r=this._index.getNode(t);await (0,_core_asyncUtils_js__WEBPACK_IMPORTED_MODULE_1__.forEach)(o,(async t=>{const i=t.useElevation?await this._loadElevationAttributeFromGeometry(r.resourceId):await this._loadAndParseAttribute(r,t);if(i)for(const r of e)if(this._isValidPointGraphic(r)){const e=r.pointCloudMetadata.attributePointIndexInNode;this._encodeGraphicAttribute(t,i,e,r.attributes)}}))},a=[];return r.forEach(((e,t)=>{a.push(n(e,t))})),await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.eachAlways)(a),e}_isValidPointGraphic(e){return e instanceof _i3s_PointGraphic_js__WEBPACK_IMPORTED_MODULE_37__.PointGraphic&&e.pointCloudMetadata&&e.pointCloudMetadata.epoch===this._nodeLoadEpoch}_splitGraphicsPerNode(e){const t=new Map;for(const i of e){if(!this._isValidPointGraphic(i))continue;const e=i.pointCloudMetadata,r=t.get(e.nodeId);r?r.push(i):t.set(e.nodeId,[i])}return t}async _loadAndParseAttribute(e,t){const i=await this._loadAttribute(e.resourceId,t,null);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(i)?(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_36__.getAttributeValues)({attributeInfo:t,buffer:i},null,e.vertexCount):null}async _loadElevationAttributeFromGeometry(e){const t=this.layer.store.defaultGeometrySchema,i=(0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_36__.readGeometry)(t,await this._loadGeometry(e,null));return (0,_i3s_PointCloudWorkerUtil_js__WEBPACK_IMPORTED_MODULE_36__.elevationFromPositions)(i,i.length/3)}highlight(e){if(!e)return{remove(){}};const t=_core_Collection_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].isCollection(e)?e.toArray():Array.isArray(e)?e:[e];return this._renderer.highlight(t.map((e=>this._graphicToPointDefinition(e))))}_graphicToPointDefinition(e){if(!this._isValidPointGraphic(e))return null;const{nodeId:t,pointIndexInNode:i}=e.pointCloudMetadata;return null!=t&&null!=i?{nodeId:t,pointId:i}:null}_computeWork(){let e=0;for(const t of this._workQueue)e+=t.load.length+t.remove.length;return e+=this._loadingNodes.size,e+=(this._indexQueue.length+this._indexPagesLoading.size)*this._index.pageSize,e+=this._loadingInitNodePage?100:0,e+=this._updateViewNeeded?100:0,e}get updatingProgressValue(){if(this.suspended)return this._updateViewNeeded?0:1;const e=this._computeWork();return 1-Math.min(this._totalWork,e)/this._totalWork}_updateLoading(){this.notifyChange(\"updating\"),this.notifyChange(\"updatingProgressValue\")}canResume(){return super.canResume()&&this._layerIsVisible}isUpdating(){return this.suspended?this._updateViewNeeded:this._computeWork()>0}_initNodePages(){const e=this.layer.store.index,t=e.nodesPerPage||e.nodePerIndexBlock;return this._index=new _i3s_PagedNodeIndex_js__WEBPACK_IMPORTED_MODULE_34__[\"default\"](this.layer.spatialReference,this.view.renderCoordsHelper.spatialReference,t),this._cancelIndexLoading(),this._traverseVisible=this._index.createVisibilityTraverse(),this._loadingInitNodePage=!0,this._layerIsVisible=!0,this.notifyChange(\"suspended\"),this._updateLoading(),this._pageMultiplier=null!=e.nodesPerPage?1:e.nodePerIndexBlock,this._loadNodePage(0).promise.then((e=>{this._index.addPage(0,e,this._elevationOffset),this._loadingInitNodePage=!1,this._setUpdateViewNeeded()}))}_loadNodePage(e){const t=new AbortController,i=`${this.baseUrl}/nodepages/${e*this._pageMultiplier}`;return{promise:this._requestNodePage(i,t.signal).then((t=>t.nodes.map(((t,i)=>({resourceId:null!=t.resourceId?t.resourceId:e*this._index.pageSize+i,obb:t.obb,firstChild:t.firstChild,childCount:t.childCount,vertexCount:null!=t.vertexCount?t.vertexCount:t.pointCount,lodThreshold:null!=t.lodThreshold?t.lodThreshold:t.effectiveArea}))))),abortController:t}}_updateWorkQueues(){if(!this._updateViewNeeded)return!1;let e=this.inverseDensity/this._lodFactor*this._getLodMemoryFactor();const t=this.maximumPointCount*this._lodFactor*this._getLodMemoryFactor();let i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(r/(.75*t));for(;r>t;)e*=s,i=this._computeNodesForMinimumDensity(e),r=this._computePointCount(i),s=Math.sqrt(2);return this._displayNodes(i),this._updateViewNeeded=!1,this._updateLoading(),!0}_computePointCount(e){let t=0;for(let i=0;i<e.length;i++){const r=this._index.getNode(e[i]);r&&(t+=r.vertexCount)}return t}_getLodMemoryFactor(){return this.view.resourceController.memoryController.memoryFactor}_isRootNodeVisible(){let e=!1;return this._traverseVisible({frustum:this.view.state.contentCamera.frustum,clippingBox:this._clippingBox},{predicate:(t,i,r)=>(e=r,!1),pageMiss:()=>{}}),e}_computeNodesForMinimumDensity(e){const t=this.view.state.contentCamera,i=t.frustum,r=this._clippingBox,s=t.viewForward,o=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_15__.d)(s,t.eye),n=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_20__.fromNormalAndOffset)(s,-o,ce),a=t.perScreenPixelRatio/2,d=e*e,l=this._nodeIdArray;l.length=0;const{minScale:h,maxScale:u}=(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_46__.extractSafeScaleBounds)(this.layer),p=0===h&&0===u?e=>l.push(e):e=>{const t=this._getScale(e);(0,_support_layerViewUtils_js__WEBPACK_IMPORTED_MODULE_46__.scaleBoundsPredicate)(t,h,u)&&l.push(e)};return this._traverseVisible({frustum:i,clippingBox:r},{predicate:(e,t,i)=>{if(!i)return!1;if(0===t.childCount)return p(e),!1;const r=this._index.getRenderObb(e);return!(this._computeAveragePixelArea(r,t.lodThreshold,t.vertexCount,n,a)<=d)||(p(e),!1)},pageMiss:(e,t)=>{p(e),this._indexQueue.indexOf(t)<0&&this._indexQueue.push(t)}}),l}_getScale(e){let t=this._nodeScales.get(e);if(null==t){const i=this._index.getNode(e).obb.center;this._tmpPoint.x=i[0],this._tmpPoint.y=i[1],this._tmpPoint.z=i[2],t=this.view.basemapTerrain.getScale(this._tmpPoint),this._nodeScales.set(e,t)}return t}_computeAveragePixelArea(e,t,i,r,s){const o=1e-7,n=Math.max(o,(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_42__.minimumDistancePlane)(e,r));return t/(n*n)/(4*s*s)/i}_loadNode(e,t){try{return this._loadNodeAsync(e,t)}catch(i){throw (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.isAbortError)(i)||ue.error(i),i}}async _loadAdditionalUserAttributes(e,t,i){const r=this.layer.outFields;if(!r)return[];const s=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_27__.unpackFieldNames)(this.layer.fieldsIndex,r),o=new Set(e.map((e=>(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(e)?e.name:null))),a=this.layer.attributeStorageInfo,l=[];for(const n of s){if(o.has(n))continue;const e=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getAttributeInfo)(a,n);e&&l.push(t(e))}const h=await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.eachAlwaysValues)(l);return (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(i),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.mapSome)(h,(e=>e))}async _loadNodeAsync(e,t){const i=this._index.getNode(e),r=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getRendererInfo)(this.layer),s=(0,_i3s_PointCloudRendererUtil_js__WEBPACK_IMPORTED_MODULE_35__.getFilterInfo)(this.layer),o=i.resourceId,d=async e=>{if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(e))return null;if(e.useElevation)return{attributeInfo:e,buffer:null};const i=await this._loadAttribute(o,e,t);return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isSome)(i)?{attributeInfo:e,buffer:i}:null};return this._idleQueue.push((async()=>{const i=this._loadGeometry(o,t),{primaryAttribute:n,modulationAttribute:a}=r,l=d(n),h=d(a),u=s.map((e=>e.attributeInfo)),c=u.map((e=>d(e))),_=this._loadAdditionalUserAttributes([n,a,...u],d,t),[m,g,f,y,b]=await Promise.all([i,l,h,Promise.all(c),_]);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_5__.throwIfAborted)(t);const w={geometryBuffer:m,primaryAttributeData:g,modulationAttributeData:f,filterAttributesData:y,userAttributesData:b,schema:this.layer.store.defaultGeometrySchema,rendererInfo:r,filterInfo:s,obb:this._index.getRenderObb(e),elevationOffset:this._elevationOffset,inSR:this.layer.spatialReference.toJSON(),outSR:this.view.renderCoordsHelper.spatialReference.toJSON()};return this._worker.invoke(w,t)}),t)}async _loadGeometry(e,t){return this._requestData(`${this.baseUrl}/nodes/${e}/geometries/0`,t)}async _loadAttribute(e,t,i){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_4__.isNone)(t)||!t.storageInfo)return null;const r=t.storageInfo.key;return this._requestData(`${this.baseUrl}/nodes/${e}/attributes/${r}`,i)}_requestNodePage(e,t){const i={f:\"json\",token:this.layer.apiKey};return this._indexRequester.request(e,\"json\",{query:i,signal:t})}_requestData(e,t){return this._dataRequester.request(e,\"binary\",{query:{token:this.layer.apiKey},signal:t})}_removeFromRenderer(e){if(this._renderedNodes.has(e)){const t=this._renderer.removeNode(e);this._renderedNodes.delete(e),this._nodeScales.delete(e),this._memCache.put(t.id.toString(),t,ge(t))}}_addToRenderer(e){this._renderedNodes.has(e.id)||(this._renderedNodes.add(e.id),this._renderer.addNode(e))}_setupRendererData(e,t){const i=this._index.getNode(e),r=Math.sqrt(i.lodThreshold/i.vertexCount),s=this._index.getRenderObb(e);if((0,_i3s_PointRenderer_js__WEBPACK_IMPORTED_MODULE_38__.isInstanceOfNode)(t))return t.splatSize=r,t.obb=s,t.origin=(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_16__.a)(t.obb.center),t;const o=.01*Math.max(s.halfSize[0],s.halfSize[1],s.halfSize[2]);if(t.obb.halfSize[0]>s.halfSize[0]+o||t.obb.halfSize[1]>s.halfSize[1]+o||t.obb.halfSize[2]>s.halfSize[2]+o){if(this._maxLoggedBoxWarnings>0){const i=e=>`[${e.halfSize[0]}, ${e.halfSize[1]}, ${e.halfSize[2]}]`;ue.warn(`Node ${e} reported bounding box too small. got ${i(s)} but points cover ${i(t.obb)}`),0==--this._maxLoggedBoxWarnings&&ue.warn(\"  Too many bounding box errors, stopping reporting for this layer.\")}this._index.setRenderObb(e,t.obb)}return{id:e,coordinates:t.points,origin:(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_16__.a)(s.center),rgb:t.rgb,attributes:t.attributes,pointIdFilterMap:t.pointIdFilterMap,highlights:null,splatSize:r,obb:s,isLeaf:0===i.childCount}}getUsedMemory(){let e=0;return this._renderer.forEachNode((t=>{e+=ye,e+=(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_8__.estimateSize)(t.coordinates);for(const i of t.attributes){const t=i.values;(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_8__.isArrayBuffer)(t.buffer)&&(e+=(0,_core_typedArrayUtil_js__WEBPACK_IMPORTED_MODULE_8__.estimateSize)(t))}})),e}getUnloadedMemory(){const e=this._renderedNodes.size;if(e<4)return 0;const t=[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount));let i=this._loadingNodes.size;for(let r=0;r<this._workQueue.length;r++)i+=this._workQueue[r].load.length,i-=this._workQueue[r].remove.length;if(i<0)return 0;return i*t/e*((this.getUsedMemory()-e*ye)/t)+i*ye}ignoresMemoryFactor(){return!1}get performanceInfo(){return{nodes:this._renderedNodes.size,displayedNumberOfFeatures:[...this._renderedNodes].reduce(((e,t)=>e+this._index.getNode(t).vertexCount),0),maximumNumberOfFeatures:this.maximumPointCount,totalNumberOfFeatures:-1,core:null,\"Loading Nodes\":this._loadingNodes.size,\"Index Queue\":this._indexQueue.length,\"Work Queue\":this._workQueue.length,\"Idle Queue\":this._idleQueue.length}}get test(){return{index:this._index,visibleNodes:this._renderedNodes}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)()],_e.prototype,\"layer\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0,aliasOf:\"layer.parsedUrl.path\"})],_e.prototype,\"baseUrl\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"pointScale\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"useRealWorldSymbolSizes\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"pointSize\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"inverseDensity\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)()],_e.prototype,\"maximumPointCount\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"availableFields\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"_clippingBox\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"_elevationOffset\",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({type:Boolean})],_e.prototype,\"slicePlaneEnabled\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)()],_e.prototype,\"updating\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)(_support_updatingProperties_js__WEBPACK_IMPORTED_MODULE_43__.updatingProgress)],_e.prototype,\"updatingProgress\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_10__.property)({readOnly:!0})],_e.prototype,\"updatingProgressValue\",null),_e=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_14__.subclass)(\"esri.views.3d.layers.PointCloudLayerView3D\")],_e);const me=_e;function ge(e){return 5*e.coordinates.length+128}const fe=(0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_19__.create)(),ye=160;\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/PointCloudLayerView3D.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PointCloudWorkerHandle\": () => (/* binding */ e)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../core/workers/WorkerHandle.js */ \"./node_modules/@arcgis/core/core/workers/WorkerHandle.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass e extends _core_workers_WorkerHandle_js__WEBPACK_IMPORTED_MODULE_1__.WorkerHandle{constructor(t){super(\"PointCloudWorker\",\"transform\",t)}getTransferList(r){const e=[r.geometryBuffer];if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.primaryAttributeData)&&r.primaryAttributeData.buffer&&e.push(r.primaryAttributeData.buffer),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.modulationAttributeData)&&r.modulationAttributeData.buffer&&e.push(r.modulationAttributeData.buffer),(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(r.filterAttributesData))for(const u of r.filterAttributesData)(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(u)&&u.buffer&&e.push(u.buffer);for(const t of r.userAttributesData)t.buffer&&e.push(t.buffer);return e}}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/PointCloudWorkerHandle.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"nodeDiff\": () => (/* binding */ t),\n/* harmony export */   \"sortFrontToBack\": () => (/* binding */ g),\n/* harmony export */   \"splitWorkEntries\": () => (/* binding */ u),\n/* harmony export */   \"splitWorkEntry\": () => (/* binding */ d)\n/* harmony export */ });\n/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ \"./node_modules/@arcgis/core/chunks/vec3.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction t(e,t,g){for(let n=0;n<t.length;n++)r[n]=!1,o[n]=null;for(let r=0;r<e.length;r++)n[r]=!1,l[r]=null;for(let n=0;n<t.length;n++){const o=h(t[n],e,g);o>=0&&(r[n]=!0,null!=l[o]?l[o].push(t[n]):l[o]=[t[n]])}for(let l=0;l<e.length;l++){const r=h(e[l],t,g);r>=0&&(n[l]=!0,null!=o[r]?o[r].push(e[l]):o[r]=[e[l]])}const u=[];for(let r=0;r<e.length;r++)null!=l[r]||n[r]||u.push({load:[],remove:[e[r]]});for(let n=0;n<t.length;n++)null!=o[n]||r[n]||u.push({load:[t[n]],remove:[]});for(let n=0;n<t.length;n++)null!=o[n]&&(o[n].length>1||o[n][0]!==t[n])&&u.push({load:[t[n]],remove:o[n]});for(let n=0;n<e.length;n++)null!=l[n]&&(l[n].length>1||l[n][0]!==e[n])&&u.push({load:l[n],remove:[e[n]]});return u}const n=[!1],l=[null],r=[!1],o=[null];function h(e,t,n){let l=e;for(;l>0;){const e=t.indexOf(l);if(e>=0)return e;l=n.getParentId(l)}return t.indexOf(l)}function g(t,n,l){return t.sort(((t,r)=>{if(0===t.load.length&&0===r.load.length)return 0;if(0===t.load.length)return-1;if(0===r.load.length)return 1;if(0===t.remove.length&&0===r.remove.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(o,n)-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(h,n)}if(0===t.remove.length)return-1;if(0===r.remove.length)return 1;if(1===t.load.length&&1===r.load.length){const o=l.getRenderCenter(t.load[0]),h=l.getRenderCenter(r.load[0]);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(o,n)-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(h,n)}if(1===t.load.length)return-1;if(1===r.load.length)return 1;{const o=l.getRenderCenter(t.remove[0]),h=l.getRenderCenter(r.remove[0]);return (0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(o,n)-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_0__.d)(h,n)}}))}function u(e,t,n){for(let l=0;l<e.length;++l){const r=e[l];r.load.length>t&&1===r.remove.length&&d(e,r,n)}}function d(e,t,n){const l=[t.remove[0]],r=[];for(;1===l.length;){const e=l.pop();r.length=0;for(let o=0;o<t.load.length;o++){let h=t.load[o],g=n.getParentId(h);for(;g!==e;)h=g,g=n.getParentId(h);let u=l.indexOf(h);u<0&&(u=l.length,l.push(h),r.push([])),r[u].push(t.load[o])}}t.load=l;for(let o=0;o<l.length;o++)r[o].length>1?e.push({remove:[l[o]],load:r[o]}):l[o]=r[o][0]}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/LoDUtil.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ h)\n/* harmony export */ });\n/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ \"./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js\");\n/* harmony import */ var _I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./I3SUtil.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/I3SUtil.js\");\n/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ \"./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass h{constructor(e,t,s){this._pages=[],this.pageSize=0,this._nodeSR=null,this._renderSR=null,this._nodeSR=e,this._renderSR=t,this.pageSize=s}addPage(e,t,s=0){for(;this._pages.length<e;)this._pages.push(null);const n=g(t,this._nodeSR,this._renderSR,s);this._pages[e]={nodes:t,renderObbs:n,parents:new Uint32Array(this.pageSize)},u(this._pages,this.pageSize)}hasPage(e){return!!this._pages[e]}getNode(e){const t=this.pageSize;return this._pages[l(e,t)].nodes[c(e,t)]}getRenderObb(e){const t=this.pageSize;return this._pages[l(e,t)].renderObbs[c(e,t)]}getRenderCenter(e){return this.getRenderObb(e).center}setRenderObb(e,t){const s=this.pageSize;(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__.set)(t,this._pages[l(e,s)].renderObbs[c(e,s)])}getParentId(e){const t=this.pageSize;return this._pages[l(e,t)].parents[c(e,t)]}hasNodes(e,t){const s=l(e,this.pageSize),n=l(e+t-1,this.pageSize);for(let i=s;i<=n;i++)if(null==this._pages[i])return!1;return!0}forEachNodeId(e){for(let t=0;t<this._pages.length;t++){const s=this._pages[t];if(s)for(let n=0;n<s.nodes.length;n++)e(t*this.pageSize+n)}}createVisibilityTraverse(){const t={index:this,queue:[],masks:[],tempAabb:(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__.create)()};return(e,s)=>a(t,e,s)}}function a(e,n,i){const p=e.index;if(!p.hasNodes(0,1))return;const h=e.queue;h.length=0,h.push(0);const a=e.masks;for(a.length=0,a.push(0);h.length>0;){const g=h.pop();let u=a.pop();const c=p.getNode(g),d=p.getRenderObb(g);let f=!0;if(null!=n.clippingBox){const i=1<<n.frustum.length;if(0==(u&i)){const o=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__.toAaBoundingBox)(d,e.tempAabb);(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__.contains)(n.clippingBox,o)?u|=i:(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_0__.intersects)(n.clippingBox,o)||(f=!1)}}for(let e=0;e<n.frustum.length&&f;e++){const t=1<<e;if(0==(u&t)){const s=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__.intersectPlane)(d,n.frustum[e]);s>0?f=!1:s<0&&(u|=t)}}if(i.predicate(g,c,f)){const e=c.firstChild,t=c.childCount;let s=!1;const n=l(e,p.pageSize),r=l(e+t-1,p.pageSize);for(let o=n;o<=r;o++)if(!p.hasPage(o)){i.pageMiss(g,o),s=!0;break}if(!s)for(let i=0;i<t;i++)h.push(e+i),a.push(u)}}}function g(e,t,s,i){const r=new _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_2__.ObbArray(e.length);for(let o=0;o<e.length;o++)(0,_I3SUtil_js__WEBPACK_IMPORTED_MODULE_1__.transformObb)(e[o].obb,t,r.obbs[o],s,i);return r.obbs}function u(e,t){const s=[0];for(;s.length;){const n=s.pop(),i=e[l(n,t)].nodes[c(n,t)];for(let r=0;r<i.childCount;r++){const o=i.firstChild+r;null!=e[l(o,t)]&&(e[l(o,t)].parents[c(o,t)]=n,s.push(o))}}}function l(e,t){return e/t|0}function c(e,t){return e%t}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PagedNodeIndex.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js":
/*!*********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js ***!
  \*********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getAttributeInfo\": () => (/* binding */ u),\n/* harmony export */   \"getFilterInfo\": () => (/* binding */ e),\n/* harmony export */   \"getFixedSizeAlgorithm\": () => (/* binding */ o),\n/* harmony export */   \"getRendererInfo\": () => (/* binding */ t),\n/* harmony export */   \"getSplatSizeAlgorithm\": () => (/* binding */ n),\n/* harmony export */   \"rendererUsesFixedSizes\": () => (/* binding */ r)\n/* harmony export */ });\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction t(t){const e=t.renderer,n=e&&e.type,o=e&&t.renderer.toJSON()||null;let r=null,i=!1;\"point-cloud-unique-value\"===n||\"point-cloud-stretch\"===n||\"point-cloud-class-breaks\"===n?r=u(t.attributeStorageInfo,e.field):\"point-cloud-rgb\"===n?(r=l(t.attributeStorageInfo,e.field),i=null!=r):(r=l(t.attributeStorageInfo,\"RGB\"),i=null!=r);let a=null;return e&&e.colorModulation&&(a=u(t.attributeStorageInfo,e.colorModulation.field)),{rendererJSON:o,isRGBRenderer:i,primaryAttribute:r,modulationAttribute:a}}function e(t){const e=t.filters;return e?e.map((e=>({filterJSON:e.toJSON(),attributeInfo:u(t.attributeStorageInfo,e.field)}))):[]}function n(t){const e=t&&t.pointSizeAlgorithm;return e&&\"splat\"===e.type?e:null}function o(t){const e=t&&t.pointSizeAlgorithm;return e&&\"fixed-size\"===e.type?e:null}function r(t){const e=t&&t.pointSizeAlgorithm;return!(!e||!e.type)&&\"fixed-size\"===e.type}function l(t,e){for(const n of t)if(n.name===e&&null!=n.attributeValues&&\"UInt8\"===n.attributeValues.valueType&&3===n.attributeValues.valuesPerElement)return{name:e,storageInfo:n,useElevation:!1};return null}function u(t,e){for(const n of t)if(n.name===e){const t=\"embedded-elevation\"===n.encoding;return{name:e,storageInfo:t?null:n,useElevation:t}}return\"elevation\"===e.toLowerCase()?{name:e,storageInfo:null,useElevation:!0}:null}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudRendererUtil.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"elevationFromPositions\": () => (/* binding */ d),\n/* harmony export */   \"evaluateRenderer\": () => (/* binding */ u),\n/* harmony export */   \"filterInPlace\": () => (/* binding */ m),\n/* harmony export */   \"getAttributeValues\": () => (/* binding */ a),\n/* harmony export */   \"readGeometry\": () => (/* binding */ c)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _renderers_PointCloudClassBreaksRenderer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../renderers/PointCloudClassBreaksRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudClassBreaksRenderer.js\");\n/* harmony import */ var _renderers_PointCloudStretchRenderer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/PointCloudStretchRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudStretchRenderer.js\");\n/* harmony import */ var _renderers_PointCloudUniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../renderers/PointCloudUniqueValueRenderer.js */ \"./node_modules/@arcgis/core/renderers/PointCloudUniqueValueRenderer.js\");\n/* harmony import */ var _I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./I3SBinaryReader.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/I3SBinaryReader.js\");\n/* harmony import */ var _LEPCC_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./LEPCC.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/LEPCC.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nfunction u(e,o,l,i){const{rendererJSON:s,isRGBRenderer:f}=e;let u=null,c=null;if(o&&f)u=o;else if(o&&\"pointCloudUniqueValueRenderer\"===s.type){c=_renderers_PointCloudUniqueValueRenderer_js__WEBPACK_IMPORTED_MODULE_3__[\"default\"].fromJSON(s);const e=c.colorUniqueValueInfos;u=new Uint8Array(3*i);const r=p(c.fieldTransformType);for(let t=0;t<i;t++){const n=(r?r(o[t]):o[t])+\"\";for(let o=0;o<e.length;o++)if(e[o].values.indexOf(n)>=0){u[3*t]=e[o].color.r,u[3*t+1]=e[o].color.g,u[3*t+2]=e[o].color.b;break}}}else if(o&&\"pointCloudStretchRenderer\"===s.type){c=_renderers_PointCloudStretchRenderer_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].fromJSON(s);const e=c.stops;u=new Uint8Array(3*i);const r=p(c.fieldTransformType);for(let t=0;t<i;t++){const n=r?r(o[t]):o[t],l=e.length-1;if(n<e[0].value)u[3*t]=e[0].color.r,u[3*t+1]=e[0].color.g,u[3*t+2]=e[0].color.b;else if(n>=e[l].value)u[3*t]=e[l].color.r,u[3*t+1]=e[l].color.g,u[3*t+2]=e[l].color.b;else for(let o=1;o<e.length;o++)if(n<e[o].value){const r=(n-e[o-1].value)/(e[o].value-e[o-1].value);u[3*t]=e[o].color.r*r+e[o-1].color.r*(1-r),u[3*t+1]=e[o].color.g*r+e[o-1].color.g*(1-r),u[3*t+2]=e[o].color.b*r+e[o-1].color.b*(1-r);break}}}else if(o&&\"pointCloudClassBreaksRenderer\"===s.type){c=_renderers_PointCloudClassBreaksRenderer_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"].fromJSON(s);const e=c.colorClassBreakInfos;u=new Uint8Array(3*i);const t=p(c.fieldTransformType);for(let r=0;r<i;r++){const n=t?t(o[r]):o[r];for(let o=0;o<e.length;o++)if(n>=e[o].minValue&&n<=e[o].maxValue){u[3*r]=e[o].color.r,u[3*r+1]=e[o].color.g,u[3*r+2]=e[o].color.b;break}}}else{u=new Uint8Array(3*i);for(let e=0;e<u.length;e++)u[e]=255}if(l&&c&&c.colorModulation){const e=c.colorModulation.minValue,o=c.colorModulation.maxValue,r=.3;for(let t=0;t<i;t++){const n=l[t],i=n>=o?1:n<=e?r:r+(1-r)*(n-e)/(o-e);u[3*t]=i*u[3*t],u[3*t+1]=i*u[3*t+1],u[3*t+2]=i*u[3*t+2]}}return u}function c(o,r){if(null==o.encoding||\"\"===o.encoding){const t=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.createGeometryIndexFromSchema)(r,o);if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(t.vertexAttributes.position))return;const n=(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.createTypedView)(r,t.vertexAttributes.position),s=t.header.fields,f=[s.offsetX,s.offsetY,s.offsetZ],u=[s.scaleX,s.scaleY,s.scaleZ],c=n.length/3,a=new Float64Array(3*c);for(let e=0;e<c;e++)a[3*e]=n[3*e]*u[0]+f[0],a[3*e+1]=n[3*e+1]*u[1]+f[1],a[3*e+2]=n[3*e+2]*u[2]+f[2];return a}if(\"lepcc-xyz\"===o.encoding)return (0,_LEPCC_js__WEBPACK_IMPORTED_MODULE_5__.decodeXYZ)(r).result}function a(e,r,t){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(e)&&e.attributeInfo.useElevation?d(r,t):(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(e)?(0,_I3SBinaryReader_js__WEBPACK_IMPORTED_MODULE_4__.readBinaryAttribute)(e.attributeInfo.storageInfo,e.buffer,t):null}function d(e,o){const r=new Float64Array(o);for(let t=0;t<o;t++)r[t]=e[3*t+2];return r}function m(e,o,r,t,n){const l=e.length/3;let i=0;for(let s=0;s<l;s++){let l=!0;for(let e=0;e<t.length&&l;e++){const{filterJSON:o}=t[e],r=n[e].values[s];switch(o.type){case\"pointCloudValueFilter\":{const e=\"exclude\"===o.mode;-1!==o.values.indexOf(r)===e&&(l=!1);break}case\"pointCloudBitfieldFilter\":{const e=b(o.requiredSetBits),t=b(o.requiredClearBits);(r&e)===e&&0==(r&t)||(l=!1);break}case\"pointCloudReturnFilter\":{const e=15&r,t=r>>>4&15,n=t>1,i=1===e,s=e===t;let f=!1;for(const r of o.includedReturns)if(\"last\"===r&&s||\"firstOfMany\"===r&&i&&n||\"lastOfMany\"===r&&s&&n||\"single\"===r&&!n){f=!0;break}f||(l=!1);break}}}l&&(r[i]=s,e[3*i]=e[3*s],e[3*i+1]=e[3*s+1],e[3*i+2]=e[3*s+2],o[3*i]=o[3*s],o[3*i+1]=o[3*s+1],o[3*i+2]=o[3*s+2],i++)}return i}function p(e){return null==e||\"none\"===e?null:\"low-four-bit\"===e?e=>15&e:\"high-four-bit\"===e?e=>(240&e)>>4:\"absolute-value\"===e?e=>Math.abs(e):\"modulo-ten\"===e?e=>e%10:null}function b(e){let o=0;for(const r of e||[])o|=1<<r;return o}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PointCloudWorkerUtil.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PointGraphic\": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../Graphic.js */ \"./node_modules/@arcgis/core/Graphic.js\");\n/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js\");\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ \"./node_modules/@arcgis/core/core/arrayUtils.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nlet t=class extends _Graphic_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]{constructor(r){super(r)}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({constructOnly:!0,clonable:\"reference\"})],t.prototype,\"pointCloudMetadata\",void 0),t=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)(\"esri.views.3d.layers.i3s.PointGraphic\")],t);\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PointGraphic.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js":
/*!**************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js ***!
  \**************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PointHighlights\": () => (/* binding */ s)\n/* harmony export */ });\n/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/handleUtils.js */ \"./node_modules/@arcgis/core/core/handleUtils.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../webgl-engine/lib/basicInterfaces.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/basicInterfaces.js\");\n/* harmony import */ var _webgl_engine_lib_Object3DStateID_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../webgl-engine/lib/Object3DStateID.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3DStateID.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass s{constructor(e){this._context=e,this._highlights=new Set}get hasHighlights(){return this._highlights.size>0}destroy(){this._highlights=null}add(t){const i=new o(t);return this._highlights.add(i),this._enableSet(i),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_0__.makeHandle)((()=>this._removeSet(i)))}_removeSet(e){this._disableSet(e),this._highlights.delete(e)}_enableSet(e){e.enabled||(e.enabled=!0,this._context.forEachNode((t=>this._enableSetForNode(e,t))))}_enableSetForNode(e,t){if(!e.enabled)return;const i=e.ids.get(t.id);i&&i.forEach((i=>this._context.addHighlight(t,i,e.id)))}_disableSet(e){e.enabled&&(e.enabled=!1,this._context.forEachNode((t=>this._disableSetForNode(e,t))))}_disableSetForNode(e,t){e.enabled||this._context.removeHighlight(t,e.id)}nodeAdded(e){this._highlights.forEach((t=>this._enableSetForNode(t,e)))}nodeRemoved(e){this._highlights.forEach((t=>this._disableSetForNode(t,e)))}removeAll(){this._highlights.forEach((e=>this._disableSet(e)))}}class o{constructor(e){this.id=new _webgl_engine_lib_Object3DStateID_js__WEBPACK_IMPORTED_MODULE_3__.Object3DStateID(_webgl_engine_lib_basicInterfaces_js__WEBPACK_IMPORTED_MODULE_2__.Object3DState.Highlight),this.ids=new Map,this.enabled=!1;for(const i of e)(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_1__.isSome)(i)&&this._add(i.nodeId,i.pointId)}_add(e,t){const i=this.ids.get(e);i?i.add(t):this.ids.set(e,new Set([t]))}}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PointRenderer\": () => (/* binding */ Q),\n/* harmony export */   \"isInstanceOfNode\": () => (/* binding */ X)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/PooledArray.js */ \"./node_modules/@arcgis/core/core/PooledArray.js\");\n/* harmony import */ var _chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../chunks/mat4.js */ \"./node_modules/@arcgis/core/chunks/mat4.js\");\n/* harmony import */ var _chunks_mat4f32_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../chunks/mat4f32.js */ \"./node_modules/@arcgis/core/chunks/mat4f32.js\");\n/* harmony import */ var _chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../chunks/vec3.js */ \"./node_modules/@arcgis/core/chunks/vec3.js\");\n/* harmony import */ var _chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../chunks/vec3f32.js */ \"./node_modules/@arcgis/core/chunks/vec3f32.js\");\n/* harmony import */ var _chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../chunks/vec3f64.js */ \"./node_modules/@arcgis/core/chunks/vec3f64.js\");\n/* harmony import */ var _chunks_vec4_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../chunks/vec4.js */ \"./node_modules/@arcgis/core/chunks/vec4.js\");\n/* harmony import */ var _geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingBox.js */ \"./node_modules/@arcgis/core/geometry/support/aaBoundingBox.js\");\n/* harmony import */ var _geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../geometry/support/plane.js */ \"./node_modules/@arcgis/core/geometry/support/plane.js\");\n/* harmony import */ var _geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../geometry/support/ray.js */ \"./node_modules/@arcgis/core/geometry/support/ray.js\");\n/* harmony import */ var _PointHighlights_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./PointHighlights.js */ \"./node_modules/@arcgis/core/views/3d/layers/i3s/PointHighlights.js\");\n/* harmony import */ var _support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../support/orientedBoundingBox.js */ \"./node_modules/@arcgis/core/views/3d/support/orientedBoundingBox.js\");\n/* harmony import */ var _webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/ShaderOutputOptions.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\");\n/* harmony import */ var _webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/Slice.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\");\n/* harmony import */ var _webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/output/OutputHighlight.glsl.js\");\n/* harmony import */ var _webgl_engine_lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../webgl-engine/lib/DefaultVertexAttributeLocations.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js\");\n/* harmony import */ var _webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../webgl-engine/lib/Intersector.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Intersector.js\");\n/* harmony import */ var _webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../webgl-engine/lib/IntersectorInterfaces.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/IntersectorInterfaces.js\");\n/* harmony import */ var _webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../webgl-engine/lib/RenderPass.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/RenderPass.js\");\n/* harmony import */ var _webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../webgl-engine/lib/VertexAttribute.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/VertexAttribute.js\");\n/* harmony import */ var _webgl_engine_shaders_PointRendererTechnique_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../webgl-engine/shaders/PointRendererTechnique.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js\");\n/* harmony import */ var _webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../webgl/BufferObject.js */ \"./node_modules/@arcgis/core/views/webgl/BufferObject.js\");\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../webgl/enums.js */ \"./node_modules/@arcgis/core/views/webgl/enums.js\");\n/* harmony import */ var _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../webgl/VertexArrayObject.js */ \"./node_modules/@arcgis/core/views/webgl/VertexArrayObject.js\");\n/* harmony import */ var _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../webgl/VertexElementDescriptor.js */ \"./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst K={positions:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_25__.VertexElementDescriptor(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_20__.VertexAttribute.POSITION,3,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.DataType.FLOAT,0,12)],colors:[new _webgl_VertexElementDescriptor_js__WEBPACK_IMPORTED_MODULE_25__.VertexElementDescriptor(_webgl_engine_lib_VertexAttribute_js__WEBPACK_IMPORTED_MODULE_20__.VertexAttribute.COLOR,3,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.DataType.UNSIGNED_BYTE,0,3,!0)]};class Q{constructor(e){this._params=e,this.type=_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__.IntersectorType.PCL,this.isGround=!1,this._bindParameters={inverseViewport:[0,0],highlightDepthTexture:null},this._highlights=new _PointHighlights_js__WEBPACK_IMPORTED_MODULE_11__.PointHighlights({forEachNode:e=>this.forEachNode(e),addHighlight:(e,i,t)=>this._addHighlight(e,i,t),removeHighlight:(e,i)=>this._removeHighlight(e,i)}),this.canRender=!0,this.layerUid=\"\",this._useFixedSizes=!1,this._scaleFactor=1,this._minSizePx=0,this._useRealWorldSymbolSizes=!1,this._size=0,this._sizePx=0,this._slicePlaneEnabled=!1,this._clipBox=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.create)(_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.POSITIVE_INFINITY),this._techniqueConfig=new _webgl_engine_shaders_PointRendererTechnique_js__WEBPACK_IMPORTED_MODULE_21__.PointRendererTechniqueConfiguration,this.tempMatrix4=(0,_chunks_mat4f32_js__WEBPACK_IMPORTED_MODULE_3__.c)(),this.tempVec3=(0,_chunks_vec3f32_js__WEBPACK_IMPORTED_MODULE_5__.c)(),this.nodes=new _core_PooledArray_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"]}get needsHighlight(){return this._highlights.hasHighlights}initializeRenderContext(e){this._context=e,this._techniqueRep=this._context.shaderTechniqueRepository,e.requestRender()}uninitializeRenderContext(){}intersect(e,i,t,s){const r=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),n=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),o=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),h=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)(),p=(0,_geometry_support_plane_js__WEBPACK_IMPORTED_MODULE_9__.create)(),g=e.camera.perScreenPixelRatio/2,S=e.camera.near,w=this._getSizeParams();(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.f)(n,s,t);const R=1/(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.l)(n);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.a)(n,n,R),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.o)(o,n),(0,_chunks_vec4_js__WEBPACK_IMPORTED_MODULE_7__.s)(p,n[0],n[1],n[2],-(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.d)(n,t));const M=new ne,I=new ne,T=new Array,L=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.create)(),E=(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.create)(this._clipBox);(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.offset)(E,-t[0],-t[1],-t[2],E),this.nodes.forAll((l=>{const c=l.splatSize*this._scaleFactor;let d=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.minimumDistancePlane)(l.obb,p),f=(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.maximumDistancePlane)(l.obb,p);d-=ee(c,d+S,w,g,l.isLeaf),f-=ee(c,f+S,w,g,l.isLeaf);const _=f<0,x=null!=M.dist&&null!=I.dist&&M.dist<d*R&&I.dist>f*R;if(_||x)return;const A=$(c,f+S,w,g,l.isLeaf);if(!(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.intersectLine)(l.obb,t,n,A))return;const y=A*A;(0,_support_orientedBoundingBox_js__WEBPACK_IMPORTED_MODULE_12__.toAaBoundingBox)(l.obb,L),(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.offset)(L,-t[0],-t[1],-t[2],L);const F=!(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.contains)(E,L);(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.f)(h,l.origin,t);const V=l.coordinates.length/3;for(let a=0;a<V;a++){if(r[0]=h[0]+l.coordinates[3*a],r[1]=h[1]+l.coordinates[3*a+1],r[2]=h[2]+l.coordinates[3*a+2],F&&!(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.containsPoint)(E,r))continue;const d=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.d)(r,n),p=(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.p)(r)-d*d;if(p>y)continue;let f=d+S;const _=ee(c,f,w,g,l.isLeaf);if(d-_<0)continue;f-=_;const x=$(c,f,w,g,l.isLeaf);if(p>x*x)continue;const z=(d-_)*R,b=e=>(e.point=ie(l,a,e.point),e.dist=z,e.normal=o,e.node=l,e.pointId=a,e.layerUid=this.layerUid,e);if((null==M.dist||z<M.dist)&&(null==i||i(t,s,z))&&b(M),e.options.store!==_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__.StoreResults.MIN&&(null==I.dist||z>I.dist)&&(null==i||i(t,s,z))&&b(I),e.options.store===_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__.StoreResults.ALL&&(null==i||i(t,s,z))){const e=new ne;T.push(b(e))}}}));const V=e=>{const{layerUid:i,node:t,pointId:s}=e;return{point:e.point,layerUid:i,graphicUid:s,createGraphic:()=>this._params.createGraphic(t,s,e.point)}},O=(e,i)=>{const t=V(i);e.set(this.type,t,i.dist,i.normal)};if(oe(M)){const i=e.results.min;(null==i.dist||M.dist<i.dist)&&O(i,M)}if(oe(I)&&e.options.store!==_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__.StoreResults.MIN){const i=e.results.max;(null==i.dist||I.dist>i.dist)&&O(i,I)}if(e.options.store===_webgl_engine_lib_IntersectorInterfaces_js__WEBPACK_IMPORTED_MODULE_18__.StoreResults.ALL){const i=(0,_geometry_support_ray_js__WEBPACK_IMPORTED_MODULE_10__.fromPoints)(t,s);for(const t of T){const s=(0,_webgl_engine_lib_Intersector_js__WEBPACK_IMPORTED_MODULE_17__.newIntersectorResult)(i);O(s,t),e.results.all.push(s)}}}prepareTechnique(e){if(0===this.nodes.length||e.pass!==_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL&&e.pass!==_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL_DEPTH&&e.pass!==_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL_HIGHLIGHT)return null;this.nodes.forAll((i=>{null==i.vao&&this._initNode(e,i)}));const i=this._getSizeParams();return this._techniqueConfig.drawScreenSize=i.drawScreenSpace,this._techniqueConfig.slicePlaneEnabled=this._slicePlaneEnabled,this._techniqueConfig.sceneHasOcludees=e.hasOccludees,this._techniqueConfig.output=e.pass===_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL_DEPTH?_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_13__.ShaderOutput.Depth:e.pass===_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL_HIGHLIGHT?_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_13__.ShaderOutput.Highlight:_webgl_engine_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_13__.ShaderOutput.Color,this._techniqueRep.releaseAndAcquire(_webgl_engine_shaders_PointRendererTechnique_js__WEBPACK_IMPORTED_MODULE_21__.PointRendererTechnique,this._techniqueConfig,this._technique)}render(e,i){const t=e.rctx,s=t.useTechnique(i),r=this._clipBox,h=!(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.equals)(r,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.POSITIVE_INFINITY,((e,i)=>e===i));h||((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(this.tempVec3,-1/0,-1/0,-1/0),s.setUniform3fv(\"clipMin\",this.tempVec3),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(this.tempVec3,1/0,1/0,1/0),s.setUniform3fv(\"clipMax\",this.tempVec3)),s.setUniformMatrix4fv(\"proj\",e.camera.projectionMatrix);e.pass===_webgl_engine_lib_RenderPass_js__WEBPACK_IMPORTED_MODULE_19__.RenderPass.MATERIAL_DEPTH&&s.setUniform2fv(\"nearFar\",e.camera.nearFar),e.isHighlightPass&&(this._bindParameters.inverseViewport[0]=1/e.camera.fullViewport[2],this._bindParameters.inverseViewport[1]=1/e.camera.fullViewport[3],this._bindParameters.highlightDepthTexture=e.highlightDepthTexture,(0,_webgl_engine_core_shaderLibrary_output_OutputHighlight_glsl_js__WEBPACK_IMPORTED_MODULE_15__.bindOutputHighlight)(s,this._bindParameters));const a=this._getSizeParams(),l=e.camera.pixelRatio;a.drawFixedSize&&s.setUniform2f(\"pointScale\",a.fixedSize*l,e.camera.fullHeight);const c=this._slicePlaneEnabled?e.sliceHelper&&e.sliceHelper.plane:null;this.nodes.forAll((d=>{if(0===d.coordinates.length||e.isHighlightPass&&!d.highlights)return;if(s.setUniform2f(\"screenMinMaxSize\",a.screenMinSize*l,Z(d.isLeaf)*l),!a.drawFixedSize){const i=d.splatSize*this._scaleFactor;s.setUniform2f(\"pointScale\",i*l,e.camera.fullHeight/l)}const u=d.origin;h&&((0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(this.tempVec3,r[0]-u[0],r[1]-u[1],r[2]-u[2]),s.setUniform3fv(\"clipMin\",this.tempVec3),(0,_chunks_vec3_js__WEBPACK_IMPORTED_MODULE_4__.s)(this.tempVec3,r[3]-u[0],r[4]-u[1],r[5]-u[2]),s.setUniform3fv(\"clipMax\",this.tempVec3)),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.f)(this.tempMatrix4,u),(0,_chunks_mat4_js__WEBPACK_IMPORTED_MODULE_2__.m)(this.tempMatrix4,e.camera.viewMatrix,this.tempMatrix4),s.setUniformMatrix4fv(\"modelView\",this.tempMatrix4),(0,_webgl_engine_core_shaderLibrary_Slice_glsl_js__WEBPACK_IMPORTED_MODULE_14__.bindSliceUniforms)(s,i.configuration,c,{origin:u}),t.bindVAO(d.vao),e.isHighlightPass?this._renderHighlightFragments(t,d):t.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.PrimitiveType.POINTS,0,d.coordinates.length/3)}))}_renderHighlightFragments(e,s){const r=s.highlights;if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(r))return;let n=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.unwrap)(r[0].component),o=n+1;for(let i=1;i<r.length;i++){const s=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.unwrap)(r[i].component);if(s!==o){const i=o-n;i>0&&e.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.PrimitiveType.POINTS,n,i),n=s}o=s+1}const h=o-n;h>0&&e.drawArrays(_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.PrimitiveType.POINTS,n,h)}set useFixedSizes(e){this._useFixedSizes!==e&&(this._useFixedSizes=e,this._requestRender())}get useFixedSizes(){return this._useFixedSizes}set scaleFactor(e){this._scaleFactor!==e&&(this._scaleFactor=e,this._requestRender())}get scaleFactor(){return this._scaleFactor}set minSizePx(e){this._minSizePx!==e&&(this._minSizePx=e,this._requestRender())}get minSizePx(){return this._minSizePx}set useRealWorldSymbolSizes(e){this._useRealWorldSymbolSizes!==e&&(this._useRealWorldSymbolSizes=e,this._requestRender())}get useRealWorldSymbolSizes(){return this._useRealWorldSymbolSizes}set size(e){this._size!==e&&(this._size=e,this._requestRender())}get size(){return this._size}set sizePx(e){this._sizePx!==e&&(this._sizePx=e,this._requestRender())}get sizePx(){return this._sizePx}set clippingBox(e){(0,_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.set)(this._clipBox,e||_geometry_support_aaBoundingBox_js__WEBPACK_IMPORTED_MODULE_8__.POSITIVE_INFINITY)}get slicePlaneEnabled(){return this._slicePlaneEnabled}set slicePlaneEnabled(e){this._slicePlaneEnabled!==e&&(this._slicePlaneEnabled=e,this._requestRender())}addNode(e){this.nodes.push(e),this._highlights.nodeAdded(e),this._requestRender()}removeNode(e){let i=null;return this.nodes.filterInPlace((t=>t.id!==e||(i=t,t.vao=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.disposeMaybe)(t.vao),this._highlights.nodeRemoved(t),!1))),this._requestRender(),i}forEachNode(e){this.nodes.forAll(e)}removeAll(){this.nodes.forAll((e=>e.vao=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.disposeMaybe)(e.vao))),this._highlights.removeAll(),this.nodes.clear(),this._requestRender()}highlight(e){return this._highlights.add(e)}_addHighlight(e,i,t){e.highlights=se(e.highlights,i,t),this._requestRender()}_removeHighlight(e,i){e.highlights=re(e.highlights,i),this._requestRender()}_initNode(e,i){const t=e.rctx;i.vao=new _webgl_VertexArrayObject_js__WEBPACK_IMPORTED_MODULE_24__.VertexArrayObject(t,_webgl_engine_lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_16__.Default3D,K,{positions:_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_22__.BufferObject.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.Usage.STATIC_DRAW,i.coordinates),colors:_webgl_BufferObject_js__WEBPACK_IMPORTED_MODULE_22__.BufferObject.createVertex(t,_webgl_enums_js__WEBPACK_IMPORTED_MODULE_23__.Usage.STATIC_DRAW,i.rgb)})}_requestRender(){this._context&&this._context.requestRender()}_getSizeParams(){const e=this._useFixedSizes,i=e&&!this._useRealWorldSymbolSizes;return{drawScreenSpace:i,drawFixedSize:e,fixedSize:i?this._sizePx:this._size,screenMinSize:e?0:this._minSizePx}}}function X(e){return e.hasOwnProperty(\"splatSize\")}function Z(e){return e?256:64}function $(e,i,t,s,r){if(t.drawScreenSpace)return t.fixedSize*i*s;const n=Z(r)*i*s;return t.drawFixedSize?Math.min(t.fixedSize/2,n):t.screenMinSize>0?Math.min(Math.max(t.screenMinSize*i*s,e/2),n):Math.min(e/2,n)}function ee(e,i,t,s,r){return t.drawScreenSpace?0:$(e,i,t,s,r)}function ie(e,t,s){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(s)&&(s=(0,_chunks_vec3f64_js__WEBPACK_IMPORTED_MODULE_6__.c)()),s[0]=e.origin[0]+e.coordinates[3*t],s[1]=e.origin[1]+e.coordinates[3*t+1],s[2]=e.origin[2]+e.coordinates[3*t+2],s}function te(i){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i.component)?i.component:-1}function se(e,t,s){(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(e)&&(e=[]);const r={component:t,id:s};e.push(r);const n=te(r);let o=e.length-1;for(;o>0&&n<te(e[o-1]);)[e[o-1],e[o]]=[e[o],e[o-1]],--o;return e}function re(e,t){if((0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isNone)(e))return e;const s=e.filter((e=>e.id!==t));return 0===s.length?null:s}class ne{constructor(){this.node=null,this.pointId=null,this.point=null,this.dist=null,this.normal=null,this.layerUid=\"\"}}function oe(i){return (0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i.dist)&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i.point)&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i.pointId)&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(i.node)}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/i3s/PointRenderer.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PopupSceneLayerView\": () => (/* binding */ c)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ \"./node_modules/@arcgis/core/core/Error.js\");\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ \"./node_modules/@arcgis/core/core/Logger.js\");\n/* harmony import */ var _core_accessorSupport_ensureType_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/accessorSupport/ensureType.js */ \"./node_modules/@arcgis/core/core/accessorSupport/ensureType.js\");\n/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/arrayUtils.js */ \"./node_modules/@arcgis/core/core/arrayUtils.js\");\n/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ \"./node_modules/@arcgis/core/core/has.js\");\n/* harmony import */ var _core_accessorSupport_set_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/accessorSupport/set.js */ \"./node_modules/@arcgis/core/core/accessorSupport/set.js\");\n/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ \"./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js\");\n/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../layers/support/fieldUtils.js */ \"./node_modules/@arcgis/core/layers/support/fieldUtils.js\");\n/* harmony import */ var _layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../layers/support/popupUtils.js */ \"./node_modules/@arcgis/core/views/layers/support/popupUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nconst c=c=>{let u=class extends c{_validateFetchPopupFeatures(e){const{layer:s}=this,{popupEnabled:t}=s;if(!t)return new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"scenelayerview3d:fetchPopupFeatures\",\"Popups are disabled\",{layer:s});return (0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_10__.getFetchPopupTemplate)(s,e)?void 0:new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"](\"scenelayerview3d:fetchPopupFeatures\",\"Layer does not define a popup template\",{layer:s})}async prepareFetchPopupFeatures(e){}async fetchPopupFeatures(e,r){const t=this._validateFetchPopupFeatures(r);if(t)return Promise.reject(t);const c=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(r)?r.clientGraphics:null;if(!c||0===c.length)return Promise.resolve([]);const u=\"scene\"===this.layer.type&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_2__.isSome)(this.layer.associatedLayer)?this.layer.associatedLayer:this.layer,n=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.unpackFieldNames)(this.layer.fieldsIndex,await (0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_10__.getRequiredFields)(u,(0,_layers_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_10__.getFetchPopupTemplate)(this.layer,r)));await this.prepareFetchPopupFeatures(n);const l=new Set,h=[],y=[];for(const s of c)(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_9__.populateMissingFields)(n,s,l)?y.push(s):h.push(s);return 0===y.length?Promise.resolve(h):this.whenGraphicAttributes(y,[...l]).catch((()=>y)).then((e=>h.concat(e)))}};return u=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)(\"esri.views.3d.layers.support.PopupSceneLayerView\")],u),u};\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/layers/support/PopupSceneLayerView.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"PointRendererTechnique\": () => (/* binding */ f),\n/* harmony export */   \"PointRendererTechniqueConfiguration\": () => (/* binding */ b)\n/* harmony export */ });\n/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ \"./node_modules/@arcgis/core/chunks/tslib.es6.js\");\n/* harmony import */ var _core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/shaderLibrary/ShaderOutputOptions.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/ShaderOutputOptions.js\");\n/* harmony import */ var _core_shaderTechnique_ReloadableShaderModule_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/shaderTechnique/ReloadableShaderModule.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ReloadableShaderModule.js\");\n/* harmony import */ var _core_shaderTechnique_ShaderTechnique_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/shaderTechnique/ShaderTechnique.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechnique.js\");\n/* harmony import */ var _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/shaderTechnique/ShaderTechniqueConfiguration.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderTechnique/ShaderTechniqueConfiguration.js\");\n/* harmony import */ var _lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/DefaultVertexAttributeLocations.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DefaultVertexAttributeLocations.js\");\n/* harmony import */ var _lib_Program_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/Program.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Program.js\");\n/* harmony import */ var _lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lib/StencilUtils.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/lib/StencilUtils.js\");\n/* harmony import */ var _chunks_PointRenderer_glsl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../chunks/PointRenderer.glsl.js */ \"./node_modules/@arcgis/core/chunks/PointRenderer.glsl.js\");\n/* harmony import */ var _webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../webgl/enums.js */ \"./node_modules/@arcgis/core/views/webgl/enums.js\");\n/* harmony import */ var _webgl_renderState_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../webgl/renderState.js */ \"./node_modules/@arcgis/core/views/webgl/renderState.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nclass f extends _core_shaderTechnique_ShaderTechnique_js__WEBPACK_IMPORTED_MODULE_3__.ShaderTechnique{constructor(e,r,t){super(e,r,t)}initializeProgram(e){const r=f.shader.get(),t=this.configuration,i=r.build({output:t.output,slicePlaneEnabled:t.slicePlaneEnabled,sliceHighlightDisabled:!1,sliceEnabledForVertexPrograms:!0,drawScreenSize:t.drawScreenSize});return new _lib_Program_js__WEBPACK_IMPORTED_MODULE_6__.Program(e.rctx,i,_lib_DefaultVertexAttributeLocations_js__WEBPACK_IMPORTED_MODULE_5__.Default3D)}initializePipeline(){return (0,_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_10__.makePipelineState)({depthTest:{func:_webgl_enums_js__WEBPACK_IMPORTED_MODULE_9__.CompareFunction.LESS},depthWrite:_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_10__.defaultDepthWriteParams,colorWrite:_webgl_renderState_js__WEBPACK_IMPORTED_MODULE_10__.defaultColorWriteParams,stencilWrite:this.configuration.sceneHasOcludees?_lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_7__.stencilWriteMaskOn:null,stencilTest:this.configuration.sceneHasOcludees?_lib_StencilUtils_js__WEBPACK_IMPORTED_MODULE_7__.stencilBaseAllZerosParams:null})}}f.shader=new _core_shaderTechnique_ReloadableShaderModule_js__WEBPACK_IMPORTED_MODULE_2__.ReloadableShaderModule(_chunks_PointRenderer_glsl_js__WEBPACK_IMPORTED_MODULE_8__.P,(()=>__webpack_require__.e(/*! import() */ \"node_modules_arcgis_core_views_3d_webgl-engine_shaders_PointRenderer_glsl_js\").then(__webpack_require__.bind(__webpack_require__, /*! ./PointRenderer.glsl.js */ \"./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRenderer.glsl.js\"))));class b extends _core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.ShaderTechniqueConfiguration{constructor(){super(...arguments),this.output=_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_1__.ShaderOutput.Color,this.slicePlaneEnabled=!1,this.drawScreenSize=!1,this.sceneHasOcludees=!1}}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.parameter)({count:_core_shaderLibrary_ShaderOutputOptions_js__WEBPACK_IMPORTED_MODULE_1__.ShaderOutput.COUNT})],b.prototype,\"output\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.parameter)()],b.prototype,\"slicePlaneEnabled\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.parameter)()],b.prototype,\"drawScreenSize\",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_shaderTechnique_ShaderTechniqueConfiguration_js__WEBPACK_IMPORTED_MODULE_4__.parameter)()],b.prototype,\"sceneHasOcludees\",void 0);\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/PointRendererTechnique.js?");

/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getFetchPopupTemplate\": () => (/* binding */ d),\n/* harmony export */   \"getRequiredFields\": () => (/* binding */ t)\n/* harmony export */ });\n/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../core/maybe.js */ \"./node_modules/@arcgis/core/core/maybe.js\");\n/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ \"./node_modules/@arcgis/core/layers/support/fieldUtils.js\");\n/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.23/esri/copyright.txt for details.\n*/\nasync function t(t,d=t.popupTemplate){if(!(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(d))return[];const i=await d.getRequiredFields(t.fieldsIndex),{lastEditInfoEnabled:n}=d,{objectIdField:s,typeIdField:a,globalIdField:o,relationships:u}=t;if(i.includes(\"*\"))return[\"*\"];const f=n?await (0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.getFeatureEditFields)(t):[],r=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_1__.fixFields)(t.fieldsIndex,[...i,...f]);return a&&r.push(a),r&&s&&t.fieldsIndex.has(s)&&-1===r.indexOf(s)&&r.push(s),r&&o&&t.fieldsIndex.has(o)&&-1===r.indexOf(o)&&r.push(o),u&&u.forEach((e=>{const{keyField:p}=e;r&&p&&t.fieldsIndex.has(p)&&-1===r.indexOf(p)&&r.push(p)})),r}function d(p,l){return p.popupTemplate?p.popupTemplate:(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(l)&&l.defaultPopupTemplateEnabled&&(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_0__.isSome)(p.defaultPopupTemplate)?p.defaultPopupTemplate:null}\n\n\n//# sourceURL=webpack://web/./node_modules/@arcgis/core/views/layers/support/popupUtils.js?");

/***/ })

}]);